/*! For license information please see main.5c041cd2.js.LICENSE.txt */
(()=>{var e={8:(e,t,r)=>{"use strict";r.d(t,{Gr:()=>d,HW:()=>c,QU:()=>h,WR:()=>l,ou:()=>u});var o=r(51),a=r(179),s=r(915),n=r(420);const i="tag.currentUserId";const l=async()=>{try{if("undefined"===typeof window)return null;let a=window.localStorage.getItem(i);if(!a){const e=["tag_current_user_id","currentUserId","user_id","tag.userId"];for(const t of e){const e=window.localStorage.getItem(t);if(e){console.log("[currentUser] Migrating from old key: ".concat(t," = ").concat(e)),a=e,window.localStorage.setItem(i,e),window.localStorage.removeItem(t);break}}}if(!a&&"undefined"!==typeof window)try{if(window.supabase)try{var e;const{data:{session:t}}=window.supabase.auth.getSession();null!==t&&void 0!==t&&null!==(e=t.user)&&void 0!==e&&e.id&&(console.log("[currentUser] Got user ID from global Supabase session:",t.user.id),a=t.user.id,window.localStorage.setItem(i,a))}catch(o){console.warn("[currentUser] Failed to get Supabase session:",o)}if(!a)try{var t;const{supabase:e}=await Promise.resolve().then(r.bind(r,32)),{data:{session:o}}=await e.auth.getSession();null!==o&&void 0!==o&&null!==(t=o.user)&&void 0!==t&&t.id&&(console.log("[currentUser] Got user ID from imported Supabase client:",o.user.id),a=o.user.id,window.localStorage.setItem(i,a))}catch(o){console.warn("[currentUser] Failed to get Supabase session from imported client:",o)}}catch(o){console.warn("[currentUser] Failed to get global Supabase session:",o)}return a||console.log("[currentUser] No user ID found, returning null"),a}catch(o){return console.warn("Failed to get current user ID:",o),null}},c=async()=>{if("undefined"!==typeof window&&window.__authContextUser)return console.log("[getCurrentUser] Using AuthContext user"),window.__authContextUser;try{const{supabase:o}=await Promise.resolve().then(r.bind(r,32)),{data:{user:s},error:n}=await o.auth.getUser();if(n)console.warn("[getCurrentUser] Supabase auth error:",n.message);else if(s){var e,t,a;return console.log("[getCurrentUser] Using Supabase user"),{id:s.id,email:s.email,name:(null===(e=s.user_metadata)||void 0===e?void 0:e.name)||(null===(t=s.email)||void 0===t?void 0:t.split("@")[0]),avatar:null===(a=s.user_metadata)||void 0===a?void 0:a.avatar_url,role:"artist",isVerified:!!s.email_confirmed_at}}}catch(u){console.warn("[getCurrentUser] Failed to get Supabase user:",u)}const i=await l();if(!i)return console.log("[getCurrentUser] No userId found, returning null"),null;const c=(0,n.ug)(i);if(!c)return console.log("[getCurrentUser] No user info found for userId: ".concat(i,", returning null")),null;if("undefined"!==typeof window)try{const e=window.localStorage.getItem("tag.avatars.".concat(i));if(e){const t=JSON.parse(e);if(t&&t.avatarUrl)return(0,o.A)((0,o.A)({},c),{},{avatar:t.avatarUrl})}}catch(u){console.warn("[getCurrentUser] Failed to read avatar data:",u)}const d=(0,s.EP)(i);return d?(0,o.A)((0,o.A)({},c),{},{avatar:d}):(c.avatar&&(0,s.Ih)(i,c.avatar),c)},d=async e=>{await async function(e){try{if("undefined"===typeof window)return;await a.IG.setItem(i,e)}catch(t){console.warn("Failed to write current user ID:",t)}}(e),"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent("user:changed",{detail:{userId:e}}))},u=async()=>{try{const{getUnifiedAvatar:e}=await Promise.resolve().then(r.bind(r,313)),t=await l();if(t){const r=await e(t);if(r)return console.log("[getCurrentUserAvatar] Got avatar from unified service: ".concat(t)),r}const o=await c();return(null===o||void 0===o?void 0:o.avatar)||null}catch(e){console.warn("[getCurrentUserAvatar] Error getting unified avatar:",e);const t=await c();return(null===t||void 0===t?void 0:t.avatar)||null}},h=async()=>{try{if("undefined"!==typeof window)try{var e;const{supabase:t}=await Promise.resolve().then(r.bind(r,32)),{data:{session:o}}=await t.auth.getSession();if(null!==o&&void 0!==o&&null!==(e=o.user)&&void 0!==e&&e.id)return console.log("[currentUser] Got user ID from Supabase session:",o.user.id),await d(o.user.id),o.user.id}catch(t){console.warn("[currentUser] Failed to get Supabase session:",t)}return l()}catch(t){return console.warn("Failed to get current user ID async:",t),null}}},32:(e,t,r)=>{"use strict";r.d(t,{B:()=>tr,supabase:()=>er});class o extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",r=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=r}}class a extends o{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class s extends o{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class n extends o{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var i;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(i||(i={}));var l=function(e,t,r,o){return new(r||(r=Promise))(function(a,s){function n(e){try{l(o.next(e))}catch(t){s(t)}}function i(e){try{l(o.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(n,i)}l((o=o.apply(e,t||[])).next())})};class c{constructor(e){let{headers:t={},customFetch:o,region:a=i.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=a,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return Promise.resolve().then(r.bind(r,630)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}})(o)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;return l(this,void 0,void 0,function*(){try{const{headers:o,method:i,body:l}=t;let c={},{region:d}=t;d||(d=this.region);const u=new URL("".concat(this.url,"/").concat(e));let h;d&&"any"!==d&&(c["x-region"]=d,u.searchParams.set("forceFunctionRegion",d)),l&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&("undefined"!==typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=l):"string"===typeof l?(c["Content-Type"]="text/plain",h=l):"undefined"!==typeof FormData&&l instanceof FormData?h=l:(c["Content-Type"]="application/json",h=JSON.stringify(l)));const m=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),o),body:h}).catch(e=>{throw new a(e)}),p=m.headers.get("x-relay-error");if(p&&"true"===p)throw new s(m);if(!m.ok)throw new n(m);let g,f=(null!==(r=m.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return g="application/json"===f?yield m.json():"application/octet-stream"===f?yield m.blob():"text/event-stream"===f?m:"multipart/form-data"===f?yield m.formData():yield m.text(),{data:g,error:null,response:m}}catch(o){return{data:null,error:o,response:o instanceof n||o instanceof s?o.context:void 0}}})}}var d=r(980);const{PostgrestClient:u,PostgrestQueryBuilder:h,PostgrestFilterBuilder:m,PostgrestTransformBuilder:p,PostgrestBuilder:g,PostgrestError:f}=d;const v=class{static detectEnvironment(){var e;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof r.g&&"undefined"!==typeof r.g.WebSocket)return{type:"native",constructor:r.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!==typeof process&&process.versions&&process.versions.node){const e=parseInt(process.versions.node.split(".")[0]);return e>=22?"undefined"!==typeof globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:"Node.js ".concat(e," detected but native WebSocket not found."),workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:"Node.js ".concat(e," detected without native WebSocket support."),workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+="\n\nSuggested solution: ".concat(e.workaround)),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},x="realtime-js/".concat("2.15.4"),b=1e4;var y,w,j,k,N,S;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(y||(y={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(w||(w={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(j||(j={})),function(e){e.websocket="websocket"}(k||(k={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(N||(N={}));class C{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const o=t.getUint8(1),a=t.getUint8(2);let s=this.HEADER_LENGTH+2;const n=r.decode(e.slice(s,s+o));s+=o;const i=r.decode(e.slice(s,s+a));s+=a;return{ref:null,topic:n,event:i,payload:JSON.parse(r.decode(e.slice(s,e.byteLength)))}}}class A{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(S||(S={}));const _=function(e,t){var r;const o=null!==(r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce((r,a)=>(r[a]=I(a,e,t,o),r),{})},I=(e,t,r,o)=>{const a=t.find(t=>t.name===e),s=null===a||void 0===a?void 0:a.type,n=r[e];return s&&!o.includes(s)?E(s,n):P(n)},E=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return M(t,r)}switch(e){case S.bool:return D(t);case S.float4:case S.float8:case S.int2:case S.int4:case S.int8:case S.numeric:case S.oid:return T(t);case S.json:case S.jsonb:return L(t);case S.timestamp:return R(t);case S.abstime:case S.date:case S.daterange:case S.int4range:case S.int8range:case S.money:case S.reltime:case S.text:case S.time:case S.timestamptz:case S.timetz:case S.tsrange:case S.tstzrange:default:return P(t)}},P=e=>e,D=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},T=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},L=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log("JSON parse error: ".concat(t)),e}return e},M=(e,t)=>{if("string"!==typeof e)return e;const r=e.length-1,o=e[r];if("{"===e[0]&&"}"===o){let o;const s=e.slice(1,r);try{o=JSON.parse("["+s+"]")}catch(a){o=s?s.split(","):[]}return o.map(e=>E(t,e))}return e},R=e=>"string"===typeof e?e.replace(" ","T"):e,F=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class U{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:b;this.channel=e,this.event=t,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:r}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var O,z,W,B;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(O||(O={}));class G{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{const{onJoin:t,onLeave:r,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=G.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=G.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},e=>{const{onJoin:t,onLeave:r,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=G.syncDiff(this.state,e,t,r),o())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,o){const a=this.cloneDeep(e),s=this.transformState(t),n={},i={};return this.map(a,(e,t)=>{s[e]||(i[e]=t)}),this.map(s,(e,t)=>{const r=a[e];if(r){const o=t.map(e=>e.presence_ref),a=r.map(e=>e.presence_ref),s=t.filter(e=>a.indexOf(e.presence_ref)<0),l=r.filter(e=>o.indexOf(e.presence_ref)<0);s.length>0&&(n[e]=s),l.length>0&&(i[e]=l)}else n[e]=t}),this.syncDiff(a,{joins:n,leaves:i},r,o)}static syncDiff(e,t,r,o){const{joins:a,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(a,(t,o)=>{var a;const s=null!==(a=e[t])&&void 0!==a?a:[];if(e[t]=this.cloneDeep(o),s.length>0){const r=e[t].map(e=>e.presence_ref),o=s.filter(e=>r.indexOf(e.presence_ref)<0);e[t].unshift(...o)}r(t,s,o)}),this.map(s,(t,r)=>{let a=e[t];if(!a)return;const s=r.map(e=>e.presence_ref);a=a.filter(e=>s.indexOf(e.presence_ref)<0),e[t]=a,o(t,a,r),0===a.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const o=e[r];return t[r]="metas"in o?o.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):o,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(z||(z={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(W||(W={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(B||(B={}));class H{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},r=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=w.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new U(this,j.join,this.params,this.timeout),this.rejoinTimer=new A(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=w.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=w.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=w.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=w.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=w.errored,this.rejoinTimer.scheduleTimeout())}),this._on(j.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new G(this),this.broadcastEndpointURL=F(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var r,o,a;if(this.socket.isConnected()||this.socket.connect(),this.state==w.closed){const{config:{broadcast:s,presence:n,private:i}}=this.params,l=null!==(o=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map(e=>e.filter))&&void 0!==o?o:[],c=!!this.bindings[W.PRESENCE]&&this.bindings[W.PRESENCE].length>0||!0===(null===(a=this.params.config.presence)||void 0===a?void 0:a.enabled),d={},u={broadcast:s,presence:Object.assign(Object.assign({},n),{enabled:c}),postgres_changes:l,private:i};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(t=>null===e||void 0===e?void 0:e(B.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(B.CLOSED)),this.updateJoinPayload(Object.assign({config:u},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:r}=t;var o;if(this.socket.setAuth(),void 0!==r){const t=this.bindings.postgres_changes,a=null!==(o=null===t||void 0===t?void 0:t.length)&&void 0!==o?o:0,s=[];for(let o=0;o<a;o++){const a=t[o],{filter:{event:n,schema:i,table:l,filter:c}}=a,d=r&&r[o];if(!d||d.event!==n||d.schema!==i||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=w.errored,void(null===e||void 0===e||e(B.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));s.push(Object.assign(Object.assign({},a),{id:d.id}))}return this.bindings.postgres_changes=s,void(e&&e(B.SUBSCRIBED))}null===e||void 0===e||e(B.SUBSCRIBED)}).receive("error",t=>{this.state=w.errored,null===e||void 0===e||e(B.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(B.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===w.joined&&e===W.PRESENCE&&(this.socket.log("channel","resubscribe to ".concat(this.topic," due to change in presence callbacks on joined channel")),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r,o;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var o,a,s;const n=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(s=null===(a=null===(o=this.params)||void 0===o?void 0:o.config)||void 0===a?void 0:a.broadcast)||void 0===s?void 0:s.ack)||r("ok"),n.receive("ok",()=>r("ok")),n.receive("error",()=>r("error")),n.receive("timeout",()=>r("timed out"))});{const{event:s,payload:n}=e,i={method:"POST",headers:{Authorization:this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:n,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,i,null!==(r=t.timeout)&&void 0!==r?r:this.timeout);return await(null===(o=e.body)||void 0===o?void 0:o.cancel()),e.ok?"ok":"error"}catch(a){return"AbortError"===a.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=w.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(j.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new U(this,j.leave,{},e),r.receive("ok",()=>{t(),o("ok")}).receive("timeout",()=>{t(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null===r||void 0===r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=w.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const o=new AbortController,a=setTimeout(()=>o.abort(),r),s=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:o.signal}));return clearTimeout(a),s}_push(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let o=new U(this,e,t,r);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel","discarded push due to buffer overflow: ".concat(e.event),e.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var o,a;const s=e.toLocaleLowerCase(),{close:n,error:i,leave:l,join:c}=j;if(r&&[n,i,l,c].indexOf(s)>=0&&r!==this._joinRef())return;let d=this._onMessage(s,t,r);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(o=this.bindings.postgres_changes)||void 0===o||o.filter(e=>{var t,r,o;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(o=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===o?void 0:o.toLocaleLowerCase())===s}).map(e=>e.callback(d,r)):null===(a=this.bindings[s])||void 0===a||a.filter(e=>{var r,o,a,n,i,l;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in e){const s=e.id,n=null===(r=e.filter)||void 0===r?void 0:r.event;return s&&(null===(o=t.ids)||void 0===o?void 0:o.includes(s))&&("*"===n||(null===n||void 0===n?void 0:n.toLocaleLowerCase())===(null===(a=t.data)||void 0===a?void 0:a.type.toLocaleLowerCase()))}{const r=null===(i=null===(n=null===e||void 0===e?void 0:e.filter)||void 0===n?void 0:n.event)||void 0===i?void 0:i.toLocaleLowerCase();return"*"===r||r===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===s}).map(e=>{if("object"===typeof d&&"ids"in d){const e=d.data,{schema:t,table:r,commit_timestamp:o,type:a,errors:s}=e,n={schema:t,table:r,commit_timestamp:o,eventType:a,new:{},old:{},errors:s};d=Object.assign(Object.assign({},n),this._getPayloadRecords(e))}e.callback(d,r)})}_isClosed(){return this.state===w.closed}_isJoined(){return this.state===w.joined}_isJoining(){return this.state===w.joining}_isLeaving(){return this.state===w.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,r){const o=e.toLocaleLowerCase(),a={type:o,filter:t,callback:r};return this.bindings[o]?this.bindings[o].push(a):this.bindings[o]=[a],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(e=>{var o;return!((null===(o=e.type)||void 0===o?void 0:o.toLocaleLowerCase())===r&&H.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(j.close,{},e)}_onError(e){this._on(j.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=w.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=_(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=_(e.columns,e.old_record)),t}}const q=()=>{},V=25e3,J=10,Z=100,K=[1e3,2e3,5e3,1e4];class Y{constructor(e,t){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=b,this.transport=null,this.heartbeatIntervalMs=V,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=q,this.ref=0,this.reconnectTimer=null,this.logger=q,this.conn=null,this.sendBuffer=[],this.serializer=new C,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return Promise.resolve().then(r.bind(r,630)).then(e=>{let{default:r}=e;return r(...t)}).catch(e=>{throw new Error("Failed to load @supabase/node-fetch: ".concat(e.message,". ")+"This is required for HTTP requests in Node.js environments without native fetch.")})}:fetch),function(){return t(...arguments)}},!(null===(o=null===t||void 0===t?void 0:t.params)||void 0===o?void 0:o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint="".concat(e,"/").concat(k.websocket),this.httpEndpoint=F(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=v.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error("".concat(t,"\n\n")+'To use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })');throw new Error("WebSocket not available: ".concat(t))}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case y.connecting:return N.Connecting;case y.open:return N.Open;case y.closing:return N.Closing;default:return N.Closed}}isConnected(){return this.connectionState()===N.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const r="realtime:".concat(e),o=this.getChannels().find(e=>e.topic===r);if(o)return o;{const r=new H("realtime:".concat(e),t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:r,payload:o,ref:a}=e,s=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push","".concat(t," ").concat(r," (").concat(a,")"),o),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},Z)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(i){this.log("error","error in heartbeat callback",i)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:r,payload:o,ref:a}=e,s=a?"(".concat(a,")"):"",n=o.status||"";this.log("receive","".concat(n," ").concat(t," ").concat(r," ").concat(s).trim(),o),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,o,a)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport","connected to ".concat(this.endpointURL())),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport","".concat(e)),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(j.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?",o=new URLSearchParams(t);return"".concat(e).concat(r).concat(o)}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=t||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const r={access_token:e,version:x};e&&t.updateJoinPayload(r),t.joinedOnce&&t._isJoined()&&t._push(j.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this.setAuth().catch(t=>{this.log("error","error setting auth in ".concat(e),t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(o){this.log("error","error in ".concat(e," callback"),o)}})}catch(r){this.log("error","error triggering ".concat(e," callbacks"),r)}}_setupReconnectionTimer(){this.reconnectTimer=new A(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},J)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,o,a,s,n,i,l,c;if(this.transport=null!==(t=null===e||void 0===e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(r=null===e||void 0===e?void 0:e.timeout)&&void 0!==r?r:b,this.heartbeatIntervalMs=null!==(o=null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&void 0!==o?o:V,this.worker=null!==(a=null===e||void 0===e?void 0:e.worker)&&void 0!==a&&a,this.accessToken=null!==(s=null===e||void 0===e?void 0:e.accessToken)&&void 0!==s?s:null,this.heartbeatCallback=null!==(n=null===e||void 0===e?void 0:e.heartbeatCallback)&&void 0!==n?n:q,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),((null===e||void 0===e?void 0:e.logLevel)||(null===e||void 0===e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(i=null===e||void 0===e?void 0:e.reconnectAfterMs)&&void 0!==i?i:e=>K[e-1]||1e4,this.encode=null!==(l=null===e||void 0===e?void 0:e.encode)&&void 0!==l?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(c=null===e||void 0===e?void 0:e.decode)&&void 0!==c?c:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===e||void 0===e?void 0:e.workerUrl}}}class Q extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function $(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class X extends Q{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ee extends Q{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var te=function(e,t,r,o){return new(r||(r=Promise))(function(a,s){function n(e){try{l(o.next(e))}catch(t){s(t)}}function i(e){try{l(o.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(n,i)}l((o=o.apply(e,t||[])).next())})};const re=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return Promise.resolve().then(r.bind(r,630)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}},oe=e=>{if(Array.isArray(e))return e.map(e=>oe(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[r,o]=e;const a=r.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[a]=oe(o)}),t};var ae=function(e,t,r,o){return new(r||(r=Promise))(function(a,s){function n(e){try{l(o.next(e))}catch(t){s(t)}}function i(e){try{l(o.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(n,i)}l((o=o.apply(e,t||[])).next())})};const se=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ne=(e,t,o)=>ae(void 0,void 0,void 0,function*(){const a=yield te(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(r.bind(r,630))).Response:Response});e instanceof a&&!(null===o||void 0===o?void 0:o.noResolveJson)?e.json().then(r=>{const o=e.status||500,a=(null===r||void 0===r?void 0:r.statusCode)||o+"";t(new X(se(r),o,a))}).catch(e=>{t(new ee(se(e),e))}):t(new ee(se(e),e))}),ie=(e,t,r,o)=>{const a={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&o?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(o)?(a.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),a.body=JSON.stringify(o)):a.body=o,(null===t||void 0===t?void 0:t.duplex)&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r)):a};function le(e,t,r,o,a,s){return ae(this,void 0,void 0,function*(){return new Promise((n,i)=>{e(r,ie(t,o,a,s)).then(e=>{if(!e.ok)throw e;return(null===o||void 0===o?void 0:o.noResolveJson)?e:e.json()}).then(e=>n(e)).catch(e=>ne(e,i,o))})})}function ce(e,t,r,o){return ae(this,void 0,void 0,function*(){return le(e,"GET",t,r,o)})}function de(e,t,r,o,a){return ae(this,void 0,void 0,function*(){return le(e,"POST",t,o,a,r)})}function ue(e,t,r,o,a){return ae(this,void 0,void 0,function*(){return le(e,"PUT",t,o,a,r)})}function he(e,t,r,o,a){return ae(this,void 0,void 0,function*(){return le(e,"DELETE",t,o,a,r)})}var me=function(e,t,r,o){return new(r||(r=Promise))(function(a,s){function n(e){try{l(o.next(e))}catch(t){s(t)}}function i(e){try{l(o.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(n,i)}l((o=o.apply(e,t||[])).next())})};const pe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ge={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class fe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;this.url=e,this.headers=t,this.bucketId=r,this.fetch=re(o)}uploadOrUpdate(e,t,r,o){return me(this,void 0,void 0,function*(){try{let a;const s=Object.assign(Object.assign({},ge),o);let n=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(s.upsert)});const i=s.metadata;"undefined"!==typeof Blob&&r instanceof Blob?(a=new FormData,a.append("cacheControl",s.cacheControl),i&&a.append("metadata",this.encodeMetadata(i)),a.append("",r)):"undefined"!==typeof FormData&&r instanceof FormData?(a=r,a.append("cacheControl",s.cacheControl),i&&a.append("metadata",this.encodeMetadata(i))):(a=r,n["cache-control"]="max-age=".concat(s.cacheControl),n["content-type"]=s.contentType,i&&(n["x-metadata"]=this.toBase64(this.encodeMetadata(i)))),(null===o||void 0===o?void 0:o.headers)&&(n=Object.assign(Object.assign({},n),o.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield("PUT"==e?ue:de)(this.fetch,"".concat(this.url,"/object/").concat(c),a,Object.assign({headers:n},(null===s||void 0===s?void 0:s.duplex)?{duplex:s.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(a){if($(a))return{data:null,error:a};throw a}})}upload(e,t,r){return me(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,o){return me(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),s=this._getFinalPath(a),n=new URL(this.url+"/object/upload/sign/".concat(s));n.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:ge.upsert},o),s=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&r instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!==typeof FormData&&r instanceof FormData?(e=r,e.append("cacheControl",t.cacheControl)):(e=r,s["cache-control"]="max-age=".concat(t.cacheControl),s["content-type"]=t.contentType);return{data:{path:a,fullPath:(yield ue(this.fetch,n.toString(),e,{headers:s})).Key},error:null}}catch(i){if($(i))return{data:null,error:i};throw i}})}createSignedUploadUrl(e,t){return me(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const o=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(o["x-upsert"]="true");const a=yield de(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(r),{},{headers:o}),s=new URL(this.url+a.url),n=s.searchParams.get("token");if(!n)throw new Q("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:n},error:null}}catch(r){if($(r))return{data:null,error:r};throw r}})}update(e,t,r){return me(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return me(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===r||void 0===r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(o){if($(o))return{data:null,error:o};throw o}})}copy(e,t,r){return me(this,void 0,void 0,function*(){try{return{data:{path:(yield de(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===r||void 0===r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if($(o))return{data:null,error:o};throw o}})}createSignedUrl(e,t,r){return me(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),a=yield de(this.fetch,"".concat(this.url,"/object/sign/").concat(o),Object.assign({expiresIn:t},(null===r||void 0===r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});const s=(null===r||void 0===r?void 0:r.download)?"&download=".concat(!0===r.download?"":r.download):"";return a={signedUrl:encodeURI("".concat(this.url).concat(a.signedURL).concat(s))},{data:a,error:null}}catch(o){if($(o))return{data:null,error:o};throw o}})}createSignedUrls(e,t,r){return me(this,void 0,void 0,function*(){try{const o=yield de(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers}),a=(null===r||void 0===r?void 0:r.download)?"&download=".concat(!0===r.download?"":r.download):"";return{data:o.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(this.url).concat(e.signedURL).concat(a)):null})),error:null}}catch(o){if($(o))return{data:null,error:o};throw o}})}download(e,t){return me(this,void 0,void 0,function*(){const r="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",o=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),a=o?"?".concat(o):"";try{const t=this._getFinalPath(e),o=yield ce(this.fetch,"".concat(this.url,"/").concat(r,"/").concat(t).concat(a),{headers:this.headers,noResolveJson:!0});return{data:yield o.blob(),error:null}}catch(s){if($(s))return{data:null,error:s};throw s}})}info(e){return me(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield ce(this.fetch,"".concat(this.url,"/object/info/").concat(t),{headers:this.headers});return{data:oe(e),error:null}}catch(r){if($(r))return{data:null,error:r};throw r}})}exists(e){return me(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,r,o){return ae(this,void 0,void 0,function*(){return le(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),o)})}(this.fetch,"".concat(this.url,"/object/").concat(t),{headers:this.headers}),{data:!0,error:null}}catch(r){if($(r)&&r instanceof ee){const e=r.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),o=[],a=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==a&&o.push(a);const s="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",n=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==n&&o.push(n);let i=o.join("&");return""!==i&&(i="?".concat(i)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(s,"/public/").concat(r).concat(i))}}}remove(e){return me(this,void 0,void 0,function*(){try{return{data:yield he(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers}),error:null}}catch(t){if($(t))return{data:null,error:t};throw t}})}list(e,t,r){return me(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},pe),t),{prefix:e||""});return{data:yield de(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),o,{headers:this.headers},r),error:null}}catch(o){if($(o))return{data:null,error:o};throw o}})}listV2(e,t){return me(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield de(this.fetch,"".concat(this.url,"/object/list-v2/").concat(this.bucketId),r,{headers:this.headers},t),error:null}}catch(r){if($(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e.replace(/^\/+/,""))}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}}const ve={"X-Client-Info":"storage-js/".concat("2.11.0")};var xe=function(e,t,r,o){return new(r||(r=Promise))(function(a,s){function n(e){try{l(o.next(e))}catch(t){s(t)}}function i(e){try{l(o.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(n,i)}l((o=o.apply(e,t||[])).next())})};class be{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;const a=new URL(e);if(null===o||void 0===o?void 0:o.useNewHostname){/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."))}this.url=a.href,this.headers=Object.assign(Object.assign({},ve),t),this.fetch=re(r)}listBuckets(){return xe(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers}),error:null}}catch(e){if($(e))return{data:null,error:e};throw e}})}getBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers}),error:null}}catch(t){if($(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return xe(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,"".concat(this.url,"/bucket"),{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if($(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return xe(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if($(r))return{data:null,error:r};throw r}})}emptyBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers}),error:null}}catch(t){if($(t))return{data:null,error:t};throw t}})}deleteBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield he(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if($(t))return{data:null,error:t};throw t}})}}class ye extends be{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new fe(this.url,this.headers,e,this.fetch)}}let we="";we="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const je={headers:{"X-Client-Info":"supabase-js-".concat(we,"/").concat("2.56.1")}},ke={schema:"public"},Ne={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Se={};var Ce=r(630),Ae=function(e,t,r,o){return new(r||(r=Promise))(function(a,s){function n(e){try{l(o.next(e))}catch(t){s(t)}}function i(e){try{l(o.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(n,i)}l((o=o.apply(e,t||[])).next())})};const _e=e=>{let t;return t=e||("undefined"===typeof fetch?Ce.default:fetch),function(){return t(...arguments)}},Ie=(e,t,r)=>{const o=_e(r),a="undefined"===typeof Headers?Ce.Headers:Headers;return(r,s)=>Ae(void 0,void 0,void 0,function*(){var n;const i=null!==(n=yield t())&&void 0!==n?n:e;let l=new a(null===s||void 0===s?void 0:s.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(i)),o(r,Object.assign(Object.assign({},s),{headers:l}))})};var Ee=function(e,t,r,o){return new(r||(r=Promise))(function(a,s){function n(e){try{l(o.next(e))}catch(t){s(t)}}function i(e){try{l(o.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(n,i)}l((o=o.apply(e,t||[])).next())})};const Pe="2.71.1",De=3e4,Te=9e4,Le={"X-Client-Info":"gotrue-js/".concat(Pe)},Me="X-Supabase-Api-Version",Re={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Fe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Ue extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Oe(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class ze extends Ue{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class We extends Ue{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Be extends Ue{constructor(e,t,r,o){super(e,r,o),this.name=t,this.status=r}}class Ge extends Be{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class He extends Be{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class qe extends Be{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ve extends Be{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Je extends Be{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ze extends Be{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ke(e){return Oe(e)&&"AuthRetryableFetchError"===e.name}class Ye extends Be{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Qe extends Be{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const $e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Xe=" \t\n\r=".split(""),et=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Xe.length;t+=1)e[Xe[t].charCodeAt(0)]=-2;for(let t=0;t<$e.length;t+=1)e[$e[t].charCodeAt(0)]=t;return e})();function tt(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r($e[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r($e[e]),t.queuedBits-=6}}function rt(e,t,r){const o=et[e];if(!(o>-1)){if(-2===o)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(t.queue=t.queue<<6|o,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function ot(e){const t=[],r=e=>{t.push(String.fromCodePoint(e))},o={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return void r(e);for(let r=1;r<6;r+=1)if(0===(e>>7-r&1)){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,o,r)};for(let n=0;n<e.length;n+=1)rt(e.charCodeAt(n),a,s);return t.join("")}function at(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}t(e)}function st(e,t){for(let r=0;r<e.length;r+=1){let o=e.charCodeAt(r);if(o>55295&&o<=56319){const t=1024*(o-55296)&65535;o=65536+(e.charCodeAt(r+1)-56320&65535|t),r+=1}at(o,t)}}function nt(e){const t=[],r={queue:0,queuedBits:0},o=e=>{t.push(e)};for(let a=0;a<e.length;a+=1)rt(e.charCodeAt(a),r,o);return new Uint8Array(t)}function it(e){const t=[],r={queue:0,queuedBits:0},o=e=>{t.push(e)};return e.forEach(e=>tt(e,r,o)),tt(null,r,o),t.join("")}const lt=()=>"undefined"!==typeof window&&"undefined"!==typeof document,ct={tested:!1,writable:!1},dt=()=>{if(!lt())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(ct.tested)return ct.writable;const e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ct.tested=!0,ct.writable=!0}catch(t){ct.tested=!0,ct.writable=!1}return ct.writable};const ut=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return Promise.resolve().then(r.bind(r,630)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}},ht=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},mt=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(o){return r}},pt=async(e,t)=>{await e.removeItem(t)};class gt{constructor(){this.promise=new gt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function ft(e){const t=e.split(".");if(3!==t.length)throw new Qe("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Fe.test(t[r]))throw new Qe("JWT not in base64url format");return{header:JSON.parse(ot(t[0])),payload:JSON.parse(ot(t[1])),signature:nt(t[2]),raw:{header:t[0],payload:t[1]}}}function vt(e){return("0"+e.toString(16)).substr(-2)}async function xt(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t),o=new Uint8Array(r);return Array.from(o).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function bt(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let r="";for(let o=0;o<56;o++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,vt).join("")}();let a=o;r&&(a+="/PASSWORD_RECOVERY"),await ht(e,"".concat(t,"-code-verifier"),a);const s=await xt(o);return[s,o===s?"plain":"s256"]}gt.promiseConstructor=Promise;const yt=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const wt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function jt(e){if(!wt.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function kt(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "'.concat(t,'" property of the session object is not supported. Please use getUser() instead.'))},set:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))},deleteProperty:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))}})}function Nt(e){return JSON.parse(JSON.stringify(e))}var St=function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(r[o[a]]=e[o[a]])}return r};const Ct=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),At=[502,503,504];async function _t(e){var t,r;if(!("object"===typeof(r=e)&&null!==r&&"status"in r&&"ok"in r&&"json"in r&&"function"===typeof r.json))throw new Ze(Ct(e),0);if(At.includes(e.status))throw new Ze(Ct(e),e.status);let o,a;try{o=await e.json()}catch(n){throw new We(Ct(n),n)}const s=function(e){const t=e.headers.get(Me);if(!t)return null;if(!t.match(yt))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(n){return null}}(e);if(s&&s.getTime()>=Re.timestamp&&"object"===typeof o&&o&&"string"===typeof o.code?a=o.code:"object"===typeof o&&o&&"string"===typeof o.error_code&&(a=o.error_code),a){if("weak_password"===a)throw new Ye(Ct(o),e.status,(null===(t=o.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===a)throw new Ge}else if("object"===typeof o&&o&&"object"===typeof o.weak_password&&o.weak_password&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new Ye(Ct(o),e.status,o.weak_password.reasons);throw new ze(Ct(o),e.status||500,a)}async function It(e,t,r,o){var a;const s=Object.assign({},null===o||void 0===o?void 0:o.headers);s[Me]||(s[Me]=Re.name),(null===o||void 0===o?void 0:o.jwt)&&(s.Authorization="Bearer ".concat(o.jwt));const n=null!==(a=null===o||void 0===o?void 0:o.query)&&void 0!==a?a:{};(null===o||void 0===o?void 0:o.redirectTo)&&(n.redirect_to=o.redirectTo);const i=Object.keys(n).length?"?"+new URLSearchParams(n).toString():"",l=await async function(e,t,r,o,a,s){const n=((e,t,r,o)=>{const a={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),a.body=JSON.stringify(o),Object.assign(Object.assign({},a),r))})(t,o,a,s);let i;try{i=await e(r,Object.assign({},n))}catch(l){throw console.error(l),new Ze(Ct(l),0)}i.ok||await _t(i);if(null===o||void 0===o?void 0:o.noResolveJson)return i;try{return await i.json()}catch(l){await _t(l)}}(e,t,r+i,{headers:s,noResolveJson:null===o||void 0===o?void 0:o.noResolveJson},{},null===o||void 0===o?void 0:o.body);return(null===o||void 0===o?void 0:o.xform)?null===o||void 0===o?void 0:o.xform(l):{data:Object.assign({},l),error:null}}function Et(e){var t;let r=null;var o;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=(o=e.expires_in,Math.round(Date.now()/1e3)+o)));return{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Pt(e){const t=Et(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function Dt(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Tt(e){return{data:e,error:null}}function Lt(e){const{action_link:t,email_otp:r,hashed_token:o,redirect_to:a,verification_type:s}=e,n=St(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:o,redirect_to:a,verification_type:s},user:Object.assign({},n)},error:null}}function Mt(e){return e}const Rt=["global","local","others"];var Ft=function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(r[o[a]]=e[o[a]])}return r};class Ut{constructor(e){let{url:t="",headers:r={},fetch:o}=e;this.url=t,this.headers=r,this.fetch=ut(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rt[0];if(Rt.indexOf(t)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(Rt.join(", ")));try{return await It(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Oe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await It(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Dt})}catch(r){if(Oe(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Ft(e,["options"]),o=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(o.new_email=null===r||void 0===r?void 0:r.newEmail,delete o.newEmail),await It(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:o,headers:this.headers,xform:Lt,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(Oe(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await It(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:Dt})}catch(t){if(Oe(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,o,a,s,n,i;try{const l={nextPage:null,lastPage:0,total:0},c=await It(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(a=null===(o=null===e||void 0===e?void 0:e.perPage)||void 0===o?void 0:o.toString())&&void 0!==a?a:""},xform:Mt});if(c.error)throw c.error;const d=await c.json(),u=null!==(s=c.headers.get("x-total-count"))&&void 0!==s?s:0,h=null!==(i=null===(n=c.headers.get("link"))||void 0===n?void 0:n.split(","))&&void 0!==i?i:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(r,"Page")]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(Oe(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){jt(e);try{return await It(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:Dt})}catch(t){if(Oe(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){jt(e);try{return await It(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:Dt})}catch(r){if(Oe(r))return{data:{user:null},error:r};throw r}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];jt(e);try{return await It(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:Dt})}catch(r){if(Oe(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){jt(e.userId);try{const{data:t,error:r}=await It(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async _deleteFactor(e){jt(e.userId),jt(e.id);try{return{data:await It(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(Oe(t))return{data:null,error:t};throw t}}}function Ot(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const zt=!!(globalThis&&dt()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Wt extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Bt extends Wt{}async function Gt(e,t,r){zt&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const o=new globalThis.AbortController;return t>0&&setTimeout(()=>{o.abort(),zt&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async o=>{if(!o){if(0===t)throw zt&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Bt('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(zt)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}zt&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return await r()}finally{zt&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const Ht={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Le,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function qt(e,t,r){return await r()}const Vt={};class Jt{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Jt.nextInstanceID,Jt.nextInstanceID+=1,this.instanceID>0&&lt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},Ht),e);if(this.logDebugMessages=!!o.debug,"function"===typeof o.debug&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Ut({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=ut(o.fetch),this.lock=o.lock||qt,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:lt()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Gt:this.lock=qt,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:dt()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ot(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Ot(this.memoryStorage)),lt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=Vt[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Vt[this.storageKey]=Object.assign(Object.assign({},Vt[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Vt[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Vt[this.storageKey]=Object.assign(Object.assign({},Vt[this.storageKey]),{cachedAt:e})}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger("GoTrueClient@".concat(this.instanceID," (").concat(Pe,") ").concat((new Date).toISOString()),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(o){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),lt()&&this.detectSessionInUrl&&"none"!==r){const{data:o,error:a}=await this._getSessionFromURL(t,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),function(e){return Oe(e)&&"AuthImplicitGrantRedirectError"===e.name}(a)){const t=null===(e=a.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:a}}return await this._removeSession(),{error:a}}const{session:s,redirectType:n}=o;return this._debug("#_initialize()","detected session in URL",s,"redirect type",n),await this._saveSession(s),setTimeout(async()=>{"recovery"===n?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Oe(t)?{error:t}:{error:new We("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,o;try{const a=await It(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(r=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===(o=null===e||void 0===e?void 0:e.options)||void 0===o?void 0:o.captchaToken}},xform:Et}),{data:s,error:n}=a;if(n||!s)return{data:{user:null,session:null},error:n};const i=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",i)),{data:{user:l,session:i},error:null}}catch(a){if(Oe(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,r,o;try{let a;if("email"in e){const{email:r,password:o,options:s}=e;let n=null,i=null;"pkce"===this.flowType&&([n,i]=await bt(this.storage,this.storageKey)),a=await It(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===s||void 0===s?void 0:s.emailRedirectTo,body:{email:r,password:o,data:null!==(t=null===s||void 0===s?void 0:s.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken},code_challenge:n,code_challenge_method:i},xform:Et})}else{if(!("phone"in e))throw new qe("You must provide either an email or phone number and a password");{const{phone:t,password:s,options:n}=e;a=await It(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:s,data:null!==(r=null===n||void 0===n?void 0:n.data)&&void 0!==r?r:{},channel:null!==(o=null===n||void 0===n?void 0:n.channel)&&void 0!==o?o:"sms",gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken}},xform:Et})}}const{data:s,error:n}=a;if(n||!s)return{data:{user:null,session:null},error:n};const i=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",i)),{data:{user:l,session:i},error:null}}catch(a){if(Oe(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:o,options:a}=e;t=await It(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:r,password:o,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:Pt})}else{if(!("phone"in e))throw new qe("You must provide either an email or phone number and a password");{const{phone:r,password:o,options:a}=e;t=await It(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:r,password:o,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:Pt})}}const{data:r,error:o}=t;return o?{data:{user:null,session:null},error:o}:r&&r.session&&r.user?(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:o}):{data:{user:null,session:null},error:new He}}catch(t){if(Oe(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,o,a;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(o=e.options)||void 0===o?void 0:o.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error('@supabase/auth-js: Unsupported chain "'.concat(t,'"'))}async signInWithSolana(e){var t,r,o,a,s,n,i,l,c,d,u,h;let m,p;if("message"in e)m=e.message,p=e.signature;else{const{chain:u,wallet:h,statement:g,options:f}=e;let v;if(lt())if("object"===typeof h)v=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");v=e.solana}else{if("object"!==typeof h||!(null===f||void 0===f?void 0:f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=h}const x=new URL(null!==(t=null===f||void 0===f?void 0:f.url)&&void 0!==t?t:window.location.href);if("signIn"in v&&v.signIn){const e=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===f||void 0===f?void 0:f.signInWithSolana),{version:"1",domain:x.host,uri:x.href}),g?{statement:g}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");m="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in v)||"function"!==typeof v.signMessage||!("publicKey"in v)||"object"!==typeof v||!v.publicKey||!("toBase58"in v.publicKey)||"function"!==typeof v.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=["".concat(x.host," wants you to sign in with your Solana account:"),v.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1","URI: ".concat(x.href),"Issued At: ".concat(null!==(o=null===(r=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===r?void 0:r.issuedAt)&&void 0!==o?o:(new Date).toISOString()),...(null===(a=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===a?void 0:a.notBefore)?["Not Before: ".concat(f.signInWithSolana.notBefore)]:[],...(null===(s=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===s?void 0:s.expirationTime)?["Expiration Time: ".concat(f.signInWithSolana.expirationTime)]:[],...(null===(n=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===n?void 0:n.chainId)?["Chain ID: ".concat(f.signInWithSolana.chainId)]:[],...(null===(i=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===i?void 0:i.nonce)?["Nonce: ".concat(f.signInWithSolana.nonce)]:[],...(null===(l=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===l?void 0:l.requestId)?["Request ID: ".concat(f.signInWithSolana.requestId)]:[],...(null===(d=null===(c=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...f.signInWithSolana.resources.map(e=>"- ".concat(e))]:[]].join("\n");const e=await v.signMessage((new TextEncoder).encode(m),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:r}=await It(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:it(p)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:Et});if(r)throw r;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:r}):{data:{user:null,session:null},error:new He}}catch(g){if(Oe(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(e){const t=await mt(this.storage,"".concat(this.storageKey,"-code-verifier")),[r,o]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:a}=await It(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Et});if(await pt(this.storage,"".concat(this.storageKey,"-code-verifier")),a)throw a;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==o&&void 0!==o?o:null}),error:a}):{data:{user:null,session:null,redirectType:null},error:new He}}catch(a){if(Oe(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:r,token:o,access_token:a,nonce:s}=e,n=await It(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:r,id_token:o,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:Et}),{data:i,error:l}=n;return l?{data:{user:null,session:null},error:l}:i&&i.session&&i.user?(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:i,error:l}):{data:{user:null,session:null},error:new He}}catch(t){if(Oe(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,o,a,s;try{if("email"in e){const{email:o,options:a}=e;let s=null,n=null;"pkce"===this.flowType&&([s,n]=await bt(this.storage,this.storageKey));const{error:i}=await It(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:o,data:null!==(t=null===a||void 0===a?void 0:a.data)&&void 0!==t?t:{},create_user:null===(r=null===a||void 0===a?void 0:a.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken},code_challenge:s,code_challenge_method:n},redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:t,options:r}=e,{data:n,error:i}=await It(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(o=null===r||void 0===r?void 0:r.data)&&void 0!==o?o:{},create_user:null===(a=null===r||void 0===r?void 0:r.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken},channel:null!==(s=null===r||void 0===r?void 0:r.channel)&&void 0!==s?s:"sms"}});return{data:{user:null,session:null,messageId:null===n||void 0===n?void 0:n.message_id},error:i}}throw new qe("You must provide either an email or phone number.")}catch(n){if(Oe(n))return{data:{user:null,session:null},error:n};throw n}}async verifyOtp(e){var t,r;try{let o,a;"options"in e&&(o=null===(t=e.options)||void 0===t?void 0:t.redirectTo,a=null===(r=e.options)||void 0===r?void 0:r.captchaToken);const{data:s,error:n}=await It(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:o,xform:Et});if(n)throw n;if(!s)throw new Error("An error occurred on token verification.");const i=s.session,l=s.user;return(null===i||void 0===i?void 0:i.access_token)&&(await this._saveSession(i),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",i)),{data:{user:l,session:i},error:null}}catch(o){if(Oe(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var t,r,o;try{let a=null,s=null;return"pkce"===this.flowType&&([a,s]=await bt(this.storage,this.storageKey)),await It(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(o=null===e||void 0===e?void 0:e.options)||void 0===o?void 0:o.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:s}),headers:this.headers,xform:Tt})}catch(a){if(Oe(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Ge;const{error:o}=await It(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(Oe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t="".concat(this.url,"/resend");if("email"in e){const{email:r,type:o,options:a}=e,{error:s}=await It(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:o,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:s}}if("phone"in e){const{phone:r,type:o,options:a}=e,{data:s,error:n}=await It(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:o,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:null===s||void 0===s?void 0:s.message_id},error:n}}throw new qe("You must provide either an email or phone number and a type")}catch(t){if(Oe(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(e){}})()),r}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await mt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=!!e.expires_at&&1e3*e.expires_at-Date.now()<Te;if(this._debug("#__loadSession()","session has".concat(r?"":" not"," expired"),"expires_at",e.expires_at),!r){if(this.userStorage){const t=await mt(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=kt()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,r,o)=>(t||"user"!==r||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,r,o))})}return{data:{session:e},error:null}}const{session:o,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await It(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:Dt}):await this._useSession(async e=>{var t,r,o;const{data:a,error:s}=e;if(s)throw s;return(null===(t=a.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await It(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(o=null===(r=a.session)||void 0===r?void 0:r.access_token)&&void 0!==o?o:void 0,xform:Dt}):{data:{user:null},error:new Ge}})}catch(t){if(Oe(t))return function(e){return Oe(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await pt(this.storage,"".concat(this.storageKey,"-code-verifier"))),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async r=>{const{data:o,error:a}=r;if(a)throw a;if(!o.session)throw new Ge;const s=o.session;let n=null,i=null;"pkce"===this.flowType&&null!=e.email&&([n,i]=await bt(this.storage,this.storageKey));const{data:l,error:c}=await It(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:n,code_challenge_method:i}),jwt:s.access_token,xform:Dt});if(c)throw c;return s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(r){if(Oe(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ge;const t=Date.now()/1e3;let r=t,o=!0,a=null;const{payload:s}=ft(e.access_token);if(s.exp&&(r=s.exp,o=r<=t),o){const{session:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return{data:{user:null,session:null},error:r};if(!t)return{data:{user:null,session:null},error:null};a=t}else{const{data:o,error:s}=await this._getUser(e.access_token);if(s)throw s;a={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(Oe(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:a}=t;if(a)throw a;e=null!==(r=o.session)&&void 0!==r?r:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new Ge;const{session:o,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Oe(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!lt())throw new Ve("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ve(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Je("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Ve("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Je("No code detected.");const{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;const o=new URL(window.location.href);return o.searchParams.delete("code"),window.history.replaceState(window.history.state,"",o.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:o,access_token:a,refresh_token:s,expires_in:n,expires_at:i,token_type:l}=e;if(!a||!n||!s||!l)throw new Ve("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(n);let u=c+d;i&&(u=parseInt(i));const h=u-c;1e3*h<=De&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(h,"s, should have been closer to ").concat(d,"s"));const m=u-d;c-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,u,c):c-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,u,c);const{data:p,error:g}=await this._getUser(a);if(g)throw g;const f={provider_token:r,provider_refresh_token:o,access_token:a,expires_in:d,expires_at:u,refresh_token:s,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:f,redirectType:e.type},error:null}}catch(r){if(Oe(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await mt(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var r;const{data:o,error:a}=t;if(a)return{error:a};const s=null===(r=o.session)||void 0===r?void 0:r.access_token;if(s){const{error:t}=await this.admin.signOut(s,e);if(t&&(!function(e){return Oe(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await pt(this.storage,"".concat(this.storageKey,"-code-verifier"))),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,o;try{const{data:{session:o},error:a}=t;if(a)throw a;await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(a){await(null===(o=this.stateChangeEmitters.get(e))||void 0===o?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,o=null;"pkce"===this.flowType&&([r,o]=await bt(this.storage,this.storageKey,!0));try{return await It(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:r,code_challenge_method:o,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(Oe(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:o}=await this._useSession(async t=>{var r,o,a,s,n;const{data:i,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,scopes:null===(o=e.options)||void 0===o?void 0:o.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:!0});return await It(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(n=null===(s=i.session)||void 0===s?void 0:s.access_token)&&void 0!==n?n:void 0})});if(o)throw o;return lt()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===r||void 0===r?void 0:r.url),{data:{provider:e.provider,url:null===r||void 0===r?void 0:r.url},error:null}}catch(r){if(Oe(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,o;const{data:a,error:s}=t;if(s)throw s;return await It(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(o=null===(r=a.session)||void 0===r?void 0:r.access_token)&&void 0!==o?o:void 0})})}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const a=Date.now();return await(r=async r=>(r>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await It(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:Et})),o=(e,t)=>{const r=200*Math.pow(2,e);return t&&Ke(t)&&Date.now()+r-a<De},new Promise((e,t)=>{(async()=>{for(let s=0;s<1/0;s++)try{const t=await r(s);if(!o(s,null,t))return void e(t)}catch(a){if(!o(s,a))return void t(a)}})()}))}catch(a){if(this._debug(t,"error",a),Oe(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(t,"end")}var r,o}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),lt()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await mt(this.storage,this.storageKey);if(a&&this.userStorage){let t=await mt(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:a.user},await ht(this.userStorage,this.storageKey+"-user",t)),a.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:kt()}else if(a&&!a.user&&!a.user){const e=await mt(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(a.user=e.user,await pt(this.storage,this.storageKey+"-user"),await ht(this.storage,this.storageKey,a)):a.user=kt()}if(this._debug(r,"session from storage",a),!this._isValidSession(a))return this._debug(r,"session is not valid"),void(null!==a&&await this._removeSession());const s=1e3*(null!==(t=a.expires_at)&&void 0!==t?t:1/0)-Date.now()<Te;if(this._debug(r,"session has".concat(s?"":" not"," expired with margin of ").concat(Te,"s")),s){if(this.autoRefreshToken&&a.refresh_token){const{error:e}=await this._callRefreshToken(a.refresh_token);e&&(console.error(e),Ke(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(a.user&&!0===a.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(a.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(a.user=e.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){return this._debug(r,"error",a),void console.error(a)}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Ge;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(o,"begin");try{this.refreshingDeferred=new gt;const{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new Ge;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const o={session:t.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(o,"error",a),Oe(a)){const e={session:null,error:a};return Ke(a)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const o="#_notifyAllSubscribers(".concat(e,")");this._debug(o,"begin",t,"broadcast = ".concat(r));try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(a){o.push(a)}});if(await Promise.all(a),o.length>0){for(let e=0;e<o.length;e+=1)console.error(o[e]);throw o[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await ht(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const o=Nt(e);await ht(this.storage,this.storageKey,o)}else{const e=Nt(t);await ht(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await pt(this.storage,this.storageKey),await pt(this.storage,this.storageKey+"-code-verifier"),await pt(this.storage,this.storageKey+"-user"),this.userStorage&&await pt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&lt()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),De);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:r}}=e;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const o=Math.floor((1e3*r.expires_at-t)/De);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(o," ticks, a tick lasts ").concat(De,"ms, refresh threshold is ").concat(3," ticks")),o<=3&&await this._callRefreshToken(r.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof Wt))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!lt()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const o=["provider=".concat(encodeURIComponent(t))];if((null===r||void 0===r?void 0:r.redirectTo)&&o.push("redirect_to=".concat(encodeURIComponent(r.redirectTo))),(null===r||void 0===r?void 0:r.scopes)&&o.push("scopes=".concat(encodeURIComponent(r.scopes))),"pkce"===this.flowType){const[e,t]=await bt(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});o.push(r.toString())}if(null===r||void 0===r?void 0:r.queryParams){const e=new URLSearchParams(r.queryParams);o.push(e.toString())}return(null===r||void 0===r?void 0:r.skipBrowserRedirect)&&o.push("skip_http_redirect=".concat(r.skipBrowserRedirect)),"".concat(e,"?").concat(o.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:o,error:a}=t;return a?{data:null,error:a}:await It(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(r=null===o||void 0===o?void 0:o.session)||void 0===r?void 0:r.access_token})})}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,o;const{data:a,error:s}=t;if(s)return{data:null,error:s};const n=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:i,error:l}=await It(this.fetch,"POST","".concat(this.url,"/factors"),{body:n,headers:this.headers,jwt:null===(r=null===a||void 0===a?void 0:a.session)||void 0===r?void 0:r.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(o=null===i||void 0===i?void 0:i.totp)||void 0===o?void 0:o.qr_code)&&(i.totp.qr_code="data:image/svg+xml;utf-8,".concat(i.totp.qr_code)),{data:i,error:null})})}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:o,error:a}=t;if(a)return{data:null,error:a};const{data:s,error:n}=await It(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(r=null===o||void 0===o?void 0:o.session)||void 0===r?void 0:r.access_token});return n?{data:null,error:n}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:n})})}catch(t){if(Oe(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:o,error:a}=t;return a?{data:null,error:a}:await It(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:{channel:e.channel},headers:this.headers,jwt:null===(r=null===o||void 0===o?void 0:o.session)||void 0===r?void 0:r.access_token})})}catch(t){if(Oe(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(null===e||void 0===e?void 0:e.factors)||[],o=r.filter(e=>"totp"===e.factor_type&&"verified"===e.status),a=r.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:r,totp:o,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:o},error:a}=e;if(a)return{data:null,error:a};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=ft(o.access_token);let n=null;s.aal&&(n=s.aal);let i=n;(null!==(r=null===(t=o.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==r?r:[]).length>0&&(i="aal2");return{data:{currentLevel:n,nextLevel:i,currentAuthenticationMethods:s.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const r=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>r)return t;const{data:o,error:a}=await It(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(a)throw a;return o.keys&&0!==o.keys.length?(this.jwks=o,this.jwks_cached_at=r,t=o.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let r=e;if(!r){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};r=e.session.access_token}const{header:o,payload:a,signature:s,raw:{header:n,payload:i}}=ft(r);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(a.exp);const l=o.alg&&!o.alg.startsWith("HS")&&o.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(o.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(r);if(e)throw e;return{data:{claims:a,header:o,signature:s},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(o.alg),d=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,s,function(e){const t=[];return st(e,e=>t.push(e)),new Uint8Array(t)}("".concat(n,".").concat(i))))throw new Qe("Invalid JWT signature");return{data:{claims:a,header:o,signature:s},error:null}}catch(r){if(Oe(r))return{data:null,error:r};throw r}}}Jt.nextInstanceID=0;const Zt=Jt;class Kt extends Zt{constructor(e){super(e)}}var Yt=function(e,t,r,o){return new(r||(r=Promise))(function(a,s){function n(e){try{l(o.next(e))}catch(t){s(t)}}function i(e){try{l(o.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(n,i)}l((o=o.apply(e,t||[])).next())})};class Qt{constructor(e,t,r){var o,a,s;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const n=(i=e).endsWith("/")?i:i+"/";var i;const l=new URL(n);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c="sb-".concat(l.hostname.split(".")[0],"-auth-token"),d=function(e,t){var r,o;const{db:a,auth:s,realtime:n,global:i}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),a),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},d),n),storage:{},global:Object.assign(Object.assign(Object.assign({},u),i),{headers:Object.assign(Object.assign({},null!==(r=null===u||void 0===u?void 0:u.headers)&&void 0!==r?r:{}),null!==(o=null===i||void 0===i?void 0:i.headers)&&void 0!==o?o:{})}),accessToken:()=>Ee(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==r&&void 0!==r?r:{},{db:ke,realtime:Se,auth:Object.assign(Object.assign({},Ne),{storageKey:c}),global:je});this.storageKey=null!==(o=d.auth.storageKey)&&void 0!==o?o:"",this.headers=null!==(a=d.global.headers)&&void 0!==a?a:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(s=d.auth)&&void 0!==s?s:{},this.headers,d.global.fetch),this.fetch=Ie(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new u(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new ye(this.storageUrl.href,this.headers,this.fetch,null===r||void 0===r?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new c(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,r)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Yt(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return null!==(t=null===(e=r.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient(e,t,r){let{autoRefreshToken:o,persistSession:a,detectSessionInUrl:s,storage:n,storageKey:i,flowType:l,lock:c,debug:d}=e;const u={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new Kt({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),t),storageKey:i,autoRefreshToken:o,persistSession:a,detectSessionInUrl:s,storage:n,flowType:l,lock:c,debug:d,fetch:r,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Y(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=r}}(function(){if("undefined"!==typeof window)return!1;if("undefined"===typeof process)return!1;const e=process.version;if(void 0===e||null===e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const $t="https://ooaicpvsjmmxuccqlzuh.supabase.co",Xt="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9vYWljcHZzam1teHVjY3FsenVoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjIyNjQsImV4cCI6MjA3MjMzODI2NH0.-YXCVgkGIpu0eTDGCoiSgnF5IHhyIYMITaB-oMjFt7s";const er=((e,t,r)=>new Qt(e,t,r))($t||"https://placeholder.supabase.co",Xt||"placeholder-key"),tr=async()=>{try{const{data:{session:e},error:t}=await er.auth.getSession();return t?(console.warn("\u26a0\ufe0f Supabase\u8fde\u63a5\u5931\u8d25\uff0c\u5c06\u4f7f\u7528mock\u6570\u636e:",t.message),!1):(console.log("\u2705 Supabase\u8fde\u63a5\u6210\u529f"),console.log("\u2139\ufe0f \u5f53\u524d\u4f1a\u8bdd\u72b6\u6001:",e?"\u5df2\u8ba4\u8bc1":"\u672a\u8ba4\u8bc1"),!0)}catch(e){return console.warn("\u26a0\ufe0f Supabase\u8fde\u63a5\u68c0\u67e5\u5931\u8d25\uff0c\u5c06\u4f7f\u7528mock\u6570\u636e:",e.message),!1}}},43:(e,t,r)=>{"use strict";e.exports=r(202)},51:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var o=r(526);function a(e,t,r){return(t=(0,o.A)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){a(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}},77:(e,t,r)=>{"use strict";r.d(t,{isMock:()=>o,qm:()=>a});const o=()=>{var e,t;return"true"===({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9vYWljcHZzam1teHVjY3FsenVoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjIyNjQsImV4cCI6MjA3MjMzODI2NH0.-YXCVgkGIpu0eTDGCoiSgnF5IHhyIYMITaB-oMjFt7s",REACT_APP_SUPABASE_ENABLE_MOCK_DATA:"false",REACT_APP_SUPABASE_ENABLE_SUPABASE:"true",REACT_APP_SUPABASE_URL:"https://ooaicpvsjmmxuccqlzuh.supabase.co"}.REACT_APP_USE_MOCK_API||(null===(e={})||void 0===e||null===(t=e.env)||void 0===t?void 0:t.VITE_USE_MOCK_API))},a=()=>(o()?(console.log("\ud83d\udd27 \u5f53\u524d\u4f7f\u7528 Mock API \u6a21\u5f0f"),console.log("\ud83d\udca1 \u4f7f\u7528 localStorage \u6a21\u62df\u540e\u7aef\u529f\u80fd"),console.log("\ud83d\udcdd \u4e0a\u4f20\u548c\u5c55\u793a\u6d41\u7a0b\u5df2\u5b8c\u5168\u8dd1\u901a")):(console.log("\ud83d\udd27 \u5f53\u524d\u4f7f\u7528 Supabase \u540e\u7aef"),console.log("\ud83d\udca1 \u4f7f\u7528\u771f\u5b9e\u6570\u636e\u5e93\u548c\u5b58\u50a8")),!0)},106:(e,t,r)=>{"use strict";r.d(t,{localStorageAdapter:()=>n});const o="tag_artwork_likes",a=()=>{try{const e=localStorage.getItem(o);return e?JSON.parse(e):{}}catch(e){return console.warn("Failed to get stored like data:",e),{}}},s=async(e,t)=>{try{if(!e||!t)return{success:!1,error:"Missing artworkId or userId"};const r=a();r[e]||(r[e]={totalLikes:0,userLikes:[]});const s=r[e],n=s.userLikes.indexOf(t);let i=!1;return-1===n?(s.userLikes.push(t),s.totalLikes++,i=!0,console.log("[MockLike] User ".concat(t," liked artwork ").concat(e))):(s.userLikes.splice(n,1),s.totalLikes--,i=!1,console.log("[MockLike] User ".concat(t," unliked artwork ").concat(e))),(e=>{try{localStorage.setItem(o,JSON.stringify(e))}catch(t){console.warn("Failed to save like data:",t)}})(r),console.log("[MockLike] Artwork ".concat(e," total likes: ").concat(s.totalLikes)),{success:!0,data:{liked:i,likes:s.totalLikes}}}catch(r){return console.error("[MockLike] Error toggling like:",r),{success:!1,error:r.message}}},n={toggleArtworkLike:async(e,t)=>{try{const r=await s(e,t);return console.log("[localStorageAdapter] Toggled like for artwork ".concat(e)),r}catch(r){return console.error("[localStorageAdapter] Error toggling like:",r),{success:!1,error:r.message}}},checkUserLikeStatus:async(e,t)=>{try{const r=await(async(e,t)=>{try{if(!e||!t)return{success:!1,error:"Missing artworkId or userId"};const r=a()[e];return r?{success:!0,data:{liked:r.userLikes.includes(t),likes:r.totalLikes}}:{success:!0,data:{liked:!1,likes:0}}}catch(r){return console.error("[MockLike] Error checking like status:",r),{success:!1,error:r.message}}})(e,t);return console.log("[localStorageAdapter] Checked like status for artwork ".concat(e)),r}catch(r){return console.error("[localStorageAdapter] Error checking like status:",r),{success:!1,error:r.message}}},getArtworkLikeCount:async e=>{try{const t=await(async e=>{try{if(!e)return{success:!1,error:"Missing artworkId"};const t=a()[e];return{success:!0,data:{likes:t?t.totalLikes:0}}}catch(t){return console.error("[MockLike] Error getting like count:",t),{success:!1,error:t.message}}})(e);return console.log("[localStorageAdapter] Got like count for artwork ".concat(e)),t}catch(t){return console.error("[localStorageAdapter] Error getting like count:",t),{success:!1,error:t.message}}}}},153:(e,t,r)=>{"use strict";var o=r(43),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var o,s={},c=null,d=null;for(o in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)n.call(t,o)&&!l.hasOwnProperty(o)&&(s[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===s[o]&&(s[o]=t[o]);return{$$typeof:a,type:e,key:c,ref:d,props:s,_owner:i.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},179:(e,t,r)=>{"use strict";r.d(t,{IG:()=>d});var o=r(77),a=r(337),s=r(32);class n{async getItem(e){try{return localStorage.getItem(e)}catch(t){return console.warn("[LocalStorageAdapter] Failed to get ".concat(e,":"),t),null}}async setItem(e,t){try{return localStorage.setItem(e,t),!0}catch(r){return console.warn("[LocalStorageAdapter] Failed to set ".concat(e,":"),r),!1}}async removeItem(e){try{return localStorage.removeItem(e),!0}catch(t){return console.warn("[LocalStorageAdapter] Failed to remove ".concat(e,":"),t),!1}}async keys(){try{const e=[];for(let t=0;t<localStorage.length;t++){const r=localStorage.key(t);r&&e.push(r)}return e}catch(e){return console.warn("[LocalStorageAdapter] Failed to get keys:",e),[]}}async clear(){try{return localStorage.clear(),!0}catch(e){return console.warn("[LocalStorageAdapter] Failed to clear:",e),!1}}async init(){try{const e="__storage_test__";localStorage.setItem(e,"test");const t="test"===localStorage.getItem(e);return localStorage.removeItem(e),t}catch(e){return console.warn("[LocalStorageAdapter] Failed to initialize:",e),!1}}}class i{constructor(){this.bucketName="portfolio"}async init(){try{const{data:e,error:t}=await s.supabase.storage.listBuckets();return t?(console.warn("[SupabaseStorageAdapter] Failed to connect to Supabase:",t),!1):(console.log("[SupabaseStorageAdapter] Successfully connected to Supabase Storage"),!0)}catch(e){return console.warn("[SupabaseStorageAdapter] Failed to initialize:",e),!1}}async getItem(e){try{const{data:t,error:r}=await s.supabase.storage.from(this.bucketName).createSignedUrl(e,3600);return r?(console.warn("[SupabaseStorageAdapter] Failed to get ".concat(e,":"),r),null):t.signedUrl}catch(t){return console.warn("[SupabaseStorageAdapter] Failed to get ".concat(e,":"),t),null}}async setItem(e,t){try{return console.log("[SupabaseStorageAdapter] setItem called for ".concat(e,", but file upload should use uploadFile method")),!0}catch(r){return console.warn("[SupabaseStorageAdapter] Failed to set ".concat(e,":"),r),!1}}async removeItem(e){try{const{error:t}=await s.supabase.storage.from(this.bucketName).remove([e]);return!t||(console.warn("[SupabaseStorageAdapter] Failed to remove ".concat(e,":"),t),!1)}catch(t){return console.warn("[SupabaseStorageAdapter] Failed to remove ".concat(e,":"),t),!1}}async keys(){try{const{data:e,error:t}=await s.supabase.storage.from(this.bucketName).list("",{limit:1e3});return t?(console.warn("[SupabaseStorageAdapter] Failed to get keys:",t),[]):e.map(e=>e.name)}catch(e){return console.warn("[SupabaseStorageAdapter] Failed to get keys:",e),[]}}async clear(){try{const e=await this.keys();if(0===e.length)return!0;const{error:t}=await s.supabase.storage.from(this.bucketName).remove(e);return!t||(console.warn("[SupabaseStorageAdapter] Failed to clear:",t),!1)}catch(e){return console.warn("[SupabaseStorageAdapter] Failed to clear:",e),!1}}async uploadFile(e,t){try{const{data:r,error:o}=await s.supabase.storage.from(this.bucketName).upload(e,t,{cacheControl:"3600",upsert:!0});return o?(console.warn("[SupabaseStorageAdapter] Failed to upload ".concat(e,":"),o),{success:!1,error:o.message}):(console.log("[SupabaseStorageAdapter] Successfully uploaded ".concat(e)),{success:!0,data:r})}catch(r){return console.warn("[SupabaseStorageAdapter] Failed to upload ".concat(e,":"),r),{success:!1,error:r.message}}}async getPublicUrl(e){try{const{data:t}=s.supabase.storage.from(this.bucketName).getPublicUrl(e);return t.publicUrl}catch(t){return console.warn("[SupabaseStorageAdapter] Failed to get public URL for ".concat(e,":"),t),null}}}class l{static async getAdapter(){if(this.instance)return this.instance;if((0,o.isMock)()){console.log("[StorageFactory] Mock mode: using LocalStorageAdapter");const e=new n;if(await e.init())return this.instance=e,e;console.warn("[StorageFactory] LocalStorage not available, falling back to MemoryStorageAdapter")}console.log("[StorageFactory] Non-Mock mode: using SupabaseStorageAdapter");try{const e=new i;if(await e.init())return console.log("[StorageFactory] Successfully initialized SupabaseStorageAdapter"),this.instance=e,e;throw new Error("Supabase Storage initialization failed")}catch(e){throw console.error("[StorageFactory] Failed to initialize SupabaseStorageAdapter:",e),console.error("[StorageFactory] This is a critical error - Supabase Storage must be available in production mode"),new Error("Supabase Storage is required but not available")}}static reset(){this.instance=null}}l.instance=null;const c=l.getAdapter.bind(l),d={getItem:async e=>(await c()).getItem(e),setItem:async(e,t)=>(await c()).setItem(e,t),removeItem:async e=>(await c()).removeItem(e),keys:async()=>(await c()).keys(),clear:async()=>(await c()).clear(),init:async()=>(await c()).init()};a.default},185:(e,t,r)=>{e.exports=r(392)},200:(e,t,r)=>{"use strict";r.d(t,{BD:()=>n,S5:()=>l,ep:()=>i,getPortfolioImageUrl:()=>s,jp:()=>h,qo:()=>c,updatePortfolioItem:()=>d,zB:()=>u});var o=r(51),a=(r(337),r(32));const s=async e=>{if(console.log("[Portfolio] Supabase: Getting image URL for ".concat(e)),!e)return console.warn("[Portfolio] filePath is empty or undefined"),{success:!1,error:"Invalid file path"};try{console.log("[Portfolio] Getting public URL from Supabase Storage: ".concat(e));const{data:t}=a.supabase.storage.from("portfolio").getPublicUrl(e);return t&&t.publicUrl?(console.log("[Portfolio] Successfully got public URL: ".concat(e)),{success:!0,data:{url:t.publicUrl,path:e}}):(console.log("[Portfolio] Image not found in Supabase Storage: ".concat(e)),{success:!1,error:"Image not found in Supabase Storage"})}catch(t){return console.error("[Portfolio] Error getting image URL:",t),{success:!1,error:t.message}}},n=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;console.log("[Portfolio] Supabase: Reading portfolio from database");try{if(!e){const{data:{user:t}}=await a.supabase.auth.getUser();if(!t)return console.error("[Portfolio] No authenticated user found"),{success:!1,error:"User not authenticated"};e=t.id}console.log("[Portfolio] Reading portfolio for user: ".concat(e));const{data:t,error:r}=await a.supabase.from("portfolio").select("*").eq("user_id",e).order("created_at",{ascending:!1});if(r)return console.error("[Portfolio] Supabase select error:",r),{success:!1,error:r.message};console.log("[Portfolio] Found ".concat(t.length," items for user ").concat(e));return{success:!0,data:t.map(e=>({id:e.id,title:e.title,description:e.description,category:e.category,tags:e.tags,software:e.software,imagePaths:e.image_paths,thumbnailPath:e.thumbnail_path,isPublic:e.is_public,createdAt:e.created_at,updatedAt:e.updated_at}))}}catch(t){return console.error("[Portfolio] Error reading portfolio:",t),{success:!1,error:t.message}}},i=async e=>{console.log("[Portfolio] Supabase: Reading public portfolio for user ".concat(e));try{if(!e)return console.error("[Portfolio] No userId provided"),{success:!1,error:"User ID is required"};const{data:t,error:r}=await a.supabase.from("portfolio").select("*").eq("user_id",e).eq("is_public",!0).order("created_at",{ascending:!1});if(r)return console.error("[Portfolio] Supabase select error:",r),{success:!1,error:r.message};console.log("[Portfolio] Found ".concat(t.length," public items for user ").concat(e," from database"));return{success:!0,data:t.map(e=>({id:e.id,title:e.title,description:e.description,category:e.category,tags:e.tags,software:e.software,imagePaths:e.image_paths,thumbnailPath:e.thumbnail_path,isPublic:e.is_public,createdAt:e.created_at,updatedAt:e.updated_at}))}}catch(t){return console.error("[Portfolio] Error reading public portfolio:",t),{success:!1,error:t.message}}},l=async()=>{console.log("[Portfolio] Supabase: Reading all public portfolios from database");try{const{data:e,error:t}=await a.supabase.from("portfolio_with_artist").select("*").order("created_at",{ascending:!1});if(t)return console.error("[Portfolio] Supabase select error:",t),{success:!1,error:t.message};console.log("[Portfolio] Found ".concat(e.length," total public items from database"));return{success:!0,data:e.map(e=>({id:e.id,title:e.title,description:e.description,category:e.category,tags:e.tags,software:e.software,imagePaths:e.image_paths,thumbnailPath:e.thumbnail_path,isPublic:e.is_public,createdAt:e.created_at,updatedAt:e.updated_at,profiles:{id:e.user_id,full_name:e.artist_name||"Unknown Artist",avatar_url:e.artist_avatar||"",role:e.artist_role||"Artist"}}))}}catch(e){return console.error("[Portfolio] Error reading all public portfolios:",e),{success:!1,error:e.message}}},c=async e=>{console.log("[Portfolio] Supabase: Creating new portfolio item");try{const t=e.userId;if(!t)return console.error("[Portfolio] No userId provided in portfolioData"),{success:!1,error:"User ID is required"};const r={user_id:t,title:e.title||"Untitled",description:e.description||"",tags:e.tags||[],software:e.software||[],image_paths:e.imagePaths||[],thumbnail_path:e.thumbnailPath||"",is_public:!1!==e.isPublic};console.log("[Portfolio] Inserting data:",r);const{data:o,error:s}=await a.supabase.from("portfolio").insert(r).select().single();return s?(console.error("[Portfolio] Supabase insert error:",s),{success:!1,error:s.message}):(console.log("[Portfolio] Successfully created item:",o),{success:!0,data:{id:o.id,title:o.title,description:o.description,category:o.category,tags:o.tags,imagePaths:o.image_paths,thumbnailPath:o.thumbnail_path,isPublic:o.is_public,createdAt:o.created_at,updatedAt:o.updated_at}})}catch(t){return console.error("[Portfolio] Error creating portfolio item:",t),{success:!1,error:t.message}}},d=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;console.log("[Portfolio] Supabase: Updating item ".concat(e));try{if(!r){const{data:{user:e}}=await a.supabase.auth.getUser();if(!e)return console.error("[Portfolio] No authenticated user found"),{success:!1,error:"User not authenticated"};r=e.id}const s=(0,o.A)((0,o.A)({},t),{},{updated_at:(new Date).toISOString()});console.log("[Portfolio] Updating data:",s);const{data:n,error:i}=await a.supabase.from("portfolio").update(s).eq("id",e).eq("user_id",r).select().single();return i?(console.error("[Portfolio] Supabase update error:",i),{success:!1,error:i.message}):(console.log("[Portfolio] Successfully updated item:",n),{success:!0,data:{id:n.id,title:n.title,description:n.description,category:n.category,tags:n.tags,software:n.software,imagePaths:n.image_paths,thumbnailPath:n.thumbnail_path,isPublic:n.is_public,createdAt:n.created_at,updatedAt:n.updated_at}})}catch(s){return console.error("[Portfolio] Error updating portfolio item:",s),{success:!1,error:s.message}}},u=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;console.log("[Portfolio] Supabase: Deleting item ".concat(e));try{if(!t){const{data:{user:e}}=await a.supabase.auth.getUser();if(!e)return console.error("[Portfolio] No authenticated user found"),{success:!1,error:"User not authenticated"};t=e.id}console.log("[Portfolio] Deleting item:",e,"for user:",t);const{error:r}=await a.supabase.from("portfolio").delete().eq("id",e).eq("user_id",t);return r?(console.error("[Portfolio] Supabase delete error:",r),{success:!1,error:r.message}):(console.log("[Portfolio] Successfully deleted item:",e),{success:!0,data:{id:e}})}catch(r){return console.error("[Portfolio] Error deleting portfolio item:",r),{success:!1,error:r.message}}},h=async(e,t)=>{console.log("[Portfolio] Supabase: Uploading image ".concat(e.name," for user ").concat(t));try{const r=e.name.split(".").pop().toLowerCase(),o="".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2),".").concat(r),s="".concat(t,"/").concat(o);console.log("[Portfolio] Supabase: Uploading to path: ".concat(s));const{data:n,error:i}=await a.supabase.storage.from("portfolio").upload(s,e,{cacheControl:"3600",upsert:!0});if(i)return console.error("[Portfolio] Supabase: Upload failed:",i),{success:!1,error:i.message};console.log("[Portfolio] Supabase: Successfully uploaded ".concat(s));const{data:l}=a.supabase.storage.from("portfolio").getPublicUrl(s);return{success:!0,data:{path:s,url:l.publicUrl}}}catch(r){return console.error("[Portfolio] Supabase: Error uploading image:",r),{success:!1,error:r.message}}}},202:(e,t)=>{"use strict";var r=Symbol.for("react.element"),o=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,f={};function v(e,t,r){this.props=e,this.context=t,this.refs=f,this.updater=r||p}function x(){}function b(e,t,r){this.props=e,this.context=t,this.refs=f,this.updater=r||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=v.prototype;var y=b.prototype=new x;y.constructor=b,g(y,v.prototype),y.isPureReactComponent=!0;var w=Array.isArray,j=Object.prototype.hasOwnProperty,k={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,o){var a,s={},n=null,i=null;if(null!=t)for(a in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(n=""+t.key),t)j.call(t,a)&&!N.hasOwnProperty(a)&&(s[a]=t[a]);var l=arguments.length-2;if(1===l)s.children=o;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===s[a]&&(s[a]=l[a]);return{$$typeof:r,type:e,key:n,ref:i,props:s,_owner:k.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var A=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,a,s,n){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var l=!1;if(null===e)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case o:l=!0}}if(l)return n=n(l=e),e=""===s?"."+_(l,0):s,w(n)?(a="",null!=e&&(a=e.replace(A,"$&/")+"/"),I(n,t,a,"",function(e){return e})):null!=n&&(C(n)&&(n=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(n,a+(!n.key||l&&l.key===n.key?"":(""+n.key).replace(A,"$&/")+"/")+e)),t.push(n)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var d=s+_(i=e[c],c);l+=I(i,t,a,d,n)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(i=e.next()).done;)l+=I(i=i.value,t,a,d=s+_(i,c++),n);else if("object"===i)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function E(e,t,r){if(null==e)return e;var o=[],a=0;return I(e,o,"","",function(e){return t.call(r,e,a++)}),o}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},T={transition:null},L={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:T,ReactCurrentOwner:k};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:E,forEach:function(e,t,r){E(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return E(e,function(){t++}),t},toArray:function(e){return E(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=a,t.Profiler=n,t.PureComponent=b,t.StrictMode=s,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.act=M,t.cloneElement=function(e,t,o){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=g({},e.props),s=e.key,n=e.ref,i=e._owner;if(null!=t){if(void 0!==t.ref&&(n=t.ref,i=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)j.call(t,c)&&!N.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=o;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];a.children=l}return{$$typeof:r,type:e.type,key:s,ref:n,props:a,_owner:i}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=T.transition;T.transition={};try{e()}finally{T.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,r){return D.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,r){return D.current.useReducer(e,t,r)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return D.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},210:function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(r(829)),s=o(r(736));class n{constructor(e){let{headers:t={},schema:r,fetch:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=o}from(e){const t=new URL("".concat(this.url,"/").concat(e));return new a.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new n(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:r=!1,get:o=!1,count:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n;let i;const l=new URL("".concat(this.url,"/rpc/").concat(e));let c;r||o?(i=r?"HEAD":"GET",Object.entries(t).filter(e=>{let[t,r]=e;return void 0!==r}).map(e=>{let[t,r]=e;return[t,Array.isArray(r)?"{".concat(r.join(","),"}"):"".concat(r)]}).forEach(e=>{let[t,r]=e;l.searchParams.append(t,r)})):(i="POST",c=t);const d=new Headers(this.headers);return a&&d.set("Prefer","count=".concat(a)),new s.default({method:i,url:l,headers:d,schema:this.schemaName,body:c,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}}t.default=n},218:e=>{var t,r,o,a,s,n,i,l,c,d,u,h,m,p,g,f=!1;function v(){if(!f){f=!0;var e=navigator.userAgent,v=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),x=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(h=/\b(iPhone|iP[ao]d)/.exec(e),m=/\b(iP[ao]d)/.exec(e),d=/Android/i.exec(e),p=/FBAN\/\w+;/i.exec(e),g=/Mobile/i.exec(e),u=!!/Win64/.exec(e),v){(t=v[1]?parseFloat(v[1]):v[5]?parseFloat(v[5]):NaN)&&document&&document.documentMode&&(t=document.documentMode);var b=/(?:Trident\/(\d+.\d+))/.exec(e);n=b?parseFloat(b[1])+4:t,r=v[2]?parseFloat(v[2]):NaN,o=v[3]?parseFloat(v[3]):NaN,(a=v[4]?parseFloat(v[4]):NaN)?(v=/(?:Chrome\/(\d+\.\d+))/.exec(e),s=v&&v[1]?parseFloat(v[1]):NaN):s=NaN}else t=r=o=s=a=NaN;if(x){if(x[1]){var y=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);i=!y||parseFloat(y[1].replace("_","."))}else i=!1;l=!!x[2],c=!!x[3]}else i=l=c=!1}}var x={ie:function(){return v()||t},ieCompatibilityMode:function(){return v()||n>t},ie64:function(){return x.ie()&&u},firefox:function(){return v()||r},opera:function(){return v()||o},webkit:function(){return v()||a},safari:function(){return x.webkit()},chrome:function(){return v()||s},windows:function(){return v()||l},osx:function(){return v()||i},linux:function(){return v()||c},iphone:function(){return v()||h},mobile:function(){return v()||h||m||d||g},nativeApp:function(){return v()||p},android:function(){return v()||d},ipad:function(){return v()||m}};e.exports=x},234:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var o=r-1>>>1,a=e[o];if(!(0<s(a,t)))break e;e[o]=t,e[r]=a,r=o}}function o(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var o=0,a=e.length,n=a>>>1;o<n;){var i=2*(o+1)-1,l=e[i],c=i+1,d=e[c];if(0>s(l,r))c<a&&0>s(d,l)?(e[o]=d,e[c]=r,o=c):(e[o]=l,e[i]=r,o=i);else{if(!(c<a&&0>s(d,r)))break e;e[o]=d,e[c]=r,o=c}}}return t}function s(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var n=performance;t.unstable_now=function(){return n.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],d=[],u=1,h=null,m=3,p=!1,g=!1,f=!1,v="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function y(e){for(var t=o(d);null!==t;){if(null===t.callback)a(d);else{if(!(t.startTime<=e))break;a(d),t.sortIndex=t.expirationTime,r(c,t)}t=o(d)}}function w(e){if(f=!1,y(e),!g)if(null!==o(c))g=!0,T(j);else{var t=o(d);null!==t&&L(w,t.startTime-e)}}function j(e,r){g=!1,f&&(f=!1,x(C),C=-1),p=!0;var s=m;try{for(y(r),h=o(c);null!==h&&(!(h.expirationTime>r)||e&&!I());){var n=h.callback;if("function"===typeof n){h.callback=null,m=h.priorityLevel;var i=n(h.expirationTime<=r);r=t.unstable_now(),"function"===typeof i?h.callback=i:h===o(c)&&a(c),y(r)}else a(c);h=o(c)}if(null!==h)var l=!0;else{var u=o(d);null!==u&&L(w,u.startTime-r),l=!1}return l}finally{h=null,m=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,N=!1,S=null,C=-1,A=5,_=-1;function I(){return!(t.unstable_now()-_<A)}function E(){if(null!==S){var e=t.unstable_now();_=e;var r=!0;try{r=S(!0,e)}finally{r?k():(N=!1,S=null)}}else N=!1}if("function"===typeof b)k=function(){b(E)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,D=P.port2;P.port1.onmessage=E,k=function(){D.postMessage(null)}}else k=function(){v(E,0)};function T(e){S=e,N||(N=!0,k())}function L(e,r){C=v(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,T(j))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return o(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var r=m;m=t;try{return e()}finally{m=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=m;m=e;try{return t()}finally{m=r}},t.unstable_scheduleCallback=function(e,a,s){var n=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?n+s:n:s=n,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:u++,callback:a,priorityLevel:e,startTime:s,expirationTime:i=s+i,sortIndex:-1},s>n?(e.sortIndex=s,r(d,e),null===o(c)&&e===o(d)&&(f?(x(C),C=-1):f=!0,L(w,s-n))):(e.sortIndex=i,r(c,e),g||p||(g=!0,T(j))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=m;return function(){var r=m;m=t;try{return e.apply(this,arguments)}finally{m=r}}}},240:(e,t,r)=>{"use strict";r.d(t,{followUser:()=>s,getFollowers:()=>l,getFollowing:()=>c,getUserProfile:()=>a,isFollowing:()=>i,unfollowUser:()=>n});r(619);var o=r(32);const a=async e=>{try{const{data:t,error:r}=await o.supabase.from("profiles").select("*").eq("id",e).single();if(r)return{success:!1,error:r.message};if(!t)return{success:!1,error:"User not found"};const[a,s]=await Promise.all([o.supabase.from("follows").select("id",{count:"exact"}).eq("following_id",e),o.supabase.from("follows").select("id",{count:"exact"}).eq("follower_id",e)]),n=a.count||0,i=s.count||0;return{success:!0,data:{id:t.id,name:t.full_name||"Unknown User",username:t.full_name||"unknown",avatar_url:t.avatar_url||null,created_at:t.created_at,updated_at:t.updated_at,followers_count:n,following_count:i}}}catch(t){return{success:!1,error:t.message}}},s=async(e,t)=>{try{const{error:r}=await o.supabase.from("follows").delete().eq("follower_id",e).eq("following_id",t);r&&console.warn("[followUser] Delete warning (record may not exist):",r);const{data:a,error:s}=await o.supabase.from("follows").insert({follower_id:e,following_id:t}).select().single();if(s)throw s;return console.log("[followUser] Successfully followed user:",a),{success:!0,data:a}}catch(r){return console.error("[followUser] Error:",r),{success:!1,error:r.message}}},n=async(e,t)=>{try{const{error:r}=await o.supabase.from("follows").delete().eq("follower_id",e).eq("following_id",t);if(r)throw r;return console.log("[unfollowUser] Successfully unfollowed"),{success:!0}}catch(r){return console.error("[unfollowUser] Error:",r),{success:!1,error:r.message}}},i=async(e,t)=>{try{console.log("[isFollowing] Checking follow status: ".concat(e," -> ").concat(t));const{data:r,error:a}=await o.supabase.from("follows").select("id").eq("follower_id",e).eq("following_id",t).maybeSingle();if(a)return console.error("[isFollowing] Query error:",a),{success:!1,error:a.message};const s=!!r;return console.log("[isFollowing] Query result:",{data:r,isFollowing:s}),{success:!0,isFollowing:s}}catch(r){return console.error("[isFollowing] Exception:",r),{success:!1,error:r.message}}},l=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const{page:r=1,limit:a=20}=t;console.log("[getFollowers] Getting followers for user: ".concat(e));const{count:s,error:n}=await o.supabase.from("follows").select("*",{count:"exact",head:!0}).eq("following_id",e);if(n)return console.error("[getFollowers] Count query error:",n),{success:!1,error:n.message};console.log("[getFollowers] Found ".concat(s," followers for user ").concat(e));const{data:i,error:l}=await o.supabase.from("follows").select("follower_id").eq("following_id",e).order("created_at",{ascending:!1}).range((r-1)*a,r*a-1);return l?(console.error("[getFollowers] Data query error:",l),{success:!0,data:Array(s).fill(null).map((e,t)=>({id:"follower_".concat(t)})),count:s}):{success:!0,data:i.map(e=>({id:e.follower_id})),count:s}}catch(r){return console.error("[getFollowers] Exception:",r),{success:!1,error:r.message}}},c=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const{page:r=1,limit:a=20}=t,{data:s,error:n}=await o.supabase.from("follows").select("following_id").eq("follower_id",e).order("created_at",{ascending:!1}).range((r-1)*a,r*a-1);return n?{success:!1,error:n.message}:{success:!0,data:s.map(e=>({id:e.following_id}))}}catch(r){return{success:!1,error:r.message}}}},255:(e,t,r)=>{"use strict";r.d(t,{userService:()=>g});var o=r(51),a=r(179),s=r(915),n=r(8);const i={getCurrentUser:async()=>{try{const t=await(0,n.WR)();if(!t)return console.warn("[localStorageAdapter] No current user ID found"),null;const r=await a.IG.getItem("user_".concat(t));if(!r)return console.log("[localStorageAdapter] No user data found for ".concat(t)),null;const o=JSON.parse(r),i=(0,s.EP)(t);i&&(o.avatar=i);const l=await a.IG.getItem("tag.avatars.".concat(t));if(l)try{const e=JSON.parse(l);e&&e.avatarUrl&&((0,s.Ih)(t,e.avatarUrl),o.avatar=e.avatarUrl)}catch(e){console.warn("[localStorageAdapter] Failed to parse avatar data:",e)}return console.log("[localStorageAdapter] Retrieved user data for ".concat(t)),o}catch(e){return console.error("[localStorageAdapter] Error getting current user:",e),null}},getUserById:async e=>{try{if(!e)return console.warn("[localStorageAdapter] No user ID provided"),null;const r=await a.IG.getItem("user_".concat(e));if(!r)return console.log("[localStorageAdapter] No user data found for ".concat(e)),null;const o=JSON.parse(r),n=(0,s.EP)(e);n&&(o.avatar=n);const i=await a.IG.getItem("tag.avatars.".concat(e));if(i)try{const t=JSON.parse(i);t&&t.avatarUrl&&((0,s.Ih)(e,t.avatarUrl),o.avatar=t.avatarUrl)}catch(t){console.warn("[localStorageAdapter] Failed to parse avatar data:",t)}return console.log("[localStorageAdapter] Retrieved user data for ".concat(e)),o}catch(t){return console.error("[localStorageAdapter] Error getting user ".concat(e,":"),t),null}},createUser:async(e,t)=>{try{if(!e||!t)return{success:!1,error:"Missing userId or userData"};const r=await i.getUserById(e);if(r)return console.log("[localStorageAdapter] User ".concat(e," already exists")),{success:!0,data:r};const s=(0,o.A)((0,o.A)({id:e},t),{},{createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()});return await a.IG.setItem("user_".concat(e),JSON.stringify(s)),console.log("[localStorageAdapter] Created user ".concat(e)),{success:!0,data:s}}catch(r){return console.error("[localStorageAdapter] Error creating user ".concat(e,":"),r),{success:!1,error:r.message}}},updateUser:async(e,t)=>{try{if(!e||!t)return{success:!1,error:"Missing userId or userData"};const r=await i.getUserById(e);if(!r)return console.warn("[localStorageAdapter] User ".concat(e," not found for update")),{success:!1,error:"User not found"};const s=(0,o.A)((0,o.A)((0,o.A)({},r),t),{},{updatedAt:(new Date).toISOString()});return await a.IG.setItem("user_".concat(e),JSON.stringify(s)),console.log("[localStorageAdapter] Updated user ".concat(e)),{success:!0,data:s}}catch(r){return console.error("[localStorageAdapter] Error updating user ".concat(e,":"),r),{success:!1,error:r.message}}},getAllUsers:async()=>{try{const t=[],r=await a.IG.keys();for(const o of r)if(o&&o.startsWith("user_"))try{const e=await a.IG.getItem(o);if(e){const r=JSON.parse(e);t.push(r)}}catch(e){console.warn("[localStorageAdapter] Failed to parse user data for key ".concat(o,":"),e)}return console.log("[localStorageAdapter] Retrieved ".concat(t.length," users")),t}catch(e){return console.error("[localStorageAdapter] Error getting all users:",e),[]}},deleteUser:async e=>{try{return e?(await a.IG.removeItem("user_".concat(e)),await a.IG.removeItem("tag.avatars.".concat(e)),console.log("[localStorageAdapter] Deleted user ".concat(e)),{success:!0}):{success:!1,error:"Missing userId"}}catch(t){return console.error("[localStorageAdapter] Error deleting user ".concat(e,":"),t),{success:!1,error:t.message}}}};var l=r(420);const c=async()=>{try{const e=await(0,n.WR)();if(!e)return console.warn("[mockUsersAdapter] No current user ID found"),null;const t=(0,l.ug)(e);return console.log("[mockUsersAdapter] Retrieved current user ".concat(e," (fallback)")),t}catch(e){return console.error("[mockUsersAdapter] Error getting current user:",e),null}},d=async e=>{try{if(!e)return console.warn("[mockUsersAdapter] No user ID provided"),null;const t=(0,l.ug)(e);return console.log("[mockUsersAdapter] Retrieved user ".concat(e," (fallback)")),t}catch(t){return console.error("[mockUsersAdapter] Error getting user ".concat(e,":"),t),null}},u=async()=>{try{const e=(0,l.CF)();return console.log("[mockUsersAdapter] Retrieved ".concat(e.length," users (fallback)")),e}catch(e){return console.error("[mockUsersAdapter] Error getting all users:",e),[]}},h=async()=>(console.log("[supabaseAdapter] getCurrentUser not implemented yet"),null),m=async e=>(console.log("[supabaseAdapter] getUserById not implemented yet for ".concat(e)),null),p=async(e,t)=>(console.log("[supabaseAdapter] updateUser not implemented yet for ".concat(e)),{success:!1,error:"Supabase adapter not implemented yet"}),g={getCurrentUser:async()=>{try{const e=await i.getCurrentUser();if(e)return console.log("[userService] Using LocalStorage user data"),e;const t=await h();return t?(console.log("[userService] Using Supabase user data"),t):(console.log("[userService] Using MockUsers fallback"),await c())}catch(e){return console.error("[userService] Error getting current user:",e),await c()}},getUserById:async e=>{try{const t=await i.getUserById(e);if(t)return console.log("[userService] Using LocalStorage user data for ".concat(e)),t;const r=await m(e);return r?(console.log("[userService] Using Supabase user data for ".concat(e)),r):(console.log("[userService] Using MockUsers fallback for ".concat(e)),await d(e))}catch(t){return console.error("[userService] Error getting user ".concat(e,":"),t),await d(e)}},updateUser:async(e,t)=>{try{const r=await i.updateUser(e,t);if(r.success)return console.log("[userService] Updated user ".concat(e," in LocalStorage")),r;const o=await p(e,t);return o.success?(console.log("[userService] Updated user ".concat(e," in Supabase")),o):(console.warn("[userService] Failed to update user ".concat(e)),{success:!1,error:"Failed to update user"})}catch(r){return console.error("[userService] Error updating user ".concat(e,":"),r),{success:!1,error:r.message}}},ensureUserIndexed:async e=>{try{const t=await g.getUserById(e);if(t)return console.log("[userService] User ".concat(e," already indexed")),{success:!0,data:t};const r=await d(e);if(r){const t=await i.createUser(e,r);return console.log("[userService] Created user index for ".concat(e)),t}return console.warn("[userService] No base data found for user ".concat(e)),{success:!1,error:"No base data found"}}catch(t){return console.error("[userService] Error ensuring user indexed ".concat(e,":"),t),{success:!1,error:t.message}}},getAllUsers:async()=>{try{const e=await i.getAllUsers();return e&&e.length>0?(console.log("[userService] Using LocalStorage users list"),e):(console.log("[userService] Using MockUsers users list"),await u())}catch(e){return console.error("[userService] Error getting all users:",e),await u()}}}},286:function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(r(630)),s=o(r(611));t.default=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(r=e.isMaybeSingle)&&void 0!==r&&r,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=a.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,r,o,a;let n=null,i=null,l=null,c=e.status,d=e.statusText;if(e.ok){if("HEAD"!==this.method){const r=await e.text();""===r||(i="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?r:JSON.parse(r))}const a=null===(r=this.headers.get("Prefer"))||void 0===r?void 0:r.match(/count=(exact|planned|estimated)/),s=null===(o=e.headers.get("content-range"))||void 0===o?void 0:o.split("/");a&&s&&s.length>1&&(l=parseInt(s[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(i)&&(i.length>1?(n={code:"PGRST116",details:"Results contain ".concat(i.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},i=null,l=null,c=406,d="Not Acceptable"):i=1===i.length?i[0]:null)}else{const t=await e.text();try{n=JSON.parse(t),Array.isArray(n)&&404===e.status&&(i=[],n=null,c=200,d="OK")}catch(u){404===e.status&&""===t?(c=204,d="No Content"):n={message:t}}if(n&&this.isMaybeSingle&&(null===(a=null===n||void 0===n?void 0:n.details)||void 0===a?void 0:a.includes("0 rows"))&&(n=null,c=200,d="OK"),n&&this.shouldThrowOnError)throw new s.default(n)}return{error:n,data:i,count:l,status:c,statusText:d}});return this.shouldThrowOnError||(r=r.catch(e=>{var t,r,o;return{error:{message:"".concat(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),details:"".concat(null!==(r=null===e||void 0===e?void 0:e.stack)&&void 0!==r?r:""),hint:"",code:"".concat(null!==(o=null===e||void 0===e?void 0:e.code)&&void 0!==o?o:"")},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}}},313:(e,t,r)=>{"use strict";r.d(t,{$u:()=>i,getUnifiedAvatar:()=>n});var o=r(915),a=r(792),s=r(8);const n=async e=>{if(!e)return console.warn("[avatarService] No userId provided"),null;try{if(console.log("[avatarService] Getting unified avatar for user: ".concat(e)),"undefined"!==typeof window){const t=window.localStorage.getItem("tag.avatars.".concat(e));if(t)try{const r=JSON.parse(t);if(r&&r.avatarUrl){const t=r.avatarUrl;if((e=>{if(!e||"string"!==typeof e)return!1;if(e.startsWith("http"))try{const t=new URL(e);return t.hostname.length>0&&t.protocol.startsWith("http")}catch(t){return!1}return!!e.startsWith("data:image/")&&e.length>100})(t))return console.log("[avatarService] Found valid avatar in localStorage for ".concat(e,":"),null===t||void 0===t?void 0:t.substring(0,30)),t;console.warn("[avatarService] Found invalid avatar URL in localStorage for ".concat(e,":"),null===t||void 0===t?void 0:t.substring(0,30)),window.localStorage.removeItem("tag.avatars.".concat(e))}}catch(s){console.warn("[avatarService] Failed to parse localStorage avatar data for ".concat(e,":"),s),window.localStorage.removeItem("tag.avatars.".concat(e))}}const i=await a.A.getAvatarUrl(e);if(i)return console.log("[avatarService] Found avatar in IndexedDB for ".concat(e,":"),null===i||void 0===i?void 0:i.substring(0,30)),i;try{var t;const{getProfile:a}=await Promise.resolve().then(r.bind(r,405)),s=await a(e);var o;if(null!==s&&void 0!==s&&s.success&&null!==s&&void 0!==s&&null!==(t=s.data)&&void 0!==t&&t.avatar)return console.log("[avatarService] Found avatar in Supabase profile for ".concat(e,":"),null===(o=s.data.avatar)||void 0===o?void 0:o.substring(0,30)),s.data.avatar}catch(n){console.warn("[avatarService] Failed to get profile for ".concat(e,":"),n)}return console.log("[avatarService] No avatar found for user ".concat(e,", using default")),l()}catch(i){return console.error("[avatarService] Error getting unified avatar for ".concat(e,":"),i),l()}},i=async e=>{const t=await(0,s.WR)();return await(async(e,t)=>{if(!e||!t)return console.warn("[avatarService] Invalid parameters for avatar update"),!1;try{if((0,o.Bx)(e),(await a.A.storeAvatar(e,t)).skipped&&console.log("[avatarService] Avatar storage skipped, but continuing with update flow"),"undefined"!==typeof window){const r={avatarUrl:t,timestamp:Date.now()};window.localStorage.setItem("tag.avatars.".concat(e),JSON.stringify(r))}return"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent("avatar:updated",{detail:{userId:e,avatarUrl:t,avatarUpdatedAt:(new Date).toISOString()}})),console.log("[avatarService] Successfully updated unified avatar for user:",e),!0}catch(r){return console.error("[avatarService] Error updating unified avatar:",r),!1}})(t,e)},l=()=>"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiByeD0iNjQiIGZpbGw9IiNGM0Y0RjYiLz4KPHN2ZyB4PSIzMiIgeT0iMjQiIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSIjOEM5Q0E2Ij4KPHBhdGggZD0iTTEyIDEyYzIuMjEgMCA0LTEuNzkgNC00cy0xLjc5LTQtNC00LTQgMS43OS00IDQgMS43OSA0IDQgNHptMCAyYy0yLjY3IDAtOCAxLjM0LTggNHYyaDE2di0yYzAtMi42Ni01LjMzLTQtOC00eiIvPgo8L3N2Zz4KPC9zdmc+"},337:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});const o=new class{constructor(){this.dbName="TAGPortfolioDB",this.dbVersion=1,this.storeName="images"}async initDB(){return new Promise((e,t)=>{const r=indexedDB.open(this.dbName,this.dbVersion);r.onerror=()=>t(r.error),r.onsuccess=()=>e(r.result),r.onupgradeneeded=e=>{const t=e.target.result;if(!t.objectStoreNames.contains(this.storeName)){t.createObjectStore(this.storeName,{keyPath:"path"}).createIndex("path","path",{unique:!0})}}})}async storeImage(e,t){const r=await this.initDB();let o;if(t instanceof Blob)o=t;else if(t instanceof File)o=t;else{if("string"!==typeof t||!t.startsWith("data:image/"))throw new Error("Unsupported data format");{const e=await fetch(t);o=await e.blob()}}return new Promise((t,a)=>{const s=r.transaction([this.storeName],"readwrite").objectStore(this.storeName).put({path:e,file:o,timestamp:Date.now()});s.onsuccess=()=>t({success:!0,path:e}),s.onerror=()=>a(s.error)})}async getImage(e){const t=await this.initDB();return new Promise((r,o)=>{const a=t.transaction([this.storeName],"readonly").objectStore(this.storeName).get(e);a.onsuccess=()=>{if(a.result){const t=a.result.file;t instanceof Blob?(console.log("[ImageStorage] Found Blob for ".concat(e,": ").concat(t.size," bytes")),r({success:!0,file:t})):(console.warn("[ImageStorage] Invalid Blob format for ".concat(e,": ").concat(typeof t)),r({success:!1,error:"Invalid Blob format"}))}else r({success:!1,error:"Image not found"})},a.onerror=()=>o(a.error)})}async deleteImage(e){const t=await this.initDB();return new Promise((r,o)=>{const a=t.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(e);a.onsuccess=()=>r({success:!0}),a.onerror=()=>o(a.error)})}async deleteImages(e){return(await Promise.all(e.map(e=>this.deleteImage(e)))).every(e=>e.success)}async getImageUrl(e){if(!e||"string"!==typeof e)return console.log("[ImageStorage] Invalid filePath type: ".concat(typeof e,", returning null")),null;if(console.log("[ImageStorage] Getting URL for: ".concat(e)),e.startsWith("data:image/"))try{const t=await fetch(e),r=await t.blob(),o=URL.createObjectURL(r);return console.log("[ImageStorage] Created ObjectURL from Data URL: ".concat(o)),o}catch(t){return console.error("[ImageStorage] Error converting Data URL to ObjectURL: ".concat(t)),null}if(e.startsWith("http"))return console.log("[ImageStorage] Returning remote URL: ".concat(e)),e;if(e.startsWith("portfolio/")||e.startsWith("collaboration_"))try{console.log("[ImageStorage] Looking up in IndexedDB: ".concat(e));const t=await this.getImage(e);if(console.log("[ImageStorage] IndexedDB lookup result:",t),t.success&&t.file instanceof Blob){const e=URL.createObjectURL(t.file);return console.log("[ImageStorage] Created ObjectURL from IndexedDB: ".concat(e)),e}return console.log("[ImageStorage] Blob not found in IndexedDB for ".concat(e)),null}catch(t){return console.error("[ImageStorage] Error reading from IndexedDB: ".concat(t)),null}return console.log("[ImageStorage] No valid image found for ".concat(e)),null}revokeImageUrl(e){e&&e.startsWith("blob:")&&URL.revokeObjectURL(e)}}},374:function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(r(286));class s extends a.default{select(e){let t=!1;const r=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e){let{ascending:t=!0,nullsFirst:r,foreignTable:o,referencedTable:a=o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=a?"".concat(a,".order"):"order",n=this.url.searchParams.get(s);return this.url.searchParams.set(s,"".concat(n?"".concat(n,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===r?"":r?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o="undefined"===typeof r?"limit":"".concat(r,".limit");return this.url.searchParams.set(o,"".concat(e)),this}range(e,t){let{foreignTable:r,referencedTable:o=r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a="undefined"===typeof o?"offset":"".concat(o,".offset"),s="undefined"===typeof o?"limit":"".concat(o,".limit");return this.url.searchParams.set(a,"".concat(e)),this.url.searchParams.set(s,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain(){let{analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:o=!1,wal:a=!1,format:s="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var n;const i=[e?"analyze":null,t?"verbose":null,r?"settings":null,o?"buffers":null,a?"wal":null].filter(Boolean).join("|"),l=null!==(n=this.headers.get("Accept"))&&void 0!==n?n:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(s,'; for="').concat(l,'"; options=').concat(i,";")),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(e)),this}}t.default=s},391:(e,t,r)=>{"use strict";var o=r(950);t.createRoot=o.createRoot,t.hydrateRoot=o.hydrateRoot},392:(e,t,r)=>{"use strict";var o=r(218),a=r(496);function s(e){var t=0,r=0,o=0,a=0;return"detail"in e&&(r=e.detail),"wheelDelta"in e&&(r=-e.wheelDelta/120),"wheelDeltaY"in e&&(r=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=r,r=0),o=10*t,a=10*r,"deltaY"in e&&(a=e.deltaY),"deltaX"in e&&(o=e.deltaX),(o||a)&&e.deltaMode&&(1==e.deltaMode?(o*=40,a*=40):(o*=800,a*=800)),o&&!t&&(t=o<1?-1:1),a&&!r&&(r=a<1?-1:1),{spinX:t,spinY:r,pixelX:o,pixelY:a}}s.getEventType=function(){return o.firefox()?"DOMMouseScroll":a("wheel")?"wheel":"mousewheel"},e.exports=s},405:(e,t,r)=>{"use strict";r.d(t,{checkSupabaseConnection:()=>c,getProfile:()=>s,saveProfile:()=>n});var o=r(51),a=r(32);const s=async e=>{try{if(console.log("[Supabase Profile] Getting profile for user: ".concat(e)),!e||!d(e))return console.warn("[Supabase Profile] Invalid userId format: ".concat(e)),{success:!1,error:"Invalid user ID format"};const{data:t,error:r}=await a.supabase.from("profiles").select("*").eq("id",e).single();if(r){if("PGRST116"===r.code)return console.log("[Supabase Profile] Profile not found for user: ".concat(e,", returning null")),{success:!1,error:"Profile not found"};throw r}const o=i(t);return console.log("[Supabase Profile] Successfully retrieved profile for user: ".concat(e)),{success:!0,data:o}}catch(t){return console.error("[Supabase Profile] Error getting profile for user ".concat(e,":"),t),{success:!1,error:t.message}}},n=async(e,t)=>{try{if(console.log("[Supabase Profile] Saving profile for user: ".concat(e)),!e||!d(e))return console.warn("[Supabase Profile] Invalid userId format: ".concat(e)),{success:!1,error:"Invalid user ID format"};const r=l(t),{data:s,error:n}=await a.supabase.from("profiles").upsert((0,o.A)({id:e},r),{onConflict:"id"}).select().single();if(n)throw n;return console.log("[Supabase Profile] Successfully saved profile for user: ".concat(e)),{success:!0,data:i(s)}}catch(r){return console.error("[Supabase Profile] Error saving profile for user ".concat(e,":"),r),{success:!1,error:r.message}}},i=e=>{var t,r,o,a;return e?{id:e.id,fullName:e.full_name||"",title:e.title||"Artist",school:e.school||"",pronouns:e.pronouns||"",majors:Array.isArray(e.majors)?e.majors:[],minors:Array.isArray(e.minors)?e.minors:[],skills:Array.isArray(e.skills)?e.skills:[],bio:e.bio||"",socialLinks:{instagram:(null===(t=e.social_links)||void 0===t?void 0:t.instagram)||"",portfolio:(null===(r=e.social_links)||void 0===r?void 0:r.portfolio)||"",discord:(null===(o=e.social_links)||void 0===o?void 0:o.discord)||"",otherLinks:Array.isArray(null===(a=e.social_links)||void 0===a?void 0:a.otherLinks)?e.social_links.otherLinks:[]},avatar:e.avatar_url||"",createdAt:e.created_at,updatedAt:e.updated_at}:null},l=e=>{var t,r,o,a;return{full_name:e.fullName||"",title:e.title||"Artist",school:e.school||"",pronouns:e.pronouns||"",majors:Array.isArray(e.majors)?e.majors:[],minors:Array.isArray(e.minors)?e.minors:[],skills:Array.isArray(e.skills)?e.skills:[],bio:e.bio||"",social_links:{instagram:(null===(t=e.socialLinks)||void 0===t?void 0:t.instagram)||"",portfolio:(null===(r=e.socialLinks)||void 0===r?void 0:r.portfolio)||"",discord:(null===(o=e.socialLinks)||void 0===o?void 0:o.discord)||"",otherLinks:Array.isArray(null===(a=e.socialLinks)||void 0===a?void 0:a.otherLinks)?e.socialLinks.otherLinks:[]},avatar_url:e.avatar||""}},c=async()=>{try{const{data:e,error:t}=await a.supabase.from("profiles").select("id").limit(1);if(t)throw t;return!0}catch(e){return console.warn("[Supabase Profile] Connection check failed:",e.message),!1}},d=e=>/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)},420:(e,t,r)=>{"use strict";r.d(t,{CF:()=>n,o1:()=>a,ug:()=>s});var o=r(77);const a={alex:{id:"alex",name:"Alex Chen",displayName:"Alex Chen",email:"alex@example.com",avatar:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiByeD0iNjQiIGZpbGw9IiNGM0Y0RjYiLz4KPHN2ZyB4PSIzMiIgeT0iMjQiIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSIjOEM5Q0E2Ij4KPHBhdGggZD0iTTEyIDEyYzIuMjEgMCA0LTEuNzkgNC00cy0xLjc5LTQtNC00LTQgMS43OS00IDQgMS43OSA0IDQgNHptMCAyYy0yLjY3IDAtOCAxLjM0LTggNHYyaDE2di0yYzAtMi42Ni01LjMzLTQtOC00eiIvPgo8L3N2Zz4KPC9zdmc+",role:"Character Designer",roleIcon:"\ud83c\udfa8",bio:"Passionate character designer with 5+ years of experience in game development.",school:"Art Institute of Chicago",pronouns:"he/him",majors:["Character Design","Game Art"],skills:["Character Design","Digital Painting","Concept Art","3D Modeling"],socialLinks:{instagram:"@alexchen_art",portfolio:"alexchen.design",discord:"alexchen#1234",otherLinks:[]},portfolio:[{id:1,title:"Cyberpunk Warrior",thumb:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRkY2QjNCQyIvPgo8dGV4dCB4PSIxMDAiIHk9IjEwMCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE2IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+Q3liZXJwdW5rIFdhcnJpb3I8L3RleHQ+Cjwvc3ZnPgo=",category:"Character Design"},{id:2,title:"Fantasy Mage",thumb:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjOEM5Q0E2Ii8+Cjx0ZXh0IHg9IjEwMCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTYiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5GYW50YXN5IE1hZ2U8L3RleHQ+Cjwvc3ZnPgo=",category:"Concept Art"}]},alice:{id:"alice",name:"Alice Rodriguez",displayName:"Alice Rodriguez",email:"alice@example.com",avatar:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiByeD0iNjQiIGZpbGw9IiNGM0Y0RjYiLz4KPHN2ZyB4PSIzMiIgeT0iMjQiIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSIjOEM5Q0E2Ij4KPHBhdGggZD0iTTEyIDEyYzIuMjEgMCA0LTEuNzkgNC00cy0xLjc5LTQtNC00LTQgMS43OS00IDQgMS43OSA0IDQgNHptMCAyYy0yLjY3IDAtOCAxLjM0LTggNHYyaDE2di0yYzAtMi42Ni01LjMzLTQtOC00eiIvPgo8L3N2Zz4KPC9zdmc+",role:"Art Director",roleIcon:"\ud83c\udfad",bio:"Creative art director specializing in visual storytelling and brand identity.",school:"Parsons School of Design",pronouns:"she/her",majors:["Graphic Design","Fine Arts"],skills:["Art Direction","Brand Identity","Visual Design","Creative Strategy"],socialLinks:{instagram:"@alice_rodriguez_art",portfolio:"alicerodriguez.com",discord:"alice_rod#5678",otherLinks:[]},portfolio:[{id:3,title:"Brand Identity Package",thumb:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRkY2QjNCQyIvPgo8dGV4dCB4PSIxMDAiIHk9IjEwMCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE2IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+QnJhbmQgSWRlbnRpdHkgUGFja2FnZTwvdGV4dD4KPC9zdmc+Cg==",category:"Brand Design"},{id:4,title:"Digital Illustration",thumb:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjOEM5Q0E2Ii8+Cjx0ZXh0IHg9IjEwMCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTYiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5EaWdpdGFsIElsbHVzdHJhdGlvbjwvdGV4dD4KPC9zdmc+Cg==",category:"Digital Art"}]},bryan:{id:"bryan",name:"Bryan Kim",displayName:"Bryan Kim",email:"bryan@example.com",avatar:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiByeD0iNjQiIGZpbGw9IiNGM0Y0RjYiLz4KPHN2ZyB4PSIzMiIgeT0iMjQiIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSIjOEM5Q0E2Ij4KPHBhdGggZD0iTTEyIDEyYzIuMjEgMCA0LTEuNzkgNC00cy0xLjc5LTQtNC00LTQgMS43OS00IDQgMS43OSA0IDQgNHptMCAyYy0yLjY3IDAtOCAxLjM0LTggNHYyaDE2di0yYzAtMi42Ni01LjMzLTQtOC00eiIvPgo8L3N2Zz4KPC9zdmc+",role:"3D Modeler",roleIcon:"\ud83c\udfaf",bio:"Experienced 3D modeler with expertise in character and environment modeling.",school:"Rhode Island School of Design",pronouns:"he/him",majors:["3D Design","Industrial Design"],skills:["3D Modeling","Texturing","Rigging","Animation"],socialLinks:{instagram:"@bryan_kim_3d",portfolio:"bryankim3d.com",discord:"bryan_kim#9012",otherLinks:[]},portfolio:[{id:5,title:"Sci-Fi Character Model",thumb:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRkY2QjNCQyIvPgo8dGV4dCB4PSIxMDAiIHk9IjEwMCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE2IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+U2NpLUZpIENoYXJhY3RlciBNb2RlbDwvdGV4dD4KPC9zdmc+Cg==",category:"3D Modeling"},{id:6,title:"Environment Design",thumb:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjOEM5Q0E2Ii8+Cjx0ZXh0IHg9IjEwMCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTYiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5FbnZpcm9ubWVudCBEZXNpZ248L3RleHQ+Cjwvc3ZnPgo=",category:"Concept Art"}]}},s=e=>{if(!e&&!(0,o.isMock)())return console.warn("[getUserInfo] No userId provided and not in Mock mode, returning null"),null;if(!e)return console.log("[getUserInfo] No userId provided, returning null"),null;const t=a[e];return t||(console.log("[getUserInfo] User not found: ".concat(e,", returning null")),null)},n=()=>Object.values(a)},453:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});var o=r(51);const a=new class{constructor(){this.quotaThreshold=.8,this.cleanupInterval=3e4,this.maxRetries=3,this.isCleaning=!1,this.cleanupStrategies={avatarCache:{priority:1,pattern:/\.avatarCache|\.avatar/,description:"Avatar Cache"},tempImages:{priority:2,pattern:/temp_|_temp/,description:"Temporary Images"},oldCollaborations:{priority:3,pattern:/collaboration_old|old_collaboration/,description:"Old Collaborations"},draftData:{priority:4,pattern:/draft_|_draft/,description:"Draft Data"},portfolioCache:{priority:5,pattern:/portfolio_cache|portfolio_alice|portfolio_bryan/,description:"Portfolio Cache"},notificationCache:{priority:6,pattern:/notification_cache|notifications_old/,description:"Notification Cache"},generalCache:{priority:7,pattern:/cache_|_cache/,description:"General Cache"}}}async init(){return console.log("[SmartDataCleaner] Initializing..."),this.isStorageSupported()?(this.startMonitoring(),await this.checkAndCleanup(),console.log("[SmartDataCleaner] Initialized successfully"),!0):(console.warn("[SmartDataCleaner] Storage not supported, skipping initialization"),!1)}isStorageSupported(){try{return"undefined"!==typeof Storage&&null!==localStorage}catch(e){return!1}}startMonitoring(){this.monitoringInterval&&clearInterval(this.monitoringInterval),this.monitoringInterval=setInterval(async()=>{await this.checkAndCleanup()},this.cleanupInterval)}stopMonitoring(){this.monitoringInterval&&(clearInterval(this.monitoringInterval),this.monitoringInterval=null)}async checkAndCleanup(){if(!this.isCleaning)try{const e=await this.getStorageUsage();console.log("[SmartDataCleaner] Storage usage: ".concat((100*e.percentage).toFixed(1),"%")),e.percentage>=this.quotaThreshold&&(console.warn("[SmartDataCleaner] Storage quota exceeded threshold (".concat(100*this.quotaThreshold,"%), starting cleanup...")),await this.performCleanup())}catch(e){console.error("[SmartDataCleaner] Error during cleanup check:",e)}}async getStorageUsage(){try{let e=0;const t=Object.keys(localStorage);for(const a of t){const t=localStorage.getItem(a);t&&(e+=a.length+t.length)}const r=5242880,o=e/r;return{used:e,quota:r,percentage:Math.min(o,1),keys:t.length}}catch(e){return console.error("[SmartDataCleaner] Error calculating storage usage:",e),{used:0,quota:0,percentage:0,keys:0}}}async performCleanup(){if(!this.isCleaning){this.isCleaning=!0,console.log("[SmartDataCleaner] Starting cleanup process...");try{const e=await this.getStorageUsage();let t=0,r=0;const o=Object.entries(this.cleanupStrategies).sort((e,t)=>{let[,r]=e,[,o]=t;return r.priority-o.priority});for(const[,n]of o){const e=await this.cleanupByStrategy(n);t+=e.count,r+=e.freedSpace,console.log("[SmartDataCleaner] ".concat(n.description,": cleaned ").concat(e.count," items, freed ").concat((e.freedSpace/1024).toFixed(1),"KB"));if((await this.getStorageUsage()).percentage<.7*this.quotaThreshold){console.log("[SmartDataCleaner] Cleanup target reached, stopping early");break}}const a=await this.getStorageUsage(),s=e.used-a.used;console.log("[SmartDataCleaner] Cleanup completed: ".concat(t," items cleaned, ").concat((s/1024).toFixed(1),"KB freed")),console.log("[SmartDataCleaner] Storage usage: ".concat((100*e.percentage).toFixed(1),"% \u2192 ").concat((100*a.percentage).toFixed(1),"%")),this.dispatchCleanupEvent({cleanedCount:t,freedSpace:s,initialUsage:e.percentage,finalUsage:a.percentage})}catch(e){console.error("[SmartDataCleaner] Error during cleanup:",e)}finally{this.isCleaning=!1}}}async cleanupByStrategy(e){let t=0,r=0;try{const o=Object.keys(localStorage);for(const a of o)if(e.pattern.test(a)){const e=localStorage.getItem(a);e&&(r+=a.length+e.length,localStorage.removeItem(a),t++)}}catch(o){console.error("[SmartDataCleaner] Error cleaning ".concat(e.description,":"),o)}return{count:t,freedSpace:r}}async manualCleanup(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(console.log("[SmartDataCleaner] Manual cleanup requested for:",e),this.isCleaning)console.warn("[SmartDataCleaner] Cleanup already in progress");else{this.isCleaning=!0;try{let t=0,r=0;for(const o of e)if(this.cleanupStrategies[o]){const e=await this.cleanupByStrategy(this.cleanupStrategies[o]);t+=e.count,r+=e.freedSpace}return console.log("[SmartDataCleaner] Manual cleanup completed: ".concat(t," items, ").concat((r/1024).toFixed(1),"KB freed")),{success:!0,cleanedCount:t,freedSpace:r}}catch(t){return console.error("[SmartDataCleaner] Manual cleanup failed:",t),{success:!1,error:t.message}}finally{this.isCleaning=!1}}}async getCleanupStats(){const e=await this.getStorageUsage(),t=Object.keys(localStorage),r={totalKeys:t.length,totalSize:e.used,usagePercentage:e.percentage,strategies:{}};for(const[o,a]of Object.entries(this.cleanupStrategies)){let e=0,s=0;for(const r of t)if(a.pattern.test(r)){const t=localStorage.getItem(r);t&&(e++,s+=r.length+t.length)}r.strategies[o]={count:e,size:s,description:a.description}}return r}dispatchCleanupEvent(e){const t=new CustomEvent("smartDataCleanup",{detail:(0,o.A)({timestamp:(new Date).toISOString()},e)});window.dispatchEvent(t)}destroy(){this.stopMonitoring(),this.isCleaning=!1,console.log("[SmartDataCleaner] Destroyed")}};"undefined"!==typeof window&&a.init().catch(e=>{console.error("[SmartDataCleaner] Failed to initialize:",e)});const s=a},496:(e,t,r)=>{"use strict";var o,a=r(989);a.canUseDOM&&(o=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),e.exports=function(e,t){if(!a.canUseDOM||t&&!("addEventListener"in document))return!1;var r="on"+e,s=r in document;if(!s){var n=document.createElement("div");n.setAttribute(r,"return;"),s="function"===typeof n[r]}return!s&&o&&"wheel"===e&&(s=document.implementation.hasFeature("Events.wheel","3.0")),s}},526:(e,t,r)=>{"use strict";function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=o(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}r.d(t,{A:()=>a})},579:(e,t,r)=>{"use strict";e.exports=r(153)},611:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=r},619:(e,t,r)=>{"use strict";r.d(t,{l:()=>h});var o=r(51),a=r(77);const s={getStorageKey:e=>e?"u.".concat(e,".notifications"):null,createNotification:async e=>{try{const t=s.getStorageKey(e.receiverId),r=JSON.parse(localStorage.getItem(t)||"[]");r.unshift(e);const o=r.slice(0,100);return localStorage.setItem(t,JSON.stringify(o)),window.dispatchEvent(new CustomEvent("notif:unreadChanged",{detail:{userId:e.receiverId}})),console.log("[localStorageAdapter] Created notification for user ".concat(e.receiverId)),console.log("[localStorageAdapter] Notification data:",e),{success:!0,data:e}}catch(t){return console.error("[localStorageAdapter] Error creating notification:",t),{success:!1,error:t.message}}},getUserNotifications:async e=>{try{const t=s.getStorageKey(e),r=JSON.parse(localStorage.getItem(t)||"[]");return console.log("[localStorageAdapter] Retrieved ".concat(r.length," notifications for user ").concat(e)),{success:!0,data:r}}catch(t){return console.error("[localStorageAdapter] Error getting notifications for user ".concat(e,":"),t),{success:!1,error:t.message}}},markAsRead:async e=>{try{const t=Object.keys(localStorage).filter(e=>e.startsWith("u."));for(const r of t){const t=JSON.parse(localStorage.getItem(r)||"[]");if(!Array.isArray(t)){console.warn("[localStorageAdapter] Notifications for key ".concat(r," is not an array:"),t);continue}const o=t.findIndex(t=>t.id===e);if(-1!==o){t[o].isRead=!0,localStorage.setItem(r,JSON.stringify(t));const a=r.replace("u.","");return window.dispatchEvent(new CustomEvent("notif:unreadChanged",{detail:{userId:a}})),console.log("[localStorageAdapter] Marked notification ".concat(e," as read")),{success:!0,data:t[o]}}}return console.warn("[localStorageAdapter] Notification ".concat(e," not found")),{success:!1,error:"Notification not found"}}catch(t){return console.error("[localStorageAdapter] Error marking notification as read:",t),{success:!1,error:t.message}}},markAllAsRead:async e=>{try{const t=s.getStorageKey(e),r=JSON.parse(localStorage.getItem(t)||"[]").map(e=>(0,o.A)((0,o.A)({},e),{},{isRead:!0}));return localStorage.setItem(t,JSON.stringify(r)),window.dispatchEvent(new CustomEvent("notif:unreadChanged",{detail:{userId:e}})),console.log("[localStorageAdapter] Marked all notifications as read for user ".concat(e)),{success:!0,data:r}}catch(t){return console.error("[localStorageAdapter] Error marking all notifications as read:",t),{success:!1,error:t.message}}},deleteNotification:async e=>{try{const t=Object.keys(localStorage).filter(e=>e.startsWith("u."));for(const r of t){const t=JSON.parse(localStorage.getItem(r)||"[]"),o=t.findIndex(t=>t.id===e);if(-1!==o){t.splice(o,1),localStorage.setItem(r,JSON.stringify(t));const a=r.replace("u.","");return window.dispatchEvent(new CustomEvent("notif:unreadChanged",{detail:{userId:a}})),console.log("[localStorageAdapter] Deleted notification ".concat(e)),{success:!0}}}return console.warn("[localStorageAdapter] Notification ".concat(e," not found")),{success:!1,error:"Notification not found"}}catch(t){return console.error("[localStorageAdapter] Error deleting notification:",t),{success:!1,error:t.message}}}};var n=r(32);const i=async e=>{try{const t={type:e.type,sender_id:e.senderId||null,sender_name:e.senderName||null,receiver_id:e.receiverId,title:e.title,content:e.content,message:e.message,is_read:e.isRead||!1,created_at:e.createdAt||(new Date).toISOString(),meta:e.meta||{}},{data:r,error:o}=await n.supabase.from("notifications").insert(t).select().single();return o?(console.error("[supabaseAdapter] Error creating notification:",o),{success:!1,error:o.message}):(console.log("[supabaseAdapter] Created notification in Supabase:",r.id),{success:!0,data:r})}catch(t){return console.error("[supabaseAdapter] Error creating notification:",t),{success:!1,error:t.message}}},l=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const{limit:r=50,offset:o=0,type:a=null}=t;let s=n.supabase.from("notifications").select("*").eq("receiver_id",e).order("created_at",{ascending:!1}).range(o,o+r-1);a&&(s=s.eq("type",a));const{data:i,error:l}=await s;if(l)return console.error("[supabaseAdapter] Error getting notifications:",l),{success:!1,error:l.message};const c=(i||[]).map(e=>({id:e.id,type:e.type,senderId:e.sender_id,senderName:e.sender_name,receiverId:e.receiver_id,title:e.title,content:e.content,message:e.message,isRead:e.is_read,createdAt:e.created_at,updatedAt:e.updated_at,meta:e.meta||{}}));return console.log("[supabaseAdapter] Retrieved ".concat(c.length," notifications for user ").concat(e)),{success:!0,data:c}}catch(r){return console.error("[supabaseAdapter] Error getting notifications:",r),{success:!1,error:r.message}}},c=async e=>{try{const{data:t,error:r}=await n.supabase.from("notifications").update({is_read:!0,updated_at:(new Date).toISOString()}).eq("id",e).select().single();return r?(console.error("[supabaseAdapter] Error marking notification as read:",r),{success:!1,error:r.message}):(console.log("[supabaseAdapter] Marked notification as read:",e),{success:!0,data:t})}catch(t){return console.error("[supabaseAdapter] Error marking notification as read:",t),{success:!1,error:t.message}}},d=async e=>{try{const{data:t,error:r}=await n.supabase.from("notifications").update({is_read:!0,updated_at:(new Date).toISOString()}).eq("receiver_id",e).eq("is_read",!1).select();return r?(console.error("[supabaseAdapter] Error marking all notifications as read:",r),{success:!1,error:r.message}):(console.log("[supabaseAdapter] Marked ".concat(t.length," notifications as read for user ").concat(e)),{success:!0,data:{updatedCount:t.length}})}catch(t){return console.error("[supabaseAdapter] Error marking all notifications as read:",t),{success:!1,error:t.message}}},u=async e=>{try{const{error:t}=await n.supabase.from("notifications").delete().eq("id",e);return t?(console.error("[supabaseAdapter] Error deleting notification:",t),{success:!1,error:t.message}):(console.log("[supabaseAdapter] Deleted notification:",e),{success:!0})}catch(t){return console.error("[supabaseAdapter] Error deleting notification:",t),{success:!1,error:t.message}}},h={createFollowNotification:async(e,t,r)=>{try{const o={id:crypto.randomUUID(),type:"follow",senderId:e,senderName:t,receiverId:r,title:"New Follower",content:"".concat(t," followed you"),message:"".concat(t," followed you"),isRead:!1,createdAt:(new Date).toISOString(),meta:{action:"follow",followerId:e,followerName:t}};if((0,a.isMock)()){const e=await s.createNotification(o);if(e.success)return console.log("[notificationService] Created follow notification in LocalStorage"),e}else{const e=await i(o);if(e.success)return console.log("[notificationService] Created follow notification in Supabase"),e;const t=await s.createNotification(o);if(t.success)return console.log("[notificationService] Created follow notification in LocalStorage (fallback)"),t}return console.warn("[notificationService] Failed to create follow notification"),{success:!1,error:"Failed to create follow notification"}}catch(o){return console.error("[notificationService] Error creating follow notification:",o),{success:!1,error:o.message}}},createLikeNotification:async(e,t,r,o,n)=>{try{const l={id:crypto.randomUUID(),type:"like",senderId:e,senderName:t,receiverId:n,title:"Work Liked",content:"".concat(t,' liked your work "').concat(o,'"'),message:"".concat(t,' liked your work "').concat(o,'"'),isRead:!1,createdAt:(new Date).toISOString(),meta:{action:"like",workId:r,workTitle:o,likerId:e,likerName:t}};if((0,a.isMock)()){const e=await s.createNotification(l);if(e.success)return console.log("[notificationService] Created like notification in LocalStorage"),e}else{const e=await i(l);if(e.success)return console.log("[notificationService] Created like notification in Supabase"),e;const t=await s.createNotification(l);if(t.success)return console.log("[notificationService] Created like notification in LocalStorage (fallback)"),t}return console.warn("[notificationService] Failed to create like notification"),{success:!1,error:"Failed to create like notification"}}catch(l){return console.error("[notificationService] Error creating like notification:",l),{success:!1,error:l.message}}},createCommentNotification:async(e,t,r,o,n,l)=>{try{const c={id:crypto.randomUUID(),type:"comment",senderId:e,senderName:t,receiverId:n,title:"New Comment",content:"".concat(t,' commented on your work "').concat(o,'"'),message:"".concat(t,' commented on your work "').concat(o,'": "').concat(l,'"'),isRead:!1,createdAt:(new Date).toISOString(),meta:{action:"comment",workId:r,workTitle:o,commenterId:e,commenterName:t,commentContent:l}};if((0,a.isMock)()){const e=await s.createNotification(c);if(e.success)return console.log("[notificationService] Created comment notification in LocalStorage"),e}else{const e=await i(c);if(e.success)return console.log("[notificationService] Created comment notification in Supabase"),e;const t=await s.createNotification(c);if(t.success)return console.log("[notificationService] Created comment notification in LocalStorage (fallback)"),t}return console.warn("[notificationService] Failed to create comment notification"),{success:!1,error:"Failed to create comment notification"}}catch(c){return console.error("[notificationService] Error creating comment notification:",c),{success:!1,error:c.message}}},getUserNotifications:async e=>{try{if((0,a.isMock)()){const t=await s.getUserNotifications(e);if(t&&t.success)return console.log("[notificationService] Using LocalStorage notifications for user ".concat(e)),t}else{const t=await l(e);if(t&&t.success)return console.log("[notificationService] Using Supabase notifications for user ".concat(e)),t;console.warn("[notificationService] Supabase failed, falling back to LocalStorage");const r=await s.getUserNotifications(e);if(r&&r.success)return console.log("[notificationService] Using LocalStorage notifications (fallback) for user ".concat(e)),r}return console.log("[notificationService] No notifications found for user ".concat(e)),{success:!0,data:[]}}catch(t){return console.error("[notificationService] Error getting notifications for user ".concat(e,":"),t),{success:!1,error:t.message}}},createCollaborationApplicationNotification:async(e,t,r,o,n,l,c)=>{try{const d={id:"collaboration_application_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),type:"collaboration",senderId:e,senderName:t,senderAvatar:r,receiverId:l,title:"New Collaboration Application",content:"".concat(t,' applied for your collaboration "').concat(n,'"'),message:"".concat(t,' applied for your collaboration "').concat(n,'". Click to view the application details.'),isRead:!1,createdAt:(new Date).toISOString(),meta:{action:"collaboration_application",collaborationId:o,collaborationTitle:n,applicantId:e,applicantName:t,applicantAvatar:r,applicationData:c}};if((0,a.isMock)()){const e=await s.createNotification(d);if(e.success)return console.log("[notificationService] Created collaboration application notification in LocalStorage"),e}else{const e=await i(d);if(e.success)return console.log("[notificationService] Created collaboration application notification in Supabase"),e;const t=await s.createNotification(d);if(t.success)return console.log("[notificationService] Created collaboration application notification in LocalStorage (fallback)"),t}return console.warn("[notificationService] Failed to create collaboration application notification"),{success:!1,error:"Failed to create collaboration application notification"}}catch(d){return console.error("[notificationService] Error creating collaboration application notification:",d),{success:!1,error:d.message}}},markAsRead:async e=>{try{if((0,a.isMock)()){const t=await s.markAsRead(e);if(t.success)return console.log("[notificationService] Marked notification ".concat(e," as read in LocalStorage")),t}else{const t=await c(e);if(t.success)return console.log("[notificationService] Marked notification ".concat(e," as read in Supabase")),t;const r=await s.markAsRead(e);if(r.success)return console.log("[notificationService] Marked notification ".concat(e," as read in LocalStorage (fallback)")),r}return console.warn("[notificationService] Failed to mark notification ".concat(e," as read")),{success:!1,error:"Failed to mark notification as read"}}catch(t){return console.error("[notificationService] Error marking notification as read:",t),{success:!1,error:t.message}}},markAllAsRead:async e=>{try{if((0,a.isMock)()){const t=await s.markAllAsRead(e);if(t.success)return console.log("[notificationService] Marked all notifications as read in LocalStorage for user ".concat(e)),t}else{const t=await d(e);if(t.success)return console.log("[notificationService] Marked all notifications as read in Supabase for user ".concat(e)),t;const r=await s.markAllAsRead(e);if(r.success)return console.log("[notificationService] Marked all notifications as read in LocalStorage (fallback) for user ".concat(e)),r}return console.warn("[notificationService] Failed to mark all notifications as read for user ".concat(e)),{success:!1,error:"Failed to mark all notifications as read"}}catch(t){return console.error("[notificationService] Error marking all notifications as read:",t),{success:!1,error:t.message}}},deleteNotification:async e=>{try{if((0,a.isMock)()){const t=await s.deleteNotification(e);if(t.success)return console.log("[notificationService] Deleted notification ".concat(e," in LocalStorage")),t}else{const t=await u(e);if(t.success)return console.log("[notificationService] Deleted notification ".concat(e," in Supabase")),t;const r=await s.deleteNotification(e);if(r.success)return console.log("[notificationService] Deleted notification ".concat(e," in LocalStorage (fallback)")),r}return console.warn("[notificationService] Failed to delete notification ".concat(e)),{success:!1,error:"Failed to delete notification"}}catch(t){return console.error("[notificationService] Error deleting notification:",t),{success:!1,error:t.message}}},createGeneralNotification:async e=>{try{const t={id:"general_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),type:e.type||"general",senderId:null,senderName:null,receiverId:e.userId,title:e.title,content:e.message,message:e.message,isRead:!1,createdAt:(new Date).toISOString(),meta:(0,o.A)({action:e.type,projectId:e.projectId},e.meta)};if((0,a.isMock)()){const e=await s.createNotification(t);if(e.success)return console.log("[notificationService] Created general notification in LocalStorage"),e}else{const e=await i(t);if(e.success)return console.log("[notificationService] Created general notification in Supabase"),e;const r=await s.createNotification(t);if(r.success)return console.log("[notificationService] Created general notification in LocalStorage (fallback)"),r}return console.warn("[notificationService] Failed to create general notification"),{success:!1,error:"Failed to create general notification"}}catch(t){return console.error("[notificationService] Error creating general notification:",t),{success:!1,error:t.message}}}}},630:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Headers:()=>n,Request:()=>i,Response:()=>l,default:()=>s,fetch:()=>a});var o=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof r.g)return r.g;throw new Error("unable to locate global object")}();const a=o.fetch,s=o.fetch.bind(o),n=o.Headers,i=o.Request,l=o.Response},730:(e,t,r)=>{"use strict";var o=r(43),a=r(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(i[e]=t,e=0;e<t.length;e++)n.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},p={};function g(e,t,r,o,a,s,n){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=o,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=n}var f={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){f[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];f[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){f[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){f[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){f[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){f[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){f[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){f[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){f[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}function b(e,t,r,o){var a=f.hasOwnProperty(t)?f[t]:null;(null!==a?0!==a.type:o||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,o){if(null===t||"undefined"===typeof t||function(e,t,r,o){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!o&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,o))return!0;if(o)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,a,o)&&(r=null),o||null===a?function(e){return!!u.call(p,e)||!u.call(m,e)&&(h.test(e)?p[e]=!0:(m[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=null===r?3!==a.type&&"":r:(t=a.attributeName,o=a.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(a=a.type)||4===a&&!0===r?"":""+r,o?e.setAttributeNS(o,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,x);f[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,x);f[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,x);f[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){f[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),f.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){f[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var y=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),j=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),A=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var T=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var R,F=Object.assign;function U(e){if(void 0===R)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var O=!1;function z(e,t){if(!e||O)return"";O=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var o=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){o=c}e.call(t.prototype)}else{try{throw Error()}catch(c){o=c}e()}}catch(c){if(c&&o&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),s=o.stack.split("\n"),n=a.length-1,i=s.length-1;1<=n&&0<=i&&a[n]!==s[i];)i--;for(;1<=n&&0<=i;n--,i--)if(a[n]!==s[i]){if(1!==n||1!==i)do{if(n--,0>--i||a[n]!==s[i]){var l="\n"+a[n].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=n&&0<=i);break}}}finally{O=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?U(e):""}function W(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case j:return"Portal";case S:return"Profiler";case N:return"StrictMode";case I:return"Suspense";case E:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case _:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return B(e(t))}catch(r){}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function V(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var a=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){o=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(e){o=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),o="";return e&&(o=q(e)?e.checked?"true":"false":e.value),(e=o)!==r&&(t.setValue(e),!0)}function Z(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var r=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Y(e,t){var r=null==t.defaultValue?"":t.defaultValue,o=null!=t.checked?t.checked:t.defaultChecked;r=H(null!=t.value?t.value:r),e._wrapperState={initialChecked:o,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){Q(e,t);var r=H(t.value),o=t.type;if(null!=r)"number"===o?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===o||"reset"===o)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function X(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!("submit"!==o&&"reset"!==o||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&Z(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,o){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&o&&(e[r].defaultSelected=!0)}else{for(r=""+H(r),t=null,a=0;a<e.length;a++){if(e[a].value===r)return e[a].selected=!0,void(o&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function oe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(s(92));if(te(r)){if(1<r.length)throw Error(s(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:H(r)}}function se(e,t){var r=H(t.value),o=H(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=o&&(e.defaultValue=""+o)}function ne(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ie(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ie(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,o){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function fe(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var o=0===r.indexOf("--"),a=ge(r,t[r],o);"float"===r&&(r="cssFloat"),o?e.setProperty(r,a):e[r]=a}}Object.keys(me).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]})});var ve=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ye=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var je=null,ke=null,Ne=null;function Se(e){if(e=ba(e)){if("function"!==typeof je)throw Error(s(280));var t=e.stateNode;t&&(t=wa(t),je(e.stateNode,e.type,t))}}function Ce(e){ke?Ne?Ne.push(e):Ne=[e]:ke=e}function Ae(){if(ke){var e=ke,t=Ne;if(Ne=ke=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function _e(e,t){return e(t)}function Ie(){}var Ee=!1;function Pe(e,t,r){if(Ee)return e(t,r);Ee=!0;try{return _e(e,t,r)}finally{Ee=!1,(null!==ke||null!==Ne)&&(Ie(),Ae())}}function De(e,t){var r=e.stateNode;if(null===r)return null;var o=wa(r);if(null===o)return null;r=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(o=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!o;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(s(231,t,typeof r));return r}var Te=!1;if(d)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Te=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(de){Te=!1}function Me(e,t,r,o,a,s,n,i,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var Re=!1,Fe=null,Ue=!1,Oe=null,ze={onError:function(e){Re=!0,Fe=e}};function We(e,t,r,o,a,s,n,i,l){Re=!1,Fe=null,Me.apply(ze,arguments)}function Be(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Be(e)!==e)throw Error(s(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var r=e,o=t;;){var a=r.return;if(null===a)break;var n=a.alternate;if(null===n){if(null!==(o=a.return)){r=o;continue}break}if(a.child===n.child){for(n=a.child;n;){if(n===r)return He(a),e;if(n===o)return He(a),t;n=n.sibling}throw Error(s(188))}if(r.return!==o.return)r=a,o=n;else{for(var i=!1,l=a.child;l;){if(l===r){i=!0,r=a,o=n;break}if(l===o){i=!0,o=a,r=n;break}l=l.sibling}if(!i){for(l=n.child;l;){if(l===r){i=!0,r=n,o=a;break}if(l===o){i=!0,o=n,r=a;break}l=l.sibling}if(!i)throw Error(s(189))}}if(r.alternate!==o)throw Error(s(190))}if(3!==r.tag)throw Error(s(188));return r.stateNode.current===r?e:t}(e))?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var Je=a.unstable_scheduleCallback,Ze=a.unstable_cancelCallback,Ke=a.unstable_shouldYield,Ye=a.unstable_requestPaint,Qe=a.unstable_now,$e=a.unstable_getCurrentPriorityLevel,Xe=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,rt=a.unstable_LowPriority,ot=a.unstable_IdlePriority,at=null,st=null;var nt=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(it(e)/lt|0)|0},it=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var r=e.pendingLanes;if(0===r)return 0;var o=0,a=e.suspendedLanes,s=e.pingedLanes,n=268435455&r;if(0!==n){var i=n&~a;0!==i?o=ut(i):0!==(s&=n)&&(o=ut(s))}else 0!==(n=r&~a)?o=ut(n):0!==s&&(o=ut(s));if(0===o)return 0;if(0!==t&&t!==o&&0===(t&a)&&((a=o&-o)>=(s=t&-t)||16===a&&0!==(4194240&s)))return t;if(0!==(4&o)&&(o|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=o;0<t;)a=1<<(r=31-nt(t)),o|=e[r],t&=~a;return o}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function ft(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function vt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-nt(t)]=r}function xt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var o=31-nt(r),a=1<<o;a&t|e[o]&t&&(e[o]|=t),r&=~a}}var bt=0;function yt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,jt,kt,Nt,St,Ct=!1,At=[],_t=null,It=null,Et=null,Pt=new Map,Dt=new Map,Tt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":_t=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Et=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Rt(e,t,r,o,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:o,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&jt(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Ft(e){var t=xa(e.target);if(null!==t){var r=Be(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Ge(r)))return e.blockedOn=t,void St(e.priority,function(){kt(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=ba(r))&&jt(t),e.blockedOn=r,!1;var o=new(r=e.nativeEvent).constructor(r.type,r);ye=o,r.target.dispatchEvent(o),ye=null,t.shift()}return!0}function Ot(e,t,r){Ut(e)&&r.delete(t)}function zt(){Ct=!1,null!==_t&&Ut(_t)&&(_t=null),null!==It&&Ut(It)&&(It=null),null!==Et&&Ut(Et)&&(Et=null),Pt.forEach(Ot),Dt.forEach(Ot)}function Wt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,zt)))}function Bt(e){function t(t){return Wt(t,e)}if(0<At.length){Wt(At[0],e);for(var r=1;r<At.length;r++){var o=At[r];o.blockedOn===e&&(o.blockedOn=null)}}for(null!==_t&&Wt(_t,e),null!==It&&Wt(It,e),null!==Et&&Wt(Et,e),Pt.forEach(t),Dt.forEach(t),r=0;r<Tt.length;r++)(o=Tt[r]).blockedOn===e&&(o.blockedOn=null);for(;0<Tt.length&&null===(r=Tt[0]).blockedOn;)Ft(r),null===r.blockedOn&&Tt.shift()}var Gt=y.ReactCurrentBatchConfig,Ht=!0;function qt(e,t,r,o){var a=bt,s=Gt.transition;Gt.transition=null;try{bt=1,Jt(e,t,r,o)}finally{bt=a,Gt.transition=s}}function Vt(e,t,r,o){var a=bt,s=Gt.transition;Gt.transition=null;try{bt=4,Jt(e,t,r,o)}finally{bt=a,Gt.transition=s}}function Jt(e,t,r,o){if(Ht){var a=Kt(e,t,r,o);if(null===a)Ho(e,t,o,Zt,r),Mt(e,o);else if(function(e,t,r,o,a){switch(t){case"focusin":return _t=Rt(_t,e,t,r,o,a),!0;case"dragenter":return It=Rt(It,e,t,r,o,a),!0;case"mouseover":return Et=Rt(Et,e,t,r,o,a),!0;case"pointerover":var s=a.pointerId;return Pt.set(s,Rt(Pt.get(s)||null,e,t,r,o,a)),!0;case"gotpointercapture":return s=a.pointerId,Dt.set(s,Rt(Dt.get(s)||null,e,t,r,o,a)),!0}return!1}(a,e,t,r,o))o.stopPropagation();else if(Mt(e,o),4&t&&-1<Lt.indexOf(e)){for(;null!==a;){var s=ba(a);if(null!==s&&wt(s),null===(s=Kt(e,t,r,o))&&Ho(e,t,o,Zt,r),s===a)break;a=s}null!==a&&o.stopPropagation()}else Ho(e,t,o,null,r)}}var Zt=null;function Kt(e,t,r,o){if(Zt=null,null!==(e=xa(e=we(o))))if(null===(t=Be(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Xe:return 1;case et:return 4;case tt:case rt:return 16;case ot:return 536870912;default:return 16}default:return 16}}var Qt=null,$t=null,Xt=null;function er(){if(Xt)return Xt;var e,t,r=$t,o=r.length,a="value"in Qt?Qt.value:Qt.textContent,s=a.length;for(e=0;e<o&&r[e]===a[e];e++);var n=o-e;for(t=1;t<=n&&r[o-t]===a[s-t];t++);return Xt=a.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function or(){return!1}function ar(e){function t(t,r,o,a,s){for(var n in this._reactName=t,this._targetInst=o,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(n)&&(t=e[n],this[n]=t?t(a):a[n]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?rr:or,this.isPropagationStopped=or,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var sr,nr,ir,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=ar(lr),dr=F({},lr,{view:0,detail:0}),ur=ar(dr),hr=F({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ir&&(ir&&"mousemove"===e.type?(sr=e.screenX-ir.screenX,nr=e.screenY-ir.screenY):nr=sr=0,ir=e),sr)},movementY:function(e){return"movementY"in e?e.movementY:nr}}),mr=ar(hr),pr=ar(F({},hr,{dataTransfer:0})),gr=ar(F({},dr,{relatedTarget:0})),fr=ar(F({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),vr=F({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xr=ar(vr),br=ar(F({},lr,{data:0})),yr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=jr[e])&&!!t[e]}function Nr(){return kr}var Sr=F({},dr,{key:function(e){if(e.key){var t=yr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cr=ar(Sr),Ar=ar(F({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),_r=ar(F({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nr})),Ir=ar(F({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Er=F({},hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pr=ar(Er),Dr=[9,13,27,32],Tr=d&&"CompositionEvent"in window,Lr=null;d&&"documentMode"in document&&(Lr=document.documentMode);var Mr=d&&"TextEvent"in window&&!Lr,Rr=d&&(!Tr||Lr&&8<Lr&&11>=Lr),Fr=String.fromCharCode(32),Ur=!1;function Or(e,t){switch(e){case"keyup":return-1!==Dr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wr=!1;var Br={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Br[e.type]:"textarea"===t}function Hr(e,t,r,o){Ce(o),0<(t=Vo(t,"onChange")).length&&(r=new cr("onChange","change",null,r,o),e.push({event:r,listeners:t}))}var qr=null,Vr=null;function Jr(e){Uo(e,0)}function Zr(e){if(J(ya(e)))return e}function Kr(e,t){if("change"===e)return t}var Yr=!1;if(d){var Qr;if(d){var $r="oninput"in document;if(!$r){var Xr=document.createElement("div");Xr.setAttribute("oninput","return;"),$r="function"===typeof Xr.oninput}Qr=$r}else Qr=!1;Yr=Qr&&(!document.documentMode||9<document.documentMode)}function eo(){qr&&(qr.detachEvent("onpropertychange",to),Vr=qr=null)}function to(e){if("value"===e.propertyName&&Zr(Vr)){var t=[];Hr(t,Vr,e,we(e)),Pe(Jr,t)}}function ro(e,t,r){"focusin"===e?(eo(),Vr=r,(qr=t).attachEvent("onpropertychange",to)):"focusout"===e&&eo()}function oo(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zr(Vr)}function ao(e,t){if("click"===e)return Zr(t)}function so(e,t){if("input"===e||"change"===e)return Zr(t)}var no="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function io(e,t){if(no(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var a=r[o];if(!u.call(t,a)||!no(e[a],t[a]))return!1}return!0}function lo(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function co(e,t){var r,o=lo(e);for(e=0;o;){if(3===o.nodeType){if(r=e+o.textContent.length,e<=t&&r>=t)return{node:o,offset:t-e};e=r}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=lo(o)}}function uo(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?uo(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ho(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(o){r=!1}if(!r)break;t=Z((e=t.contentWindow).document)}return t}function mo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function po(e){var t=ho(),r=e.focusedElem,o=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&uo(r.ownerDocument.documentElement,r)){if(null!==o&&mo(r))if(t=o.start,void 0===(e=o.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=r.textContent.length,s=Math.min(o.start,a);o=void 0===o.end?s:Math.min(o.end,a),!e.extend&&s>o&&(a=o,o=s,s=a),a=co(r,s);var n=co(r,o);a&&n&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==n.node||e.focusOffset!==n.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),s>o?(e.addRange(t),e.extend(n.node,n.offset)):(t.setEnd(n.node,n.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var go=d&&"documentMode"in document&&11>=document.documentMode,fo=null,vo=null,xo=null,bo=!1;function yo(e,t,r){var o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;bo||null==fo||fo!==Z(o)||("selectionStart"in(o=fo)&&mo(o)?o={start:o.selectionStart,end:o.selectionEnd}:o={anchorNode:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset},xo&&io(xo,o)||(xo=o,0<(o=Vo(vo,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:o}),t.target=fo)))}function wo(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var jo={animationend:wo("Animation","AnimationEnd"),animationiteration:wo("Animation","AnimationIteration"),animationstart:wo("Animation","AnimationStart"),transitionend:wo("Transition","TransitionEnd")},ko={},No={};function So(e){if(ko[e])return ko[e];if(!jo[e])return e;var t,r=jo[e];for(t in r)if(r.hasOwnProperty(t)&&t in No)return ko[e]=r[t];return e}d&&(No=document.createElement("div").style,"AnimationEvent"in window||(delete jo.animationend.animation,delete jo.animationiteration.animation,delete jo.animationstart.animation),"TransitionEvent"in window||delete jo.transitionend.transition);var Co=So("animationend"),Ao=So("animationiteration"),_o=So("animationstart"),Io=So("transitionend"),Eo=new Map,Po="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Do(e,t){Eo.set(e,t),l(t,[e])}for(var To=0;To<Po.length;To++){var Lo=Po[To];Do(Lo.toLowerCase(),"on"+(Lo[0].toUpperCase()+Lo.slice(1)))}Do(Co,"onAnimationEnd"),Do(Ao,"onAnimationIteration"),Do(_o,"onAnimationStart"),Do("dblclick","onDoubleClick"),Do("focusin","onFocus"),Do("focusout","onBlur"),Do(Io,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ro=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mo));function Fo(e,t,r){var o=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,o,a,n,i,l,c){if(We.apply(this,arguments),Re){if(!Re)throw Error(s(198));var d=Fe;Re=!1,Fe=null,Ue||(Ue=!0,Oe=d)}}(o,t,void 0,e),e.currentTarget=null}function Uo(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var o=e[r],a=o.event;o=o.listeners;e:{var s=void 0;if(t)for(var n=o.length-1;0<=n;n--){var i=o[n],l=i.instance,c=i.currentTarget;if(i=i.listener,l!==s&&a.isPropagationStopped())break e;Fo(a,i,c),s=l}else for(n=0;n<o.length;n++){if(l=(i=o[n]).instance,c=i.currentTarget,i=i.listener,l!==s&&a.isPropagationStopped())break e;Fo(a,i,c),s=l}}}if(Ue)throw e=Oe,Ue=!1,Oe=null,e}function Oo(e,t){var r=t[ga];void 0===r&&(r=t[ga]=new Set);var o=e+"__bubble";r.has(o)||(Go(t,e,2,!1),r.add(o))}function zo(e,t,r){var o=0;t&&(o|=4),Go(r,e,o,t)}var Wo="_reactListening"+Math.random().toString(36).slice(2);function Bo(e){if(!e[Wo]){e[Wo]=!0,n.forEach(function(t){"selectionchange"!==t&&(Ro.has(t)||zo(t,!1,e),zo(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Wo]||(t[Wo]=!0,zo("selectionchange",!1,t))}}function Go(e,t,r,o){switch(Yt(t)){case 1:var a=qt;break;case 4:a=Vt;break;default:a=Jt}r=a.bind(null,t,r,e),a=void 0,!Te||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),o?void 0!==a?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):void 0!==a?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Ho(e,t,r,o,a){var s=o;if(0===(1&t)&&0===(2&t)&&null!==o)e:for(;;){if(null===o)return;var n=o.tag;if(3===n||4===n){var i=o.stateNode.containerInfo;if(i===a||8===i.nodeType&&i.parentNode===a)break;if(4===n)for(n=o.return;null!==n;){var l=n.tag;if((3===l||4===l)&&((l=n.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;n=n.return}for(;null!==i;){if(null===(n=xa(i)))return;if(5===(l=n.tag)||6===l){o=s=n;continue e}i=i.parentNode}}o=o.return}Pe(function(){var o=s,a=we(r),n=[];e:{var i=Eo.get(e);if(void 0!==i){var l=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":l=Cr;break;case"focusin":c="focus",l=gr;break;case"focusout":c="blur",l=gr;break;case"beforeblur":case"afterblur":l=gr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=_r;break;case Co:case Ao:case _o:l=fr;break;case Io:l=Ir;break;case"scroll":l=ur;break;case"wheel":l=Pr;break;case"copy":case"cut":case"paste":l=xr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ar}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==i?i+"Capture":null:i;d=[];for(var m,p=o;null!==p;){var g=(m=p).stateNode;if(5===m.tag&&null!==g&&(m=g,null!==h&&(null!=(g=De(p,h))&&d.push(qo(p,g,m)))),u)break;p=p.return}0<d.length&&(i=new l(i,c,null,r,a),n.push({event:i,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(i="mouseover"===e||"pointerover"===e)||r===ye||!(c=r.relatedTarget||r.fromElement)||!xa(c)&&!c[pa])&&(l||i)&&(i=a.window===a?a:(i=a.ownerDocument)?i.defaultView||i.parentWindow:window,l?(l=o,null!==(c=(c=r.relatedTarget||r.toElement)?xa(c):null)&&(c!==(u=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=o),l!==c)){if(d=mr,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=Ar,g="onPointerLeave",h="onPointerEnter",p="pointer"),u=null==l?i:ya(l),m=null==c?i:ya(c),(i=new d(g,p+"leave",l,r,a)).target=u,i.relatedTarget=m,g=null,xa(a)===o&&((d=new d(h,p+"enter",c,r,a)).target=m,d.relatedTarget=u,g=d),u=g,l&&c)e:{for(h=c,p=0,m=d=l;m;m=Jo(m))p++;for(m=0,g=h;g;g=Jo(g))m++;for(;0<p-m;)d=Jo(d),p--;for(;0<m-p;)h=Jo(h),m--;for(;p--;){if(d===h||null!==h&&d===h.alternate)break e;d=Jo(d),h=Jo(h)}d=null}else d=null;null!==l&&Zo(n,i,l,d,!1),null!==c&&null!==u&&Zo(n,u,c,d,!0)}if("select"===(l=(i=o?ya(o):window).nodeName&&i.nodeName.toLowerCase())||"input"===l&&"file"===i.type)var f=Kr;else if(Gr(i))if(Yr)f=so;else{f=oo;var v=ro}else(l=i.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(f=ao);switch(f&&(f=f(e,o))?Hr(n,f,r,a):(v&&v(e,i,o),"focusout"===e&&(v=i._wrapperState)&&v.controlled&&"number"===i.type&&ee(i,"number",i.value)),v=o?ya(o):window,e){case"focusin":(Gr(v)||"true"===v.contentEditable)&&(fo=v,vo=o,xo=null);break;case"focusout":xo=vo=fo=null;break;case"mousedown":bo=!0;break;case"contextmenu":case"mouseup":case"dragend":bo=!1,yo(n,r,a);break;case"selectionchange":if(go)break;case"keydown":case"keyup":yo(n,r,a)}var x;if(Tr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Wr?Or(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(Rr&&"ko"!==r.locale&&(Wr||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wr&&(x=er()):($t="value"in(Qt=a)?Qt.value:Qt.textContent,Wr=!0)),0<(v=Vo(o,b)).length&&(b=new br(b,e,null,r,a),n.push({event:b,listeners:v}),x?b.data=x:null!==(x=zr(r))&&(b.data=x))),(x=Mr?function(e,t){switch(e){case"compositionend":return zr(t);case"keypress":return 32!==t.which?null:(Ur=!0,Fr);case"textInput":return(e=t.data)===Fr&&Ur?null:e;default:return null}}(e,r):function(e,t){if(Wr)return"compositionend"===e||!Tr&&Or(e,t)?(e=er(),Xt=$t=Qt=null,Wr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(o=Vo(o,"onBeforeInput")).length&&(a=new br("onBeforeInput","beforeinput",null,r,a),n.push({event:a,listeners:o}),a.data=x))}Uo(n,t)})}function qo(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Vo(e,t){for(var r=t+"Capture",o=[];null!==e;){var a=e,s=a.stateNode;5===a.tag&&null!==s&&(a=s,null!=(s=De(e,r))&&o.unshift(qo(e,s,a)),null!=(s=De(e,t))&&o.push(qo(e,s,a))),e=e.return}return o}function Jo(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Zo(e,t,r,o,a){for(var s=t._reactName,n=[];null!==r&&r!==o;){var i=r,l=i.alternate,c=i.stateNode;if(null!==l&&l===o)break;5===i.tag&&null!==c&&(i=c,a?null!=(l=De(r,s))&&n.unshift(qo(r,l,i)):a||null!=(l=De(r,s))&&n.push(qo(r,l,i))),r=r.return}0!==n.length&&e.push({event:t,listeners:n})}var Ko=/\r\n?/g,Yo=/\u0000|\uFFFD/g;function Qo(e){return("string"===typeof e?e:""+e).replace(Ko,"\n").replace(Yo,"")}function $o(e,t,r){if(t=Qo(t),Qo(e)!==t&&r)throw Error(s(425))}function Xo(){}var ea=null,ta=null;function ra(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var oa="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,sa="function"===typeof Promise?Promise:void 0,na="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sa?function(e){return sa.resolve(null).then(e).catch(ia)}:oa;function ia(e){setTimeout(function(){throw e})}function la(e,t){var r=t,o=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&8===a.nodeType)if("/$"===(r=a.data)){if(0===o)return e.removeChild(a),void Bt(t);o--}else"$"!==r&&"$?"!==r&&"$!"!==r||o++;r=a}while(r);Bt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function da(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var ua=Math.random().toString(36).slice(2),ha="__reactFiber$"+ua,ma="__reactProps$"+ua,pa="__reactContainer$"+ua,ga="__reactEvents$"+ua,fa="__reactListeners$"+ua,va="__reactHandles$"+ua;function xa(e){var t=e[ha];if(t)return t;for(var r=e.parentNode;r;){if(t=r[pa]||r[ha]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=da(e);null!==e;){if(r=e[ha])return r;e=da(e)}return t}r=(e=r).parentNode}return null}function ba(e){return!(e=e[ha]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ya(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wa(e){return e[ma]||null}var ja=[],ka=-1;function Na(e){return{current:e}}function Sa(e){0>ka||(e.current=ja[ka],ja[ka]=null,ka--)}function Ca(e,t){ka++,ja[ka]=e.current,e.current=t}var Aa={},_a=Na(Aa),Ia=Na(!1),Ea=Aa;function Pa(e,t){var r=e.type.contextTypes;if(!r)return Aa;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in r)s[a]=t[a];return o&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Da(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ta(){Sa(Ia),Sa(_a)}function La(e,t,r){if(_a.current!==Aa)throw Error(s(168));Ca(_a,t),Ca(Ia,r)}function Ma(e,t,r){var o=e.stateNode;if(t=t.childContextTypes,"function"!==typeof o.getChildContext)return r;for(var a in o=o.getChildContext())if(!(a in t))throw Error(s(108,G(e)||"Unknown",a));return F({},r,o)}function Ra(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Aa,Ea=_a.current,Ca(_a,e),Ca(Ia,Ia.current),!0}function Fa(e,t,r){var o=e.stateNode;if(!o)throw Error(s(169));r?(e=Ma(e,t,Ea),o.__reactInternalMemoizedMergedChildContext=e,Sa(Ia),Sa(_a),Ca(_a,e)):Sa(Ia),Ca(Ia,r)}var Ua=null,Oa=!1,za=!1;function Wa(e){null===Ua?Ua=[e]:Ua.push(e)}function Ba(){if(!za&&null!==Ua){za=!0;var e=0,t=bt;try{var r=Ua;for(bt=1;e<r.length;e++){var o=r[e];do{o=o(!0)}while(null!==o)}Ua=null,Oa=!1}catch(a){throw null!==Ua&&(Ua=Ua.slice(e+1)),Je(Xe,Ba),a}finally{bt=t,za=!1}}return null}var Ga=[],Ha=0,qa=null,Va=0,Ja=[],Za=0,Ka=null,Ya=1,Qa="";function $a(e,t){Ga[Ha++]=Va,Ga[Ha++]=qa,qa=e,Va=t}function Xa(e,t,r){Ja[Za++]=Ya,Ja[Za++]=Qa,Ja[Za++]=Ka,Ka=e;var o=Ya;e=Qa;var a=32-nt(o)-1;o&=~(1<<a),r+=1;var s=32-nt(t)+a;if(30<s){var n=a-a%5;s=(o&(1<<n)-1).toString(32),o>>=n,a-=n,Ya=1<<32-nt(t)+a|r<<a|o,Qa=s+e}else Ya=1<<s|r<<a|o,Qa=e}function es(e){null!==e.return&&($a(e,1),Xa(e,1,0))}function ts(e){for(;e===qa;)qa=Ga[--Ha],Ga[Ha]=null,Va=Ga[--Ha],Ga[Ha]=null;for(;e===Ka;)Ka=Ja[--Za],Ja[Za]=null,Qa=Ja[--Za],Ja[Za]=null,Ya=Ja[--Za],Ja[Za]=null}var rs=null,os=null,as=!1,ss=null;function ns(e,t){var r=Pc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function is(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rs=e,os=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rs=e,os=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Ka?{id:Ya,overflow:Qa}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Pc(18,null,null,0)).stateNode=t,r.return=e,e.child=r,rs=e,os=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(as){var t=os;if(t){var r=t;if(!is(e,t)){if(ls(e))throw Error(s(418));t=ca(r.nextSibling);var o=rs;t&&is(e,t)?ns(o,r):(e.flags=-4097&e.flags|2,as=!1,rs=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,as=!1,rs=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rs=e}function us(e){if(e!==rs)return!1;if(!as)return ds(e),as=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ra(e.type,e.memoizedProps)),t&&(t=os)){if(ls(e))throw hs(),Error(s(418));for(;t;)ns(e,t),t=ca(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){os=ca(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}os=null}}else os=rs?ca(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=os;e;)e=ca(e.nextSibling)}function ms(){os=rs=null,as=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var gs=y.ReactCurrentBatchConfig;function fs(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(s(309));var o=r.stateNode}if(!o)throw Error(s(147,e));var a=o,n=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===n?t.ref:(t=function(e){var t=a.refs;null===e?delete t[n]:t[n]=e},t._stringRef=n,t)}if("string"!==typeof e)throw Error(s(284));if(!r._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xs(e){return(0,e._init)(e._payload)}function bs(e){function t(t,r){if(e){var o=t.deletions;null===o?(t.deletions=[r],t.flags|=16):o.push(r)}}function r(r,o){if(!e)return null;for(;null!==o;)t(r,o),o=o.sibling;return null}function o(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Tc(e,t)).index=0,e.sibling=null,e}function n(t,r,o){return t.index=o,e?null!==(o=t.alternate)?(o=o.index)<r?(t.flags|=2,r):o:(t.flags|=2,r):(t.flags|=1048576,r)}function i(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,o){return null===t||6!==t.tag?((t=Fc(r,e.mode,o)).return=e,t):((t=a(t,r)).return=e,t)}function c(e,t,r,o){var s=r.type;return s===k?u(e,t,r.props.children,o,r.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===D&&xs(s)===t.type)?((o=a(t,r.props)).ref=fs(e,t,r),o.return=e,o):((o=Lc(r.type,r.key,r.props,null,e.mode,o)).ref=fs(e,t,r),o.return=e,o)}function d(e,t,r,o){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Uc(r,e.mode,o)).return=e,t):((t=a(t,r.children||[])).return=e,t)}function u(e,t,r,o,s){return null===t||7!==t.tag?((t=Mc(r,e.mode,o,s)).return=e,t):((t=a(t,r)).return=e,t)}function h(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(r=Lc(t.type,t.key,t.props,null,e.mode,r)).ref=fs(e,null,t),r.return=e,r;case j:return(t=Uc(t,e.mode,r)).return=e,t;case D:return h(e,(0,t._init)(t._payload),r)}if(te(t)||M(t))return(t=Mc(t,e.mode,r,null)).return=e,t;vs(e,t)}return null}function m(e,t,r,o){var a=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==a?null:l(e,t,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return r.key===a?c(e,t,r,o):null;case j:return r.key===a?d(e,t,r,o):null;case D:return m(e,t,(a=r._init)(r._payload),o)}if(te(r)||M(r))return null!==a?null:u(e,t,r,o,null);vs(e,r)}return null}function p(e,t,r,o,a){if("string"===typeof o&&""!==o||"number"===typeof o)return l(t,e=e.get(r)||null,""+o,a);if("object"===typeof o&&null!==o){switch(o.$$typeof){case w:return c(t,e=e.get(null===o.key?r:o.key)||null,o,a);case j:return d(t,e=e.get(null===o.key?r:o.key)||null,o,a);case D:return p(e,t,r,(0,o._init)(o._payload),a)}if(te(o)||M(o))return u(t,e=e.get(r)||null,o,a,null);vs(t,o)}return null}function g(a,s,i,l){for(var c=null,d=null,u=s,g=s=0,f=null;null!==u&&g<i.length;g++){u.index>g?(f=u,u=null):f=u.sibling;var v=m(a,u,i[g],l);if(null===v){null===u&&(u=f);break}e&&u&&null===v.alternate&&t(a,u),s=n(v,s,g),null===d?c=v:d.sibling=v,d=v,u=f}if(g===i.length)return r(a,u),as&&$a(a,g),c;if(null===u){for(;g<i.length;g++)null!==(u=h(a,i[g],l))&&(s=n(u,s,g),null===d?c=u:d.sibling=u,d=u);return as&&$a(a,g),c}for(u=o(a,u);g<i.length;g++)null!==(f=p(u,a,g,i[g],l))&&(e&&null!==f.alternate&&u.delete(null===f.key?g:f.key),s=n(f,s,g),null===d?c=f:d.sibling=f,d=f);return e&&u.forEach(function(e){return t(a,e)}),as&&$a(a,g),c}function f(a,i,l,c){var d=M(l);if("function"!==typeof d)throw Error(s(150));if(null==(l=d.call(l)))throw Error(s(151));for(var u=d=null,g=i,f=i=0,v=null,x=l.next();null!==g&&!x.done;f++,x=l.next()){g.index>f?(v=g,g=null):v=g.sibling;var b=m(a,g,x.value,c);if(null===b){null===g&&(g=v);break}e&&g&&null===b.alternate&&t(a,g),i=n(b,i,f),null===u?d=b:u.sibling=b,u=b,g=v}if(x.done)return r(a,g),as&&$a(a,f),d;if(null===g){for(;!x.done;f++,x=l.next())null!==(x=h(a,x.value,c))&&(i=n(x,i,f),null===u?d=x:u.sibling=x,u=x);return as&&$a(a,f),d}for(g=o(a,g);!x.done;f++,x=l.next())null!==(x=p(g,a,f,x.value,c))&&(e&&null!==x.alternate&&g.delete(null===x.key?f:x.key),i=n(x,i,f),null===u?d=x:u.sibling=x,u=x);return e&&g.forEach(function(e){return t(a,e)}),as&&$a(a,f),d}return function e(o,s,n,l){if("object"===typeof n&&null!==n&&n.type===k&&null===n.key&&(n=n.props.children),"object"===typeof n&&null!==n){switch(n.$$typeof){case w:e:{for(var c=n.key,d=s;null!==d;){if(d.key===c){if((c=n.type)===k){if(7===d.tag){r(o,d.sibling),(s=a(d,n.props.children)).return=o,o=s;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&xs(c)===d.type){r(o,d.sibling),(s=a(d,n.props)).ref=fs(o,d,n),s.return=o,o=s;break e}r(o,d);break}t(o,d),d=d.sibling}n.type===k?((s=Mc(n.props.children,o.mode,l,n.key)).return=o,o=s):((l=Lc(n.type,n.key,n.props,null,o.mode,l)).ref=fs(o,s,n),l.return=o,o=l)}return i(o);case j:e:{for(d=n.key;null!==s;){if(s.key===d){if(4===s.tag&&s.stateNode.containerInfo===n.containerInfo&&s.stateNode.implementation===n.implementation){r(o,s.sibling),(s=a(s,n.children||[])).return=o,o=s;break e}r(o,s);break}t(o,s),s=s.sibling}(s=Uc(n,o.mode,l)).return=o,o=s}return i(o);case D:return e(o,s,(d=n._init)(n._payload),l)}if(te(n))return g(o,s,n,l);if(M(n))return f(o,s,n,l);vs(o,n)}return"string"===typeof n&&""!==n||"number"===typeof n?(n=""+n,null!==s&&6===s.tag?(r(o,s.sibling),(s=a(s,n)).return=o,o=s):(r(o,s),(s=Fc(n,o.mode,l)).return=o,o=s),i(o)):r(o,s)}}var ys=bs(!0),ws=bs(!1),js=Na(null),ks=null,Ns=null,Ss=null;function Cs(){Ss=Ns=ks=null}function As(e){var t=js.current;Sa(js),e._currentValue=t}function _s(e,t,r){for(;null!==e;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==o&&(o.childLanes|=t)):null!==o&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===r)break;e=e.return}}function Is(e,t){ks=e,Ss=Ns=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bi=!0),e.firstContext=null)}function Es(e){var t=e._currentValue;if(Ss!==e)if(e={context:e,memoizedValue:t,next:null},null===Ns){if(null===ks)throw Error(s(308));Ns=e,ks.dependencies={lanes:0,firstContext:e}}else Ns=Ns.next=e;return t}var Ps=null;function Ds(e){null===Ps?Ps=[e]:Ps.push(e)}function Ts(e,t,r,o){var a=t.interleaved;return null===a?(r.next=r,Ds(t)):(r.next=a.next,a.next=r),t.interleaved=r,Ls(e,o)}function Ls(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Ms=!1;function Rs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Us(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Os(e,t,r){var o=e.updateQueue;if(null===o)return null;if(o=o.shared,0!==(2&_l)){var a=o.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),o.pending=t,Ls(e,r)}return null===(a=o.interleaved)?(t.next=t,Ds(o)):(t.next=a.next,a.next=t),o.interleaved=t,Ls(e,r)}function zs(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var o=t.lanes;r|=o&=e.pendingLanes,t.lanes=r,xt(e,r)}}function Ws(e,t){var r=e.updateQueue,o=e.alternate;if(null!==o&&r===(o=o.updateQueue)){var a=null,s=null;if(null!==(r=r.firstBaseUpdate)){do{var n={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===s?a=s=n:s=s.next=n,r=r.next}while(null!==r);null===s?a=s=t:s=s.next=t}else a=s=t;return r={baseState:o.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:o.shared,effects:o.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Bs(e,t,r,o){var a=e.updateQueue;Ms=!1;var s=a.firstBaseUpdate,n=a.lastBaseUpdate,i=a.shared.pending;if(null!==i){a.shared.pending=null;var l=i,c=l.next;l.next=null,null===n?s=c:n.next=c,n=l;var d=e.alternate;null!==d&&((i=(d=d.updateQueue).lastBaseUpdate)!==n&&(null===i?d.firstBaseUpdate=c:i.next=c,d.lastBaseUpdate=l))}if(null!==s){var u=a.baseState;for(n=0,d=c=l=null,i=s;;){var h=i.lane,m=i.eventTime;if((o&h)===h){null!==d&&(d=d.next={eventTime:m,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var p=e,g=i;switch(h=t,m=r,g.tag){case 1:if("function"===typeof(p=g.payload)){u=p.call(m,u,h);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(m,u,h):p)||void 0===h)break e;u=F({},u,h);break e;case 2:Ms=!0}}null!==i.callback&&0!==i.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[i]:h.push(i))}else m={eventTime:m,lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===d?(c=d=m,l=u):d=d.next=m,n|=h;if(null===(i=i.next)){if(null===(i=a.shared.pending))break;i=(h=i).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===d&&(l=u),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null!==(t=a.shared.interleaved)){a=t;do{n|=a.lane,a=a.next}while(a!==t)}else null===s&&(a.shared.lanes=0);Rl|=n,e.lanes=n,e.memoizedState=u}}function Gs(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var o=e[t],a=o.callback;if(null!==a){if(o.callback=null,o=r,"function"!==typeof a)throw Error(s(191,a));a.call(o)}}}var Hs={},qs=Na(Hs),Vs=Na(Hs),Js=Na(Hs);function Zs(e){if(e===Hs)throw Error(s(174));return e}function Ks(e,t){switch(Ca(Js,t),Ca(Vs,e),Ca(qs,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Sa(qs),Ca(qs,t)}function Ys(){Sa(qs),Sa(Vs),Sa(Js)}function Qs(e){Zs(Js.current);var t=Zs(qs.current),r=le(t,e.type);t!==r&&(Ca(Vs,e),Ca(qs,r))}function $s(e){Vs.current===e&&(Sa(qs),Sa(Vs))}var Xs=Na(0);function en(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var tn=[];function rn(){for(var e=0;e<tn.length;e++)tn[e]._workInProgressVersionPrimary=null;tn.length=0}var on=y.ReactCurrentDispatcher,an=y.ReactCurrentBatchConfig,sn=0,nn=null,ln=null,cn=null,dn=!1,un=!1,hn=0,mn=0;function pn(){throw Error(s(321))}function gn(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!no(e[r],t[r]))return!1;return!0}function fn(e,t,r,o,a,n){if(sn=n,nn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,on.current=null===e||null===e.memoizedState?Xn:ei,e=r(o,a),un){n=0;do{if(un=!1,hn=0,25<=n)throw Error(s(301));n+=1,cn=ln=null,t.updateQueue=null,on.current=ti,e=r(o,a)}while(un)}if(on.current=$n,t=null!==ln&&null!==ln.next,sn=0,cn=ln=nn=null,dn=!1,t)throw Error(s(300));return e}function vn(){var e=0!==hn;return hn=0,e}function xn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===cn?nn.memoizedState=cn=e:cn=cn.next=e,cn}function bn(){if(null===ln){var e=nn.alternate;e=null!==e?e.memoizedState:null}else e=ln.next;var t=null===cn?nn.memoizedState:cn.next;if(null!==t)cn=t,ln=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ln=e).memoizedState,baseState:ln.baseState,baseQueue:ln.baseQueue,queue:ln.queue,next:null},null===cn?nn.memoizedState=cn=e:cn=cn.next=e}return cn}function yn(e,t){return"function"===typeof t?t(e):t}function wn(e){var t=bn(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var o=ln,a=o.baseQueue,n=r.pending;if(null!==n){if(null!==a){var i=a.next;a.next=n.next,n.next=i}o.baseQueue=a=n,r.pending=null}if(null!==a){n=a.next,o=o.baseState;var l=i=null,c=null,d=n;do{var u=d.lane;if((sn&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),o=d.hasEagerState?d.eagerState:e(o,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,i=o):c=c.next=h,nn.lanes|=u,Rl|=u}d=d.next}while(null!==d&&d!==n);null===c?i=o:c.next=l,no(o,t.memoizedState)||(bi=!0),t.memoizedState=o,t.baseState=i,t.baseQueue=c,r.lastRenderedState=o}if(null!==(e=r.interleaved)){a=e;do{n=a.lane,nn.lanes|=n,Rl|=n,a=a.next}while(a!==e)}else null===a&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function jn(e){var t=bn(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var o=r.dispatch,a=r.pending,n=t.memoizedState;if(null!==a){r.pending=null;var i=a=a.next;do{n=e(n,i.action),i=i.next}while(i!==a);no(n,t.memoizedState)||(bi=!0),t.memoizedState=n,null===t.baseQueue&&(t.baseState=n),r.lastRenderedState=n}return[n,o]}function kn(){}function Nn(e,t){var r=nn,o=bn(),a=t(),n=!no(o.memoizedState,a);if(n&&(o.memoizedState=a,bi=!0),o=o.queue,Rn(An.bind(null,r,o,e),[e]),o.getSnapshot!==t||n||null!==cn&&1&cn.memoizedState.tag){if(r.flags|=2048,Pn(9,Cn.bind(null,r,o,a,t),void 0,null),null===Il)throw Error(s(349));0!==(30&sn)||Sn(r,t,a)}return a}function Sn(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=nn.updateQueue)?(t={lastEffect:null,stores:null},nn.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Cn(e,t,r,o){t.value=r,t.getSnapshot=o,_n(t)&&In(e)}function An(e,t,r){return r(function(){_n(t)&&In(e)})}function _n(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!no(e,r)}catch(o){return!0}}function In(e){var t=Ls(e,1);null!==t&&rc(t,e,1,-1)}function En(e){var t=xn();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yn,lastRenderedState:e},t.queue=e,e=e.dispatch=Zn.bind(null,nn,e),[t.memoizedState,e]}function Pn(e,t,r,o){return e={tag:e,create:t,destroy:r,deps:o,next:null},null===(t=nn.updateQueue)?(t={lastEffect:null,stores:null},nn.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,t.lastEffect=e),e}function Dn(){return bn().memoizedState}function Tn(e,t,r,o){var a=xn();nn.flags|=e,a.memoizedState=Pn(1|t,r,void 0,void 0===o?null:o)}function Ln(e,t,r,o){var a=bn();o=void 0===o?null:o;var s=void 0;if(null!==ln){var n=ln.memoizedState;if(s=n.destroy,null!==o&&gn(o,n.deps))return void(a.memoizedState=Pn(t,r,s,o))}nn.flags|=e,a.memoizedState=Pn(1|t,r,s,o)}function Mn(e,t){return Tn(8390656,8,e,t)}function Rn(e,t){return Ln(2048,8,e,t)}function Fn(e,t){return Ln(4,2,e,t)}function Un(e,t){return Ln(4,4,e,t)}function On(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zn(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ln(4,4,On.bind(null,t,e),r)}function Wn(){}function Bn(e,t){var r=bn();t=void 0===t?null:t;var o=r.memoizedState;return null!==o&&null!==t&&gn(t,o[1])?o[0]:(r.memoizedState=[e,t],e)}function Gn(e,t){var r=bn();t=void 0===t?null:t;var o=r.memoizedState;return null!==o&&null!==t&&gn(t,o[1])?o[0]:(e=e(),r.memoizedState=[e,t],e)}function Hn(e,t,r){return 0===(21&sn)?(e.baseState&&(e.baseState=!1,bi=!0),e.memoizedState=r):(no(r,t)||(r=gt(),nn.lanes|=r,Rl|=r,e.baseState=!0),t)}function qn(e,t){var r=bt;bt=0!==r&&4>r?r:4,e(!0);var o=an.transition;an.transition={};try{e(!1),t()}finally{bt=r,an.transition=o}}function Vn(){return bn().memoizedState}function Jn(e,t,r){var o=tc(e);if(r={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null},Kn(e))Yn(t,r);else if(null!==(r=Ts(e,t,r,o))){rc(r,e,o,ec()),Qn(r,t,o)}}function Zn(e,t,r){var o=tc(e),a={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null};if(Kn(e))Yn(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var n=t.lastRenderedState,i=s(n,r);if(a.hasEagerState=!0,a.eagerState=i,no(i,n)){var l=t.interleaved;return null===l?(a.next=a,Ds(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(r=Ts(e,t,a,o))&&(rc(r,e,o,a=ec()),Qn(r,t,o))}}function Kn(e){var t=e.alternate;return e===nn||null!==t&&t===nn}function Yn(e,t){un=dn=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Qn(e,t,r){if(0!==(4194240&r)){var o=t.lanes;r|=o&=e.pendingLanes,t.lanes=r,xt(e,r)}}var $n={readContext:Es,useCallback:pn,useContext:pn,useEffect:pn,useImperativeHandle:pn,useInsertionEffect:pn,useLayoutEffect:pn,useMemo:pn,useReducer:pn,useRef:pn,useState:pn,useDebugValue:pn,useDeferredValue:pn,useTransition:pn,useMutableSource:pn,useSyncExternalStore:pn,useId:pn,unstable_isNewReconciler:!1},Xn={readContext:Es,useCallback:function(e,t){return xn().memoizedState=[e,void 0===t?null:t],e},useContext:Es,useEffect:Mn,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Tn(4194308,4,On.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Tn(4194308,4,e,t)},useInsertionEffect:function(e,t){return Tn(4,2,e,t)},useMemo:function(e,t){var r=xn();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var o=xn();return t=void 0!==r?r(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=Jn.bind(null,nn,e),[o.memoizedState,e]},useRef:function(e){return e={current:e},xn().memoizedState=e},useState:En,useDebugValue:Wn,useDeferredValue:function(e){return xn().memoizedState=e},useTransition:function(){var e=En(!1),t=e[0];return e=qn.bind(null,e[1]),xn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var o=nn,a=xn();if(as){if(void 0===r)throw Error(s(407));r=r()}else{if(r=t(),null===Il)throw Error(s(349));0!==(30&sn)||Sn(o,t,r)}a.memoizedState=r;var n={value:r,getSnapshot:t};return a.queue=n,Mn(An.bind(null,o,n,e),[e]),o.flags|=2048,Pn(9,Cn.bind(null,o,n,r,t),void 0,null),r},useId:function(){var e=xn(),t=Il.identifierPrefix;if(as){var r=Qa;t=":"+t+"R"+(r=(Ya&~(1<<32-nt(Ya)-1)).toString(32)+r),0<(r=hn++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=mn++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ei={readContext:Es,useCallback:Bn,useContext:Es,useEffect:Rn,useImperativeHandle:zn,useInsertionEffect:Fn,useLayoutEffect:Un,useMemo:Gn,useReducer:wn,useRef:Dn,useState:function(){return wn(yn)},useDebugValue:Wn,useDeferredValue:function(e){return Hn(bn(),ln.memoizedState,e)},useTransition:function(){return[wn(yn)[0],bn().memoizedState]},useMutableSource:kn,useSyncExternalStore:Nn,useId:Vn,unstable_isNewReconciler:!1},ti={readContext:Es,useCallback:Bn,useContext:Es,useEffect:Rn,useImperativeHandle:zn,useInsertionEffect:Fn,useLayoutEffect:Un,useMemo:Gn,useReducer:jn,useRef:Dn,useState:function(){return jn(yn)},useDebugValue:Wn,useDeferredValue:function(e){var t=bn();return null===ln?t.memoizedState=e:Hn(t,ln.memoizedState,e)},useTransition:function(){return[jn(yn)[0],bn().memoizedState]},useMutableSource:kn,useSyncExternalStore:Nn,useId:Vn,unstable_isNewReconciler:!1};function ri(e,t){if(e&&e.defaultProps){for(var r in t=F({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function oi(e,t,r,o){r=null===(r=r(o,t=e.memoizedState))||void 0===r?t:F({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var ai={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var o=ec(),a=tc(e),s=Us(o,a);s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=Os(e,s,a))&&(rc(t,e,a,o),zs(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var o=ec(),a=tc(e),s=Us(o,a);s.tag=1,s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=Os(e,s,a))&&(rc(t,e,a,o),zs(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),o=tc(e),a=Us(r,o);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Os(e,a,o))&&(rc(t,e,o,r),zs(t,e,o))}};function si(e,t,r,o,a,s,n){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(o,s,n):!t.prototype||!t.prototype.isPureReactComponent||(!io(r,o)||!io(a,s))}function ni(e,t,r){var o=!1,a=Aa,s=t.contextType;return"object"===typeof s&&null!==s?s=Es(s):(a=Da(t)?Ea:_a.current,s=(o=null!==(o=t.contextTypes)&&void 0!==o)?Pa(e,a):Aa),t=new t(r,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ai,e.stateNode=t,t._reactInternals=e,o&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function ii(e,t,r,o){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,o),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,o),t.state!==e&&ai.enqueueReplaceState(t,t.state,null)}function li(e,t,r,o){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Rs(e);var s=t.contextType;"object"===typeof s&&null!==s?a.context=Es(s):(s=Da(t)?Ea:_a.current,a.context=Pa(e,s)),a.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(oi(e,t,s,r),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&ai.enqueueReplaceState(a,a.state,null),Bs(e,r,a,o),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function ci(e,t){try{var r="",o=t;do{r+=W(o),o=o.return}while(o);var a=r}catch(s){a="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:a,digest:null}}function di(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function ui(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var hi="function"===typeof WeakMap?WeakMap:Map;function mi(e,t,r){(r=Us(-1,r)).tag=3,r.payload={element:null};var o=t.value;return r.callback=function(){Hl||(Hl=!0,ql=o),ui(0,t)},r}function pi(e,t,r){(r=Us(-1,r)).tag=3;var o=e.type.getDerivedStateFromError;if("function"===typeof o){var a=t.value;r.payload=function(){return o(a)},r.callback=function(){ui(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(r.callback=function(){ui(0,t),"function"!==typeof o&&(null===Vl?Vl=new Set([this]):Vl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function gi(e,t,r){var o=e.pingCache;if(null===o){o=e.pingCache=new hi;var a=new Set;o.set(t,a)}else void 0===(a=o.get(t))&&(a=new Set,o.set(t,a));a.has(r)||(a.add(r),e=Sc.bind(null,e,t,r),t.then(e,e))}function fi(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vi(e,t,r,o,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Us(-1,1)).tag=2,Os(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var xi=y.ReactCurrentOwner,bi=!1;function yi(e,t,r,o){t.child=null===e?ws(t,null,r,o):ys(t,e.child,r,o)}function wi(e,t,r,o,a){r=r.render;var s=t.ref;return Is(t,a),o=fn(e,t,r,o,s,a),r=vn(),null===e||bi?(as&&r&&es(t),t.flags|=1,yi(e,t,o,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Hi(e,t,a))}function ji(e,t,r,o,a){if(null===e){var s=r.type;return"function"!==typeof s||Dc(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Lc(r.type,null,o,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,ki(e,t,s,o,a))}if(s=e.child,0===(e.lanes&a)){var n=s.memoizedProps;if((r=null!==(r=r.compare)?r:io)(n,o)&&e.ref===t.ref)return Hi(e,t,a)}return t.flags|=1,(e=Tc(s,o)).ref=t.ref,e.return=t,t.child=e}function ki(e,t,r,o,a){if(null!==e){var s=e.memoizedProps;if(io(s,o)&&e.ref===t.ref){if(bi=!1,t.pendingProps=o=s,0===(e.lanes&a))return t.lanes=e.lanes,Hi(e,t,a);0!==(131072&e.flags)&&(bi=!0)}}return Ci(e,t,r,o,a)}function Ni(e,t,r){var o=t.pendingProps,a=o.children,s=null!==e?e.memoizedState:null;if("hidden"===o.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ca(Tl,Dl),Dl|=r;else{if(0===(1073741824&r))return e=null!==s?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ca(Tl,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=null!==s?s.baseLanes:r,Ca(Tl,Dl),Dl|=o}else null!==s?(o=s.baseLanes|r,t.memoizedState=null):o=r,Ca(Tl,Dl),Dl|=o;return yi(e,t,a,r),t.child}function Si(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ci(e,t,r,o,a){var s=Da(r)?Ea:_a.current;return s=Pa(t,s),Is(t,a),r=fn(e,t,r,o,s,a),o=vn(),null===e||bi?(as&&o&&es(t),t.flags|=1,yi(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Hi(e,t,a))}function Ai(e,t,r,o,a){if(Da(r)){var s=!0;Ra(t)}else s=!1;if(Is(t,a),null===t.stateNode)Gi(e,t),ni(t,r,o),li(t,r,o,a),o=!0;else if(null===e){var n=t.stateNode,i=t.memoizedProps;n.props=i;var l=n.context,c=r.contextType;"object"===typeof c&&null!==c?c=Es(c):c=Pa(t,c=Da(r)?Ea:_a.current);var d=r.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof n.getSnapshotBeforeUpdate;u||"function"!==typeof n.UNSAFE_componentWillReceiveProps&&"function"!==typeof n.componentWillReceiveProps||(i!==o||l!==c)&&ii(t,n,o,c),Ms=!1;var h=t.memoizedState;n.state=h,Bs(t,o,n,a),l=t.memoizedState,i!==o||h!==l||Ia.current||Ms?("function"===typeof d&&(oi(t,r,d,o),l=t.memoizedState),(i=Ms||si(t,r,i,o,h,l,c))?(u||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||("function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount()),"function"===typeof n.componentDidMount&&(t.flags|=4194308)):("function"===typeof n.componentDidMount&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=l),n.props=o,n.state=l,n.context=c,o=i):("function"===typeof n.componentDidMount&&(t.flags|=4194308),o=!1)}else{n=t.stateNode,Fs(e,t),i=t.memoizedProps,c=t.type===t.elementType?i:ri(t.type,i),n.props=c,u=t.pendingProps,h=n.context,"object"===typeof(l=r.contextType)&&null!==l?l=Es(l):l=Pa(t,l=Da(r)?Ea:_a.current);var m=r.getDerivedStateFromProps;(d="function"===typeof m||"function"===typeof n.getSnapshotBeforeUpdate)||"function"!==typeof n.UNSAFE_componentWillReceiveProps&&"function"!==typeof n.componentWillReceiveProps||(i!==u||h!==l)&&ii(t,n,o,l),Ms=!1,h=t.memoizedState,n.state=h,Bs(t,o,n,a);var p=t.memoizedState;i!==u||h!==p||Ia.current||Ms?("function"===typeof m&&(oi(t,r,m,o),p=t.memoizedState),(c=Ms||si(t,r,c,o,h,p,l)||!1)?(d||"function"!==typeof n.UNSAFE_componentWillUpdate&&"function"!==typeof n.componentWillUpdate||("function"===typeof n.componentWillUpdate&&n.componentWillUpdate(o,p,l),"function"===typeof n.UNSAFE_componentWillUpdate&&n.UNSAFE_componentWillUpdate(o,p,l)),"function"===typeof n.componentDidUpdate&&(t.flags|=4),"function"===typeof n.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof n.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof n.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=p),n.props=o,n.state=p,n.context=l,o=c):("function"!==typeof n.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof n.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),o=!1)}return _i(e,t,r,o,s,a)}function _i(e,t,r,o,a,s){Si(e,t);var n=0!==(128&t.flags);if(!o&&!n)return a&&Fa(t,r,!1),Hi(e,t,s);o=t.stateNode,xi.current=t;var i=n&&"function"!==typeof r.getDerivedStateFromError?null:o.render();return t.flags|=1,null!==e&&n?(t.child=ys(t,e.child,null,s),t.child=ys(t,null,i,s)):yi(e,t,i,s),t.memoizedState=o.state,a&&Fa(t,r,!0),t.child}function Ii(e){var t=e.stateNode;t.pendingContext?La(0,t.pendingContext,t.pendingContext!==t.context):t.context&&La(0,t.context,!1),Ks(e,t.containerInfo)}function Ei(e,t,r,o,a){return ms(),ps(a),t.flags|=256,yi(e,t,r,o),t.child}var Pi,Di,Ti,Li,Mi={dehydrated:null,treeContext:null,retryLane:0};function Ri(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fi(e,t,r){var o,a=t.pendingProps,n=Xs.current,i=!1,l=0!==(128&t.flags);if((o=l)||(o=(null===e||null!==e.memoizedState)&&0!==(2&n)),o?(i=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(n|=1),Ca(Xs,1&n),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,i?(a=t.mode,i=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==i?(i.childLanes=0,i.pendingProps=l):i=Rc(l,a,0,null),e=Mc(e,a,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Ri(r),t.memoizedState=Mi,e):Ui(t,l));if(null!==(n=e.memoizedState)&&null!==(o=n.dehydrated))return function(e,t,r,o,a,n,i){if(r)return 256&t.flags?(t.flags&=-257,Oi(e,t,i,o=di(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(n=o.fallback,a=t.mode,o=Rc({mode:"visible",children:o.children},a,0,null),(n=Mc(n,a,i,null)).flags|=2,o.return=t,n.return=t,o.sibling=n,t.child=o,0!==(1&t.mode)&&ys(t,e.child,null,i),t.child.memoizedState=Ri(i),t.memoizedState=Mi,n);if(0===(1&t.mode))return Oi(e,t,i,null);if("$!"===a.data){if(o=a.nextSibling&&a.nextSibling.dataset)var l=o.dgst;return o=l,Oi(e,t,i,o=di(n=Error(s(419)),o,void 0))}if(l=0!==(i&e.childLanes),bi||l){if(null!==(o=Il)){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(o.suspendedLanes|i))?0:a)&&a!==n.retryLane&&(n.retryLane=a,Ls(e,a),rc(o,e,a,-1))}return gc(),Oi(e,t,i,o=di(Error(s(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Ac.bind(null,e),a._reactRetry=t,null):(e=n.treeContext,os=ca(a.nextSibling),rs=t,as=!0,ss=null,null!==e&&(Ja[Za++]=Ya,Ja[Za++]=Qa,Ja[Za++]=Ka,Ya=e.id,Qa=e.overflow,Ka=t),t=Ui(t,o.children),t.flags|=4096,t)}(e,t,l,a,o,n,r);if(i){i=a.fallback,l=t.mode,o=(n=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==n?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Tc(n,c)).subtreeFlags=14680064&n.subtreeFlags,null!==o?i=Tc(o,i):(i=Mc(i,l,r,null)).flags|=2,i.return=t,a.return=t,a.sibling=i,t.child=a,a=i,i=t.child,l=null===(l=e.child.memoizedState)?Ri(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~r,t.memoizedState=Mi,a}return e=(i=e.child).sibling,a=Tc(i,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=r),a.return=t,a.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function Ui(e,t){return(t=Rc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Oi(e,t,r,o){return null!==o&&ps(o),ys(t,e.child,null,r),(e=Ui(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zi(e,t,r){e.lanes|=t;var o=e.alternate;null!==o&&(o.lanes|=t),_s(e.return,t,r)}function Wi(e,t,r,o,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=o,s.tail=r,s.tailMode=a)}function Bi(e,t,r){var o=t.pendingProps,a=o.revealOrder,s=o.tail;if(yi(e,t,o.children,r),0!==(2&(o=Xs.current)))o=1&o|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zi(e,r,t);else if(19===e.tag)zi(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(Ca(Xs,o),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;null!==r;)null!==(e=r.alternate)&&null===en(e)&&(a=r),r=r.sibling;null===(r=a)?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Wi(t,!1,a,r,s);break;case"backwards":for(r=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===en(e)){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Wi(t,!0,r,null,s);break;case"together":Wi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gi(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hi(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Rl|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(r=Tc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Tc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function qi(e,t){if(!as)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;null!==r;)null!==r.alternate&&(o=r),r=r.sibling;null===o?t||null===e.tail?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Vi(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,o=0;if(t)for(var a=e.child;null!==a;)r|=a.lanes|a.childLanes,o|=14680064&a.subtreeFlags,o|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)r|=a.lanes|a.childLanes,o|=a.subtreeFlags,o|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=o,e.childLanes=r,t}function Ji(e,t,r){var o=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vi(t),null;case 1:case 17:return Da(t.type)&&Ta(),Vi(t),null;case 3:return o=t.stateNode,Ys(),Sa(Ia),Sa(_a),rn(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),null!==e&&null!==e.child||(us(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(nc(ss),ss=null))),Di(e,t),Vi(t),null;case 5:$s(t);var a=Zs(Js.current);if(r=t.type,null!==e&&null!=t.stateNode)Ti(e,t,r,o,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(null===t.stateNode)throw Error(s(166));return Vi(t),null}if(e=Zs(qs.current),us(t)){o=t.stateNode,r=t.type;var n=t.memoizedProps;switch(o[ha]=t,o[ma]=n,e=0!==(1&t.mode),r){case"dialog":Oo("cancel",o),Oo("close",o);break;case"iframe":case"object":case"embed":Oo("load",o);break;case"video":case"audio":for(a=0;a<Mo.length;a++)Oo(Mo[a],o);break;case"source":Oo("error",o);break;case"img":case"image":case"link":Oo("error",o),Oo("load",o);break;case"details":Oo("toggle",o);break;case"input":Y(o,n),Oo("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!n.multiple},Oo("invalid",o);break;case"textarea":ae(o,n),Oo("invalid",o)}for(var l in xe(r,n),a=null,n)if(n.hasOwnProperty(l)){var c=n[l];"children"===l?"string"===typeof c?o.textContent!==c&&(!0!==n.suppressHydrationWarning&&$o(o.textContent,c,e),a=["children",c]):"number"===typeof c&&o.textContent!==""+c&&(!0!==n.suppressHydrationWarning&&$o(o.textContent,c,e),a=["children",""+c]):i.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Oo("scroll",o)}switch(r){case"input":V(o),X(o,n,!0);break;case"textarea":V(o),ne(o);break;case"select":case"option":break;default:"function"===typeof n.onClick&&(o.onclick=Xo)}o=a,t.updateQueue=o,null!==o&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ie(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof o.is?e=l.createElement(r,{is:o.is}):(e=l.createElement(r),"select"===r&&(l=e,o.multiple?l.multiple=!0:o.size&&(l.size=o.size))):e=l.createElementNS(e,r),e[ha]=t,e[ma]=o,Pi(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(r,o),r){case"dialog":Oo("cancel",e),Oo("close",e),a=o;break;case"iframe":case"object":case"embed":Oo("load",e),a=o;break;case"video":case"audio":for(a=0;a<Mo.length;a++)Oo(Mo[a],e);a=o;break;case"source":Oo("error",e),a=o;break;case"img":case"image":case"link":Oo("error",e),Oo("load",e),a=o;break;case"details":Oo("toggle",e),a=o;break;case"input":Y(e,o),a=K(e,o),Oo("invalid",e);break;case"option":default:a=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},a=F({},o,{value:void 0}),Oo("invalid",e);break;case"textarea":ae(e,o),a=oe(e,o),Oo("invalid",e)}for(n in xe(r,a),c=a)if(c.hasOwnProperty(n)){var d=c[n];"style"===n?fe(e,d):"dangerouslySetInnerHTML"===n?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===n?"string"===typeof d?("textarea"!==r||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(i.hasOwnProperty(n)?null!=d&&"onScroll"===n&&Oo("scroll",e):null!=d&&b(e,n,d,l))}switch(r){case"input":V(e),X(e,o,!1);break;case"textarea":V(e),ne(e);break;case"option":null!=o.value&&e.setAttribute("value",""+H(o.value));break;case"select":e.multiple=!!o.multiple,null!=(n=o.value)?re(e,!!o.multiple,n,!1):null!=o.defaultValue&&re(e,!!o.multiple,o.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Xo)}switch(r){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Vi(t),null;case 6:if(e&&null!=t.stateNode)Li(e,t,e.memoizedProps,o);else{if("string"!==typeof o&&null===t.stateNode)throw Error(s(166));if(r=Zs(Js.current),Zs(qs.current),us(t)){if(o=t.stateNode,r=t.memoizedProps,o[ha]=t,(n=o.nodeValue!==r)&&null!==(e=rs))switch(e.tag){case 3:$o(o.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$o(o.nodeValue,r,0!==(1&e.mode))}n&&(t.flags|=4)}else(o=(9===r.nodeType?r:r.ownerDocument).createTextNode(o))[ha]=t,t.stateNode=o}return Vi(t),null;case 13:if(Sa(Xs),o=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(as&&null!==os&&0!==(1&t.mode)&&0===(128&t.flags))hs(),ms(),t.flags|=98560,n=!1;else if(n=us(t),null!==o&&null!==o.dehydrated){if(null===e){if(!n)throw Error(s(318));if(!(n=null!==(n=t.memoizedState)?n.dehydrated:null))throw Error(s(317));n[ha]=t}else ms(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Vi(t),n=!1}else null!==ss&&(nc(ss),ss=null),n=!0;if(!n)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((o=null!==o)!==(null!==e&&null!==e.memoizedState)&&o&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Xs.current)?0===Ll&&(Ll=3):gc())),null!==t.updateQueue&&(t.flags|=4),Vi(t),null);case 4:return Ys(),Di(e,t),null===e&&Bo(t.stateNode.containerInfo),Vi(t),null;case 10:return As(t.type._context),Vi(t),null;case 19:if(Sa(Xs),null===(n=t.memoizedState))return Vi(t),null;if(o=0!==(128&t.flags),null===(l=n.rendering))if(o)qi(n,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=en(e))){for(t.flags|=128,qi(n,!1),null!==(o=l.updateQueue)&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=r,r=t.child;null!==r;)e=o,(n=r).flags&=14680066,null===(l=n.alternate)?(n.childLanes=0,n.lanes=e,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,e=l.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ca(Xs,1&Xs.current|2),t.child}e=e.sibling}null!==n.tail&&Qe()>Bl&&(t.flags|=128,o=!0,qi(n,!1),t.lanes=4194304)}else{if(!o)if(null!==(e=en(l))){if(t.flags|=128,o=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),qi(n,!0),null===n.tail&&"hidden"===n.tailMode&&!l.alternate&&!as)return Vi(t),null}else 2*Qe()-n.renderingStartTime>Bl&&1073741824!==r&&(t.flags|=128,o=!0,qi(n,!1),t.lanes=4194304);n.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=n.last)?r.sibling=l:t.child=l,n.last=l)}return null!==n.tail?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=Qe(),t.sibling=null,r=Xs.current,Ca(Xs,o?1&r|2:1&r),t):(Vi(t),null);case 22:case 23:return uc(),o=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==o&&(t.flags|=8192),o&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Vi(t),6&t.subtreeFlags&&(t.flags|=8192)):Vi(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Zi(e,t){switch(ts(t),t.tag){case 1:return Da(t.type)&&Ta(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ys(),Sa(Ia),Sa(_a),rn(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $s(t),null;case 13:if(Sa(Xs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ms()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Sa(Xs),null;case 4:return Ys(),null;case 10:return As(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Pi=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Di=function(){},Ti=function(e,t,r,o){var a=e.memoizedProps;if(a!==o){e=t.stateNode,Zs(qs.current);var s,n=null;switch(r){case"input":a=K(e,a),o=K(e,o),n=[];break;case"select":a=F({},a,{value:void 0}),o=F({},o,{value:void 0}),n=[];break;case"textarea":a=oe(e,a),o=oe(e,o),n=[];break;default:"function"!==typeof a.onClick&&"function"===typeof o.onClick&&(e.onclick=Xo)}for(d in xe(r,o),r=null,a)if(!o.hasOwnProperty(d)&&a.hasOwnProperty(d)&&null!=a[d])if("style"===d){var l=a[d];for(s in l)l.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(i.hasOwnProperty(d)?n||(n=[]):(n=n||[]).push(d,null));for(d in o){var c=o[d];if(l=null!=a?a[d]:void 0,o.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(n||(n=[]),n.push(d,r)),r=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(n=n||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(n=n||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(i.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Oo("scroll",e),n||l===c||(n=[])):(n=n||[]).push(d,c))}r&&(n=n||[]).push("style",r);var d=n;(t.updateQueue=d)&&(t.flags|=4)}},Li=function(e,t,r,o){r!==o&&(t.flags|=4)};var Ki=!1,Yi=!1,Qi="function"===typeof WeakSet?WeakSet:Set,$i=null;function Xi(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(o){Nc(e,t,o)}else r.current=null}function el(e,t,r){try{r()}catch(o){Nc(e,t,o)}}var tl=!1;function rl(e,t,r){var o=t.updateQueue;if(null!==(o=null!==o?o.lastEffect:null)){var a=o=o.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,void 0!==s&&el(t,r,s)}a=a.next}while(a!==o)}}function ol(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var o=r.create;r.destroy=o()}r=r.next}while(r!==t)}}function al(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[ma],delete t[ga],delete t[fa],delete t[va])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function nl(e){return 5===e.tag||3===e.tag||4===e.tag}function il(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||nl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,r){var o=e.tag;if(5===o||6===o)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Xo));else if(4!==o&&null!==(e=e.child))for(ll(e,t,r),e=e.sibling;null!==e;)ll(e,t,r),e=e.sibling}function cl(e,t,r){var o=e.tag;if(5===o||6===o)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==o&&null!==(e=e.child))for(cl(e,t,r),e=e.sibling;null!==e;)cl(e,t,r),e=e.sibling}var dl=null,ul=!1;function hl(e,t,r){for(r=r.child;null!==r;)ml(e,t,r),r=r.sibling}function ml(e,t,r){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(at,r)}catch(i){}switch(r.tag){case 5:Yi||Xi(r,t);case 6:var o=dl,a=ul;dl=null,hl(e,t,r),ul=a,null!==(dl=o)&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):dl.removeChild(r.stateNode));break;case 18:null!==dl&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?la(e.parentNode,r):1===e.nodeType&&la(e,r),Bt(e)):la(dl,r.stateNode));break;case 4:o=dl,a=ul,dl=r.stateNode.containerInfo,ul=!0,hl(e,t,r),dl=o,ul=a;break;case 0:case 11:case 14:case 15:if(!Yi&&(null!==(o=r.updateQueue)&&null!==(o=o.lastEffect))){a=o=o.next;do{var s=a,n=s.destroy;s=s.tag,void 0!==n&&(0!==(2&s)||0!==(4&s))&&el(r,t,n),a=a.next}while(a!==o)}hl(e,t,r);break;case 1:if(!Yi&&(Xi(r,t),"function"===typeof(o=r.stateNode).componentWillUnmount))try{o.props=r.memoizedProps,o.state=r.memoizedState,o.componentWillUnmount()}catch(i){Nc(r,t,i)}hl(e,t,r);break;case 21:hl(e,t,r);break;case 22:1&r.mode?(Yi=(o=Yi)||null!==r.memoizedState,hl(e,t,r),Yi=o):hl(e,t,r);break;default:hl(e,t,r)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Qi),t.forEach(function(t){var o=_c.bind(null,e,t);r.has(t)||(r.add(t),t.then(o,o))})}}function gl(e,t){var r=t.deletions;if(null!==r)for(var o=0;o<r.length;o++){var a=r[o];try{var n=e,i=t,l=i;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(s(160));ml(n,i,a),dl=null,ul=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(d){Nc(a,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)fl(t,e),t=t.sibling}function fl(e,t){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&o){try{rl(3,e,e.return),ol(3,e)}catch(f){Nc(e,e.return,f)}try{rl(5,e,e.return)}catch(f){Nc(e,e.return,f)}}break;case 1:gl(t,e),vl(e),512&o&&null!==r&&Xi(r,r.return);break;case 5:if(gl(t,e),vl(e),512&o&&null!==r&&Xi(r,r.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(f){Nc(e,e.return,f)}}if(4&o&&null!=(a=e.stateNode)){var n=e.memoizedProps,i=null!==r?r.memoizedProps:n,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===n.type&&null!=n.name&&Q(a,n),be(l,i);var d=be(l,n);for(i=0;i<c.length;i+=2){var u=c[i],h=c[i+1];"style"===u?fe(a,h):"dangerouslySetInnerHTML"===u?ue(a,h):"children"===u?he(a,h):b(a,u,h,d)}switch(l){case"input":$(a,n);break;case"textarea":se(a,n);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!n.multiple;var p=n.value;null!=p?re(a,!!n.multiple,p,!1):m!==!!n.multiple&&(null!=n.defaultValue?re(a,!!n.multiple,n.defaultValue,!0):re(a,!!n.multiple,n.multiple?[]:"",!1))}a[ma]=n}catch(f){Nc(e,e.return,f)}}break;case 6:if(gl(t,e),vl(e),4&o){if(null===e.stateNode)throw Error(s(162));a=e.stateNode,n=e.memoizedProps;try{a.nodeValue=n}catch(f){Nc(e,e.return,f)}}break;case 3:if(gl(t,e),vl(e),4&o&&null!==r&&r.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(f){Nc(e,e.return,f)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(a=e.child).flags&&(n=null!==a.memoizedState,a.stateNode.isHidden=n,!n||null!==a.alternate&&null!==a.alternate.memoizedState||(Wl=Qe())),4&o&&pl(e);break;case 22:if(u=null!==r&&null!==r.memoizedState,1&e.mode?(Yi=(d=Yi)||u,gl(t,e),Yi=d):gl(t,e),vl(e),8192&o){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for($i=e,u=e.child;null!==u;){for(h=$i=u;null!==$i;){switch(p=(m=$i).child,m.tag){case 0:case 11:case 14:case 15:rl(4,m,m.return);break;case 1:Xi(m,m.return);var g=m.stateNode;if("function"===typeof g.componentWillUnmount){o=m,r=m.return;try{t=o,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(f){Nc(o,r,f)}}break;case 5:Xi(m,m.return);break;case 22:if(null!==m.memoizedState){wl(h);continue}}null!==p?(p.return=m,$i=p):wl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{a=h.stateNode,d?"function"===typeof(n=a.style).setProperty?n.setProperty("display","none","important"):n.display="none":(l=h.stateNode,i=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",i))}catch(f){Nc(e,e.return,f)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(f){Nc(e,e.return,f)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),vl(e),4&o&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(nl(r)){var o=r;break e}r=r.return}throw Error(s(160))}switch(o.tag){case 5:var a=o.stateNode;32&o.flags&&(he(a,""),o.flags&=-33),cl(e,il(e),a);break;case 3:case 4:var n=o.stateNode.containerInfo;ll(e,il(e),n);break;default:throw Error(s(161))}}catch(i){Nc(e,e.return,i)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xl(e,t,r){$i=e,bl(e,t,r)}function bl(e,t,r){for(var o=0!==(1&e.mode);null!==$i;){var a=$i,s=a.child;if(22===a.tag&&o){var n=null!==a.memoizedState||Ki;if(!n){var i=a.alternate,l=null!==i&&null!==i.memoizedState||Yi;i=Ki;var c=Yi;if(Ki=n,(Yi=l)&&!c)for($i=a;null!==$i;)l=(n=$i).child,22===n.tag&&null!==n.memoizedState?jl(a):null!==l?(l.return=n,$i=l):jl(a);for(;null!==s;)$i=s,bl(s,t,r),s=s.sibling;$i=a,Ki=i,Yi=c}yl(e)}else 0!==(8772&a.subtreeFlags)&&null!==s?(s.return=a,$i=s):yl(e)}}function yl(e){for(;null!==$i;){var t=$i;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yi||ol(5,t);break;case 1:var o=t.stateNode;if(4&t.flags&&!Yi)if(null===r)o.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:ri(t.type,r.memoizedProps);o.componentDidUpdate(a,r.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var n=t.updateQueue;null!==n&&Gs(t,n,o);break;case 3:var i=t.updateQueue;if(null!==i){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Gs(t,i,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(s(163))}Yi||512&t.flags&&al(t)}catch(m){Nc(t,t.return,m)}}if(t===e){$i=null;break}if(null!==(r=t.sibling)){r.return=t.return,$i=r;break}$i=t.return}}function wl(e){for(;null!==$i;){var t=$i;if(t===e){$i=null;break}var r=t.sibling;if(null!==r){r.return=t.return,$i=r;break}$i=t.return}}function jl(e){for(;null!==$i;){var t=$i;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ol(4,t)}catch(l){Nc(t,r,l)}break;case 1:var o=t.stateNode;if("function"===typeof o.componentDidMount){var a=t.return;try{o.componentDidMount()}catch(l){Nc(t,a,l)}}var s=t.return;try{al(t)}catch(l){Nc(t,s,l)}break;case 5:var n=t.return;try{al(t)}catch(l){Nc(t,n,l)}}}catch(l){Nc(t,t.return,l)}if(t===e){$i=null;break}var i=t.sibling;if(null!==i){i.return=t.return,$i=i;break}$i=t.return}}var kl,Nl=Math.ceil,Sl=y.ReactCurrentDispatcher,Cl=y.ReactCurrentOwner,Al=y.ReactCurrentBatchConfig,_l=0,Il=null,El=null,Pl=0,Dl=0,Tl=Na(0),Ll=0,Ml=null,Rl=0,Fl=0,Ul=0,Ol=null,zl=null,Wl=0,Bl=1/0,Gl=null,Hl=!1,ql=null,Vl=null,Jl=!1,Zl=null,Kl=0,Yl=0,Ql=null,$l=-1,Xl=0;function ec(){return 0!==(6&_l)?Qe():-1!==$l?$l:$l=Qe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&_l)&&0!==Pl?Pl&-Pl:null!==gs.transition?(0===Xl&&(Xl=gt()),Xl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,r,o){if(50<Yl)throw Yl=0,Ql=null,Error(s(185));vt(e,r,o),0!==(2&_l)&&e===Il||(e===Il&&(0===(2&_l)&&(Fl|=r),4===Ll&&ic(e,Pl)),oc(e,o),1===r&&0===_l&&0===(1&t.mode)&&(Bl=Qe()+500,Oa&&Ba()))}function oc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,o=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var n=31-nt(s),i=1<<n,l=a[n];-1===l?0!==(i&r)&&0===(i&o)||(a[n]=mt(i,t)):l<=t&&(e.expiredLanes|=i),s&=~i}}(e,t);var o=ht(e,e===Il?Pl:0);if(0===o)null!==r&&Ze(r),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(null!=r&&Ze(r),1===t)0===e.tag?function(e){Oa=!0,Wa(e)}(lc.bind(null,e)):Wa(lc.bind(null,e)),na(function(){0===(6&_l)&&Ba()}),r=null;else{switch(yt(o)){case 1:r=Xe;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=ot}r=Ic(r,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ac(e,t){if($l=-1,Xl=0,0!==(6&_l))throw Error(s(327));var r=e.callbackNode;if(jc()&&e.callbackNode!==r)return null;var o=ht(e,e===Il?Pl:0);if(0===o)return null;if(0!==(30&o)||0!==(o&e.expiredLanes)||t)t=fc(e,o);else{t=o;var a=_l;_l|=2;var n=pc();for(Il===e&&Pl===t||(Gl=null,Bl=Qe()+500,hc(e,t));;)try{xc();break}catch(l){mc(e,l)}Cs(),Sl.current=n,_l=a,null!==El?t=0:(Il=null,Pl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(o=a,t=sc(e,a))),1===t)throw r=Ml,hc(e,0),ic(e,o),oc(e,Qe()),r;if(6===t)ic(e,o);else{if(a=e.current.alternate,0===(30&o)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var o=0;o<r.length;o++){var a=r[o],s=a.getSnapshot;a=a.value;try{if(!no(s(),a))return!1}catch(i){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=fc(e,o))&&(0!==(n=pt(e))&&(o=n,t=sc(e,n))),1===t))throw r=Ml,hc(e,0),ic(e,o),oc(e,Qe()),r;switch(e.finishedWork=a,e.finishedLanes=o,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,zl,Gl);break;case 3:if(ic(e,o),(130023424&o)===o&&10<(t=Wl+500-Qe())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&o)!==o){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=oa(wc.bind(null,e,zl,Gl),t);break}wc(e,zl,Gl);break;case 4:if(ic(e,o),(4194240&o)===o)break;for(t=e.eventTimes,a=-1;0<o;){var i=31-nt(o);n=1<<i,(i=t[i])>a&&(a=i),o&=~n}if(o=a,10<(o=(120>(o=Qe()-o)?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*Nl(o/1960))-o)){e.timeoutHandle=oa(wc.bind(null,e,zl,Gl),o);break}wc(e,zl,Gl);break;default:throw Error(s(329))}}}return oc(e,Qe()),e.callbackNode===r?ac.bind(null,e):null}function sc(e,t){var r=Ol;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=fc(e,t))&&(t=zl,zl=r,null!==t&&nc(t)),e}function nc(e){null===zl?zl=e:zl.push.apply(zl,e)}function ic(e,t){for(t&=~Ul,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-nt(t),o=1<<r;e[r]=-1,t&=~o}}function lc(e){if(0!==(6&_l))throw Error(s(327));jc();var t=ht(e,0);if(0===(1&t))return oc(e,Qe()),null;var r=fc(e,t);if(0!==e.tag&&2===r){var o=pt(e);0!==o&&(t=o,r=sc(e,o))}if(1===r)throw r=Ml,hc(e,0),ic(e,t),oc(e,Qe()),r;if(6===r)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,zl,Gl),oc(e,Qe()),null}function cc(e,t){var r=_l;_l|=1;try{return e(t)}finally{0===(_l=r)&&(Bl=Qe()+500,Oa&&Ba())}}function dc(e){null!==Zl&&0===Zl.tag&&0===(6&_l)&&jc();var t=_l;_l|=1;var r=Al.transition,o=bt;try{if(Al.transition=null,bt=1,e)return e()}finally{bt=o,Al.transition=r,0===(6&(_l=t))&&Ba()}}function uc(){Dl=Tl.current,Sa(Tl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,aa(r)),null!==El)for(r=El.return;null!==r;){var o=r;switch(ts(o),o.tag){case 1:null!==(o=o.type.childContextTypes)&&void 0!==o&&Ta();break;case 3:Ys(),Sa(Ia),Sa(_a),rn();break;case 5:$s(o);break;case 4:Ys();break;case 13:case 19:Sa(Xs);break;case 10:As(o.type._context);break;case 22:case 23:uc()}r=r.return}if(Il=e,El=e=Tc(e.current,null),Pl=Dl=t,Ll=0,Ml=null,Ul=Fl=Rl=0,zl=Ol=null,null!==Ps){for(t=0;t<Ps.length;t++)if(null!==(o=(r=Ps[t]).interleaved)){r.interleaved=null;var a=o.next,s=r.pending;if(null!==s){var n=s.next;s.next=a,o.next=n}r.pending=o}Ps=null}return e}function mc(e,t){for(;;){var r=El;try{if(Cs(),on.current=$n,dn){for(var o=nn.memoizedState;null!==o;){var a=o.queue;null!==a&&(a.pending=null),o=o.next}dn=!1}if(sn=0,cn=ln=nn=null,un=!1,hn=0,Cl.current=null,null===r||null===r.return){Ll=1,Ml=t,El=null;break}e:{var n=e,i=r.return,l=r,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=fi(i);if(null!==p){p.flags&=-257,vi(p,i,l,0,t),1&p.mode&&gi(n,d,t),c=d;var g=(t=p).updateQueue;if(null===g){var f=new Set;f.add(c),t.updateQueue=f}else g.add(c);break e}if(0===(1&t)){gi(n,d,t),gc();break e}c=Error(s(426))}else if(as&&1&l.mode){var v=fi(i);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vi(v,i,l,0,t),ps(ci(c,l));break e}}n=c=ci(c,l),4!==Ll&&(Ll=2),null===Ol?Ol=[n]:Ol.push(n),n=i;do{switch(n.tag){case 3:n.flags|=65536,t&=-t,n.lanes|=t,Ws(n,mi(0,c,t));break e;case 1:l=c;var x=n.type,b=n.stateNode;if(0===(128&n.flags)&&("function"===typeof x.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Vl||!Vl.has(b)))){n.flags|=65536,t&=-t,n.lanes|=t,Ws(n,pi(n,l,t));break e}}n=n.return}while(null!==n)}yc(r)}catch(y){t=y,El===r&&null!==r&&(El=r=r.return);continue}break}}function pc(){var e=Sl.current;return Sl.current=$n,null===e?$n:e}function gc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Il||0===(268435455&Rl)&&0===(268435455&Fl)||ic(Il,Pl)}function fc(e,t){var r=_l;_l|=2;var o=pc();for(Il===e&&Pl===t||(Gl=null,hc(e,t));;)try{vc();break}catch(a){mc(e,a)}if(Cs(),_l=r,Sl.current=o,null!==El)throw Error(s(261));return Il=null,Pl=0,Ll}function vc(){for(;null!==El;)bc(El)}function xc(){for(;null!==El&&!Ke();)bc(El)}function bc(e){var t=kl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?yc(e):El=t,Cl.current=null}function yc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Ji(r,t,Dl)))return void(El=r)}else{if(null!==(r=Zi(r,t)))return r.flags&=32767,void(El=r);if(null===e)return Ll=6,void(El=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(El=t);El=t=e}while(null!==t);0===Ll&&(Ll=5)}function wc(e,t,r){var o=bt,a=Al.transition;try{Al.transition=null,bt=1,function(e,t,r,o){do{jc()}while(null!==Zl);if(0!==(6&_l))throw Error(s(327));r=e.finishedWork;var a=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var n=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-nt(r),s=1<<a;t[a]=0,o[a]=-1,e[a]=-1,r&=~s}}(e,n),e===Il&&(El=Il=null,Pl=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Jl||(Jl=!0,Ic(tt,function(){return jc(),null})),n=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||n){n=Al.transition,Al.transition=null;var i=bt;bt=1;var l=_l;_l|=4,Cl.current=null,function(e,t){if(ea=Ht,mo(e=ho())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var o=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(o&&0!==o.rangeCount){r=o.anchorNode;var a=o.anchorOffset,n=o.focusNode;o=o.focusOffset;try{r.nodeType,n.nodeType}catch(w){r=null;break e}var i=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==r||0!==a&&3!==h.nodeType||(l=i+a),h!==n||0!==o&&3!==h.nodeType||(c=i+o),3===h.nodeType&&(i+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===r&&++d===a&&(l=i),m===n&&++u===o&&(c=i),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ta={focusedElem:e,selectionRange:r},Ht=!1,$i=t;null!==$i;)if(e=(t=$i).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$i=e;else for(;null!==$i;){t=$i;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var f=g.memoizedProps,v=g.memoizedState,x=t.stateNode,b=x.getSnapshotBeforeUpdate(t.elementType===t.type?f:ri(t.type,f),v);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var y=t.stateNode.containerInfo;1===y.nodeType?y.textContent="":9===y.nodeType&&y.documentElement&&y.removeChild(y.documentElement);break;default:throw Error(s(163))}}catch(w){Nc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,$i=e;break}$i=t.return}g=tl,tl=!1}(e,r),fl(r,e),po(ta),Ht=!!ea,ta=ea=null,e.current=r,xl(r,e,a),Ye(),_l=l,bt=i,Al.transition=n}else e.current=r;if(Jl&&(Jl=!1,Zl=e,Kl=a),n=e.pendingLanes,0===n&&(Vl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),oc(e,Qe()),null!==t)for(o=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],o(a.value,{componentStack:a.stack,digest:a.digest});if(Hl)throw Hl=!1,e=ql,ql=null,e;0!==(1&Kl)&&0!==e.tag&&jc(),n=e.pendingLanes,0!==(1&n)?e===Ql?Yl++:(Yl=0,Ql=e):Yl=0,Ba()}(e,t,r,o)}finally{Al.transition=a,bt=o}return null}function jc(){if(null!==Zl){var e=yt(Kl),t=Al.transition,r=bt;try{if(Al.transition=null,bt=16>e?16:e,null===Zl)var o=!1;else{if(e=Zl,Zl=null,Kl=0,0!==(6&_l))throw Error(s(331));var a=_l;for(_l|=4,$i=e.current;null!==$i;){var n=$i,i=n.child;if(0!==(16&$i.flags)){var l=n.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for($i=d;null!==$i;){var u=$i;switch(u.tag){case 0:case 11:case 15:rl(8,u,n)}var h=u.child;if(null!==h)h.return=u,$i=h;else for(;null!==$i;){var m=(u=$i).sibling,p=u.return;if(sl(u),u===d){$i=null;break}if(null!==m){m.return=p,$i=m;break}$i=p}}}var g=n.alternate;if(null!==g){var f=g.child;if(null!==f){g.child=null;do{var v=f.sibling;f.sibling=null,f=v}while(null!==f)}}$i=n}}if(0!==(2064&n.subtreeFlags)&&null!==i)i.return=n,$i=i;else e:for(;null!==$i;){if(0!==(2048&(n=$i).flags))switch(n.tag){case 0:case 11:case 15:rl(9,n,n.return)}var x=n.sibling;if(null!==x){x.return=n.return,$i=x;break e}$i=n.return}}var b=e.current;for($i=b;null!==$i;){var y=(i=$i).child;if(0!==(2064&i.subtreeFlags)&&null!==y)y.return=i,$i=y;else e:for(i=b;null!==$i;){if(0!==(2048&(l=$i).flags))try{switch(l.tag){case 0:case 11:case 15:ol(9,l)}}catch(j){Nc(l,l.return,j)}if(l===i){$i=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,$i=w;break e}$i=l.return}}if(_l=a,Ba(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(at,e)}catch(j){}o=!0}return o}finally{bt=r,Al.transition=t}}return!1}function kc(e,t,r){e=Os(e,t=mi(0,t=ci(r,t),1),1),t=ec(),null!==e&&(vt(e,1,t),oc(e,t))}function Nc(e,t,r){if(3===e.tag)kc(e,e,r);else for(;null!==t;){if(3===t.tag){kc(t,e,r);break}if(1===t.tag){var o=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof o.componentDidCatch&&(null===Vl||!Vl.has(o))){t=Os(t,e=pi(t,e=ci(r,e),1),1),e=ec(),null!==t&&(vt(t,1,e),oc(t,e));break}}t=t.return}}function Sc(e,t,r){var o=e.pingCache;null!==o&&o.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,Il===e&&(Pl&r)===r&&(4===Ll||3===Ll&&(130023424&Pl)===Pl&&500>Qe()-Wl?hc(e,0):Ul|=r),oc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var r=ec();null!==(e=Ls(e,t))&&(vt(e,t,r),oc(e,r))}function Ac(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Cc(e,r)}function _c(e,t){var r=0;switch(e.tag){case 13:var o=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(s(314))}null!==o&&o.delete(t),Cc(e,r)}function Ic(e,t){return Je(e,t)}function Ec(e,t,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,r,o){return new Ec(e,t,r,o)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Tc(e,t){var r=e.alternate;return null===r?((r=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Lc(e,t,r,o,a,n){var i=2;if(o=e,"function"===typeof e)Dc(e)&&(i=1);else if("string"===typeof e)i=5;else e:switch(e){case k:return Mc(r.children,a,n,t);case N:i=8,a|=8;break;case S:return(e=Pc(12,r,t,2|a)).elementType=S,e.lanes=n,e;case I:return(e=Pc(13,r,t,a)).elementType=I,e.lanes=n,e;case E:return(e=Pc(19,r,t,a)).elementType=E,e.lanes=n,e;case T:return Rc(r,a,n,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:i=10;break e;case A:i=9;break e;case _:i=11;break e;case P:i=14;break e;case D:i=16,o=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pc(i,r,t,a)).elementType=e,t.type=o,t.lanes=n,t}function Mc(e,t,r,o){return(e=Pc(7,e,o,t)).lanes=r,e}function Rc(e,t,r,o){return(e=Pc(22,e,o,t)).elementType=T,e.lanes=r,e.stateNode={isHidden:!1},e}function Fc(e,t,r){return(e=Pc(6,e,null,t)).lanes=r,e}function Uc(e,t,r){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Oc(e,t,r,o,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ft(0),this.expirationTimes=ft(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ft(0),this.identifierPrefix=o,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function zc(e,t,r,o,a,s,n,i,l){return e=new Oc(e,t,r,i,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:o,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rs(s),e}function Wc(e){if(!e)return Aa;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Da(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var r=e.type;if(Da(r))return Ma(e,r,t)}return t}function Bc(e,t,r,o,a,s,n,i,l){return(e=zc(r,o,!0,e,0,s,0,i,l)).context=Wc(null),r=e.current,(s=Us(o=ec(),a=tc(r))).callback=void 0!==t&&null!==t?t:null,Os(r,s,a),e.current.lanes=a,vt(e,a,o),oc(e,o),e}function Gc(e,t,r,o){var a=t.current,s=ec(),n=tc(a);return r=Wc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Us(s,n)).payload={element:e},null!==(o=void 0===o?null:o)&&(t.callback=o),null!==(e=Os(a,t,n))&&(rc(e,a,n,s),zs(e,a,n)),n}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Vc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}kl=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ia.current)bi=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return bi=!1,function(e,t,r){switch(t.tag){case 3:Ii(t),ms();break;case 5:Qs(t);break;case 1:Da(t.type)&&Ra(t);break;case 4:Ks(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,a=t.memoizedProps.value;Ca(js,o._currentValue),o._currentValue=a;break;case 13:if(null!==(o=t.memoizedState))return null!==o.dehydrated?(Ca(Xs,1&Xs.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Fi(e,t,r):(Ca(Xs,1&Xs.current),null!==(e=Hi(e,t,r))?e.sibling:null);Ca(Xs,1&Xs.current);break;case 19:if(o=0!==(r&t.childLanes),0!==(128&e.flags)){if(o)return Bi(e,t,r);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ca(Xs,Xs.current),o)break;return null;case 22:case 23:return t.lanes=0,Ni(e,t,r)}return Hi(e,t,r)}(e,t,r);bi=0!==(131072&e.flags)}else bi=!1,as&&0!==(1048576&t.flags)&&Xa(t,Va,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;Gi(e,t),e=t.pendingProps;var a=Pa(t,_a.current);Is(t,r),a=fn(null,t,o,e,a,r);var n=vn();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Da(o)?(n=!0,Ra(t)):n=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Rs(t),a.updater=ai,t.stateNode=a,a._reactInternals=t,li(t,o,e,r),t=_i(null,t,o,!0,n,r)):(t.tag=0,as&&n&&es(t),yi(null,t,a,r),t=t.child),t;case 16:o=t.elementType;e:{switch(Gi(e,t),e=t.pendingProps,o=(a=o._init)(o._payload),t.type=o,a=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===_)return 11;if(e===P)return 14}return 2}(o),e=ri(o,e),a){case 0:t=Ci(null,t,o,e,r);break e;case 1:t=Ai(null,t,o,e,r);break e;case 11:t=wi(null,t,o,e,r);break e;case 14:t=ji(null,t,o,ri(o.type,e),r);break e}throw Error(s(306,o,""))}return t;case 0:return o=t.type,a=t.pendingProps,Ci(e,t,o,a=t.elementType===o?a:ri(o,a),r);case 1:return o=t.type,a=t.pendingProps,Ai(e,t,o,a=t.elementType===o?a:ri(o,a),r);case 3:e:{if(Ii(t),null===e)throw Error(s(387));o=t.pendingProps,a=(n=t.memoizedState).element,Fs(e,t),Bs(t,o,null,r);var i=t.memoizedState;if(o=i.element,n.isDehydrated){if(n={element:o,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=n,t.memoizedState=n,256&t.flags){t=Ei(e,t,o,r,a=ci(Error(s(423)),t));break e}if(o!==a){t=Ei(e,t,o,r,a=ci(Error(s(424)),t));break e}for(os=ca(t.stateNode.containerInfo.firstChild),rs=t,as=!0,ss=null,r=ws(t,null,o,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(ms(),o===a){t=Hi(e,t,r);break e}yi(e,t,o,r)}t=t.child}return t;case 5:return Qs(t),null===e&&cs(t),o=t.type,a=t.pendingProps,n=null!==e?e.memoizedProps:null,i=a.children,ra(o,a)?i=null:null!==n&&ra(o,n)&&(t.flags|=32),Si(e,t),yi(e,t,i,r),t.child;case 6:return null===e&&cs(t),null;case 13:return Fi(e,t,r);case 4:return Ks(t,t.stateNode.containerInfo),o=t.pendingProps,null===e?t.child=ys(t,null,o,r):yi(e,t,o,r),t.child;case 11:return o=t.type,a=t.pendingProps,wi(e,t,o,a=t.elementType===o?a:ri(o,a),r);case 7:return yi(e,t,t.pendingProps,r),t.child;case 8:case 12:return yi(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(o=t.type._context,a=t.pendingProps,n=t.memoizedProps,i=a.value,Ca(js,o._currentValue),o._currentValue=i,null!==n)if(no(n.value,i)){if(n.children===a.children&&!Ia.current){t=Hi(e,t,r);break e}}else for(null!==(n=t.child)&&(n.return=t);null!==n;){var l=n.dependencies;if(null!==l){i=n.child;for(var c=l.firstContext;null!==c;){if(c.context===o){if(1===n.tag){(c=Us(-1,r&-r)).tag=2;var d=n.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}n.lanes|=r,null!==(c=n.alternate)&&(c.lanes|=r),_s(n.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===n.tag)i=n.type===t.type?null:n.child;else if(18===n.tag){if(null===(i=n.return))throw Error(s(341));i.lanes|=r,null!==(l=i.alternate)&&(l.lanes|=r),_s(i,r,t),i=n.sibling}else i=n.child;if(null!==i)i.return=n;else for(i=n;null!==i;){if(i===t){i=null;break}if(null!==(n=i.sibling)){n.return=i.return,i=n;break}i=i.return}n=i}yi(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,o=t.pendingProps.children,Is(t,r),o=o(a=Es(a)),t.flags|=1,yi(e,t,o,r),t.child;case 14:return a=ri(o=t.type,t.pendingProps),ji(e,t,o,a=ri(o.type,a),r);case 15:return ki(e,t,t.type,t.pendingProps,r);case 17:return o=t.type,a=t.pendingProps,a=t.elementType===o?a:ri(o,a),Gi(e,t),t.tag=1,Da(o)?(e=!0,Ra(t)):e=!1,Is(t,r),ni(t,o,a),li(t,o,a,r),_i(null,t,o,!0,e,r);case 19:return Bi(e,t,r);case 22:return Ni(e,t,r)}throw Error(s(156,t.tag))};var Jc="function"===typeof reportError?reportError:function(e){console.error(e)};function Zc(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function Xc(e,t,r,o,a){var s=r._reactRootContainer;if(s){var n=s;if("function"===typeof a){var i=a;a=function(){var e=Hc(n);i.call(e)}}Gc(t,n,e,a)}else n=function(e,t,r,o,a){if(a){if("function"===typeof o){var s=o;o=function(){var e=Hc(n);s.call(e)}}var n=Bc(t,o,e,0,null,!1,0,"",$c);return e._reactRootContainer=n,e[pa]=n.current,Bo(8===e.nodeType?e.parentNode:e),dc(),n}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof o){var i=o;o=function(){var e=Hc(l);i.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[pa]=l.current,Bo(8===e.nodeType?e.parentNode:e),dc(function(){Gc(t,l,r,o)}),l}(r,t,e,a,o);return Hc(n)}Kc.prototype.render=Zc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Gc(e,t,null,null)},Kc.prototype.unmount=Zc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Gc(null,e,null,null)}),t[pa]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Tt.length&&0!==t&&t<Tt[r].priority;r++);Tt.splice(r,0,e),0===r&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ut(t.pendingLanes);0!==r&&(xt(t,1|r),oc(t,Qe()),0===(6&_l)&&(Bl=Qe()+500,Ba()))}break;case 13:dc(function(){var t=Ls(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}}),Vc(e,1)}},jt=function(e){if(13===e.tag){var t=Ls(e,134217728);if(null!==t)rc(t,e,134217728,ec());Vc(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),r=Ls(e,t);if(null!==r)rc(r,e,t,ec());Vc(e,t)}},Nt=function(){return bt},St=function(e,t){var r=bt;try{return bt=e,t()}finally{bt=r}},je=function(e,t,r){switch(t){case"input":if($(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var o=r[t];if(o!==e&&o.form===e.form){var a=wa(o);if(!a)throw Error(s(90));J(o),$(o,a)}}}break;case"textarea":se(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},_e=cc,Ie=dc;var ed={usingClientEntryPoint:!1,Events:[ba,ya,wa,Ce,Ae,cc]},td={findFiberByHostInstance:xa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var od=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!od.isDisabled&&od.supportsFiber)try{at=od.inject(rd),st=od}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(s(200));return function(e,t,r){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:j,key:null==o?null:""+o,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Yc(e))throw Error(s(299));var r=!1,o="",a=Jc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(o=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=zc(e,1,!1,null,0,r,0,o,a),e[pa]=t.current,Bo(8===e.nodeType?e.parentNode:e),new Zc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,r){if(!Qc(t))throw Error(s(200));return Xc(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Yc(e))throw Error(s(405));var o=null!=r&&r.hydratedSources||null,a=!1,n="",i=Jc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(a=!0),void 0!==r.identifierPrefix&&(n=r.identifierPrefix),void 0!==r.onRecoverableError&&(i=r.onRecoverableError)),t=Bc(t,null,e,1,null!=r?r:null,a,0,n,i),e[pa]=t.current,Bo(e),o)for(e=0;e<o.length;e++)a=(a=(r=o[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Kc(t)},t.render=function(e,t,r){if(!Qc(t))throw Error(s(200));return Xc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(s(40));return!!e._reactRootContainer&&(dc(function(){Xc(null,null,e,!1,function(){e._reactRootContainer=null,e[pa]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,o){if(!Qc(r))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Xc(e,t,r,!1,o)},t.version="18.3.1-next-f1338f8080-20240426"},736:function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(r(374));class s extends a.default{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}in(e,t){const r=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"in.(".concat(r,")")),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:r,type:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="";"plain"===o?a="pl":"phrase"===o?a="ph":"websearch"===o&&(a="w");const s=void 0===r?"":"(".concat(r,")");return this.url.searchParams.append(e,"".concat(a,"fts").concat(s,".").concat(t)),this}match(e){return Object.entries(e).forEach(e=>{let[t,r]=e;this.url.searchParams.append(t,"eq.".concat(r))}),this}not(e,t,r){return this.url.searchParams.append(e,"not.".concat(t,".").concat(r)),this}or(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=r?"".concat(r,".or"):"or";return this.url.searchParams.append(o,"(".concat(e,")")),this}filter(e,t,r){return this.url.searchParams.append(e,"".concat(t,".").concat(r)),this}}t.default=s},784:(e,t,r)=>{"use strict";r.d(t,{createGeneralNotification:()=>d,fp:()=>c});const o="notif:unreadChanged",a=e=>"".concat("tag.notifications.").concat(e);function s(e){try{if("undefined"===typeof window)return[];const t=window.localStorage.getItem(a(e));return t?JSON.parse(t):[]}catch(t){return[]}}function n(e,t){try{"undefined"!==typeof window&&window.localStorage.setItem(a(e),JSON.stringify(t))}catch(r){console.warn("Failed to write notifications:",r)}}const i=()=>Date.now().toString(36)+Math.random().toString(36).slice(2),l=()=>(new Date).toISOString(),c=async e=>{const t={id:i(),userId:e.userId,type:"collaboration",title:e.title,message:e.message,projectId:e.projectId,meta:e.meta||{},isRead:!1,createdAt:l()},r=s(e.userId);return r.unshift(t),n(e.userId,r),"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent(o,{detail:{userId:e.userId}})),t},d=async e=>{const t={id:i(),userId:e.userId,type:e.type||"general",title:e.title,message:e.message,projectId:e.projectId,meta:e.meta||{},isRead:!1,createdAt:l()},r=s(e.userId);return r.unshift(t),n(e.userId,r),"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent(o,{detail:{userId:e.userId}})),t}},792:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});const o=new class{constructor(){this.dbName="TAGAvatarDB",this.dbVersion=1,this.storeName="avatars"}async initDB(){return new Promise((e,t)=>{const r=indexedDB.open(this.dbName,this.dbVersion);r.onerror=()=>t(r.error),r.onsuccess=()=>e(r.result),r.onupgradeneeded=e=>{const t=e.target.result;if(!t.objectStoreNames.contains(this.storeName)){t.createObjectStore(this.storeName,{keyPath:"userId"}).createIndex("userId","userId",{unique:!0})}}})}async storeAvatar(e,t){const r=await this.initDB();try{let a;if(t instanceof Blob)a=t;else if(t instanceof File)a=t;else if("string"===typeof t&&t.startsWith("data:image/")){const e=await fetch(t);a=await e.blob()}else{if("string"!==typeof t||!t.startsWith("http"))throw new Error("Unsupported avatar data format");try{const e=await fetch(t);if(!e.ok)throw new Error("Failed to fetch image: ".concat(e.status," ").concat(e.statusText));a=await e.blob()}catch(o){return console.warn("[AvatarStorage] Failed to fetch HTTP URL, skipping storage:",o),{success:!0,userId:e,skipped:!0}}}return new Promise((t,o)=>{const s=r.transaction([this.storeName],"readwrite").objectStore(this.storeName).put({userId:e,avatar:a,timestamp:Date.now()});s.onsuccess=()=>{console.log("[AvatarStorage] Stored avatar for user: ".concat(e,", size: ").concat(a.size," bytes")),t({success:!0,userId:e})},s.onerror=()=>o(s.error)})}catch(a){throw console.error("[AvatarStorage] Error storing avatar: ".concat(a)),a}}async getAvatar(e){const t=await this.initDB();return new Promise((r,o)=>{const a=t.transaction([this.storeName],"readonly").objectStore(this.storeName).get(e);a.onsuccess=()=>{a.result&&a.result.avatar instanceof Blob?(console.log("[AvatarStorage] Found avatar for user: ".concat(e,", size: ").concat(a.result.avatar.size," bytes")),r({success:!0,avatar:a.result.avatar})):(console.log("[AvatarStorage] No avatar found for user: ".concat(e)),r({success:!1,error:"Avatar not found"}))},a.onerror=()=>o(a.error)})}async getAvatarUrl(e){try{const t=await this.getAvatar(e);if(t.success&&t.avatar instanceof Blob){const r=URL.createObjectURL(t.avatar);return console.log("[AvatarStorage] Created ObjectURL for user: ".concat(e,": ").concat(r)),r}return console.log("[AvatarStorage] No avatar URL for user: ".concat(e)),null}catch(t){return console.error("[AvatarStorage] Error getting avatar URL: ".concat(t)),null}}async deleteAvatar(e){const t=await this.initDB();return new Promise((r,o)=>{const a=t.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(e);a.onsuccess=()=>{console.log("[AvatarStorage] Deleted avatar for user: ".concat(e)),r({success:!0})},a.onerror=()=>o(a.error)})}revokeAvatarUrl(e){e&&e.startsWith("blob:")&&(URL.revokeObjectURL(e),console.log("[AvatarStorage] Revoked ObjectURL: ".concat(e)))}async hasAvatar(e){return(await this.getAvatar(e)).success}}},829:function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(r(736));t.default=class{constructor(e,t){let{headers:r={},schema:o,fetch:a}=t;this.url=e,this.headers=new Headers(r),this.schema=o,this.fetch=a}select(e){let{head:t=!1,count:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=t?"HEAD":"GET";let s=!1;const n=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!s?"":('"'===e&&(s=!s),e)).join("");return this.url.searchParams.set("select",n),r&&this.headers.append("Prefer","count=".concat(r)),new a.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e){let{count:t,defaultToNull:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var o;if(t&&this.headers.append("Prefer","count=".concat(t)),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new a.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(o=this.fetch)&&void 0!==o?o:fetch})}upsert(e){let{onConflict:t,ignoreDuplicates:r=!1,count:o,defaultToNull:s=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;if(this.headers.append("Prefer","resolution=".concat(r?"ignore":"merge","-duplicates")),void 0!==t&&this.url.searchParams.set("on_conflict",t),o&&this.headers.append("Prefer","count=".concat(o)),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new a.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;return t&&this.headers.append("Prefer","count=".concat(t)),new a.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return e&&this.headers.append("Prefer","count=".concat(e)),new a.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}}},853:(e,t,r)=>{"use strict";e.exports=r(234)},915:(e,t,r)=>{"use strict";r.d(t,{Bx:()=>i,EP:()=>s,Ih:()=>n});const o=e=>e?"u.".concat(e):null,a=e=>{const t=o(e);return"".concat(t,".avatarCache")},s=e=>{try{if("undefined"===typeof window||!e)return null;const t=a(e);if(!t)return null;const r=JSON.parse(localStorage.getItem(t)||"{}")[e];return r&&Date.now()-r.timestamp<864e5?r.url:null}catch(t){return console.warn("Error reading avatar cache:",t),null}},n=(e,t)=>{try{if("undefined"===typeof window||!e)return;const r=a(e);if(!r)return;const o=JSON.parse(localStorage.getItem(r)||"{}");o[e]={url:t,timestamp:Date.now()},localStorage.setItem(r,JSON.stringify(o))}catch(r){console.warn("Error caching avatar:",r)}},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{if("undefined"===typeof window)return;if(e){const t=a(e),r=JSON.parse(localStorage.getItem(t)||"{}");delete r[e],localStorage.setItem(t,JSON.stringify(r));const s=(e=>{const t=o(e);return"".concat(t,".avatar")})(e);localStorage.removeItem(s),console.log("[clearAvatarCache] Cleared avatar data for user: ".concat(e))}else{Object.keys(localStorage).forEach(e=>{(e.includes(".avatarCache")||e.includes(".avatar"))&&localStorage.removeItem(e)}),console.log("[clearAvatarCache] Cleared all avatar data")}}catch(t){console.warn("Error clearing avatar cache:",t)}}},950:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(730)},980:function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const a=o(r(210));t.PostgrestClient=a.default;const s=o(r(829));t.PostgrestQueryBuilder=s.default;const n=o(r(736));t.PostgrestFilterBuilder=n.default;const i=o(r(374));t.PostgrestTransformBuilder=i.default;const l=o(r(286));t.PostgrestBuilder=l.default;const c=o(r(611));t.PostgrestError=c.default,t.default={PostgrestClient:a.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:l.default,PostgrestError:c.default}},989:e=>{"use strict";var t=!("undefined"===typeof window||!window.document||!window.document.createElement),r={canUseDOM:t,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:t&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:t&&!!window.screen,isInWorker:!t};e.exports=r}},t={};function r(o){var a=t[o];if(void 0!==a)return a.exports;var s=t[o]={exports:{}};return e[o].call(s.exports,s,s.exports,r),s.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};r.r(e),r.d(e,{attachTagsToProject:()=>mm,attachTagsToUser:()=>hm,attachTagsToWork:()=>um,getPopularTags:()=>dm,getProjectsByTag:()=>lm,getTagStats:()=>sm,getUsersByTag:()=>im,getWorksByTag:()=>nm,searchTags:()=>cm});var t={};r.r(t),r.d(t,{attachTagsToProject:()=>Sm,attachTagsToUser:()=>Nm,attachTagsToWork:()=>km,getMajorStats:()=>xm,getPopularTags:()=>vm,getSoftwareStats:()=>bm,getTagStats:()=>pm,getWorksByCombination:()=>jm,getWorksByMajor:()=>ym,getWorksBySoftware:()=>wm,getWorksByTag:()=>gm,searchTags:()=>fm});var o=r(43),a=r(391);function s(e,t){if(null==e)return{};var r,o,a=function(e,t){if(null==e)return{};var r={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(-1!==t.indexOf(o))continue;r[o]=e[o]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)r=s[o],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var n=r(51);const i=["sri"],l=["page"],c=["page","matches"],d=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],u=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],h=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var m="popstate";function p(){return w(function(e,t){let{pathname:r,search:o,hash:a}=e.location;return x("",{pathname:r,search:o,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:b(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function g(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function f(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function v(e,t){return{usr:e.state,key:e.key,idx:t}}function x(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3?arguments[3]:void 0;return(0,n.A)((0,n.A)({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?y(t):t),{},{state:r,key:t&&t.key||o||Math.random().toString(36).substring(2,10)})}function b(e){let{pathname:t="/",search:r="",hash:o=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),o&&"#"!==o&&(t+="#"===o.charAt(0)?o:"#"+o),t}function y(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let o=e.indexOf("?");o>=0&&(t.search=e.substring(o),e=e.substring(0,o)),e&&(t.pathname=e)}return t}function w(e,t,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:a=document.defaultView,v5Compat:s=!1}=o,i=a.history,l="POP",c=null,d=u();function u(){return(i.state||{idx:null}).idx}function h(){l="POP";let e=u(),t=null==e?null:e-d;d=e,c&&c({action:l,location:g.location,delta:t})}function p(e){return j(e)}null==d&&(d=0,i.replaceState((0,n.A)((0,n.A)({},i.state),{},{idx:d}),""));let g={get action(){return l},get location(){return e(a,i)},listen(e){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(m,h),c=e,()=>{a.removeEventListener(m,h),c=null}},createHref:e=>t(a,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l="PUSH";let o=x(g.location,e,t);r&&r(o,e),d=u()+1;let n=v(o,d),h=g.createHref(o);try{i.pushState(n,"",h)}catch(m){if(m instanceof DOMException&&"DataCloneError"===m.name)throw m;a.location.assign(h)}s&&c&&c({action:l,location:g.location,delta:1})},replace:function(e,t){l="REPLACE";let o=x(g.location,e,t);r&&r(o,e),d=u();let a=v(o,d),n=g.createHref(o);i.replaceState(a,"",n),s&&c&&c({action:l,location:g.location,delta:0})},go:e=>i.go(e)};return g}function j(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r="http://localhost";"undefined"!==typeof window&&(r="null"!==window.location.origin?window.location.origin:window.location.href),g(r,"No window.location.(origin|href) available to create URL");let o="string"===typeof e?e:b(e);return o=o.replace(/ $/,"%20"),!t&&o.startsWith("//")&&(o=r+o),new URL(o,r)}new WeakMap;function k(e,t){return N(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function N(e,t,r,o){let a=O(("string"===typeof t?y(t):t).pathname||"/",r);if(null==a)return null;let s=S(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let n=null;for(let i=0;null==n&&i<s.length;++i){let e=U(a);n=M(s[i],e,o)}return n}function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=function(e,s){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,i=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(o)&&n)return;g(l.relativePath.startsWith(o),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(o,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(o.length)}let c=H([o,l.relativePath]),d=r.concat(l);e.children&&e.children.length>0&&(g(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),S(e.children,t,d,c,n)),(null!=e.path||e.index)&&t.push({path:c,score:L(c,e.index),routesMeta:d})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!==(r=e.path)&&void 0!==r&&r.includes("?"))for(let o of C(e.path))s(e,t,!0,o);else s(e,t)}),t}function C(e){let t=e.split("/");if(0===t.length)return[];let[r,...o]=t,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(0===o.length)return a?[s,""]:[s];let n=C(o.join("/")),i=[];return i.push(...n.map(e=>""===e?s:[s,e].join("/"))),a&&i.push(...n),i.map(t=>e.startsWith("/")&&""===t?"/":t)}var A=/^:[\w-]+$/,_=3,I=2,E=1,P=10,D=-2,T=e=>"*"===e;function L(e,t){let r=e.split("/"),o=r.length;return r.some(T)&&(o+=D),t&&(o+=I),r.filter(e=>!T(e)).reduce((e,t)=>e+(A.test(t)?_:""===t?E:P),o)}function M(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:o}=e,a={},s="/",n=[];for(let i=0;i<o.length;++i){let e=o[i],l=i===o.length-1,c="/"===s?t:t.slice(s.length)||"/",d=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&r&&!o[o.length-1].route.index&&(d=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(a,d.params),n.push({params:a,pathname:H([s,d.pathname]),pathnameBase:q(H([s,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(s=H([s,d.pathnameBase]))}return n}function R(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,o]=F(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let s=a[0],n=s.replace(/(.)\/+$/,"$1"),i=a.slice(1);return{params:o.reduce((e,t,r)=>{let{paramName:o,isOptional:a}=t;if("*"===o){let e=i[r]||"";n=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=i[r];return e[o]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:n,pattern:e}}function F(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];f("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let o=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(o.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(o.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),o]}function U(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return f(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function O(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,o=e.charAt(r);return o&&"/"!==o?null:e.slice(r)||"/"}function z(e,t,r,o){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(o),"].  Please separate it out to the `to.").concat(r,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function W(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function B(e){let t=W(e);return t.map((e,r)=>r===t.length-1?e.pathname:e.pathnameBase)}function G(e,t,r){let o,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?o=y(e):(o=(0,n.A)({},e),g(!o.pathname||!o.pathname.includes("?"),z("?","pathname","search",o)),g(!o.pathname||!o.pathname.includes("#"),z("#","pathname","hash",o)),g(!o.search||!o.search.includes("#"),z("#","search","hash",o)));let s,i=""===e||""===o.pathname,l=i?"/":o.pathname;if(null==l)s=r;else{let e=t.length-1;if(!a&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;o.pathname=t.join("/")}s=e>=0?t[e]:"/"}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:r,search:o="",hash:a=""}="string"===typeof e?y(e):e,s=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:s,search:V(o),hash:J(a)}}(o,s),d=l&&"/"!==l&&l.endsWith("/"),u=(i||"."===l)&&r.endsWith("/");return c.pathname.endsWith("/")||!d&&!u||(c.pathname+="/"),c}var H=e=>e.join("/").replace(/\/\/+/g,"/"),q=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",J=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function Z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var K=["POST","PUT","PATCH","DELETE"],Y=(new Set(K),["GET",...K]);new Set(Y),Symbol("ResetLoaderData");var Q=o.createContext(null);Q.displayName="DataRouter";var $=o.createContext(null);$.displayName="DataRouterState";var X=o.createContext(!1);var ee=o.createContext({isTransitioning:!1});ee.displayName="ViewTransition";var te=o.createContext(new Map);te.displayName="Fetchers";var re=o.createContext(null);re.displayName="Await";var oe=o.createContext(null);oe.displayName="Navigation";var ae=o.createContext(null);ae.displayName="Location";var se=o.createContext({outlet:null,matches:[],isDataRoute:!1});se.displayName="Route";var ne=o.createContext(null);ne.displayName="RouteError";function ie(){return null!=o.useContext(ae)}function le(){return g(ie(),"useLocation() may be used only in the context of a <Router> component."),o.useContext(ae).location}var ce="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function de(e){o.useContext(oe).static||o.useLayoutEffect(e)}function ue(){let{isDataRoute:e}=o.useContext(se);return e?function(){let{router:e}=we("useNavigate"),t=ke("useNavigate"),r=o.useRef(!1);de(()=>{r.current=!0});let a=o.useCallback(async function(o){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f(r.current,ce),r.current&&("number"===typeof o?e.navigate(o):await e.navigate(o,(0,n.A)({fromRouteId:t},a)))},[e,t]);return a}():function(){g(ie(),"useNavigate() may be used only in the context of a <Router> component.");let e=o.useContext(Q),{basename:t,navigator:r}=o.useContext(oe),{matches:a}=o.useContext(se),{pathname:s}=le(),n=JSON.stringify(B(a)),i=o.useRef(!1);de(()=>{i.current=!0});let l=o.useCallback(function(o){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(f(i.current,ce),!i.current)return;if("number"===typeof o)return void r.go(o);let l=G(o,JSON.parse(n),s,"path"===a.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:H([t,l.pathname])),(a.replace?r.replace:r.push)(l,a.state,a)},[t,r,n,s,e]);return l}()}o.createContext(null);function he(){let{matches:e}=o.useContext(se),t=e[e.length-1];return t?t.params:{}}function me(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:r}=o.useContext(se),{pathname:a}=le(),s=JSON.stringify(B(r));return o.useMemo(()=>G(e,JSON.parse(s),a,"path"===t),[e,s,a,t])}function pe(e,t,r,a,s){g(ie(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=o.useContext(oe),{matches:l}=o.useContext(se),c=l[l.length-1],d=c?c.params:{},u=c?c.pathname:"/",h=c?c.pathnameBase:"/",m=c&&c.route;{let e=m&&m.path||"";Ce(u,!m||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,v=le();if(t){var x;let e="string"===typeof t?y(t):t;g("/"===h||(null===(x=e.pathname)||void 0===x?void 0:x.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=v;let b=p.pathname||"/",w=b;if("/"!==h){let e=h.replace(/^\//,"").split("/");w="/"+b.replace(/^\//,"").split("/").slice(e.length).join("/")}let j=k(e,{pathname:w});f(m||null!=j,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),f(null==j||void 0!==j[j.length-1].route.element||void 0!==j[j.length-1].route.Component||void 0!==j[j.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let N=be(j&&j.map(e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:H([h,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:H([h,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,r,a,s);return t&&N?o.createElement(ae.Provider,{value:{location:(0,n.A)({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},N):N}function ge(){let e=Ne(),t=Z(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},n={padding:"2px 4px",backgroundColor:a},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=o.createElement(o.Fragment,null,o.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),o.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",o.createElement("code",{style:n},"ErrorBoundary")," or"," ",o.createElement("code",{style:n},"errorElement")," prop on your route.")),o.createElement(o.Fragment,null,o.createElement("h2",null,"Unexpected Application Error!"),o.createElement("h3",{style:{fontStyle:"italic"}},t),r?o.createElement("pre",{style:s},r):null,i)}var fe=o.createElement(ge,null),ve=class extends o.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?o.createElement(se.Provider,{value:this.props.routeContext},o.createElement(ne.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function xe(e){let{routeContext:t,match:r,children:a}=e,s=o.useContext(Q);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),o.createElement(se.Provider,{value:t},a)}function be(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!r)return null;if(r.errors)e=r.matches;else{if(0!==t.length||r.initialized||!(r.matches.length>0))return null;e=r.matches}}let s=e,n=null===r||void 0===r?void 0:r.errors;if(null!=n){let e=s.findIndex(e=>e.route.id&&void 0!==(null===n||void 0===n?void 0:n[e.route.id]));g(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(n).join(","))),s=s.slice(0,Math.min(s.length,e+1))}let i=!1,l=-1;if(r)for(let o=0;o<s.length;o++){let e=s[o];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=o),e.route.id){let{loaderData:t,errors:o}=r,a=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!o||void 0===o[e.route.id]);if(e.route.lazy||a){i=!0,s=l>=0?s.slice(0,l+1):[s[0]];break}}}return s.reduceRight((e,c,d)=>{let u,h=!1,m=null,p=null;r&&(u=n&&c.route.id?n[c.route.id]:void 0,m=c.route.errorElement||fe,i&&(l<0&&0===d?(Ce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):l===d&&(h=!0,p=c.route.hydrateFallbackElement||null)));let g=t.concat(s.slice(0,d+1)),f=()=>{let t;return t=u?m:h?p:c.route.Component?o.createElement(c.route.Component,null):c.route.element?c.route.element:e,o.createElement(xe,{match:c,routeContext:{outlet:e,matches:g,isDataRoute:null!=r},children:t})};return r&&(c.route.ErrorBoundary||c.route.errorElement||0===d)?o.createElement(ve,{location:r.location,revalidation:r.revalidation,component:m,error:u,children:f(),routeContext:{outlet:null,matches:g,isDataRoute:!0},unstable_onError:a}):f()},null)}function ye(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function we(e){let t=o.useContext(Q);return g(t,ye(e)),t}function je(e){let t=o.useContext($);return g(t,ye(e)),t}function ke(e){let t=function(e){let t=o.useContext(se);return g(t,ye(e)),t}(e),r=t.matches[t.matches.length-1];return g(r.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),r.route.id}function Ne(){var e;let t=o.useContext(ne),r=je("useRouteError"),a=ke("useRouteError");return void 0!==t?t:null===(e=r.errors)||void 0===e?void 0:e[a]}var Se={};function Ce(e,t,r){t||Se[e]||(Se[e]=!0,f(!1,r))}var Ae={};function _e(e,t){e||Ae[t]||(Ae[t]=!0,console.warn(t))}o.memo(function(e){let{routes:t,future:r,state:o,unstable_onError:a}=e;return pe(t,void 0,o,a,r)});function Ie(e){let{to:t,replace:r,state:a,relative:s}=e;g(ie(),"<Navigate> may be used only in the context of a <Router> component.");let{static:n}=o.useContext(oe);f(!n,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=o.useContext(se),{pathname:l}=le(),c=ue(),d=G(t,B(i),l,"path"===s),u=JSON.stringify(d);return o.useEffect(()=>{c(JSON.parse(u),{replace:r,state:a,relative:s})},[c,u,s,r,a]),null}function Ee(e){g(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Pe(e){let{basename:t="/",children:r=null,location:a,navigationType:s="POP",navigator:n,static:i=!1}=e;g(!ie(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=o.useMemo(()=>({basename:l,navigator:n,static:i,future:{}}),[l,n,i]);"string"===typeof a&&(a=y(a));let{pathname:d="/",search:u="",hash:h="",state:m=null,key:p="default"}=a,v=o.useMemo(()=>{let e=O(d,l);return null==e?null:{location:{pathname:e,search:u,hash:h,state:m,key:p},navigationType:s}},[l,d,u,h,m,p,s]);return f(null!=v,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(d).concat(u).concat(h,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==v?null:o.createElement(oe.Provider,{value:c},o.createElement(ae.Provider,{children:r,value:v}))}function De(e){let{children:t,location:r}=e;return pe(Te(t),r)}o.Component;function Te(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return o.Children.forEach(e,(e,a)=>{if(!o.isValidElement(e))return;let s=[...t,a];if(e.type===o.Fragment)return void r.push.apply(r,Te(e.props.children,s));g(e.type===Ee,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),g(!e.props.index||!e.props.children,"An index route cannot have child routes.");let n={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(n.children=Te(e.props.children,s)),r.push(n)}),r}var Le="get",Me="application/x-www-form-urlencoded";function Re(e){return null!=e&&"string"===typeof e.tagName}function Fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let o=e[r];return t.concat(Array.isArray(o)?o.map(e=>[r,e]):[[r,o]])},[]))}var Ue=null;var Oe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ze(e){return null==e||Oe.has(e)?e:(f(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Me,'"')),null)}function We(e,t){let r,o,a,s,n;if(Re(i=e)&&"form"===i.tagName.toLowerCase()){let n=e.getAttribute("action");o=n?O(n,t):null,r=e.getAttribute("method")||Le,a=ze(e.getAttribute("enctype"))||Me,s=new FormData(e)}else if(function(e){return Re(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Re(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let n=e.form;if(null==n)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let i=e.getAttribute("formaction")||n.getAttribute("action");if(o=i?O(i,t):null,r=e.getAttribute("formmethod")||n.getAttribute("method")||Le,a=ze(e.getAttribute("formenctype"))||ze(n.getAttribute("enctype"))||Me,s=new FormData(n,e),!function(){if(null===Ue)try{new FormData(document.createElement("form"),0),Ue=!1}catch(e){Ue=!0}return Ue}()){let{name:t,type:r,value:o}=e;if("image"===r){let e=t?"".concat(t,"."):"";s.append("".concat(e,"x"),"0"),s.append("".concat(e,"y"),"0")}else t&&s.append(t,o)}}else{if(Re(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Le,o=null,a=Me,n=e}var i;return s&&"text/plain"===a&&(n=s,s=void 0),{action:o,method:r.toLowerCase(),encType:a,formData:s,body:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function Be(e){return{__html:e}}function Ge(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function He(e,t,r){let o="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===o.pathname?o.pathname="_root.".concat(r):t&&"/"===O(o.pathname,t)?o.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(r):o.pathname="".concat(o.pathname.replace(/\/$/,""),".").concat(r),o}async function qe(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ve(e){return null!=e&&"string"===typeof e.page}function Je(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Ze(e,t,r,o,a,s){let n=(e,t)=>!r[t]||e.route.id!==r[t].route.id,i=(e,t)=>{var o;return r[t].pathname!==e.pathname||(null===(o=r[t].route.path)||void 0===o?void 0:o.endsWith("*"))&&r[t].params["*"]!==e.params["*"]};return"assets"===s?t.filter((e,t)=>n(e,t)||i(e,t)):"data"===s?t.filter((t,s)=>{let l=o.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(n(t,s)||i(t,s))return!0;if(t.route.shouldRevalidate){var c;let o=t.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:(null===(c=r[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof o)return o}return!0}):[]}function Ke(e,t){let{includeHydrateFallback:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o=e.map(e=>{let o=t.routes[e.route.id];if(!o)return[];let a=[o.module];return o.clientActionModule&&(a=a.concat(o.clientActionModule)),o.clientLoaderModule&&(a=a.concat(o.clientLoaderModule)),r&&o.hydrateFallbackModule&&(a=a.concat(o.hydrateFallbackModule)),o.imports&&(a=a.concat(o.imports)),a}).flat(1),[...new Set(o)];var o}function Ye(e,t){let r=new Set,o=new Set(t);return e.reduce((e,a)=>{if(t&&!Ve(a)&&"script"===a.as&&a.href&&o.has(a.href))return e;let s=JSON.stringify(function(e){let t={},r=Object.keys(e).sort();for(let o of r)t[o]=e[o];return t}(a));return r.has(s)||(r.add(s),e.push({key:s,link:a})),e},[])}function Qe(e,t){return"lazy"===e.mode&&!0===t}function $e(){let e=o.useContext(Q);return Ge(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Xe(){let e=o.useContext($);return Ge(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var et=o.createContext(void 0);function tt(){let e=o.useContext(et);return Ge(e,"You must render this element inside a <HydratedRouter> element"),e}function rt(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function ot(e,t,r){if(r&&!it)return[e[0]];if(t){let r=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,r+1)}return e}et.displayName="FrameworkContext";function at(e){let{page:t}=e,r=s(e,l),{router:a}=$e(),i=o.useMemo(()=>k(a.routes,t,a.basename),[a.routes,t,a.basename]);return i?o.createElement(nt,(0,n.A)({page:t,matches:i},r)):null}function st(e){let{manifest:t,routeModules:r}=tt(),[a,s]=o.useState([]);return o.useEffect(()=>{let o=!1;return async function(e,t,r){return Ye((await Promise.all(e.map(async e=>{let o=t.routes[e.route.id];if(o){let e=await qe(o,r);return e.links?e.links():[]}return[]}))).flat(1).filter(Je).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?(0,n.A)((0,n.A)({},e),{},{rel:"prefetch",as:"style"}):(0,n.A)((0,n.A)({},e),{},{rel:"prefetch"})))}(e,t,r).then(e=>{o||s(e)}),()=>{o=!0}},[e,t,r]),a}function nt(e){let{page:t,matches:r}=e,a=s(e,c),i=le(),{manifest:l,routeModules:d}=tt(),{basename:u}=$e(),{loaderData:h,matches:m}=Xe(),p=o.useMemo(()=>Ze(t,r,m,l,i,"data"),[t,r,m,l,i]),g=o.useMemo(()=>Ze(t,r,m,l,i,"assets"),[t,r,m,l,i]),f=o.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let e=new Set,o=!1;if(r.forEach(t=>{var r;let a=l.routes[t.route.id];a&&a.hasLoader&&(!p.some(e=>e.route.id===t.route.id)&&t.route.id in h&&null!==(r=d[t.route.id])&&void 0!==r&&r.shouldRevalidate||a.hasClientLoader?o=!0:e.add(t.route.id))}),0===e.size)return[];let a=He(t,u,"data");return o&&e.size>0&&a.searchParams.set("_routes",r.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[a.pathname+a.search]},[u,h,i,l,p,r,t,d]),v=o.useMemo(()=>Ke(g,l),[g,l]),x=st(g);return o.createElement(o.Fragment,null,f.map(e=>o.createElement("link",(0,n.A)({key:e,rel:"prefetch",as:"fetch",href:e},a))),v.map(e=>o.createElement("link",(0,n.A)({key:e,rel:"modulepreload",href:e},a))),x.map(e=>{let{key:t,link:r}=e;return o.createElement("link",(0,n.A)({key:t,nonce:a.nonce},r))}))}var it=!1;function lt(e){let{manifest:t,serverHandoffString:r,isSpaMode:a,renderMeta:l,routeDiscovery:c,ssr:d}=tt(),{router:u,static:h,staticContext:m}=$e(),{matches:p}=Xe(),g=o.useContext(X),f=Qe(c,d);l&&(l.didRenderScripts=!0);let v=ot(p,null,a);o.useEffect(()=>{0},[]);let x=o.useMemo(()=>{var a;if(g)return null;let l=m?"window.__reactRouterContext = ".concat(r,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",c=h?"".concat(null!==t.hmr&&void 0!==a&&a.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(f?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(v.map((e,r)=>{let o="route".concat(r),a=t.routes[e.route.id];Ge(a,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:s,clientLoaderModule:n,clientMiddlewareModule:i,hydrateFallbackModule:l,module:c}=a,d=[...s?[{module:s,varName:"".concat(o,"_clientAction")}]:[],...n?[{module:n,varName:"".concat(o,"_clientLoader")}]:[],...i?[{module:i,varName:"".concat(o,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(o,"_HydrateFallback")}]:[],{module:c,varName:"".concat(o,"_main")}];return 1===d.length?"import * as ".concat(o," from ").concat(JSON.stringify(c),";"):[d.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(o," = {").concat(d.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(f?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:r}=e,o=s(e,i),a=new Set(t.state.matches.map(e=>e.route.id)),l=t.state.location.pathname.split("/").filter(Boolean),c=["/"];for(l.pop();l.length>0;)c.push("/".concat(l.join("/"))),l.pop();c.forEach(e=>{let r=k(t.routes,e,t.basename);r&&r.forEach(e=>a.add(e.route.id))});let d=[...a].reduce((e,t)=>Object.assign(e,{[t]:o.routes[t]}),{});return(0,n.A)((0,n.A)({},o),{},{routes:d,sri:!!r||void 0})}(t,u),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(v.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return o.createElement(o.Fragment,null,o.createElement("script",(0,n.A)((0,n.A)({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:Be(l),type:void 0})),o.createElement("script",(0,n.A)((0,n.A)({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:Be(c),type:"module",async:!0})))},[]),b=it||g?[]:(t.entry.imports.concat(Ke(v,t,{includeHydrateFallback:!0})),[...new Set(y)]);var y;let w="object"===typeof t.sri?t.sri:{};return _e(!g,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),it||g?null:o.createElement(o.Fragment,null,"object"===typeof t.sri?o.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:w})}}):null,f?null:o.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:w[t.url],suppressHydrationWarning:!0}),o.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:w[t.entry.module],suppressHydrationWarning:!0}),b.map(t=>o.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:w[t],suppressHydrationWarning:!0})),x)}function ct(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}o.Component;function dt(e){let{error:t,isOutsideRemixApp:r}=e;console.error(t);let a,s=o.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(Z(t))return o.createElement(ut,{title:"Unhandled Thrown Response!"},o.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),s);if(t instanceof Error)0;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);new Error(e)}return o.createElement(ut,{title:"Application Error!",isOutsideRemixApp:r},o.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),o.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},a.stack),s)}function ut(e){var t;let{title:r,renderScripts:a,isOutsideRemixApp:s,children:n}=e,{routeModules:i}=tt();return null!==i.root&&void 0!==t&&t.Layout&&!s?n:o.createElement("html",{lang:"en"},o.createElement("head",null,o.createElement("meta",{charSet:"utf-8"}),o.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),o.createElement("title",null,r)),o.createElement("body",null,o.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},n,a?o.createElement(lt,null):null)))}var ht="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{ht&&(window.__reactRouterVersion="7.8.2")}catch(Zm){}function mt(e){let{basename:t,children:r,window:a}=e,s=o.useRef();null==s.current&&(s.current=p({window:a,v5Compat:!0}));let n=s.current,[i,l]=o.useState({action:n.action,location:n.location}),c=o.useCallback(e=>{o.startTransition(()=>l(e))},[l]);return o.useLayoutEffect(()=>n.listen(c),[n,c]),o.createElement(Pe,{basename:t,children:r,location:i.location,navigationType:i.action,navigator:n})}var pt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gt=o.forwardRef(function(e,t){let r,{onClick:a,discover:i="render",prefetch:l="none",relative:c,reloadDocument:u,replace:h,state:m,target:p,to:v,preventScrollReset:x,viewTransition:y}=e,w=s(e,d),{basename:j}=o.useContext(oe),k="string"===typeof v&&pt.test(v),N=!1;if("string"===typeof v&&k&&(r=v,ht))try{let e=new URL(window.location.href),t=v.startsWith("//")?new URL(e.protocol+v):new URL(v),r=O(t.pathname,j);t.origin===e.origin&&null!=r?v=r+t.search+t.hash:N=!0}catch(Zm){f(!1,'<Link to="'.concat(v,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let S=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g(ie(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=o.useContext(oe),{hash:s,pathname:n,search:i}=me(e,{relative:t}),l=n;return"/"!==r&&(l="/"===n?r:H([r,n])),a.createHref({pathname:l,search:i,hash:s})}(v,{relative:c}),[C,A,_]=function(e,t){let r=o.useContext(et),[a,s]=o.useState(!1),[n,i]=o.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=t,m=o.useRef(null);o.useEffect(()=>{if("render"===e&&i(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{i(e.isIntersecting)})},{threshold:.5});return m.current&&e.observe(m.current),()=>{e.disconnect()}}},[e]),o.useEffect(()=>{if(a){let e=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(e)}}},[a]);let p=()=>{s(!0)},g=()=>{s(!1),i(!1)};return r?"intent"!==e?[n,m,{}]:[n,m,{onFocus:rt(l,p),onBlur:rt(c,g),onMouseEnter:rt(d,p),onMouseLeave:rt(u,g),onTouchStart:rt(h,p)}]:[!1,m,{}]}(l,w),I=function(e){let{target:t,replace:r,state:a,preventScrollReset:s,relative:n,viewTransition:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=ue(),c=le(),d=me(e,{relative:n});return o.useCallback(o=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(o,t)){o.preventDefault();let t=void 0!==r?r:b(c)===b(d);l(e,{replace:t,state:a,preventScrollReset:s,relative:n,viewTransition:i})}},[c,l,d,r,a,t,e,s,n,i])}(v,{replace:h,state:m,target:p,preventScrollReset:x,relative:c,viewTransition:y});let E=o.createElement("a",(0,n.A)((0,n.A)((0,n.A)({},w),_),{},{href:r||S,onClick:N||u?a:function(e){a&&a(e),e.defaultPrevented||I(e)},ref:ct(t,A),target:p,"data-discover":k||"render"!==i?void 0:"true"}));return C&&!k?o.createElement(o.Fragment,null,E,o.createElement(at,{page:S})):E});gt.displayName="Link",o.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:a=!1,className:i="",end:l=!1,style:c,to:d,viewTransition:h,children:m}=e,p=s(e,u),f=me(d,{relative:p.relative}),v=le(),x=o.useContext($),{navigator:b,basename:y}=o.useContext(oe),w=null!=x&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.useContext(ee);g(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=xt("useViewTransitionState"),s=me(e,{relative:t});if(!r.isTransitioning)return!1;let n=O(r.currentLocation.pathname,a)||r.currentLocation.pathname,i=O(r.nextLocation.pathname,a)||r.nextLocation.pathname;return null!=R(s.pathname,i)||null!=R(s.pathname,n)}(f)&&!0===h,j=b.encodeLocation?b.encodeLocation(f).pathname:f.pathname,k=v.pathname,N=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;a||(k=k.toLowerCase(),N=N?N.toLowerCase():null,j=j.toLowerCase()),N&&y&&(N=O(N,y)||N);const S="/"!==j&&j.endsWith("/")?j.length-1:j.length;let C,A=k===j||!l&&k.startsWith(j)&&"/"===k.charAt(S),_=null!=N&&(N===j||!l&&N.startsWith(j)&&"/"===N.charAt(j.length)),I={isActive:A,isPending:_,isTransitioning:w},E=A?r:void 0;C="function"===typeof i?i(I):[i,A?"active":null,_?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let P="function"===typeof c?c(I):c;return o.createElement(gt,(0,n.A)((0,n.A)({},p),{},{"aria-current":E,className:C,ref:t,style:P,to:d,viewTransition:h}),"function"===typeof m?m(I):m)}).displayName="NavLink";var ft=o.forwardRef((e,t)=>{let{discover:r="render",fetcherKey:a,navigate:i,reloadDocument:l,replace:c,state:d,method:u=Le,action:m,onSubmit:p,relative:f,preventScrollReset:v,viewTransition:x}=e,y=s(e,h),w=jt(),j=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:r}=o.useContext(oe),a=o.useContext(se);g(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),i=(0,n.A)({},me(e||".",{relative:t})),l=le();if(null==e){i.search=l.search;let e=new URLSearchParams(i.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let r=e.toString();i.search=r?"?".concat(r):""}}e&&"."!==e||!s.route.index||(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index");"/"!==r&&(i.pathname="/"===i.pathname?r:H([r,i.pathname]));return b(i)}(m,{relative:f}),k="get"===u.toLowerCase()?"get":"post",N="string"===typeof m&&pt.test(m);return o.createElement("form",(0,n.A)((0,n.A)({ref:t,method:k,action:j,onSubmit:l?p:e=>{if(p&&p(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,r=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||u;w(t||e.currentTarget,{fetcherKey:a,method:r,navigate:i,replace:c,state:d,relative:f,preventScrollReset:v,viewTransition:x})}},y),{},{"data-discover":N||"render"!==r?void 0:"true"}))});function vt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function xt(e){let t=o.useContext(Q);return g(t,vt(e)),t}function bt(e){f("undefined"!==typeof URLSearchParams,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=o.useRef(Fe(e)),r=o.useRef(!1),a=le(),s=o.useMemo(()=>function(e,t){let r=Fe(e);return t&&t.forEach((e,o)=>{r.has(o)||t.getAll(o).forEach(e=>{r.append(o,e)})}),r}(a.search,r.current?null:t.current),[a.search]),n=ue(),i=o.useCallback((e,t)=>{const o=Fe("function"===typeof e?e(new URLSearchParams(s)):e);r.current=!0,n("?"+o,t)},[n,s]);return[s,i]}ft.displayName="Form";var yt=0,wt=()=>"__".concat(String(++yt),"__");function jt(){let{router:e}=xt("useSubmit"),{basename:t}=o.useContext(oe),r=ke("useRouteId");return o.useCallback(async function(o){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:n,encType:i,formData:l,body:c}=We(o,t);if(!1===a.navigate){let t=a.fetcherKey||wt();await e.fetch(t,r,a.action||s,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||n,formEncType:a.encType||i,flushSync:a.flushSync})}else await e.navigate(a.action||s,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||n,formEncType:a.encType||i,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,r])}var kt=r(32);var Nt=r(579);const St=(0,o.createContext)(),Ct=()=>{const e=(0,o.useContext)(St);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},At=e=>{let{children:t}=e;const[r,a]=(0,o.useState)(null),[s,n]=(0,o.useState)(!0),[i,l]=(0,o.useState)("LOADING");(0,o.useEffect)(()=>{(async()=>{try{const{success:o,user:s}=await(async()=>{try{const{data:{user:e},error:t}=await kt.supabase.auth.getUser();return t?{success:!1,error:t.message}:{success:!0,user:e}}catch(e){return{success:!1,error:e.message}}})();if(o&&s){var e,t,r;const o={id:s.id,email:s.email,name:(null===(e=s.user_metadata)||void 0===e?void 0:e.name)||(null===(t=s.email)||void 0===t?void 0:t.split("@")[0]),avatar:null===(r=s.user_metadata)||void 0===r?void 0:r.avatar_url,role:"artist",isVerified:!!s.email_confirmed_at};a(o),"undefined"!==typeof window&&(window.__authContextUser=o),l("SIGNED_IN")}else a(null),l("SIGNED_OUT")}catch(o){console.error("[AuthContext] Error loading user:",o),a(null),l("SIGNED_OUT")}finally{n(!1)}})();const e=setTimeout(()=>{n(!1)},3e3);return()=>clearTimeout(e)},[]),(0,o.useEffect)(()=>{const{data:{subscription:e}}=(t=async(e,t)=>{if(console.log("[AuthContext] Auth state changed:",e,t),"SIGNED_IN"===e&&null!==t&&void 0!==t&&t.user){var r,o,s;const e=t.user,n={id:e.id,email:e.email,name:(null===(r=e.user_metadata)||void 0===r?void 0:r.name)||(null===(o=e.email)||void 0===o?void 0:o.split("@")[0]),avatar:null===(s=e.user_metadata)||void 0===s?void 0:s.avatar_url,role:"artist",isVerified:!!e.email_confirmed_at};a(n),"undefined"!==typeof window&&(window.__authContextUser=n),l("SIGNED_IN")}else"SIGNED_OUT"===e&&(a(null),"undefined"!==typeof window&&(window.__authContextUser=null),l("SIGNED_OUT"),localStorage.removeItem("tag_user"),sessionStorage.removeItem("tag_user"),localStorage.removeItem("tag.currentUserId"))},kt.supabase.auth.onAuthStateChange(t));var t;return()=>e.unsubscribe()},[]);const c=async()=>{try{return await c()}catch(e){return console.error("Get session error:",e),{success:!1,error:e.message}}},d={user:r,loading:s,status:i,login:async(e,t)=>{try{const r=await(async(e,t)=>{try{const{data:r,error:o}=await kt.supabase.auth.signInWithPassword({email:e,password:t});return o?{success:!1,error:o.message}:{success:!0,user:r.user}}catch(r){return{success:!1,error:r.message}}})(e,t);return r.success?{success:!0}:{success:!1,error:r.error}}catch(r){return console.error("Login error:",r),{success:!1,error:r.message}}},register:async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{const o=await async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{const{data:o,error:a}=await kt.supabase.auth.signUp({email:e,password:t,options:{data:r}});return a?{success:!1,error:a.message}:{success:!0,user:o.user}}catch(o){return{success:!1,error:o.message}}}(e,t,r);return o.success?{success:!0,user:o.user}:{success:!1,error:o.error}}catch(o){return console.error("Register error:",o),{success:!1,error:o.message}}},logout:async()=>{try{const e=await(async()=>{try{const{error:e}=await kt.supabase.auth.signOut();return e?{success:!1,error:e.message}:{success:!0}}catch(e){return{success:!1,error:e.message}}})();return e.success?(a(null),"undefined"!==typeof window&&(window.__authContextUser=null),localStorage.removeItem("tag_user"),sessionStorage.removeItem("tag_user"),localStorage.removeItem("tag.currentUserId"),{success:!0}):{success:!1,error:e.error}}catch(e){return console.error("Logout error:",e),{success:!1,error:e.message}}},isAuthenticated:()=>null!==r,getSession:c};return(0,Nt.jsx)(St.Provider,{value:d,children:t})},_t=e=>{let{isOpen:t,onClose:r}=e;if(!t)return null;return(0,Nt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:e=>{e.target,e.currentTarget},children:(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[85vh] overflow-hidden flex flex-col",children:[(0,Nt.jsx)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:(0,Nt.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"IMPORTANT"})}),(0,Nt.jsx)("div",{className:"p-6 overflow-y-auto flex-1",children:(0,Nt.jsxs)("div",{className:"prose prose-sm max-w-none",children:[(0,Nt.jsx)("div",{className:"mb-6",children:(0,Nt.jsxs)("p",{className:"text-lg leading-relaxed text-gray-700",children:["At the current stage, all the"," ",(0,Nt.jsx)("span",{className:"text-blue-600 font-semibold",children:"Gallery features (blue)"})," ","of TAG have been completed, while the"," ",(0,Nt.jsx)("span",{className:"text-purple-600 font-semibold",children:"Collaboration system (purple)"})," ","is still under testing and development. I will do my best to bring those functions to life in the following weeks."]})}),(0,Nt.jsx)("hr",{className:"my-6"}),(0,Nt.jsxs)("div",{className:"text-center",children:[(0,Nt.jsx)("p",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Excited to have you join TAG."}),(0,Nt.jsxs)("p",{className:"text-base text-gray-600",children:["Best,",(0,Nt.jsx)("br",{}),"Rain Wang",(0,Nt.jsx)("br",{}),(0,Nt.jsx)("span",{className:"text-purple-600 font-semibold",children:"Founder of TAG"})]}),(0,Nt.jsxs)("p",{className:"text-base text-gray-600 mt-4",children:["Contact:"," ",(0,Nt.jsx)("a",{href:"mailto:tag@rainwang.art",className:"text-purple-600 underline hover:text-purple-700 transition-colors duration-200",children:"tag@rainwang.art"})]})]})]})}),(0,Nt.jsx)("div",{className:"flex justify-center p-6 border-t border-gray-200 flex-shrink-0",children:(0,Nt.jsx)("button",{onClick:r,className:"px-8 py-3 bg-tag-blue text-white rounded-md hover:bg-tag-dark-blue transition-colors duration-200 font-medium text-lg",children:"I Understand"})})]})})},It=e=>{let{onClick:t,className:r=""}=e;const[a,s]=(0,o.useState)(!1);return(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsx)(gt,{to:"/",className:"flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity duration-200 ".concat(r),onClick:e=>{localStorage.getItem("hasSeenImportantNotice")||s(!0),t&&t(e)},children:(0,Nt.jsx)("img",{src:"/TAG_Logo.png",alt:"TAG Logo",className:"h-12 w-auto"})}),(0,Nt.jsx)(_t,{isOpen:a,onClose:()=>{s(!1),localStorage.setItem("hasSeenImportantNotice","true")}})]})},Et=e=>{let{onInputChange:t,placeholder:r="Search for art, artists, or collections...",className:o=""}=e;return(0,Nt.jsx)("div",{className:"".concat(o),children:(0,Nt.jsxs)("div",{className:"relative",children:[(0,Nt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Nt.jsx)("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,Nt.jsx)("input",{type:"text",placeholder:r,onChange:t,className:"block w-full pl-9 pr-3 py-2 border border-gray-200 rounded-md leading-5 bg-white placeholder-gray-400 focus:outline-none focus:placeholder-gray-300 focus:ring-1 focus:ring-gray-300 focus:border-gray-300 text-sm shadow-sm"})]})})};var Pt=r(313);const Dt=e=>e&&e.id&&"guest"!==e.id,Tt=(e,t)=>{if(Dt(e)){const o=(null===t||void 0===t?void 0:t.id)||(null===e||void 0===e?void 0:e.id);if(o&&"undefined"!==typeof window)try{const e=window.localStorage.getItem("tag.avatars.".concat(o));if(e){const t=JSON.parse(e);if(t&&t.avatarUrl)return t.avatarUrl}}catch(r){console.warn("[getUserAvatar] Failed to read avatar data:",r)}return(null===t||void 0===t?void 0:t.avatar)||e.avatar||null}return null},Lt=e=>{let{user:t,currentMockUser:r,onClick:a,className:s=""}=e;const[n,i]=(0,o.useState)(Tt(t,r)),l=Dt(t);return(0,o.useEffect)(()=>{const e=e=>{const{userId:o,avatarUrl:a}=e.detail,s=(null===r||void 0===r?void 0:r.id)||(null===t||void 0===t?void 0:t.id);console.log("[UserAvatar] Avatar update event received:",{eventUserId:o,currentUserId:s,newAvatarUrl:null===a||void 0===a?void 0:a.substring(0,30)}),o===s&&(console.log("[UserAvatar] Avatar updated, setting new URL:",null===a||void 0===a?void 0:a.substring(0,30)),i(a))},o=e=>{const{userId:o}=e.detail;o===((null===r||void 0===r?void 0:r.id)||(null===t||void 0===t?void 0:t.id))&&(console.log("[UserAvatar] Avatar deleted, resetting to default"),i((null===r||void 0===r?void 0:r.avatar)||(null===t||void 0===t?void 0:t.avatar)||null))};return window.addEventListener("avatar:updated",e),window.addEventListener("avatar:deleted",o),()=>{window.removeEventListener("avatar:updated",e),window.removeEventListener("avatar:deleted",o)}},[null===r||void 0===r?void 0:r.id,null===t||void 0===t?void 0:t.id]),(0,o.useEffect)(()=>{(async()=>{const e=(null===r||void 0===r?void 0:r.id)||(null===t||void 0===t?void 0:t.id);if(e){const o=await(0,Pt.getUnifiedAvatar)(e);i(o||Tt(t,r))}else i(Tt(t,r))})()},[null===t||void 0===t?void 0:t.id,null===r||void 0===r?void 0:r.id]),l&&n?(0,Nt.jsx)("img",{src:n,alt:(null===r||void 0===r?void 0:r.name)||(null===t||void 0===t?void 0:t.name)||"User",className:"w-8 h-8 rounded-full object-cover hover:opacity-80 transition-opacity duration-200 ".concat(s),onClick:a}):(0,Nt.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center cursor-pointer hover:opacity-80 transition-opacity duration-200 ".concat(s),onClick:a,children:(0,Nt.jsx)("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})},Mt=e=>{let{children:t,onClick:r,disabled:o=!1,className:a="",size:s="md",fullWidth:n=!1}=e;const i=n?"w-full":"";return(0,Nt.jsx)("button",{onClick:r,disabled:o,className:"\n        ".concat("bg-purple-600 text-white font-medium hover:bg-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl","\n        ").concat({sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-3 text-lg"}[s],"\n        ").concat(i,"\n        ").concat(a,"\n        ").concat(o?"opacity-50 cursor-not-allowed":"","\n        rounded-lg\n      "),children:t})},Rt=e=>{let{children:t,onClick:r,disabled:o=!1,className:a="",size:s="md",fullWidth:n=!1,active:i=!1}=e;const l=i?"bg-purple-100 text-purple-700 border-2 border-purple-300":"bg-white text-gray-700 border-2 border-gray-300 hover:bg-gray-50",c=n?"w-full":"";return(0,Nt.jsx)("button",{onClick:r,disabled:o,className:"\n        ".concat(l,"\n        ").concat({sm:"px-3 py-2 text-sm",md:"px-4 py-3 text-base",lg:"px-6 py-3 text-lg"}[s],"\n        ").concat(c,"\n        ").concat(a,"\n        ").concat(o?"opacity-50 cursor-not-allowed":"","\n        rounded-lg font-medium transition-all duration-200\n      "),children:t})};function Ft(e){let{title:t,subtitle:r,children:o}=e;return(0,Nt.jsxs)("div",{className:"rounded-2xl border border-gray-200 p-4",children:[(t||r)&&(0,Nt.jsxs)("div",{className:"mb-2",children:[t&&(0,Nt.jsx)("h3",{className:"text-base font-semibold",children:t}),r&&(0,Nt.jsx)("p",{className:"text-sm text-gray-500",children:r})]}),(0,Nt.jsx)("div",{children:o})]})}function Ut(e){const{isOpen:t,onClose:r,title:o,children:a,maxWidth:s="max-w-md"}=e;return t?(0,Nt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Nt.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full mx-4 ".concat(s),children:[(0,Nt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Nt.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:o}),(0,Nt.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:(0,Nt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a]})}):null}const Ot={saveButton:"SaveButton_saveButton__yEdmI",unfavorited:"SaveButton_unfavorited__X4yK2",disabled:"SaveButton_disabled__Z+CE2",favoritedWork:"SaveButton_favoritedWork__HJCeZ",favoritedCollab:"SaveButton_favoritedCollab__Dsgfs",icon:"SaveButton_icon__XjoP-",outlined:"SaveButton_outlined__7aOlI",filled:"SaveButton_filled__ZTBib",text:"SaveButton_text__Z-r6l",sm:"SaveButton_sm__3QuNk",md:"SaveButton_md__Ui0eR",lg:"SaveButton_lg__7C186",savePulse:"SaveButton_savePulse__Ll8kD"};function zt(e){const{isFavorited:t=!1,itemType:r,itemId:a,onToggle:s,className:n="",disabled:i=!1,size:l="md"}=e,{user:c}=Ct(),[d,u]=(0,o.useState)(!1),[h,m]=(0,o.useState)(null),p=!!c,g=i||!p,f=d?h:t,v=(0,o.useCallback)(async()=>{if(!g){u(!0),m(!f);try{await s(r,a,!f),u(!1),m(null)}catch(e){u(!1),m(null),console.error("[Favorites] Save toggle failed:",e)}}},[g,f,s,r,a]),x=(0,o.useCallback)(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),v())},[v]),b="\n    ".concat(Ot.saveButton,"\n    ").concat(Ot[l],"\n    ").concat(f?"work"===r?Ot.favoritedWork:Ot.favoritedCollab:Ot.unfavorited,"\n    ").concat(g?Ot.disabled:"","\n    ").concat(n,"\n  ").trim(),y="\n    ".concat(Ot.icon,"\n    ").concat(f?Ot.filled:Ot.outlined,"\n  ").trim(),w=()=>p?f?"Remove from favorites":"Add to favorites":"Please log in to save favorites";return(0,Nt.jsxs)("button",{type:"button",className:b,onClick:v,onKeyDown:x,disabled:g,"aria-pressed":f,"aria-label":w(),title:w(),children:[(0,Nt.jsx)("svg",{className:y,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}),(0,Nt.jsx)("span",{className:Ot.text,children:f?"Saved":"Save"})]})}function Wt(e){const{onClick:t,text:r="Back",className:o="",showIcon:a=!0}=e;return(0,Nt.jsxs)("button",{onClick:t,className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors duration-200 ".concat(o),children:[a&&(0,Nt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),r]})}function Bt(e){const{isOpen:t,title:r="Error",message:o="An error occurred.",onClose:a,className:s=""}=e;return t?(0,Nt.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,Nt.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity duration-300",onClick:a}),(0,Nt.jsxs)("div",{className:"relative bg-white rounded-xl shadow-2xl p-8 max-w-md w-full mx-4 transform transition-all duration-300 scale-100 ".concat(s),children:[(0,Nt.jsx)("div",{className:"flex justify-center mb-6",children:(0,Nt.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:(0,Nt.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})})}),(0,Nt.jsx)("h3",{className:"text-xl font-semibold text-gray-900 text-center mb-3",children:r}),(0,Nt.jsx)("p",{className:"text-gray-600 text-center mb-6 leading-relaxed",children:o}),(0,Nt.jsx)("div",{className:"flex justify-center",children:(0,Nt.jsx)("button",{onClick:a,className:"bg-red-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-red-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:"OK"})}),(0,Nt.jsx)("button",{onClick:a,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors duration-200",children:(0,Nt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}):null}function Gt(e){const{isOpen:t,title:r="Success!",message:o="Operation completed successfully.",onClose:a,className:s=""}=e;return t?(0,Nt.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,Nt.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity duration-300",onClick:a}),(0,Nt.jsxs)("div",{className:"relative bg-white rounded-xl shadow-2xl p-8 max-w-md w-full mx-4 transform transition-all duration-300 scale-100 ".concat(s),children:[(0,Nt.jsx)("div",{className:"flex justify-center mb-6",children:(0,Nt.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:(0,Nt.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),(0,Nt.jsx)("h3",{className:"text-xl font-semibold text-gray-900 text-center mb-3",children:r}),(0,Nt.jsx)("p",{className:"text-gray-600 text-center mb-6 leading-relaxed",children:o}),(0,Nt.jsx)("div",{className:"flex justify-center",children:(0,Nt.jsx)("button",{onClick:a,className:"bg-tag-blue text-white px-6 py-3 rounded-lg font-medium hover:bg-tag-dark-blue transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-tag-blue focus:ring-offset-2",children:"Got it!"})}),(0,Nt.jsx)("button",{onClick:a,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors duration-200",children:(0,Nt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}):null}function Ht(e){const{message:t="Loading...",className:r="",size:o="md",color:a="blue",fullScreen:s=!1,variant:n="default"}=e,i={sm:"h-6 w-6",md:"h-12 w-12",lg:"h-16 w-16"},l={blue:"border-tag-blue",gray:"border-gray-600",green:"border-green-600",red:"border-red-600"};if("simple"===n)return(0,Nt.jsx)("div",{className:"animate-spin rounded-full ".concat(i[o]," border-b-2 ").concat(l[a]," mx-auto ").concat(r)});const c=s?"flex items-center justify-center h-screen ".concat(r):"flex items-center justify-center ".concat(r);return(0,Nt.jsx)("div",{className:c,children:(0,Nt.jsxs)("div",{className:"text-center",children:[(0,Nt.jsx)("div",{className:"animate-spin rounded-full ".concat(i[o]," border-b-2 ").concat(l[a]," mx-auto mb-4")}),t&&(0,Nt.jsx)("p",{className:"text-gray-600",children:t})]})})}class qt extends o.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?(0,Nt.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Nt.jsxs)("div",{className:"max-w-md mx-auto text-center p-6",children:[(0,Nt.jsx)("div",{className:"mb-4",children:(0,Nt.jsx)("svg",{className:"mx-auto h-12 w-12 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Nt.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),(0,Nt.jsx)("p",{className:"text-gray-600 mb-4",children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),(0,Nt.jsxs)("div",{className:"space-y-2",children:[(0,Nt.jsx)("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-tag-blue text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Refresh Page"}),(0,Nt.jsx)("button",{onClick:()=>window.history.back(),className:"w-full px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Go Back"})]}),!1]})}):this.props.children}}const Vt=qt,Jt={NETWORK:"NETWORK",VALIDATION:"VALIDATION",AUTHENTICATION:"AUTHENTICATION",AUTHORIZATION:"AUTHORIZATION",NOT_FOUND:"NOT_FOUND",SERVER:"SERVER",CLIENT:"CLIENT",UNKNOWN:"UNKNOWN"},Zt="LOW",Kt="MEDIUM",Yt="HIGH",Qt="CRITICAL",$t={[Jt.NETWORK]:{title:"Network Error",message:"Unable to connect to the server. Please check your internet connection and try again.",userMessage:"Connection failed. Please try again."},[Jt.VALIDATION]:{title:"Validation Error",message:"The provided data is invalid.",userMessage:"Please check your input and try again."},[Jt.AUTHENTICATION]:{title:"Authentication Error",message:"You are not authenticated. Please log in.",userMessage:"Please log in to continue."},[Jt.AUTHORIZATION]:{title:"Authorization Error",message:"You do not have permission to perform this action.",userMessage:"You do not have permission for this action."},[Jt.NOT_FOUND]:{title:"Not Found",message:"The requested resource was not found.",userMessage:"The requested item was not found."},[Jt.SERVER]:{title:"Server Error",message:"An internal server error occurred.",userMessage:"Something went wrong. Please try again later."},[Jt.CLIENT]:{title:"Client Error",message:"An error occurred in the application.",userMessage:"Something went wrong. Please refresh the page."},[Jt.UNKNOWN]:{title:"Unknown Error",message:"An unexpected error occurred.",userMessage:"Something went wrong. Please try again."}};new class{constructor(){this.errorLog=[],this.maxLogSize=100}analyzeErrorType(e){var t,r,o,a,s,n,i,l,c,d;return e?"NetworkError"===e.name||null!==(t=e.message)&&void 0!==t&&t.includes("network")||null!==(r=e.message)&&void 0!==r&&r.includes("fetch")||null!==(o=e.message)&&void 0!==o&&o.includes("connection")?Jt.NETWORK:"ValidationError"===e.name||null!==(a=e.message)&&void 0!==a&&a.includes("validation")||null!==(s=e.message)&&void 0!==s&&s.includes("invalid")?Jt.VALIDATION:null!==(n=e.message)&&void 0!==n&&n.includes("unauthorized")||null!==(i=e.message)&&void 0!==i&&i.includes("authentication")||401===e.status?Jt.AUTHENTICATION:null!==(l=e.message)&&void 0!==l&&l.includes("forbidden")||null!==(c=e.message)&&void 0!==c&&c.includes("permission")||403===e.status?Jt.AUTHORIZATION:null!==(d=e.message)&&void 0!==d&&d.includes("not found")||404===e.status?Jt.NOT_FOUND:e.status>=500?Jt.SERVER:e.status>=400&&e.status<500?Jt.CLIENT:Jt.UNKNOWN:Jt.UNKNOWN}determineSeverity(e,t){switch(e){case Jt.CRITICAL:case Jt.SERVER:return Qt;case Jt.AUTHENTICATION:case Jt.AUTHORIZATION:return Yt;case Jt.NETWORK:case Jt.VALIDATION:return Kt;default:return Zt}}logError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=this.analyzeErrorType(e),a=this.determineSeverity(o,e),s={timestamp:(new Date).toISOString(),type:o,severity:a,context:t,message:e.message||"Unknown error",stack:e.stack,additionalData:r};this.errorLog.push(s),this.errorLog.length>this.maxLogSize&&this.errorLog.shift();console[a===Qt?"error":"warn"]("[".concat(o,"] ").concat(t,":"),e.message,r),a===Qt&&console.error("Full error stack:",e.stack)}getUserMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r=this.analyzeErrorType(e),o=$t[r];return{title:o.title,message:t||o.message,userMessage:o.userMessage,type:r}}handleError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{log:o=!0,customMessage:a=null,additionalData:s={},rethrow:n=!1}=r;o&&this.logError(e,t,s);const i=this.getUserMessage(e,a),l={success:!1,error:i.userMessage,errorType:i.type,errorTitle:i.title,errorDetails:i.message,context:t,timestamp:(new Date).toISOString()};if(n)throw l;return l}getErrorLog(){return[...this.errorLog]}clearErrorLog(){this.errorLog=[]}isRecoverable(e){const t=this.analyzeErrorType(e);return[Jt.NETWORK,Jt.VALIDATION,Jt.AUTHENTICATION].includes(t)}};const Xt=["count","color","size","variant","className"];function er(e){const{count:t,color:r="gray",size:o="md",variant:a="default",className:i=""}=e,l=s(e,Xt),c={gray:"bg-gray-100 text-gray-600 border-gray-200",blue:"bg-blue-100 text-blue-600 border-blue-200",green:"bg-green-100 text-green-600 border-green-200",red:"bg-red-100 text-red-600 border-red-200",yellow:"bg-yellow-100 text-yellow-600 border-yellow-200",purple:"bg-purple-100 text-purple-600 border-purple-200"},d={default:"rounded-full",outline:"rounded-full border",dot:"rounded-full w-2 h-2"};if("dot"===a)return(0,Nt.jsx)("span",(0,n.A)({className:"inline-block ".concat(c[r]," ").concat(d[a]," ").concat(i)},l));if(!t||0===t)return null;const u="".concat(c[r]," ").concat({sm:"text-xs px-1.5 py-0.5",md:"text-xs px-2 py-1",lg:"text-sm px-2.5 py-1.5"}[o]," ").concat(d[a]," ").concat(i);return(0,Nt.jsx)("span",(0,n.A)((0,n.A)({className:"inline-flex items-center justify-center font-medium ".concat(u)},l),{},{children:t}))}function tr(e){const{unreadCount:t=0,className:r="",size:o="md",color:a="red"}=e;if(t<=0)return null;const s="".concat({sm:"w-4 h-4 text-xs",md:"w-5 h-5 text-xs",lg:"w-6 h-6 text-sm"}[o]," ").concat({red:"bg-red-500 text-white",blue:"bg-blue-500 text-white",green:"bg-green-500 text-white",orange:"bg-orange-500 text-white"}[a]," rounded-full flex items-center justify-center font-medium ").concat(r);return(0,Nt.jsx)("div",{className:s,children:(0,Nt.jsx)("span",{children:(n=t,n>99?"99+":n.toString())})});var n}const rr=["progress","color","size","className","showLabel","label"];function or(e){const{progress:t=0,color:r="blue",size:o="md",className:a="",showLabel:i=!1,label:l}=e,c=s(e,rr),d=Math.max(0,Math.min(100,t)),u={sm:"h-1",md:"h-2",lg:"h-3"},h="w-full bg-gray-200 rounded-full ".concat(u[o]," ").concat(a),m="".concat({blue:"bg-blue-600",green:"bg-green-600",purple:"bg-purple-600",red:"bg-red-600",orange:"bg-orange-600"}[r]," ").concat(u[o]," rounded-full transition-all duration-500");return(0,Nt.jsxs)("div",{className:"w-full",children:[i&&(0,Nt.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Nt.jsx)("span",{className:"text-sm text-gray-600",children:l||"Progress"}),(0,Nt.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[d,"%"]})]}),(0,Nt.jsx)("div",(0,n.A)((0,n.A)({className:h,role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":d,"aria-label":"Progress: ".concat(d,"%")},c),{},{children:(0,Nt.jsx)("div",{className:m,style:{width:"".concat(d,"%")}})}))]})}const ar=["onFileUpload","id","children","className","variant","accept","multiple","buttonText","placeholder"];function sr(e){const{onFileUpload:t,id:r,children:o,className:a="",variant:i="default",accept:l=".jpg,.jpeg,.png,.gif,.pdf",multiple:c=!0,buttonText:d="Choose Files",placeholder:u="Drag and drop files here, or click to select"}=e,h=s(e,ar),m="".concat({default:"border-2 border-dashed border-gray-300 rounded-lg bg-white py-8 px-4",compact:"border-2 border-dashed border-gray-300 rounded-lg bg-white py-4 px-3",large:"border-2 border-dashed border-gray-300 rounded-lg bg-white py-12 px-6"}[i]," text-center ").concat(a);return(0,Nt.jsxs)("div",(0,n.A)((0,n.A)({className:m},h),{},{children:[(0,Nt.jsx)("svg",{className:"".concat({default:"w-8 h-8",compact:"w-6 h-6",large:"w-12 h-12"}[i]," text-gray-400 mx-auto mb-3"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),o||(0,Nt.jsx)("p",{className:"text-gray-600 mb-4",children:u}),(0,Nt.jsx)("input",{type:"file",multiple:c,accept:l,onChange:t,className:"hidden",id:r}),(0,Nt.jsx)("label",{htmlFor:r,className:"bg-tag-blue text-white ".concat({default:"px-4 py-2",compact:"px-3 py-1 text-sm",large:"px-6 py-3 text-lg"}[i]," rounded cursor-pointer hover:bg-tag-dark-blue transition-colors duration-200 inline-block"),children:d})]}))}var nr=r(526),ir=(r(255),r(420)),lr=r(200);const cr=async e=>{try{if(!e)return{success:!1,error:"Missing userId"};const t=await(0,lr.ep)(e);return console.log("[localStorageAdapter] Retrieved works for user ".concat(e)),t}catch(t){return console.error("[localStorageAdapter] Error getting works for user ".concat(e,":"),t),{success:!1,error:t.message}}},dr=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{if(!e)return{success:!1,error:"Missing workId"};if(t){const a=await(0,lr.ep)(t);if(a.success){const s=a.data.find(t=>t.id===e);if(s){var r,o;const a=(0,n.A)((0,n.A)({},s),{},{author:{id:t,name:(null===(r=(0,ir.ug)(t))||void 0===r?void 0:r.name)||"Unknown Artist",role:s.category||"",avatar:(null===(o=(0,ir.ug)(t))||void 0===o?void 0:o.avatar)||null}});return console.log("[localStorageAdapter] Found work ".concat(e," for user ").concat(t)),{success:!0,data:a}}}}else{const t=await(0,lr.S5)();if(t.success){const r=t.data.find(t=>t.id===e);if(r){var a,s,i,l;const t=(0,n.A)((0,n.A)({},r),{},{author:{id:(null===(a=r.profiles)||void 0===a?void 0:a.id)||r.userId||"unknown",name:(null===(s=r.profiles)||void 0===s?void 0:s.full_name)||"Unknown Artist",role:(null===(i=r.profiles)||void 0===i?void 0:i.role)||r.category||"",avatar:(null===(l=r.profiles)||void 0===l?void 0:l.avatar_url)||""}});return console.log("[localStorageAdapter] Found work ".concat(e)),{success:!0,data:t}}}}return console.log("[localStorageAdapter] Work ".concat(e," not found")),{success:!1,error:"Work not found"}}catch(c){return console.error("[localStorageAdapter] Error getting work ".concat(e,":"),c),{success:!1,error:c.message}}},ur=async e=>{try{if(!e)return{success:!1,error:"Missing workData"};const t=await(0,lr.qo)(e);return console.log("[localStorageAdapter] Created work"),t}catch(t){return console.error("[localStorageAdapter] Error creating work:",t),{success:!1,error:t.message}}},hr=async(e,t)=>{try{if(!e||!t)return{success:!1,error:"Missing workId or workData"};const r=await(0,lr.updatePortfolioItem)(e,t);return console.log("[localStorageAdapter] Updated work ".concat(e)),r}catch(r){return console.error("[localStorageAdapter] Error updating work ".concat(e,":"),r),{success:!1,error:r.message}}},mr=async e=>{try{if(!e)return{success:!1,error:"Missing workId"};const t=await(0,lr.zB)(e);return console.log("[localStorageAdapter] Deleted work ".concat(e)),t}catch(t){return console.error("[localStorageAdapter] Error deleting work ".concat(e,":"),t),{success:!1,error:t.message}}},pr=async()=>{try{const e=await(0,lr.S5)();if(e.success&&e.data){const t=e.data.map(e=>{var t,r,o;return(0,n.A)((0,n.A)({},e),{},{author:{id:(null===(t=e.profiles)||void 0===t?void 0:t.id)||e.userId||"unknown",name:(null===(r=e.profiles)||void 0===r?void 0:r.full_name)||"Unknown Artist",role:e.category||"",avatar:(null===(o=e.profiles)||void 0===o?void 0:o.avatar_url)||""}})});return console.log("[localStorageAdapter] Retrieved all public works with unified author format"),{success:!0,data:t}}return e}catch(e){return console.error("[localStorageAdapter] Error getting all public works:",e),{success:!1,error:e.message}}},gr=async e=>{try{if(!e)return{success:!1,error:"Missing userId"};const t=ir.o1[e];if(!t||!t.portfolio)return console.log("[mockUsersAdapter] No portfolio found for user ".concat(e)),{success:!0,data:[]};const r=t.portfolio.map(r=>({id:r.id,title:r.title,description:"",category:r.category,tags:r.tags,imagePaths:[r.thumb],thumbnailPath:r.thumb,isPublic:!0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),author:{id:e,name:t.name,avatar:t.avatar,role:t.role}}));return console.log("[mockUsersAdapter] Retrieved ".concat(r.length," works for user ").concat(e," (fallback)")),{success:!0,data:r}}catch(t){return console.error("[mockUsersAdapter] Error getting works for user ".concat(e,":"),t),{success:!1,error:t.message}}},fr=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{if(!e)return{success:!1,error:"Missing workId"};if(t){const r=ir.o1[t];if(r&&r.portfolio){const o=r.portfolio.find(t=>t.id===e);if(o){const a={id:o.id,title:o.title,description:"",category:o.category,tags:o.tags,imagePaths:[o.thumb],thumbnailPath:o.thumb,isPublic:!0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),author:{id:t,name:r.name,avatar:r.avatar,role:r.role}};return console.log("[mockUsersAdapter] Found work ".concat(e," for user ").concat(t," (fallback)")),{success:!0,data:a}}}}else for(const[t,r]of Object.entries(ir.o1))if(r.portfolio){const o=r.portfolio.find(t=>t.id===e);if(o){const a={id:o.id,title:o.title,description:"",category:o.category,tags:o.tags,imagePaths:[o.thumb],thumbnailPath:o.thumb,isPublic:!0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),author:{id:t,name:r.name,avatar:r.avatar,role:r.role}};return console.log("[mockUsersAdapter] Found work ".concat(e," for user ").concat(t," (fallback)")),{success:!0,data:a}}}return console.log("[mockUsersAdapter] Work ".concat(e," not found (fallback)")),{success:!1,error:"Work not found"}}catch(r){return console.error("[mockUsersAdapter] Error getting work ".concat(e,":"),r),{success:!1,error:r.message}}},vr=async()=>{try{const e=[];for(const[t,r]of Object.entries(ir.o1))if(r.portfolio){const o=r.portfolio.map(e=>({id:e.id,title:e.title,description:"",category:e.category,tags:e.tags,imagePaths:[e.thumb],thumbnailPath:e.thumb,isPublic:!0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),author:{id:t,name:r.name,avatar:r.avatar,role:r.role}}));e.push(...o)}return console.log("[mockUsersAdapter] Retrieved ".concat(e.length," public works (fallback)")),{success:!0,data:e}}catch(e){return console.error("[mockUsersAdapter] Error getting all public works:",e),{success:!1,error:e.message}}},xr={getAllPublicWorks:async()=>{console.log("[Supabase WorkService] Getting all public works");try{const{data:e,error:t}=await kt.supabase.from("portfolio").select("*").eq("is_public",!0).order("created_at",{ascending:!1});if(t)throw console.error("[Supabase WorkService] Database error:",t),t;console.log("[Supabase WorkService] Found ".concat(e.length," public works"));return{success:!0,data:await Promise.all(e.map(async e=>{let t=null;if(e.thumbnail_path){const r=await(0,lr.getPortfolioImageUrl)(e.thumbnail_path);r.success&&(t=r.data.url)}else if(e.image_paths&&e.image_paths.length>0){const r=await(0,lr.getPortfolioImageUrl)(e.image_paths[0]);r.success&&(t=r.data.url)}return{id:e.id,title:e.title,description:e.description,category:e.category,tags:e.tags||[],software:e.software||[],mainImageUrl:t,allImages:e.image_paths||[],thumbnailPath:e.thumbnail_path,isPublic:e.is_public,createdAt:e.created_at,updatedAt:e.updated_at,userId:e.user_id,author:{id:e.user_id,name:"Unknown Artist",avatar:"",role:""}}}))}}catch(e){throw console.error("[Supabase WorkService] Error getting public works:",e),e}},getUserWorks:async e=>{if(console.log("[Supabase WorkService] Getting works for user ".concat(e)),!e)throw new Error("User ID is required");try{const{data:t,error:r}=await kt.supabase.from("portfolio").select("*").eq("user_id",e).eq("is_public",!0).order("created_at",{ascending:!1});if(r)throw console.error("[Supabase WorkService] Database error:",r),r;console.log("[Supabase WorkService] Found ".concat(t.length," works for user ").concat(e));return{success:!0,data:await Promise.all(t.map(async e=>{let t=null;if(e.thumbnail_path){const r=await(0,lr.getPortfolioImageUrl)(e.thumbnail_path);r.success&&(t=r.data.url)}else if(e.image_paths&&e.image_paths.length>0){const r=await(0,lr.getPortfolioImageUrl)(e.image_paths[0]);r.success&&(t=r.data.url)}return{id:e.id,title:e.title,description:e.description,category:e.category,tags:e.tags||[],software:e.software||[],mainImageUrl:t,allImages:e.image_paths||[],thumbnailPath:e.thumbnail_path,isPublic:e.is_public,createdAt:e.created_at,updatedAt:e.updated_at,userId:e.user_id}}))}}catch(t){throw console.error("[Supabase WorkService] Error getting user works:",t),t}},getWorkById:async function(e){if(console.log("[Supabase WorkService] Getting work by ID: ".concat(e)),!e)throw new Error("Work ID is required");try{const{data:t,error:r}=await kt.supabase.from("portfolio").select("*").eq("id",e).eq("is_public",!0).single();if(r)throw console.error("[Supabase WorkService] Database error:",r),r;if(!t)throw new Error("Work not found");console.log("[Supabase WorkService] Found work: ".concat(t.title));let o=null,a=[];if(t.thumbnail_path){const e=await(0,lr.getPortfolioImageUrl)(t.thumbnail_path);e.success&&(o=e.data.url)}if(t.image_paths&&t.image_paths.length>0){const e=t.image_paths.map(async e=>{const t=await(0,lr.getPortfolioImageUrl)(e);return t.success?t.data.url:null});a=(await Promise.all(e)).filter(e=>null!==e),!o&&a.length>0&&(o=a[0])}return{success:!0,data:{id:t.id,title:t.title,description:t.description,category:t.category,tags:t.tags||[],software:t.software||[],mainImageUrl:o,allImages:a,thumbnailPath:t.thumbnail_path,isPublic:t.is_public,createdAt:t.created_at,updatedAt:t.updated_at,userId:t.user_id}}}catch(t){throw console.error("[Supabase WorkService] Error getting work by ID:",t),t}},createWork:async e=>{console.log("[Supabase WorkService] Creating new work");try{const{data:t,error:r}=await kt.supabase.from("portfolio").insert({user_id:e.userId,title:e.title,description:e.description,category:e.category,tags:e.tags,software:e.software,image_paths:e.imagePaths,thumbnail_path:e.thumbnailPath,is_public:!1!==e.isPublic}).select().single();if(r)throw console.error("[Supabase WorkService] Create error:",r),r;return{success:!0,data:{id:t.id,title:t.title,description:t.description,category:t.category,tags:t.tags,software:t.software,imagePaths:t.image_paths,thumbnailPath:t.thumbnail_path,isPublic:t.is_public,createdAt:t.created_at,updatedAt:t.updated_at,userId:t.user_id}}}catch(t){throw console.error("[Supabase WorkService] Error creating work:",t),t}},updateWork:async(e,t,r)=>{console.log("[Supabase WorkService] Updating work: ".concat(e));try{const{data:o,error:a}=await kt.supabase.from("portfolio").update({title:t.title,description:t.description,category:t.category,tags:t.tags,software:t.software,image_paths:t.imagePaths,thumbnail_path:t.thumbnailPath,is_public:t.isPublic,updated_at:(new Date).toISOString()}).eq("id",e).eq("user_id",r).select().single();if(a)throw console.error("[Supabase WorkService] Update error:",a),a;return{success:!0,data:{id:o.id,title:o.title,description:o.description,category:o.category,tags:o.tags,software:o.software,imagePaths:o.image_paths,thumbnailPath:o.thumbnail_path,isPublic:o.is_public,createdAt:o.created_at,updatedAt:o.updated_at,userId:o.user_id}}}catch(o){throw console.error("[Supabase WorkService] Error updating work:",o),o}},deleteWork:async(e,t)=>{console.log("[Supabase WorkService] Deleting work: ".concat(e));try{const{error:r}=await kt.supabase.from("portfolio").delete().eq("id",e).eq("user_id",t);if(r)throw console.error("[Supabase WorkService] Delete error:",r),r;return{success:!0,data:{id:e}}}catch(r){throw console.error("[Supabase WorkService] Error deleting work:",r),r}}},br=xr,yr={getUserWorks:async e=>{try{const{isMock:a}=await Promise.resolve().then(r.bind(r,77));if(!a())try{var t;const r=await br.getUserWorks(e);return console.log("[workService] Using Supabase works for user ".concat(e," (").concat((null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.length)||0," works)")),r}catch(o){throw console.error("[workService] Supabase failed for user ".concat(e,":"),o),o}return console.log("[workService] Mock mode: Using LocalStorage works for user ".concat(e)),await cr(e)}catch(a){return console.error("[workService] Error getting works for user ".concat(e,":"),a),await gr(e)}},getWorkById:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const{isMock:a}=await Promise.resolve().then(r.bind(r,77));if(!a())try{const r=await br.getWorkById(e,t);return console.log("[workService] Using Supabase work data for ".concat(e)),r}catch(o){throw console.error("[workService] Supabase failed for work ".concat(e,":"),o),o}return console.log("[workService] Mock mode: Using LocalStorage work data for ".concat(e)),await dr(e,t)}catch(a){return console.error("[workService] Error getting work ".concat(e,":"),a),await fr(e,t)}},createWork:async e=>{try{const t=await ur(e);if(t.success)return console.log("[workService] Created work in LocalStorage"),t;const r=await br.createWork(e);return r.success?(console.log("[workService] Created work in Supabase"),r):(console.warn("[workService] Failed to create work"),{success:!1,error:"Failed to create work"})}catch(t){return console.error("[workService] Error creating work:",t),{success:!1,error:t.message}}},updateWork:async(e,t)=>{try{const r=await hr(e,t);if(r.success)return console.log("[workService] Updated work ".concat(e," in LocalStorage")),r;const o=await br.updateWork(e,t);return o.success?(console.log("[workService] Updated work ".concat(e," in Supabase")),o):(console.warn("[workService] Failed to update work ".concat(e)),{success:!1,error:"Failed to update work"})}catch(r){return console.error("[workService] Error updating work ".concat(e,":"),r),{success:!1,error:r.message}}},deleteWork:async e=>{try{const t=await mr(e);if(t.success)return console.log("[workService] Deleted work ".concat(e," from LocalStorage")),t;const r=await br.deleteWork(e);return r.success?(console.log("[workService] Deleted work ".concat(e," from Supabase")),r):(console.warn("[workService] Failed to delete work ".concat(e)),{success:!1,error:"Failed to delete work"})}catch(t){return console.error("[workService] Error deleting work ".concat(e,":"),t),{success:!1,error:t.message}}},getAllPublicWorks:async()=>{try{const{isMock:o}=await Promise.resolve().then(r.bind(r,77));if(!o())try{var e;const t=await br.getAllPublicWorks();return console.log("[workService] Using Supabase public works (".concat((null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.length)||0," works)")),t}catch(t){throw console.error("[workService] Supabase failed for public works:",t),t}return console.log("[workService] Mock mode: Using LocalStorage public works"),await pr()}catch(o){return console.error("[workService] Error getting all public works:",o),await vr()}}};var wr=r(179);const jr={getPublicArtists:async()=>{try{const t=[],r=await wr.IG.keys();for(const o of r)if(o&&o.startsWith("artist_"))try{const e=await wr.IG.getItem(o);if(e){const r=JSON.parse(e);t.push(r)}}catch(e){console.warn("[localStorageAdapter] Failed to parse artist data for key ".concat(o,":"),e)}return console.log("[localStorageAdapter] Retrieved ".concat(t.length," artists")),{success:!0,data:t}}catch(e){return console.error("[localStorageAdapter] Error getting public artists:",e),{success:!1,error:e.message}}},getArtistProfile:async e=>{try{if(!e)return{success:!1,error:"Missing artistId"};const t=await wr.IG.getItem("artist_".concat(e));if(!t)return console.log("[localStorageAdapter] No artist data found for ".concat(e)),{success:!1,error:"Artist not found"};const r=JSON.parse(t);return console.log("[localStorageAdapter] Retrieved artist profile for ".concat(e)),{success:!0,data:r}}catch(t){return console.error("[localStorageAdapter] Error getting artist profile ".concat(e,":"),t),{success:!1,error:t.message}}},createArtist:async(e,t)=>{try{if(!e||!t)return{success:!1,error:"Missing artistId or artistData"};const r=await jr.getArtistProfile(e);if(r.success)return console.log("[localStorageAdapter] Artist ".concat(e," already exists")),{success:!0,data:r.data};const o=(0,n.A)((0,n.A)({id:e},t),{},{createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()});return await wr.IG.setItem("artist_".concat(e),JSON.stringify(o)),console.log("[localStorageAdapter] Created artist ".concat(e)),{success:!0,data:o}}catch(r){return console.error("[localStorageAdapter] Error creating artist ".concat(e,":"),r),{success:!1,error:r.message}}},updateArtist:async(e,t)=>{try{if(!e||!t)return{success:!1,error:"Missing artistId or artistData"};const r=await jr.getArtistProfile(e);if(!r.success)return console.warn("[localStorageAdapter] Artist ".concat(e," not found for update")),{success:!1,error:"Artist not found"};const o=(0,n.A)((0,n.A)((0,n.A)({},r.data),t),{},{updatedAt:(new Date).toISOString()});return await wr.IG.setItem("artist_".concat(e),JSON.stringify(o)),console.log("[localStorageAdapter] Updated artist ".concat(e)),{success:!0,data:o}}catch(r){return console.error("[localStorageAdapter] Error updating artist ".concat(e,":"),r),{success:!1,error:r.message}}},saveArtistIndex:async e=>{try{if(!Array.isArray(e))return{success:!1,error:"Artists must be an array"};for(const t of e)t.id&&await wr.IG.setItem("artist_".concat(t.id),JSON.stringify(t));return console.log("[localStorageAdapter] Saved ".concat(e.length," artists to index")),{success:!0,data:e}}catch(t){return console.error("[localStorageAdapter] Error saving artist index:",t),{success:!1,error:t.message}}},deleteArtist:async e=>{try{return e?(await wr.IG.removeItem("artist_".concat(e)),console.log("[localStorageAdapter] Deleted artist ".concat(e)),{success:!0}):{success:!1,error:"Missing artistId"}}catch(t){return console.error("[localStorageAdapter] Error deleting artist ".concat(e,":"),t),{success:!1,error:t.message}}}},kr=async()=>{try{const e=(0,ir.CF)().map(e=>({id:e.id,name:e.name,displayName:e.displayName,avatar:e.avatar,role:e.role,roleIcon:e.roleIcon,bio:e.bio,school:e.school,pronouns:e.pronouns,majors:e.majors,skills:e.skills,socialLinks:e.socialLinks,works:e.portfolio?e.portfolio.map(e=>({id:e.id,title:e.title,thumbnailPath:e.thumb,category:e.category})):[],followers:0,following:0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}));return console.log("[mockUsersAdapter] Retrieved ".concat(e.length," artists (fallback)")),{success:!0,data:e}}catch(e){return console.error("[mockUsersAdapter] Error getting public artists:",e),{success:!1,error:e.message}}},Nr=async()=>{try{console.log("[supabaseAdapter] Getting all registered artists from Supabase");const{data:e,error:t}=await kt.supabase.from("profiles").select("*").order("created_at",{ascending:!1});if(t)return console.error("[supabaseAdapter] Error fetching profiles:",t),{success:!1,error:t.message};if(!e||0===e.length)return console.log("[supabaseAdapter] No profiles found"),{success:!0,data:[]};const r=e.map(e=>e.id),[o,a,s]=await Promise.all([kt.supabase.from("follows").select("following_id").in("following_id",r),kt.supabase.from("follows").select("follower_id").in("follower_id",r),kt.supabase.from("portfolio").select("user_id").in("user_id",r).eq("is_public",!0)]),n=new Map,i=new Map,l=new Map;o.data&&o.data.forEach(e=>{const t=n.get(e.following_id)||0;n.set(e.following_id,t+1)}),a.data&&a.data.forEach(e=>{const t=i.get(e.follower_id)||0;i.set(e.follower_id,t+1)}),s.data&&s.data.forEach(e=>{const t=l.get(e.user_id)||0;l.set(e.user_id,t+1)});const c=e.map(e=>({id:e.id,name:e.full_name||"Unknown Artist",title:e.title||"Artist",school:e.school||"",majors:e.majors||[],minors:e.minors||[],avatar:e.avatar_url||null,worksCount:l.get(e.id)||0,followers:n.get(e.id)||0,following:i.get(e.id)||0,createdAt:e.created_at,updatedAt:e.updated_at,role:e.title||"Artist"}));return console.log("[supabaseAdapter] Found ".concat(c.length," registered artists")),{success:!0,data:c}}catch(e){return console.error("[supabaseAdapter] Error getting public artists:",e),{success:!1,error:e.message}}},Sr=async e=>(console.log("[supabaseAdapter] getArtistProfile not implemented yet for ".concat(e)),{success:!1,data:null}),Cr=async(e,t)=>(console.log("[supabaseAdapter] updateArtist not implemented yet for ".concat(e)),{success:!1,error:"Supabase adapter not implemented yet"}),Ar={getPublicArtists:async()=>{try{console.log("[artistService] Getting all registered artists");const e=await Nr();if(e.success)return console.log("[artistService] Found ".concat(e.data.length," registered artists")),e;{console.error("[artistService] Supabase adapter failed:",e.error),console.log("[artistService] Falling back to localStorage adapter");const t=await jr.getPublicArtists();return t.success?(console.log("[artistService] Fallback found ".concat(t.data.length," artists")),t):(console.log("[artistService] Falling back to mockUsers adapter"),await kr())}}catch(e){return console.error("[artistService] Error getting public artists:",e),{success:!1,error:e.message}}},getArtistProfile:async e=>{try{const t=await jr.getArtistProfile(e);if(t&&t.data)return console.log("[artistService] Using LocalStorage artist profile for ".concat(e)),t;const r=await Sr(e);return r&&r.data?(console.log("[artistService] Using Supabase artist profile for ".concat(e)),r):(console.log("[artistService] No artist profile found for ".concat(e,", returning null")),{success:!1,error:"Artist profile not found"})}catch(t){return console.error("[artistService] Error getting artist profile ".concat(e,":"),t),{success:!1,error:t.message}}},bootstrapFromPortfolios:async()=>{try{console.log("[artistService] Starting bootstrap from portfolios");const e=await yr.getAllPublicWorks();if(!e.success)return console.warn("[artistService] Failed to get all works for bootstrap"),{success:!1,error:"Failed to get works"};const t=new Map;for(const a of e.data)if(a.author&&a.author.id){const e=a.author.id;if(!t.has(e)){const r={id:e,name:a.author.name||"Unknown Artist",avatar:a.author.avatar||"",role:a.author.role||"Artist",bio:"",school:"",pronouns:"",majors:[],skills:[],socialLinks:{},works:[],followers:0,following:0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};t.set(e,r)}const r=t.get(e);r.works.find(e=>e.id===a.id)||r.works.push({id:a.id,title:a.title,thumbnailPath:a.thumbnailPath,category:a.category})}const r=Array.from(t.values()),o=await jr.saveArtistIndex(r);return console.log("[artistService] Bootstraped ".concat(r.length," artists from portfolios")),o}catch(e){return console.error("[artistService] Error bootstrapping from portfolios:",e),{success:!1,error:e.message}}},ensureArtistIndexed:async e=>{try{if(!e)return{success:!1,error:"Missing userId"};const o=await Ar.getArtistProfile(e);if(o&&o.success)return console.log("[artistService] Artist ".concat(e," already indexed")),{success:!0,data:o.data};const{userService:a}=await Promise.resolve().then(r.bind(r,255)),s=await a.getUserById(e);if(s){const r="portfolio_".concat(e),o=await jr.getItem(r);let a=0,n=[];if(o)try{const e=JSON.parse(o);if(Array.isArray(e)){const t=e.filter(e=>!1!==e.isPublic);a=t.length,n=t}}catch(t){console.warn("[artistService] Failed to parse portfolio for ".concat(e,":"),t)}const i={id:e,name:s.name||s.displayName||"Unknown Artist",avatar:s.avatar||"",role:s.role||"Artist",bio:s.bio||"",school:s.school||"",pronouns:s.pronouns||"",majors:s.majors||[],skills:s.skills||[],socialLinks:s.socialLinks||{},works:n,worksCount:a,followers:0,following:0,createdAt:s.updatedAt||(new Date).toISOString(),updatedAt:s.updatedAt||(new Date).toISOString()},l=await jr.createArtist(e,i);return console.log("[artistService] Created artist index for ".concat(e)),l}return console.warn("[artistService] No user data found for ".concat(e)),{success:!1,error:"No user data found"}}catch(o){return console.error("[artistService] Error ensuring artist indexed ".concat(e,":"),o),{success:!1,error:o.message}}},updateArtist:async(e,t)=>{try{const r=await jr.updateArtist(e,t);if(r.success)return console.log("[artistService] Updated artist ".concat(e," in LocalStorage")),r;const o=await Cr(e,t);return o.success?(console.log("[artistService] Updated artist ".concat(e," in Supabase")),o):(console.warn("[artistService] Failed to update artist ".concat(e)),{success:!1,error:"Failed to update artist"})}catch(r){return console.error("[artistService] Error updating artist ".concat(e,":"),r),{success:!1,error:r.message}}}};var _r=r(106);const Ir=async(e,t)=>{try{const{data:o,error:a}=await kt.supabase.from("artwork_likes").select("id").eq("artwork_id",e).eq("user_id",t).limit(1),s=(null===o||void 0===o?void 0:o[0])||null;if(a&&"PGRST205"===a.code){console.warn("[SupabaseLike] artwork_likes table not found, falling back to LocalStorage");const{localStorageAdapter:o}=await Promise.resolve().then(r.bind(r,106));return await o.toggleArtworkLike(e,t)}if(a)return console.error("[SupabaseLike] Error checking existing like:",a),{success:!1,error:a.message};let n=!1,i=0;if(s){const{error:r}=await kt.supabase.from("artwork_likes").delete().eq("artwork_id",e).eq("user_id",t);if(r)return console.error("[SupabaseLike] Error deleting like:",r),{success:!1,error:r.message};n=!1,console.log("[SupabaseLike] User ".concat(t," unliked artwork ").concat(e))}else{console.log("[DEBUG] Using INSERT method instead of upsert for like");const{data:r,error:o}=await kt.supabase.from("artwork_likes").insert({user_id:t,artwork_id:e});if(o){if("23505"!==o.code)return console.error("[SupabaseLike] Error inserting like:",o),{success:!1,error:o.message};console.log("[SupabaseLike] User ".concat(t," already liked artwork ").concat(e)),n=!0}else n=!0,console.log("[SupabaseLike] User ".concat(t," liked artwork ").concat(e))}const{count:l,error:c}=await kt.supabase.from("artwork_likes").select("*",{count:"exact",head:!0}).eq("artwork_id",e);return c?(console.error("[SupabaseLike] Error getting like count:",c),i=0):i=l||0,console.log("[SupabaseLike] Artwork ".concat(e," total likes: ").concat(i)),{success:!0,data:{liked:n,likes:i}}}catch(o){return console.error("[SupabaseLike] Error toggling like:",o),{success:!1,error:o.message}}},Er=async(e,t)=>{try{const{data:o,error:a}=await kt.supabase.from("artwork_likes").select("id").eq("artwork_id",e).eq("user_id",t).limit(1),s=o&&o.length>0;if(a&&"PGRST205"===a.code){console.warn("[SupabaseLike] artwork_likes table not found, falling back to LocalStorage");const{localStorageAdapter:o}=await Promise.resolve().then(r.bind(r,106));return await o.checkUserLikeStatus(e,t)}if(a)return console.error("[SupabaseLike] Error checking like status:",a),{success:!1,error:a.message};const{count:n,error:i}=await kt.supabase.from("artwork_likes").select("*",{count:"exact",head:!0}).eq("artwork_id",e);if(i)return console.error("[SupabaseLike] Error getting like count:",i),{success:!1,error:i.message};const l=n||0;return console.log("[SupabaseLike] User ".concat(t," like status for artwork ").concat(e,": ").concat(s?"Liked":"Not liked",", Total: ").concat(l)),{success:!0,data:{liked:s,likes:l}}}catch(o){return console.error("[SupabaseLike] Error checking like status:",o),{success:!1,error:o.message}}},Pr=async e=>{try{const{count:t,error:o}=await kt.supabase.from("artwork_likes").select("*",{count:"exact",head:!0}).eq("artwork_id",e);if(o&&"PGRST205"===o.code){console.warn("[SupabaseLike] artwork_likes table not found, falling back to LocalStorage");const{localStorageAdapter:t}=await Promise.resolve().then(r.bind(r,106));return await t.getArtworkLikeCount(e)}if(o)return console.error("[SupabaseLike] Error getting like count:",o),{success:!1,error:o.message};const a=t||0;return console.log("[SupabaseLike] Artwork ".concat(e," total likes: ").concat(a)),{success:!0,data:{likes:a}}}catch(t){return console.error("[SupabaseLike] Error getting like count:",t),{success:!1,error:t.message}}},Dr=async(e,t)=>{try{const{isMock:a}=await Promise.resolve().then(r.bind(r,77));if(!a())try{const r=await Ir(e,t);return console.log("[likeService] Using Supabase like toggle for artwork ".concat(e)),r}catch(o){throw console.error("[likeService] Supabase failed for artwork ".concat(e,":"),o),o}return console.log("[likeService] Mock mode: Using LocalStorage like toggle for artwork ".concat(e)),await _r.localStorageAdapter.toggleArtworkLike(e,t)}catch(a){return console.error("[likeService] Error toggling like for artwork ".concat(e,":"),a),{success:!1,error:a.message}}},Tr=async(e,t)=>{try{const{isMock:a}=await Promise.resolve().then(r.bind(r,77));if(!a())try{const r=await Er(e,t);return console.log("[likeService] Using Supabase like status check for artwork ".concat(e)),r}catch(o){throw console.error("[likeService] Supabase failed for artwork ".concat(e,":"),o),o}return console.log("[likeService] Mock mode: Using LocalStorage like status check for artwork ".concat(e)),await _r.localStorageAdapter.checkUserLikeStatus(e,t)}catch(a){return console.error("[likeService] Error checking like status for artwork ".concat(e,":"),a),{success:!1,error:a.message}}},Lr=async e=>{try{const{isMock:o}=await Promise.resolve().then(r.bind(r,77));if(!o())try{const t=await Pr(e);return console.log("[likeService] Using Supabase like count for artwork ".concat(e)),t}catch(t){throw console.error("[likeService] Supabase failed for artwork ".concat(e,":"),t),t}return console.log("[likeService] Mock mode: Using LocalStorage like count for artwork ".concat(e)),await _r.localStorageAdapter.getArtworkLikeCount(e)}catch(o){return console.error("[likeService] Error getting like count for artwork ".concat(e,":"),o),{success:!1,error:o.message}}};var Mr=r(240);var Rr=r(8);const Fr={WORK:"work",COLLABORATION:"collaboration"},Ur={async getFavorites(e){console.log("[Favorites] Supabase getFavorites called:",e);const{userId:t,type:r="all",cursor:o,limit:a=20}=e;try{var s;let e=kt.supabase.from("favorites").select("*").eq("user_id",t).order("created_at",{ascending:!1});"all"!==r&&(e=e.eq("item_type",r)),o&&(e=e.lt("created_at",o)),e=e.limit(a+1);const{data:n,error:i}=await e;if(i)return console.error("[Favorites] Supabase getFavorites error:",i),{success:!1,error:i.message};const l=n.length>a,c=l?n.slice(0,a):n,d=l?null===(s=c[c.length-1])||void 0===s?void 0:s.created_at:null;return console.log("[Favorites] Supabase getFavorites success:",{count:c.length,hasMore:l}),{success:!0,data:{items:c,pagination:{cursor:d,hasMore:l,total:c.length}}}}catch(n){return console.error("[Favorites] Supabase getFavorites exception:",n),{success:!1,error:n.message}}},async addFavorite(e){console.log("[Favorites] Supabase addFavorite called:",e);const{userId:t,itemType:r,itemId:o}=e;try{const{data:e,error:a}=await kt.supabase.from("favorites").insert({user_id:t,item_type:r,item_id:o}).select().single();return a?"23505"===a.code?(console.log("[Favorites] Supabase addFavorite: already favorited"),{success:!0,data:{id:"existing"}}):(console.error("[Favorites] Supabase addFavorite error:",a),{success:!1,error:a.message}):(console.log("[Favorites] Supabase addFavorite success:",e),{success:!0,data:e})}catch(a){return console.error("[Favorites] Supabase addFavorite exception:",a),{success:!1,error:a.message}}},async removeFavorite(e){console.log("[Favorites] Supabase removeFavorite called:",e);const{userId:t,itemType:r,itemId:o}=e;try{const{data:e,error:a}=await kt.supabase.from("favorites").delete().eq("user_id",t).eq("item_type",r).eq("item_id",o).select().single();return a?(console.error("[Favorites] Supabase removeFavorite error:",a),{success:!1,error:a.message}):(console.log("[Favorites] Supabase removeFavorite success:",e),{success:!0,data:e})}catch(a){return console.error("[Favorites] Supabase removeFavorite exception:",a),{success:!1,error:a.message}}},async checkFavoriteStatus(e){console.log("[Favorites] Supabase checkFavoriteStatus called:",e);const{userId:t,itemType:r,itemId:o}=e;try{const{data:e,error:a}=await kt.supabase.from("favorites").select("id").eq("user_id",t).eq("item_type",r).eq("item_id",o).limit(1);if(a)return console.error("[Favorites] Supabase checkFavoriteStatus error:",a),{success:!1,error:a.message};const s=e&&e.length>0,n=s?e[0].id:null;return console.log("[Favorites] Supabase checkFavoriteStatus:",s?"favorited":"not favorited"),{success:!0,data:{isFavorited:s,favoriteId:n}}}catch(a){return console.error("[Favorites] Supabase checkFavoriteStatus exception:",a),{success:!1,error:a.message}}},async getFavoriteCount(e){console.log("[Favorites] Supabase getFavoriteCount called:",e);const{itemType:t,itemId:r}=e;try{const{data:e,error:o}=await kt.supabase.from("favorite_counts").select("favorite_count").eq("item_type",t).eq("item_id",r).single();return o?"PGRST116"===o.code?(console.log("[Favorites] Supabase getFavoriteCount: no favorites found"),{success:!0,data:{count:0}}):(console.error("[Favorites] Supabase getFavoriteCount error:",o),{success:!1,error:o.message}):(console.log("[Favorites] Supabase getFavoriteCount success:",e.favorite_count),{success:!0,data:{count:e.favorite_count||0}})}catch(o){return console.error("[Favorites] Supabase getFavoriteCount exception:",o),{success:!1,error:o.message}}},async batchCheckFavoriteStatus(e){console.log("[Favorites] Supabase batchCheckFavoriteStatus called:",e);try{const{data:t,error:r}=await kt.supabase.from("favorites").select("item_type, item_id").in("item_type",e.map(e=>e.item_type)).in("item_id",e.map(e=>e.item_id));if(r)return console.error("[Favorites] Supabase batchCheckFavoriteStatus error:",r),{success:!1,error:r.message};const o={};return t.forEach(e=>{const t="".concat(e.item_type,":").concat(e.item_id);o[t]=!0}),console.log("[Favorites] Supabase batchCheckFavoriteStatus success:",o),{success:!0,data:o}}catch(t){return console.error("[Favorites] Supabase batchCheckFavoriteStatus exception:",t),{success:!1,error:t.message}}}},Or=Ur;const zr=new class{constructor(){this.adapter=Or}async getFavorites(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=await(0,Rr.HW)(),r=e.userId||(null===t||void 0===t?void 0:t.id);if(!r)throw new Error("User not authenticated");return this.adapter.getFavorites({userId:r,type:e.type||"all",cursor:e.cursor,limit:e.limit||20})}async addFavorite(e,t){console.log("[Favorites] addFavorite called:",{itemType:e,itemId:t});const r=await(0,Rr.HW)();return console.log("[Favorites] Current user:",r?"authenticated":"not authenticated"),null!==r&&void 0!==r&&r.id?e&&t?(e=>Object.values(Fr).includes(e))(e)?(console.log("[Favorites] Calling adapter.addFavorite"),this.adapter.addFavorite({userId:r.id,itemType:e,itemId:t})):(console.log("[Favorites] Invalid item type:",e),{success:!1,error:'Invalid item type. Must be "'.concat(Fr.WORK,'" or "').concat(Fr.COLLABORATION,'"')}):(console.log("[Favorites] Missing required parameters"),{success:!1,error:"Item type and ID are required"}):(console.log("[Favorites] User not authenticated, returning needAuth"),{success:!1,needAuth:!0,error:"User not authenticated"})}async removeFavorite(e,t){console.log("[Favorites] removeFavorite called:",{itemType:e,itemId:t});const r=await(0,Rr.HW)();return console.log("[Favorites] Current user:",r?"authenticated":"not authenticated"),null!==r&&void 0!==r&&r.id?e&&t?(console.log("[Favorites] Calling adapter.removeFavorite"),this.adapter.removeFavorite({userId:r.id,itemType:e,itemId:t})):(console.log("[Favorites] Missing required parameters"),{success:!1,error:"Item type and ID are required"}):(console.log("[Favorites] User not authenticated, returning needAuth"),{success:!1,needAuth:!0,error:"User not authenticated"})}async removeFavoriteById(e){const t=await(0,Rr.HW)();if(null===t||void 0===t||!t.id)throw new Error("User not authenticated");if(!e)throw new Error("Favorite ID is required");const r=await this.getFavorites({userId:t.id});if(!r.success)throw new Error("Failed to get favorites");const o=r.data.items.find(t=>t.id===e);if(!o)throw new Error("Favorite not found");return this.adapter.removeFavorite({userId:t.id,itemType:o.item_type,itemId:o.item_id})}async toggleFavorite(e,t,r){return console.log("[Favorites] toggleFavorite called:",{itemType:e,itemId:t,shouldFavorite:r}),r?this.addFavorite(e,t):this.removeFavorite(e,t)}async checkFavoriteStatus(e,t){const r=await(0,Rr.HW)();if(null===r||void 0===r||!r.id)return{success:!0,data:{isFavorited:!1,favoriteId:null}};if(!e||!t)throw new Error("Item type and ID are required");return this.adapter.checkFavoriteStatus({userId:r.id,itemType:e,itemId:t})}async getFavoriteCount(e,t){if(!e||!t)throw new Error("Item type and ID are required");return this.adapter.getFavoriteCount({itemType:e,itemId:t})}async batchCheckFavoriteStatus(e){const t=await(0,Rr.HW)();return null!==t&&void 0!==t&&t.id?this.adapter.batchCheckFavoriteStatus({userId:t.id,items:e}):e.reduce((e,t)=>(e["".concat(t.item_type,"_").concat(t.item_id)]=!1,e),{})}},Wr={STORAGE_KEY:"tag_collaboration_drafts",async _getStorage(){try{const e=await wr.IG.getItem(this.STORAGE_KEY);return e?JSON.parse(e):{}}catch(e){return console.error("Failed to get drafts from storage:",e),{}}},async _setStorage(e){try{await wr.IG.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Failed to save drafts to storage:",t)}},_generateId:()=>"draft_"+Date.now().toString(36)+Math.random().toString(36).substr(2),async getDrafts(e){var t;const{userId:r,type:o="all",cursor:a,limit:s=20}=e,n=(await this._getStorage())[r]||[];let i=n;"all"!==o&&(i=n.filter(e=>e.draftType===o)),i.sort((e,t)=>new Date(t.updatedAt)-new Date(e.updatedAt));let l=0;if(a){l=i.findIndex(e=>e.id===a)+1}const c=l+s,d=i.slice(l,c),u=c<i.length,h=u?null===(t=d[d.length-1])||void 0===t?void 0:t.id:null;return await new Promise(e=>setTimeout(e,100)),{success:!0,data:{items:d,pagination:{cursor:h,hasMore:u,total:i.length}}}},async saveDraft(e){const{userId:t,draftType:r,draftData:o}=e,a=await this._getStorage(),s=a[t]||[],i=(0,n.A)((0,n.A)({id:this._generateId(),userId:t,draftType:r},o),{},{createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()});return s.push(i),a[t]=s,await this._setStorage(a),await new Promise(e=>setTimeout(e,200)),{success:!0,data:i}},async updateDraft(e){const{userId:t,draftId:r,draftData:o}=e,a=await this._getStorage(),s=a[t]||[],i=s.findIndex(e=>e.id===r);if(-1===i)throw new Error("Draft not found");const l=(0,n.A)((0,n.A)((0,n.A)({},s[i]),o),{},{updatedAt:(new Date).toISOString()});return s[i]=l,a[t]=s,await this._setStorage(a),await new Promise(e=>setTimeout(e,200)),{success:!0,data:l}},async deleteDraft(e){const{userId:t,draftId:r}=e,o=await this._getStorage(),a=o[t]||[],s=a.findIndex(e=>e.id===r);if(-1===s)throw new Error("Draft not found");const n=a.splice(s,1)[0];return o[t]=a,await this._setStorage(o),await new Promise(e=>setTimeout(e,200)),{success:!0,data:n}},async getDraftById(e){const{userId:t,draftId:r}=e,o=((await this._getStorage())[t]||[]).find(e=>e.id===r);if(!o)throw new Error("Draft not found");return await new Promise(e=>setTimeout(e,100)),{success:!0,data:o}},async publishDraft(e){const{userId:t,draftId:r}=e,o=await this._getStorage(),a=o[t]||[],s=a.findIndex(e=>e.id===r);if(-1===s)throw new Error("Draft not found");a[s];const i=a.splice(s,1)[0];return o[t]=a,await this._setStorage(o),await new Promise(e=>setTimeout(e,300)),{success:!0,data:(0,n.A)((0,n.A)({},i),{},{publishedAt:(new Date).toISOString()})}},async clearUserDrafts(e){const t=await this._getStorage();delete t[e],await this._setStorage(t)},async getAllDrafts(){return await this._getStorage()}},Br=Wr;const Gr=new class{constructor(){this.adapter=Br}async getDrafts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=await(0,Rr.HW)();if(!(e.userId||(null===t||void 0===t?void 0:t.id)))throw new Error("User not authenticated");return console.log("[DraftService] getDrafts: returning empty list to avoid storage errors"),{success:!0,data:{items:[],pagination:{cursor:null,hasMore:!1,total:0}}}}async saveDraft(e,t){const r=await(0,Rr.HW)();if(null===r||void 0===r||!r.id)throw new Error("User not authenticated");if(!e||!t)throw new Error("Draft type and data are required");return this.adapter.saveDraft({userId:r.id,draftType:e,draftData:t})}async updateDraft(e,t){const r=await(0,Rr.HW)();if(null===r||void 0===r||!r.id)throw new Error("User not authenticated");if(!e||!t)throw new Error("Draft ID and data are required");return this.adapter.updateDraft({userId:r.id,draftId:e,draftData:t})}async deleteDraft(e){const t=await(0,Rr.HW)();if(null===t||void 0===t||!t.id)throw new Error("User not authenticated");if(!e)throw new Error("Draft ID is required");return this.adapter.deleteDraft({userId:t.id,draftId:e})}async getDraftById(e){const t=await(0,Rr.HW)();if(null===t||void 0===t||!t.id)throw new Error("User not authenticated");if(!e)throw new Error("Draft ID is required");return this.adapter.getDraftById({userId:t.id,draftId:e})}async publishDraft(e){const t=await(0,Rr.HW)();if(null===t||void 0===t||!t.id)throw new Error("User not authenticated");if(!e)throw new Error("Draft ID is required");return this.adapter.publishDraft({userId:t.id,draftId:e})}};var Hr=r(619);const qr=async e=>{try{const t="comments_".concat(e.workId),r=JSON.parse(localStorage.getItem(t)||"[]"),o=(0,n.A)((0,n.A)({},e),{},{parentId:e.parentId||null,rootId:e.rootId||null,text:e.text||e.content||"",createdAt:e.createdAt||Date.now(),updatedAt:e.updatedAt||Date.now()});r.unshift(o);const a=r.slice(0,100);return localStorage.setItem(t,JSON.stringify(a)),console.log("[localStorageAdapter] Created comment for work ".concat(e.workId)),{success:!0,data:o}}catch(t){return console.error("[localStorageAdapter] Error creating comment:",t),{success:!1,error:t.message}}},Vr=async e=>{try{await(async()=>{})();const t="comments_".concat(e),r=JSON.parse(localStorage.getItem(t)||"[]").filter(e=>!e.isDeleted).map(e=>(0,n.A)((0,n.A)({},e),{},{parentId:e.parentId||null,rootId:e.rootId||null,text:e.text||e.content||"",createdAt:e.createdAt||(e.createdAt?new Date(e.createdAt).getTime():Date.now()),updatedAt:e.updatedAt||(e.updatedAt?new Date(e.updatedAt).getTime():Date.now())}));return console.log("[localStorageAdapter] Retrieved ".concat(r.length," comments for work ").concat(e)),{success:!0,data:r}}catch(t){return console.error("[localStorageAdapter] Error getting comments for work ".concat(e,":"),t),{success:!1,error:t.message}}},Jr=async(e,t)=>{try{const r="comments_".concat(e),o=JSON.parse(localStorage.getItem(r)||"[]");return o.find(e=>e.id===t)||null}catch(r){return console.error("[localStorageAdapter] Error finding parent comment:",r),null}},Zr=async(e,t)=>{try{const r=Object.keys(localStorage).filter(e=>e.startsWith("comments_"));for(const o of r){const r=JSON.parse(localStorage.getItem(o)||"[]"),a=r.findIndex(t=>t.id===e);if(-1!==a){const s=r[a];s.likedBy||(s.likedBy=[]);const n=s.likedBy.indexOf(t);return-1!==n?(s.likedBy.splice(n,1),s.likes=Math.max(0,s.likes-1)):(s.likedBy.push(t),s.likes++),s.updatedAt=(new Date).toISOString(),localStorage.setItem(o,JSON.stringify(r)),console.log("[localStorageAdapter] ".concat(-1!==n?"Unliked":"Liked"," comment ").concat(e)),{success:!0,data:s,isLiked:-1===n}}}return console.warn("[localStorageAdapter] Comment ".concat(e," not found")),{success:!1,error:"Comment not found"}}catch(r){return console.error("[localStorageAdapter] Error liking comment:",r),{success:!1,error:r.message}}},Kr=async(e,t)=>{try{const r=Object.keys(localStorage).filter(e=>e.startsWith("comments_"));for(const o of r){const r=JSON.parse(localStorage.getItem(o)||"[]"),a=r.findIndex(t=>t.id===e);if(-1!==a){const s=r[a];s.likedBy||(s.likedBy=[]);const n=s.likedBy.indexOf(t);if(-1!==n)return s.likedBy.splice(n,1),s.likes=Math.max(0,s.likes-1),s.updatedAt=(new Date).toISOString(),localStorage.setItem(o,JSON.stringify(r)),console.log("[localStorageAdapter] Unliked comment ".concat(e)),{success:!0,data:s,isLiked:!1}}}return console.warn("[localStorageAdapter] Comment ".concat(e," not found or not liked")),{success:!1,error:"Comment not found or not liked"}}catch(r){return console.error("[localStorageAdapter] Error unliking comment:",r),{success:!1,error:r.message}}},Yr=async(e,t)=>{try{const r=Object.keys(localStorage).filter(e=>e.startsWith("comments_"));for(const o of r){const r=JSON.parse(localStorage.getItem(o)||"[]"),a=r.findIndex(t=>t.id===e);if(-1!==a){const s=r[a];return s.authorId!==t?(console.warn("[localStorageAdapter] User ".concat(t," not authorized to delete comment ").concat(e)),{success:!1,error:"Not authorized to delete comment"}):(s.isDeleted=!0,s.updatedAt=(new Date).toISOString(),localStorage.setItem(o,JSON.stringify(r)),console.log("[localStorageAdapter] Deleted comment ".concat(e)),{success:!0})}}return console.warn("[localStorageAdapter] Comment ".concat(e," not found")),{success:!1,error:"Comment not found"}}catch(r){return console.error("[localStorageAdapter] Error deleting comment:",r),{success:!1,error:r.message}}},Qr=async(e,t,r)=>{try{const o=Object.keys(localStorage).filter(e=>e.startsWith("comments_"));for(const a of o){const o=JSON.parse(localStorage.getItem(a)||"[]"),s=o.findIndex(t=>t.id===e);if(-1!==s){const n=o[s];return n.authorId!==t?(console.warn("[localStorageAdapter] User ".concat(t," not authorized to update comment ").concat(e)),{success:!1,error:"Not authorized to update comment"}):(n.content=r,n.updatedAt=(new Date).toISOString(),localStorage.setItem(a,JSON.stringify(o)),console.log("[localStorageAdapter] Updated comment ".concat(e)),{success:!0,data:n})}}return console.warn("[localStorageAdapter] Comment ".concat(e," not found")),{success:!1,error:"Comment not found"}}catch(o){return console.error("[localStorageAdapter] Error updating comment:",o),{success:!1,error:o.message}}},$r=async e=>(console.log("[supabaseAdapter] createComment - Placeholder implementation"),{success:!1,error:"Supabase adapter not implemented yet"}),Xr=async e=>(console.log("[supabaseAdapter] getWorkComments - Placeholder implementation"),{success:!1,error:"Supabase adapter not implemented yet"}),eo=async(e,t)=>(console.log("[supabaseAdapter] likeComment - Placeholder implementation"),{success:!1,error:"Supabase adapter not implemented yet"}),to=async(e,t)=>(console.log("[supabaseAdapter] unlikeComment - Placeholder implementation"),{success:!1,error:"Supabase adapter not implemented yet"}),ro=async(e,t)=>(console.log("[supabaseAdapter] deleteComment - Placeholder implementation"),{success:!1,error:"Supabase adapter not implemented yet"}),oo=async(e,t,r)=>(console.log("[supabaseAdapter] updateComment - Placeholder implementation"),{success:!1,error:"Supabase adapter not implemented yet"}),ao={createComment:async function(e,t,r,o){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{let s=null;a&&(s=await Jr(e,a));const n={id:"comment_".concat(e,"_").concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),workId:e,authorId:t,authorName:r,text:o,parentId:a,rootId:s?s.rootId||s.id:null,likes:0,likedBy:[],isDeleted:!1,createdAt:Date.now(),updatedAt:Date.now()};a&&console.log("[reply:optimistic]",n);const i=await qr(n);if(i.success)return console.log("[commentService] Created comment in LocalStorage"),a&&console.log("[reply:saved]",i.data),i;const l=await $r(n);return l.success?(console.log("[commentService] Created comment in Supabase"),a&&console.log("[reply:saved]",l.data),l):(console.warn("[commentService] Failed to create comment"),{success:!1,error:"Failed to create comment"})}catch(s){return console.error("[commentService] Error creating comment:",s),{success:!1,error:s.message}}},getWorkComments:async e=>{try{const t=await Vr(e);if(t&&t.success)return console.log("[commentService] Using LocalStorage comments for work ".concat(e)),t;const r=await Xr(e);return r&&r.success?(console.log("[commentService] Using Supabase comments for work ".concat(e)),r):(console.log("[commentService] No comments found for work ".concat(e)),{success:!0,data:[]})}catch(t){return console.error("[commentService] Error getting comments for work ".concat(e,":"),t),{success:!1,error:t.message}}},likeComment:async(e,t)=>{try{const r=await Zr(e,t);if(r.success)return console.log("[commentService] Liked comment ".concat(e," in LocalStorage")),r;const o=await eo(e,t);return o.success?(console.log("[commentService] Liked comment ".concat(e," in Supabase")),o):(console.warn("[commentService] Failed to like comment ".concat(e)),{success:!1,error:"Failed to like comment"})}catch(r){return console.error("[commentService] Error liking comment:",r),{success:!1,error:r.message}}},unlikeComment:async(e,t)=>{try{const r=await Kr(e,t);if(r.success)return console.log("[commentService] Unliked comment ".concat(e," in LocalStorage")),r;const o=await to(e,t);return o.success?(console.log("[commentService] Unliked comment ".concat(e," in Supabase")),o):(console.warn("[commentService] Failed to unlike comment ".concat(e)),{success:!1,error:"Failed to unlike comment"})}catch(r){return console.error("[commentService] Error unliking comment:",r),{success:!1,error:r.message}}},deleteComment:async(e,t)=>{try{const r=await Yr(e,t);if(r.success)return console.log("[commentService] Deleted comment ".concat(e," in LocalStorage")),r;const o=await ro(e,t);return o.success?(console.log("[commentService] Deleted comment ".concat(e," in Supabase")),o):(console.warn("[commentService] Failed to delete comment ".concat(e)),{success:!1,error:"Failed to delete comment"})}catch(r){return console.error("[commentService] Error deleting comment:",r),{success:!1,error:r.message}}},updateComment:async(e,t,r)=>{try{const o=await Qr(e,t,r);if(o.success)return console.log("[commentService] Updated comment ".concat(e," in LocalStorage")),o;const a=await oo(e,t,r);return a.success?(console.log("[commentService] Updated comment ".concat(e," in Supabase")),a):(console.warn("[commentService] Failed to update comment ".concat(e)),{success:!1,error:"Failed to update comment"})}catch(o){return console.error("[commentService] Error updating comment:",o),{success:!1,error:o.message}}}};var so=r(792);const no=e=>"".concat("tag.userProfile.").concat(e);function io(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return Array.isArray(e)?e.filter(e=>e&&e.trim()).map(e=>e.trim()).filter((e,t,r)=>r.indexOf(e)===t).slice(0,t):[]}function lo(e){var t,r,o,a;return{id:e.id||"",fullName:(e.fullName||"").trim(),title:(e.title||"").trim(),school:(e.school||"").trim(),pronouns:(e.pronouns||"").trim(),majors:io(e.majors,3),minors:io(e.minors,3),skills:io(e.skills,12),bio:(e.bio||"").trim(),avatar:e.avatar||null,socialLinks:{instagram:((null===(t=e.socialLinks)||void 0===t?void 0:t.instagram)||"").trim(),portfolio:((null===(r=e.socialLinks)||void 0===r?void 0:r.portfolio)||"").trim(),discord:((null===(o=e.socialLinks)||void 0===o?void 0:o.discord)||"").trim(),otherLinks:Array.isArray(null===(a=e.socialLinks)||void 0===a?void 0:a.otherLinks)?e.socialLinks.otherLinks.filter(e=>e&&e.label&&e.url):[]},updatedAt:e.updatedAt||(new Date).toISOString()}}function co(e,t){try{return"undefined"!==typeof window&&(window.localStorage.setItem(no(e),JSON.stringify(t)),!0)}catch(r){return console.warn("Failed to write user profile data:",r),!1}}const uo=async e=>{try{try{const{getProfile:o,checkSupabaseConnection:a}=await Promise.resolve().then(r.bind(r,405));if(await a()){console.log("[userProfileService] Attempting to get profile from Supabase...");const r=await o(e);if(r.success){console.log("[userProfileService] Successfully retrieved profile from Supabase");try{const t=window.localStorage.getItem("tag.avatars.".concat(e));if(t){const e=JSON.parse(t);e&&e.avatarUrl&&(r.data.avatar=e.avatarUrl,console.log("[userProfileService] Loaded avatar from tag.avatars storage"))}}catch(t){console.warn("[userProfileService] Failed to load avatar from tag.avatars storage:",t)}return r}}}catch(o){console.warn("[userProfileService] Supabase fallback failed, using Mock API:",o.message)}console.log("[userProfileService] Using Mock API fallback");const a=function(e){try{if("undefined"===typeof window)return null;const t=window.localStorage.getItem(no(e));return t?JSON.parse(t):null}catch(t){return console.warn("Failed to read user profile data:",t),null}}(e),s=function(e){return{id:e,fullName:"",title:"Artist",school:"",pronouns:"",majors:[],minors:[],skills:[],bio:"",avatar:null,socialLinks:{instagram:"",portfolio:"",discord:"",otherLinks:[]},updatedAt:(new Date).toISOString()}}(e);if(!a)return{success:!0,data:s};const i=(0,n.A)((0,n.A)((0,n.A)({},s),a),{},{socialLinks:(0,n.A)((0,n.A)({},s.socialLinks),a.socialLinks||{})});try{const t=window.localStorage.getItem("tag.avatars.".concat(e));if(t){const e=JSON.parse(t);e&&e.avatarUrl&&(i.avatar=e.avatarUrl,console.log("[userProfileService] Loaded avatar from tag.avatars storage"))}}catch(t){console.warn("[userProfileService] Failed to load avatar from tag.avatars storage:",t)}const l=lo(i);return console.log("[userProfileService] Loading profile data from Mock API:",{userId:e,socialLinks:l.socialLinks,fullProfile:l}),{success:!0,data:l}}catch(t){return console.error("Failed to get profile:",t),{success:!1,error:t.message}}},ho=async(e,t)=>{try{const a=await uo(e);if(!a.success)return a;const s=a.data,i=lo((0,n.A)((0,n.A)((0,n.A)({},s),t),{},{socialLinks:(0,n.A)((0,n.A)({},s.socialLinks),t.socialLinks||{}),id:e,updatedAt:(new Date).toISOString()})),l=function(e){const t={};return e.fullName&&e.fullName.trim()||(t.fullName="Full name is required"),{isValid:0===Object.keys(t).length,errors:t}}(i);if(!l.isValid)return{success:!1,errors:l.errors};try{const{saveProfile:t,checkSupabaseConnection:o}=await Promise.resolve().then(r.bind(r,405));if(await o()){console.log("[userProfileService] Attempting to save profile to Supabase...");const r=await t(e,i);if(r.success){console.log("[userProfileService] Successfully saved profile to Supabase");return co(e,i)||console.warn("[userProfileService] Failed to backup to Mock API"),await mo(e,i),r}}}catch(o){console.warn("[userProfileService] Supabase save failed, using Mock API:",o.message)}console.log("[userProfileService] Using Mock API fallback for save"),console.log("[userProfileService] Saving profile data to Mock API:",{userId:e,socialLinks:i.socialLinks,fullProfile:i});return co(e,i)?(console.log("[userProfileService] Profile data saved successfully to Mock API"),await mo(e,i),{success:!0,data:i}):{success:!1,error:"Failed to save profile data"}}catch(a){return console.error("Failed to save profile:",a),{success:!1,error:a.message}}},mo=async(e,t)=>{if(t.avatar)try{(await so.A.storeAvatar(e,t.avatar)).success?console.log("[userProfileService] Avatar stored in IndexedDB for user: ".concat(e)):console.warn("[userProfileService] Failed to store avatar in IndexedDB for user: ".concat(e));const r={avatarUrl:t.avatar,timestamp:Date.now()};localStorage.setItem("tag.avatars.".concat(e),JSON.stringify(r)),console.log("[userProfileService] Avatar stored in localStorage for user: ".concat(e))}catch(o){console.error("[userProfileService] Error storing avatar: ".concat(o))}var r;r=t,"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent("profile:updated",{detail:r}))},po=async(e,t)=>{try{console.log("[avatarService] Supabase: Starting avatar upload for user:",t);const r=(e=>{const t=Date.now();return"".concat(e,"/").concat(t,".webp")})(t);console.log("[avatarService] Supabase: Generated filename:",r);const o=await(async e=>{try{const t=await fetch(e);return await t.blob()}catch(s){throw console.error("[avatarService] Failed to convert dataURL to blob:",s),new Error("Failed to convert image data")}})(e);console.log("[avatarService] Supabase: Converted to blob, size:",o.size);const{data:a,error:s}=await kt.supabase.storage.from("avatars").upload(r,o,{cacheControl:"3600",upsert:!0});if(s)return console.error("[avatarService] Supabase: Upload failed:",s),{success:!1,error:s.message};console.log("[avatarService] Supabase: Successfully uploaded avatar:",r);const{data:n}=kt.supabase.storage.from("avatars").getPublicUrl(r),i=n.publicUrl,l=(new Date).toISOString(),{error:c}=await kt.supabase.from("profiles").update({avatar_url:i}).eq("id",t);return c&&console.warn("[avatarService] Supabase: Failed to update profile avatar_key:",c),"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent("avatar:updated",{detail:{userId:t,avatarUrl:i,avatarUpdatedAt:l,avatarKey:r}})),{success:!0,data:{avatarUrl:i,avatarUpdatedAt:l,fileName:r,avatarKey:r}}}catch(r){return console.error("[avatarService] Supabase: Error uploading avatar:",r),{success:!1,error:r.message}}},go=async e=>{try{const t=await(async e=>{try{console.log("[avatarService] Supabase: Getting avatar info for user:",e);const{data:t,error:r}=await kt.supabase.from("profiles").select("avatar_url").eq("id",e).single();if(r)return console.warn("[avatarService] Supabase: Failed to get profile:",r),{success:!0,data:{avatarUrl:null,avatarUpdatedAt:null,fileName:null}};if(!t||!t.avatar_url)return console.log("[avatarService] Supabase: No avatar found for user:",e),{success:!0,data:{avatarUrl:null,avatarUpdatedAt:null,fileName:null}};const o=t.avatar_url,a=t.avatar_url.split("/").pop();return console.log("[avatarService] Supabase: Retrieved avatar info:",{fileName:a}),{success:!0,data:{avatarUrl:o,fileName:a}}}catch(t){return console.error("[avatarService] Supabase: Error getting avatar info:",t),{success:!1,error:t.message}}})(e);if(!t.success||!t.data.avatarUrl)return null;const r=Date.now(),o=t.data.avatarUrl.includes("?")?"&":"?";return"".concat(t.data.avatarUrl).concat(o,"t=").concat(r)}catch(t){return console.error("[avatarService] Supabase: Error getting avatar URL with cache bust:",t),null}};class fo{constructor(){this.capabilities=this.detectCapabilities()}detectCapabilities(){const e={localStorage:this.testLocalStorage(),indexedDB:this.testIndexedDB(),fetch:this.testFetch(),cors:this.testCORS(),privateMode:this.detectPrivateMode()};return console.log("[BrowserCompatibility] Detected capabilities:",e),e}testLocalStorage(){try{const e="__test_localStorage__";localStorage.setItem(e,"test");const t="test"===localStorage.getItem(e);return localStorage.removeItem(e),t}catch(e){return console.warn("[BrowserCompatibility] localStorage not available:",e),!1}}testIndexedDB(){try{return"indexedDB"in window&&null!==indexedDB}catch(e){return console.warn("[BrowserCompatibility] IndexedDB not available:",e),!1}}testFetch(){try{return"fetch"in window&&"function"===typeof fetch}catch(e){return console.warn("[BrowserCompatibility] fetch not available:",e),!1}}testCORS(){try{return"cors"in new Request("https://example.com")}catch(e){return console.warn("[BrowserCompatibility] CORS test failed:",e),!1}}detectPrivateMode(){try{const e="__private_mode_test__";localStorage.setItem(e,"test");const t="test"===localStorage.getItem(e);return localStorage.removeItem(e),!t}catch(e){return!0}}getCompatibilityStatus(){const{localStorage:e,indexedDB:t,fetch:r,cors:o,privateMode:a}=this.capabilities;return a?{level:"warning",message:"Private browsing mode detected. Some features may be limited.",recommendations:["Use normal browsing mode for full functionality"]}:e&&t?r&&o?{level:"success",message:"All features supported.",recommendations:[]}:{level:"warning",message:"Limited network capabilities. Some images may not load.",recommendations:["Check network settings","Disable strict CORS policies"]}:{level:"error",message:"Storage not available. Core features will not work.",recommendations:["Enable cookies and storage","Use a supported browser"]}}}class vo{constructor(){this.checker=new fo}getStorageInterface(){const{localStorage:e,indexedDB:t}=this.checker.capabilities;return e&&t?{type:"full",localStorage:this.createSafeLocalStorage(),indexedDB:this.createSafeIndexedDB()}:e?{type:"localStorage_only",localStorage:this.createSafeLocalStorage(),indexedDB:this.createMockIndexedDB()}:{type:"memory_only",localStorage:this.createMemoryStorage(),indexedDB:this.createMockIndexedDB()}}createSafeLocalStorage(){return{getItem:e=>{try{return localStorage.getItem(e)}catch(t){return console.warn("[SafeStorage] Failed to get ".concat(e,":"),t),null}},setItem:(e,t)=>{try{return localStorage.setItem(e,t),!0}catch(r){return console.warn("[SafeStorage] Failed to set ".concat(e,":"),r),!1}},removeItem:e=>{try{return localStorage.removeItem(e),!0}catch(t){return console.warn("[SafeStorage] Failed to remove ".concat(e,":"),t),!1}}}}createSafeIndexedDB(){return{getImageUrl:async e=>{try{const t=await Promise.resolve().then(r.bind(r,337));return await t.default.getImageUrl(e)}catch(t){return console.warn("[SafeStorage] Failed to get image ".concat(e,":"),t),null}}}}createMemoryStorage(){const e=new Map;return{getItem:t=>e.get(t)||null,setItem:(t,r)=>(e.set(t,r),!0),removeItem:t=>(e.delete(t),!0)}}createMockIndexedDB(){return{getImageUrl:async e=>"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlIG5vdCBhdmFpbGFibGU8L3RleHQ+PC9zdmc+"}}}class xo{constructor(){this.checker=new fo}async getSafeImageUrl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return this.getDefaultPlaceholder();if(e.startsWith("data:"))return e;if(!e.startsWith("http"))try{const t=await Promise.resolve().then(r.bind(r,337)),o=await t.default.getImageUrl(e);if(o)return o}catch(o){console.warn("[ImageFallback] Failed to get image from IndexedDB:",o)}if(e.startsWith("http")&&this.checker.capabilities.cors)try{if((await fetch(e,{method:"HEAD"})).ok)return e}catch(o){console.warn("[ImageFallback] CORS check failed:",o)}return t||this.getDefaultPlaceholder()}getDefaultPlaceholder(){return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlIG5vdCBhdmFpbGFibGU8L3RleHQ+PC9zdmc+"}}new fo,new vo,new xo;const bo=async()=>{try{console.log("[ResetData] Starting data reset...");const e=await wr.IG.keys();console.log("[ResetData] Found keys:",e);const t=e.filter(e=>e.startsWith("tag.")||e.startsWith("user_")||e.startsWith("artist_")||e.startsWith("portfolio_")||e.startsWith("tag_favorites")||e.startsWith("tag_follows")||e.startsWith("tag_service_data")||e.includes("comment")||e.includes("notification")||e.includes("view")||e.includes("like")||e.includes("review")||e.includes("collaboration")||e.includes("avatar"));console.log("[ResetData] Clearing TAG keys:",t);for(const r of t)await wr.IG.removeItem(r),console.log("[ResetData] Removed key: ".concat(r));if("undefined"!==typeof window){const e=Object.keys(localStorage).filter(e=>e.startsWith("tag.")||e.startsWith("user_")||e.startsWith("artist_")||e.startsWith("portfolio_")||e.startsWith("tag_favorites")||e.startsWith("tag_follows")||e.startsWith("tag_service_data")||e.includes("comment")||e.includes("notification")||e.includes("view")||e.includes("like")||e.includes("review")||e.includes("collaboration")||e.includes("avatar"));console.log("[ResetData] Clearing localStorage TAG keys:",e);for(const t of e)localStorage.removeItem(t),console.log("[ResetData] Removed localStorage key: ".concat(t))}return console.log("[ResetData] Data reset completed successfully"),{success:!0,message:"Data reset completed"}}catch(e){return console.error("[ResetData] Error during data reset:",e),{success:!1,error:e.message}}},yo=()=>{try{"undefined"!==typeof window&&(localStorage.setItem("tag.currentUserId","alice"),console.log("[ResetData] Reset current user to alice"))}catch(e){console.error("[ResetData] Error resetting current user:",e)}},wo=async()=>{try{return console.log("[ResetData] Force reinitializing all data..."),await bo(),yo(),"undefined"!==typeof window&&(console.log("[ResetData] Reloading page to reinitialize..."),window.location.reload()),{success:!0,message:"Reinitialization triggered"}}catch(e){return console.error("[ResetData] Error during reinitialization:",e),{success:!1,error:e.message}}};"undefined"!==typeof window&&(window.resetTAGData=bo,window.resetTAGUser=yo,window.forceTAGReinit=wo,console.log("[ResetData] Reset functions added to console:"),console.log("- window.resetTAGData() - \u6e05\u9664\u6240\u6709TAG\u6570\u636e"),console.log("- window.resetTAGUser() - \u91cd\u7f6e\u5f53\u524d\u7528\u6237"),console.log("- window.forceTAGReinit() - \u5f3a\u5236\u91cd\u65b0\u521d\u59cb\u5316"));const jo={selectedArtist:null,selectedCollaboration:null,selectedMilestone:null,isLoading:!1,showDetail:!1,navigationHistory:[],scrollPositions:{},isInitialized:!1,comments:[{id:1,user:"Alex Chen",avatar:null,role:"Character Designer",comment:"The character sketches are looking great! I think we should focus more on the facial expressions for the next iteration.",timestamp:"2 hours ago",likes:3},{id:2,user:"Maya Rodriguez",avatar:null,role:"Art Director",comment:"Love the color palette choices. The purple hair really makes the character stand out.",timestamp:"4 hours ago",likes:5},{id:3,user:"Jordan Kim",avatar:null,role:"3D Modeler",comment:"The 3D models are coming along nicely. Can't wait to see the final renders!",timestamp:"1 day ago",likes:2}]},ko="SET_SELECTED_ARTIST",No="SET_SELECTED_COLLABORATION",So="SET_SELECTED_MILESTONE",Co="SET_LOADING",Ao="SET_SHOW_DETAIL",_o="ADD_TO_HISTORY",Io="CLEAR_HISTORY",Eo="RESET_STATE",Po="SAVE_SCROLL_POSITION",Do="CLEAR_SCROLL_POSITION",To="ADD_COMMENT",Lo="UPDATE_COMMENT",Mo="DELETE_COMMENT",Ro="SET_INITIALIZED",Fo=(e,t)=>{switch(t.type){case ko:return(0,n.A)((0,n.A)({},e),{},{selectedArtist:t.payload});case No:return(0,n.A)((0,n.A)({},e),{},{selectedCollaboration:t.payload});case So:return(0,n.A)((0,n.A)({},e),{},{selectedMilestone:t.payload});case Co:return(0,n.A)((0,n.A)({},e),{},{isLoading:t.payload});case Ao:return(0,n.A)((0,n.A)({},e),{},{showDetail:t.payload});case _o:return(0,n.A)((0,n.A)({},e),{},{navigationHistory:[...e.navigationHistory,t.payload]});case Io:return(0,n.A)((0,n.A)({},e),{},{navigationHistory:[]});case Eo:return(0,n.A)((0,n.A)({},jo),{},{isInitialized:e.isInitialized,navigationHistory:e.navigationHistory,scrollPositions:e.scrollPositions});case Po:return(0,n.A)((0,n.A)({},e),{},{scrollPositions:(0,n.A)((0,n.A)({},e.scrollPositions),{},{[t.payload.path]:{scrollY:t.payload.position,elementInfo:t.payload.elementInfo||null,timestamp:Date.now()}})});case Do:{const r=e.scrollPositions,o=t.payload,{[o]:a}=r,i=s(r,[o].map(nr.A));return(0,n.A)((0,n.A)({},e),{},{scrollPositions:i})}case To:return(0,n.A)((0,n.A)({},e),{},{comments:[t.payload,...e.comments]});case Lo:return(0,n.A)((0,n.A)({},e),{},{comments:e.comments.map(e=>e.id===t.payload.id?t.payload:e)});case Mo:return(0,n.A)((0,n.A)({},e),{},{comments:e.comments.filter(e=>e.id!==t.payload)});case Ro:return(0,n.A)((0,n.A)({},e),{},{isInitialized:t.payload});default:return e}},Uo=(0,o.createContext)(),Oo=e=>{let{children:t}=e;const[r,a]=(0,o.useReducer)(Fo,jo),s={setSelectedArtist:(0,o.useCallback)(e=>a({type:ko,payload:e}),[a]),setSelectedCollaboration:(0,o.useCallback)(e=>a({type:No,payload:e}),[a]),setSelectedMilestone:(0,o.useCallback)(e=>a({type:So,payload:e}),[a]),setLoading:(0,o.useCallback)(e=>a({type:Co,payload:e}),[a]),setShowDetail:(0,o.useCallback)(e=>a({type:Ao,payload:e}),[a]),addToHistory:(0,o.useCallback)(e=>a({type:_o,payload:e}),[a]),clearHistory:(0,o.useCallback)(()=>a({type:Io}),[a]),resetState:(0,o.useCallback)(()=>a({type:Eo}),[a]),saveScrollPosition:(0,o.useCallback)(function(e,t){return a({type:Po,payload:{path:e,position:t,elementInfo:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null}})},[a]),clearScrollPosition:(0,o.useCallback)(e=>a({type:Do,payload:e}),[a]),addComment:(0,o.useCallback)(e=>a({type:To,payload:e}),[a]),updateComment:(0,o.useCallback)(e=>a({type:Lo,payload:e}),[a]),deleteComment:(0,o.useCallback)(e=>a({type:Mo,payload:e}),[a]),setInitialized:(0,o.useCallback)(e=>a({type:Ro,payload:e}),[a])};(0,o.useEffect)(()=>{a({type:Ro,payload:!0});const e=setTimeout(()=>{r.isInitialized||a({type:Ro,payload:!0})},1e3);return()=>clearTimeout(e)},[]);const n=o.useMemo(()=>({state:r,actions:s}),[r,s]);return(0,Nt.jsx)(Uo.Provider,{value:n,children:t})},zo=()=>{const e=(0,o.useContext)(Uo);if(!e)throw new Error("useAppContext must be used within an AppProvider");return e};function Wo(){const{state:e}=zo();return e.isLoading?(0,Nt.jsx)("div",{className:"fixed inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50",children:(0,Nt.jsxs)("div",{className:"text-center",children:[(0,Nt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-tag-blue mx-auto mb-4"}),(0,Nt.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):null}function Bo(){const{pathname:e}=le(),t=(0,o.useRef)(e);return(0,o.useEffect)(()=>{t.current!==e&&("/"!==e&&window.scrollTo(0,0),t.current=e)},[e]),null}function Go(){const[e,t]=(0,o.useState)("Latest"),[r,a]=(0,o.useState)([]),[s,n]=(0,o.useState)([]);return(0,Nt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filters"}),(0,Nt.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,Nt.jsx)("button",{onClick:()=>{const t=new URLSearchParams;t.append("sort",e.toLowerCase()),r.length>0&&t.append("categories",r.join(",")),s.length>0&&t.append("software",s.join(","));const o="/major-aggregation?".concat(t.toString());window.open(o,"_blank")},disabled:0===r.length&&0===s.length,className:"flex-1 px-3 py-1.5 text-sm rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-1 ".concat(0===r.length&&0===s.length?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-tag-blue text-white hover:bg-blue-600 focus:ring-tag-blue"),children:"Apply"}),(0,Nt.jsx)("button",{onClick:()=>{t("Latest"),a([]),n([]),console.log("Clear all filters - Reset to default state")},className:"flex-1 px-3 py-1.5 bg-gray-100 text-gray-600 text-sm rounded-md hover:bg-gray-200 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-1",children:"Clear"})]}),(0,Nt.jsxs)("div",{className:"mb-6",children:[(0,Nt.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Sort By"}),(0,Nt.jsxs)("select",{value:e,onChange:e=>t(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue",children:[(0,Nt.jsx)("option",{value:"Latest",children:"Latest"}),(0,Nt.jsx)("option",{value:"Popular",children:"Popular"})]})]}),(0,Nt.jsxs)("div",{className:"mb-6",children:[(0,Nt.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Major"}),(0,Nt.jsx)("div",{className:"space-y-2",children:["Accessory Design","Acting","Advertising","Animation","Architecture","Art History","Creative Business Leadership","Fashion Design","Fibers","Film","Film/Television","Fine Art","Game/ITGM","Graphic Design","Industrial Design","Illustration","Interior Design","Jewelry","Motion Design","Painting","Photography","Service Design","Sequential Art","UI/UX","Visual Effects"].map(e=>(0,Nt.jsxs)("label",{className:"flex items-center",children:[(0,Nt.jsx)("input",{type:"checkbox",checked:r.includes(e),onChange:()=>(e=>{a(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(e),className:"h-4 w-4 text-tag-blue focus:ring-tag-blue border-gray-300 rounded"}),(0,Nt.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:e})]},e))})]}),(0,Nt.jsxs)("div",{className:"mb-6",children:[(0,Nt.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Software"}),(0,Nt.jsx)("div",{className:"space-y-2",children:["3D-Coat","3ds Max","After Effects","Blender","Cinema 4D","DaVinci Resolve","Figma","Gaea","Houdini","Illustrator","InDesign","JavaScript","Maya","Nuke","Photoshop","Python","Substance Designer","Substance Painter","Unity","Unreal Engine","ZBrush"].map(e=>(0,Nt.jsxs)("label",{className:"flex items-center",children:[(0,Nt.jsx)("input",{type:"checkbox",checked:s.includes(e),onChange:()=>(e=>{n(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(e),className:"h-4 w-4 text-tag-blue focus:ring-tag-blue border-gray-300 rounded"}),(0,Nt.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:e})]},e))})]})]})}const Ho=["options","value","onChange","placeholder","name"];function qo(e){let{options:t,value:r,onChange:o,placeholder:a,name:i}=e,l=s(e,Ho);return(0,Nt.jsxs)("div",{className:"relative",children:[(0,Nt.jsxs)("select",(0,n.A)((0,n.A)({value:r,onChange:o,name:i,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 pr-10 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple appearance-none"},l),{},{children:[a&&(0,Nt.jsx)("option",{value:"",children:a}),t.map((e,t)=>(0,Nt.jsx)("option",{value:e.value,children:e.label},t))]})),(0,Nt.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,Nt.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})}function Vo(){return(0,Nt.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center",children:(0,Nt.jsxs)("div",{className:"text-center",children:[(0,Nt.jsxs)("div",{className:"mb-8",children:[(0,Nt.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"TAG"}),(0,Nt.jsx)("p",{className:"text-gray-600 mt-2",children:"Loading your creative world..."})]}),(0,Nt.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,Nt.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full animate-bounce"}),(0,Nt.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,Nt.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),(0,Nt.jsx)("p",{className:"text-sm text-gray-500 mt-6",children:"Initializing application..."})]})})}const Jo=e=>{let{isOpen:t,onClose:r,errors:o,title:a="Please Complete Required Fields"}=e;return t?(0,Nt.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,Nt.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),(0,Nt.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden",children:[(0,Nt.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 px-6 py-4",children:(0,Nt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Nt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Nt.jsx)("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:(0,Nt.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-white",children:a})]}),(0,Nt.jsx)("button",{onClick:r,className:"text-white/80 hover:text-white transition-colors",children:(0,Nt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,Nt.jsx)("div",{className:"px-6 py-6",children:(0,Nt.jsxs)("div",{className:"space-y-4",children:[(0,Nt.jsx)("p",{className:"text-gray-700 text-sm leading-relaxed",children:"Please complete the following required fields to continue:"}),(0,Nt.jsx)("div",{className:"space-y-2",children:Array.isArray(o)?o.map((e,t)=>(0,Nt.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:[(0,Nt.jsx)("div",{className:"flex-shrink-0 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center mt-0.5",children:(0,Nt.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Nt.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),(0,Nt.jsx)("span",{className:"text-sm text-red-700 font-medium",children:e})]},t)):(0,Nt.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:[(0,Nt.jsx)("div",{className:"flex-shrink-0 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center mt-0.5",children:(0,Nt.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Nt.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),(0,Nt.jsx)("span",{className:"text-sm text-red-700 font-medium",children:o})]})})]})}),(0,Nt.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:(0,Nt.jsx)("button",{onClick:r,className:"w-full bg-gradient-to-r from-purple-600 to-purple-700 text-white font-semibold py-3 px-6 rounded-lg hover:from-purple-700 hover:to-purple-800 transition-all duration-200 transform hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2",children:"Got it, I'll fix these"})})]})]}):null},Zo=e=>{let{isOpen:t,onClose:r,onConfirm:o,userEmail:a}=e;if(!t)return null;return(0,Nt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e=>{e.target===e.currentTarget&&r()},children:(0,Nt.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,Nt.jsxs)("div",{className:"flex items-center p-4 border-b border-gray-200",children:[(0,Nt.jsx)("span",{className:"text-2xl mr-3 text-orange-600",children:"\u26a0\ufe0f"}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Confirm Logout"})]}),(0,Nt.jsxs)("div",{className:"p-4",children:[(0,Nt.jsxs)("div",{className:"mb-4",children:[(0,Nt.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Registered email:"}),(0,Nt.jsx)("p",{className:"text-base font-medium text-gray-900 bg-gray-50 px-3 py-2 rounded border",children:a||"Unknown"})]}),(0,Nt.jsx)("p",{className:"text-gray-700",children:"Are you sure you want to logout?"})]}),(0,Nt.jsxs)("div",{className:"flex justify-end space-x-3 p-4 border-t border-gray-200",children:[(0,Nt.jsx)("button",{onClick:()=>{r()},className:"px-4 py-2 text-gray-700 bg-gray-200 hover:bg-gray-300 rounded transition-colors",children:"Cancel"}),(0,Nt.jsx)("button",{onClick:()=>{o(),r()},className:"px-4 py-2 text-white bg-red-600 hover:bg-red-700 rounded transition-colors",children:"Logout"})]})]})})},Ko=e=>{var t;let{user:r,currentMockUser:a,showDropdown:s,onToggle:n,onLogoutClick:i,unreadCount:l=0,dropdownRef:c,className:d=""}=e;const u=Dt(r),h=ue(),[m,p]=(0,o.useState)(!1);return(0,Nt.jsxs)("div",{className:"relative ".concat(d),ref:c,"data-navbar-dropdown":!0,children:[(0,Nt.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Nt.jsx)(Lt,{user:r,currentMockUser:a,className:"hover:opacity-80 transition-opacity duration-200 cursor-pointer",onClick:()=>{u&&h("/artist/me")}}),u&&(0,Nt.jsx)("button",{onClick:n,className:"flex items-center text-gray-700 hover:text-gray-900 transition-colors duration-200 cursor-pointer",children:(0,Nt.jsx)("svg",{className:"w-4 h-4 self-center transition-transform duration-200 ".concat(s?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),u&&s&&(0,Nt.jsxs)("div",{className:"absolute right-0 mt-2 w-40 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200",children:[(0,Nt.jsxs)(gt,{to:"/settings/edit-profile",className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200",children:[(0,Nt.jsxs)("svg",{className:"w-4 h-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Settings"]}),(0,Nt.jsxs)(gt,{to:"/notifications",className:"flex items-center justify-between w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200",children:[(0,Nt.jsxs)("div",{className:"flex items-center",children:[(0,Nt.jsx)("svg",{className:"w-4 h-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),(0,Nt.jsx)("span",{children:"Notifications"})]}),(0,Nt.jsx)(tr,{unreadCount:l})]}),(0,Nt.jsxs)("button",{onClick:()=>{p(!0)},className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 border-t border-gray-100",children:[(0,Nt.jsx)("svg",{className:"w-4 h-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})]}),(0,Nt.jsx)(Zo,{isOpen:m,onClose:()=>{p(!1)},onConfirm:()=>{i()},userEmail:(null===r||void 0===r?void 0:r.email)||(null===r||void 0===r||null===(t=r.user_metadata)||void 0===t?void 0:t.email)})]})},Yo=e=>{const[t,r]=(0,o.useState)(0),{user:a}=Ct(),[s,n]=(0,o.useState)(!1),i=async()=>{try{if(null===a||void 0===a||!a.id)return void r(0);const e=await Hr.l.getUserNotifications(a.id);if(e.success){const t=(e.data||[]).filter(e=>!e.isRead).length;r(t)}else console.error("Error loading unread notifications:",e.error),r(0)}catch(e){console.error("Error loading unread notifications:",e),r(0)}};return(0,o.useEffect)(()=>{let e=!0;(async()=>{e&&await i()})();const t=t=>{var r;const o=null===t||void 0===t||null===(r=t.detail)||void 0===r?void 0:r.userId;console.log("[useNavbarState] Notification change event:",t),console.log("[useNavbarState] Event userId:",o),console.log("[useNavbarState] Current userId:",null===a||void 0===a?void 0:a.id),o&&o!==(null===a||void 0===a?void 0:a.id)||(console.log("[useNavbarState] Reloading unread count..."),e&&setTimeout(()=>{e&&i()},100))};return window.addEventListener("notif:unreadChanged",t),()=>{e=!1,window.removeEventListener("notif:unreadChanged",t)}},[a]),(0,o.useEffect)(()=>{const e=e=>{if(s){e.target.closest("[data-navbar-dropdown]")||n(!1)}};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[s]),{unreadCount:t,currentUser:a,showDropdown:s,setUnreadCount:r,setShowDropdown:n,loadUnreadCount:i,toggleDropdown:()=>n(!s),closeDropdown:()=>n(!1)}},Qo=()=>{const e=ue(),t=le(),{actions:r,state:o}=zo(),a=e=>{const t=o.scrollPositions[e];void 0!==t&&setTimeout(()=>{window.scrollTo({top:t,behavior:"instant"})},100)};return{navigateToWork:function(o){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"gallery";r.setLoading(!0),r.addToHistory({path:t.pathname,from:a}),"/"===t.pathname&&r.saveScrollPosition("/",window.scrollY),setTimeout(()=>{r.setShowDetail(!0),r.setLoading(!1),e("/work/".concat(o),{state:{from:a}}),window.scrollTo(0,0)},300)},navigateToArtist:function(o){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"gallery",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Artists";if(r.setLoading(!0),r.setSelectedArtist(o),r.addToHistory({path:t.pathname,from:a,activeTab:s}),"/"===t.pathname){var n;const e=window.scrollY,t=document.querySelector('[data-artist-id="'.concat(o,'"]')),a=t?{id:o,type:"artist",scrollY:e,elementRect:t.getBoundingClientRect?t.getBoundingClientRect():null,elementIndex:(null===(n=t.dataset)||void 0===n?void 0:n.index)||null}:null;console.log("[Navigation] Saving scroll position:",e),console.log("[Navigation] Saving element info:",a),r.saveScrollPosition("/",e,a)}setTimeout(()=>{r.setLoading(!1);const t="/artist/".concat(o);e(t),window.scrollTo(0,0)},300)},navigateToTAGMe:()=>{r.saveScrollPosition("/tag",window.scrollY),r.addToHistory({from:"tagme",path:"/tagme",activeTab:"Collaborations"}),e("/tagme"),setTimeout(()=>{a("/tagme")},100)},navigateToMilestone:function(o){"/tagme"===t.pathname&&r.saveScrollPosition("/tagme-Milestones",window.scrollY),r.setLoading(!0),r.setSelectedMilestone(o),r.addToHistory({path:t.pathname,from:"tagme",activeTab:"Milestones"}),setTimeout(()=>{r.setShowDetail(!0),r.setLoading(!1);const t="/tagme/milestone/".concat(o.id);e(t,{state:{milestone:o}}),window.scrollTo(0,0)},300)},navigateToCollaboration:o=>{"/tagme"===t.pathname&&r.saveScrollPosition("/tagme-Collaborations",window.scrollY),r.setLoading(!0),r.setSelectedCollaboration(o),r.addToHistory({path:t.pathname,from:"tagme",activeTab:"Collaborations"});const a="/tagme/collaboration/".concat(o.id);e(a,{state:{project:o}}),setTimeout(()=>{r.setLoading(!1)},100)},goBack:()=>{const t=o.navigationHistory.length>0?o.navigationHistory[o.navigationHistory.length-1]:{path:"/",from:"home"};if(console.log("[Navigation] goBack - previousHistory:",t),"artists"===t.from)return console.log("[Navigation] Returning from artists section"),r.setLoading(!0),e("/",{state:{from:"artist-profile",activeTab:"Artists",scrollToGallery:!0}}),void setTimeout(()=>{r.setLoading(!1)},100);"/tagme"===t.path||"/"===t.path?(r.setLoading(!0),e(-1),setTimeout(()=>{r.setLoading(!1)},100)):e(-1)},goHome:()=>{r.resetState(),e("/"),window.scrollTo(0,0)},navigateToGallery:()=>{if(r.addToHistory({path:t.pathname,from:"gallery",fromNavbar:!0,activeTab:"Works"}),"/"===t.pathname){console.log("[Navigation] Already on homepage, scrolling to gallery section");const e=document.querySelectorAll("section");console.log("[Navigation] All sections found:",e.length),e.forEach((e,t)=>{var r;console.log("[Navigation] Section ".concat(t,":"),{className:e.className,dataSection:e.getAttribute("data-section"),textContent:(null===(r=e.textContent)||void 0===r?void 0:r.substring(0,50))+"..."})});const t=document.querySelector('[data-section="gallery"]');if(console.log("[Navigation] Gallery section found:",!!t),t){const e=t.getBoundingClientRect();console.log("[Navigation] Gallery section position:",{top:e.top,bottom:e.bottom,height:e.height});const r=window.pageYOffset+e.top-80;console.log("[Navigation] Scrolling to position:",r),window.scrollTo({top:r,behavior:"smooth"}),console.log("[Navigation] Scrolled to gallery section")}else console.warn("[Navigation] Gallery section not found, scrolling to top"),window.scrollTo(0,0)}else console.log("[Navigation] Navigating to homepage first, then scrolling to gallery"),r.resetState(),e("/"),setTimeout(()=>{const e=document.querySelector('[data-section="gallery"]');if(e){const t=e.getBoundingClientRect(),r=window.pageYOffset+t.top-80;window.scrollTo({top:r,behavior:"smooth"}),console.log("[Navigation] Scrolled to gallery section after navigation")}else console.warn("[Navigation] Gallery section not found after navigation"),window.scrollTo(0,0)},300)},scrollToElement:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64;setTimeout(()=>{const r=document.querySelector(e);if(r){const e=r.getBoundingClientRect(),o=window.pageYOffset+e.top-t;window.scrollTo({top:o,behavior:"instant"})}else window.scrollTo(0,0)},100)},saveCurrentScrollPosition:()=>{const e=window.pageYOffset;r.saveScrollPosition(t.pathname,e)},restoreScrollPosition:a}},$o=e=>{let{state:t,setters:r,user:a}=e;const s=ue(),{navigateToTAGMe:n,goHome:i,navigateToGallery:l,navigateToArtist:c}=Qo(),{logout:d}=Ct(),u=(0,o.useCallback)(e=>{if(e.stopPropagation(),!Dt(a))return void s("/login");const o=e.target,n="IMG"===o.tagName||o.closest("img");"svg"===o.tagName||o.closest("svg");n?(console.log("\ud83d\udd0d [handleDropdownToggle] Avatar clicked, navigating to /me"),s("/me")):r.setShowDropdown(!t.showDropdown)},[a,t.showDropdown,r,s,c]),h=(0,o.useCallback)(()=>{r.setShowDropdown(!1),s("/settings/edit-profile")},[r,s]),m=(0,o.useCallback)(()=>{r.setShowDropdown(!1),s("/notifications")},[r,s]),p=(0,o.useCallback)(()=>{r.setShowDropdown(!1),d(),s("/login")},[r,d,s]),g=(0,o.useCallback)(()=>{s("/upload/guidelines")},[s]),f=(0,o.useCallback)(()=>{n()},[n]),v=(0,o.useCallback)(()=>{l()},[l]);return{handleLogoClick:(0,o.useCallback)(()=>{i()},[i]),handleUploadClick:g,handleTAGMeClick:f,handleGalleryClick:v,handleSearchInput:(0,o.useCallback)(e=>{const t=e.target.value;console.log("Search input:",t)},[]),handleDropdownToggle:u,handleSettingsClick:h,handleNotificationsClick:m,handleLogoutClick:p}},Xo=()=>{const{user:e,loading:t}=Ct(),r=(0,o.useRef)(null),a=Yo(e),s=$o({state:a,setters:{setShowDropdown:a.setShowDropdown,setUnreadCount:a.setUnreadCount},user:e}),n=e||{id:"guest",name:"Guest",avatar:null};return(0,Nt.jsx)("nav",{className:"fixed top-0 left-0 right-0 bg-white shadow-sm z-50",children:(0,Nt.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Nt.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,Nt.jsx)(It,{onClick:s.handleLogoClick}),(0,Nt.jsx)("div",{className:"absolute left-1/2 transform -translate-x-1/2",children:(0,Nt.jsxs)("button",{onClick:s.handleUploadClick,className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-full text-sm font-semibold hover:from-blue-600 hover:to-purple-600 transition-all duration-200 flex items-center shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","aria-label":"Upload Work",children:[(0,Nt.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Upload Work"]})}),(0,Nt.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Nt.jsx)("button",{onClick:s.handleGalleryClick,onMouseDown:e=>{1===e.button&&(e.preventDefault(),window.open("/","_blank"))},className:"bg-tag-blue text-white px-4 py-2 rounded-md text-sm font-semibold hover:bg-blue-700 transition-colors duration-200 min-w-[80px] text-center",children:"Gallery"}),(0,Nt.jsx)(gt,{to:"/tagme",className:"bg-tag-purple text-white px-4 py-2 rounded-md text-sm font-semibold hover:bg-purple-700 transition-colors duration-200 min-w-[80px] text-center",children:"TAGMe"}),!t&&(0,Nt.jsx)(Ko,{user:n,currentUser:a.currentUser,showDropdown:a.showDropdown,onToggle:s.handleDropdownToggle,onSettingsClick:s.handleSettingsClick,onNotificationsClick:s.handleNotificationsClick,onLogoutClick:s.handleLogoutClick,unreadCount:a.unreadCount,dropdownRef:r}),t&&(0,Nt.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-200 animate-pulse"})]})]})})})},ea=()=>{const[e,t]=(0,o.useState)(""),[r,a]=(0,o.useState)(!1),[s,n]=(0,o.useState)(""),[i,l]=(0,o.useState)("");return(0,Nt.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,Nt.jsx)("section",{className:"pt-12 pb-6 bg-white",children:(0,Nt.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:(0,Nt.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-4",children:"About TAG (Tech Art Guide)"})})}),(0,Nt.jsx)("section",{className:"pt-8 pb-16 bg-gradient-to-br from-blue-50 to-blue-100",children:(0,Nt.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,Nt.jsxs)("div",{className:"bg-white rounded-lg p-8 shadow-lg",children:[(0,Nt.jsx)("p",{className:"text-lg leading-relaxed mb-4",children:"TAG is an online platform that connects all students from all majors and departments. Our shared vision is to build a platform\u2014a bridge\u2014that brings together students across the entire college. The reason I wanted to do this is that, in many ways, popular sites like ArtStation, Behance, and LinkedIn are not always friendly to entry-level students. So why not build an online platform that truly belongs to us? A platform where we can showcase our works, discover talents around us, and look for collaboration opportunities. If we do so, we could create our own student-driven art market!"}),(0,Nt.jsx)("p",{className:"text-lg leading-relaxed mb-4",children:"To put it simply:"}),(0,Nt.jsx)("p",{className:"text-lg leading-relaxed mb-0",children:"This platform has two main purposes \u2013 one for increasing job visibility by uploading (TAG), and one for finding collaborators and experiences by doing (TAG Me). One helps build experience; the other helps get hired."})]}),(0,Nt.jsxs)("div",{className:"bg-white rounded-lg p-8 border-l-4 border-purple-500 mt-8 shadow-lg",children:[(0,Nt.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"IMPORTANT"}),(0,Nt.jsxs)("p",{className:"text-lg leading-relaxed text-gray-700",children:["At the current stage, all the"," ",(0,Nt.jsx)("span",{className:"text-blue-600 font-semibold",children:"Gallery features (blue)"})," ","of TAG have been completed, while the"," ",(0,Nt.jsx)("span",{className:"text-purple-600 font-semibold",children:"Collaboration system (purple)"})," ","is still under testing and development. I will do my best to bring those functions to life in the following weeks."]})]})]})}),(0,Nt.jsx)("section",{className:"py-16 bg-white",children:(0,Nt.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,Nt.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"The Story & TAG Vision"}),(0,Nt.jsxs)("div",{className:"space-y-4",children:[(0,Nt.jsx)("p",{className:"text-lg leading-relaxed",children:"Since my very first week in this college, I have been thinking about identifying pain points and solving real demands, because I know this is probably the last chance, as a student, to build something truly meaningful."}),(0,Nt.jsx)("p",{className:"text-lg leading-relaxed",children:"I personally believe that people's behaviors are always driven by the environment. Here, we have thousands of students and over a hundred majors, and each of us carries a unique spirit and passion for creation. Yet if we do not have the chance to see each other's works, to witness these differences, I feel it would be a regret. But if we can see more, connect more, and find more real collaboration opportunities right now, right here\u2014wouldn't that be the most exciting thing?"}),(0,Nt.jsx)("p",{className:"text-lg leading-relaxed",children:"Honestly, this has been extremely challenging for me. I have been planning this for months, doing extensive research, and investing a huge amount of time. Sometimes it took me an entire week and I still could not figure out a single function, and I had to take alternative paths to balance the site's features. Even now, I still feel there are so many features I wish I had time to implement, so many designs I wish I could refine, and so many needs I cannot yet fulfill. The work ahead seems 'infinite'..."}),(0,Nt.jsx)("p",{className:"text-lg leading-relaxed",children:'Here, I sincerely hope you can be one of the people who share this vision with me. If every artist has their own personal spirit, then being a TAG Member means carrying that spirit to the world. In this environment with ten thousand students, the true value of a college is not about "ten thousand techniques," but "ten thousand personalities." Only we can tag ourselves, and let our personalities shape a platform that belongs to us all.'})]}),(0,Nt.jsxs)("div",{className:"text-center mt-24",children:[(0,Nt.jsx)("p",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Excited to have you join TAG."}),(0,Nt.jsxs)("p",{className:"text-base text-gray-600 mt-8",children:["Best,",(0,Nt.jsx)("br",{}),"Rain Wang",(0,Nt.jsx)("br",{}),(0,Nt.jsx)("span",{className:"text-purple-600 font-semibold",children:"Founder of TAG"})]}),(0,Nt.jsxs)("p",{className:"text-base text-gray-600 mt-4",children:["Contact:"," ",(0,Nt.jsx)("a",{href:"mailto:tag@rainwang.art",className:"text-purple-600 underline hover:text-purple-700 transition-colors duration-200",children:"tag@rainwang.art"})]})]})]})}),(0,Nt.jsx)("section",{className:"py-16 bg-gray-50",children:(0,Nt.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,Nt.jsx)("div",{className:"border-t border-gray-300 mb-12"}),(0,Nt.jsxs)("div",{className:"bg-white rounded-lg p-8 shadow-lg",children:[(0,Nt.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2 text-center",children:"Stay Connected with TAG"}),(0,Nt.jsx)("p",{className:"text-base text-gray-600 mb-9 text-center",children:"to get the latest updates and new feature releases."}),(0,Nt.jsxs)("form",{onSubmit:async r=>{r.preventDefault();if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.trim())||e.trim().length>=254)return n("Please enter a valid email address."),void l("error");a(!0),n(""),l("");try{const{data:r,error:o}=await kt.supabase.functions.invoke("subscribe",{body:{email:e.trim(),source:"about_page"}});if(o)throw o;r.success?(n(r.message),l("success"),t("")):(n(r.message||"Subscription failed. Please try again."),l("error"))}catch(o){console.error("Subscription error:",o),n("Something went wrong. Please try again later."),l("error")}finally{a(!1)}},className:"max-w-md mx-auto",children:[s&&(0,Nt.jsx)("div",{className:"mb-4 p-3 rounded-md text-center ".concat("success"===i?"bg-green-100 text-green-700 border border-green-300":"bg-red-100 text-red-700 border border-red-300"),children:s}),(0,Nt.jsx)("div",{className:"mb-4",children:(0,Nt.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),placeholder:"Enter your email",className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",required:!0,disabled:r})}),(0,Nt.jsx)("button",{type:"submit",disabled:r,className:"w-full px-6 py-3 rounded-md font-medium transition-all duration-200 shadow-lg transform ".concat(r?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-purple-700 text-white hover:from-purple-700 hover:to-purple-800 hover:shadow-xl hover:-translate-y-1"),children:r?"Subscribing...":"Subscribe"}),(0,Nt.jsx)("p",{className:"text-sm text-gray-600 mt-3 text-center",children:"We encourage your other emails (e.g. Gmail, Outlook). Note: SCAD.EDU accounts may sometimes filter messages into junk mail. We\u2019ll never share your information."})]})]})]})})]})},ta=e=>{try{console.log("[getCollaborationDataById] Looking for itemId:",e);const t=localStorage.getItem("mock_collaborations");if(console.log("[getCollaborationDataById] Raw stored data:",t),t){const r=JSON.parse(t);console.log("[getCollaborationDataById] Parsed collaborations:",r),console.log("[getCollaborationDataById] Searching for itemId:",e),console.log("[getCollaborationDataById] Available collaborations:",r.map(e=>({id:e.id,title:e.title})));let o=r.find(t=>t.id===e);if(o||(o=r.find(t=>t.id.toString()===e.toString())),o||isNaN(e)||(o=r.find(t=>t.id===parseInt(e))),o)return console.log("[getCollaborationDataById] Found collaboration data:",o),console.log("[getCollaborationDataById] Collaboration roles:",o.roles),o;if(console.warn("[getCollaborationDataById] No collaboration found with id:",e),console.log("[getCollaborationDataById] Available IDs:",r.map(e=>e.id)),r.length>0){const e=r[0];return console.log("[getCollaborationDataById] Using latest collaboration as fallback:",e),console.log("[getCollaborationDataById] Latest collaboration roles:",e.roles),e}}else console.warn("[getCollaborationDataById] No data in localStorage");return console.warn("[getCollaborationDataById] No collaboration data found in localStorage for itemId:",e),null}catch(t){return console.error("[getCollaborationDataById] Error getting collaboration data:",t),null}},ra=e=>{let{favorite:t,isOwnProfile:a=!1,onRemove:s}=e;const n=ue(),[i,l]=(0,o.useState)(null),[c,d]=(0,o.useState)(null),[u,h]=(0,o.useState)(!0);(0,o.useEffect)(()=>{(async()=>{try{console.log("[FavoriteCollabCard] Loading data for itemId:",t.item_id);const e=ta(t.item_id);if(d(e),e){const e=await(async e=>{const t=ta(e);if(!t)return console.warn("[Favorites] No collaboration data found for itemId:",e),null;if(console.log("[Favorites] Getting image for collaboration:",t),t.posterPreview)try{const e=await Promise.resolve().then(r.bind(r,337)),o=await e.default.getImageUrl(t.posterPreview);return console.log("[Favorites] Got image URL from posterPreview:",o),o}catch(o){console.warn("[Favorites] Failed to get collaboration image from posterPreview: ".concat(t.posterPreview),o)}if(t.heroImage)try{const e=await Promise.resolve().then(r.bind(r,337)),o=await e.default.getImageUrl(t.heroImage);return console.log("[Favorites] Got image URL from heroImage:",o),o}catch(o){console.warn("[Favorites] Failed to get collaboration image from heroImage: ".concat(t.heroImage),o)}return t.image?(console.log("[Favorites] Using fallback image:",t.image),t.image):(console.warn("[Favorites] No image found for collaboration:",e),null)})(t.item_id);l(e),console.log("[FavoriteCollabCard] Loaded image URL:",e)}else console.warn("[FavoriteCollabCard] No collaboration data found for itemId:",t.item_id)}catch(e){console.error("[FavoriteCollabCard] Error loading collaboration data:",e)}finally{h(!1)}})()},[t.item_id]);return u?(0,Nt.jsx)("div",{className:"relative aspect-[4/3] bg-gray-200 rounded-lg shadow-sm overflow-hidden",children:(0,Nt.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,Nt.jsx)("div",{className:"text-gray-500",children:"Loading..."})})}):(0,Nt.jsxs)("div",{className:"relative aspect-[4/3] bg-tag-purple rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 overflow-hidden cursor-pointer",onClick:()=>{c?n("/tagme/collaboration/".concat(t.item_id),{state:{project:c}}):(console.warn("[FavoriteCollabCard] No collaboration data available for navigation"),n("/tagme/collaboration/".concat(t.item_id)))},children:[i?(0,Nt.jsx)("img",{src:i,alt:(null===c||void 0===c?void 0:c.title)||"Collaboration",className:"w-full h-full object-cover"}):(0,Nt.jsx)("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:(0,Nt.jsx)("div",{className:"text-gray-500 text-sm",children:"No Image"})}),(0,Nt.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-2 bg-tag-purple"}),a&&(0,Nt.jsx)("button",{onClick:e=>{e.stopPropagation(),s()},className:"absolute top-2 right-2 w-8 h-8 bg-white/80 hover:bg-white rounded-full flex items-center justify-center transition-colors duration-200",title:"Remove from favorites",children:(0,Nt.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},oa=()=>{ue();const e="No favorites yet",t="Start Exploring";return(0,Nt.jsxs)("div",{className:"text-center py-12",children:[(0,Nt.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Nt.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-6",children:e}),(0,Nt.jsx)(gt,{to:"/",className:"inline-block px-6 py-3 bg-tag-blue text-white rounded-lg hover:bg-blue-700 transition-colors duration-200",children:t})]})},aa=()=>(0,Nt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,t)=>(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden animate-pulse",children:[(0,Nt.jsx)("div",{className:"w-full h-48 bg-gray-200"}),(0,Nt.jsxs)("div",{className:"p-4",children:[(0,Nt.jsx)("div",{className:"h-5 bg-gray-200 rounded mb-2"}),(0,Nt.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-3"}),(0,Nt.jsxs)("div",{className:"flex items-center mb-3",children:[(0,Nt.jsx)("div",{className:"w-6 h-6 bg-gray-200 rounded-full mr-2"}),(0,Nt.jsx)("div",{className:"h-4 bg-gray-200 rounded w-24"})]}),(0,Nt.jsxs)("div",{className:"space-y-2 mb-3",children:[(0,Nt.jsx)("div",{className:"h-3 bg-gray-200 rounded"}),(0,Nt.jsx)("div",{className:"h-3 bg-gray-200 rounded w-5/6"})]}),(0,Nt.jsxs)("div",{className:"flex gap-1 mb-3",children:[(0,Nt.jsx)("div",{className:"w-12 h-6 bg-gray-200 rounded-full"}),(0,Nt.jsx)("div",{className:"w-16 h-6 bg-gray-200 rounded-full"}),(0,Nt.jsx)("div",{className:"w-14 h-6 bg-gray-200 rounded-full"})]}),(0,Nt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Nt.jsxs)("div",{className:"flex space-x-4",children:[(0,Nt.jsx)("div",{className:"w-12 h-4 bg-gray-200 rounded"}),(0,Nt.jsx)("div",{className:"w-16 h-4 bg-gray-200 rounded"})]}),(0,Nt.jsx)("div",{className:"w-16 h-8 bg-gray-200 rounded"})]})]})]},t))}),sa=()=>{const[e,t]=(0,o.useState)({}),[r,a]=(0,o.useState)(!0),[s,n]=(0,o.useState)(null);(0,o.useEffect)(()=>{(async()=>{try{a(!0),n(null);const e=await(0,lr.S5)();if(e.success){const r={},o=e.data.map(async e=>{if(e&&e.id){var t;let r="";const o=e.thumbnailPath||e.imagePaths&&e.imagePaths[0];if(o)try{const e=await(0,lr.getPortfolioImageUrl)(o);e.success&&(r=e.data)}catch(s){console.warn("[useWorkData] Failed to get image URL for:",o,s)}return{id:e.id,title:e.title||"Untitled",artist:(null===(t=e.profiles)||void 0===t?void 0:t.full_name)||"Unknown Artist",image:r,category:e.category||"",tags:e.tags||[],description:e.description||"",createdAt:e.createdAt||(new Date).toISOString()}}return null});(await Promise.all(o)).forEach(e=>{e&&(r[e.id]=e)}),t(r),console.log("[useWorkData] Loaded works data:",r)}else n(e.error||"Failed to load works data"),console.error("[useWorkData] Failed to load works:",e.error)}catch(s){console.error("[useWorkData] Error loading works:",s),n(s.message||"Failed to load works data")}finally{a(!1)}})()},[]);return{worksData:e,loading:r,error:s,getWorkById:t=>{if(!t)return null;const r=e[t];if(r)return console.log("[useWorkData] Found real work data for:",t,r),r;const o=[{id:1,title:"Explosive Energy",artist:"Alex Chen",image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=400&fit=crop",category:"Visual Effects"},{id:2,title:"Dark Knight",artist:"Sarah Kim",image:"https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400&h=400&fit=crop",category:"Game Design"},{id:3,title:"Mobile UI Design",artist:"Mike Johnson",image:"https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=400&h=400&fit=crop",category:"UI/UX"},{id:4,title:"Enchanted Forest",artist:"Emma Wilson",image:"https://images.unsplash.com/photo-1489599435384-d5f1a131c7dc?w=400&h=400&fit=crop",category:"Illustration"},{id:5,title:"Digital Sculpture",artist:"David Lee",image:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=400&fit=crop",category:"Fine Art"},{id:6,title:"Brand Identity",artist:"Lisa Wang",image:"https://images.unsplash.com/photo-1541961017774-22349e4a1262?w=400&h=400&fit=crop",category:"Graphic Design"}],a=o.find(e=>e.id.toString()===t);if(a)return console.log("[useWorkData] Found default work for simple ID:",t,a),a;if(t&&t.startsWith("mock_")){const e=o[Math.abs(t.split("_")[1]?parseInt(t.split("_")[1]):0)%o.length],r={id:t,title:e.title,artist:e.artist,image:e.image,category:e.category};return console.log("[useWorkData] Created mock work for complex ID:",t,r),r}return console.warn("[useWorkData] No work found for itemId:",t),null}}},na=e=>{var t;let{favorite:r,isOwnProfile:o=!1,onRemove:a}=e;ue();const{getWorkById:s,loading:n}=sa(),i=s(r.item_id);return(0,Nt.jsxs)("div",{className:"relative aspect-[4/3] bg-tag-blue rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 overflow-hidden",children:[(0,Nt.jsx)(gt,{to:"/work/".concat(r.item_id),className:"block w-full h-full",children:(0,Nt.jsx)("img",{src:(null===i||void 0===i||null===(t=i.image)||void 0===t?void 0:t.url)||(null===i||void 0===i?void 0:i.image)||"/assets/placeholder.svg",alt:(null===i||void 0===i?void 0:i.title)||"Work",className:"w-full h-full object-cover",onError:e=>{console.error("[FavoriteWorkCard] Image failed to load:",e.target.src),e.target.src="/assets/placeholder.svg"},onLoad:()=>console.log("[FavoriteWorkCard] Image loaded successfully:",null===i||void 0===i?void 0:i.image)})}),(0,Nt.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-2 bg-tag-blue"}),o&&(0,Nt.jsx)("button",{onClick:e=>{e.stopPropagation(),a()},className:"absolute top-2 right-2 w-8 h-8 bg-white/80 hover:bg-white rounded-full flex items-center justify-center transition-colors duration-200",title:"Remove from favorites",children:(0,Nt.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},ia=e=>{let{isOwnProfile:t=!1,viewedUserId:r=null}=e;const{favorites:a,loading:s,error:i,pagination:l,handleLoadMore:c,handleRemoveFavorite:d}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const[t,r]=(0,o.useState)([]),[a,s]=(0,o.useState)(!0),[i,l]=(0,o.useState)(null),[c,d]=(0,o.useState)({cursor:null,hasMore:!1,total:0}),u=(0,o.useCallback)(async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{s(!0),l(null);let o=e;if(!o){const e=(0,Rr.HW)();if(console.log("[useFavorites] \u5f53\u524d\u7528\u6237:",e),null===e||void 0===e||!e.id)return console.warn("[useFavorites] \u7528\u6237\u672a\u767b\u5f55\uff0c\u65e0\u6cd5\u52a0\u8f7d\u6536\u85cf"),r([]),void d({cursor:null,hasMore:!1,total:0});o=e.id}console.log("[useFavorites] \u83b7\u53d6\u6536\u85cf\u7684\u7528\u6237ID:",o);const a={userId:o,type:"all",cursor:t?null:c.cursor,limit:12};console.log("[useFavorites] \u52a0\u8f7d\u6536\u85cf\uff0c\u53c2\u6570:",a);const n=await zr.getFavorites(a);if(n.success){const e=n.data.items;console.log("[useFavorites] \u52a0\u8f7d\u5230\u7684\u6536\u85cf:",e),console.log("[useFavorites] \u6536\u85cf\u7c7b\u578b\u7edf\u8ba1:",e.reduce((e,t)=>(e[t.item_type]=(e[t.item_type]||0)+1,e),{})),r(t?e:t=>[...t,...e]),d({cursor:n.data.pagination.cursor,hasMore:n.data.pagination.hasMore,total:n.data.pagination.total}),console.log("[useFavorites] \u5206\u9875\u4fe1\u606f:",n.data.pagination)}else console.error("[useFavorites] \u52a0\u8f7d\u6536\u85cf\u5931\u8d25:",n.error),l("Failed to load favorites")}catch(o){console.error("[useFavorites] \u52a0\u8f7d\u6536\u85cf\u65f6\u51fa\u9519:",o),l(o.message||"Failed to load favorites")}finally{s(!1)}},[]);(0,o.useEffect)(()=>{console.log("[useFavorites] \u521d\u59cb\u5316\u52a0\u8f7d\u6536\u85cf..."),u(!0)},[u,e]);const h=(0,o.useCallback)(()=>{!a&&c.hasMore&&(console.log("[useFavorites] \u52a0\u8f7d\u66f4\u591a\u6536\u85cf..."),u(!1))},[a,c.hasMore,u]),m=(0,o.useCallback)(e=>{console.log("[useFavorites] \u79fb\u9664\u6536\u85cf:",e),r(t=>t.filter(t=>t.id!==e)),d(e=>(0,n.A)((0,n.A)({},e),{},{total:Math.max(0,e.total-1)}))},[]);return{favorites:t,loading:a,error:i,pagination:c,handleLoadMore:h,handleRemoveFavorite:m,refresh:()=>u(!0)}}(r),{handleRemoveFavorite:u}={handleRemoveFavorite:(0,o.useCallback)(async e=>{try{const t=await zr.removeFavoriteById(e);return t.success?(console.log("Favorite removed successfully"),!0):(console.error("Failed to remove favorite:",t.error),!1)}catch(i){return console.error("Error removing favorite:",i),!1}},[]),batchCheckFavoriteStatus:(0,o.useCallback)(async e=>{try{const t=e.map(e=>({itemType:e.type,itemId:e.id})),r=await zr.batchCheckFavoriteStatus(t);return r.success?r.data:(console.error("Failed to check favorite status:",r.error),{})}catch(i){return console.error("Error checking favorite status:",i),{}}},[])},{loading:h}=sa(),m=e=>"work"===e.item_type?(0,Nt.jsx)(na,{favorite:e,isOwnProfile:t,onRemove:async()=>{await u(e.id)&&d(e.id)}},e.id):"collaboration"===e.item_type?(0,Nt.jsx)(ra,{favorite:e,isOwnProfile:t,onRemove:async()=>{await u(e.id)&&d(e.id)}},e.id):null;return(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,Nt.jsx)("div",{className:"mb-6",children:(0,Nt.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Favorites"})}),s||h?(0,Nt.jsx)(aa,{}):i?(0,Nt.jsxs)("div",{className:"text-center py-8",children:[(0,Nt.jsxs)("p",{className:"text-red-600",children:["Failed to load favorites: ",i]}),(0,Nt.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-tag-blue text-white rounded-lg hover:bg-blue-700",children:"Retry"})]}):0===a.length?(0,Nt.jsx)(oa,{}):(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(m)}),l.hasMore&&(0,Nt.jsx)("div",{className:"text-center mt-8",children:(0,Nt.jsx)("button",{onClick:c,disabled:s,className:"px-6 py-3 bg-tag-blue text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Loading...":"Load More"})})]})]})};var la=r(405);const ca=new Map,da=e=>{if(!Array.isArray(e)||0===e.length)return void console.warn("[invalidate] Invalid keys provided:",e);const[t,r]=e;if("artist"===t&&r){const e="artist_".concat(r);ca.has(e)&&(ca.delete(e),console.log("[invalidate] Cleared cache for artist: ".concat(r)))}else if("artist"===t){for(const[e]of ca)e.startsWith("artist_")&&ca.delete(e);console.log("[invalidate] Cleared all artist cache")}},ua=e=>{const t={Photographer:"\ud83d\udcf7","Visual Designer":"\ud83c\udfa8",Illustrator:"\ud83c\udfa8","Concept Artist":"\ud83c\udfad","Graphic Designer":"\ud83c\udfa8","Digital Artist":"\ud83c\udfa8","3D Artist":"\ud83c\udfad",Animator:"\ud83c\udfac",default:"\ud83c\udfa8"};return t[e]||t.default},ha=async e=>{try{var t;if(!e)return console.warn("[getArtistById] No userId provided"),null;const a="artist_".concat(e);if(ca.has(a))return console.log("[getArtistById] Using cached data for: ".concat(e)),ca.get(a);const s=await(0,la.getProfile)(e);let i=null,l=null;if(s.success&&s.data)i=s.data,console.log("[getArtistById] Found Supabase profile for: ".concat(e));else{const t={1:"alex",2:"alice",3:"bryan"}[e]||e;l=ir.o1[t],l||(console.warn("[getArtistById] No profile found for ID: ".concat(e,", creating default profile")),i=pa(e))}let c=null;try{c=await(0,Pt.getUnifiedAvatar)(e),console.log("[getArtistById] Using unified avatar service for:",e,c?"found":"not found")}catch(o){var r;console.warn("[getArtistById] Failed to get unified avatar:",o),c=(null===(r=l)||void 0===r?void 0:r.avatar)||null}const d=i?(0,n.A)((0,n.A)({},i),{},{avatar:c}):null,u={following:0,followers:0};try{const[t,r]=await Promise.all([(0,Mr.getFollowers)(e),(0,Mr.getFollowing)(e)]);t.success&&(u.followers=t.data.length),r.success&&(u.following=r.data.length),console.log("[getArtistById] Follow stats for ".concat(e,":"),u)}catch(o){console.warn("[getArtistById] Failed to get follow stats for ".concat(e,":"),o)}const h=function(e){var t,r,o,a;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return console.warn("[selectArtistView] No profile provided"),null;const i=null!==s&&void 0!==s&&s.portfolio?s.portfolio.map((e,t)=>({id:e.id,title:e.title,image:e.thumb,category:e.category})):[];return{id:e.id||"",name:e.fullName||e.name||"Unknown Artist",title:e.title||e.role||"Artist",discipline:e.title||e.role||"Artist",roleIcon:ua(e.title||e.role),avatar:e.avatar||(null===s||void 0===s?void 0:s.avatar)||"",bio:e.bio||(null===s||void 0===s?void 0:s.bio)||"",school:e.school||(null===s||void 0===s?void 0:s.school)||"",pronouns:e.pronouns||(null===s||void 0===s?void 0:s.pronouns)||"",majors:Array.isArray(e.majors)?e.majors:[],minors:Array.isArray(e.minors)?e.minors:[],skills:Array.isArray(e.skills)?e.skills:[],works:i,stats:{following:(null===n||void 0===n?void 0:n.following)||0,followers:(null===n||void 0===n?void 0:n.followers)||0,collaborations:12},socialLinks:{instagram:(null===(t=e.socialLinks)||void 0===t?void 0:t.instagram)||"",portfolio:(null===(r=e.socialLinks)||void 0===r?void 0:r.portfolio)||"",discord:(null===(o=e.socialLinks)||void 0===o?void 0:o.discord)||"",otherLinks:(null===(a=e.socialLinks)||void 0===a?void 0:a.otherLinks)||[]},updatedAt:e.updatedAt||(new Date).toISOString()}}(d,l,u);return h?(console.log("[getArtistById] Artist view socialLinks:",{userId:e,profileSocialLinks:null===d||void 0===d?void 0:d.socialLinks,mockUserSocialLinks:null===(t=l)||void 0===t?void 0:t.socialLinks,finalSocialLinks:h.socialLinks}),ca.set(a,h),console.log("[getArtistById] Cached data for: ".concat(e)),h):(console.warn("[getArtistById] Failed to create artist view for ".concat(e)),null)}catch(o){return console.error("[getArtistById] Error getting artist data for ".concat(e,":"),o),null}},ma=e=>{const t="px-4 py-2 rounded-md font-medium transition-colors duration-200";return"".concat(t,null===e?" bg-gray-300 text-gray-500 cursor-not-allowed":e?" bg-gray-200 text-gray-700 hover:bg-gray-300":" bg-blue-500 text-white hover:bg-blue-600")},pa=e=>({id:e,fullName:"Artist",title:"Artist",school:"",pronouns:"",majors:[],minors:[],skills:[],bio:"",socialLinks:{instagram:"",portfolio:"",discord:"",otherLinks:[]},avatar:"",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}),ga=e=>{var t,r;let{artist:a,artworks:s=[],isFollowing:n,followersCount:i,followingCount:l,isOwnProfile:c,onBackClick:d,onEditProfileClick:u,onPreviewAsVisitorClick:h,onBackToOwnerViewClick:m,toggleFollow:p,onFollowersClick:g,onFollowingClick:f,from:v="gallery",className:x=""}=e;const[b,y]=(0,o.useState)(null),[w,j]=(0,o.useState)(!0);(0,o.useEffect)(()=>{(async()=>{if(null!==a&&void 0!==a&&a.id)try{j(!0);const e=await(0,Pt.getUnifiedAvatar)(a.id);y(e)}catch(e){console.error("[ArtistHeader] Failed to load avatar:",e),y(a.avatar)}finally{j(!1)}})()},[null===a||void 0===a?void 0:a.id,null===a||void 0===a?void 0:a.avatar]);return(0,Nt.jsxs)("div",{className:"".concat(x),children:[(0,Nt.jsx)("div",{className:"border-b border-gray-200",children:(0,Nt.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Nt.jsxs)("button",{onClick:d,className:"flex items-center py-4 text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),(()=>{switch(v){case"artists":return"Back to Artists";case"gallery":default:return"Back to Gallery";case"tagme":return"Back to TAGMe";case"search":return"Back to Search"}})()]})})}),(0,Nt.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-8",children:(0,Nt.jsx)("div",{className:"pb-8 border-b border-gray-200",children:(0,Nt.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-start",children:[(0,Nt.jsxs)("div",{className:"flex items-center mb-6 lg:mb-0",children:[w?(0,Nt.jsx)("div",{className:"w-20 h-20 rounded-full mr-6 bg-gray-200 animate-pulse"}):b?(0,Nt.jsx)("img",{src:b,alt:a.name,className:"w-20 h-20 rounded-full mr-6 object-cover",onError:()=>{console.warn("[ArtistHeader] Avatar image failed to load, using fallback"),y(a.avatar)}}):(0,Nt.jsx)("div",{className:"w-20 h-20 rounded-full mr-6 bg-gray-200 flex items-center justify-center",children:(0,Nt.jsx)("span",{className:"text-gray-500 text-2xl font-bold",children:(null===(t=a.name)||void 0===t||null===(r=t.charAt(0))||void 0===r?void 0:r.toUpperCase())||"?"})}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:a.name}),(0,Nt.jsx)("div",{className:"flex items-center gap-3",children:(0,Nt.jsx)("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:a.title})})]})]}),(0,Nt.jsxs)("div",{className:"flex items-center gap-8 mb-6 lg:mb-0 lg:ml-16",children:[(0,Nt.jsxs)("div",{className:"text-left",children:[(0,Nt.jsx)("div",{className:"text-xl font-bold text-gray-900",children:s.length}),(0,Nt.jsx)("div",{className:"text-sm text-gray-600",children:"Works"})]}),(0,Nt.jsxs)("div",{className:"text-left cursor-pointer hover:opacity-80 transition-opacity duration-200",onClick:f,role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),f())},children:[(0,Nt.jsx)("div",{className:"text-xl font-bold text-gray-900",children:l||0}),(0,Nt.jsx)("div",{className:"text-sm text-gray-600",children:"Following"})]}),(0,Nt.jsxs)("div",{className:"text-left cursor-pointer hover:opacity-80 transition-opacity duration-200",onClick:g,role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),g())},children:[(0,Nt.jsx)("div",{className:"text-xl font-bold text-gray-900",children:i}),(0,Nt.jsx)("div",{className:"text-sm text-gray-600",children:"Followers"})]})]}),(0,Nt.jsx)("div",{className:"flex items-center gap-3 lg:ml-auto",children:c?(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsxs)("button",{onClick:h,className:"px-4 py-2 rounded-md font-medium transition-colors duration-200 bg-blue-500 text-white hover:bg-blue-600 flex items-center gap-2",children:[(0,Nt.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Preview as Visitor"]}),(0,Nt.jsxs)("button",{onClick:u,className:"px-4 py-2 rounded-md font-medium transition-colors duration-200 bg-purple-500 text-white hover:bg-purple-600 flex items-center gap-2",children:[(0,Nt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit Profile"]})]}):m?(0,Nt.jsxs)("button",{onClick:m,className:"px-4 py-2 rounded-md font-medium transition-colors duration-200 bg-gray-500 text-white hover:bg-gray-600 flex items-center gap-2",children:[(0,Nt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Owner View"]}):(0,Nt.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),p()},className:ma(n),disabled:null===n,children:null===n?"Loading...":n?"Following":"Follow"})})]})})})]})},fa=e=>{if(!e||!e.trim())return!1;if("#"===e||"http://#"===e||"https://#"===e)return!1;try{const t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch(t){return!1}},va=(e,t)=>{fa(t)?window.open(t,"_blank","noopener,noreferrer"):console.warn("Invalid ".concat(e," URL:"),t)},xa=e=>{var t,r,o,a,s;let{artist:n,className:i=""}=e;return console.log("[ArtistSidebar] Artist data:",{artistId:null===n||void 0===n?void 0:n.id,artistName:null===n||void 0===n?void 0:n.name,socialLinks:null===n||void 0===n?void 0:n.socialLinks}),(0,Nt.jsx)("div",{className:"lg:w-80 flex-shrink-0 ".concat(i),children:(0,Nt.jsxs)("div",{className:"pb-8",children:[(0,Nt.jsxs)("div",{className:"mb-6",children:[n.school&&(0,Nt.jsxs)("div",{className:"mb-3",children:[(0,Nt.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"School:"}),(0,Nt.jsx)("p",{className:"text-gray-600 mt-1",children:n.school})]}),n.pronouns&&(0,Nt.jsxs)("div",{className:"mb-3",children:[(0,Nt.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Pronouns:"}),(0,Nt.jsx)("p",{className:"text-gray-600 mt-1",children:n.pronouns})]}),(n.majors&&n.majors.length>0||n.minors&&n.minors.length>0)&&(0,Nt.jsxs)("div",{className:"mb-3",children:[(0,Nt.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Major & Minor:"}),(0,Nt.jsxs)("div",{className:"flex flex-wrap gap-1 mt-1",children:[null===(t=n.majors)||void 0===t?void 0:t.map((e,t)=>(0,Nt.jsx)("span",{className:"bg-purple-100 text-purple-700 text-xs px-2 py-1 rounded-full",children:e},"major-".concat(t))),null===(r=n.minors)||void 0===r?void 0:r.map((e,t)=>(0,Nt.jsx)("span",{className:"bg-purple-100 text-purple-700 text-xs px-2 py-1 rounded-full",children:e},"minor-".concat(t)))]})]})]}),(0,Nt.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"About"}),(0,Nt.jsx)("p",{className:"text-gray-600 mb-4",children:n.bio}),(0,Nt.jsx)("h4",{className:"font-bold text-gray-900 mb-2",children:"Skills"}),(0,Nt.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:n.skills.map((e,t)=>(0,Nt.jsx)("span",{className:"bg-gray-100 text-gray-700 text-sm px-3 py-1 rounded-full",children:e},t))}),(0,Nt.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"Connect"}),(0,Nt.jsxs)("div",{className:"flex gap-3",children:[(null===(o=n.socialLinks)||void 0===o?void 0:o.discord)&&fa(n.socialLinks.discord)&&(0,Nt.jsx)("button",{onClick:()=>va("discord",n.socialLinks.discord),className:"text-gray-600 hover:text-gray-900 transition-colors duration-200",title:"Discord",children:(0,Nt.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.019 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1568 2.4189Z"})})}),(null===(a=n.socialLinks)||void 0===a?void 0:a.instagram)&&fa(n.socialLinks.instagram)&&(0,Nt.jsx)("button",{onClick:()=>va("instagram",n.socialLinks.instagram),className:"text-gray-600 hover:text-gray-900 transition-colors duration-200",title:"Instagram",children:(0,Nt.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),(null===(s=n.socialLinks)||void 0===s?void 0:s.portfolio)&&fa(n.socialLinks.portfolio)&&(0,Nt.jsx)("button",{onClick:()=>va("portfolio",n.socialLinks.portfolio),className:"text-gray-600 hover:text-gray-900 transition-colors duration-200",title:"Portfolio",children:(0,Nt.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})})})]}),n.socialLinks.otherLinks&&n.socialLinks.otherLinks.length>0&&n.socialLinks.otherLinks.some(e=>fa(e.url))&&(0,Nt.jsxs)("div",{className:"mt-4",children:[(0,Nt.jsx)("h4",{className:"font-bold text-gray-900 mb-2",children:"Other Websites"}),(0,Nt.jsx)("div",{className:"space-y-2",children:n.socialLinks.otherLinks.filter(e=>fa(e.url)).map(e=>(0,Nt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Nt.jsx)("div",{className:"flex-shrink-0",children:(0,Nt.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})})}),(0,Nt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Nt.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.label}),(0,Nt.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-800 transition-colors duration-200",children:e.url})]})]},e.id))})]})]})})},ba=e=>{let{artworks:t,onArtworkClick:r,className:a="",isOwnProfile:s=!1}=e;const n=ue(),[i,l]=(0,o.useState)(null);return(0,Nt.jsxs)("div",{className:"pb-8 border-b border-gray-200 bg-blue-50 rounded-lg p-6 ".concat(a),children:[(0,Nt.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-6",children:"Portfolio"}),(0,Nt.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(e=>(0,Nt.jsx)("div",{onClick:()=>r(e),className:"group cursor-pointer relative",onMouseEnter:()=>l(e.id),onMouseLeave:()=>l(null),children:(0,Nt.jsxs)("div",{className:"relative overflow-hidden rounded-lg",children:[(0,Nt.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),s&&i===e.id&&(0,Nt.jsx)("button",{onClick:t=>(e=>{e.stopPropagation(),n("/settings/edit-profile")})(t,e.id),className:"absolute top-2 right-2 p-2 bg-white bg-opacity-90 hover:bg-opacity-100 text-gray-600 hover:text-blue-600 rounded-full transition-all duration-200 shadow-md z-10",title:"Edit Profile",children:(0,Nt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,Nt.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-300 flex items-end",children:(0,Nt.jsx)("div",{className:"p-3 w-full transform translate-y-full group-hover:translate-y-0 transition-transform duration-300",children:(0,Nt.jsx)("h4",{className:"text-white font-medium text-sm",children:e.title})})})]})},e.id))})]})},ya=e=>{let{post:t,className:r="",onDelete:a}=e;const[s,n]=(0,o.useState)(!1),i=t.isDraft;return(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden ".concat(r),children:[(0,Nt.jsxs)("div",{className:"relative",children:[(0,Nt.jsx)("img",{src:t.image||"/assets/placeholder.svg",alt:t.title,className:"w-full h-48 object-cover"}),i&&a&&(0,Nt.jsx)("button",{onClick:e=>{e.stopPropagation(),n(!0)},className:"absolute top-3 right-3 p-2 bg-white bg-opacity-90 hover:bg-opacity-100 rounded-full shadow-sm transition-all duration-200 hover:scale-110",title:"Delete draft",children:(0,Nt.jsx)("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Nt.jsxs)("div",{className:"p-4",children:[(0,Nt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Nt.jsx)("h4",{className:"font-medium text-gray-900",children:t.title}),i&&(0,Nt.jsx)("span",{className:"px-2 py-1 text-xs bg-orange-100 text-orange-600 rounded-full",children:"Draft"})]}),(0,Nt.jsx)("div",{className:"flex items-center gap-2 mb-3",children:(0,Nt.jsx)("span",{className:"text-sm text-gray-500",children:t.date})}),t.tags&&t.tags.length>0&&(0,Nt.jsxs)("div",{className:"flex flex-wrap gap-1",children:[t.tags.slice(0,3).map((e,t)=>(0,Nt.jsxs)("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded-full",children:["#",e]},t)),t.tags.length>3&&(0,Nt.jsxs)("span",{className:"px-2 py-1 text-xs text-gray-500",children:["+",t.tags.length-3," more"]})]})]}),s&&(0,Nt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e=>{e.stopPropagation()},children:(0,Nt.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-sm mx-4",children:[(0,Nt.jsxs)("div",{className:"flex items-center mb-4",children:[(0,Nt.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center mr-3",children:(0,Nt.jsx)("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Draft"})]}),(0,Nt.jsxs)("p",{className:"text-gray-600 mb-6",children:['Are you sure you want to delete "',t.title,'"? This action cannot be undone.']}),(0,Nt.jsxs)("div",{className:"flex gap-3",children:[(0,Nt.jsx)("button",{onClick:e=>{e.stopPropagation(),n(!1)},className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors duration-200",children:"Cancel"}),(0,Nt.jsx)("button",{onClick:e=>{e.stopPropagation(),a&&a(t.id),n(!1)},className:"flex-1 px-4 py-2 text-white bg-red-500 hover:bg-red-600 rounded-md transition-colors duration-200",children:"Delete"})]})]})})]})},wa=e=>{let{activeTab:t,onTabChange:r,className:o=""}=e;return(0,Nt.jsx)("div",{className:"bg-gray-100 rounded-lg p-1 ".concat(o),children:(0,Nt.jsxs)("div",{className:"flex bg-white rounded-md",children:[(0,Nt.jsx)("button",{onClick:()=>r("published"),className:"flex-1 py-2 px-4 text-sm font-bold rounded-md transition-colors duration-200 ".concat("published"===t?"bg-tag-purple text-white":"text-gray-700 hover:text-gray-900"),children:"Published"}),(0,Nt.jsx)("button",{onClick:()=>r("drafts"),className:"flex-1 py-2 px-4 text-sm font-bold rounded-md transition-colors duration-200 ".concat("drafts"===t?"bg-tag-purple text-white":"text-gray-700 hover:text-gray-900"),children:"Drafts"})]})})},ja=e=>{let{collaborations:t,expandedCardId:r,onCollaborationToggle:a,className:s="",currentUserId:n="alice",viewedUserId:i=null}=e;const l=ue(),[c,d]=(0,o.useState)("published"),[u,h]=(0,o.useState)([]),[m,p]=(0,o.useState)(!1),[g,f]=(0,o.useState)(!1),[v,x]=(0,o.useState)([]),b=(0,o.useCallback)(async()=>{try{const e=localStorage.getItem("mock_collaborations");if(!e)return console.log("[CollaborationsSection] No collaborations found in storage"),void x([]);const t=JSON.parse(e);console.log("[CollaborationsSection] Found collaborations:",t.length);let r=i;if(!r){if(!n)return console.warn("[CollaborationsSection] No currentUserId provided"),void x([]);r=n}console.log("[CollaborationsSection] \u83b7\u53d6\u534f\u4f5c\u9879\u76ee\u7684\u7528\u6237ID:",r);const o=t.filter(e=>e.author&&e.author.id===r);console.log("[CollaborationsSection] User collaborations:",o.length);const a=o.map(e=>{const t=new Date(e.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});let r="";r=e.heroImage?e.heroImage.startsWith("collaboration_")?"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop":e.heroImage:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop";const o=e.projectType?[e.projectType]:["Collaboration"];return{id:e.id,title:e.title,date:t,image:r,tags:o}});x(a)}catch(e){console.error("[CollaborationsSection] Error loading published collaborations:",e),x([])}},[n,i]);(0,o.useEffect)(()=>{b()},[b]),(0,o.useEffect)(()=>{const e=()=>{console.log("[CollaborationsSection] Collaboration created event received, refreshing published list"),b()};return window.addEventListener("collaboration:created",e),()=>{window.removeEventListener("collaboration:created",e)}},[b]);const y=async()=>{try{if(p(!0),!n||!i||n!==i)return console.log("[CollaborationsSection] Not owner page, skipping drafts load"),void h([]);const e=await Gr.getDrafts({type:"collaboration"});if(e.success){const t=e.data.items.map(e=>({id:e.id,title:e.title||"Untitled Draft",date:new Date(e.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),image:e.image||"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop",tags:e.tags||[],isDraft:!0,draftData:e}));h(t)}}catch(e){console.error("Failed to load drafts:",e)}finally{p(!1)}};(0,o.useEffect)(()=>{y()},[n,i]),(0,o.useEffect)(()=>{const e=()=>{console.log("Draft saved event received, refreshing drafts list"),y()};return window.addEventListener("draft:saved",e),()=>{window.removeEventListener("draft:saved",e)}},[]);const w=async e=>{try{console.log("Deleting draft:",e);const t=await Gr.deleteDraft(e);if(t.success){console.log("Draft deleted successfully");const e=async()=>{try{p(!0);const e=await Gr.getDrafts({type:"collaboration"});if(e.success){const t=e.data.items.map(e=>({id:e.id,title:e.title||"Untitled Draft",date:new Date(e.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),image:e.image||"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop",tags:e.tags||[],isDraft:!0,draftData:e}));h(t)}}catch(e){console.error("Failed to reload drafts:",e)}finally{p(!1)}};e()}else console.error("Failed to delete draft:",t.error),alert("Failed to delete draft. Please try again.")}catch(t){console.error("Error deleting draft:",t),alert("Failed to delete draft. Please try again.")}};return(0,Nt.jsxs)("div",{className:"pt-8 mt-8 bg-purple-50 rounded-lg p-6 ".concat(s),children:[(0,Nt.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Nt.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Collaborations"}),(0,Nt.jsx)("button",{onClick:()=>f(!0),className:"p-2 text-purple-600 hover:text-purple-700 hover:bg-purple-100 rounded-full transition-colors duration-200",title:"Learn about Collaborations",children:(0,Nt.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),(0,Nt.jsxs)("div",{className:"mb-8",children:[(0,Nt.jsx)("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"History & Experiences"}),(0,Nt.jsx)("div",{className:"text-center py-8",children:(0,Nt.jsx)("p",{className:"text-gray-500",children:"No Final Reviews yet \u2014 complete a collaboration to build your Experiences here."})})]}),(0,Nt.jsx)("div",{className:"mb-6",children:(0,Nt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Nt.jsx)(wa,{activeTab:c,onTabChange:e=>{d(e)}}),"drafts"===c&&(0,Nt.jsxs)("div",{className:"text-sm text-gray-500",children:[u.length,"/3 drafts"]})]})}),(0,Nt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:["published"===c&&v.map(e=>(0,Nt.jsx)("div",{onClick:()=>(e=>{console.log("Opening published collaboration:",e);const t=localStorage.getItem("mock_collaborations");if(t){const r=JSON.parse(t).find(t=>t.id===e.id);r?l("/tagme/collaboration/".concat(e.id),{state:{project:r}}):console.warn("Collaboration not found in storage:",e.id)}})(e),className:"cursor-pointer",children:(0,Nt.jsx)(ya,{post:e})},e.id)),"drafts"===c&&(m?(0,Nt.jsxs)("div",{className:"col-span-full text-center py-8",children:[(0,Nt.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-tag-purple mx-auto mb-4"}),(0,Nt.jsx)("p",{className:"text-gray-500",children:"Loading drafts..."})]}):u.map(e=>(0,Nt.jsx)("div",{onClick:()=>{return t=e,console.log("Opening draft for editing:",t),void l("/upload/form",{state:{activeUploadType:"collaboration",draftId:t.id,draftData:t.draftData,from:"draft-edit"}});var t},className:"cursor-pointer",children:(0,Nt.jsx)(ya,{post:e,onDelete:w})},e.id)))]}),"published"===c&&0===v.length&&(0,Nt.jsx)("div",{className:"text-center py-8",children:(0,Nt.jsx)("p",{className:"text-gray-500",children:"No published collaborations yet."})}),"drafts"===c&&0===u.length&&(0,Nt.jsx)("div",{className:"text-center py-8",children:(0,Nt.jsx)("p",{className:"text-gray-500",children:"No draft collaborations yet."})}),"drafts"===c&&u.length>=3&&(0,Nt.jsx)("div",{className:"col-span-full text-center py-4",children:(0,Nt.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[(0,Nt.jsx)("div",{className:"text-orange-600 mb-2",children:(0,Nt.jsx)("svg",{className:"w-6 h-6 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Nt.jsx)("p",{className:"text-orange-700 text-sm font-medium",children:"Draft limit reached (3/3)"}),(0,Nt.jsx)("p",{className:"text-orange-600 text-xs mt-1",children:"Delete an existing draft to save a new one"})]})}),g&&(0,Nt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Nt.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-4xl mx-4 shadow-xl",children:[(0,Nt.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Nt.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"What is Collaboration?"}),(0,Nt.jsx)("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:(0,Nt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Nt.jsxs)("div",{className:"space-y-8 text-base text-gray-700",children:[(0,Nt.jsxs)("div",{className:"flex items-start gap-5",children:[(0,Nt.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center mt-0.5",children:(0,Nt.jsx)("span",{className:"text-purple-600 text-base font-bold",children:"1"})}),(0,Nt.jsxs)("div",{className:"flex-1",children:[(0,Nt.jsx)("h4",{className:"font-bold text-gray-900 mb-3 text-lg",children:"Project Records"}),(0,Nt.jsx)("p",{className:"text-gray-700 leading-relaxed",children:"Collaborations are shared project records that belong to all participants. Once published, they stay visible to ensure everyone's contributions are preserved."}),(0,Nt.jsx)("p",{className:"text-gray-600 leading-relaxed mt-2 text-sm",children:"(You can always edit and update details, but the project itself remains as part of the team's history.)"})]})]}),(0,Nt.jsxs)("div",{className:"flex items-start gap-5",children:[(0,Nt.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center mt-0.5",children:(0,Nt.jsx)("span",{className:"text-purple-600 text-base font-bold",children:"2"})}),(0,Nt.jsxs)("div",{className:"flex-1",children:[(0,Nt.jsx)("h4",{className:"font-bold text-gray-900 mb-3 text-lg",children:"Responsibilities"}),(0,Nt.jsx)("p",{className:"text-gray-700 leading-relaxed",children:"Each member can describe their own responsibilities within a project. These should be written based on the team's discussion, so that everyone's role is represented fairly and clearly."})]})]}),(0,Nt.jsxs)("div",{className:"flex items-start gap-5",children:[(0,Nt.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center mt-0.5",children:(0,Nt.jsx)("span",{className:"text-purple-600 text-base font-bold",children:"3"})}),(0,Nt.jsxs)("div",{className:"flex-1",children:[(0,Nt.jsx)("h4",{className:"font-bold text-gray-900 mb-3 text-lg",children:"Reviews"}),(0,Nt.jsx)("p",{className:"text-gray-700 leading-relaxed",children:"After a project is completed, each Initiator or Collaborator will receive a review under their Responsibilities. Reviews from your teammates or project lead highlight your strengths, teamwork, and impact on the project."})]})]}),(0,Nt.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-6",children:[(0,Nt.jsx)("h4",{className:"font-bold text-gray-900 mb-3 text-lg",children:"Additional Note on Collaborations Published & History:"}),(0,Nt.jsx)("p",{className:"text-gray-700 leading-relaxed",children:"Any Collaboration you publish will first appear under the Published section. Only when the project is completed\u2014meaning you've received at least one Final Review from either an Initiator or a Collaborator\u2014will it be stored in your Collaboration History. At that point, it becomes part of your personal Experiences and represents a completed project record."})]})]}),(0,Nt.jsx)("div",{className:"mt-8 border-t border-gray-200 pt-6",children:(0,Nt.jsxs)("div",{className:"flex justify-between items-end",children:[(0,Nt.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,Nt.jsx)("p",{className:"mb-2",children:"If you have other questions, feel free to reach out:"}),(0,Nt.jsxs)("div",{className:"space-y-1",children:[(0,Nt.jsx)("div",{className:"font-medium",children:"Email: tag@rainwang.art"}),(0,Nt.jsxs)("div",{className:"text-gray-500",children:["Founder of TAG:"," ",(0,Nt.jsx)("span",{className:"font-bold",children:"Rain Wang"})]})]})]}),(0,Nt.jsx)("div",{className:"text-right",children:(0,Nt.jsx)("button",{onClick:()=>f(!1),className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors duration-200 text-base font-medium",children:"Got it"})})]})})]})})]})},ka=e=>{let{id:t,onBackClick:r,className:o=""}=e;return(0,Nt.jsx)("div",{className:"bg-white min-h-screen flex items-center justify-center ".concat(o),children:(0,Nt.jsxs)("div",{className:"text-center",children:[(0,Nt.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"\u827a\u672f\u5bb6\u672a\u627e\u5230"}),(0,Nt.jsxs)("p",{className:"text-gray-600 mb-6",children:["\u62b1\u6b49\uff0c\u627e\u4e0d\u5230ID\u4e3a ",t," \u7684\u827a\u672f\u5bb6\u3002"]}),(0,Nt.jsx)("button",{onClick:r,className:"bg-blue-500 text-white px-6 py-2 rounded-md hover:bg-blue-600 transition-colors duration-200",children:"\u8fd4\u56de\u753b\u5eca"})]})})},Na=e=>{let{type:t,targetId:a,onClose:s,currentUserId:i="alice"}=e;const l=ue(),[c,d]=(0,o.useState)([]),[u,h]=(0,o.useState)(!0),[m,p]=(0,o.useState)(null),[g,f]=(0,o.useState)(!1),[v,x]=(0,o.useState)(null),[b,y]=(0,o.useState)(""),[w,j]=(0,o.useState)(null),[k,N]=(0,o.useState)({}),S=(0,o.useRef)(),C=(0,o.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{h(!0),p(null);const{getFollowers:o,getFollowing:s,getUserProfile:n,isFollowing:l}=await Promise.resolve().then(r.bind(r,240)),c={page:e?1:Math.floor((v||0)/20)+1,limit:20};let u;if(u="followers"===t?await o(a,c):await s(a,c),u.success){const t=u.data.map(e=>e.id),r=(await Promise.all(t.map(async e=>{const t=await n(e);if(t.success){let r=!1;if(i&&i!==e){const t=await l(i,e);t.success&&(r=t.isFollowing)}return{id:t.data.id,displayName:t.data.name||t.data.username||"Unknown User",avatar:t.data.avatar_url||"/assets/placeholder.svg",isFollowedByMe:r}}return null}))).filter(e=>null!==e),o=b.trim()?r.filter(e=>e.displayName.toLowerCase().includes(b.toLowerCase())):r;d(t=>e?o:[...t,...o]),f(20===u.data.length),x(e?20:(v||0)+20)}else p(u.error)}catch(o){p(o.message)}finally{h(!1)}},[t,a,v,b,i]);(0,o.useEffect)(()=>{w&&clearTimeout(w);const e=setTimeout(()=>{C(!0)},250);return j(e),()=>{e&&clearTimeout(e)}},[b]),(0,o.useEffect)(()=>{C(!0)},[t,a]);const A=(0,o.useCallback)(e=>{u||(S.current&&S.current.disconnect(),S.current=new IntersectionObserver(e=>{e[0].isIntersecting&&g&&C()}),e&&S.current.observe(e))},[u,g,C]),_=(e,o)=>{const a=o===c.length-1?A:null;return(0,Nt.jsx)("div",{ref:a,className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow duration-200 cursor-pointer",onClick:()=>{return t=e.id,l("/artist/".concat(t)),void s();var t},children:(0,Nt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Nt.jsx)("img",{src:e.avatar,alt:e.displayName,className:"w-12 h-12 rounded-full object-cover"}),(0,Nt.jsx)("div",{className:"flex-1 min-w-0",children:(0,Nt.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate",children:e.displayName})}),(0,Nt.jsx)("button",{onClick:o=>{o.stopPropagation(),(async(e,o)=>{try{N(t=>(0,n.A)((0,n.A)({},t),{},{[e]:!0}));const{followUser:a,unfollowUser:s}=await Promise.resolve().then(r.bind(r,240)),l=i;let c;c=o?await s(l,e):await a(l,e),c.success?(d("following"===t&&o?t=>t.filter(t=>t.id!==e):t=>t.map(t=>t.id===e?(0,n.A)((0,n.A)({},t),{},{isFollowedByMe:!o}):t)),window.dispatchEvent(new CustomEvent("follow:changed",{detail:{followerId:l,followingId:e,isFollowing:!o,operation:o?"unfollow":"follow",type:t}})),console.log("[FollowList] Triggered follow:changed event - ".concat(o?"unfollow":"follow"," ").concat(e))):console.error("Follow toggle failed:",c.error)}catch(a){console.error("Follow toggle error:",a)}finally{N(t=>(0,n.A)((0,n.A)({},t),{},{[e]:!1}))}})(e.id,e.isFollowedByMe)},disabled:k[e.id],className:ma(e.isFollowedByMe),children:k[e.id]?(0,Nt.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.isFollowedByMe?"Following":"Follow"})]})},e.id)};return(0,Nt.jsxs)("div",{className:"h-full flex flex-col",children:[(0,Nt.jsx)("div",{className:"mb-4",children:(0,Nt.jsx)("input",{type:"text",placeholder:"Search ".concat(t,"..."),value:b,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),(0,Nt.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[m?(0,Nt.jsxs)("div",{className:"text-center py-8",children:[(0,Nt.jsxs)("p",{className:"text-red-500",children:["Error: ",m]}),(0,Nt.jsx)("button",{onClick:()=>C(!0),className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Retry"})]}):0!==c.length||u?(0,Nt.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:c.map((e,t)=>_(e,t))}):(0,Nt.jsx)("div",{className:"text-center py-8",children:(0,Nt.jsxs)("p",{className:"text-gray-500",children:["No ",t," found"]})}),u&&(0,Nt.jsx)("div",{className:"text-center py-4",children:(0,Nt.jsx)("div",{className:"inline-block w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})})]})]})},Sa=e=>{let{isOpen:t,onClose:r,artistId:a,isOwnProfile:s=!1,currentUserId:n="alice"}=e;return(0,o.useEffect)(()=>{const e=e=>{"Escape"===e.key&&t&&r()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[t,r]),(0,Nt.jsx)(Ut,{isOpen:t,onClose:r,title:"Followers",maxWidth:"max-w-3xl",children:(0,Nt.jsx)("div",{className:"h-96",children:(0,Nt.jsx)(Na,{type:"followers",targetId:a,onClose:r,isOwnProfile:s,currentUserId:n})})})},Ca=e=>{let{isOpen:t,onClose:r,userId:a,isOwnProfile:s=!1,currentUserId:n="alice"}=e;return(0,o.useEffect)(()=>{const e=e=>{"Escape"===e.key&&t&&r()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[t,r]),(0,Nt.jsx)(Ut,{isOpen:t,onClose:r,title:"Following",maxWidth:"max-w-3xl",children:(0,Nt.jsx)("div",{className:"h-96",children:(0,Nt.jsx)(Na,{type:"following",targetId:a,onClose:r,isOwnProfile:s,currentUserId:n})})})},Aa=()=>{var e,t,r;const{id:a}=he(),s=le(),{state:i}=zo(),{user:l}=Ct(),c="/me"===s.pathname||"/artist/me"===s.pathname,d=null!==(e=null===l||void 0===l||null===(t=l.id)||void 0===t||null===(r=t.toString)||void 0===r?void 0:r.call(t))&&void 0!==e?e:null,[u,h]=(0,o.useState)(null),[m,p]=(0,o.useState)([]),[g,f]=(0,o.useState)([]),[v,x]=(0,o.useState)(!0),[b,y]=(0,o.useState)(!1),[w,j]=(0,o.useState)(0),[k,N]=(0,o.useState)(null),S=(0,o.useMemo)(()=>{if(i.navigationHistory.length>0){const e=i.navigationHistory[i.navigationHistory.length-1];return{from:e.from||"gallery",activeTab:e.activeTab||"Works"}}return{from:"gallery",activeTab:"Works"}},[i.navigationHistory]);(0,o.useEffect)(()=>{a&&da(["artist",a.toString()])},[a,null===l||void 0===l?void 0:l.id]),(0,o.useEffect)(()=>{const e=async e=>{const{userId:t,avatarUrl:r}=e.detail;if(t){console.log("[ArtistProfile] Avatar updated, clearing cache for user:",t),da(["artist",t]);const e=c?d:null===a||void 0===a?void 0:a.toString();if(t===e){h(e=>(0,n.A)((0,n.A)({},e),{},{avatar:r}));const t=await ha(e);t&&h(t)}}};return window.addEventListener("avatar:updated",e),()=>window.removeEventListener("avatar:updated",e)},[d,a,c]),(0,o.useEffect)(()=>{const e=e=>{const t=e.detail;if(t&&t.id){console.log("[ArtistProfile] Profile updated, clearing cache for user:",t.id),da(["artist",t.id]);const e=c?d:null===a||void 0===a?void 0:a.toString();t.id===e&&h(e=>(0,n.A)({},e))}};return window.addEventListener("profile:updated",e),()=>window.removeEventListener("profile:updated",e)},[d,a,c]),(0,o.useEffect)(()=>{const e=async e=>{const t=e.detail,r=c?d:null===a||void 0===a?void 0:a.toString();(null===t||void 0===t?void 0:t.id)===r&&h(e=>(0,n.A)((0,n.A)({},e),{},{title:t.title||(null===e||void 0===e?void 0:e.title),school:t.school||(null===e||void 0===e?void 0:e.school),pronouns:t.pronouns||(null===e||void 0===e?void 0:e.pronouns),majors:t.majors||(null===e||void 0===e?void 0:e.majors),minors:t.minors||(null===e||void 0===e?void 0:e.minors),skills:t.skills||(null===e||void 0===e?void 0:e.skills),bio:t.bio||(null===e||void 0===e?void 0:e.bio)}))};return window.addEventListener("profile:updated",e),()=>window.removeEventListener("profile:updated",e)},[d,a,c]),(0,o.useEffect)(()=>{window.scrollTo({top:0,behavior:"auto"})},[]),(0,o.useEffect)(()=>{let e=!0;const t=async()=>{x(!0),y(!1),j(0),N(null);let t=null;if(c?t=d:a&&(t=a.toString(),"me"===t&&(t=d)),t)try{const o=await ha(t);if(!e)return;if(o){var r;h(o);const e=await(0,lr.ep)(t);if(e.success){const t=await Promise.all(e.data.map(async e=>{const t=e.thumbnailPath||e.imagePaths&&e.imagePaths[0]||null;let r="/assets/placeholder.svg";if(t)try{console.log("[useArtistState] Converting image path: ".concat(t));const e=await(0,lr.getPortfolioImageUrl)(t);console.log("[useArtistState] Image conversion result:",e),e&&e.success&&e.data&&e.data.url?(r=e.data.url,console.log("[useArtistState] Successfully converted to: ".concat(r))):console.warn("[useArtistState] Invalid image result:",e)}catch(o){console.warn("[useArtistState] Failed to convert image path ".concat(t,":"),o)}return{id:e.id,title:e.title,image:r,category:e.category,tags:e.tags,description:e.description}}));p(t)}else p([]);const a=await(async e=>{try{console.log("[getCollaborationsData] Getting collaborations for userId:",e);const t=localStorage.getItem("mock_collaborations");if(!t)return console.log("[getCollaborationsData] No collaborations found in storage"),[];const r=JSON.parse(t);console.log("[getCollaborationsData] Found collaborations:",r.length);const o=r.filter(t=>t.author&&t.author.id===e);console.log("[getCollaborationsData] User collaborations:",o.length);const a=o.map(e=>{const t=new Date(e.createdAt),r=new Date,o=Math.floor((r-t)/2592e6);let a;a=0===o?"This month":1===o?"Last month":"".concat(o," months ago");let s="";return s=e.heroImage?e.heroImage.startsWith("collaboration_")?"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop":e.heroImage:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop",{id:e.id,title:e.title,description:e.description,image:s,partner:"Team Members",partnerAvatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face",completionDate:"Created ".concat(a),category:e.projectType||"Collaboration",isInitiator:!0,role:"Project Owner \u2022 Initiator",dateRange:a,responsibility:"",teamFeedback:{feedbacker:"Team",feedbackerRole:"Collaborators",content:"This project is currently in progress. Team feedback will be available once the project is completed."}}});return console.log("[getCollaborationsData] Formatted collaborations:",a),a}catch(t){return console.error("[getCollaborationsData] Error getting collaborations:",t),[]}})(t);f(a),void 0!==(null===o||void 0===o||null===(r=o.stats)||void 0===r?void 0:r.followers)&&j(o.stats.followers)}else h(null),p([]),f([])}catch(o){h(null),p([]),f([])}finally{e&&x(!1)}else x(!1)};return(c||a)&&t(),()=>{e=!1}},[a,c,d]);const C=(0,o.useMemo)(()=>!!c||"me"===a,[c,a]),A=(0,o.useMemo)(()=>!(c||!a||!d||a.toString()!==d.toString()),[c,a,d]),_=(0,o.useCallback)(()=>{y(e=>!e),j(e=>b?e-1:e+1)},[b]);return{loading:v,currentUser:l,artist:u,artworks:m,collaborations:g,isFollowing:b,setIsFollowing:y,followersCount:w,expandedCardId:k,isOwnProfile:C,shouldShowBackToOwnerView:A,sourceInfo:S,setFollowersCount:j,setExpandedCardId:N,toggleFollow:_,toggleExpandedCard:e=>{N(t=>t===e?null:e)}}},_a=e=>{var t;let{state:r,setters:a}=e;const s=ue(),{goBack:n,navigateToWork:i}=Qo();return{handleBackClick:(0,o.useCallback)(()=>{n()},[n]),handleEditProfileClick:(0,o.useCallback)(()=>{s("/settings/edit-profile")},[s]),handlePreviewAsVisitorClick:(0,o.useCallback)(()=>{var e;const t=null===(e=r.currentUser)||void 0===e?void 0:e.id;t&&s("/artist/".concat(t))},[s,null===(t=r.currentUser)||void 0===t?void 0:t.id]),handleBackToOwnerViewClick:(0,o.useCallback)(()=>{s("/artist/me")},[s]),handleArtworkClick:(0,o.useCallback)(e=>{e&&e.id&&i(e.id)},[i]),handleCollaborationToggle:(0,o.useCallback)(e=>{a.toggleExpandedCard(e)},[a]),handleSocialLinkClick:(0,o.useCallback)(()=>{},[])}},Ia=e=>{const{user:t}=Ct(),[r,a]=(0,o.useState)(0),[s,n]=(0,o.useState)(null),[i,l]=(0,o.useState)(!1),c=!(null===t||void 0===t||!t.id),d=(0,o.useCallback)(async()=>{if(e&&c&&!i)if(t.id!==e)if(null!==s)try{l(!0),console.log("[FollowCount] Toggling follow for artist:",e,"User:",t.id,"Current state:",s);let r;if(s){if(r=await(0,Mr.unfollowUser)(t.id,e),!r.success)return void console.error("[FollowCount] Failed to unfollow:",r.error);n(!1),a(e=>Math.max(0,e-1))}else{if(r=await(0,Mr.followUser)(t.id,e),!r.success)return r.error&&r.error.includes("already follows")?(console.log("[FollowCount] Already following, syncing state"),n(!0),void await u()):void console.error("[FollowCount] Failed to follow:",r.error);n(!0),a(e=>e+1)}}catch(r){console.error("[FollowCount] Error toggling follow:",r)}finally{l(!1)}else console.log("[FollowCount] Follow status not loaded yet, skipping toggle");else console.warn("[FollowCount] Cannot follow yourself")},[e,c,null===t||void 0===t?void 0:t.id,null===t||void 0===t?void 0:t.name,null===t||void 0===t?void 0:t.username,i,s]),u=(0,o.useCallback)(async()=>{if(e&&c)try{const r=await(0,Mr.isFollowing)(t.id,e);if(!r.success)return n(!1),void console.error("[FollowCount] Failed to check follow status:",r.error);const o=await(0,Mr.getFollowers)(e);if(!o.success)return void console.error("[FollowCount] Failed to get followers count:",o.error);const s=void 0!==o.count?o.count:o.data.length;a(s),n(r.isFollowing),console.log("[FollowCount] Refreshed follow status:",r.isFollowing?"Following":"Not following","Followers count:",o.data.length)}catch(r){console.error("[FollowCount] Error refreshing follow status:",r)}},[e,c,null===t||void 0===t?void 0:t.id]),h=(0,o.useCallback)(async()=>{if(e)try{const t=await(0,Mr.getFollowers)(e);if(t.success){const e=void 0!==t.count?t.count:t.data.length;a(e),console.log("[FollowCount] Refreshed followers count:",e)}else console.error("[FollowCount] Failed to refresh followers count:",t.error)}catch(t){console.error("[FollowCount] Error refreshing followers count:",t)}},[e]);return(0,o.useEffect)(()=>{const r=r=>{const{followerId:o,artistId:a,isFollowing:s}=r.detail;a===e&&(o===(null===t||void 0===t?void 0:t.id)&&n(s),h())};return window.addEventListener("follow:changed",r),()=>{window.removeEventListener("follow:changed",r)}},[e,null===t||void 0===t?void 0:t.id,h]),(0,o.useEffect)(()=>{e&&c&&u()},[e,c,u]),(0,o.useEffect)(()=>{n(null),l(!1),a(0)},[e,null===t||void 0===t?void 0:t.id]),{followersCount:r,isFollowing:s,isToggling:i,toggleFollow:d,refreshFollowStatus:u,refreshFollowersCount:h}},Ea=e=>{const[t,r]=(0,o.useState)(0),[a,s]=(0,o.useState)(!1),n=(0,o.useCallback)(async()=>{if(e)try{s(!0);const t=await(0,Mr.getFollowing)(e);t.success?(r(t.data.length),console.log("[FollowingCount] Refreshed following count:",t.data.length)):console.error("[FollowingCount] Failed to refresh following count:",t.error)}catch(t){console.error("[FollowingCount] Error refreshing following count:",t)}finally{s(!1)}},[e]);return(0,o.useEffect)(()=>{const t=t=>{const{followerId:r}=t.detail;r===e&&n()};return window.addEventListener("follow:changed",t),()=>{window.removeEventListener("follow:changed",t)}},[e,n]),(0,o.useEffect)(()=>{e&&n()},[e,n]),{followingCount:t,isLoading:a,refreshFollowingCount:n}},Pa=()=>{var e,t,r,a,s,n,i,l,c,d,u,h,m,p;const{id:g}=he(),{user:f,loading:v,status:x}=Ct(),b=Aa(),y=(0,o.useMemo)(()=>({toggleFollow:b.toggleFollow,toggleExpandedCard:b.toggleExpandedCard}),[b.toggleFollow,b.toggleExpandedCard]),w=_a({state:b,setters:y}),j=Ia(null===(e=b.artist)||void 0===e?void 0:e.id),k=Ea(b.isOwnProfile?null===(t=b.currentUser)||void 0===t?void 0:t.id:null===(r=b.artist)||void 0===r?void 0:r.id),[N,S]=o.useState(!1),[C,A]=o.useState(!1);if(o.useEffect(()=>{const e=e=>{var t;const{followerId:r,followingId:o,isFollowing:a,operation:s,type:n}=e.detail;console.log("[ArtistProfile] Received follow:changed event:",{followerId:r,followingId:o,isFollowing:a,operation:s,type:n}),r===(null===f||void 0===f?void 0:f.id)&&(console.log("[ArtistProfile] Current user performed follow operation, refreshing following count"),k.refresh&&k.refresh()),o===(null===(t=b.artist)||void 0===t?void 0:t.id)&&(console.log("[ArtistProfile] Current artist was followed/unfollowed, refreshing followers count"),j.refreshFollowersCount&&j.refreshFollowersCount())};return window.addEventListener("follow:changed",e),()=>{window.removeEventListener("follow:changed",e)}},[null===f||void 0===f?void 0:f.id,null===(a=b.artist)||void 0===a?void 0:a.id,k,j]),v)return(0,Nt.jsx)(Ht,{});if("me"===g){if("SIGNED_OUT"===x)return window.location.href="/login",(0,Nt.jsx)(Ht,{});if("LOADING"===x)return(0,Nt.jsx)(Ht,{});if("SIGNED_IN"===x&&(null===f||void 0===f||!f.id))return(0,Nt.jsx)(Ht,{})}if(b.loading)return(0,Nt.jsx)(Ht,{});return(_=b.artist)&&_.id&&_.name?(0,Nt.jsxs)("div",{className:"bg-white min-h-screen",children:[(0,Nt.jsx)(ga,{artist:b.artist,artworks:b.artworks,isFollowing:j.isFollowing,followersCount:j.followersCount,followingCount:k.followingCount,isOwnProfile:b.isOwnProfile,onBackClick:w.handleBackClick,onEditProfileClick:w.handleEditProfileClick,onPreviewAsVisitorClick:w.handlePreviewAsVisitorClick,onBackToOwnerViewClick:b.shouldShowBackToOwnerView?w.handleBackToOwnerViewClick:null,toggleFollow:j.toggleFollow,onFollowersClick:()=>{S(!0)},onFollowingClick:()=>{A(!0)},from:(null===(n=b.sourceInfo)||void 0===n?void 0:n.from)||"gallery"}),(0,Nt.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Nt.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8 pt-8",children:[(0,Nt.jsx)(xa,{artist:b.artist,onSocialLinkClick:w.handleSocialLinkClick}),(0,Nt.jsxs)("div",{className:"flex-1",children:[(0,Nt.jsx)(ba,{artworks:b.artworks,onArtworkClick:w.handleArtworkClick,isOwnProfile:b.isOwnProfile}),(0,Nt.jsx)(ja,{collaborations:b.collaborations,expandedCardId:b.expandedCardId,onCollaborationToggle:w.handleCollaborationToggle,currentUserId:null===(i=b.currentUser)||void 0===i?void 0:i.id,viewedUserId:null===(l=b.artist)||void 0===l?void 0:l.id}),(0,Nt.jsx)("div",{className:"mt-8",children:(0,Nt.jsx)(ia,{isOwnProfile:b.isOwnProfile,viewedUserId:null===(c=b.artist)||void 0===c?void 0:c.id})})]})]})}),(0,Nt.jsx)(Sa,{isOpen:N,onClose:()=>{S(!1)},artistId:null===(d=b.artist)||void 0===d?void 0:d.id,isOwnProfile:b.isOwnProfile,currentUserId:null===(u=b.currentUser)||void 0===u?void 0:u.id}),(0,Nt.jsx)(Ca,{isOpen:C,onClose:()=>{A(!1)},userId:b.isOwnProfile?null===(h=b.currentUser)||void 0===h?void 0:h.id:null===(m=b.artist)||void 0===m?void 0:m.id,isOwnProfile:b.isOwnProfile,currentUserId:null===(p=b.currentUser)||void 0===p?void 0:p.id})]},"".concat(g,"-").concat(null!==(s=null===f||void 0===f?void 0:f.id)&&void 0!==s?s:"anonymous")):(0,Nt.jsx)(ka,{id:g,onBackClick:w.handleBackClick});var _},Da=()=>{ue();const[e,t]=(0,o.useState)(null),r=()=>{const e=document.querySelector('[data-section="gallery"]');if(e){const t=e.getBoundingClientRect(),r=window.pageYOffset+t.top-40;window.scrollTo({top:r,behavior:"smooth"})}};return(0,Nt.jsx)("section",{className:"relative min-h-[560px] lg:min-h-[640px] overflow-hidden",children:(0,Nt.jsxs)("div",{className:"flex flex-col lg:flex-row",children:[(0,Nt.jsx)("div",{className:"relative w-full lg:w-1/2 bg-gradient-to-b from-blue-600 to-blue-700 min-h-[560px] lg:min-h-[640px] flex items-start justify-center px-8 lg:px-8 pt-20 lg:pt-24 pb-16 lg:pb-20 cursor-pointer transition-all duration-500 ease-out",style:{width:window.innerWidth>=1024?"blue"===e?"80%":"purple"===e?"20%":"50%":"100%",transitionTimingFunction:"cubic-bezier(.22,.61,.36,1)"},onClick:r,onKeyDown:e=>((e,t)=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t())})(e,r),onMouseEnter:()=>t("blue"),onMouseLeave:()=>t(null),role:"link",tabIndex:0,children:(0,Nt.jsxs)("div",{className:"flex flex-col items-end max-w-md gap-6 lg:pr-0",children:[(0,Nt.jsxs)("div",{className:"leading-[0.8]",children:[(0,Nt.jsx)("h1",{className:"text-white font-black uppercase tracking-[-0.03em]",style:{fontSize:"clamp(56px, 7vw, 96px)",fontFamily:"Poppins, Inter, system-ui, sans-serif",textRendering:"optimizeLegibility"},children:"TAG"}),(0,Nt.jsx)("h1",{className:"text-blue-200 font-black tracking-[-0.03em]",style:{fontSize:"clamp(32px, 4vw, 56px)",fontFamily:"Poppins, Inter, system-ui, sans-serif",textRendering:"optimizeLegibility"},children:"Gallery"})]}),(0,Nt.jsxs)("div",{className:"space-y-2 mt-6 md:mt-8 text-right",children:[(0,Nt.jsx)("p",{className:"text-white/95 font-semibold leading-tight",style:{fontSize:"clamp(20px, 2.2vw, 28px)"},children:"Show your work"}),(0,Nt.jsx)("p",{className:"text-white/95 font-semibold leading-tight",style:{fontSize:"clamp(20px, 2.2vw, 28px)"},children:"Get hired!"})]}),(0,Nt.jsx)("p",{className:"text-white text-lg opacity-80 leading-relaxed text-right",children:"Explore TAG Gallery"})]})}),(0,Nt.jsx)(gt,{to:"/tagme",className:"relative w-full lg:w-1/2 bg-gradient-to-b from-purple-600 to-purple-700 min-h-[560px] lg:min-h-[640px] flex items-start justify-center px-8 lg:px-8 pt-20 lg:pt-24 pb-16 lg:pb-20 cursor-pointer transition-all duration-500 ease-out",style:{width:window.innerWidth>=1024?"blue"===e?"20%":"purple"===e?"80%":"50%":"100%",transitionTimingFunction:"cubic-bezier(.22,.61,.36,1)"},onMouseEnter:()=>t("purple"),onMouseLeave:()=>t(null),children:(0,Nt.jsxs)("div",{className:"flex flex-col items-start max-w-md gap-6 lg:pl-0",children:[(0,Nt.jsxs)("div",{className:"leading-[0.8]",children:[(0,Nt.jsx)("h1",{className:"text-white font-black uppercase tracking-[-0.03em]",style:{fontSize:"clamp(56px, 7vw, 96px)",fontFamily:"Poppins, Inter, system-ui, sans-serif",textRendering:"optimizeLegibility"},children:"TAG"}),(0,Nt.jsx)("h1",{className:"text-purple-200 font-black tracking-[-0.03em]",style:{fontSize:"clamp(48px, 6vw, 80px)",fontFamily:"Poppins, Inter, system-ui, sans-serif",textRendering:"optimizeLegibility"},children:"Me"})]}),(0,Nt.jsxs)("div",{className:"space-y-2 mt-6 md:mt-8",children:[(0,Nt.jsx)("p",{className:"text-white/95 font-semibold leading-tight",style:{fontSize:"clamp(20px, 2.2vw, 28px)"},children:"Find your team"}),(0,Nt.jsx)("p",{className:"text-white/95 font-semibold leading-tight",style:{fontSize:"clamp(20px, 2.2vw, 28px)"},children:"Build experience!"})]}),(0,Nt.jsx)("p",{className:"text-white text-lg opacity-80 leading-relaxed",children:"Explore TAGMe"})]})})]})})},Ta="applications",La=async e=>{try{const t="".concat(Ta,"_").concat(e),r=localStorage.getItem(t);if(!r)return console.log("[applicationService] No applications data found for collaboration ".concat(e)),null;const o=JSON.parse(r);return console.log("[applicationService] Retrieved applications data for collaboration ".concat(e,":"),o),o.applications||null}catch(t){return console.error("[applicationService] Failed to get applications data:",t),null}},Ma=async(e,t)=>{try{const r="".concat(Ta,"_").concat(e),o={applications:t,timestamp:Date.now()};return localStorage.setItem(r,JSON.stringify(o)),console.log("[applicationService] Saved applications data for collaboration ".concat(e,":"),t),{success:!0,data:o}}catch(r){return console.error("[applicationService] Failed to save applications data:",r),{success:!1,error:r.message}}},Ra={getApplicationsData:La,saveApplicationsData:Ma,addApplication:async(e,t,r)=>{try{const o=await La(e)||{},a=o[t]||[];if(a.findIndex(e=>e.userId===r.userId)>=0)return console.log("[applicationService] User ".concat(r.userId," already applied for position ").concat(t)),{success:!1,error:"Already applied"};const s=(0,n.A)((0,n.A)({},r),{},{id:Date.now(),appliedAt:"Just now",status:"pending",positionId:t});a.push(s),o[t]=a;return(await Ma(e,o)).success?(console.log("[applicationService] Added application for user ".concat(r.userId," to position ").concat(t)),{success:!0,data:s}):{success:!1,error:"Failed to save application"}}catch(o){return console.error("[applicationService] Failed to add application:",o),{success:!1,error:o.message}}},updateApplicationStatus:async(e,t,r,o)=>{try{const a=await La(e)||{},s=a[t]||[],n=s.findIndex(e=>e.userId===r||e.id===r);if(-1===n)return console.log("[applicationService] Application not found for user ".concat(r," in position ").concat(t)),{success:!1,error:"Application not found"};s[n].status=o,a[t]=s;return(await Ma(e,a)).success?(console.log("[applicationService] Updated application status to ".concat(o," for user ").concat(r," in position ").concat(t)),{success:!0,data:s[n]}):{success:!1,error:"Failed to save status update"}}catch(a){return console.error("[applicationService] Failed to update application status:",a),{success:!1,error:a.message}}},removeApplication:async(e,t,r)=>{try{const o=await La(e)||{},a=o[t]||[],s=a.findIndex(e=>e.userId===r||e.id===r);if(-1===s)return console.log("[applicationService] Application not found for user ".concat(r," in position ").concat(t)),{success:!1,error:"Application not found"};const n=a.splice(s,1)[0];o[t]=a;return(await Ma(e,o)).success?(console.log("[applicationService] Removed application for user ".concat(r," from position ").concat(t)),{success:!0,data:n}):{success:!1,error:"Failed to save removal"}}catch(o){return console.error("[applicationService] Failed to remove application:",o),{success:!1,error:o.message}}},updateApplicationUserName:async(e,t)=>{try{const o=Object.keys(localStorage).filter(e=>e.startsWith(Ta));let a=0;for(const s of o)try{const r=localStorage.getItem(s);if(!r)continue;const o=JSON.parse(r),n=o.applications;if(!n)continue;let i=!1;Object.keys(n).forEach(r=>{n[r].forEach(r=>{r.userId===e&&r.name!==t&&(r.name=t,i=!0)})}),i&&(o.applications=n,localStorage.setItem(s,JSON.stringify(o)),a++)}catch(r){console.warn("[applicationService] Failed to update key ".concat(s,":"),r)}return console.log("[applicationService] Updated application user name to ".concat(t," for user ").concat(e," in ").concat(a," collaborations")),{success:!0,updatedCount:a}}catch(r){return console.error("[applicationService] Failed to update application user name:",r),{success:!1,error:r.message}}},clearApplicationsData:async()=>{try{const e=Object.keys(localStorage).filter(e=>e.startsWith(Ta));return e.forEach(e=>{localStorage.removeItem(e)}),console.log("[applicationService] Cleared ".concat(e.length," application data entries")),{success:!0,clearedCount:e.length}}catch(e){return console.error("[applicationService] Failed to clear applications data:",e),{success:!1,error:e.message}}}},Fa=Ra,Ua="applicationStatus",Oa=(e,t)=>{try{const r="".concat(Ua,":").concat(e,":").concat(t),o=localStorage.getItem(r);if(!o)return console.log("[applicationStorage] No status found for position ".concat(e,", applicant ").concat(t)),null;const a=JSON.parse(o);return console.log("[applicationStorage] Retrieved status: ".concat(a.status," for position ").concat(e,", applicant ").concat(t)),a.status}catch(r){return console.error("[applicationStorage] Failed to get application status:",r),null}},za=e=>{let{isOpen:t,onClose:r,application:a,onApprove:s,onContact:n,isInitiator:i=!1,anchorElement:l,positionId:c,positions:d}=e;const[u,h]=(0,o.useState)(!1),m=(0,o.useRef)(null),p=o.useMemo(()=>{console.log("[ApplicationInfoPopover] Checking approval status..."),console.log("[ApplicationInfoPopover] Application:",a),console.log("[ApplicationInfoPopover] Application type:",typeof a),console.log("[ApplicationInfoPopover] Application keys:",a?Object.keys(a):"null"),console.log("[ApplicationInfoPopover] Position ID:",c),console.log("[ApplicationInfoPopover] Positions:",d),console.log("[ApplicationInfoPopover] Application status:",null===a||void 0===a?void 0:a.status);const e=(null===a||void 0===a?void 0:a.id)||(null===a||void 0===a?void 0:a.userId);if(c&&e){const t=((e,t)=>"approved"===Oa(e,t))(c,e);if(t)return console.log("[ApplicationInfoPopover] Application is approved in storage"),!0}if("approved"===(null===a||void 0===a?void 0:a.status))return console.log("[ApplicationInfoPopover] Application is already approved"),!0;if(c&&d){const e=d.find(e=>e.id===c);if(e&&e.applications){const t=e.applications.find(e=>e.id===(null===a||void 0===a?void 0:a.id)||e.userId===(null===a||void 0===a?void 0:a.userId));if(console.log("[ApplicationInfoPopover] App in position:",t),console.log("[ApplicationInfoPopover] App status in position:",null===t||void 0===t?void 0:t.status),"approved"===(null===t||void 0===t?void 0:t.status))return console.log("[ApplicationInfoPopover] App is approved in this specific position"),!0}}return c||"approved"!==(null===a||void 0===a?void 0:a.status)?(console.log("[ApplicationInfoPopover] Application is not approved for this position"),!1):(console.log("[ApplicationInfoPopover] No positionId, but application is approved"),!0)},[a,c,d]);console.log("[ApplicationInfoPopover] Application status:",null===a||void 0===a?void 0:a.status),console.log("[ApplicationInfoPopover] Position ID:",c),console.log("[ApplicationInfoPopover] Is approved:",p),(0,o.useEffect)(()=>{const e=e=>{!m.current||m.current.contains(e.target)||null!==l&&void 0!==l&&l.contains(e.target)||r()};if(t)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[t,r,l]);if(!t||!a||!l)return null;const g=()=>{if(a.email)try{const e="mailto:".concat(a.email);window.open(e,"_blank"),console.log("[ApplicationInfoPopover] Opening mailto link:",e),setTimeout(()=>{console.log("[ApplicationInfoPopover] Mailto link should have opened")},100)}catch(e){console.error("[ApplicationInfoPopover] Failed to open mailto link:",e),navigator.clipboard.writeText(a.email).then(()=>{alert("Email address copied to clipboard: ".concat(a.email))}).catch(()=>{alert("Please copy this email address: ".concat(a.email))})}else console.warn("[ApplicationInfoPopover] No email address available");null===n||void 0===n||n()};return(0,Nt.jsxs)("div",{ref:m,style:(()=>{if(!l)return{};const e=l.getBoundingClientRect(),t=window.pageYOffset||document.documentElement.scrollTop,r=window.pageXOffset||document.documentElement.scrollLeft;return{position:"absolute",top:e.bottom+t+8,left:e.left+r-150,zIndex:1e3}})(),className:"bg-white rounded-lg shadow-xl border border-gray-200 w-80 max-w-sm",children:[(0,Nt.jsx)("div",{className:"absolute -top-2 left-6 w-4 h-4 bg-white border-l border-t border-gray-200 transform rotate-45"}),(0,Nt.jsxs)("div",{className:"p-4 space-y-4",children:[(0,Nt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Application Details"}),(0,Nt.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:(0,Nt.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Nt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Nt.jsx)("img",{src:a.avatar||"/assets/placeholder.svg",alt:a.name,className:"w-12 h-12 rounded-full object-cover border-2 border-gray-200"}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:a.name}),(0,Nt.jsxs)("p",{className:"text-sm text-gray-500",children:["Applied on"," ",new Date(a.timestamp||Date.now()).toLocaleDateString()]})]})]}),(0,Nt.jsxs)("div",{className:"space-y-3",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("div",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,Nt.jsx)("a",{href:"mailto:".concat(a.email),className:"text-purple-600 hover:text-purple-700 underline text-sm",onClick:e=>{e.preventDefault(),g()},children:a.email})]}),a.portfolio&&(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("div",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Portfolio"}),(0,Nt.jsx)("a",{href:a.portfolio.startsWith("http")?a.portfolio:"https://".concat(a.portfolio),target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 hover:text-purple-700 underline break-all text-sm",children:a.portfolio})]}),a.message&&(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("div",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message"}),(0,Nt.jsx)("div",{className:"bg-gray-50 rounded-lg p-3",children:(0,Nt.jsx)("p",{className:"text-gray-900 whitespace-pre-wrap text-sm",children:a.message})})]})]}),i&&(0,Nt.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,Nt.jsx)(Rt,{onClick:g,className:"flex-1 text-sm py-2",children:"Contact"}),(0,Nt.jsx)(Mt,{onClick:()=>{h(!0)},disabled:p,className:"flex-1 text-sm py-2 transition-all duration-300 ".concat(p?"bg-green-100 text-green-800 border border-green-300 cursor-not-allowed":"bg-purple-600 text-white hover:bg-purple-700"),title:p?"Already approved for this position":"Approve this application for this position",children:p?"\u2713 Approved":"Approve"})]}),u&&(0,Nt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Nt.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirm Approval"}),(0,Nt.jsxs)("p",{className:"text-gray-700 mb-6",children:["Are you sure you want to approve"," ",(0,Nt.jsx)("span",{className:"font-medium",children:a.name})," for this position? This action cannot be undone."]}),(0,Nt.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,Nt.jsx)(Rt,{onClick:()=>{h(!1)},className:"px-4 py-2",children:"Cancel"}),(0,Nt.jsx)(Mt,{onClick:()=>{console.log("[ApplicationInfoPopover] Confirming approval for:",a.name,"position:",c),null===s||void 0===s||s(a,c),h(!1),console.log("[ApplicationInfoPopover] Application approved successfully")},className:"px-4 py-2 bg-green-600 hover:bg-green-700",children:"Confirm Approve"})]})]})})]})]})},Wa=e=>{let{isOpen:t,onClose:r,applyForm:o,onFormChange:a,onSubmit:s}=e;return(0,Nt.jsx)(Ut,{isOpen:t,onClose:r,title:"Apply for Project",maxWidth:"max-w-md",children:(0,Nt.jsxs)("form",{onSubmit:s,className:"space-y-4",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,Nt.jsx)("input",{id:"email",type:"email",name:"email",value:o.email,onChange:a,required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"your.email@example.com"})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{htmlFor:"portfolio",className:"block text-sm font-medium text-gray-700 mb-1",children:"Portfolio Link"}),(0,Nt.jsx)("input",{id:"portfolio",type:"text",name:"portfolio",value:o.portfolio,onChange:a,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"your-portfolio.com or any link"})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-1",children:"Message"}),(0,Nt.jsx)("textarea",{id:"message",name:"message",value:o.message,onChange:a,rows:"3",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none",placeholder:"Tell us why you'd like to join this project..."}),(0,Nt.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"All information you submit, including your message, will remain private and only accessible to the project initiator."})]}),(0,Nt.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:(0,Nt.jsxs)("div",{className:"flex items-start gap-2",children:[(0,Nt.jsx)("svg",{className:"w-4 h-4 text-yellow-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Nt.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("p",{className:"text-sm font-medium text-yellow-800",children:"Important: One-time submission only"}),(0,Nt.jsx)("p",{className:"text-xs text-yellow-700 mt-1",children:"Please review your information carefully before submitting. You cannot edit your application after submission."})]})]})}),(0,Nt.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,Nt.jsx)(Rt,{type:"button",onClick:r,fullWidth:!0,className:"flex-1",children:"Cancel"}),(0,Nt.jsx)(Mt,{type:"submit",fullWidth:!0,className:"flex-1",children:"Submit Application"})]})]})})};var Ba=r(337);const Ga=e=>{let{projectId:t,milestones:r=[],dueDate:o,onViewMilestones:a,isMilestonePage:s=!1,isInitiator:n=!1}=e;const i=r.length,l=r.filter(e=>["done","completed"].includes(e.status)).length,c=Math.round(l/Math.max(i,1)*100),d=i>0,u=d?"Completed ".concat(l," / ").concat(i," milestones"):"No milestones created yet",h=d?"View Milestones":n?"Create Milestones":"Milestones Locked",m=!d&&!n,p=()=>{d&&a&&!s?a(t):!d&&n&&(console.log("Initiator can create milestones for project:",t),window.location.href="/upload/form?tab=milestones")};return(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8 w-full",children:[(0,Nt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Nt.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Project Progress"}),o&&"Not specified"!==o&&""!==o&&(0,Nt.jsxs)("span",{className:"text-sm text-gray-600 mr-4",children:["Deadline: ",o]})]}),d?(0,Nt.jsxs)("div",{className:"flex items-center gap-4 ".concat(s?"":"cursor-pointer hover:bg-gray-50 p-3 rounded-lg transition-colors duration-200"),onClick:s?void 0:p,role:s?void 0:"button",tabIndex:s?void 0:0,onKeyDown:s?void 0:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),p())},"aria-label":s?void 0:"".concat(u," \xb7 Click to view milestone details"),children:[(0,Nt.jsxs)("div",{className:"flex-1",children:[(0,Nt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Nt.jsx)("span",{className:"text-sm font-medium text-gray-700",children:u}),(0,Nt.jsxs)("span",{className:"text-sm text-gray-600",children:[c,"%"]})]}),(0,Nt.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":c,"aria-label":"Project progress: ".concat(c,"%"),children:(0,Nt.jsx)("div",{className:"h-full bg-purple-600 transition-all duration-300 ease-in-out",style:{width:"".concat(c,"%")}})})]}),!s&&(0,Nt.jsx)("button",{onClick:e=>{e.stopPropagation(),p()},className:"px-4 py-2 rounded-lg font-medium transition-all duration-200 bg-purple-600 text-white hover:bg-purple-700 shadow-lg hover:shadow-xl transform hover:-translate-y-1","aria-label":"View milestone details",children:h})]}):(0,Nt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Nt.jsxs)("div",{className:"flex-1",children:[(0,Nt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Nt.jsx)("span",{className:"text-sm font-medium text-gray-400",children:u}),(0,Nt.jsx)("span",{className:"text-sm text-gray-400",children:"0%"})]}),(0,Nt.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":"0","aria-label":"Project progress: 0% (disabled - no milestones)",children:(0,Nt.jsx)("div",{className:"h-full bg-gray-400 transition-all duration-300 ease-in-out",style:{width:"0%"}})})]}),!s&&(0,Nt.jsx)("button",{disabled:m,onClick:e=>{e.stopPropagation(),p()},className:"px-4 py-2 rounded-lg font-medium transition-all duration-200 ".concat(n&&!d?"bg-purple-600 text-white hover:bg-purple-700 shadow-lg hover:shadow-xl transform hover:-translate-y-1":m?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-purple-600 text-white hover:bg-purple-700 shadow-lg hover:shadow-xl transform hover:-translate-y-1"),"aria-label":m?"No milestones available":"Create milestones",children:h})]}),!d&&(0,Nt.jsx)("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,Nt.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,Nt.jsx)("div",{children:(0,Nt.jsx)("p",{className:"text-yellow-800 text-base font-semibold mb-1",children:"Set up Milestones now to unlock Project Progress and open the Discussion Board! (Only Initiator can create milestones)"})})]})})]})},Ha=e=>{let{imageKey:t,alt:r="Collaboration hero image",className:a="w-full h-full object-cover"}=e;const[s,n]=(0,o.useState)(null),[i,l]=(0,o.useState)(!1),[c,d]=(0,o.useState)(!1);return(0,o.useEffect)(()=>((async()=>{if(!t)return n(null),void d(!1);l(!0),d(!1);try{console.log("[CollaborationHeaderImage] Loading image for key: ".concat(t));const e=await Ba.default.getImageUrl(t);e?(console.log("[CollaborationHeaderImage] Successfully loaded image: ".concat(e.substring(0,50),"...")),n(e)):(console.warn("[CollaborationHeaderImage] No image URL returned for key: ".concat(t)),d(!0))}catch(e){console.warn("[CollaborationHeaderImage] Failed to load image: ".concat(t),e),d(!0)}finally{l(!1)}})(),()=>{s&&s.startsWith("blob:")&&(console.log("[CollaborationHeaderImage] Cleaning up blob URL: ".concat(s.substring(0,50),"...")),URL.revokeObjectURL(s))}),[t]),i?(0,Nt.jsx)("div",{className:"w-full h-full bg-gradient-to-r from-purple-600 to-purple-700 flex items-center justify-center",children:(0,Nt.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}):c||!s?(0,Nt.jsx)("div",{className:"w-full h-full bg-gradient-to-r from-purple-600 to-purple-700"}):(0,Nt.jsx)("img",{src:s,alt:r,className:a,onError:e=>{console.warn("[CollaborationHeaderImage] Image failed to load: ".concat(s.substring(0,50),"...")),e.target.style.display="none"}})},qa=e=>{var t,r,o;let{project:a,isSaved:s,onBack:n,onSaveToggle:i,onApplyNow:l,onViewMilestones:c,enableProjectProgressBar:d=!0,hasSubmittedApplication:u=!1}=e;const h=(0,Rr.HW)();console.log("[CollaborationHeader] project:",a),console.log("[CollaborationHeader] project.deadline (raw):",null===a||void 0===a?void 0:a.deadline);const m=(null===a||void 0===a?void 0:a.deadline)||(null===a||void 0===a?void 0:a.applicationDeadline)||"",p=!!m&&""!==m.trim(),g=m||"";console.log("[CollaborationHeader] deadline\u663e\u793a\u6761\u4ef6:",{rawDeadline:null===a||void 0===a?void 0:a.deadline,applicationDeadline:null===a||void 0===a?void 0:a.applicationDeadline,deadlineValue:m,deadlineDisplayText:g,shouldShowDeadline:p,hasDeadline:!!m,notEmpty:""!==(null===m||void 0===m?void 0:m.trim()),deadlineType:typeof m,deadlineLength:null===m||void 0===m?void 0:m.length});const f=(null===h||void 0===h?void 0:h.id)===(null===(t=a.author)||void 0===t?void 0:t.id);return(0,Nt.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,Nt.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,Nt.jsx)(Wt,{onClick:n,text:"Back to TAGMe",className:"mb-6"}),(0,Nt.jsxs)("div",{className:"flex items-center text-sm text-gray-500 mb-4",children:[(0,Nt.jsx)("button",{onClick:n,className:"hover:text-tag-blue transition-colors duration-200",children:"Collaborations"}),(0,Nt.jsx)("span",{className:"mx-2",children:"/"}),(0,Nt.jsx)("span",{className:"text-gray-900 font-medium",children:a.title})]}),(0,Nt.jsx)("div",{className:"relative mb-6",children:(0,Nt.jsx)("div",{className:"w-full h-48 bg-gradient-to-r from-purple-600 to-purple-700 rounded-lg overflow-hidden relative",children:a.heroImage?(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsx)(Ha,{imageKey:a.heroImage,alt:a.title}),(0,Nt.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600/30 to-purple-700/30"})]}):(0,Nt.jsx)("div",{className:"w-full h-full bg-gradient-to-r from-purple-600 to-purple-700"})})}),(0,Nt.jsxs)("div",{className:"mb-6",children:[(0,Nt.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:a.title}),(0,Nt.jsxs)("div",{className:"flex flex-wrap items-center gap-6 mb-4 text-sm text-gray-600",children:[(0,Nt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Nt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Nt.jsx)("span",{children:a.postedTime})]}),(0,Nt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Nt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,Nt.jsxs)("span",{children:["Deadline:"," ",(null===a||void 0===a?void 0:a.applicationDeadline)||(null===a||void 0===a?void 0:a.deadline)||"Flexible"]})]}),(null===(r=a.contactInfo)||void 0===r?void 0:r.email)&&(0,Nt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Nt.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),(0,Nt.jsx)("span",{className:"text-gray-600",children:a.contactInfo.email})]}),(null===(o=a.contactInfo)||void 0===o?void 0:o.discord)&&(0,Nt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Nt.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"})}),(0,Nt.jsx)("span",{className:"text-gray-600",children:a.contactInfo.discord})]})]}),(0,Nt.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,Nt.jsx)("div",{className:"flex flex-wrap gap-2",children:a.tags.map((e,t)=>(0,Nt.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 text-sm font-medium rounded-full",children:e},t))}),(0,Nt.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,Nt.jsx)(zt,{isFavorited:s,itemType:"collaboration",itemId:a.id,onToggle:i,size:"md"}),!f&&(0,Nt.jsx)(Mt,{onClick:u?void 0:l,size:"lg",disabled:u,className:"w-full sm:w-auto transition-all duration-300 ".concat(u?"bg-green-600 border-green-600 cursor-not-allowed opacity-75":"bg-purple-600 hover:bg-purple-700 border-purple-600"),children:u?(0,Nt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Nt.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Application Submitted"]}):"Apply Now"})]})]})]}),d&&(0,Nt.jsx)("div",{className:"w-full",children:(0,Nt.jsx)(Ga,{projectId:a.id,milestones:a.milestones||[],dueDate:a.deadline||a.applicationDeadline,onViewMilestones:c,isInitiator:f})})]})})},Va=e=>{let{applications:t=[],onApplicationClick:r,isInitiator:o=!1,positionId:a}=e;return 0===t.length?(0,Nt.jsxs)("div",{className:"text-center py-8",children:[(0,Nt.jsx)("div",{className:"text-gray-400 mb-2",children:(0,Nt.jsx)("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,Nt.jsx)("p",{className:"text-gray-500 text-sm",children:"No applications yet"}),(0,Nt.jsx)("p",{className:"text-gray-400 text-xs mt-1",children:"Be the first to apply!"})]}):(0,Nt.jsxs)("div",{className:"space-y-4",children:[(0,Nt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Nt.jsxs)("h4",{className:"font-semibold text-gray-900",children:["Applications (",t.length,")"]}),(0,Nt.jsxs)("span",{className:"text-sm text-gray-500",children:[t.length," ",1===t.length?"person":"people"," applied"]})]}),(0,Nt.jsx)("div",{className:"grid grid-cols-8 gap-3",children:t.map((e,t)=>(0,Nt.jsx)("div",{className:"text-center",children:(0,Nt.jsxs)("div",{className:"relative group",children:[(0,Nt.jsx)("img",{src:e.avatar||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",alt:e.name,className:"w-12 h-12 rounded-full object-cover border-2 border-gray-200 transition-colors duration-200 ".concat(o?"hover:border-purple-300 cursor-pointer":"hover:border-gray-300"),onClick:t=>{console.log("[ProjectDescription ApplicationsWall] Clicking application:",e.name),console.log("[ProjectDescription ApplicationsWall] Position ID:",a),console.log("[ProjectDescription ApplicationsWall] Is initiator:",o),o&&r&&r(e,t,a)}}),"approved"===e.status&&(0,Nt.jsx)("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white flex items-center justify-center",children:(0,Nt.jsx)("svg",{className:"w-2 h-2 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Nt.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})},t))}),t.length>6&&(0,Nt.jsx)("div",{className:"text-center",children:(0,Nt.jsxs)("button",{className:"text-sm text-purple-600 hover:text-purple-700 font-medium",children:["View all ",t.length," applications"]})})]})},Ja=e=>{var t,r,o,a,s,n;let{project:i,positions:l,hasSubmittedApplication:c,showWarning:d,appliedPositions:u,onApply:h,onCancelApplication:m,onFillPosition:p,getStatusColor:g,getStatusText:f,currentUser:v,onApplicationClick:x,isInitiator:b=!1}=e;return(0,Nt.jsx)("div",{className:"lg:col-span-2",children:(0,Nt.jsxs)(Ft,{className:"mb-8",children:[i.description&&(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Project Description"}),(0,Nt.jsx)("p",{className:"text-gray-700 leading-relaxed mb-6",children:i.description})]}),(0,Nt.jsxs)("div",{className:"flex flex-wrap gap-6 mt-6 pt-6 border-t border-gray-200",children:[(0,Nt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),(0,Nt.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,Nt.jsx)("span",{className:"font-medium",children:"Expected Team Size:"})," ",i.teamSize||"Not specified"]})]}),(0,Nt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Nt.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,Nt.jsx)("span",{className:"font-medium",children:"Duration:"})," ",i.duration||"Not specified"]})]}),(0,Nt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,Nt.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,Nt.jsx)("span",{className:"font-medium",children:"Meeting Schedule:"})," ",i.meetingFrequency||"Not specified"]})]})]}),((null===(t=i.contactInfo)||void 0===t?void 0:t.email)||(null===(r=i.contactInfo)||void 0===r?void 0:r.discord)||(null===(o=i.contactInfo)||void 0===o?void 0:o.other))&&(0,Nt.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),(0,Nt.jsxs)("div",{className:"space-y-3",children:[(null===(a=i.contactInfo)||void 0===a?void 0:a.email)&&(0,Nt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),(0,Nt.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,Nt.jsx)("span",{className:"font-medium",children:"Email:"})," ",i.contactInfo.email]})]}),(null===(s=i.contactInfo)||void 0===s?void 0:s.discord)&&(0,Nt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),(0,Nt.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,Nt.jsx)("span",{className:"font-medium",children:"Discord:"})," ",i.contactInfo.discord]})]}),(null===(n=i.contactInfo)||void 0===n?void 0:n.other)&&(0,Nt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),(0,Nt.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,Nt.jsx)("span",{className:"font-medium",children:"Other:"})," ",i.contactInfo.other]})]})]})]}),(0,Nt.jsxs)("div",{className:"mt-24",children:[(0,Nt.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Open Positions"}),!c&&!b&&(0,Nt.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:(0,Nt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,Nt.jsx)("span",{className:"text-yellow-800 text-sm font-medium",children:"Please 'Apply now' above to activate position applications"})]})}),c&&(0,Nt.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:(0,Nt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,Nt.jsx)("span",{className:"text-green-800 text-sm font-medium",children:"Application submitted! You can now apply for specific positions."})]})}),(0,Nt.jsx)("div",{className:"space-y-4",children:null===l||void 0===l?void 0:l.map((e,t)=>{var r;return(0,Nt.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow duration-200",children:[(0,Nt.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.title}),(0,Nt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(g(e.status)),children:f(e.status)})]}),(0,Nt.jsx)("div",{className:"flex gap-2",children:b?(0,Nt.jsx)("button",{onClick:()=>p(e.id),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ".concat("filled"===e.status?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-purple-600 text-white hover:bg-purple-700"),children:"filled"===e.status?"Reopen Position":"Fill Position"}):(0,Nt.jsx)(Nt.Fragment,{children:"filled"===e.status?(0,Nt.jsx)("button",{disabled:!0,className:"px-4 py-2 bg-gray-100 text-gray-500 rounded-lg text-sm font-medium cursor-not-allowed",children:"Position Filled"}):(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsx)("button",{onClick:()=>h(e.id),disabled:!c||u.has(e.id),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ".concat(u.has(e.id)?"bg-green-100 text-green-800 cursor-not-allowed":c?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:u.has(e.id)?"Applied":"Apply"}),u.has(e.id)&&(0,Nt.jsx)("button",{onClick:()=>m(e.id),className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg text-sm font-medium hover:bg-red-200 transition-colors duration-200",children:"Cancel"})]})})})]}),(0,Nt.jsx)("p",{className:"text-gray-700 text-sm mb-4",children:e.description}),(0,Nt.jsxs)("div",{className:"mb-4",children:[(0,Nt.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Required Skills:"}),(0,Nt.jsx)("div",{className:"flex flex-wrap gap-2",children:null===(r=e.requiredSkills)||void 0===r?void 0:r.map((e,t)=>(0,Nt.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full",children:e},t))})]}),(0,Nt.jsx)("div",{className:"p-6",children:(0,Nt.jsx)(Va,{applications:e.applications||[],onApplicationClick:x,isInitiator:b,positionId:e.id})})]},t)})})]})]})})},Za="tag_apply_form_data",Ka=(e,t)=>{try{const r="".concat(Za,"_").concat(e,"_").concat(t),o=localStorage.getItem(r);if(!o)return console.log("[applyFormService] No apply form data found for collaboration ".concat(e,", user ").concat(t)),null;const a=JSON.parse(o);return console.log("[applyFormService] Retrieved apply form data for collaboration ".concat(e,", user ").concat(t,":"),a),a}catch(r){return console.error("[applyFormService] Failed to get apply form data:",r),null}},Ya="tag_positions_status",Qa=e=>{try{const t="".concat(Ya,"_").concat(e),r=localStorage.getItem(t);return r?JSON.parse(r):{}}catch(t){return console.warn("Failed to get stored position status:",t),{}}},$a=(e,t,r)=>{try{const o=Qa(e);return o[t]=r,((e,t)=>{try{const r="".concat(Ya,"_").concat(e);localStorage.setItem(r,JSON.stringify(t)),console.log("[positionService] Saved position status for collaboration ".concat(e,":"),t)}catch(r){console.warn("Failed to save position status:",r)}})(e,o),{success:!0,data:o}}catch(o){return console.error("Failed to update position status:",o),{success:!1,error:o.message}}},Xa=e=>{switch(e){case"available":return"bg-green-100 text-green-800";case"filled":default:return"bg-gray-100 text-gray-800";case"in_progress":return"bg-blue-100 text-blue-800"}},es=e=>{switch(e){case"available":return"Available";case"filled":return"Position Filled";case"in_progress":return"In Progress";default:return"Unknown"}},ts=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(console.log("[getPositionsData] Input projectData:",t),console.log("[getPositionsData] ProjectData roles:",null===t||void 0===t?void 0:t.roles),console.log("[getPositionsData] ProjectData roles length:",null===t||void 0===t||null===(e=t.roles)||void 0===e?void 0:e.length),console.log("[getPositionsData] ProjectData roles type:",typeof(null===t||void 0===t?void 0:t.roles)),console.log("[getPositionsData] ProjectData roles is array:",Array.isArray(null===t||void 0===t?void 0:t.roles)),!t||!t.roles||0===t.roles.length)return console.log("[getPositionsData] Using default positions (no project data or empty roles)"),[{id:1,title:"UI/UX Designer",description:"We're looking for a talented UI/UX designer to create beautiful, intuitive user interfaces and engaging user experiences. You'll work closely with our development team to bring designs to life.",status:"available",requiredSkills:["Figma","Adobe Creative Suite","User Research","Prototyping","Design Systems"],applications:[]},{id:2,title:"Frontend Developer",description:"Join our frontend team to build responsive, performant web applications using modern technologies. You'll collaborate with designers and backend developers to create seamless user experiences.",status:"available",requiredSkills:["React","TypeScript","CSS/SCSS","JavaScript","Responsive Design"],applications:[]}];console.log("[getPositionsData] Converting roles to positions...");const r=t.roles.map((e,t)=>{console.log("[getPositionsData] Processing role ".concat(t,":"),e);const r=e.requiredSkills?Array.isArray(e.requiredSkills)?e.requiredSkills:"string"===typeof e.requiredSkills?e.requiredSkills.split(",").map(e=>e.trim()).filter(e=>e):[]:[],o={id:e.id||t+1,title:e.title||e.customRole||"Role ".concat(t+1),description:e.description||e.roleDescription||"",status:e.status||"available",requiredSkills:r,applications:e.applications||[]};return console.log("[getPositionsData] Created position ".concat(t,":"),o),o});return console.log("[getPositionsData] Final positions:",r),r},rs=(e,t)=>{const{goBack:r,navigateToMilestone:o,navigateToArtist:a}=Qo(),{appliedPositions:s,hasSubmittedApplication:i,showWarning:l,showSuccessToast:c,showCancelModal:d,cancelPositionId:u}=e,{setAppliedPositions:h,setHasSubmittedApplication:m,setShowWarning:p,setShowSuccessToast:g,setShowCancelModal:f,setCancelPositionId:v,setShowApplyModal:x,setApplyForm:b,setIsSaved:y,setPositions:w,updateProjectData:j,updatePositions:k,saveCollaborationData:N}=t;return{goBack:r,navigateToMilestone:o,navigateToArtist:a,handleApply:async t=>{if(!i)return p(!0),void setTimeout(()=>p(!1),3e3);h(e=>{const r=new Set(e);return r.add(t),r});try{var r,o,a,s,l,c,d;const i=(0,Rr.HW)(),h=(null===i||void 0===i?void 0:i.id)||(null===(r=e.currentUser)||void 0===r?void 0:r.id),p=await(0,Pt.getUnifiedAvatar)(h);let D=(null===i||void 0===i?void 0:i.name)||(null===(o=e.currentUser)||void 0===o?void 0:o.name)||"Anonymous";try{var u;const e=await uo(h);e.success&&null!==(u=e.data)&&void 0!==u&&u.fullName&&(D=e.data.fullName)}catch(E){console.warn("[useCollaborationActions] Failed to get user profile:",E)}const T={userId:h,name:D,avatar:p||(null===i||void 0===i?void 0:i.avatar)||(null===(a=e.currentUser)||void 0===a?void 0:a.avatar)||"/assets/placeholder.svg",email:(null===(s=e.applyForm)||void 0===s?void 0:s.email)||"",portfolio:(null===(l=e.applyForm)||void 0===l?void 0:l.portfolio)||"",message:(null===(c=e.applyForm)||void 0===c?void 0:c.message)||""};console.log("[useCollaborationActions] Apply form data:",e.applyForm),console.log("[useCollaborationActions] Created application:",T);const L=await Fa.addApplication(null===(d=e.project)||void 0===d?void 0:d.id,t,T);if(L.success){w(e=>e.map(e=>e.id===t?(0,n.A)((0,n.A)({},e),{},{applications:[...e.applications||[],L.data]}):e)),console.log("[useCollaborationActions] User ".concat(T.name," applied for position ").concat(t)),m(!0);try{var g,f,v,x,b,y,j,k,N,S,C,A;let r=null;if(null!==(g=e.project)&&void 0!==g&&null!==(f=g.author)&&void 0!==f&&f.id?r=e.project.author.id:null!==(v=e.project)&&void 0!==v&&v.initiatorId?r=e.project.initiatorId:null!==(x=e.project)&&void 0!==x&&x.authorId?r=e.project.authorId:null!==(b=e.project)&&void 0!==b&&null!==(y=b.creator)&&void 0!==y&&y.id?r=e.project.creator.id:(r="alice",console.warn("[useCollaborationActions] Using default initiatorId: alice")),console.log("[useCollaborationActions] Debug notification creation:"),console.log("  - Current user ID:",h),console.log("  - Project author ID:",null===(j=e.project)||void 0===j||null===(k=j.author)||void 0===k?void 0:k.id),console.log("  - Project initiatorId:",null===(N=e.project)||void 0===N?void 0:N.initiatorId),console.log("  - Project authorId:",null===(S=e.project)||void 0===S?void 0:S.authorId),console.log("  - Project creator ID:",null===(C=e.project)||void 0===C||null===(A=C.creator)||void 0===A?void 0:A.id),console.log("  - Final initiatorId:",r),console.log("  - Project data:",e.project),r&&r!==h){var _,I;console.log("[useCollaborationActions] Creating notification...");const o=await Hr.l.createCollaborationApplicationNotification(h,T.name,T.avatar,null===(_=e.project)||void 0===_?void 0:_.id,null===(I=e.project)||void 0===I?void 0:I.title,r,{positionId:t,email:T.email,portfolio:T.portfolio,message:T.message});o.success?(console.log("[useCollaborationActions] Created notification for initiator ".concat(r)),console.log("[useCollaborationActions] Notification result:",o)):console.warn("[useCollaborationActions] Failed to create notification:",o.error)}else console.warn("[useCollaborationActions] Skipping notification creation:"),console.warn("  - initiatorId is missing or same as current user"),console.warn("  - initiatorId:",r),console.warn("  - userId:",h)}catch(P){console.warn("[useCollaborationActions] Error creating notification:",P)}}else console.error("[useCollaborationActions] Failed to save application:",L.error)}catch(E){console.error("[useCollaborationActions] Error applying for position:",E)}},handleApplyNowClick:()=>{x(!0)},handleApplySubmit:t=>{t.preventDefault(),m(!0),x(!1);try{var r,o,a;const t=(0,Rr.HW)(),s=(null===t||void 0===t?void 0:t.id)||(null===(r=e.currentUser)||void 0===r?void 0:r.id);((e,t,r)=>{try{const o="".concat(Za,"_").concat(e,"_").concat(t),a=(0,n.A)((0,n.A)({},r),{},{userId:t,timestamp:Date.now()});return localStorage.setItem(o,JSON.stringify(a)),console.log("[applyFormService] Saved apply form data for collaboration ".concat(e,", user ").concat(t,":"),r),{success:!0,data:a}}catch(o){return console.error("[applyFormService] Failed to save apply form data:",o),{success:!1,error:o.message}}})(null===(o=e.project)||void 0===o?void 0:o.id,s,e.applyForm),console.log("[useCollaborationActions] Saved apply form data for project ".concat(null===(a=e.project)||void 0===a?void 0:a.id,", user ").concat(s,":"),e.applyForm)}catch(s){console.error("[useCollaborationActions] Failed to save apply form data:",s)}g(!0)},handleApplyFormChange:e=>{const{name:t,value:r}=e.target;b(e=>(0,n.A)((0,n.A)({},e),{},{[t]:r}))},handleCancelApplication:e=>{v(e),f(!0)},handleConfirmCancelApplication:async()=>{if(u){var t;h(e=>{const t=new Set(e);return t.delete(u),t}),w(t=>t.map(t=>{if(t.id===u){var r;const o=(0,Rr.HW)(),a=(null===o||void 0===o?void 0:o.id)||(null===(r=e.currentUser)||void 0===r?void 0:r.id);return(0,n.A)((0,n.A)({},t),{},{applications:(t.applications||[]).filter(e=>e.userId!==a)})}return t}));try{var r,o;const t=(0,Rr.HW)(),a=(null===t||void 0===t?void 0:t.id)||(null===(r=e.currentUser)||void 0===r?void 0:r.id);await Fa.removeApplication(null===(o=e.project)||void 0===o?void 0:o.id,u,a)}catch(a){console.error("[useCollaborationActions] Failed to remove application from storage:",a)}console.log("[useCollaborationActions] User ".concat(null===(t=e.currentUser)||void 0===t?void 0:t.name," cancelled application for position ").concat(u))}f(!1),v(null)},handleCloseCancelModal:()=>{f(!1),v(null)},handleViewMilestones:()=>{o(e.project)},handleSaveToggle:async(e,t,r)=>{try{await zr.toggleFavorite(e,t,r),y(r)}catch(o){console.error("Failed to toggle favorite:",o)}},handleFillPosition:async t=>{try{console.log("[useCollaborationActions] Filling position:",t);const r=e.positions.find(e=>e.id===t),o="filled"===(null===r||void 0===r?void 0:r.status)?"available":"filled",a=await $a(e.project.id,t,o);a.success?(w(e=>e.map(e=>e.id===t?(0,n.A)((0,n.A)({},e),{},{status:o}):e)),console.log("[useCollaborationActions] Position ".concat("filled"===o?"filled":"reopened"," successfully"))):console.error("[useCollaborationActions] Failed to update position status:",a.error)}catch(r){console.error("[useCollaborationActions] Error updating position status:",r)}},updateProjectData:j,updatePositions:k,saveCollaborationData:N,getStatusColor:Xa,getStatusText:es}},os=()=>{var e,t,a,s;const{state:i}=zo(),l=le(),{id:c}=he(),[d,u]=(0,o.useState)(()=>{var e;const t=i.selectedCollaboration||(null===(e=l.state)||void 0===e?void 0:e.project);if(!t&&c){console.log("[useCollaborationData] No initial data, trying localStorage for id:",c);const e=ta(c);if(e)return console.log("[useCollaborationData] Found data in localStorage:",e),e}return t});console.log("[useCollaborationData] Final projectData:",d),console.log("[useCollaborationData] Final projectData.roles:",null===d||void 0===d?void 0:d.roles),console.log("[useCollaborationData] Final projectData.collaborators:",null===d||void 0===d?void 0:d.collaborators),console.log("[useCollaborationData] Final projectData.vision?.collaborators:",null===d||void 0===d||null===(e=d.vision)||void 0===e?void 0:e.collaborators),console.log("[useCollaborationData] ID from URL:",c),console.log("[useCollaborationData] Context data:",i.selectedCollaboration),console.log("[useCollaborationData] Location state:",null===(t=l.state)||void 0===t?void 0:t.project),console.log("[useCollaborationData] Location state roles:",null===(a=l.state)||void 0===a||null===(s=a.project)||void 0===s?void 0:s.roles);const[h,m]=(0,o.useState)(new Set),[p,g]=(0,o.useState)(!1),[f,v]=(0,o.useState)(!1),[x,b]=(0,o.useState)({email:"",portfolio:"",message:""}),[y,w]=(0,o.useState)(!1),[j,k]=(0,o.useState)(!1),[N,S]=(0,o.useState)(!1),[C,A]=(0,o.useState)(!1),[_,I]=(0,o.useState)(null),[E,P]=(0,o.useState)((0,Rr.HW)()),[D,T]=(0,o.useState)([]),[L,M]=(0,o.useState)(null);(0,o.useEffect)(()=>{const e=(e=>{var t,r,o,a,s,n,i,l,c,d,u,h,m,p,g,f,v,x,b,y;console.log("[processProjectData] Input projectData:",e),console.log("[processProjectData] Input projectData.roles:",null===e||void 0===e?void 0:e.roles);const w=e?{id:e.id,title:e.title,author:{id:(null===(t=e.author)||void 0===t?void 0:t.id)||e.authorId||null,title:e.title,artist:(null===(r=e.author)||void 0===r?void 0:r.name)||e.authorName||"Unknown",artistAvatar:(null===(o=e.author)||void 0===o?void 0:o.avatar)||e.authorAvatar||null,description:e.subtitle,image:e.posterPreview||e.image,category:(null===(a=e.categories)||void 0===a?void 0:a[0])||"Project",likes:e.likes,views:e.views,timeAgo:e.createdAt?new Date(e.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Unknown date",role:(null===(s=e.author)||void 0===s?void 0:s.role)||"Initiator"},duration:e.duration||"Not specified",teamSize:e.teamSize||"Not specified",postedTime:e.createdAt?new Date(e.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Unknown date",tags:[],heroImage:e.posterPreview||e.image,description:e.description||e.subtitle||"",meetingFrequency:e.meetingSchedule||"Not specified",deadline:e.applicationDeadline||e.deadline||null,applicationDeadline:e.applicationDeadline||e.deadline||null,contactInfo:{discord:(null===(n=e.contactInfo)||void 0===n?void 0:n.discord)||e.contactDiscord||null,email:(null===(i=e.contactInfo)||void 0===i?void 0:i.email)||e.contactEmail||null,other:(null===(l=e.contactInfo)||void 0===l?void 0:l.other)||e.contactOther||null},status:"in_progress",vision:{tagline:e.projectVision||(null===(c=e.vision)||void 0===c?void 0:c.tagline)||(null===(d=e.vision)||void 0===d?void 0:d.narrative)||"",narrative:e.whyThisMatters||(null===(u=e.vision)||void 0===u?void 0:u.narrative)||(null===(h=e.vision)||void 0===h?void 0:h.whyThisMatters)||"",lookingFor:e.projectType?e.projectType.split(",").map(e=>e.trim()).filter(e=>e.length>0):[],contact:{discord:e.contactDiscord||null,email:e.contactEmail||null},collaborators:e.collaborators||[]},milestones:e.milestones||[],roles:e.roles||[],collaborators:e.collaborators||[]}:{id:1,title:"Modern E-commerce Mobile App",author:{id:1,title:"Modern E-commerce Mobile App",artist:"Sarah Chen",artistAvatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",description:"A cutting-edge mobile shopping experience",image:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=800&h=600&fit=crop",category:"Mobile App",likes:128,views:2048,timeAgo:"2 hours ago",role:"Initiator"},duration:e.duration||"Not specified",teamSize:e.teamSize||"Not specified",postedTime:"2 hours ago",tags:["Mobile App","E-commerce","React Native"],heroImage:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=800&h=600&fit=crop",description:"A cutting-edge mobile shopping experience",meetingFrequency:e.meetingSchedule||"Not specified",deadline:e.applicationDeadline||e.deadline||null,applicationDeadline:e.applicationDeadline||e.deadline||null,contactInfo:{discord:(null===(m=e.contactInfo)||void 0===m?void 0:m.discord)||e.contactDiscord||null,email:(null===(p=e.contactInfo)||void 0===p?void 0:p.email)||e.contactEmail||null,other:(null===(g=e.contactInfo)||void 0===g?void 0:g.other)||e.contactOther||null},status:"in_progress",vision:{tagline:e.projectVision||(null===(f=e.vision)||void 0===f?void 0:f.tagline)||(null===(v=e.vision)||void 0===v?void 0:v.narrative)||"",narrative:e.whyThisMatters||(null===(x=e.vision)||void 0===x?void 0:x.narrative)||(null===(b=e.vision)||void 0===b?void 0:b.whyThisMatters)||"",lookingFor:e.projectType?e.projectType.split(",").map(e=>e.trim()).filter(e=>e.length>0):[],contact:{discord:e.contactDiscord||null,email:e.contactEmail||null},collaborators:e.collaborators||[]},milestones:e.milestones||[],roles:e.roles||[],collaborators:e.collaborators||[]};return console.log("[processProjectData] Final project.roles:",null===w||void 0===w?void 0:w.roles),console.log("[processProjectData] Final project.collaborators:",null===w||void 0===w?void 0:w.collaborators),console.log("[processProjectData] Final project.vision?.collaborators:",null===w||void 0===w||null===(y=w.vision)||void 0===y?void 0:y.collaborators),w||null})(d);if(console.log("[useCollaborationData] Processed project:",e),console.log("[useCollaborationData] Processed project.roles:",null===e||void 0===e?void 0:e.roles),(null===e||void 0===e||!e.roles||0===e.roles.length)&&(console.log("[useCollaborationData] Processed project has no roles, trying localStorage recovery..."),c)){const t=ta(c);if(t&&t.roles&&t.roles.length>0){console.log("[useCollaborationData] Found roles in localStorage:",t.roles);const r=(0,n.A)((0,n.A)({},e),{},{roles:t.roles});return console.log("[useCollaborationData] Updated project with roles:",r),void M(r)}}M(e)},[d,l,i,c]),(0,o.useEffect)(()=>{var e,t;if(!c)return;const r=d&&(!d.roles||!d.collaborators||!(null!==(e=d.vision)&&void 0!==e&&e.collaborators));console.log("[useCollaborationData] Data completeness check:"),console.log("  projectData exists:",!!d),console.log("  projectData.roles exists:",!(null===d||void 0===d||!d.roles)),console.log("  projectData.collaborators exists:",!(null===d||void 0===d||!d.collaborators)),console.log("  projectData.vision?.collaborators exists:",!(null===d||void 0===d||null===(t=d.vision)||void 0===t||!t.collaborators)),console.log("  hasIncompleteData:",r);const o=!d||r||d&&(!d.roles||0===d.roles.length);if(console.log("  needsDataRecovery:",o),o){console.log("[useCollaborationData] No data or incomplete data, trying localStorage for id:",c);const e=[c,parseInt(c),c.toString()];let t=null;for(const r of e)if(console.log("[useCollaborationData] Trying ID format: ".concat(r," (type: ").concat(typeof r,")")),t=ta(r),console.log("[useCollaborationData] getCollaborationDataById result:",t),t){console.log("[useCollaborationData] Found data with ID: ".concat(r));break}t?(console.log("[useCollaborationData] Found localStorage data:",t),console.log("[useCollaborationData] localStorage roles:",t.roles),u(t)):console.warn("[useCollaborationData] No data found in localStorage for any ID format")}},[c]);(0,o.useEffect)(()=>{const e=()=>{P((0,Rr.HW)())};return window.addEventListener("user:changed",e),()=>{window.removeEventListener("user:changed",e)}},[]),(0,o.useEffect)(()=>{if(console.log("[useCollaborationData] useEffect triggered, project?.id:",null===L||void 0===L?void 0:L.id),console.log("[useCollaborationData] project?.roles:",null===L||void 0===L?void 0:L.roles),null===L||void 0===L||!L.id)return void console.log("[useCollaborationData] No project ID, returning early");if(!L.roles||0===L.roles.length){console.log("[useCollaborationData] Project has no roles, trying to recover from localStorage...");const e=[L.id,parseInt(L.id),L.id.toString()];let t=null;for(const r of e)if(console.log("[useCollaborationData] Trying ID format: ".concat(r," (type: ").concat(typeof r,")")),t=ta(r),t&&t.roles&&t.roles.length>0){console.log("[useCollaborationData] Found roles data with ID: ".concat(r)),console.log("[useCollaborationData] Found roles:",t.roles);const e=(0,n.A)((0,n.A)({},L),{},{roles:t.roles});console.log("[useCollaborationData] Updated project with roles:",e),M(e)}console.log("[useCollaborationData] No roles data found in localStorage")}console.log("[useCollaborationData] About to call loadPositionsWithStatus"),(async()=>{try{const t=ts(L),r=(e=L.id,Qa(e)),o=await Fa.getApplicationsData(L.id),a=async()=>{if(o){const r=(0,Rr.HW)();if(null!==r&&void 0!==r&&r.id)try{var e;const t=await uo(r.id);if(t.success&&null!==(e=t.data)&&void 0!==e&&e.fullName){const e=t.data.fullName;let a=!1;if(Object.values(o).forEach(t=>{t.forEach(t=>{t.userId===r.id&&t.name!==e&&(a=!0)})}),a){await Fa.updateApplicationUserName(r.id,e);const t=await Fa.getApplicationsData(L.id);t&&Object.keys(t).forEach(o=>{t[o].forEach(t=>{t.userId===r.id&&(t.name=e)})})}}}catch(t){console.warn("[useCollaborationData] Failed to update application user names:",t)}}};a();(()=>{o&&Object.entries(o).forEach(e=>{let[t,r]=e;r.forEach(e=>{const r=e.id||e.userId;"approved"===Oa(t,r)?(console.log("[useCollaborationData] Restoring approved status from storage for user ".concat(e.userId," in position ").concat(t)),e.status="approved"):"approved"===e.status&&console.log("[useCollaborationData] Syncing approved status to storage for user ".concat(e.userId," in position ").concat(t))})})})();const s=t.map(e=>{const t=(null===o||void 0===o?void 0:o[e.id])||[];console.log("[useCollaborationData] Position ".concat(e.id," saved applications:"),t);const a=t.map(e=>(console.log("[useCollaborationData] Application ".concat(e.userId," status: ").concat(e.status)),(0,n.A)((0,n.A)({},e),{},{status:e.status||"pending"}))),s=(0,n.A)((0,n.A)({},e),{},{status:r[e.id]||e.status,applications:a});return console.log("[useCollaborationData] Final position ".concat(e.id," applications:"),s.applications),s});T(s)}catch(t){console.error("Failed to load positions with status:",t),T(ts(L))}var e})(),console.log("[useCollaborationData] loadPositionsWithStatus called!")},[null===L||void 0===L?void 0:L.id,null===L||void 0===L?void 0:L.roles]),(0,o.useEffect)(()=>{if(null===L||void 0===L||!L.id||null===E||void 0===E||!E.id)return;(async()=>{try{const e=await Fa.getApplicationsData(L.id);if(e){const t=new Set;Object.entries(e).forEach(e=>{let[r,o]=e;o.some(e=>e.userId===E.id)&&t.add(parseInt(r))}),m(t),console.log("[useCollaborationData] Initialized applied positions for user ".concat(E.id,":"),Array.from(t))}}catch(e){console.error("Failed to initialize applied positions:",e)}})()},[null===L||void 0===L?void 0:L.id,null===E||void 0===E?void 0:E.id]),(0,o.useEffect)(()=>{if(null===L||void 0===L||!L.id||null===E||void 0===E||!E.id)return;(()=>{try{const e=Ka(L.id,E.id);e&&(b(e),w(((e,t)=>{try{const r=Ka(e,t);if(!r)return!1;const o=r.email&&""!==r.email.trim(),a=o;return console.log("[applyFormService] Form data completeness check for collaboration ".concat(e,", user ").concat(t,":"),{hasEmail:o,isComplete:a}),a}catch(r){return console.error("[applyFormService] Failed to check form data completeness:",r),!1}})(L.id,E.id)),console.log("[useCollaborationData] Loaded saved apply form data for user:",e))}catch(e){console.error("Failed to load apply form data:",e)}})()},[null===L||void 0===L?void 0:L.id,null===E||void 0===E?void 0:E.id]),(0,o.useEffect)(()=>{if(null===L||void 0===L||!L.id)return;(async()=>{try{const e=await zr.checkFavoriteStatus("collaboration",L.id);e.success&&g(e.data.isFavorited)}catch(e){console.error("Failed to check favorite status:",e)}})()},[null===L||void 0===L?void 0:L.id]);const R=(0,o.useCallback)(e=>{M(e),console.log("[useCollaborationData] Updated project data:",e)},[]),F=(0,o.useCallback)(e=>{T(e),console.log("[useCollaborationData] Updated positions:",e)},[]),U=(0,o.useCallback)(async e=>{try{var t,o;console.log("[saveCollaborationData] Saving project data:",e);const i=(0,n.A)((0,n.A)({},e),{},{heroImage:void 0,posterPreview:void 0,image:void 0,author:e.author,authorId:e.authorId,authorName:e.authorName,id:e.id,title:e.title,description:e.description,collaborators:e.collaborators,roles:e.roles,vision:e.vision,duration:e.duration,teamSize:e.teamSize,tags:e.tags,status:e.status,postedTime:e.postedTime,applicationDeadline:e.applicationDeadline,meetingFrequency:e.meetingFrequency,contactInfo:e.contactInfo,categories:e.categories,milestones:e.milestones});console.log("[saveCollaborationData] Stripped project data for storage:",i),console.log("[saveCollaborationData] Project collaborators:",null===e||void 0===e?void 0:e.collaborators),console.log("[saveCollaborationData] Project vision collaborators:",null===e||void 0===e||null===(t=e.vision)||void 0===t?void 0:t.collaborators),console.log("[saveCollaborationData] Project positions:",null===e||void 0===e?void 0:e.roles);const l=localStorage.getItem("mock_collaborations"),c=l?JSON.parse(l):[];console.log("[saveCollaborationData] Existing collaborations:",c);const d=c.map(t=>{if(t.id===i.id){var r,o;console.log("[saveCollaborationData] Updating collaboration:",t.id),console.log("[saveCollaborationData] Old collaborators:",t.collaborators),console.log("[saveCollaborationData] New collaborators:",e.collaborators);const a=(0,n.A)((0,n.A)({},t),{},{collaborators:i.collaborators||t.collaborators||[],roles:i.roles||t.roles||[],vision:(0,n.A)((0,n.A)({},t.vision),{},{collaborators:(null===(r=i.vision)||void 0===r?void 0:r.collaborators)||i.collaborators||(null===(o=t.vision)||void 0===o?void 0:o.collaborators)||[]}),author:t.author,authorId:t.authorId,authorName:t.authorName,authorAvatar:t.authorAvatar,title:t.title,description:t.description,duration:t.duration,teamSize:t.teamSize,tags:t.tags,status:t.status,postedTime:t.postedTime,applicationDeadline:t.applicationDeadline,meetingFrequency:t.meetingFrequency,contactInfo:t.contactInfo,categories:t.categories,milestones:t.milestones});return console.log("[saveCollaborationData] Updated collaboration:",a),a}return t}),u=JSON.stringify(d),h=u.length;console.log("[saveCollaborationData] Data size: ".concat((h/1024/1024).toFixed(2)," MB"));try{localStorage.setItem("mock_collaborations",u),console.log("[saveCollaborationData] Successfully saved to localStorage")}catch(a){if("QuotaExceededError"!==a.name)throw a;console.error("[saveCollaborationData] localStorage quota exceeded, attempting smart cleanup...");try{const{default:e}=await Promise.resolve().then(r.bind(r,453)),t=await e.manualCleanup(["avatarCache","tempImages","oldCollaborations","draftData"]);if(!t.success)throw new Error("Smart cleanup failed: "+t.error);console.log("[saveCollaborationData] Smart cleanup freed ".concat((t.freedSpace/1024).toFixed(1),"KB")),localStorage.setItem("mock_collaborations",u),console.log("[saveCollaborationData] Successfully saved after smart cleanup")}catch(s){console.error("[saveCollaborationData] Smart cleanup failed, falling back to manual cleanup:",s);["tag.avatars","tag.images","portfolio_alice","portfolio_bryan"].forEach(e=>{localStorage.getItem(e)&&(localStorage.removeItem(e),console.log("[saveCollaborationData] Removed ".concat(e," to free space")))}),localStorage.setItem("mock_collaborations",u),console.log("[saveCollaborationData] Successfully saved after manual cleanup")}}const m=localStorage.getItem("mock_collaborations"),p=(m?JSON.parse(m):[]).find(e=>e.id===i.id);console.log("[saveCollaborationData] Verified saved collaborators:",null===p||void 0===p?void 0:p.collaborators),console.log("[saveCollaborationData] Verified saved vision collaborators:",null===p||void 0===p||null===(o=p.vision)||void 0===o?void 0:o.collaborators),console.log("[saveCollaborationData] Verified saved positions:",null===p||void 0===p?void 0:p.roles)}catch(i){console.error("[saveCollaborationData] Failed to save collaboration data:",i)}},[]);return{project:L,projectData:d,positions:D,appliedPositions:h,isSaved:p,showApplyModal:f,applyForm:x,hasSubmittedApplication:y,showWarning:j,showSuccessToast:N,showCancelModal:C,cancelPositionId:_,currentUser:E,enableProjectProgressBar:!0,enableAfterFinishedReview:!0,enableReviewApprovalPanel:!1,setAppliedPositions:m,setIsSaved:g,setShowApplyModal:v,setApplyForm:b,setHasSubmittedApplication:w,setShowWarning:k,setShowSuccessToast:S,setShowCancelModal:A,setCancelPositionId:I,setCurrentUser:P,setPositions:T,updateProjectData:R,updatePositions:F,saveCollaborationData:U}},as=e=>{var t,r;let{vision:o,owner:a,currentUser:s,onFinalReviewClick:n}=e;const i=o||{},l=i.tagline||i.narrative||"",c=i.narrative||i.whyThisMatters||"",d=(null===s||void 0===s?void 0:s.id)===(null===a||void 0===a?void 0:a.id),u=(null===o||void 0===o?void 0:o.collaborators)||[],{navigateToArtist:h}=Qo();return o?(0,Nt.jsxs)("div",{className:"space-y-6",children:[(0,Nt.jsxs)("div",{className:"flex items-center gap-4 pb-4 border-b border-gray-200 cursor-pointer hover:bg-gray-50 rounded-lg p-2 transition-colors duration-200",onClick:()=>{console.log("[ProjectVision] Owner data:",a),console.log("[ProjectVision] Owner ID:",a.id),console.log("[ProjectVision] Owner artist:",a.artist),a.id?(console.log("[ProjectVision] Navigating to artist:",a.id),h(a.id,"collaboration","Profile")):(console.warn("[ProjectVision] No artist ID found for owner:",a),console.warn("[ProjectVision] This means the collaboration data was created without proper author ID"))},title:"View ".concat(a.artist,"'s profile"),children:[a.artistAvatar?(0,Nt.jsx)("img",{src:a.artistAvatar,alt:a.artist,className:"w-12 h-12 rounded-full object-cover",onError:e=>{e.target.style.display="none"}}):(0,Nt.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-300 flex items-center justify-center",children:(0,Nt.jsx)("span",{className:"text-lg text-gray-600 font-medium",children:(null===(t=a.artist)||void 0===t||null===(r=t.charAt(0))||void 0===r?void 0:r.toUpperCase())||"U"})}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("div",{className:"font-medium text-gray-900",children:a.artist}),(0,Nt.jsx)("div",{className:"text-sm text-gray-500",children:(0,Nt.jsx)("span",{className:"inline-flex items-center px-2 py-1 bg-purple-100 text-purple-800 text-xs font-medium rounded-full",children:"Initiator"})})]})]}),l&&(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Project Vision"}),(0,Nt.jsxs)("p",{className:"text-gray-700 italic",children:['"',l,'"']})]}),c&&(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Why This Matters"}),(0,Nt.jsx)("div",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:c})]}),o.lookingFor&&o.lookingFor.length>0&&(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Looking For"}),(0,Nt.jsx)("div",{className:"flex flex-wrap gap-2",children:o.lookingFor.map((e,t)=>(0,Nt.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 text-sm font-medium rounded-full",children:e},t))})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Collaborators"}),(0,Nt.jsx)("div",{className:"space-y-3",children:u.length>0?u.map(e=>(0,Nt.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:[(0,Nt.jsx)("div",{className:"flex-shrink-0",children:(0,Nt.jsx)("img",{src:e.avatar,alt:e.name,className:"w-10 h-10 rounded-full object-cover",onError:e=>{e.target.style.display="none"}})}),(0,Nt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Nt.jsx)("div",{className:"font-medium text-gray-900 truncate",children:e.name}),(0,Nt.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,Nt.jsx)("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full ".concat("Initiator"===e.role?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"),children:e.role}),e.positionTitle&&(0,Nt.jsx)("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-700",children:e.positionTitle})]})]}),d&&(0,Nt.jsx)("button",{onClick:()=>n&&n(e),className:"px-3 py-1 bg-purple-600 text-white text-xs font-medium rounded-lg hover:bg-purple-700 transition-colors duration-200 flex-shrink-0",children:"Final Review"})]},e.id)):(0,Nt.jsxs)("div",{className:"text-center py-6 text-gray-500",children:[(0,Nt.jsx)("p",{children:"No collaborators yet"}),(0,Nt.jsx)("p",{className:"text-sm mt-1",children:"Approved applicants will appear here"})]})})]})]}):(0,Nt.jsx)("div",{className:"text-center py-8",children:(0,Nt.jsx)("p",{className:"text-gray-500",children:"No project vision available"})})},ss=e=>{let{project:t,owner:r,currentUser:a,eligibility:s}=e;const[n,i]=(0,o.useState)(!1),[l,c]=(0,o.useState)("ADD_EXPERIENCE"),d=a||{id:(()=>{if(null!==a&&void 0!==a&&a.id){return{alex:1,alice:2,bryan:3}[a.id]||a.id}return null})(),name:"Current User"};(0,o.useEffect)(()=>{console.log("[RightOwnerPanel] Component mounted with props:",{project:t,owner:r,currentUser:a,eligibility:s}),u()},[t.id]);const u=()=>{console.log("[RightOwnerPanel] Checking eligibility for user:",d),console.log("[RightOwnerPanel] Current user ID type:",typeof d.id),console.log("[RightOwnerPanel] Current user ID value:",d.id),console.log("[RightOwnerPanel] Project data:",t),console.log("[RightOwnerPanel] Project positions:",t.positions);let e=!1;t.positions&&Array.isArray(t.positions)&&t.positions.forEach(t=>{if(t.applications&&Array.isArray(t.applications)){console.log("[RightOwnerPanel] Checking position:",t.id),console.log("[RightOwnerPanel] Applications in position:",t.applications),console.log("[RightOwnerPanel] Current user ID:",d.id);const r=t.applications.find(e=>{const t=e.id===d.id,r=e.userId===d.id;return console.log("[RightOwnerPanel] Application check:",{appUserId:e.userId,appId:e.id,currentUserId:d.id,currentUserIdType:typeof d.id,userIdMatch:r,idMatch:t,status:e.status}),t&&"approved"===e.status});r&&(console.log("[RightOwnerPanel] Found approved application:",r),e=!0)}}),console.log("[RightOwnerPanel] Is approved collaborator:",e),c(e?"ADD_EXPERIENCE":"NOT_ELIGIBLE")},h=async()=>{i(!0);try{const e={id:"exp_".concat(Date.now()),projectId:t.id,title:t.name,description:t.description,image:t.heroImage||t.image,dateRange:"Completed ".concat((new Date).toLocaleDateString()),role:"Collaborator",isInitiator:!1,responsibility:"",teamFeedback:{feedbacker:"Team",feedbackerRole:"Collaborators",content:"This project has been completed successfully."},addedAt:(new Date).toISOString()},r=JSON.parse(localStorage.getItem("user_collaborations_".concat(d.id))||"[]");r.find(e=>e.projectId===t.id)?(console.log("[RightOwnerPanel] Experience already exists"),c("EXPERIENCE_ADDED")):(r.push(e),localStorage.setItem("user_collaborations_".concat(d.id),JSON.stringify(r)),console.log("[RightOwnerPanel] Experience added successfully:",e),c("EXPERIENCE_ADDED"))}catch(e){console.error("Error adding experience:",e)}finally{i(!1)}};return(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 h-full overflow-auto",children:[(0,Nt.jsx)(as,{vision:t.vision,owner:r,currentUser:a}),(0,Nt.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(()=>{const e="w-full py-2 px-4 rounded-lg font-medium transition-all duration-200";switch(l){case"ADD_EXPERIENCE":return(0,Nt.jsx)("button",{className:"".concat(e," bg-purple-600 text-white hover:bg-purple-700"),onClick:h,disabled:n,children:n?"Adding...":"Add Experience"});case"EXPERIENCE_ADDED":return(0,Nt.jsx)("button",{className:"".concat(e," bg-green-100 text-green-800 cursor-not-allowed"),disabled:!0,children:"Experience Added \u2713"});case"NOT_ELIGIBLE":return(0,Nt.jsx)("button",{className:"".concat(e," bg-gray-300 text-gray-500 cursor-not-allowed"),disabled:!0,title:"Only approved collaborators can add this to their experience.",children:"Not Eligible"});default:return null}})()})]})},ns=e=>{let{isOpen:t,onClose:r,onConfirm:o,positionTitle:a}=e;return t?(0,Nt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Nt.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-xl",children:[(0,Nt.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,Nt.jsx)("div",{className:"flex-shrink-0",children:(0,Nt.jsx)("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Cancel Application"})]}),(0,Nt.jsxs)("div",{className:"mb-6",children:[(0,Nt.jsx)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-4",children:(0,Nt.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 text-orange-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("p",{className:"text-orange-800 text-sm font-medium mb-2",children:"Important: Cancellation Consequences"}),(0,Nt.jsxs)("ul",{className:"text-orange-700 text-sm space-y-1",children:[(0,Nt.jsxs)("li",{children:["\u2022 Your application for ",(0,Nt.jsx)("strong",{children:a})," will be withdrawn"]}),(0,Nt.jsx)("li",{children:"\u2022 If you reapply later, you'll need to get the project initiator's approval again"}),(0,Nt.jsx)("li",{children:"\u2022 Your previous application data will be cleared"})]})]})]})}),(0,Nt.jsx)("p",{className:"text-gray-700 text-sm",children:"Are you sure you want to cancel your application? This action cannot be undone."})]}),(0,Nt.jsxs)("div",{className:"flex gap-3",children:[(0,Nt.jsx)("button",{onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors duration-200",children:"Keep Application"}),(0,Nt.jsx)("button",{onClick:o,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors duration-200",children:"Cancel Application"})]})]})}):null},is=e=>{let{isVisible:t,message:r,onClose:a,duration:s=4e3}=e;const[n,i]=(0,o.useState)(100);return(0,o.useEffect)(()=>{if(t){i(100);const e=setTimeout(()=>{a()},s),t=setInterval(()=>{i(e=>e<=0?(clearInterval(t),0):e-100/(s/50))},50);return()=>{clearTimeout(e),clearInterval(t)}}},[t,s,a]),t?(0,Nt.jsx)("div",{className:"fixed top-4 right-4 z-50 transform transition-all duration-300 ease-out translate-x-0 opacity-100",children:(0,Nt.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 shadow-lg max-w-sm",children:[(0,Nt.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Nt.jsx)("div",{className:"flex-shrink-0",children:(0,Nt.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,Nt.jsx)("div",{className:"flex-1",children:(0,Nt.jsx)("p",{className:"text-green-800 text-sm font-medium leading-relaxed",children:r})}),(0,Nt.jsx)("button",{onClick:a,className:"flex-shrink-0 text-green-400 hover:text-green-600 transition-colors duration-200",children:(0,Nt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Nt.jsx)("div",{className:"mt-3 h-1 bg-green-200 rounded-full overflow-hidden",children:(0,Nt.jsx)("div",{className:"h-full bg-green-500 rounded-full transition-all duration-50 ease-linear",style:{width:"".concat(n,"%")}})})]})}):null},ls=()=>{var e,t,r,a,s,i,l;const{state:c}=zo(),d=le(),u=os(),h=rs(u,{setAppliedPositions:u.setAppliedPositions,setSelectedPosition:u.setSelectedPosition,setComment:u.setComment,setPositionComments:u.setPositionComments,setHasSubmittedApplication:u.setHasSubmittedApplication,setShowWarning:u.setShowWarning,setShowSuccessToast:u.setShowSuccessToast,setShowCancelModal:u.setShowCancelModal,setCancelPositionId:u.setCancelPositionId,setShowApplyModal:u.setShowApplyModal,setApplyForm:u.setApplyForm,setIsSaved:u.setIsSaved,setActivePositionTab:u.setActivePositionTab,setPositions:u.setPositions,updateProjectData:u.updateProjectData,updatePositions:u.updatePositions,saveCollaborationData:u.saveCollaborationData}),[m,p]=(0,o.useState)(null),[g,f]=(0,o.useState)(!1),[v,x]=(0,o.useState)(null),b=()=>{f(!1),p(null),x(null)},y=(null===(e=u.currentUser)||void 0===e?void 0:e.id)===(null===(t=u.project)||void 0===t||null===(r=t.author)||void 0===r?void 0:r.id);(0,o.useEffect)(()=>{var e;"tagme"===(null===(e=d.state)||void 0===e?void 0:e.from)||c.navigationHistory.length>0&&"/tagme"===c.navigationHistory[c.navigationHistory.length-1].path||"/tagme"===d.pathname||window.scrollTo({top:0,behavior:"auto"})},[d.pathname]);null===(a={})||void 0===a||null===(s=a.env)||void 0===s||s.MODE;return u.project?(0,Nt.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Nt.jsx)(qa,{project:u.project,isSaved:u.isSaved,onBack:h.goBack,onSaveToggle:h.handleSaveToggle,onApplyNow:h.handleApplyNowClick,onViewMilestones:h.handleViewMilestones,enableProjectProgressBar:u.enableProjectProgressBar,hasSubmittedApplication:u.hasSubmittedApplication}),(0,Nt.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,Nt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,Nt.jsx)(Ja,{project:u.project,positions:u.positions,hasSubmittedApplication:u.hasSubmittedApplication,showWarning:u.showWarning,appliedPositions:u.appliedPositions,onApply:h.handleApply,onCancelApplication:h.handleCancelApplication,onFillPosition:h.handleFillPosition,getStatusColor:h.getStatusColor,getStatusText:h.getStatusText,currentUser:u.currentUser,onApplicationClick:(e,t,r)=>{var o;console.log("[handleApplicationClick] Application:",e),console.log("[handleApplicationClick] Application type:",typeof e),console.log("[handleApplicationClick] Application keys:",e?Object.keys(e):"null"),console.log("[handleApplicationClick] Position ID:",r),g&&(f(!1),p(null),x(null));const a=u.positions.find(e=>e.id===r),s=null===a||void 0===a||null===(o=a.applications)||void 0===o?void 0:o.find(t=>t.id===e.id||t.userId===e.userId),i=(0,n.A)((0,n.A)({},e),{},{positionId:r,status:(null===s||void 0===s?void 0:s.status)||e.status||"pending"});console.log("[handleApplicationClick] Application with position:",i),console.log("[handleApplicationClick] App in position status:",null===s||void 0===s?void 0:s.status),console.log("[handleApplicationClick] Final application status:",i.status),console.log("[handleApplicationClick] Application with position:",i),console.log("[handleApplicationClick] App in position status:",null===s||void 0===s?void 0:s.status),p(i),x(t.currentTarget),f(!0)},isInitiator:y}),(0,Nt.jsx)("div",{className:"lg:col-span-1",children:(0,Nt.jsx)(ss,{project:u.project,owner:u.project.author,currentUser:u.currentUser,eligibility:{isMemberCompleted:!0}})})]})}),(0,Nt.jsx)(Wa,{isOpen:u.showApplyModal,onClose:()=>u.setShowApplyModal(!1),applyForm:u.applyForm,onFormChange:h.handleApplyFormChange,onSubmit:h.handleApplySubmit}),(0,Nt.jsx)(is,{isVisible:u.showSuccessToast,message:"Application submitted successfully! You can now apply for specific positions.",onClose:()=>u.setShowSuccessToast(!1),duration:5e3}),(0,Nt.jsx)(ns,{isOpen:u.showCancelModal,onClose:h.handleCloseCancelModal,onConfirm:h.handleConfirmCancelApplication,positionTitle:(null===(i=u.positions)||void 0===i||null===(l=i.find(e=>e.id===u.cancelPositionId))||void 0===l?void 0:l.title)||"this position"}),(0,Nt.jsx)(za,{isOpen:g,onClose:b,application:m,onApprove:async(e,t)=>{var r,o,a,s,i,l,c;console.log("Approving application:",e,"for position:",t),console.log("Current project data:",u.project),console.log("Current project collaborators:",null===(r=u.project)||void 0===r?void 0:r.collaborators);const d=u.positions.find(e=>e.id===t);if(d&&d.applications){if(d.applications.find(t=>(t.id===e.id||t.userId===e.userId)&&"approved"===t.status))return void console.log("Application already approved for this position:",e.name,t)}if(((null===(o=u.project)||void 0===o?void 0:o.collaborators)||(null===(a=u.project)||void 0===a||null===(s=a.vision)||void 0===s?void 0:s.collaborators)||[]).some(r=>(r.id===e.id||r.userId===e.userId)&&r.positionId===t))return void console.log("Application already in collaborators for this position:",e.name,t);console.log("Application not yet approved for this position, proceeding with approval:",e.name,t);const g=(null===d||void 0===d?void 0:d.title)||"Unknown Position",f={id:"".concat(e.id||e.userId,"_").concat(t,"_").concat(Date.now()),name:e.name,avatar:e.avatar||"/assets/placeholder.svg",role:"Collaborator",positionId:t,positionTitle:g,email:e.email,portfolio:e.portfolio,approvedAt:(new Date).toISOString()},v=(null===(i=u.project)||void 0===i?void 0:i.collaborators)||(null===(l=u.project)||void 0===l||null===(c=l.vision)||void 0===c?void 0:c.collaborators)||[];console.log("Existing collaborators:",v);const x=(0,n.A)((0,n.A)({},u.project),{},{collaborators:[...v,f]}),y=(0,n.A)((0,n.A)({},u.project.vision),{},{collaborators:[...v,f]}),w=(0,n.A)((0,n.A)({},x),{},{vision:y}),j=u.positions.map(r=>{if(r.id===t&&r.applications){const t=r.applications.map(t=>t.id===e.id||t.userId===e.userId?(0,n.A)((0,n.A)({},t),{},{status:"approved"}):t);return(0,n.A)((0,n.A)({},r),{},{applications:t})}return r}),k=e.id||e.userId,N=await Fa.updateApplicationStatus(u.project.id,t,k,"approved");N.success?console.log("[handleApproveApplication] Successfully saved application status to applicationService"):console.error("[handleApproveApplication] Failed to save application status to applicationService:",N.error);const S=e.id||e.userId,C=((e,t,r)=>{try{const o="".concat(Ua,":").concat(e,":").concat(t),a={status:r,timestamp:Date.now(),positionId:e,applicantId:t};return localStorage.setItem(o,JSON.stringify(a)),console.log("[applicationStorage] Saved status: ".concat(r," for position ").concat(e,", applicant ").concat(t)),{success:!0}}catch(o){return console.error("[applicationStorage] Failed to save application status:",o),{success:!1,error:o.message}}})(t,S,"approved");C.success?console.log("[handleApproveApplication] Successfully saved application status to applicationStorage"):console.error("[handleApproveApplication] Failed to save application status to applicationStorage:",C.error),h.updateProjectData(w),h.updatePositions(j),h.saveCollaborationData(w),!m||m.id!==e.id&&m.userId!==e.userId||m.positionId!==t||(console.log("[handleApproveApplication] Updating selectedApplication status to approved"),p((0,n.A)((0,n.A)({},m),{},{status:"approved"}))),console.log("Application approved for position:",g,"New collaborator added:",f),console.log("Updated project with collaborators:",w);try{var A,_;console.log("[handleApproveApplication] Attempting to send notification to:",e.userId||e.id),console.log("[handleApproveApplication] Application ID vs UserID:",{id:e.id,userId:e.userId}),console.log("[handleApproveApplication] Notification data:",{userId:e.userId||e.id,type:"collaboration",title:"Application Approved",message:'Your application for "'.concat(g,'" position in "').concat(u.project.name,'" has been approved! You are now a collaborator.'),projectId:u.project.id,meta:{action:"application_approved",collaborationId:u.project.id,collaborationTitle:u.project.name,positionId:t,positionTitle:g,approvedBy:(null===(A=u.currentUser)||void 0===A?void 0:A.name)||"Project Owner"}});const r=await Hr.l.createGeneralNotification({userId:e.userId||e.id,type:"collaboration",title:"Application Approved",message:'Your application for "'.concat(g,'" position in "').concat(u.project.name,'" has been approved! You are now a collaborator.'),projectId:u.project.id,meta:{action:"application_approved",collaborationId:u.project.id,collaborationTitle:u.project.name,positionId:t,positionTitle:g,approvedBy:(null===(_=u.currentUser)||void 0===_?void 0:_.name)||"Project Owner"}});console.log("[handleApproveApplication] Notification result:",r),console.log("[handleApproveApplication] Approval notification sent successfully")}catch(I){console.error("[handleApproveApplication] Failed to send approval notification:",I)}setTimeout(()=>{b()},2e3)},onContact:()=>{console.log("Contacting applicant")},isInitiator:y,anchorElement:v,positionId:null===m||void 0===m?void 0:m.positionId,positions:u.positions})]}):(0,Nt.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Nt.jsxs)("div",{className:"text-center",children:[(0,Nt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),(0,Nt.jsx)("p",{className:"text-gray-600",children:"Loading collaboration details..."})]})})},cs=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},ds=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>Boolean(e)&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var us={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const hs=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],ms=(0,o.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:c="",children:d,iconNode:u}=e,h=s(e,hs);return(0,o.createElement)("svg",(0,n.A)((0,n.A)((0,n.A)({ref:t},us),{},{width:a,height:a,stroke:r,strokeWidth:l?24*Number(i)/Number(a):i,className:ds("lucide",c)},!d&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"}),h),[...u.map(e=>{let[t,r]=e;return(0,o.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),ps=["className"],gs=(e,t)=>{const r=(0,o.forwardRef)((r,a)=>{let{className:i}=r,l=s(r,ps);return(0,o.createElement)(ms,(0,n.A)({ref:a,iconNode:t,className:ds("lucide-".concat((c=cs(e),c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),i)},l));var c});return r.displayName=cs(e),r},fs=gs("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),vs="Modal_overlay__P+H2T",xs="Modal_modal__rilJw",bs="Modal_closeButton__9bf7g",ys="Modal_content__pgGBX",ws="Modal_title__Wb1XE",js="Modal_body__UvKYn",ks="Modal_emailLink__FjN3V",Ns="Modal_divider__RvwIc",Ss="Modal_signature__g8MvT",Cs="Modal_actions__o32Lt",As="Modal_primaryButton__lttlk",_s=e=>{let{isOpen:t,onClose:r,onGoToCompetition:o}=e;if(!t)return null;return(0,Nt.jsx)("div",{className:vs,onClick:e=>{e.target===e.currentTarget&&r()},children:(0,Nt.jsxs)("div",{className:xs,children:[(0,Nt.jsx)("button",{className:bs,onClick:r,children:(0,Nt.jsx)(fs,{size:20})}),(0,Nt.jsxs)("div",{className:ys,children:[(0,Nt.jsx)("h2",{className:ws,children:"Student Competitions 2025 \u2014 Notice"}),(0,Nt.jsxs)("div",{className:js,children:[(0,Nt.jsx)("p",{children:"This competition is currently in testing (beta)."}),(0,Nt.jsx)("p",{children:"Some website features are still under development and will be released gradually."}),(0,Nt.jsxs)("p",{children:["If you have any questions, please email:"," ",(0,Nt.jsx)("a",{href:"mailto:tag@rainwang.art",className:ks,children:"tag@rainwang.art"})]})]}),(0,Nt.jsx)("div",{className:Ns}),(0,Nt.jsx)("div",{className:Ss,children:(0,Nt.jsx)("p",{children:"Founder of TAG \u2014 Rain Wang"})}),(0,Nt.jsx)("div",{className:Cs,children:(0,Nt.jsx)("button",{className:As,onClick:()=>{o(),r()},children:"I Understand"})})]})]})})},Is=()=>{const[e,t]=(0,o.useState)(!1);return(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsx)("section",{className:"py-16 bg-white",children:(0,Nt.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[(0,Nt.jsx)("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-tag-blue mb-6",children:"Student Competitions 2025"}),(0,Nt.jsx)("p",{className:"text-lg md:text-xl text-tag-blue mb-8 max-w-2xl mx-auto leading-relaxed opacity-90",children:"Participate in exciting design challenges and win recognition from industry professionals."}),(0,Nt.jsxs)("button",{onClick:e=>{e.preventDefault(),t(!0)},className:"bg-tag-blue text-white px-8 py-3 rounded-md text-lg font-medium hover:bg-tag-dark-blue transition-colors duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1 inline-flex items-center",children:[(0,Nt.jsx)("svg",{className:"w-6 h-6 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Nt.jsx)("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Join Now"]})]})}),(0,Nt.jsx)(_s,{isOpen:e,onClose:()=>{t(!1)},onGoToCompetition:()=>{window.location.href="/tagme/co-future-2025"}})]})},Es={listStyle:"none",listStyleType:"none",listStyleImage:"none",listStylePosition:"outside"},Ps=e=>{let{onArtistClick:t}=e;const[r,a]=(0,o.useState)([]),[s,n]=(0,o.useState)(!0),[i,l]=(0,o.useState)(null),{navigateToArtist:c}=Qo();(0,o.useEffect)(()=>{const e=document.createElement("style");return e.textContent="\n      .no-markers::before,\n      .no-markers::after,\n      .no-markers *::before,\n      .no-markers *::after {\n        content: none !important;\n        display: none !important;\n      }\n      .no-markers {\n        list-style: none !important;\n        list-style-type: none !important;\n        list-style-image: none !important;\n      }\n    ",document.head.appendChild(e),()=>{document.head.removeChild(e)}},[]),(0,o.useEffect)(()=>{d()},[]);const d=async()=>{try{n(!0);const e=await Ar.getPublicArtists();e&&e.success?(console.log("[ArtistsList] Loaded artists:",e.data.length),a(e.data)):(console.error("[ArtistsList] Failed to load artists:",null===e||void 0===e?void 0:e.error),l("Failed to load artists"))}catch(i){console.error("[ArtistsList] Error loading artists:",i),l("Error loading artists")}finally{n(!1)}};return s?(0,Nt.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,Nt.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-tag-blue"}),(0,Nt.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading artists..."})]}):i?(0,Nt.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,Nt.jsxs)("div",{className:"text-red-500 text-center",children:[(0,Nt.jsx)("p",{className:"text-lg font-medium",children:"Error loading artists"}),(0,Nt.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:i}),(0,Nt.jsx)("button",{onClick:d,className:"mt-4 px-4 py-2 bg-tag-blue text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Try Again"})]})}):0===r.length?(0,Nt.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,Nt.jsxs)("div",{className:"text-center",children:[(0,Nt.jsx)("p",{className:"text-lg font-medium text-gray-900",children:"No artists found"}),(0,Nt.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Check back later for new artists"})]})}):(0,Nt.jsx)("div",{className:"space-y-0 list-none no-markers",style:Es,children:r.map(e=>{return(0,Nt.jsx)("div",{className:"group cursor-pointer bg-white border-b border-gray-200 p-6 hover:bg-gray-50 transition-all duration-300 block",style:Es,onClick:t=>((e,t)=>{c(e.id,"artists","Artists",t.currentTarget)})(e,t),"data-artist-id":e.id,children:(0,Nt.jsxs)("div",{className:"flex gap-4",children:[(0,Nt.jsx)("div",{className:"flex-shrink-0",children:(0,Nt.jsx)("img",{src:e.avatar||"/assets/placeholder.svg",alt:e.name,className:"w-40 h-32 object-cover rounded-lg group-hover:scale-105 transition-transform duration-300"})}),(0,Nt.jsxs)("div",{className:"flex-1 flex flex-col justify-center",children:[(0,Nt.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2 group-hover:text-tag-blue transition-colors duration-200",children:e.name}),(0,Nt.jsx)("span",{className:"text-sm text-gray-500 mb-2",children:e.role}),(0,Nt.jsx)("div",{className:"mb-4",children:e.bio?(0,Nt.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:e.bio}):(0,Nt.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,Nt.jsx)("span",{className:"bg-blue-100 text-blue-700 text-xs px-2 py-1 rounded-full",children:e.title||"Artist"}),e.school&&(0,Nt.jsx)("span",{className:"bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full",children:e.school}),e.majors&&e.majors.length>0&&e.majors.map((e,t)=>(0,Nt.jsx)("span",{className:"bg-purple-100 text-purple-700 text-xs px-2 py-1 rounded-full",children:e},t))]})}),(0,Nt.jsxs)("div",{className:"flex items-center gap-6 text-sm text-gray-500",children:[(0,Nt.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Nt.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),(0,Nt.jsxs)("span",{children:[e.worksCount||0," works"]})]}),(0,Nt.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Nt.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),(0,Nt.jsxs)("span",{children:[e.followers||0," followers"]})]}),(0,Nt.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Nt.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(0,Nt.jsxs)("span",{children:[e.following||0," following"]})]}),(0,Nt.jsx)("span",{className:"px-2 py-1 text-xs font-medium text-white rounded-full ".concat((t=e.role,{"Visual Effects":"bg-blue-500","Game Design":"bg-purple-500","UI/UX":"bg-green-500",Illustration:"bg-pink-500","Fine Art":"bg-yellow-500","3D Model":"bg-indigo-500",Animation:"bg-red-500",Photography:"bg-gray-500"}[t]||"bg-gray-500")),children:e.role}),e.school&&(0,Nt.jsx)("span",{className:"text-gray-400",children:e.school})]})]})]})},e.id);var t})})},Ds=e=>{let{currentUser:t}=e;const{navigateToWork:r,navigateToArtist:a}=Qo(),[s,n]=(0,o.useState)([]),[i,l]=(0,o.useState)(!0),[c,d]=(0,o.useState)(null),u=(0,o.useCallback)(async()=>{try{l(!0),d(null);const e=await(0,lr.S5)();if(e.success){const t=await Promise.all(e.data.filter(e=>e&&e.id).map(async e=>{var t;const r=e.thumbnailPath||e.imagePaths&&e.imagePaths[0]||null;let o="/assets/placeholder.svg";if(r)try{console.log("[GalleryGrid] Converting image path: ".concat(r));const e=await(0,lr.getPortfolioImageUrl)(r);console.log("[GalleryGrid] Image conversion result:",e),e&&e.success&&e.data&&e.data.url?(o=e.data.url,console.log("[GalleryGrid] Successfully converted to: ".concat(o))):console.warn("[GalleryGrid] Invalid image result:",e)}catch(c){console.warn("[GalleryGrid] Failed to convert image path ".concat(r,":"),c)}return console.log("[GalleryGrid] Item ".concat(e.id,":"),{title:e.title,thumbnailPath:e.thumbnailPath,imagePaths:e.imagePaths,finalImage:o}),{id:e.id||"unknown",title:e.title||"Untitled",artist:(null===(t=e.profiles)||void 0===t?void 0:t.full_name)||"Unknown Artist",image:o,category:e.category||"",tags:e.tags||[],description:e.description||"",createdAt:e.createdAt||(new Date).toISOString()}}));n(t)}else d(e.error||"Failed to load artworks"),n([])}catch(c){console.error("Error loading artworks:",c),d("Failed to load artworks"),n([])}finally{l(!1)}},[]);(0,o.useEffect)(()=>{u()},[u]);const h=s;return i?(0,Nt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-0",children:[...Array(6)].map((e,t)=>(0,Nt.jsx)("div",{className:"aspect-square bg-gray-200 animate-pulse"},t))}):c?(0,Nt.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,Nt.jsx)("div",{className:"text-gray-400 mb-4",children:(0,Nt.jsx)("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Failed to load artworks"}),(0,Nt.jsx)("p",{className:"text-gray-600 mb-4",children:c}),(0,Nt.jsx)("button",{onClick:u,className:"px-4 py-2 bg-tag-blue text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Try Again"})]}):0===h.length?(0,Nt.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,Nt.jsx)("div",{className:"text-gray-400 mb-4",children:(0,Nt.jsx)("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No artworks found"}),(0,Nt.jsx)("p",{className:"text-gray-600 mb-4",children:"Be the first to upload your work and share it with the community!"}),(0,Nt.jsx)(gt,{to:"/upload",className:"px-4 py-2 bg-tag-blue text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Upload Your Work"})]}):(0,Nt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-0",children:h.map(e=>(0,Nt.jsxs)(gt,{to:"/work/".concat(e.id),className:"group cursor-pointer relative overflow-hidden aspect-square w-full h-full",children:[(0,Nt.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",style:{display:"block"}}),(0,Nt.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:(0,Nt.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-4 text-white",children:[(0,Nt.jsx)("h3",{className:"text-lg font-bold mb-1 leading-tight",children:e.title}),(0,Nt.jsx)("p",{className:"text-sm text-gray-200",children:e.artist})]})})]},e.id))})},Ts=()=>{const[e,t]=(0,o.useState)(new Set),r=e=>{let{rating:t,reviews:r}=e;const o=[];for(let a=0;a<5;a++)a<t?o.push((0,Nt.jsx)("svg",{className:"h-4 w-4 text-yellow-400 fill-current",viewBox:"0 0 20 20",children:(0,Nt.jsx)("path",{d:"M10 15.27L16.18 19l-1.64-7.03L20 7.24l-7.19-.61L10 0 7.19 6.63 0 7.24l5.46 4.73L3.82 19z"})},a)):o.push((0,Nt.jsx)("svg",{className:"h-4 w-4 text-gray-300 fill-current",viewBox:"0 0 20 20",children:(0,Nt.jsx)("path",{d:"M10 15.27L16.18 19l-1.64-7.03L20 7.24l-7.19-.61L10 0 7.19 6.63 0 7.24l5.46 4.73L3.82 19z"})},a));return(0,Nt.jsxs)("div",{className:"flex items-center",children:[(0,Nt.jsx)("div",{className:"flex mr-1",children:o}),(0,Nt.jsxs)("span",{className:"text-sm text-gray-500",children:["(",r,")"]})]})};return(0,Nt.jsxs)("div",{className:"py-8",children:[(0,Nt.jsx)("div",{className:"text-center py-8 mb-8",children:(0,Nt.jsx)("p",{className:"text-red-500 text-lg font-medium",children:"Market feature coming soon..."})}),(0,Nt.jsxs)("div",{className:"mb-8",children:[(0,Nt.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-2 text-center",children:"Marketplace Preview"}),(0,Nt.jsx)("p",{className:"text-gray-600 text-center mb-8",children:"Discover student-created assets, tools, and resources"})]}),(0,Nt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{id:1,image:"/assets/placeholder.svg",title:"Auto Retopology Tool",description:"Advanced mesh optimization plugin for Blender",price:"$15",originalPrice:"$25",author:"Alex Chen",authorAvatar:"/assets/placeholder.svg",rating:5,reviews:24,downloads:"1.2k"},{id:2,image:"/assets/placeholder.svg",title:"Sci-Fi Character Pack",description:"High-poly character models with PBR textures",price:"$45",originalPrice:null,author:"Maya Rodriguez",authorAvatar:"/assets/placeholder.svg",rating:4,reviews:856,downloads:"856"},{id:3,image:"/assets/placeholder.svg",title:"Procedural Building Generator",description:"Generate realistic buildings with customizable parameters",price:"$79",originalPrice:"$99",author:"John Doe",authorAvatar:"/assets/placeholder.svg",rating:4,reviews:120,downloads:"3.5k"},{id:4,image:"/assets/placeholder.svg",title:"Ocean Shader Pack",description:"Realistic ocean shaders for various rendering engines",price:"$29",originalPrice:null,author:"Oceanic Arts",authorAvatar:"/assets/placeholder.svg",rating:5,reviews:78,downloads:"900"},{id:5,image:"/assets/placeholder.svg",title:"UI Kit - Modern Dashboard",description:"Complete UI kit for modern web applications",price:"$35",originalPrice:"$50",author:"Design Studio",authorAvatar:"/assets/placeholder.svg",rating:5,reviews:156,downloads:"2.1k"},{id:6,image:"/assets/placeholder.svg",title:"Animation Rigging System",description:"Professional character rigging for Maya and Blender",price:"$89",originalPrice:null,author:"Animation Pro",authorAvatar:"/assets/placeholder.svg",rating:4,reviews:203,downloads:"1.8k"}].map(o=>(0,Nt.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-4 hover:shadow-md transition-all duration-300 cursor-pointer group",children:[(0,Nt.jsxs)("div",{className:"relative mb-4",children:[(0,Nt.jsx)("img",{src:o.image,alt:o.title,className:"w-full aspect-[4/3] object-cover rounded-lg"}),(0,Nt.jsx)("button",{onClick:e=>{var r;e.stopPropagation(),r=o.id,t(e=>{const t=new Set(e);return t.has(r)?t.delete(r):t.add(r),t})},className:"absolute top-2 right-2 p-2 bg-white/80 backdrop-blur-sm rounded-full hover:bg-white transition-colors duration-200",children:(0,Nt.jsx)("svg",{className:"w-5 h-5 ".concat(e.has(o.id)?"text-red-500 fill-current":"text-gray-400 hover:text-red-500"),fill:e.has(o.id)?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]}),(0,Nt.jsxs)("div",{className:"space-y-3",children:[(0,Nt.jsx)("h4",{className:"text-lg font-bold text-gray-900 group-hover:text-tag-blue transition-colors duration-200",children:o.title}),(0,Nt.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:o.description}),(0,Nt.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,Nt.jsx)("span",{className:"text-xl font-bold text-tag-blue",children:o.price}),o.originalPrice&&(0,Nt.jsx)("span",{className:"text-sm text-gray-400 line-through",children:o.originalPrice})]}),(0,Nt.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,Nt.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Nt.jsx)("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),(0,Nt.jsxs)("span",{children:[o.downloads," downloads"]})]}),(0,Nt.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[(0,Nt.jsxs)("div",{className:"flex items-center",children:[(0,Nt.jsx)("img",{src:o.authorAvatar,alt:o.author,className:"w-6 h-6 rounded-full mr-2"}),(0,Nt.jsx)("span",{className:"text-sm text-gray-700",children:o.author})]}),(0,Nt.jsx)(r,{rating:o.rating,reviews:o.reviews})]})]})]},o.id))})]})},Ls=()=>{const[e,t]=(0,o.useState)("Works"),[r,a]=(0,o.useState)(!0),{user:s}=Ct(),{navigateToArtist:n}=Qo(),{state:i}=zo(),l=le();(0,o.useEffect)(()=>{var e,r;if(i.navigationHistory.length>0){const e=i.navigationHistory[i.navigationHistory.length-1];if(console.log("[GallerySection] Navigation history:",e),e.fromNavbar&&"gallery"===e.from)return console.log("[GallerySection] From navbar Gallery button, setting Works tab"),t("Works"),void a(!1)}if("upload-success"===(null===(e=l.state)||void 0===e?void 0:e.from))t(l.state.activeTab||"Works"),l.state.scrollToGallery?requestAnimationFrame(()=>{const e=document.querySelector('[data-section="gallery"]');if(e){const t=e.getBoundingClientRect(),r=window.pageYOffset+t.top-80;window.scrollTo({top:r,behavior:"auto"})}a(!1)}):a(!1),window.history.replaceState({},document.title);else if("artist-profile"===(null===(r=l.state)||void 0===r?void 0:r.from)){console.log("[GallerySection] Returning from artist-profile, setting activeTab:",l.state.activeTab),t(l.state.activeTab||"Works");const e=i.scrollPositions["/"];if(e){const t="object"===typeof e?e.scrollY:e,r="object"===typeof e?e.elementInfo:null;console.log("[GallerySection] Restoring saved position:",t),console.log("[GallerySection] Element info:",r),requestAnimationFrame(()=>{window.scrollTo({top:t,behavior:"auto"}),r&&"artist"===r.type&&setTimeout(()=>{const e=document.querySelector('[data-artist-id="'.concat(r.id,'"]'));console.log("[GallerySection] Target element found:",!!e),e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),e.classList.add("bg-blue-50","border-2","border-blue-300"),setTimeout(()=>{e.classList.remove("bg-blue-50","border-2","border-blue-300")},2e3))},100)})}else l.state.scrollToGallery&&requestAnimationFrame(()=>{const e=document.querySelector('[data-section="gallery"]');if(e){const t=e.getBoundingClientRect(),r=window.pageYOffset+t.top-80;window.scrollTo({top:r,behavior:"auto"})}});a(!1),window.history.replaceState({},document.title)}else{const e=i.scrollPositions["/"];if(void 0!==e&&requestAnimationFrame(()=>{window.scrollTo({top:e,behavior:"auto"})}),i.navigationHistory.length>0){const e=i.navigationHistory[i.navigationHistory.length-1];e.activeTab&&"gallery"===e.from&&!e.fromNavbar?t(e.activeTab):t("Works")}else t("Works");a(!1)}},[l.state,i.scrollPositions,i.navigationHistory]);const c=["Works","Artists","Market"];return r?(0,Nt.jsx)("section",{className:"py-16 bg-gray-50","data-section":"gallery",children:(0,Nt.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,Nt.jsxs)("div",{className:"flex flex-col mb-8",children:[(0,Nt.jsx)("h2",{className:"text-3xl font-bold text-gray-400 mb-6",children:"TAG Gallery"}),(0,Nt.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,Nt.jsx)("div",{className:"w-7/12",children:(0,Nt.jsx)("div",{className:"h-10 bg-gray-200 rounded-md animate-pulse"})}),(0,Nt.jsx)("div",{className:"inline-flex rounded-full border border-gray-300 bg-white p-1",children:c.map(t=>(0,Nt.jsxs)("button",{className:"relative px-12 py-3 text-base font-semibold tracking-wide ".concat(e===t?"text-white":"text-gray-700"),children:[e===t&&(0,Nt.jsx)("div",{className:"absolute inset-0 bg-tag-blue rounded-full"}),(0,Nt.jsx)("span",{className:"relative z-10",children:t})]},t))})]})]}),(0,Nt.jsx)("div",{className:"flex-1",children:(0,Nt.jsx)("div",{className:"animate-pulse",children:(0,Nt.jsx)("div",{className:"h-64 bg-gray-200 rounded-lg"})})})]})}):(0,Nt.jsx)("section",{className:"py-16 bg-gray-50","data-section":"gallery",children:(0,Nt.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,Nt.jsxs)("div",{className:"flex flex-col mb-8",children:[(0,Nt.jsx)("h2",{className:"text-3xl font-bold text-gray-400 mb-6",children:"TAG Gallery"}),(0,Nt.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,Nt.jsx)("div",{className:"w-7/12",children:(0,Nt.jsx)(Et,{onInputChange:e=>console.log("Search:",e.target.value),placeholder:"Search for Works or Artists",className:"w-full"})}),(0,Nt.jsx)("div",{className:"inline-flex rounded-full border border-gray-300 bg-white p-1",children:c.map((r,o)=>(0,Nt.jsxs)("button",{onClick:()=>t(r),className:"relative px-12 py-3 text-base font-semibold tracking-wide transition-all duration-300 ease-in-out ".concat(e===r?"text-white":"text-gray-700 hover:text-gray-900"),children:[e===r&&(0,Nt.jsx)("div",{className:"absolute inset-0 bg-tag-blue rounded-full transition-all duration-300 ease-in-out"}),(0,Nt.jsx)("span",{className:"relative z-10",children:r})]},r))})]})]}),(0,Nt.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,Nt.jsx)("div",{className:"hidden lg:block lg:w-64 flex-shrink-0",children:(0,Nt.jsx)(Go,{})}),(0,Nt.jsxs)("div",{className:"flex-1",children:["Works"===e&&(0,Nt.jsx)(Ds,{currentUser:s}),"Artists"===e&&(0,Nt.jsx)(Ps,{onArtistClick:t=>{n(t.id,"gallery",e)}}),"Market"===e&&(0,Nt.jsx)(Ts,{})]})]})]})})},Ms=()=>{const e=ue();return(0,Nt.jsx)("section",{className:"pt-20 pb-16 bg-white",children:(0,Nt.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[(0,Nt.jsx)("h1",{className:"text-4xl md:text-5xl lg:text-6xl text-gray-900 leading-tight",children:"One Platform"}),(0,Nt.jsx)("p",{className:"font-bold text-4xl md:text-5xl lg:text-6xl text-gray-900 md:whitespace-nowrap tracking-tight mb-12",children:"All Students Across All Majors"}),(0,Nt.jsx)("p",{className:"text-base md:text-lg text-gray-600 mt-1 mb-10 max-w-3xl mx-auto leading-relaxed",children:"A bridge for art students to showcase, connect, and collaborate"}),(0,Nt.jsx)("button",{onClick:()=>{e("/about")},className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-md text-lg font-medium hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:"About TAG"})]})})},Rs=e=>{let{email:t,onEmailChange:r,onNextStep:a,error:s,setError:n,isLoading:i,setIsLoading:l}=e;const[c,d]=(0,o.useState)(!1),u=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);return(0,Nt.jsxs)("div",{className:"space-y-4",children:[(0,Nt.jsx)("div",{className:"text-center",children:(0,Nt.jsx)("p",{className:"text-sm text-gray-600",children:"Enter your email address and we'll send you a verification code to reset your password."})}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{htmlFor:"resetEmail",className:"block text-sm font-medium text-gray-700 mb-2",children:"Student Email"}),(0,Nt.jsxs)("div",{className:"flex space-x-2",children:[(0,Nt.jsx)("div",{className:"relative flex-1",children:(0,Nt.jsx)("input",{id:"resetEmail",type:"email",value:t,onChange:e=>r(e.target.value),placeholder:"your.name@university.edu",className:"block w-full px-3 py-3 border rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-tag-blue focus:border-tag-blue sm:text-sm ".concat(s?"border-red-300":"border-gray-300")})}),(0,Nt.jsx)("button",{type:"button",onClick:async()=>{if(t)if(u(t)){d(!0);try{console.log("Sending reset code to:",t),setTimeout(()=>{d(!1),a()},1e3)}catch(s){console.error("Failed to send reset code:",s),d(!1),n("email","Failed to send reset code, please try again")}}else n("email","Please enter a valid email address");else n("email","Please enter your email address")},disabled:c||!t,className:"px-4 py-3 text-sm font-medium rounded-md whitespace-nowrap transition-colors duration-200 ".concat(t&&!c?"text-white bg-tag-blue hover:bg-tag-dark-blue focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-tag-blue":"text-gray-400 bg-gray-200 cursor-not-allowed"),children:c?"Sending...":"Send Code"})]}),s&&(0,Nt.jsx)("p",{className:"mt-1 text-sm text-red-600",children:s})]}),(0,Nt.jsx)("div",{className:"flex space-x-3 pt-4",children:(0,Nt.jsx)("button",{type:"button",onClick:()=>{t?u(t)?a():n("email","Please enter a valid email address"):n("email","Please enter your email address")},disabled:!t||i,className:"flex-1 bg-tag-blue text-white py-3 px-4 rounded-md text-sm font-medium hover:bg-tag-dark-blue focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-tag-blue disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:"Continue"})}),(0,Nt.jsx)("div",{className:"text-center",children:(0,Nt.jsx)("p",{className:"text-xs text-gray-500",children:"Development Mode: You can continue without sending a real verification code."})})]})},Fs=e=>{let{email:t,verificationCode:r,onCodeChange:o,onPreviousStep:a,onNextStep:s,error:n,setError:i,isLoading:l,setIsLoading:c}=e;return(0,Nt.jsxs)("div",{className:"space-y-4",children:[(0,Nt.jsxs)("div",{className:"text-center",children:[(0,Nt.jsxs)("p",{className:"text-sm text-gray-600",children:["We've sent a verification code to"," ",(0,Nt.jsx)("span",{className:"font-medium text-gray-900",children:t})]}),(0,Nt.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Please check your email and enter the 6-digit code below."})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{htmlFor:"verificationCode",className:"block text-sm font-medium text-gray-700 mb-2",children:"Verification Code"}),(0,Nt.jsx)("input",{id:"verificationCode",type:"text",value:r,onChange:e=>o(e.target.value),placeholder:"Enter 6-digit code",maxLength:"6",className:"block w-full px-3 py-3 border rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-tag-blue focus:border-tag-blue sm:text-sm text-center text-lg tracking-widest ".concat(n?"border-red-300":"border-gray-300")}),n&&(0,Nt.jsx)("p",{className:"mt-1 text-sm text-red-600",children:n})]}),(0,Nt.jsx)("div",{className:"text-center",children:(0,Nt.jsx)("button",{type:"button",className:"text-sm text-tag-blue hover:text-tag-dark-blue font-medium",onClick:()=>a(),children:"Didn't receive the code? Try again"})}),(0,Nt.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,Nt.jsx)("button",{type:"button",onClick:a,className:"flex-1 bg-gray-200 text-gray-700 py-3 px-4 rounded-md text-sm font-medium hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors duration-200",children:"Back"}),(0,Nt.jsx)("button",{type:"button",onClick:async()=>{if(r)if(/^\d{6}$/.test(r)){c(!0);try{console.log("Verifying code:",r,"for email:",t),setTimeout(()=>{c(!1),s()},1e3)}catch(n){console.error("Failed to verify code:",n),c(!1),i("verificationCode","Invalid verification code, please try again")}}else i("verificationCode","Verification code should be 6 digits");else i("verificationCode","Please enter the verification code")},disabled:!r||l,className:"flex-1 bg-tag-blue text-white py-3 px-4 rounded-md text-sm font-medium hover:bg-tag-dark-blue focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-tag-blue disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:l?"Verifying...":"Verify Code"})]}),(0,Nt.jsxs)("div",{className:"text-center",children:[(0,Nt.jsx)("p",{className:"text-xs text-gray-500",children:"Development Mode: You can enter any 6 digits to continue."}),(0,Nt.jsx)("button",{type:"button",onClick:()=>{r?s():i("verificationCode","Please enter a verification code (or any 6 digits for testing)")},className:"text-xs text-tag-blue hover:text-tag-dark-blue mt-1",children:"Skip verification (dev mode)"})]})]})},Us=e=>{let{newPassword:t,confirmPassword:r,onPasswordChange:a,onPreviousStep:s,onComplete:n,error:i,setError:l,setGeneralError:c,isLoading:d,setIsLoading:u}=e;const[h,m]=(0,o.useState)(!1),[p,g]=(0,o.useState)(!1);return(0,Nt.jsxs)("div",{className:"space-y-4",children:[(0,Nt.jsxs)("div",{className:"text-center",children:[(0,Nt.jsx)("p",{className:"text-sm text-gray-600",children:"Create a new password for your account."}),(0,Nt.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Make sure it's secure and easy to remember."})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),(0,Nt.jsxs)("div",{className:"relative",children:[(0,Nt.jsx)("input",{id:"newPassword",type:h?"text":"password",value:t,onChange:e=>a("newPassword",e.target.value),placeholder:"Enter new password",className:"block w-full pr-10 px-3 py-3 border rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-tag-blue focus:border-tag-blue sm:text-sm ".concat(i.newPassword?"border-red-300":"border-gray-300")}),(0,Nt.jsx)("button",{type:"button",onClick:()=>m(!h),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:h?(0,Nt.jsx)("svg",{className:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):(0,Nt.jsxs)("svg",{className:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),i.newPassword&&(0,Nt.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i.newPassword})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),(0,Nt.jsxs)("div",{className:"relative",children:[(0,Nt.jsx)("input",{id:"confirmPassword",type:p?"text":"password",value:r,onChange:e=>a("confirmPassword",e.target.value),placeholder:"Confirm new password",className:"block w-full pr-10 px-3 py-3 border rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-tag-blue focus:border-tag-blue sm:text-sm ".concat(i.confirmPassword?"border-red-300":"border-gray-300")}),(0,Nt.jsx)("button",{type:"button",onClick:()=>g(!p),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:p?(0,Nt.jsx)("svg",{className:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):(0,Nt.jsxs)("svg",{className:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),i.confirmPassword&&(0,Nt.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i.confirmPassword})]}),(0,Nt.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:[(0,Nt.jsx)("p",{className:"text-sm text-blue-800",children:(0,Nt.jsx)("strong",{children:"Password requirements:"})}),(0,Nt.jsxs)("ul",{className:"text-sm text-blue-700 mt-1 space-y-1",children:[(0,Nt.jsx)("li",{children:"\u2022 At least 6 characters long"}),(0,Nt.jsx)("li",{children:"\u2022 Easy to remember but hard to guess"})]})]}),(0,Nt.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,Nt.jsx)("button",{type:"button",onClick:s,className:"flex-1 bg-gray-200 text-gray-700 py-3 px-4 rounded-md text-sm font-medium hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors duration-200",children:"Back"}),(0,Nt.jsx)("button",{type:"button",onClick:async()=>{if(l("newPassword",""),l("confirmPassword",""),c(""),t)if(t.length>=6)if(r)if(((e,t)=>e===t)(t,r)){u(!0);try{console.log("Resetting password to:",t),setTimeout(()=>{u(!1),alert("Password reset successfully! You can now login with your new password."),n()},1e3)}catch(i){console.error("Failed to reset password:",i),u(!1),c("Failed to reset password, please try again")}}else l("confirmPassword","Passwords do not match");else l("confirmPassword","Please confirm your new password");else l("newPassword","Password must be at least 6 characters");else l("newPassword","Please enter a new password")},disabled:!t||!r||d,className:"flex-1 bg-tag-blue text-white py-3 px-4 rounded-md text-sm font-medium hover:bg-tag-dark-blue focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-tag-blue disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:d?"Resetting...":"Reset Password"})]})]})},Os=e=>{let{isOpen:t,onClose:r}=e;const[a,s]=(0,o.useState)("email"),[i,l]=(0,o.useState)({email:"",verificationCode:"",newPassword:"",confirmPassword:""}),[c,d]=(0,o.useState)({}),[u,h]=(0,o.useState)(!1),[m,p]=(0,o.useState)(!1),g=e=>{s(e),d({})},f=e=>{s(e),d({})},v=()=>{s("email"),l({email:"",verificationCode:"",newPassword:"",confirmPassword:""}),d({}),h(!1),p(!1),r()},x=(e,t)=>{l(r=>(0,n.A)((0,n.A)({},r),{},{[e]:t})),c[e]&&d(t=>{const r=(0,n.A)({},t);return delete r[e],r})},b=(e,t)=>{d(r=>(0,n.A)((0,n.A)({},r),{},{[e]:t}))};return t?(0,Nt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,Nt.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,Nt.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Reset Password"}),(0,Nt.jsx)("button",{onClick:v,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,Nt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Nt.jsxs)("div",{className:"p-6",children:[(0,Nt.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,Nt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Nt.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat("email"===a?"bg-tag-blue text-white":"bg-gray-200 text-gray-600"),children:"1"}),(0,Nt.jsx)("div",{className:"w-2 h-0.5 ".concat("code"===a||"password"===a?"bg-tag-blue":"bg-gray-200")}),(0,Nt.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat("code"===a||"password"===a?"bg-tag-blue text-white":"bg-gray-200 text-gray-600"),children:"2"}),(0,Nt.jsx)("div",{className:"w-2 h-0.5 ".concat("password"===a?"bg-tag-blue":"bg-gray-200")}),(0,Nt.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat("password"===a?"bg-tag-blue text-white":"bg-gray-200 text-gray-600"),children:"3"})]})}),"email"===a&&(0,Nt.jsx)(Rs,{email:i.email,onEmailChange:e=>x("email",e),onNextStep:()=>g("code"),error:c.email,setError:b,isLoading:m,setIsLoading:p}),"code"===a&&(0,Nt.jsx)(Fs,{email:i.email,verificationCode:i.verificationCode,onCodeChange:e=>x("verificationCode",e),onPreviousStep:()=>f("email"),onNextStep:()=>g("password"),error:c.verificationCode,setError:b,isLoading:u,setIsLoading:h}),"password"===a&&(0,Nt.jsx)(Us,{newPassword:i.newPassword,confirmPassword:i.confirmPassword,onPasswordChange:(e,t)=>x(e,t),onPreviousStep:()=>f("code"),onComplete:v,error:c,setError:b,setGeneralError:e=>{d(t=>(0,n.A)((0,n.A)({},t),{},{general:e}))},isLoading:u,setIsLoading:h}),c.general&&(0,Nt.jsx)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,Nt.jsx)("p",{className:"text-sm text-red-600",children:c.general})})]})]})}):null},zs=()=>{const e=ue(),{login:t}=Ct(),[r,a]=(0,o.useState)({email:"",password:"",rememberMe:!1}),[s,i]=(0,o.useState)(!1),[l,c]=(0,o.useState)(!1),[d,u]=(0,o.useState)("");o.useEffect(()=>{const e=setTimeout(()=>{const e=document.getElementById("email"),t=document.getElementById("password");e&&""!==e.value&&(e.value="",a(e=>(0,n.A)((0,n.A)({},e),{},{email:""}))),t&&""!==t.value&&(t.value="",a(e=>(0,n.A)((0,n.A)({},e),{},{password:""})))},100);return()=>clearTimeout(e)},[]);const h=e=>{const{name:t,value:r,type:o,checked:s}=e.target;a(e=>(0,n.A)((0,n.A)({},e),{},{[t]:"checkbox"===o?s:r}))};return(0,Nt.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[(0,Nt.jsx)("div",{className:"flex-1 flex items-center justify-center px-4 sm:px-6 lg:px-8",children:(0,Nt.jsx)("div",{className:"max-w-md w-full space-y-8",children:(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,Nt.jsx)("div",{className:"text-center mb-8",children:(0,Nt.jsx)("img",{src:"/TAG_Logo.png",alt:"TAG Logo",className:"h-12 w-auto mx-auto mb-6"})}),(0,Nt.jsxs)("form",{onSubmit:async o=>{o.preventDefault(),i(!0);try{const o=await t(r.email,r.password);if(o.success){u("");try{var a;const{data:{session:t}}=await kt.supabase.auth.getSession();null!==t&&void 0!==t&&null!==(a=t.user)&&void 0!==a&&a.id?e("/artist/".concat(t.user.id)):e("/")}catch(s){console.warn("Failed to get session, redirecting to home:",s),e("/")}}else console.error("Login failed:",o.error),u(o.error||"Login failed. Please try again.")}catch(s){console.error("Login error:",s)}finally{i(!1)}},className:"space-y-6",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Student Email"}),(0,Nt.jsxs)("div",{className:"relative",children:[(0,Nt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Nt.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,Nt.jsx)("input",{id:"email",name:"email",type:"email",required:!0,value:r.email,onChange:h,placeholder:"your.name@university.edu",autoComplete:"off",className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-tag-blue focus:border-tag-blue sm:text-sm"})]})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,Nt.jsxs)("div",{className:"relative",children:[(0,Nt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Nt.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,Nt.jsx)("input",{id:"password",name:"password",type:"password",required:!0,value:r.password,onChange:h,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",autoComplete:"off",className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-tag-blue focus:border-tag-blue sm:text-sm"})]})]}),d&&(0,Nt.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,Nt.jsxs)("div",{className:"flex",children:[(0,Nt.jsx)("div",{className:"flex-shrink-0",children:(0,Nt.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Nt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,Nt.jsx)("div",{className:"ml-3",children:(0,Nt.jsx)("p",{className:"text-sm text-red-700",children:d})})]})}),(0,Nt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Nt.jsxs)("div",{className:"flex items-center",children:[(0,Nt.jsx)("input",{id:"rememberMe",name:"rememberMe",type:"checkbox",checked:r.rememberMe,onChange:h,className:"h-4 w-4 text-tag-blue focus:ring-tag-blue border-gray-300 rounded"}),(0,Nt.jsx)("label",{htmlFor:"rememberMe",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),(0,Nt.jsx)("div",{className:"text-sm",children:(0,Nt.jsx)("button",{type:"button",onClick:()=>c(!0),className:"font-medium text-tag-blue hover:text-tag-dark-blue",children:"Forgot password?"})})]}),(0,Nt.jsxs)("button",{type:"submit",disabled:s,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-tag-blue hover:bg-tag-dark-blue focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-tag-blue disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[s?(0,Nt.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Nt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Nt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,s?"Signing in...":"Sign in"]})]}),(0,Nt.jsx)("div",{className:"mt-6 flex justify-center",children:(0,Nt.jsx)(gt,{to:"/register",className:"w-full flex justify-center py-3 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-tag-blue transition-colors duration-200",children:"Sign Up"})})]})})}),(0,Nt.jsx)("footer",{className:"bg-white border-t border-gray-200",children:(0,Nt.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,Nt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Nt.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,Nt.jsx)("span",{className:"font-bold",children:"Tech Art Guide"}),(0,Nt.jsx)("span",{className:"ml-2",children:"\xa9 2025 TAG. All rights reserved."})]}),(0,Nt.jsxs)("div",{className:"flex space-x-6 text-sm text-gray-500",children:[(0,Nt.jsx)("a",{href:"#",className:"hover:text-gray-700",children:"Privacy Policy"}),(0,Nt.jsx)("a",{href:"#",className:"hover:text-gray-700",children:"Terms of Service"}),(0,Nt.jsx)("a",{href:"#",className:"hover:text-gray-700",children:"Help Center"})]})]})})}),(0,Nt.jsx)(Os,{isOpen:l,onClose:()=>c(!1)})]})},Ws=e=>{let{comment:t,onCommentChange:r,onCommentSubmit:o,comments:a,onNavigateToArtist:s}=e;return(0,Nt.jsxs)("div",{className:"space-y-6",children:[(0,Nt.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,Nt.jsxs)("form",{onSubmit:o,className:"space-y-4",children:[(0,Nt.jsx)("textarea",{value:t,onChange:r,placeholder:"Share your thoughts, feedback, or questions...",className:"w-full p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:"3"}),(0,Nt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Nt.jsxs)("button",{type:"button",className:"flex items-center gap-2 text-sm text-gray-600 hover:text-gray-800 transition-colors duration-200",children:[(0,Nt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),"Attach Image"]}),(0,Nt.jsx)("button",{type:"submit",disabled:!t.trim(),className:"bg-purple-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-purple-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Comment"})]})]})}),(0,Nt.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,Nt.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,Nt.jsxs)("div",{className:"flex items-start gap-4",children:[(0,Nt.jsx)(gt,{to:"/artist/".concat(e.user),className:"w-10 h-10 rounded-full flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity duration-200",children:(0,Nt.jsx)("img",{src:e.avatar,alt:e.user,className:"w-10 h-10 rounded-full"})}),(0,Nt.jsxs)("div",{className:"flex-1",children:[(0,Nt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Nt.jsx)(gt,{to:"/artist/".concat(e.user),className:"font-medium text-gray-900 cursor-pointer hover:text-tag-blue transition-colors duration-200",children:e.user}),(0,Nt.jsx)("span",{className:"text-xs text-gray-500",children:"\u2022"}),(0,Nt.jsx)("span",{className:"text-xs text-gray-500",children:e.role}),(0,Nt.jsx)("span",{className:"text-xs text-gray-500",children:"\u2022"}),(0,Nt.jsx)("span",{className:"text-xs text-gray-500",children:e.timestamp})]}),(0,Nt.jsx)("p",{className:"text-gray-700 mb-3",children:e.comment}),(0,Nt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Nt.jsxs)("button",{className:"flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700 transition-colors duration-200",children:[(0,Nt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),e.likes]}),(0,Nt.jsx)("button",{className:"text-sm text-gray-500 hover:text-gray-700 transition-colors duration-200",children:"Reply"})]})]})]})},e.id))})]})},Bs=e=>{let{goBack:t,project:r}=e;return(0,Nt.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,Nt.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,Nt.jsxs)("button",{onClick:t,className:"flex items-center text-gray-600 hover:text-gray-900 mb-6 transition-colors duration-200",children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to TAGMe"]}),(0,Nt.jsxs)("div",{className:"flex items-center text-sm text-gray-500 mb-4",children:[(0,Nt.jsx)("button",{onClick:t,className:"hover:text-tag-blue transition-colors duration-200",children:"TAGMe"}),(0,Nt.jsx)("span",{className:"mx-2",children:"/"}),(0,Nt.jsx)("span",{children:"Milestones"}),(0,Nt.jsx)("span",{className:"mx-2",children:"/"}),(0,Nt.jsx)("span",{className:"text-gray-900 font-medium",children:r.title})]})]})})},Gs=e=>{var t,r,o,a,s,n,i,l,c,d;let{project:u,onNavigateToArtist:h}=e;return(0,Nt.jsxs)("div",{className:"space-y-6",children:[(0,Nt.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,Nt.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Project Details"}),(0,Nt.jsxs)("div",{className:"space-y-3",children:[(0,Nt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),(0,Nt.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,Nt.jsx)("span",{className:"font-medium",children:"Expected Team Size:"})," ",u.teamSize||"Not specified"]})]}),(0,Nt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Nt.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,Nt.jsx)("span",{className:"font-medium",children:"Duration:"})," ",u.duration||"Not specified"]})]}),(0,Nt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,Nt.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,Nt.jsx)("span",{className:"font-medium",children:"Meeting Schedule:"})," ",u.meetingSchedule||"Not specified"]})]})]})]}),(0,Nt.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,Nt.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Team Lead"}),(0,Nt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Nt.jsx)("img",{src:(null===(t=u.teamLead)||void 0===t?void 0:t.artistAvatar)||(null===(r=u.teamMembers[0])||void 0===r?void 0:r.artistAvatar)||"/assets/placeholder.svg",alt:(null===(o=u.teamLead)||void 0===o?void 0:o.artist)||(null===(a=u.teamMembers[0])||void 0===a?void 0:a.artist)||"Team Lead",className:"w-12 h-12 rounded-full"}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("div",{className:"font-medium text-gray-900",children:(null===(s=u.teamLead)||void 0===s?void 0:s.artist)||(null===(n=u.teamMembers[0])||void 0===n?void 0:n.artist)||"Initiator"}),(0,Nt.jsx)("div",{className:"text-sm text-gray-500",children:"Initiator"===((null===(i=u.teamLead)||void 0===i?void 0:i.role)||(null===(l=u.teamMembers[0])||void 0===l?void 0:l.role)||"Initiator")?(0,Nt.jsx)("span",{className:"inline-flex items-center px-2 py-1 bg-purple-100 text-purple-800 text-xs font-medium rounded-full",children:"Initiator"}):(null===(c=u.teamLead)||void 0===c?void 0:c.role)||(null===(d=u.teamMembers[0])||void 0===d?void 0:d.role)||"Initiator"})]})]})]}),(0,Nt.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,Nt.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Team Members"}),(0,Nt.jsx)("div",{className:"space-y-3",children:u.teamMembers.map((e,t)=>(0,Nt.jsxs)(gt,{to:"/artist/".concat(e.id),className:"flex items-center gap-3 cursor-pointer hover:bg-gray-100 p-2 rounded-lg transition-colors duration-200",children:[(0,Nt.jsx)("img",{src:e.artistAvatar,alt:e.artist,className:"w-8 h-8 rounded-full"}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("div",{className:"text-sm font-medium text-gray-900 hover:text-tag-blue transition-colors duration-200",children:e.artist}),(0,Nt.jsx)("div",{className:"text-xs text-gray-500",children:"Initiator"===e.role?(0,Nt.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 bg-purple-100 text-purple-800 text-xs font-medium rounded-full",children:"Initiator"}):e.role})]})]},t))})]})]})},Hs=e=>{let{project:t,onViewProject:r,milestones:o=[]}=e;return(0,Nt.jsxs)("div",{className:"lg:col-span-2",children:[(0,Nt.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:t.title}),(0,Nt.jsx)(Ga,{projectId:t.id,milestones:o,dueDate:t.dueDate,isMilestonePage:!0,onViewMilestones:()=>{console.log("View milestones for project:",t.id)}}),(0,Nt.jsxs)("div",{className:"mt-12 mb-4",children:[(0,Nt.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Looking For"}),(0,Nt.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,Nt.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 text-sm font-medium rounded-full",children:"UI/UX Designer"}),(0,Nt.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 text-sm font-medium rounded-full",children:"Frontend Developer"}),(0,Nt.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 text-sm font-medium rounded-full",children:"Motion Designer"}),(0,Nt.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 text-sm font-medium rounded-full",children:"Product Manager"})]})]}),(0,Nt.jsx)("div",{className:"flex justify-end",children:(0,Nt.jsx)("button",{onClick:r,className:"bg-purple-600 text-white py-3 px-8 rounded-lg font-medium hover:bg-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:"View & Apply"})}),(0,Nt.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Project Vision"}),(0,Nt.jsx)("div",{className:"mb-4",children:(0,Nt.jsx)("p",{className:"text-gray-700 italic text-lg",children:'"Building the future of creative collaboration"'})}),(0,Nt.jsxs)("div",{className:"mb-4",children:[(0,Nt.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-2",children:"Why This Matters"}),(0,Nt.jsx)("div",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap text-sm",children:"We're creating a platform that connects talented designers and developers to build amazing digital experiences together. Our vision is to make collaboration seamless, inspiring, and productive. This project will showcase the power of interdisciplinary teamwork and innovative design thinking. We're looking for passionate individuals who share our vision and want to make a real impact. Join us in building something extraordinary that will revolutionize how creative teams work together."})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-2",children:"Contact"}),(0,Nt.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,Nt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Nt.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"})}),(0,Nt.jsx)("span",{children:"project_lead#1234"})]}),(0,Nt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Nt.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),(0,Nt.jsx)("span",{children:"project.lead@email.com"})]})]})]})]})]})},qs=e=>({completed:"Completed","in-progress":"In Progress",upcoming:"Upcoming"}[e]||"Unknown"),Vs=e=>{let{milestones:t}=e;return(0,Nt.jsx)("div",{className:"space-y-6",children:t.map((e,t)=>{return(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 relative overflow-hidden",children:[e.images.length>0&&(0,Nt.jsx)("div",{className:"absolute inset-0 opacity-10 pointer-events-none",children:(0,Nt.jsx)("img",{src:e.images[0],alt:"".concat(e.title," background"),className:"w-full h-full object-cover"})}),(0,Nt.jsxs)("div",{className:"relative z-10",children:[(0,Nt.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Nt.jsxs)("span",{className:"text-sm font-medium text-purple-600 bg-purple-100 px-2 py-1 rounded-full",children:["Stage ",e.id]}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title})]}),(0,Nt.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,Nt.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,Nt.jsxs)("span",{children:["Stage Due Date: ",e.dueDate]}),e.progress>0&&(0,Nt.jsxs)("span",{children:[e.progress,"% complete"]})]})]}),(0,Nt.jsx)("span",{className:"px-3 py-1 text-xs font-medium rounded-full ".concat((r=e.status,{completed:"bg-green-100 text-green-800","in-progress":"bg-blue-100 text-blue-800",upcoming:"bg-gray-100 text-gray-800"}[r]||"bg-gray-100 text-gray-800")),children:qs(e.status)})]}),e.progress>0&&(0,Nt.jsx)("div",{className:"mb-4",children:(0,Nt.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,Nt.jsx)("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-500",style:{width:"".concat(e.progress,"%")}})})})]})]},e.id);var r})})},Js=e=>{let{state:t,setters:r,actions:a,navigateToCollaboration:s,project:n,comments:i}=e;const{setComment:l}=r;return{handleCommentSubmit:(0,o.useCallback)(e=>{if(e.preventDefault(),t.comment.trim()){const e={id:((null===i||void 0===i?void 0:i.length)||0)+1,user:"You",avatar:"/assets/placeholder.svg",role:"Team Member",comment:t.comment,timestamp:"Just now",likes:0};a.addComment(e),l("")}},[t.comment,i,a,l]),handleApplyToCollaboration:(0,o.useCallback)(()=>{var e,t,r,o,a;console.log("\ud83d\udd0d [DEBUG] handleApplyToCollaboration - project:",n),console.log("\ud83d\udd0d [DEBUG] handleApplyToCollaboration - project.id:",n.id);const i={id:n.id,title:n.title,subtitle:n.description,image:n.images[0]||"/assets/placeholder.svg",categories:n.tags,author:{id:(null===(e=n.teamMembers[0])||void 0===e?void 0:e.id)||(null===(t=n.teamMembers[0])||void 0===t||null===(r=t.artist)||void 0===r?void 0:r.toLowerCase())||"bryan",name:(null===(o=n.teamMembers[0])||void 0===o?void 0:o.artist)||"Initiator",avatar:(null===(a=n.teamMembers[0])||void 0===a?void 0:a.artistAvatar)||"/assets/placeholder.svg"},likes:"1.2k",views:"8.4k"};console.log("\ud83d\udd0d [DEBUG] handleApplyToCollaboration - collaborationProject:",i),console.log("\ud83d\udd0d [DEBUG] handleApplyToCollaboration - collaborationProject.id:",i.id),s(i)},[n,s])}},Zs=()=>{const[e,t]=(0,o.useState)("timeline"),[r,a]=(0,o.useState)("");return(0,o.useMemo)(()=>({state:{activeTab:e,comment:r},setters:{setActiveTab:t,setComment:a}}),[e,r])},Ks=()=>{var e;const{goBack:t,navigateToArtist:r,navigateToCollaboration:a}=Qo(),{state:s,actions:n}=zo(),i=le(),{id:l}=he(),c=s.selectedMilestone||(null===(e=i.state)||void 0===e?void 0:e.milestone),d=l||(null===c||void 0===c?void 0:c.id)||1,u=((e,t)=>e?{id:t,title:e.title,description:e.description,progress:e.progress||75,dueDate:e.dueDate||"March 15, 2024",projectType:e.projectType||"Project",teamSize:e.teamSize||2,duration:e.duration||"3-4 months",meetingSchedule:e.meetingSchedule||"2-3 times/week",tags:e.tags||["Project"],teamLead:e.teamLead||{artist:"Alex Chen",artistAvatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",role:"Initiator"},teamMembers:e.teamMembers||[{id:1,title:"Cyberpunk Street Scene",artist:"Alex Chen",artistAvatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",description:"A futuristic city street with vibrant neon signs and cyberpunk aesthetics",image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop",category:"Visual Effects",likes:"1.2k",views:"8.4k",timeAgo:"2 days ago",role:"Character Designer"},{id:2,title:"Dragon Knight Concept",artist:"Maya Rodriguez",artistAvatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",description:"Detailed illustration of a knight in dark, ornate armor",image:"https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400&h=300&fit=crop",category:"Game Design",likes:"2.1k",views:"12k",timeAgo:"5 days ago",role:"Art Director"}],images:["https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=300&fit=crop","https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400&h=300&fit=crop","https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop","https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=400&h=300&fit=crop"]}:{id:t,title:"Fantasy Character Series",description:"Digital illustration project exploring mythical creatures and fantasy character design. This collaborative project focuses on creating a series of unique characters with distinct personalities and visual styles.",progress:75,dueDate:"March 15, 2024",projectType:"Illustration Project",teamSize:2,duration:"3-4 months",meetingSchedule:"2-3 times/week",tags:["Illustration","Character Design","Digital Art"],teamLead:{artist:"Alex Chen",artistAvatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",role:"Initiator"},teamMembers:[{id:1,title:"Cyberpunk Street Scene",artist:"Alex Chen",artistAvatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",description:"A futuristic city street with vibrant neon signs and cyberpunk aesthetics",image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop",category:"Visual Effects",likes:"1.2k",views:"8.4k",timeAgo:"2 days ago",role:"Character Designer"},{id:2,title:"Dragon Knight Concept",artist:"Maya Rodriguez",artistAvatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",description:"Detailed illustration of a knight in dark, ornate armor",image:"https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400&h=300&fit=crop",category:"Game Design",likes:"2.1k",views:"12k",timeAgo:"5 days ago",role:"Art Director"}],images:["https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=300&fit=crop","https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400&h=300&fit=crop","https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop","https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=400&h=300&fit=crop"]})(c,d),h="Artist Collaborations"===u.projectType?[{id:1,title:"Character Design Collaboration",description:"Collaborated with game studio on character design for fantasy RPG",introduction:"This stage focused on creating unique character designs that would resonate with players while maintaining the fantasy RPG aesthetic. We explored various visual styles and personality traits.",status:"completed",progress:100,dueDate:"Feb 15, 2024",images:["https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=200&h=150&fit=crop","https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=200&h=150&fit=crop"]},{id:2,title:"UI/UX Design Project",description:"Led design team for mobile app interface redesign",introduction:"Redesigned the mobile app interface to improve user experience and accessibility. Focused on intuitive navigation and modern design principles.",status:"completed",progress:100,dueDate:"Feb 28, 2024",images:["https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=200&h=150&fit=crop"]},{id:3,title:"Animation Short Film",description:"Directed and animated short film for film festival",introduction:"Created a compelling short film that showcases storytelling through animation. This project pushed creative boundaries and technical skills.",status:"in-progress",progress:75,dueDate:"March 15, 2024",images:["https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=200&h=150&fit=crop","https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=200&h=150&fit=crop"]}]:[{id:1,title:"Character Concept Sketches",description:"Initial character design exploration and concept development",introduction:"Explored various character concepts through sketching and ideation. This stage established the foundation for all character designs in the series.",status:"completed",progress:100,dueDate:"Feb 15, 2024",images:["https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=200&h=150&fit=crop","https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=200&h=150&fit=crop"]},{id:2,title:"Color Palette Development",description:"Establishing the visual color scheme and mood for the series",introduction:"Developed a cohesive color palette that sets the mood and atmosphere for the entire character series. Focused on harmony and visual appeal.",status:"completed",progress:100,dueDate:"Feb 28, 2024",images:["https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=200&h=150&fit=crop"]},{id:3,title:"Final Character Illustrations",description:"Complete detailed illustrations of all main characters",introduction:"Creating the final detailed illustrations of all main characters. This stage brings together all previous work into polished, finished pieces.",status:"in-progress",progress:75,dueDate:"March 15, 2024",images:["https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=200&h=150&fit=crop","https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=200&h=150&fit=crop"]}];const{comments:m}=s,{state:p,setters:g}=Zs(),f=Js({state:p,setters:g,actions:n,navigateToCollaboration:a,project:u,comments:m});return(0,o.useLayoutEffect)(()=>{window.scrollTo({top:0,left:0,behavior:"auto"})},[d]),(0,Nt.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Nt.jsx)(Bs,{goBack:t,project:u}),(0,Nt.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,Nt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,Nt.jsx)(Hs,{project:u,milestones:h,onViewProject:f.handleApplyToCollaboration}),(0,Nt.jsx)(Gs,{project:u,onNavigateToArtist:r})]})}),(0,Nt.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,Nt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,Nt.jsxs)("div",{className:"lg:col-span-1",children:[(0,Nt.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Project Preview"}),(0,Nt.jsx)("div",{className:"grid grid-cols-2 gap-3",children:u.images.map((e,t)=>(0,Nt.jsx)("div",{className:"aspect-square overflow-hidden rounded-lg",children:(0,Nt.jsx)("img",{src:e,alt:"Project preview ".concat(t+1),className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"})},t))})]}),(0,Nt.jsxs)("div",{className:"lg:col-span-2",children:[(0,Nt.jsxs)("div",{className:"flex border-b border-gray-200 mb-6",children:[(0,Nt.jsx)("button",{onClick:()=>g.setActiveTab("timeline"),className:"px-6 py-3 text-xl font-bold border-b-2 transition-colors duration-200 ".concat("timeline"===p.activeTab?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Timeline"}),(0,Nt.jsx)("button",{onClick:()=>g.setActiveTab("comments"),className:"px-6 py-3 text-xl font-bold border-b-2 transition-colors duration-200 ".concat("comments"===p.activeTab?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Discussion Board"})]}),"timeline"===p.activeTab&&(0,Nt.jsx)(Vs,{milestones:h}),"comments"===p.activeTab&&(0,Nt.jsx)(Ws,{comment:p.comment,onCommentChange:e=>g.setComment(e.target.value),onCommentSubmit:f.handleCommentSubmit,comments:m,onNavigateToArtist:r})]})]})})]})},Ys=["All","System","Gallery","Collaboration"],Qs=["Last 7 days","Today","Last 30 days"],$s=e=>{switch(e){case"system":default:return"System";case"gallery":case"comment":case"like":case"follow":return"Gallery";case"collaboration":case"collaboration_application":case"review_request":case"review_response":return"Collaboration"}},Xs=(e,t)=>"All"===t?e.length:e.filter(e=>$s(e.type)===t).length,en=(e,t)=>{switch(e){case"system":return(0,Nt.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,Nt.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Nt.jsx)("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"})})});case"comments":return(0,Nt.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,Nt.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Nt.jsx)("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})})});case"comment":case"final_comment":return(0,Nt.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,Nt.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Nt.jsx)("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})})});case"collaboration":return(0,Nt.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:(0,Nt.jsx)("svg",{className:"w-4 h-4 text-purple-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Nt.jsx)("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"})})});case"review_request":return(0,Nt.jsx)("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:(0,Nt.jsx)("svg",{className:"w-4 h-4 text-orange-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Nt.jsx)("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})});case"gallery":return(0,Nt.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,Nt.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Nt.jsx)("path",{d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z"})})});case"follow":return(0,Nt.jsx)("div",{className:"w-8 h-8 bg-pink-100 rounded-full flex items-center justify-center",children:(0,Nt.jsxs)("svg",{className:"w-4 h-4 text-pink-600",fill:"currentColor",viewBox:"0 0 20 20",children:[(0,Nt.jsx)("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),(0,Nt.jsx)("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]})});case"like":return(0,Nt.jsx)("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:(0,Nt.jsx)("svg",{className:"w-4 h-4 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Nt.jsx)("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})})});default:return(0,Nt.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:(0,Nt.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Nt.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})})}},tn=e=>{let{activeTab:t,timeFilter:r,items:o,onTabChange:a,onTimeFilterChange:s,onMarkAllAsRead:n}=e;return(0,Nt.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,Nt.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,Nt.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Notification Center"}),(0,Nt.jsx)("div",{className:"flex space-x-8 border-b border-gray-200",children:Ys.map(e=>(0,Nt.jsxs)("button",{onClick:()=>a(e),className:"py-3 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ".concat(t===e?"Collaboration"===e?"border-purple-500 text-purple-600":"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e,(0,Nt.jsx)(er,{count:Xs(o,e),color:t===e?"Collaboration"===e?"purple":"blue":"gray"})]},e))}),(0,Nt.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,Nt.jsx)("div",{className:"flex items-center space-x-4",children:(0,Nt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Nt.jsx)("span",{className:"text-sm text-gray-600",children:"Filter by:"}),(0,Nt.jsx)("select",{value:r,onChange:e=>s(e.target.value),className:"text-sm border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Qs.map(e=>(0,Nt.jsx)("option",{children:e},e))})]})}),(0,Nt.jsxs)("button",{onClick:n,className:"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center space-x-1 transition-colors duration-200",children:[(0,Nt.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Nt.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,Nt.jsx)("span",{children:"Mark all as read"})]})]})]})})},rn=e=>{let{isOpen:t,onClose:r,onConfirm:o,onDeny:a,notification:s,actionType:n="collaboration"}=e;if(!t)return null;const i=(()=>{var e;return"collaboration"===n?{title:"Collaboration Request",confirmText:"Approve",denyText:"Deny",message:'Are you sure you want to approve the collaboration request from "'.concat((null===s||void 0===s||null===(e=s.meta)||void 0===e?void 0:e.requesterName)||"Unknown",'"?')}:{title:"Review Request",confirmText:"Approve",denyText:"Deny",message:"Are you sure you want to approve the review request?"}})();return(0,Nt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Nt.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-xl",children:[(0,Nt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:i.title}),(0,Nt.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:(0,Nt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Nt.jsxs)("div",{className:"mb-6",children:[(0,Nt.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:i.message}),s&&(0,Nt.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,Nt.jsx)("p",{className:"text-sm font-medium text-gray-900 mb-1",children:s.title}),s.message&&(0,Nt.jsx)("p",{className:"text-xs text-gray-600",children:s.message})]})]}),(0,Nt.jsxs)("div",{className:"flex space-x-3",children:[(0,Nt.jsx)("button",{onClick:r,className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors duration-200",children:"Cancel"}),(0,Nt.jsx)("button",{onClick:a,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 transition-colors duration-200",children:i.denyText}),(0,Nt.jsx)("button",{onClick:o,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 transition-colors duration-200",children:i.confirmText})]})]})})},on=e=>{let{isOpen:t=!1,onClose:r=()=>{},notification:o=null,className:a=""}=e;if(!t||!o)return null;const s=o.meta||{},n=s.commentText||"No comment content available",i=s.authorName||"Unknown User",l=s.authorRole||"Member",c=s.projectName||o.projectId||"Unknown Project",d=s.sentiment||"positive";return(0,Nt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Nt.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto ".concat(a),children:[(0,Nt.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Nt.jsxs)("div",{className:"flex items-center",children:[(0,Nt.jsx)("div",{className:"flex-shrink-0",children:(0,Nt.jsx)("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),(0,Nt.jsxs)("div",{className:"ml-4",children:[(0,Nt.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Final Comment Details"}),(0,Nt.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Review the submitted final comment"})]})]}),(0,Nt.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:(0,Nt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Nt.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,Nt.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Project Information"}),(0,Nt.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,Nt.jsxs)("p",{children:[(0,Nt.jsx)("strong",{children:"Project:"})," ",c]}),(0,Nt.jsxs)("p",{children:[(0,Nt.jsx)("strong",{children:"Notification:"})," ",o.title]}),(0,Nt.jsxs)("p",{children:[(0,Nt.jsx)("strong",{children:"Received:"})," ",new Date(o.createdAt).toLocaleString()]})]})]}),(0,Nt.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:[(0,Nt.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Comment Author"}),(0,Nt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Nt.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,Nt.jsxs)("p",{children:[(0,Nt.jsx)("strong",{children:"Name:"})," ",i]}),(0,Nt.jsxs)("p",{children:[(0,Nt.jsx)("strong",{children:"Role:"})," ",l]})]}),(0,Nt.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"positive":default:return"bg-green-100 text-green-800";case"neutral":return"bg-gray-100 text-gray-800";case"negative":return"bg-red-100 text-red-800"}})(d)),children:(e=>{switch(e){case"positive":default:return"Positive";case"neutral":return"Neutral";case"negative":return"Negative"}})(d)})]})]}),(0,Nt.jsxs)("div",{className:"mb-6",children:[(0,Nt.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Comment Content"}),(0,Nt.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 border-l-4 border-blue-500",children:(0,Nt.jsxs)("blockquote",{className:"text-gray-700 italic leading-relaxed",children:['"',n,'"']})})]}),(0,Nt.jsx)("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200",children:(0,Nt.jsx)("button",{onClick:r,className:"px-6 py-3 text-base text-gray-600 hover:text-gray-800 transition-colors duration-200",children:"Close"})})]})})},an=e=>{var t,r;let{notification:a,onNotificationClick:s,onReviewRequest:n,onCollaborationRequest:i,onMarkAsRead:l}=e;const[c,d]=(0,o.useState)(!1),[u,h]=(0,o.useState)(!1),[m,p]=(0,o.useState)(null);return o.useEffect(()=>{"review_request"===a.type?p("review"):"collaboration"===a.type&&p("collaboration")},[a.type]),(0,Nt.jsxs)("div",{onClick:e=>{e.target.closest("button")||("final_comment"!==a.type?"review_request"!==a.type||a.isRead?(!a.isRead&&l&&l(a.id),s(a)):d(!0):h(!0))},className:"rounded-lg border p-6 hover:shadow-md transition-all duration-200 cursor-pointer ".concat(a.isRead?"bg-white border-gray-200":"collaboration"===a.type?"bg-purple-50 border-l-4 border-l-purple-500":"bg-blue-50 border-l-4 border-l-blue-500"),children:[(0,Nt.jsxs)("div",{className:"flex items-start space-x-4",children:[!a.isRead&&(0,Nt.jsx)("div",{className:"w-2 h-2 rounded-full mt-3 flex-shrink-0 ".concat("collaboration"===a.type?"bg-purple-500":"bg-blue-500")}),(0,Nt.jsx)("div",{className:"flex-shrink-0",children:en(a.type)}),(0,Nt.jsx)("div",{className:"flex-1 min-w-0",children:(0,Nt.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Nt.jsxs)("div",{className:"flex-1",children:[(0,Nt.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:a.title||a.content}),a.message&&(0,Nt.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:a.message}),("review_request"===a.type&&!a.isRead||"collaboration"===a.type&&(null===(t=a.meta)||void 0===t?void 0:t.requestId)&&"pending"===(null===(r=a.meta)||void 0===r?void 0:r.status)&&!a.isRead)&&(0,Nt.jsx)("div",{className:"mt-3",children:(0,Nt.jsx)("p",{className:"text-xs text-gray-500 italic",children:"Click to approve or deny this request"})})]}),(0,Nt.jsx)("span",{className:"text-xs text-gray-500 ml-4 flex-shrink-0",children:new Date(a.createdAt).toLocaleDateString()})]})})]}),(0,Nt.jsx)(rn,{isOpen:c,onClose:()=>{d(!1),p(null)},onConfirm:()=>{"review"===m?n(a,"approved"):"collaboration"===m&&i(a,"approve"),d(!1),p(null)},onDeny:()=>{"review"===m?n(a,"denied"):"collaboration"===m&&i(a,"deny"),d(!1),p(null)},notification:a,actionType:m}),(0,Nt.jsx)(on,{isOpen:u,onClose:()=>{h(!1),!a.isRead&&l&&l(a.id)},notification:a})]})},sn=e=>{let{isLoading:t,filteredNotifications:r,hasMore:o,onNotificationClick:a,onReviewRequest:s,onCollaborationRequest:n,onMarkAsRead:i,onLoadMore:l}=e;return t?(0,Nt.jsxs)("div",{className:"text-center py-12",children:[(0,Nt.jsx)(Ht,{}),(0,Nt.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading notifications..."})]}):(0,Nt.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Nt.jsx)("div",{className:"space-y-4",children:r.map(e=>(0,Nt.jsx)(an,{notification:e,onNotificationClick:a,onReviewRequest:s,onCollaborationRequest:n,onMarkAsRead:i},e.id))}),o&&!t&&(0,Nt.jsx)("div",{className:"text-center mt-8",children:(0,Nt.jsxs)("button",{onClick:l,className:"text-blue-600 hover:text-blue-700 font-medium flex items-center space-x-1 mx-auto transition-colors duration-200",children:[(0,Nt.jsx)("span",{children:"Load more notifications"}),(0,Nt.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Nt.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})},nn="tag.collaboration_requests",ln=()=>(new Date).toISOString(),cn=()=>{try{if("undefined"===typeof window)return[];const e=window.localStorage.getItem(nn);return e?JSON.parse(e):[]}catch(e){return console.error("Error reading collaboration requests:",e),[]}},dn=e=>{try{if("undefined"===typeof window)return;window.localStorage.setItem(nn,JSON.stringify(e))}catch(t){console.error("Error writing collaboration requests:",t)}},un=e=>{let{state:t,setters:a}=e;const{setItems:s,setFilteredNotifications:n,setIsLoading:i}=a,l=(0,o.useCallback)(async()=>{try{i(!0);const e=await Hr.l.getUserNotifications(await(0,Rr.WR)());if(e.success){const t=e.data||[];console.log("NotificationCenter: Loaded notifications:",t.length),s(t),console.log("NotificationCenter: Updated items state")}else console.error("Failed to load notifications:",e.error),s([])}catch(e){console.error("Error loading notifications:",e),s([])}finally{i(!1)}},[s,i]);(0,o.useEffect)(()=>{let e=!0;const t=async()=>{e&&await l()};t();const r=async r=>{var o;const a=null===r||void 0===r||null===(o=r.detail)||void 0===o?void 0:o.userId;console.log("NotificationCenter: Received event:",r.type,"for user:",a,"current user:",await(0,Rr.WR)()),a&&a!==await(0,Rr.WR)()||(console.log("NotificationCenter: Reloading notifications due to change"),setTimeout(()=>{e&&t()},100))};return window.addEventListener("notif:unreadChanged",r),window.addEventListener("user:changed",t),()=>{e=!1,window.removeEventListener("notif:unreadChanged",r),window.removeEventListener("user:changed",t)}},[l]),(0,o.useEffect)(()=>{const e=((e,t)=>{let r=[...e];return"All"!==t&&(r=r.filter(e=>$s(e.type)===t)),r})(t.items,t.activeTab,t.timeFilter);n(e)},[t.items,t.activeTab,t.timeFilter,n]);const c=(0,o.useCallback)(async e=>{if(console.log("Notification clicked:",e),"collaboration"===e.type){var t,r,o,a,s,n;const i=e.projectId||(null===(t=e.meta)||void 0===t?void 0:t.projectId)||(null===(r=e.meta)||void 0===r?void 0:r.requestId)||(null===(o=e.meta)||void 0===o?void 0:o.collaborationId);console.log("Notification projectId lookup:",{direct:e.projectId,metaProjectId:null===(a=e.meta)||void 0===a?void 0:a.projectId,metaRequestId:null===(s=e.meta)||void 0===s?void 0:s.requestId,metaCollaborationId:null===(n=e.meta)||void 0===n?void 0:n.collaborationId,final:i}),i?(console.log("Navigating to collaboration project:",i),window.location.href="/tagme/collaboration/".concat(i)):console.log("No projectId found in notification:",e)}else console.log("Notification clicked, marked as read:",e.type)},[]),d=(0,o.useCallback)(async e=>{try{await Hr.l.markAsRead(e),console.log("NotificationCenter: Marked notification as read:",e);const t=await Hr.l.getUserNotifications(await(0,Rr.WR)());t.success&&s(t.data||[])}catch(t){console.error("Error marking notification as read:",t)}},[s]),u=(0,o.useCallback)(async()=>{try{await Hr.l.markAllAsRead(await(0,Rr.WR)()),console.log("NotificationCenter: Marked all as read")}catch(e){console.error("Error marking notifications as read:",e)}},[]),h=(0,o.useCallback)(async(e,t)=>{console.log("Review request functionality has been replaced with Add Experience")},[]),m=(0,o.useCallback)(async(e,t)=>{try{const{requestId:o}=e.meta,a=await(0,Rr.WR)();let n;if(console.log("Handling collaboration request:",{requestId:o,action:t,currentUserId:a}),"approve"===t?n=await(async(e,t)=>{const o=cn(),a=o.findIndex(r=>r.id===e&&r.ownerId===t);if(-1===a)throw new Error("Request not found");const s=o[a];s.status="approved",s.updatedAt=ln(),dn(o);try{const{createGeneralNotification:e}=await Promise.resolve().then(r.bind(r,784));await e({userId:s.requesterId,type:"collaboration",title:"Collaboration Request Approved",message:'Your collaboration request for project "'.concat(s.projectName,'" has been approved by ').concat(s.ownerName,". You can now submit your final review."),projectId:s.projectId,meta:{requestId:s.id,status:"approved",projectName:s.projectName,ownerName:s.ownerName}})}catch(n){console.error("Error creating approval notification:",n)}return"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent("collaboration:requestStatusChanged",{detail:{requestId:e,status:"approved",request:s}})),s})(o,a):"deny"===t&&(n=await(async(e,t)=>{const o=cn(),a=o.findIndex(r=>r.id===e&&r.ownerId===t);if(-1===a)throw new Error("Request not found");const s=o[a];s.status="denied",s.updatedAt=ln(),dn(o);try{const{createGeneralNotification:e}=await Promise.resolve().then(r.bind(r,784));await e({userId:s.requesterId,type:"collaboration",title:"Collaboration Request Denied",message:'Your collaboration request for project "'.concat(s.projectName,'" has been denied by ').concat(s.ownerName,"."),projectId:s.projectId,meta:{requestId:s.id,status:"denied",projectName:s.projectName,ownerName:s.ownerName}})}catch(n){console.error("Error creating denial notification:",n)}return"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent("collaboration:requestStatusChanged",{detail:{requestId:e,status:"denied",request:s}})),s})(o,a)),n){console.log("Collaboration request ".concat(t,":"),n),await Hr.l.markAsRead(e.id);const r=await Hr.l.getUserNotifications(a);r.success&&s(r.data||[])}}catch(o){console.error("Error handling collaboration request:",o)}},[s]);return{loadNotifications:l,handleNotificationClick:c,handleMarkAsRead:d,handleMarkAllAsRead:u,handleReviewRequest:h,handleCollaborationRequest:m}},hn=()=>{const{user:e}=Ct(),[t,r]=(0,o.useState)([]),[a,s]=(0,o.useState)(!1),[i,l]=(0,o.useState)(null),[c,d]=(0,o.useState)(0),u=async()=>{if(null!==e&&void 0!==e&&e.id){s(!0),l(null);try{console.log("[useNotificationData] Fetching notifications for user:",e.id);const t=await Hr.l.getUserNotifications(e.id);if(t.success){console.log("[useNotificationData] Retrieved notifications:",t.data.length),r(t.data||[]);const e=(t.data||[]).filter(e=>!e.isRead).length;d(e)}else console.error("[useNotificationData] Failed to fetch notifications:",t.error),l(t.error)}catch(t){console.error("[useNotificationData] Error fetching notifications:",t),l(t.message)}finally{s(!1)}}else console.log("[useNotificationData] No user ID, skipping fetch")};return(0,o.useEffect)(()=>{const e=()=>{console.log("[useNotificationData] Notification change detected, refreshing..."),u()};return window.addEventListener("follow:changed",e),window.addEventListener("like:changed",e),window.addEventListener("comment:added",e),()=>{window.removeEventListener("follow:changed",e),window.removeEventListener("like:changed",e),window.removeEventListener("comment:added",e)}},[null===e||void 0===e?void 0:e.id]),(0,o.useEffect)(()=>{u()},[null===e||void 0===e?void 0:e.id]),{notifications:t,isLoading:a,error:i,unreadCount:c,fetchNotifications:u,markAsRead:async e=>{try{(await Hr.l.markAsRead(e)).success&&(r(t=>t.map(t=>t.id===e?(0,n.A)((0,n.A)({},t),{},{isRead:!0}):t)),d(e=>Math.max(0,e-1)))}catch(t){console.error("[useNotificationData] Error marking as read:",t)}},markAllAsRead:async()=>{if(null!==e&&void 0!==e&&e.id)try{(await Hr.l.markAllAsRead(e.id)).success&&(r(e=>e.map(e=>(0,n.A)((0,n.A)({},e),{},{isRead:!0}))),d(0))}catch(t){console.error("[useNotificationData] Error marking all as read:",t)}}}},mn=()=>{const[e,t]=(0,o.useState)([]),[r,a]=(0,o.useState)([]),[s,n]=(0,o.useState)("All"),[i,l]=(0,o.useState)("Last 7 days"),[c,d]=(0,o.useState)(!1),[u,h]=(0,o.useState)(!0);return(0,o.useMemo)(()=>({state:{items:e,filteredNotifications:r,activeTab:s,timeFilter:i,isLoading:c,hasMore:u},setters:{setItems:t,setFilteredNotifications:a,setActiveTab:n,setTimeFilter:l,setIsLoading:d,setHasMore:h}}),[e,r,s,i,c,u])},pn=()=>{const{state:e,setters:t}=mn(),{notifications:r,isLoading:a,unreadCount:s,markAsRead:n,markAllAsRead:i,fetchNotifications:l}=hn(),c=un({state:e,setters:t});o.useEffect(()=>{t.setItems(r),t.setFilteredNotifications(r),t.setIsLoading(a)},[r,a]);return(0,Nt.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Nt.jsx)(tn,{activeTab:e.activeTab,timeFilter:e.timeFilter,items:r,onTabChange:t.setActiveTab,onTimeFilterChange:t.setTimeFilter,onMarkAllAsRead:i}),(0,Nt.jsx)(sn,{isLoading:a,filteredNotifications:r,hasMore:e.hasMore,onNotificationClick:c.handleNotificationClick,onReviewRequest:c.handleReviewRequest,onCollaborationRequest:c.handleCollaborationRequest,onMarkAsRead:n,onLoadMore:()=>{l()}})]})},gn=e=>{let{children:t}=e;const{user:r,loading:o}=Ct();return o?(0,Nt.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Nt.jsxs)("div",{className:"text-center",children:[(0,Nt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-tag-blue mx-auto"}),(0,Nt.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):r?t:(0,Nt.jsx)(Ie,{to:"/login",replace:!0})},fn=()=>(0,Nt.jsxs)("div",{className:"text-center mb-8",children:[(0,Nt.jsx)("img",{src:"/TAG_Logo.png",alt:"TAG Logo",className:"h-12 w-auto mx-auto mb-6"}),(0,Nt.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create your account"}),(0,Nt.jsxs)("p",{className:"text-sm text-gray-600 mb-4 whitespace-nowrap",children:["Only ",(0,Nt.jsx)("span",{className:"text-red-600 font-semibold",children:"scad.edu"})," emails are currently eligible for TAG registration."]})]}),vn=e=>{let{formData:t,errors:r,onInputChange:a,onSendCode:s,onSubmit:n,isLoading:i,isSendingCode:l}=e;const c=!!(d=t.email)&&d.toLowerCase().endsWith("@scad.edu");var d;const[u,h]=(0,o.useState)(!1),[m,p]=(0,o.useState)(!1);return o.useEffect(()=>{const e=setTimeout(()=>{const e=document.getElementById("email"),t=document.getElementById("password"),r=document.getElementById("confirmPassword");e&&""!==e.value&&(e.value=""),t&&""!==t.value&&(t.value=""),r&&""!==r.value&&(r.value="")},100);return()=>clearTimeout(e)},[]),(0,Nt.jsxs)("form",{onSubmit:n,className:"space-y-6",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Student Email"}),(0,Nt.jsxs)("div",{className:"flex space-x-2",children:[(0,Nt.jsx)("div",{className:"relative flex-1",children:(0,Nt.jsx)("input",{id:"email",name:"email",type:"email",required:!0,value:t.email,onChange:a,placeholder:"your.name@university.edu",autoComplete:"off",className:"block w-full px-3 py-3 border rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-tag-blue focus:border-tag-blue sm:text-sm ".concat(r.email?"border-red-300":"border-gray-300")})}),(0,Nt.jsx)("button",{type:"button",onClick:()=>s(t.email),disabled:l||!c,className:"px-4 py-3 text-sm font-medium rounded-md whitespace-nowrap transition-colors duration-200 ".concat(c&&!l?"text-white bg-tag-blue hover:bg-tag-dark-blue focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-tag-blue":"text-gray-400 bg-gray-200 cursor-not-allowed"),children:l?"Sending...":"Send Code"})]}),r.email&&(0,Nt.jsx)("p",{className:"mt-1 text-sm text-red-600",children:r.email})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{htmlFor:"verificationCode",className:"block text-sm font-medium text-gray-700 mb-2",children:"Verification Code"}),(0,Nt.jsx)("div",{className:"relative",children:(0,Nt.jsx)("input",{id:"verificationCode",name:"verificationCode",type:"text",required:!0,value:t.verificationCode,onChange:a,placeholder:"Enter 6-digit code",maxLength:"6",autoComplete:"off",className:"block w-full px-3 py-3 border rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-tag-blue focus:border-tag-blue sm:text-sm ".concat(r.verificationCode?"border-red-300":"border-gray-300")})}),r.verificationCode&&(0,Nt.jsx)("p",{className:"mt-1 text-sm text-red-600",children:r.verificationCode}),(0,Nt.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Enter the 6-digit code sent to your email"})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,Nt.jsxs)("div",{className:"relative",children:[(0,Nt.jsx)("input",{id:"password",name:"password",type:u?"text":"password",required:!0,value:t.password,onChange:a,placeholder:"Enter your password",autoComplete:"off",className:"block w-full pr-10 px-3 py-3 border rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-tag-blue focus:border-tag-blue sm:text-sm ".concat(r.password?"border-red-300":"border-gray-300")}),(0,Nt.jsx)("button",{type:"button",onClick:()=>h(!u),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:u?(0,Nt.jsx)("svg",{className:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):(0,Nt.jsxs)("svg",{className:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),r.password&&(0,Nt.jsx)("p",{className:"mt-1 text-sm text-red-600",children:r.password}),(0,Nt.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Password must be at least 6 characters"})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),(0,Nt.jsxs)("div",{className:"relative",children:[(0,Nt.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:m?"text":"password",required:!0,value:t.confirmPassword,onChange:a,placeholder:"Confirm your password",autoComplete:"off",className:"block w-full pr-10 px-3 py-3 border rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:border-tag-blue focus:ring-2 focus:ring-tag-blue sm:text-sm ".concat(r.confirmPassword?"border-red-300":"border-gray-300")}),(0,Nt.jsx)("button",{type:"button",onClick:()=>p(!m),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:m?(0,Nt.jsx)("svg",{className:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):(0,Nt.jsxs)("svg",{className:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),r.confirmPassword&&(0,Nt.jsx)("p",{className:"mt-1 text-sm text-red-600",children:r.confirmPassword})]}),r.general&&(0,Nt.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,Nt.jsxs)("div",{className:"flex",children:[(0,Nt.jsx)("div",{className:"flex-shrink-0",children:(0,Nt.jsx)("svg",{className:"h-5 w-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Nt.jsx)("div",{className:"ml-3",children:(0,Nt.jsx)("h3",{className:"text-sm font-medium text-red-800",children:r.general})})]})}),(0,Nt.jsx)("button",{type:"submit",disabled:i,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-tag-blue hover:bg-tag-dark-blue focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-tag-blue disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:i?(0,Nt.jsxs)("div",{className:"flex items-center",children:[(0,Nt.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Nt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Nt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Account..."]}):"Create Account"})]})},xn=e=>{let{isOpen:t,onClose:r}=e;if(!t)return null;return(0,Nt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:e=>{e.target===e.currentTarget&&r()},children:(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[85vh] overflow-hidden flex flex-col",children:[(0,Nt.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,Nt.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Privacy Policy \u2014 TAG (Tech Art Guide)"}),(0,Nt.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:(0,Nt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Nt.jsx)("div",{className:"p-6 overflow-y-auto flex-1",children:(0,Nt.jsxs)("div",{className:"prose prose-sm max-w-none",children:[(0,Nt.jsxs)("div",{className:"mb-6",children:[(0,Nt.jsxs)("p",{children:[(0,Nt.jsx)("strong",{children:"Effective Date:"})," 2025-09-08"]}),(0,Nt.jsxs)("p",{children:[(0,Nt.jsx)("strong",{children:"Operator/Company:"})," Shu Wang (Rain), Tech Art Guide(TAG)"]}),(0,Nt.jsxs)("p",{children:[(0,Nt.jsx)("strong",{children:"Primary Domain:"})," techartguide.com"]}),(0,Nt.jsxs)("p",{children:[(0,Nt.jsx)("strong",{children:"Contact Email:"})," tag@rainwang.art"]}),(0,Nt.jsxs)("p",{children:[(0,Nt.jsx)("strong",{children:"Mailing Address:"})," 100 Town Center Dr. Apt 7402, Garden City\uff0c GA 31405"]})]}),(0,Nt.jsx)("hr",{className:"my-6"}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"1) Scope"}),(0,Nt.jsxs)("p",{className:"mb-4",children:['This Privacy Policy applies to TAG websites, apps, and related services (collectively, the "',(0,Nt.jsx)("strong",{children:"Service"}),'"). If this Policy conflicts with the Terms of Service, the ToS controls. Specific feature policies prevail where conflicts arise.']}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"2) Information We Collect"}),(0,Nt.jsx)("p",{className:"mb-2",children:"We follow data\u2011minimization principles and collect:"}),(0,Nt.jsxs)("ul",{className:"list-disc pl-6 mb-4 space-y-2",children:[(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("strong",{children:"Data you provide:"})," account data (email, display name, avatar, profile/bio, school/major if you choose), content you upload (images/videos/text), collaboration applications, milestones, comments, and support/feedback communications."]}),(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("strong",{children:"Data collected automatically:"})," device and log data (IP, browser/OS, language, timestamps, referrer, error logs), usage events (page views, clicks, searches, likes, follows, notifications)."]}),(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("strong",{children:"Cookies & local storage:"})," for session, preferences, and analytics (see Section 10)."]}),(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("strong",{children:"From third parties:"})," authentication providers (basic profile per your settings), email delivery, analytics, and error\u2011monitoring services."]})]}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"3) How We Use Information"}),(0,Nt.jsxs)("ul",{className:"list-disc pl-6 mb-4 space-y-1",children:[(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("strong",{children:"Provide & maintain"})," the Service (authentication, uploads, display, notifications, collaboration, comments)."]}),(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("strong",{children:"Security"})," (fraud/abuse detection, access control, auditing)."]}),(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("strong",{children:"Improve"})," the Service (debugging, performance analytics, user research)."]}),(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("strong",{children:"Communicate"})," with you (service updates, important changes, support)."]}),(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("strong",{children:"Comply"})," with legal obligations and enforce the ToS."]})]}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"4) Legal Bases (GDPR/UK GDPR, where applicable)"}),(0,Nt.jsxs)("ul",{className:"list-disc pl-6 mb-4 space-y-1",children:[(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("strong",{children:"Contractual necessity"})," for core features."]}),(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("strong",{children:"Legitimate interests"})," for security, abuse prevention, product improvement, and baseline analytics (with safeguards)."]}),(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("strong",{children:"Consent"})," for optional cookies/analytics and marketing communications."]}),(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("strong",{children:"Legal obligation"})," where required by law."]})]}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"5) Sharing & Disclosure"}),(0,Nt.jsxs)("p",{className:"mb-2",children:["We ",(0,Nt.jsx)("strong",{children:"do not sell"})," personal information. We may share with:"]}),(0,Nt.jsxs)("ul",{className:"list-disc pl-6 mb-4 space-y-1",children:[(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("strong",{children:"Processors/sub\u2011processors"})," that provide database, storage/CDN, email, analytics, and error monitoring."]}),(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("strong",{children:"Legal/safety"})," authorities when required or to protect users and the Service."]}),(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("strong",{children:"Business transfers"})," (merger, acquisition, asset sale) subject to this Policy's protections."]})]}),(0,Nt.jsxs)("p",{className:"mb-4",children:["We maintain a public ",(0,Nt.jsx)("strong",{children:"sub\u2011processor list"})," (name, purpose, region, data categories) and keep it up to date on our site."]}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"6) Retention"}),(0,Nt.jsxs)("p",{className:"mb-4",children:["We retain information ",(0,Nt.jsx)("strong",{children:"no longer than necessary"})," ","for the purposes described. After you delete content or your account, we delete or anonymize data within a reasonable period, subject to technical backups and legal requirements."]}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"7) Security"}),(0,Nt.jsxs)("p",{className:"mb-4",children:["We implement reasonable"," ",(0,Nt.jsx)("strong",{children:"technical and organizational measures"})," (access control, encryption in transit/at rest via underlying providers, least privilege, logging and alerting). No system can be 100% secure."]}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"8) International Transfers"}),(0,Nt.jsx)("p",{className:"mb-4",children:"Your information may be processed outside your country/region, depending on provider regions. We use appropriate safeguards (e.g., SCCs) where required by law."}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"9) Your Rights"}),(0,Nt.jsxs)("p",{className:"mb-2",children:["Depending on your jurisdiction, you may have rights to"," ",(0,Nt.jsx)("strong",{children:"access, portability, rectification, erasure, restriction, object"}),", and ",(0,Nt.jsx)("strong",{children:"withdraw consent"})," (without affecting prior lawful processing)."]}),(0,Nt.jsxs)("p",{className:"mb-4",children:[(0,Nt.jsx)("strong",{children:"CCPA/CPRA (California):"}),' rights to know, delete, correct, limit use of sensitive PI, and non\u2011discrimination. We do not sell personal information. If we ever "share" for cross\u2011context advertising, we will provide a "Do Not Share" mechanism.']}),(0,Nt.jsx)("p",{className:"mb-4",children:"You can exercise rights via the contact methods in Section 14; we may need to verify your identity."}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"10) Cookies & Local Storage"}),(0,Nt.jsxs)("ul",{className:"list-disc pl-6 mb-4 space-y-1",children:[(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("strong",{children:"Strictly necessary:"})," session, security, load balancing (cannot be disabled)."]}),(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("strong",{children:"Functional:"})," language/theme preferences."]}),(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("strong",{children:"Analytics:"})," aggregate usage and performance (opt\u2011in where required)."]})]}),(0,Nt.jsx)("p",{className:"mb-4",children:"You can manage cookies in your browser or via our cookie\u2011preferences center. Blocking strictly necessary cookies may break the Service."}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"11) Children's Privacy"}),(0,Nt.jsxs)("p",{className:"mb-4",children:["The Service is intended for users ",(0,Nt.jsx)("strong",{children:"13+"})," (or the local minimum age). We do not knowingly collect personal data from children. Contact us if you believe we collected data without guardian consent."]}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"12) Do Not Track"}),(0,Nt.jsx)("p",{className:"mb-4",children:"Industry standards for DNT are not uniform; we may not respond to DNT signals."}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"13) Changes to this Policy"}),(0,Nt.jsx)("p",{className:"mb-4",children:"We may update this Policy from time to time. Material changes will be notified in\u2011product or via email. Continued use after the effective date constitutes acceptance."}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"14) Contact Us"}),(0,Nt.jsxs)("p",{className:"mb-4",children:[(0,Nt.jsx)("strong",{children:"Email:"})," tag@rainwang.art",(0,Nt.jsx)("br",{}),(0,Nt.jsx)("strong",{children:"Address:"})," 100 Town Center Dr. Apt 7402, Garden City\uff0c GA 31405"]}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"15) Sub\u2011processors (Illustrative Placeholders)"}),(0,Nt.jsxs)("p",{className:"mb-2",children:["Publish and maintain a page at ",(0,Nt.jsx)("code",{children:"/legal/subprocessors"})," ","listing current providers. Example table:"]}),(0,Nt.jsx)("div",{className:"overflow-x-auto mb-4",children:(0,Nt.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,Nt.jsx)("thead",{className:"bg-gray-50",children:(0,Nt.jsxs)("tr",{children:[(0,Nt.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Name"}),(0,Nt.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Purpose"}),(0,Nt.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Region"}),(0,Nt.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Data Categories"})]})}),(0,Nt.jsxs)("tbody",{children:[(0,Nt.jsxs)("tr",{children:[(0,Nt.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Supabase"}),(0,Nt.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Database, Auth, Storage/CDN, Edge Functions"}),(0,Nt.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"US/EU (selected region)"}),(0,Nt.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Account data, content files, logs"})]}),(0,Nt.jsxs)("tr",{children:[(0,Nt.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Vercel"}),(0,Nt.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Frontend hosting, CDN, edge caching"}),(0,Nt.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Global"}),(0,Nt.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"IP, request metadata, static access logs"})]}),(0,Nt.jsxs)("tr",{children:[(0,Nt.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Email service (Resend)"}),(0,Nt.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Transactional email"}),(0,Nt.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"US/EU"}),(0,Nt.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Email, delivery status"})]}),(0,Nt.jsxs)("tr",{children:[(0,Nt.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Analytics/Monitoring (Vercel Analytics/Sentry)"}),(0,Nt.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Performance analytics & error monitoring"}),(0,Nt.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Global"}),(0,Nt.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Usage/error logs (mostly de\u2011identified)"})]})]})]})}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"16) Additional Retention Details"}),(0,Nt.jsxs)("ul",{className:"list-disc pl-6 mb-4 space-y-1",children:[(0,Nt.jsxs)("li",{children:["Account data: delete/anonymize within"," ",(0,Nt.jsx)("strong",{children:"30\u201390 days"})," after account deletion."]}),(0,Nt.jsxs)("li",{children:["Content files: CDN invalidation and backend deletion may take"," ",(0,Nt.jsx)("strong",{children:"X days"}),"."]}),(0,Nt.jsxs)("li",{children:["Security/audit logs: retained ",(0,Nt.jsx)("strong",{children:"90\u2013180 days"})," for safety and compliance."]})]}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"17) Complaints"}),(0,Nt.jsx)("p",{className:"mb-4",children:"If you believe our processing violates applicable law, you may lodge a complaint with a supervisory authority. We encourage you to contact us first."}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"18) Definitions"}),(0,Nt.jsx)("p",{className:"mb-4",children:'"personal data / personal information", "processing", "controller", "processor", "sell", and "share" have the meanings given under applicable law.'}),(0,Nt.jsx)("hr",{className:"my-6"}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Annex \u2014 Cookie/Local Storage Examples"}),(0,Nt.jsxs)("ul",{className:"list-disc pl-6 mb-4 space-y-1",children:[(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("code",{children:"session"})," for authentication (strictly necessary)"]}),(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("code",{children:"preferred_language"}),", ",(0,Nt.jsx)("code",{children:"theme"})," for UI preferences (functional)"]}),(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("code",{children:"analytics_*"})," for performance/aggregated metrics (analytics; opt\u2011in where required)"]})]})]})}),(0,Nt.jsx)("div",{className:"flex justify-end p-6 border-t border-gray-200 flex-shrink-0",children:(0,Nt.jsx)("button",{onClick:r,className:"px-6 py-2 bg-tag-blue text-white rounded-md hover:bg-tag-dark-blue transition-colors duration-200",children:"Close"})})]})})},bn=e=>{let{isOpen:t,onClose:r}=e;if(!t)return null;return(0,Nt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:e=>{e.target===e.currentTarget&&r()},children:(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[85vh] overflow-hidden flex flex-col",children:[(0,Nt.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,Nt.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Terms of Service \u2014 TAG (Tech Art Guide)"}),(0,Nt.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:(0,Nt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Nt.jsx)("div",{className:"p-6 overflow-y-auto flex-1",children:(0,Nt.jsxs)("div",{className:"prose prose-sm max-w-none",children:[(0,Nt.jsxs)("div",{className:"mb-6",children:[(0,Nt.jsxs)("p",{children:[(0,Nt.jsx)("strong",{children:"Effective Date:"})," 2025-09-08"]}),(0,Nt.jsxs)("p",{children:[(0,Nt.jsx)("strong",{children:"Operator/Company:"})," Shu Wang (Rain), Tech Art Guide(TAG)"]}),(0,Nt.jsxs)("p",{children:[(0,Nt.jsx)("strong",{children:"Contact Email:"})," tag@rainwang.art"]})]}),(0,Nt.jsx)("hr",{className:"my-6"}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"1) Acceptance of Terms"}),(0,Nt.jsxs)("p",{className:"mb-4",children:["By accessing or using TAG's websites and related services (the \"",(0,Nt.jsx)("strong",{children:"Service"}),'"), you agree to be bound by these Terms of Service ("',(0,Nt.jsx)("strong",{children:"Terms"}),'"). If you do not agree, do not use the Service. Our ',(0,Nt.jsx)("strong",{children:"Privacy Policy"})," and any posted guidelines are incorporated into these Terms by reference."]}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"2) Eligibility"}),(0,Nt.jsxs)("p",{className:"mb-4",children:["You represent and warrant that you are at least"," ",(0,Nt.jsx)("strong",{children:"13 years old"})," (or the minimum age in your jurisdiction). If you use the Service on behalf of an organization, you are authorized to bind that entity to these Terms."]}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"3) Accounts & Security"}),(0,Nt.jsxs)("p",{className:"mb-4",children:["You must provide accurate information and safeguard your credentials. You are responsible for all activity under your account. Notify us promptly of any unauthorized use.",(0,Nt.jsx)("br",{}),(0,Nt.jsx)("strong",{children:"Password recovery"})," is available via our reset flow; additional verification may be required."]}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"4) User Content & License"}),(0,Nt.jsxs)("ul",{className:"list-disc pl-6 mb-4 space-y-2",children:[(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("strong",{children:"Ownership."}),' You retain ownership of any content you upload or post (images, text, audio/video, projects, comments) ("',(0,Nt.jsx)("strong",{children:"User Content"}),'").']}),(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("strong",{children:"License to TAG."})," You grant TAG a"," ",(0,Nt.jsx)("strong",{children:"non\u2011exclusive, worldwide, royalty\u2011free, transferable, sublicensable"})," ","license to host, store, reproduce, process, transmit, display, and distribute your User Content as necessary to operate, improve, and promote the Service. Reasonable technical copies may persist in backups/logs for a limited period after deletion."]}),(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("strong",{children:"Marketing Display (Opt\u2011out)."})," We may showcase public User Content in product placements, emails, or social channels to promote the Service. You can opt out via settings or by contacting us."]}),(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("strong",{children:"Collaboration Artifacts."})," Content created or exchanged within applications, milestones, or reviews remains owned by the respective creators, but you grant a limited"," ",(0,Nt.jsx)("strong",{children:"in\u2011product re\u2011use"})," license so it can appear in collaboration histories, notifications, and related features."]}),(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("strong",{children:"Responsibility."})," You are solely responsible for your User Content and for having all rights necessary to grant the above license."]})]}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"5) Acceptable Use Policy (AUP)"}),(0,Nt.jsx)("p",{className:"mb-2",children:"You agree not to:"}),(0,Nt.jsxs)("ul",{className:"list-disc pl-6 mb-4 space-y-1",children:[(0,Nt.jsx)("li",{children:"upload or engage in illegal, infringing, hateful, harassing, violent, sexually exploitative, or otherwise objectionable content or conduct;"}),(0,Nt.jsx)("li",{children:"upload malware, attempt to gain unauthorized access, scrape at scale, or disrupt the Service;"}),(0,Nt.jsx)("li",{children:"circumvent technical limits (including file\u2011size or rate limits) or security controls."})]}),(0,Nt.jsxs)("p",{className:"mb-4",children:[(0,Nt.jsx)("strong",{children:"File & Bandwidth Limits."})," Upload size, types, and traffic are subject to posted guidelines. We may rate\u2011limit, remove content, or suspend accounts for abusive or excessive usage."]}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"6) Third\u2011Party Services"}),(0,Nt.jsx)("p",{className:"mb-4",children:"The Service may integrate third\u2011party providers (Supabase\u3001Vercel\u3001Resend). Their own terms and privacy policies govern those services. TAG is not responsible for third\u2011party content, outages, or actions."}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"7) Copyright & Takedown (DMCA)"}),(0,Nt.jsxs)("p",{className:"mb-4",children:["We respect intellectual property. If you believe material on the Service infringes your rights, send a takedown notice to our"," ",(0,Nt.jsx)("strong",{children:"Designated Agent"}),":",(0,Nt.jsx)("br",{}),(0,Nt.jsx)("strong",{children:"Email:"})," tag@rainwang.art",(0,Nt.jsx)("br",{}),(0,Nt.jsx)("br",{}),"Your notice must include the required elements under applicable law (identification of the work, location of the material, your statements, and signature). We may terminate repeat infringers."]}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"8) Feedback"}),(0,Nt.jsxs)("p",{className:"mb-4",children:["Ideas, suggestions, or feedback you submit are deemed"," ",(0,Nt.jsx)("strong",{children:"non\u2011confidential"})," and you grant TAG a"," ",(0,Nt.jsx)("strong",{children:"perpetual, worldwide, royalty\u2011free"})," license to use them for any purpose."]}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"9) Fees & Taxes"}),(0,Nt.jsx)("p",{className:"mb-4",children:"Unless otherwise stated, core features are currently free. Paid subscriptions or premium features, if any, will be described at purchase time. You are responsible for applicable taxes."}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"10) Privacy"}),(0,Nt.jsxs)("p",{className:"mb-4",children:["Our collection and use of personal information is described in our"," ",(0,Nt.jsx)("strong",{children:"Privacy Policy"}),". Please review it carefully."]}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"11) Termination"}),(0,Nt.jsx)("p",{className:"mb-4",children:"We may suspend or terminate access to all or part of the Service if you violate these Terms, create risks, or for other legitimate reasons. You may stop using the Service at any time and may delete your account/content (subject to technical backups and legal requirements)."}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"12) Changes to the Service"}),(0,Nt.jsx)("p",{className:"mb-4",children:"We may modify, suspend, or discontinue features at any time. For material changes, we will provide reasonable notice."}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"13) Disclaimers"}),(0,Nt.jsxs)("p",{className:"mb-4",children:["THE SERVICE IS PROVIDED ",(0,Nt.jsx)("strong",{children:'"AS IS"'})," AND"," ",(0,Nt.jsx)("strong",{children:'"AS AVAILABLE"'})," WITHOUT WARRANTIES OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NON\u2011INFRINGEMENT."]}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"14) Limitation of Liability"}),(0,Nt.jsxs)("p",{className:"mb-4",children:["TO THE MAXIMUM EXTENT PERMITTED BY LAW, TAG AND ITS AFFILIATES SHALL NOT BE LIABLE FOR INDIRECT, INCIDENTAL, SPECIAL, PUNITIVE, OR CONSEQUENTIAL DAMAGES. OUR AGGREGATE LIABILITY FOR DIRECT DAMAGES SHALL NOT EXCEED THE GREATER OF ",(0,Nt.jsx)("strong",{children:"USD $100"})," ","OR THE AMOUNTS YOU PAID TO TAG FOR THE SERVICE IN THE"," ",(0,Nt.jsx)("strong",{children:"12 MONTHS"})," PRECEDING THE EVENT GIVING RISE TO LIABILITY."]}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"15) Indemnification"}),(0,Nt.jsx)("p",{className:"mb-4",children:"You will indemnify and hold TAG, its officers, employees, and partners harmless from any claims, losses, liabilities, and expenses (including reasonable attorneys' fees) arising from your use of the Service, your User Content, or your breach of these Terms."}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"16) Governing Law & Disputes"}),(0,Nt.jsxs)("p",{className:"mb-4",children:["These Terms are governed by the laws of"," ",(0,Nt.jsx)("strong",{children:"State of Georgia, USA"}),", without regard to conflict of laws. You consent to the exclusive jurisdiction of the courts located in ",(0,Nt.jsx)("strong",{children:"Location"}),".",(0,Nt.jsx)("br",{}),(0,Nt.jsx)("em",{children:"Optional:"})," an arbitration and class\u2011action waiver clause may be added upon legal review."]}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"17) Changes to Terms"}),(0,Nt.jsx)("p",{className:"mb-4",children:"We may update these Terms from time to time. Changes are effective upon posting or as otherwise stated in the notice. Your continued use constitutes acceptance."}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"18) Severability & Entire Agreement"}),(0,Nt.jsx)("p",{className:"mb-4",children:"If any provision is found unenforceable, the remainder remains in effect. These Terms, together with the documents incorporated by reference, constitute the entire agreement between you and TAG."}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"19) Contact"}),(0,Nt.jsxs)("p",{className:"mb-6",children:[(0,Nt.jsx)("strong",{children:"Email:"})," tag@rainwang.art",(0,Nt.jsx)("br",{}),(0,Nt.jsx)("strong",{children:"Address:"})," 100 Town Center Dr. Apt 7402, Garden City\uff0c GA 31405"]}),(0,Nt.jsx)("hr",{className:"my-6"}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Annex \u2014 Community & Technical Guidelines (Summary)"}),(0,Nt.jsx)("p",{className:"mb-2",children:"To allow faster iteration, we maintain detailed guidelines separately and reference them here:"}),(0,Nt.jsxs)("ul",{className:"list-disc pl-6 mb-4 space-y-1",children:[(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("strong",{children:"Upload Limits:"})," \u2264 10 MB per file for images/short clips (see posted limits). Do not circumvent limits or security controls."]}),(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("strong",{children:"Attribution & Provenance:"})," disclose AI\u2011generated/AI\u2011assisted works and the licensing or sources of materials used where applicable."]}),(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("strong",{children:"Abuse & Rate\u2011Limits:"})," unusual traffic, mass sign\u2011ups, or suspicious engagement may be restricted."]}),(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)("strong",{children:"Appeals:"})," content removals or account actions can be appealed within ",(0,Nt.jsx)("strong",{children:"14 days"})," via the Help Center."]})]})]})}),(0,Nt.jsx)("div",{className:"flex justify-end p-6 border-t border-gray-200 flex-shrink-0",children:(0,Nt.jsx)("button",{onClick:r,className:"px-6 py-2 bg-tag-blue text-white rounded-md hover:bg-tag-dark-blue transition-colors duration-200",children:"Close"})})]})})},yn=e=>{let{onLoginClick:t}=e;const[r,a]=(0,o.useState)(!1),[s,n]=(0,o.useState)(!1);return(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsx)("div",{className:"mt-6 flex justify-center",children:(0,Nt.jsx)("button",{onClick:t,className:"w-full flex justify-center py-3 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-tag-blue transition-colors duration-200",children:"Login"})}),(0,Nt.jsx)("footer",{className:"bg-white border-t border-gray-200",children:(0,Nt.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,Nt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Nt.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,Nt.jsx)("span",{className:"font-bold",children:"Tech Art Guide"}),(0,Nt.jsx)("span",{className:"ml-2",children:"\xa9 2025 TAG. All rights reserved."})]}),(0,Nt.jsxs)("div",{className:"flex space-x-6 text-sm text-gray-500",children:[(0,Nt.jsx)("button",{onClick:()=>{a(!0)},className:"hover:text-gray-700 transition-colors duration-200",children:"Privacy Policy"}),(0,Nt.jsx)("button",{onClick:()=>{n(!0)},className:"hover:text-gray-700 transition-colors duration-200",children:"Terms of Service"})]})]})})}),(0,Nt.jsx)(xn,{isOpen:r,onClose:()=>a(!1)}),(0,Nt.jsx)(bn,{isOpen:s,onClose:()=>n(!1)})]})},wn=()=>{const[e,t]=(0,o.useState)({email:"",verificationCode:"",password:"",confirmPassword:""}),[r,a]=(0,o.useState)({}),[s,i]=(0,o.useState)(!1),[l,c]=(0,o.useState)(!1),d=(0,o.useCallback)(e=>{const{name:o,value:s}=e.target;t(e=>(0,n.A)((0,n.A)({},e),{},{[o]:s})),r[o]&&a(e=>((e,t)=>{if(e[t]){const r=(0,n.A)({},e);return delete r[t],r}return e})(e,o))},[r]),u=(0,o.useCallback)(()=>{const t=(e=>{const t={};var r,o;return e.email?(r=e.email,/\S+@\S+\.\S+/.test(r)||(t.email="Please enter a valid email address")):t.email="Please enter your email address",e.verificationCode?(o=e.verificationCode,/^\d{6}$/.test(o)||(t.verificationCode="Verification code should be 6 digits")):t.verificationCode="Please enter verification code",e.password?e.password.length>=6||(t.password="Password must be at least 6 characters"):t.password="Please enter password",e.confirmPassword?(a=e.password,s=e.confirmPassword,a===s||(t.confirmPassword="Passwords do not match")):t.confirmPassword="Please confirm password",{isValid:0===Object.keys(t).length,errors:t};var a,s})(e);return a(t.errors),t.isValid},[e]),h=(0,o.useCallback)(()=>{t({email:"",verificationCode:"",password:"",confirmPassword:""}),a({}),i(!1),c(!1)},[]),m=(0,o.useCallback)(e=>{i(e)},[]),p=(0,o.useCallback)(e=>{c(e)},[]),g=(0,o.useCallback)((e,t)=>{a(r=>(0,n.A)((0,n.A)({},r),{},{[e]:t}))},[]),f=(0,o.useCallback)(e=>{a(t=>(0,n.A)((0,n.A)({},t),{},{general:e}))},[]);return{formData:e,errors:r,isLoading:s,isSendingCode:l,handleInputChange:d,validateForm:u,resetForm:h,setLoading:m,setSendingCode:p,setError:g,setGeneralError:f}},jn=e=>{const t=e.message.toLowerCase();return t.includes("already registered")||t.includes("registered")?"This email is already registered. Please sign in or use a different email.":t.includes("expired")?"Verification code has expired. Please request a new one.":t.includes("invalid")?"Invalid verification code. Please try again.":t.includes("password")?"Password is not strong enough. Please use a more complex password.":t.includes("rate limit")||t.includes("too many requests")?"Too many attempts. Please wait a moment and try again.":t.includes("user not found")?"No account found with this email. Please sign up first.":t.includes("email not confirmed")?"Please verify your email address first.":t.includes("network")||t.includes("connection")?"Network error. Please check your connection and try again.":"Something went wrong. Please try again."},kn="This field is required.",Nn=e=>{let{formData:t,validateForm:r,setLoading:a,setSendingCode:s,setError:n,setGeneralError:i,onStepChange:l}=e;const c=ue(),d=(0,o.useCallback)(async e=>{if(e){s(!0);try{const{success:t,error:r}=await(async e=>{try{const{data:t,error:r}=await kt.supabase.functions.invoke("send-verification-code",{body:{email:e}});return r?{success:!1,error:r.message||"Failed to send verification code"}:{success:!0,data:t}}catch(r){return{success:!1,error:r.message}}})(e);t?(s(!1),n("email","\u2705 Verification code sent! Please check your inbox.\nIf you don't receive the email, please check your junk/spam folder."),l&&l("otp")):(s(!1),n("email",jn({message:r})))}catch(t){console.error("Failed to send verification code:",t),s(!1),n("email","Failed to send verification code, please try again")}}else n("email",kn)},[s,n]),u=(0,o.useCallback)(async e=>{if(e.preventDefault(),r()){a(!0);try{const{success:e,user:r,session:o,error:s}=await(async(e,t,r)=>{try{const{data:o,error:a}=await kt.supabase.functions.invoke("verify-code",{body:{email:e,code:t,password:r}});return a?{success:!1,error:a.message||"Failed to create user"}:{success:!0,user:o.user,session:o.session}}catch(o){return{success:!1,error:o.message}}})(t.email,t.verificationCode,t.password);if(!e)return a(!1),void i(jn({message:s}));console.log("Registration successful:",r),a(!1),alert("Registration successful! You are now logged in."),null!==r&&void 0!==r&&r.id?c("/artist/".concat(r.id)):c("/")}catch(o){console.error("Registration error:",o),a(!1),i("Registration failed, please try again")}}},[t,r,a,i,c]);return{sendVerificationCode:d,handleSubmit:u,handleLoginClick:(0,o.useCallback)(()=>{c("/login")},[c])}},Sn=()=>{const{formData:e,errors:t,isLoading:r,isSendingCode:o,handleInputChange:a,validateForm:s,setLoading:n,setSendingCode:i,setError:l,setGeneralError:c}=wn(),d=Nn({formData:e,validateForm:s,setLoading:n,setSendingCode:i,setError:l,setGeneralError:c,onStepChange:e=>{console.log("Step changed to:",e)}});return(0,Nt.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,Nt.jsx)("div",{className:"flex-1 flex items-center justify-center px-4 sm:px-6 lg:px-8",children:(0,Nt.jsx)("div",{className:"max-w-md w-full space-y-8",children:(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,Nt.jsx)(fn,{}),(0,Nt.jsx)(vn,{formData:e,errors:t,onInputChange:a,onSendCode:d.sendVerificationCode,onSubmit:d.handleSubmit,isLoading:r,isSendingCode:o}),(0,Nt.jsx)(yn,{onLoginClick:d.handleLoginClick})]})})})})},Cn=()=>{const[e,t]=(0,o.useState)("checking"),[r,a]=(0,o.useState)({}),[s,n]=(0,o.useState)({});(0,o.useEffect)(()=>{a({VITE_SUPABASE_URL:"https://ooaicpvsjmmxuccqlzuh.supabase.co",VITE_SUPABASE_ANON_KEY:"\u2705 \u5df2\u8a2d\u7f6e"});(async()=>{try{const e=await(0,kt.B)();t(e?"connected":"disconnected"),await i()}catch(e){console.error("Connection test failed:",e),t("error")}})()},[]);const i=async()=>{const e={};try{e.auth=!!kt.supabase.auth,e.from=!!kt.supabase.from,e.storage=!!kt.supabase.storage,n(e)}catch(t){console.error("Basic functions test failed:",t)}};return(0,Nt.jsxs)("div",{className:"max-w-2xl mx-auto p-6 bg-white rounded-lg shadow-lg",children:[(0,Nt.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Supabase \u9023\u63a5\u72c0\u614b\u6aa2\u67e5"}),(0,Nt.jsxs)("div",{className:"mb-6 p-4 border rounded-lg",children:[(0,Nt.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"\ud83d\udccb \u74b0\u5883\u8b8a\u91cf\u6aa2\u67e5"}),(0,Nt.jsxs)("div",{className:"space-y-2",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("strong",{children:"REACT_APP_SUPABASE_URL:"}),(0,Nt.jsx)("div",{className:"text-gray-600 break-all",children:r.REACT_APP_SUPABASE_URL||"\u672a\u8a2d\u7f6e"})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("strong",{children:"REACT_APP_SUPABASE_ANON_KEY:"}),(0,Nt.jsx)("div",{className:"text-gray-600",children:r.REACT_APP_SUPABASE_ANON_KEY})]})]})]}),(0,Nt.jsxs)("div",{className:"mb-6 p-4 border rounded-lg",children:[(0,Nt.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"\ud83d\udd17 \u9023\u63a5\u72c0\u614b"}),(0,Nt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Nt.jsx)("span",{children:"\u72c0\u614b:"}),(0,Nt.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat((e=>{switch(e){case"connected":return"text-green-600 bg-green-100";case"disconnected":return"text-yellow-600 bg-yellow-100";case"error":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}})(e)),children:(e=>{switch(e){case"connected":return"\u2705 \u5df2\u9023\u63a5";case"disconnected":return"\u26a0\ufe0f \u9023\u63a5\u5931\u6557";case"error":return"\u274c \u9023\u63a5\u932f\u8aa4";default:return"\ud83d\udd04 \u6aa2\u67e5\u4e2d..."}})(e)})]})]}),(0,Nt.jsxs)("div",{className:"mb-6 p-4 border rounded-lg",children:[(0,Nt.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"\ud83e\uddea \u57fa\u672c\u529f\u80fd\u6e2c\u8a66"}),(0,Nt.jsxs)("div",{className:"space-y-2",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("strong",{children:"Auth \u529f\u80fd:"}),(0,Nt.jsx)("span",{className:"ml-2 px-2 py-1 rounded text-sm ".concat(s.auth?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:s.auth?"\u2705 \u53ef\u7528":"\u274c \u4e0d\u53ef\u7528"})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("strong",{children:"Database \u529f\u80fd:"}),(0,Nt.jsx)("span",{className:"ml-2 px-2 py-1 rounded text-sm ".concat(s.from?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:s.from?"\u2705 \u53ef\u7528":"\u274c \u4e0d\u53ef\u7528"})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("strong",{children:"Storage \u529f\u80fd:"}),(0,Nt.jsx)("span",{className:"ml-2 px-2 py-1 rounded text-sm ".concat(s.storage?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:s.storage?"\u2705 \u53ef\u7528":"\u274c \u4e0d\u53ef\u7528"})]})]})]}),(0,Nt.jsx)("div",{className:"text-center",children:(0,Nt.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"\u91cd\u65b0\u6e2c\u8a66\u9023\u63a5"})}),(0,Nt.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,Nt.jsx)("h3",{className:"font-semibold mb-2",children:"\ud83d\udcdd \u8aaa\u660e"}),(0,Nt.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,Nt.jsx)("li",{children:"\u2022 \u5982\u679c\u74b0\u5883\u8b8a\u91cf\u672a\u8a2d\u7f6e\uff0c\u8acb\u6aa2\u67e5 .env.local \u6587\u4ef6"}),(0,Nt.jsx)("li",{children:"\u2022 \u5982\u679c\u9023\u63a5\u5931\u6557\uff0c\u8acb\u6aa2\u67e5 Supabase \u9805\u76ee\u72c0\u614b\u548c\u7db2\u7d61\u9023\u63a5"}),(0,Nt.jsx)("li",{children:"\u2022 \u9023\u63a5\u6210\u529f\u5f8c\uff0c\u7528\u6236\u8a8d\u8b49\u529f\u80fd\u5c07\u81ea\u52d5\u555f\u7528"}),(0,Nt.jsx)("li",{children:"\u2022 \u8a2a\u554f\u8def\u5f91: /test-supabase"})]})]})]})},An=async(e,t)=>{if(!e)return null;try{if(e.startsWith("data:")){const a="collaboration_".concat(t,"_").concat(Date.now());try{const{imageStorage:t}=await Promise.resolve().then(r.bind(r,337));return t&&t.storeImage?(await t.storeImage(a,e),console.log("[Collaboration] Stored Data URL to IndexedDB with key: ".concat(a)),a):(console.warn("[Collaboration] imageStorage not available, using Data URL as fallback"),e)}catch(o){return console.warn("[Collaboration] IndexedDB storage failed, using Data URL as fallback:",o),e}}if(e.startsWith("blob:")){const a=await fetch(e),s=await a.blob(),n=await new Promise((e,t)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=()=>t(r.error),r.readAsDataURL(s)}),i="collaboration_".concat(t,"_").concat(Date.now());try{const{imageStorage:e}=await Promise.resolve().then(r.bind(r,337));return e&&e.storeImage?(await e.storeImage(i,n),console.log("[Collaboration] Stored Data URL to IndexedDB with key: ".concat(i)),i):(console.warn("[Collaboration] imageStorage not available, using Data URL as fallback"),n)}catch(o){return console.warn("[Collaboration] IndexedDB storage failed, using Data URL as fallback:",o),n}}return e}catch(a){return console.warn("[Collaboration] Failed to process image, returning original URL as fallback:",a),e}},_n=async e=>{var t,r,o,a,s,n,i,l,c,d,u,h,m,p;const g=await(0,Rr.WR)(),f=await(0,Rr.HW)(),v="temp_".concat(Date.now());return{title:(null===(t=e.title)||void 0===t?void 0:t.trim())||"",description:(null===(r=e.description)||void 0===r?void 0:r.trim())||"",projectVision:(null===(o=e.projectVision)||void 0===o?void 0:o.trim())||"",whyThisMatters:(null===(a=e.whyThisMatters)||void 0===a?void 0:a.trim())||"",teamSize:e.teamSize||"",duration:e.duration||"",meetingSchedule:e.meetingSchedule||"",applicationDeadline:e.applicationDeadline||"",projectType:(null===(s=e.projectType)||void 0===s?void 0:s.trim())||"",posterPreview:await An(e.posterPreview,v),heroImage:await An(e.posterPreview,v),contactInfo:{email:(null===(n=e.contactEmail)||void 0===n?void 0:n.trim())||(null===(i=e.contactInfo)||void 0===i||null===(l=i.email)||void 0===l?void 0:l.trim())||"",discord:(null===(c=e.contactDiscord)||void 0===c?void 0:c.trim())||(null===(d=e.contactInfo)||void 0===d||null===(u=d.discord)||void 0===u?void 0:u.trim())||"",other:(null===(h=e.contactOther)||void 0===h?void 0:h.trim())||(null===(m=e.contactInfo)||void 0===m||null===(p=m.other)||void 0===p?void 0:p.trim())||""},roles:(t=>{console.log("[formatFormDataForAPI] Input formData.roles:",e.roles);const r=(null===(t=e.roles)||void 0===t?void 0:t.map(e=>{var t,r,o,a;console.log("[formatFormDataForAPI] Processing role:",e);const s={id:e.id||Date.now().toString(),title:(null===(t=e.customRole)||void 0===t?void 0:t.trim())||(null===(r=e.title)||void 0===r?void 0:r.trim())||"",description:(null===(o=e.roleDescription)||void 0===o?void 0:o.trim())||(null===(a=e.description)||void 0===a?void 0:a.trim())||"",requiredSkills:e.requiredSkills?Array.isArray(e.requiredSkills)?e.requiredSkills:"string"===typeof e.requiredSkills?e.requiredSkills.split(",").map(e=>e.trim()).filter(e=>e.length>0):[]:[],status:"available"};return console.log("[formatFormDataForAPI] Processed role:",s),s}).filter(e=>{const t=e.title&&e.title.length>0;return console.log('[formatFormDataForAPI] Role "'.concat(e.title,'" has title: ').concat(t)),t}))||[];return console.log("[formatFormDataForAPI] Final processed roles:",r),r})(),author:{id:g,name:(null===f||void 0===f?void 0:f.displayName)||(null===f||void 0===f?void 0:f.name)||"Unknown",avatar:(null===f||void 0===f?void 0:f.avatar)||null,role:(null===f||void 0===f?void 0:f.role)||"Initiator"},status:"active",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),likes:0,views:0,applications:[]}},In=e=>{if(!e)return"Unknown date";const t=new Date(e);if(isNaN(t.getTime()))return"Invalid date";const r=t.getFullYear(),o=t.toLocaleDateString("en-US",{month:"short"}),a=t.getDate();return"".concat(o," ").concat(a,", ").concat(r)},En=e=>{var t,r,o,a,s,n;const i={};null!==(t=e.title)&&void 0!==t&&t.trim()||(i.title="Project title is required"),null!==(r=e.description)&&void 0!==r&&r.trim()?e.description.length>1e3&&(i.description="Project description must be 1000 characters or less"):i.description="Project description is required",null!==(o=e.projectVision)&&void 0!==o&&o.trim()?e.projectVision.length>200&&(i.projectVision="Project vision must be 200 characters or less"):i.projectVision="Project vision is required",e.whyThisMatters&&e.whyThisMatters.length>1e3&&(i.whyThisMatters="Why This Matters must be 1000 characters or less"),e.teamSize||(i.teamSize="Team size is required"),e.duration||(i.duration="Duration is required"),e.meetingSchedule||(i.meetingSchedule="Meeting schedule is required"),e.applicationDeadline||(i.applicationDeadline="Application deadline is required");const l=(null===(a=e.contactInfo)||void 0===a||null===(s=a.email)||void 0===s?void 0:s.trim())||(null===(n=e.contactEmail)||void 0===n?void 0:n.trim());return l?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l)||(i.contactEmail="Please enter a valid email address"):i.contactEmail="Email is required",e.roles&&0!==e.roles.length?e.roles.forEach((e,t)=>{var r,o,a,s;const n=(null===(r=e.title)||void 0===r?void 0:r.trim())||(null===(o=e.customRole)||void 0===o?void 0:o.trim()),l=(null===(a=e.description)||void 0===a?void 0:a.trim())||(null===(s=e.roleDescription)||void 0===s?void 0:s.trim());n||(i["role".concat(t)]="Role name is required"),l||(i["roleDescription".concat(t)]="Role description is required")}):i.roles="At least one role is required",{isValid:0===Object.keys(i).length,errors:i}},Pn=()=>"collab_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),Dn=[{id:Pn(),title:"Game Concept Design Collaboration",description:"Creating an innovative mobile game concept that combines puzzle mechanics with narrative storytelling. We're looking for talented artists and designers to help bring this vision to life.",projectVision:"Revolutionizing mobile gaming through innovative concept design and storytelling",whyThisMatters:"This project aims to push the boundaries of mobile game design by creating an experience that's both visually stunning and intellectually engaging. We believe in the power of games to tell meaningful stories and connect people.",teamSize:"4-5",duration:"3-4 months",meetingSchedule:"2-3 times/week",applicationDeadline:"2024-12-15",projectType:"Game Design, Concept Art",contactInfo:{email:"alex.chen@example.com",discord:"alexchen#1234",other:""},roles:[{id:"role_1",title:"Character Designer",description:"Create unique and memorable character designs that fit the game's aesthetic and narrative. Experience with character development and concept art required.",requiredSkills:"Character Design, Concept Art, Adobe Photoshop, Procreate",status:"available"},{id:"role_2",title:"Environment Artist",description:"Design immersive game environments that enhance the storytelling experience. Strong understanding of lighting, composition, and atmospheric design.",requiredSkills:"Environment Design, Digital Painting, 3D Modeling, Unity",status:"available"},{id:"role_3",title:"UI/UX Designer",description:"Design intuitive and visually appealing user interfaces that enhance the gaming experience. Focus on accessibility and user engagement.",requiredSkills:"UI Design, UX Research, Figma, Adobe XD",status:"filled"}],author:{id:"alex",name:"Alex Chen",avatar:null,role:"Concept Artist"},status:"active",createdAt:"2024-11-01T10:00:00Z",updatedAt:"2024-11-01T10:00:00Z",likes:24,views:156,applications:[]}],Tn=[{id:Pn(),title:"Digital Illustration Project",description:"Collaborative digital art project focused on creating a series of illustrations for a children's book. We're seeking artists who can bring warmth and imagination to storytelling through art.",projectVision:"Creating magical illustrations that inspire and delight young readers",whyThisMatters:"Children's books have the power to shape imaginations and create lasting memories. This project aims to create illustrations that not only tell a story but also inspire creativity and wonder in young minds.",teamSize:"2-3",duration:"1-2 months",meetingSchedule:"1-2 times/week",applicationDeadline:"2024-11-30",projectType:"Illustration, Children's Book",contactInfo:{email:"bryan.rodriguez@example.com",discord:"bryanrodriguez#5678",other:""},roles:[{id:"role_1",title:"Character Illustrator",description:"Create charming and expressive character illustrations that appeal to children. Ability to maintain consistent character designs across multiple scenes.",requiredSkills:"Character Illustration, Digital Art, Adobe Illustrator, Procreate",status:"available"},{id:"role_2",title:"Background Artist",description:"Design whimsical and engaging backgrounds that complement the story and characters. Strong sense of color and composition.",requiredSkills:"Background Art, Digital Painting, Color Theory, Adobe Photoshop",status:"available"}],author:{id:"bryan",name:"Bryan Rodriguez",avatar:null,role:"Illustrator"},status:"active",createdAt:"2024-10-25T14:30:00Z",updatedAt:"2024-10-25T14:30:00Z",likes:18,views:89,applications:[]},{id:Pn(),title:"Sci-Fi Concept Art Collection",description:"Creating a collection of sci-fi concept art pieces for a digital art portfolio. Looking for artists who can bring futuristic visions to life with attention to detail and technical accuracy.",projectVision:"Pushing the boundaries of sci-fi concept art through innovative design and storytelling",whyThisMatters:"Sci-fi art has the power to inspire technological innovation and explore the possibilities of the future. This collection aims to showcase the intersection of art and technology.",teamSize:"3-4",duration:"2-3 months",meetingSchedule:"2-3 times/week",applicationDeadline:"2024-12-20",projectType:"Concept Art, Sci-Fi",contactInfo:{email:"bryan.rodriguez@example.com",discord:"bryanrodriguez#5678",other:""},roles:[{id:"role_1",title:"Vehicle Designer",description:"Design futuristic vehicles and spacecraft with realistic engineering principles. Strong understanding of form, function, and aerodynamics.",requiredSkills:"Vehicle Design, Industrial Design, 3D Modeling, Blender",status:"available"},{id:"role_2",title:"Character Designer",description:"Create unique alien and humanoid character designs that fit the sci-fi aesthetic. Focus on diversity and creative anatomy.",requiredSkills:"Character Design, Anatomy, Digital Painting, ZBrush",status:"available"},{id:"role_3",title:"Environment Designer",description:"Design otherworldly environments and space stations with attention to scale and atmosphere. Strong lighting and composition skills.",requiredSkills:"Environment Design, Digital Painting, Lighting, Adobe Photoshop",status:"filled"}],author:{id:"bryan",name:"Bryan Rodriguez",avatar:null,role:"Illustrator"},status:"active",createdAt:"2024-10-20T09:15:00Z",updatedAt:"2024-10-20T09:15:00Z",likes:31,views:203,applications:[]}],Ln=[{id:Pn(),title:"Photography Portfolio Collaboration",description:"Creating a stunning photography portfolio that showcases urban life and human stories. We're looking for photographers who can capture authentic moments and tell compelling visual narratives.",projectVision:"Documenting the beauty and complexity of urban life through authentic photography",whyThisMatters:"Photography has the power to preserve moments, tell stories, and connect people across cultures and time. This project aims to create a visual record of urban life that resonates with viewers and preserves important cultural moments.",teamSize:"3-4",duration:"2-3 months",meetingSchedule:"1-2 times/week",applicationDeadline:"2024-11-15",projectType:"Photography, Street Photography",contactInfo:{email:"alice@example.com",discord:"alice_photo#9012",other:""},roles:[{id:"role_1",title:"Street Photographer",description:"Capture candid moments of urban life and human interaction. Strong understanding of composition, lighting, and timing.",requiredSkills:"Street Photography, Composition, Lighting, Adobe Lightroom",status:"available"},{id:"role_2",title:"Portrait Photographer",description:"Create compelling portraits that tell individual stories. Ability to work with diverse subjects and create comfortable shooting environments.",requiredSkills:"Portrait Photography, Lighting, Photoshop, Communication",status:"available"},{id:"role_3",title:"Photo Editor",description:"Edit and enhance photographs while maintaining authenticity. Strong post-processing skills and attention to detail.",requiredSkills:"Photo Editing, Adobe Photoshop, Color Grading, Attention to Detail",status:"filled"}],author:{id:"alice",name:"Alice",avatar:null,role:"Photographer"},status:"active",createdAt:"2024-10-28T16:45:00Z",updatedAt:"2024-10-28T16:45:00Z",likes:42,views:267,applications:[]}],Mn=[...Dn,...Tn,...Ln],Rn=((0,n.A)((0,n.A)({},{title:"",description:"",projectVision:"",whyThisMatters:"",teamSize:"",duration:"",meetingSchedule:"",applicationDeadline:"",projectType:"",contactInfo:{email:"",discord:"",other:""},roles:[]}),{},{status:"active"}),{page:1,limit:12,status:"active",authorId:null,searchTerm:"",sortBy:"createdAt",sortOrder:"desc"}),Fn={success:!0,data:null,error:null,message:"",pagination:{page:1,limit:12,total:0,totalPages:0,hasNext:!1,hasPrev:!1}},Un="mock_collaborations",On=()=>{try{const t=localStorage.getItem(Un),r=t?JSON.parse(t):Mn;var e;if(console.log("[getCollaborationsFromStorage] Retrieved collaborations:",r),r&&r.length>0)console.log("[getCollaborationsFromStorage] First collaboration roles:",null===(e=r[0])||void 0===e?void 0:e.roles);return r}catch(t){return console.error("Error reading collaborations from storage:",t),Mn}},zn=e=>{try{localStorage.setItem(Un,JSON.stringify(e))}catch(t){console.error("Error saving collaborations to storage:",t)}},Wn=async e=>{try{const o=En(e);if(!o.isValid)return(0,n.A)((0,n.A)({},Fn),{},{success:!1,error:"Validation failed",data:o.errors});const a=await _n(e);if(a.id=Pn(),e.poster&&e.poster instanceof File){const o="collaboration_".concat(a.id,"_poster");try{const t=await Promise.resolve().then(r.bind(r,337));await t.default.storeImage(o,e.poster),a.heroImage=o,a.posterPreview=o,a.posterKey=o,console.log("[Collaboration] Stored image with key: ".concat(o))}catch(t){console.error("[Collaboration] Failed to store image:",t)}}const s=[a,...On()];return console.log("[createCollaboration] collaborationData to store:",a),console.log("[createCollaboration] collaborationData.roles:",a.roles),zn(s),(0,n.A)((0,n.A)({},Fn),{},{success:!0,data:a,message:"Collaboration created successfully"})}catch(t){return console.error("Error creating collaboration:",t),(0,n.A)((0,n.A)({},Fn),{},{success:!1,error:t.message||"Failed to create collaboration"})}},Bn=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=(0,n.A)((0,n.A)({},Rn),e);let r=On();if(t.authorId&&(r=r.filter(e=>e.author.id===t.authorId)),t.status&&(r=r.filter(e=>e.status===t.status)),t.searchTerm){const e=t.searchTerm.toLowerCase();r=r.filter(t=>t.title.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)||t.projectVision.toLowerCase().includes(e))}r.sort((e,r)=>{const o=e[t.sortBy],a=r[t.sortBy];return"desc"===t.sortOrder?new Date(a)-new Date(o):new Date(o)-new Date(a)});const o=r.length,a=Math.ceil(o/t.limit),s=(t.page-1)*t.limit,i=s+t.limit,l=r.slice(s,i),c=l.map(e=>{var t,r,o,a,s;return{id:e.id,title:e.title,subtitle:e.description,description:e.description,projectVision:e.projectVision,whyThisMatters:e.whyThisMatters,image:e.heroImage||null,posterPreview:e.posterPreview||e.heroImage||null,categories:[],author:{id:(null===(t=e.author)||void 0===t?void 0:t.id)||null,name:(null===(r=e.author)||void 0===r?void 0:r.name)||"Unknown",avatar:(null===(o=e.author)||void 0===o?void 0:o.avatar)||null},likes:e.likes||0,views:e.views||0,isLiked:!1,isBookmarked:!1,isInitiator:!1,role:(null===(a=e.author)||void 0===a?void 0:a.role)||"Initiator",duration:e.duration||"",meetingSchedule:e.meetingSchedule||"",applicationDeadline:e.applicationDeadline||"",status:"active"===e.status?"Open for Collaboration":"Closed",skills:(null===(s=e.roles)||void 0===s?void 0:s.map(e=>e.title))||[],teamSize:e.teamSize||"",currentMembers:0}});return(0,n.A)((0,n.A)({},Fn),{},{success:!0,data:c,pagination:{page:t.page,limit:t.limit,total:o,totalPages:a,hasNext:t.page<a,hasPrev:t.page>1}})}catch(t){return console.error("Error fetching collaborations:",t),(0,n.A)((0,n.A)({},Fn),{},{success:!1,error:t.message||"Failed to fetch collaborations"})}},Gn=async e=>{try{const t=On(),r=t.find(t=>t.id===e);if(!r)return(0,n.A)((0,n.A)({},Fn),{},{success:!1,error:"Collaboration not found"});r.views=(r.views||0)+1,zn(t);const o=(e=>{var t,r,o,a,s,n;console.log("[formatAPIDataForDetail] Input apiData:",e),console.log("[formatAPIDataForDetail] Input apiData.roles:",null===e||void 0===e?void 0:e.roles);const i={id:e.id,title:e.title,author:{id:null===(t=e.author)||void 0===t?void 0:t.id,title:e.title,artist:(null===(r=e.author)||void 0===r?void 0:r.name)||"Unknown",artistAvatar:(null===(o=e.author)||void 0===o?void 0:o.avatar)||null,description:e.description,image:e.heroImage||null,category:e.projectType||"Project",likes:e.likes||0,views:e.views||0,timeAgo:In(e.createdAt),role:(null===(a=e.author)||void 0===a?void 0:a.role)||"Initiator"},duration:e.duration,teamSize:e.teamSize,postedTime:In(e.createdAt),tags:[],heroImage:e.heroImage||e.posterPreview||null,description:e.description,meetingFrequency:e.meetingSchedule,deadline:e.applicationDeadline||e.deadline,contactInfo:e.contactInfo,status:e.status,projectVision:e.projectVision,whyThisMatters:e.whyThisMatters,vision:{tagline:e.projectVision,narrative:e.whyThisMatters,lookingFor:(null===(s=e.roles)||void 0===s?void 0:s.map(e=>e.title))||[],hiringTargets:(null===(n=e.roles)||void 0===n?void 0:n.map(e=>e.title))||[],contact:e.contactInfo},milestones:[],roles:e.roles||[]};return console.log("[formatAPIDataForDetail] Output result.roles:",i.roles),i})(r);return(0,n.A)((0,n.A)({},Fn),{},{success:!0,data:o})}catch(t){return console.error("Error fetching collaboration details:",t),(0,n.A)((0,n.A)({},Fn),{},{success:!1,error:t.message||"Failed to fetch collaboration details"})}},Hn=async(e,t)=>{try{const r=On(),o=r.findIndex(t=>t.id===e);if(-1===o)return(0,n.A)((0,n.A)({},Fn),{},{success:!1,error:"Collaboration not found"});const a=En(t);if(!a.isValid)return(0,n.A)((0,n.A)({},Fn),{},{success:!1,error:"Validation failed",data:a.errors});const s=(e=>{var t,r,o,a,s,i,l,c,d,u,h,m;return(0,n.A)((0,n.A)({},e),{},{title:(null===(t=e.title)||void 0===t?void 0:t.trim())||"",description:(null===(r=e.description)||void 0===r?void 0:r.trim())||"",projectVision:(null===(o=e.projectVision)||void 0===o?void 0:o.trim())||"",whyThisMatters:(null===(a=e.whyThisMatters)||void 0===a?void 0:a.trim())||"",projectType:(null===(s=e.projectType)||void 0===s?void 0:s.trim())||"",contactInfo:{email:(null===(i=e.contactInfo)||void 0===i||null===(l=i.email)||void 0===l?void 0:l.trim())||"",discord:(null===(c=e.contactInfo)||void 0===c||null===(d=c.discord)||void 0===d?void 0:d.trim())||"",other:(null===(u=e.contactInfo)||void 0===u||null===(h=u.other)||void 0===h?void 0:h.trim())||""},roles:(null===(m=e.roles)||void 0===m?void 0:m.map(e=>{var t,r;return(0,n.A)((0,n.A)({},e),{},{title:(null===(t=e.title)||void 0===t?void 0:t.trim())||"",description:(null===(r=e.description)||void 0===r?void 0:r.trim())||"",requiredSkills:e.requiredSkills?Array.isArray(e.requiredSkills)?e.requiredSkills:"string"===typeof e.requiredSkills?e.requiredSkills.split(",").map(e=>e.trim()).filter(e=>e.length>0):[]:[]})}))||[]})})(t);return r[o]=(0,n.A)((0,n.A)((0,n.A)({},r[o]),s),{},{updatedAt:(new Date).toISOString()}),zn(r),(0,n.A)((0,n.A)({},Fn),{},{success:!0,data:r[o],message:"Collaboration updated successfully"})}catch(r){return console.error("Error updating collaboration:",r),(0,n.A)((0,n.A)({},Fn),{},{success:!1,error:r.message||"Failed to update collaboration"})}},qn=async e=>{try{const t=On(),r=t.filter(t=>t.id!==e);return r.length===t.length?(0,n.A)((0,n.A)({},Fn),{},{success:!1,error:"Collaboration not found"}):(zn(r),(0,n.A)((0,n.A)({},Fn),{},{success:!0,message:"Collaboration deleted successfully"}))}catch(t){return console.error("Error deleting collaboration:",t),(0,n.A)((0,n.A)({},Fn),{},{success:!1,error:t.message||"Failed to delete collaboration"})}},Vn=async e=>{try{const t=On(),r=t.find(t=>t.id===e);return r?(r.likes=(r.likes||0)+1,zn(t),(0,n.A)((0,n.A)({},Fn),{},{success:!0,data:{likes:r.likes},message:"Collaboration liked successfully"})):(0,n.A)((0,n.A)({},Fn),{},{success:!1,error:"Collaboration not found"})}catch(t){return console.error("Error liking collaboration:",t),(0,n.A)((0,n.A)({},Fn),{},{success:!1,error:t.message||"Failed to like collaboration"})}},Jn=async()=>{try{const e={total:Mn.length,byUser:{alex:Dn.length,bryan:Tn.length,alice:Ln.length},byStatus:{active:Mn.filter(e=>"active"===e.status).length,completed:Mn.filter(e=>"completed"===e.status).length,paused:Mn.filter(e=>"paused"===e.status).length}};return(0,n.A)((0,n.A)({},Fn),{},{success:!0,data:e})}catch(e){return console.error("Error fetching collaboration stats:",e),(0,n.A)((0,n.A)({},Fn),{},{success:!1,error:e.message||"Failed to fetch collaboration stats"})}},Zn=async()=>{try{return zn(Mn),(0,n.A)((0,n.A)({},Fn),{},{success:!0,message:"Mock data reset successfully"})}catch(e){return console.error("Error resetting mock data:",e),(0,n.A)((0,n.A)({},Fn),{},{success:!1,error:e.message||"Failed to reset mock data"})}},Kn=e=>{let{imageKey:t,alt:r="Collaboration image",className:a="w-full h-56 object-cover",fallbackClassName:s="w-full h-56 bg-gray-200 flex items-center justify-center"}=e;const[n,i]=(0,o.useState)(null),[l,c]=(0,o.useState)(!1),[d,u]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{(async()=>{if(t){if(t.startsWith("blob:")||t.startsWith("data:")||t.startsWith("http"))return t.startsWith("blob:"),void i(t);if(t.startsWith("collaboration_")){c(!0),u(!1);try{const e=await Ba.default.getImageUrl(t);i(e)}catch(e){console.warn("[CollaborationImage] Failed to load image: ".concat(t),e),u(!0)}finally{c(!1)}}else i(t)}else i(null)})()},[t]),l?(0,Nt.jsx)("div",{className:s,children:(0,Nt.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):d||!n?(0,Nt.jsx)("div",{className:s,children:(0,Nt.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}):(0,Nt.jsx)("img",{src:n,alt:r,className:a,onError:e=>{console.warn("[CollaborationImage] Image failed to load: ".concat(n)),e.target.style.display="none",d||u(!0)}})},Yn=e=>{let{onCollaborationClick:t,onBookmarkToggle:r}=e;const[a,s]=(0,o.useState)([]),[i,l]=(0,o.useState)(!0),[c,d]=(0,o.useState)(null),[u,h]=(0,o.useState)({});(0,o.useEffect)(()=>{const e=async()=>{try{l(!0);const e=await Bn();e.success?(s(e.data),await t(e.data)):d(e.error)}catch(e){d(e.message)}finally{l(!1)}},t=async e=>{try{const t=(0,Rr.HW)();if(console.log("[CollaborationGrid] \u5f53\u524d\u7528\u6237:",t),null===t||void 0===t||!t.id)return void console.warn("[CollaborationGrid] \u7528\u6237\u672a\u767b\u5f55\uff0c\u8df3\u8fc7\u6536\u85cf\u72b6\u6001\u68c0\u67e5");const r={};for(const o of e)try{console.log("[CollaborationGrid] \u68c0\u67e5\u534f\u4f5c ".concat(o.id," \u7684\u6536\u85cf\u72b6\u6001..."));const e=await zr.checkFavoriteStatus("collaboration",o.id);e.success?(r[o.id]=e.data.isFavorited,console.log("[CollaborationGrid] \u534f\u4f5c ".concat(o.id," \u6536\u85cf\u72b6\u6001:"),e.data.isFavorited)):(console.error("[CollaborationGrid] \u68c0\u67e5\u534f\u4f5c ".concat(o.id," \u6536\u85cf\u72b6\u6001\u5931\u8d25:"),e.error),r[o.id]=!1)}catch(c){console.error("[CollaborationGrid] \u68c0\u67e5\u534f\u4f5c ".concat(o.id," \u6536\u85cf\u72b6\u6001\u65f6\u51fa\u9519:"),c),r[o.id]=!1}h(r),console.log("[CollaborationGrid] \u6240\u6709\u6536\u85cf\u72b6\u6001:",r)}catch(c){console.error("[CollaborationGrid] \u68c0\u67e5\u6536\u85cf\u72b6\u6001\u65f6\u51fa\u9519:",c)}};e();const r=()=>{e()};return window.addEventListener("collaboration:created",r),()=>{window.removeEventListener("collaboration:created",r)}},[]);return i?(0,Nt.jsx)("div",{className:"flex-1 flex items-center justify-center py-12",children:(0,Nt.jsx)("div",{className:"text-gray-500",children:"Loading collaborations..."})}):c?(0,Nt.jsx)("div",{className:"flex-1 flex items-center justify-center py-12",children:(0,Nt.jsxs)("div",{className:"text-red-500",children:["Error loading collaborations: ",c]})}):0===a.length?(0,Nt.jsx)("div",{className:"flex-1 flex items-center justify-center py-12",children:(0,Nt.jsx)("div",{className:"text-gray-500",children:"No collaborations found."})}):(0,Nt.jsx)("div",{className:"flex-1",children:(0,Nt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(e=>(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md hover:scale-105 transition-all duration-300",children:[(0,Nt.jsxs)("div",{className:"relative",children:[(0,Nt.jsx)("div",{onClick:()=>t&&t(e),className:"block cursor-pointer",children:(0,Nt.jsx)(Kn,{imageKey:e.posterPreview,alt:e.title})}),(0,Nt.jsx)("button",{onClick:t=>(async(e,t)=>{e.stopPropagation();try{const e=(0,Rr.HW)();if(null===e||void 0===e||!e.id)return void console.error("[CollaborationGrid] \u7528\u6237\u672a\u767b\u5f55\uff0c\u65e0\u6cd5\u6536\u85cf");const o=u[t]||!1;console.log("[CollaborationGrid] \u5207\u6362\u534f\u4f5c ".concat(t," \u6536\u85cf\u72b6\u6001\uff0c\u5f53\u524d\u72b6\u6001:"),o);const a=await zr.toggleFavorite("collaboration",t,!o);if(a.success){const e=!o;h(r=>(0,n.A)((0,n.A)({},r),{},{[t]:e})),r&&r(t),console.log("[CollaborationGrid] \u534f\u4f5c ".concat(t," ").concat(e?"\u6536\u85cf":"\u53d6\u6d88\u6536\u85cf","\u6210\u529f")),setTimeout(async()=>{try{const e=await zr.checkFavoriteStatus("collaboration",t);console.log("[CollaborationGrid] \u9a8c\u8bc1\u534f\u4f5c ".concat(t," \u6536\u85cf\u72b6\u6001:"),e.data.isFavorited)}catch(c){console.error("[CollaborationGrid] \u9a8c\u8bc1\u6536\u85cf\u72b6\u6001\u5931\u8d25:",c)}},100)}else console.error("[CollaborationGrid] \u6536\u85cf\u64cd\u4f5c\u5931\u8d25:",a.error)}catch(c){console.error("[CollaborationGrid] \u6536\u85cf\u64cd\u4f5c\u51fa\u9519:",c)}})(t,e.id),className:"absolute top-3 right-3 p-2 bg-white bg-opacity-90 rounded-full hover:bg-opacity-100 transition-all duration-200",title:u[e.id]?"\u53d6\u6d88\u6536\u85cf":"\u6536\u85cf",children:(0,Nt.jsx)("svg",{className:"w-5 h-5 ".concat(u[e.id]?"text-purple-500 fill-current":"text-gray-400"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})})]}),(0,Nt.jsxs)("div",{className:"p-3",children:[(0,Nt.jsx)("div",{onClick:()=>t&&t(e),className:"block cursor-pointer",children:(0,Nt.jsx)("h3",{className:"font-bold text-gray-900 mb-2 text-sm hover:text-purple-600 transition-colors duration-200",children:e.title})}),(0,Nt.jsxs)("div",{className:"flex items-center",children:[e.author.avatar?(0,Nt.jsx)("img",{src:e.author.avatar,alt:e.author.name,className:"w-6 h-6 rounded-full mr-2 object-cover",onError:e=>{e.target.style.display="none"}}):(0,Nt.jsx)("div",{className:"w-6 h-6 rounded-full mr-2 bg-gray-300 flex items-center justify-center",children:(0,Nt.jsx)("span",{className:"text-xs text-gray-600 font-medium",children:e.author.name.charAt(0).toUpperCase()})}),(0,Nt.jsx)("span",{className:"text-xs font-medium text-gray-900",children:e.author.name})]})]})]},e.id))})})},Qn={categories:[{id:"thesis-project",name:"Thesis Project"},{id:"course-project",name:"Course Project"},{id:"studio-class",name:"Studio Class"},{id:"research-collaboration",name:"Research Collaboration"},{id:"internship-project",name:"Internship Project"},{id:"startup",name:"Startup"},{id:"student-club",name:"Student Club"},{id:"interdisciplinary-teamwork",name:"Interdisciplinary Teamwork"},{id:"international-exchange",name:"International Exchange"},{id:"others",name:"Others"}],majors:[{id:"accessory-design",name:"Accessory Design"},{id:"acting",name:"Acting"},{id:"advertising",name:"Advertising"},{id:"animation",name:"Animation"},{id:"architecture",name:"Architecture"},{id:"art-history",name:"Art History"},{id:"creative-business-leadership",name:"Creative Business Leadership"},{id:"fashion-design",name:"Fashion Design"},{id:"fibers",name:"Fibers"},{id:"film",name:"Film"},{id:"film-television",name:"Film/Television"},{id:"fine-art",name:"Fine Art"},{id:"game-design",name:"Game/ITGM"},{id:"graphic-design",name:"Graphic Design"},{id:"industrial-design",name:"Industrial Design"},{id:"illustration",name:"Illustration"},{id:"interior-design",name:"Interior Design"},{id:"jewelry",name:"Jewelry"},{id:"motion-design",name:"Motion Design"},{id:"painting",name:"Painting"},{id:"photography",name:"Photography"},{id:"service-design",name:"Service Design"},{id:"sequential-art",name:"Sequential Art"},{id:"ui-ux",name:"UI/UX"},{id:"visual-effects",name:"Visual Effects"}],tags:[{id:"typography",name:"Typography"},{id:"branding",name:"Branding"},{id:"editorial",name:"Editorial"},{id:"minimalist",name:"Minimalist"},{id:"experimental",name:"Experimental"},{id:"sustainable",name:"Sustainable"},{id:"interactive",name:"Interactive"},{id:"motion",name:"Motion"}]},$n=[{id:1,title:"Fantasy Character Series",description:"Digital illustration project exploring mythical creatures",image:null,progress:75,tags:["Illustration","Character Design"],teamMembers:[{name:"Sarah Chen",avatar:null},{name:"Alex Kim",avatar:null}],timestamp:"3 hours ago"},{id:2,title:"Cyberpunk Game Environment",description:"3D environment design for indie game project",image:null,progress:60,tags:["Game Design","3D Modeling"],teamMembers:[{name:"Maya Rodriguez",avatar:null},{name:"David Lee",avatar:null},{name:"Emma Wilson",avatar:null}],timestamp:"5 hours ago"},{id:3,title:"Short Film Storyboard",description:"Pre-production planning for student film festival",image:null,progress:25,tags:["Film","Storyboard"],teamMembers:[{name:"Jordan Park",avatar:null},{name:"Sophie Davis",avatar:null}],timestamp:"1 day ago"},{id:4,title:"Music Festival Branding",description:"Complete visual identity for campus music festival",image:null,progress:80,tags:["Graphic Design","Branding"],teamMembers:[{name:"Mike Johnson",avatar:null},{name:"Lisa Chen",avatar:null},{name:"Tom Wilson",avatar:null}],timestamp:"6 hours ago"},{id:5,title:"Magic VFX Sequence",description:"Visual effects compositing for fantasy short film",image:null,progress:40,tags:["VFX","Compositing"],teamMembers:[{name:"Anna Smith",avatar:null},{name:"Chris Brown",avatar:null}],timestamp:"2 days ago"},{id:6,title:"2D Character Animation",description:"Walk cycle and expressions for animated short",image:null,progress:90,tags:["Animation","2D Art"],teamMembers:[{name:"Rachel Green",avatar:null},{name:"Kevin Lee",avatar:null},{name:"Maria Garcia",avatar:null},{name:"James Miller",avatar:null}],timestamp:"4 hours ago"}],Xn=[{id:1,title:"Indie Horror Game",description:"Seeking talented artists for an atmospheric horror game project with unique visual style and immersive storytelling.",status:"Open",timePosted:"2 days ago",skills:["3D Artist","Concept Artist"],tools:["Unity","Blender"],recruiter:{name:"Alex Chen",avatar:null},applicants:5,dueDate:"March 15"},{id:2,title:"Animated Short Film",description:"Collaborative animation project for film festival submission. Looking for creative animators and sound designers.",status:"Open",timePosted:"1 week ago",skills:["Animator","Sound Designer"],tools:["After Effects","Premiere"],recruiter:{name:"Sarah Kim",avatar:null},applicants:12,dueDate:"April 2"},{id:3,title:"Mobile App UI Design",description:"Design intuitive and modern user interface for a productivity app targeting young professionals.",status:"Urgent",timePosted:"3 hours ago",skills:["UI Designer","UX Designer"],tools:["Figma","Sketch"],recruiter:{name:"Mike Rodriguez",avatar:null},applicants:8,dueDate:"Feb 28"},{id:4,title:"VR Experience Project",description:"Immersive virtual reality experience for educational purposes. Seeking developers with VR development experience.",status:"Open",timePosted:"5 days ago",skills:["Unity Developer","3D Artist"],tools:["Unity","Oculus SDK"],recruiter:{name:"Emma Johnson",avatar:null},applicants:3,dueDate:"May 10"},{id:5,title:"Podcast Series Design",description:"Create visual identity and promotional materials for a student-run podcast series about design and creativity.",status:"Open",timePosted:"1 day ago",skills:["Graphic Designer","Motion Designer"],tools:["Photoshop","After Effects"],recruiter:{name:"David Lee",avatar:null},applicants:6,dueDate:"March 20"}],ei=e=>{let{onApplyJob:t}=e;return(0,Nt.jsxs)("div",{className:"flex-1",children:[(0,Nt.jsxs)("div",{className:"text-center py-8 mb-8",children:[(0,Nt.jsx)("h3",{className:"text-lg font-medium text-red-500 mb-2",children:"Jobs Coming Soon"}),(0,Nt.jsx)("p",{className:"text-red-400",children:"Job opportunities and internships will be available here."})]}),(0,Nt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Xn.map(e=>(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-all duration-300",children:[(0,Nt.jsxs)("div",{className:"p-4 border-b border-gray-100",children:[(0,Nt.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Nt.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("Urgent"===e.status?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.status}),(0,Nt.jsx)("span",{className:"text-xs text-gray-500",children:e.timePosted})]}),(0,Nt.jsx)("h3",{className:"font-bold text-gray-900 text-lg mb-2",children:e.title}),(0,Nt.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:e.description})]}),(0,Nt.jsxs)("div",{className:"p-4",children:[(0,Nt.jsx)("div",{className:"mb-3",children:(0,Nt.jsx)("div",{className:"flex flex-wrap gap-2",children:e.skills.map((e,t)=>(0,Nt.jsx)("span",{className:"px-3 py-1 text-xs bg-blue-100 text-blue-800 rounded-full font-medium",children:e},t))})}),(0,Nt.jsx)("div",{className:"mb-4",children:(0,Nt.jsx)("div",{className:"flex flex-wrap gap-2",children:e.tools.map((e,t)=>(0,Nt.jsx)("span",{className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded-full font-medium",children:e},t))})}),(0,Nt.jsxs)("div",{className:"flex items-center mb-3",children:[(0,Nt.jsx)("img",{src:e.recruiter.avatar,alt:e.recruiter.name,className:"w-8 h-8 rounded-full mr-3"}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.recruiter.name}),(0,Nt.jsxs)("p",{className:"text-xs text-gray-500",children:[e.applicants," applicants"]})]})]}),(0,Nt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Nt.jsxs)("span",{className:"text-sm text-gray-600",children:["Due: ",e.dueDate]}),(0,Nt.jsx)("button",{onClick:()=>t&&t(e.id),className:"bg-purple-500 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-purple-600 transition-colors duration-200",children:"Apply"})]})]})]},e.id))})]})},ti=e=>({Illustration:"bg-purple-200 text-purple-800","Character Design":"bg-blue-200 text-blue-800","Game Design":"bg-green-200 text-green-800","3D Modeling":"bg-purple-200 text-purple-800",Film:"bg-orange-200 text-orange-800",Storyboard:"bg-blue-200 text-blue-800","Graphic Design":"bg-pink-200 text-pink-800",Branding:"bg-blue-200 text-blue-800",VFX:"bg-purple-200 text-purple-800",Compositing:"bg-orange-200 text-orange-800",Animation:"bg-green-200 text-green-800","2D Art":"bg-pink-200 text-pink-800"}[e]||"bg-gray-200 text-gray-800"),ri=e=>{let{onMilestoneClick:t}=e;return(0,Nt.jsx)("div",{className:"flex-1",children:(0,Nt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:$n.map(e=>{return(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md hover:scale-105 transition-all duration-300",children:[(0,Nt.jsx)("div",{className:"relative",children:(0,Nt.jsx)(gt,{to:"/tagme/milestone/".concat(e.id),className:"block",children:(0,Nt.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-48 object-cover"})})}),(0,Nt.jsxs)("div",{className:"p-4",children:[(0,Nt.jsxs)(gt,{to:"/tagme/milestone/".concat(e.id),className:"block",children:[(0,Nt.jsx)("h3",{className:"font-bold text-gray-900 mb-1 text-lg hover:text-purple-600 transition-colors duration-200",children:e.title}),(0,Nt.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:e.description})]}),(0,Nt.jsxs)("div",{className:"mb-4",children:[(0,Nt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Nt.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Progress"}),(0,Nt.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[e.progress,"%"]})]}),(0,Nt.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,Nt.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat((t=e.tags[0],{Illustration:"bg-purple-500","Character Design":"bg-blue-500","Game Design":"bg-green-500","3D Modeling":"bg-purple-500",Film:"bg-orange-500",Storyboard:"bg-blue-500","Graphic Design":"bg-pink-500",Branding:"bg-blue-500",VFX:"bg-purple-500",Compositing:"bg-orange-500",Animation:"bg-green-500","2D Art":"bg-pink-500"}[t]||"bg-gray-500")),style:{width:"".concat(e.progress,"%")}})})]}),(0,Nt.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:e.tags.map((e,t)=>(0,Nt.jsx)("span",{className:"px-3 py-1 text-xs rounded-full font-medium ".concat(ti(e)),children:e},t))}),(0,Nt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Nt.jsxs)("div",{className:"flex items-center",children:[(0,Nt.jsx)("div",{className:"flex -space-x-2 mr-3",children:e.teamMembers.slice(0,4).map((e,t)=>(0,Nt.jsx)("img",{src:e.avatar,alt:e.name,className:"w-8 h-8 rounded-full border-2 border-white"},t))}),(0,Nt.jsxs)("span",{className:"text-sm text-gray-600",children:[e.teamMembers.length," members"]})]}),(0,Nt.jsx)("span",{className:"text-xs text-gray-500",children:e.timestamp})]})]})]},e.id);var t})})})},oi=e=>{let{children:t,activeTab:r,onTabChange:o,onCollaborationClick:a,onMilestoneClick:s}=e;return(0,Nt.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[(0,Nt.jsxs)("div",{className:"flex flex-col mb-8","data-tagme-section":!0,children:[(0,Nt.jsx)("h2",{className:"text-3xl font-bold text-gray-400 mb-6",children:"TAG Me"}),(0,Nt.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,Nt.jsx)("div",{className:"w-7/12",children:(0,Nt.jsx)(Et,{onInputChange:e=>console.log("Search:",e.target.value),placeholder:"Search for Collaborations or Artists",className:"w-full"})}),(0,Nt.jsx)("div",{className:"inline-flex rounded-full border border-gray-300 bg-white p-1",children:["Collaborations","Milestones","Jobs"].map(e=>(0,Nt.jsxs)("button",{onClick:()=>o(e),className:"relative px-12 py-3 text-base font-semibold tracking-wide transition-all duration-300 ease-in-out ".concat(r===e?"text-white":"text-gray-700 hover:text-gray-900"),children:[r===e&&(0,Nt.jsx)("div",{className:"absolute inset-0 bg-purple-500 rounded-full transition-all duration-300 ease-in-out"}),(0,Nt.jsx)("span",{className:"relative z-10",children:e})]},e))})]})]}),(0,Nt.jsx)("div",{className:"flex flex-col lg:flex-row gap-8",children:t})]})},ai=e=>{let{selectedCategories:t,selectedMajors:r,selectedTags:o,onCategoryToggle:a,onMajorToggle:s,onTagToggle:n}=e;return(0,Nt.jsx)("div",{className:"lg:w-64 flex-shrink-0",children:(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,Nt.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-6",children:"Filters"}),(0,Nt.jsxs)("div",{className:"mb-8",children:[(0,Nt.jsx)("h4",{className:"font-bold text-gray-900 mb-3",children:"Category"}),(0,Nt.jsx)("div",{className:"space-y-2",children:Qn.categories.map(e=>(0,Nt.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,Nt.jsx)("input",{type:"checkbox",checked:t.includes(e.id),onChange:()=>a(e.id),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),(0,Nt.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:e.name})]},e.id))})]}),(0,Nt.jsxs)("div",{className:"mb-8",children:[(0,Nt.jsx)("h4",{className:"font-bold text-gray-900 mb-3",children:"Major"}),(0,Nt.jsx)("div",{className:"space-y-2",children:Qn.majors.map(e=>(0,Nt.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,Nt.jsx)("input",{type:"checkbox",checked:r.includes(e.id),onChange:()=>s(e.id),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),(0,Nt.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:e.name})]},e.id))})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("h4",{className:"font-bold text-gray-900 mb-3",children:"Tags"}),(0,Nt.jsx)("div",{className:"flex flex-wrap gap-2",children:Qn.tags.map(e=>(0,Nt.jsx)("button",{onClick:()=>n(e.id),className:"px-3 py-1 text-xs rounded-full transition-colors duration-200 ".concat(o.includes(e.id)?"bg-purple-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.name},e.id))})]})]})})},si=()=>(0,Nt.jsx)(Nt.Fragment,{children:(0,Nt.jsx)("section",{className:"pt-20 pb-16 bg-white",children:(0,Nt.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[(0,Nt.jsx)("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 mb-6",children:"Discover Amazing Student Creative Work"}),(0,Nt.jsx)("p",{className:"text-lg md:text-xl text-gray-600 mb-8 max-w-3xl mx-auto leading-relaxed",children:"Explore thousands of inspiring projects from talented students across the globe. From 3D art to concept design, find your next creative inspiration."}),(0,Nt.jsx)("button",{onClick:()=>{},className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-md text-lg font-medium hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:"About TAG"})]})})}),ni=e=>{let{state:t,setters:r}=e;const{setSelectedCategories:a,setSelectedMajors:s,setSelectedTags:n}=r;return{handleCategoryToggle:(0,o.useCallback)(e=>{a(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[a]),handleMajorToggle:(0,o.useCallback)(e=>{s(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[s]),handleTagToggle:(0,o.useCallback)(e=>{n(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[n]),handleLikeToggle:(0,o.useCallback)(e=>{},[]),handleApplyJob:(0,o.useCallback)(e=>{},[]),handleBookmarkToggle:(0,o.useCallback)(async e=>{console.log("[useTAGMeActions] \u6536\u85cf\u72b6\u6001\u53d8\u5316\u901a\u77e5:",e)},[])}},ii=()=>{const[e,t]=(0,o.useState)("Collaborations"),[r,a]=(0,o.useState)([]),[s,n]=(0,o.useState)([]),[i,l]=(0,o.useState)([]);return(0,o.useMemo)(()=>({state:{activeTab:e,selectedCategories:r,selectedMajors:s,selectedTags:i},setters:{setActiveTab:t,setSelectedCategories:a,setSelectedMajors:n,setSelectedTags:l}}),[e,r,s,i])},li=e=>{var t,r;let{onBackClick:a,onMilestoneClick:s,onCollaborationClick:n}=e;const i=le(),{restoreScrollPosition:l}=Qo(),{state:c,actions:d}=zo(),{state:u,setters:h}=ii(),m=ni({state:u,setters:h});return(0,o.useEffect)(()=>{var e,t;null!==(e=i.state)&&void 0!==e&&e.activeTab&&"upload-success"===(null===(t=i.state)||void 0===t?void 0:t.from)&&(h.setActiveTab(i.state.activeTab),window.history.replaceState({},document.title),setTimeout(()=>{const e=document.querySelector("[data-tagme-section]");if(e){const t=e.getBoundingClientRect(),r=window.pageYOffset+t.top-80;window.scrollTo({top:r,behavior:"auto"})}},100))},[null===(t=i.state)||void 0===t?void 0:t.activeTab,null===(r=i.state)||void 0===r?void 0:r.from,h.setActiveTab]),(0,o.useEffect)(()=>{const e=c.scrollPositions["/tagme-".concat(u.activeTab)];if(e&&c.navigationHistory.length>0){"tagme"===c.navigationHistory[c.navigationHistory.length-1].from&&requestAnimationFrame(()=>{window.scrollTo({top:e,behavior:"auto"})})}},[u.activeTab]),(0,o.useEffect)(()=>{if(c.navigationHistory.length>0){const e=c.navigationHistory[c.navigationHistory.length-1];"tagme"===e.from&&e.activeTab&&h.setActiveTab(e.activeTab)}},[c.navigationHistory,h.setActiveTab]),(0,o.useEffect)(()=>{const e=()=>{const e=window.pageYOffset;d.saveScrollPosition("/tagme-".concat(u.activeTab),e)},t=setInterval(e,1e3),r=e,o=()=>{"hidden"===document.visibilityState&&e()};return window.addEventListener("beforeunload",r),document.addEventListener("visibilitychange",o),()=>{e(),clearInterval(t),window.removeEventListener("beforeunload",r),document.removeEventListener("visibilitychange",o)}},[u.activeTab,d.saveScrollPosition]),(0,Nt.jsxs)("div",{className:"min-h-screen bg-gray-50",style:{opacity:1,transition:"opacity 0.2s ease-in"},children:[(0,Nt.jsx)(si,{}),(0,Nt.jsxs)(oi,{activeTab:u.activeTab,onTabChange:h.setActiveTab,onCollaborationClick:n,onMilestoneClick:s,children:[(0,Nt.jsx)(ai,{selectedCategories:u.selectedCategories,selectedMajors:u.selectedMajors,selectedTags:u.selectedTags,onCategoryToggle:m.handleCategoryToggle,onMajorToggle:m.handleMajorToggle,onTagToggle:m.handleTagToggle}),"Collaborations"===u.activeTab&&(0,Nt.jsx)(Yn,{onCollaborationClick:n,onBookmarkToggle:m.handleBookmarkToggle}),"Milestones"===u.activeTab&&(0,Nt.jsx)(ri,{onMilestoneClick:s}),"Jobs"===u.activeTab&&(0,Nt.jsx)(ei,{onApplyJob:m.handleApplyJob})]})]})},ci=()=>{const[e,t]=(0,o.useState)(null),[r,a]=(0,o.useState)(!1),[s,i]=(0,o.useState)(""),[l,c]=(0,o.useState)(!1),{collaborations:d,loading:u,error:h,createNewCollaboration:m,fetchCollaborations:p,resetData:g,stats:f}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[t,r]=(0,o.useState)([]),[a,s]=(0,o.useState)(null),[i,l]=(0,o.useState)(null),[c,d]=(0,o.useState)(!1),[u,h]=(0,o.useState)(null),[m,p]=(0,o.useState)({page:1,limit:12,total:0,totalPages:0,hasNext:!1,hasPrev:!1}),[g,f]=(0,o.useState)((0,n.A)({page:1,limit:12,status:"active",authorId:null,searchTerm:"",sortBy:"createdAt",sortOrder:"desc"},e)),v=(0,o.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(!0),h(null);try{const t=(0,n.A)((0,n.A)({},g),e);f(t);const o=await Bn(t);o.success?(r(o.data),p(o.pagination)):h(o.error)}catch(t){h(t.message||"Failed to fetch collaborations")}finally{d(!1)}},[g]),x=(0,o.useCallback)(async e=>{d(!0),h(null);try{const t=await Gn(e);t.success?s(t.data):h(t.error)}catch(t){h(t.message||"Failed to fetch collaboration details")}finally{d(!1)}},[]),b=(0,o.useCallback)(async e=>{d(!0),h(null);try{const t=await Wn(e);return t.success?(await v({page:1}),{success:!0,data:t.data}):(h(t.error),{success:!1,errors:t.data})}catch(t){const e=t.message||"Failed to create collaboration";return h(e),{success:!1,error:e}}finally{d(!1)}},[v]),y=(0,o.useCallback)(async(e,t)=>{d(!0),h(null);try{const r=await Hn(e,t);return r.success?((null===a||void 0===a?void 0:a.id)===e&&s(r.data),await v(),{success:!0,data:r.data}):(h(r.error),{success:!1,errors:r.data})}catch(r){const e=r.message||"Failed to update collaboration";return h(e),{success:!1,error:e}}finally{d(!1)}},[a,v]),w=(0,o.useCallback)(async e=>{d(!0),h(null);try{const t=await qn(e);return t.success?((null===a||void 0===a?void 0:a.id)===e&&s(null),await v(),{success:!0}):(h(t.error),{success:!1,error:t.error})}catch(t){const e=t.message||"Failed to delete collaboration";return h(e),{success:!1,error:e}}finally{d(!1)}},[a,v]),j=(0,o.useCallback)(async e=>{try{const t=await Vn(e);return t.success?(r(r=>r.map(r=>r.id===e?(0,n.A)((0,n.A)({},r),{},{likes:t.data.likes}):r)),(null===a||void 0===a?void 0:a.id)===e&&s(e=>(0,n.A)((0,n.A)({},e),{},{likes:t.data.likes})),{success:!0,likes:t.data.likes}):{success:!1,error:t.error}}catch(t){return{success:!1,error:t.message||"Failed to like collaboration"}}},[a]),k=(0,o.useCallback)(async()=>{try{const e=await Jn();e.success&&l(e.data)}catch(e){console.error("Failed to fetch stats:",e)}},[]),N=(0,o.useCallback)(async()=>{d(!0),h(null);try{const e=await Zn();return e.success?(await v({page:1}),await k(),{success:!0}):(h(e.error),{success:!1,error:e.error})}catch(e){const t=e.message||"Failed to reset data";return h(t),{success:!1,error:t}}finally{d(!1)}},[v,k]),S=(0,o.useCallback)(e=>{v({searchTerm:e,page:1})},[v]),C=(0,o.useCallback)(e=>{v((0,n.A)((0,n.A)({},e),{},{page:1}))},[v]),A=(0,o.useCallback)(function(e){v({sortBy:e,sortOrder:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"desc",page:1})},[v]),_=(0,o.useCallback)(e=>{v({page:e})},[v]),I=(0,o.useCallback)(()=>{h(null)},[]),E=(0,o.useCallback)(()=>{s(null)},[]);return(0,o.useEffect)(()=>{v(),k()},[]),{collaborations:t,currentCollaboration:a,stats:i,loading:c,error:u,pagination:m,queryOptions:g,fetchCollaborations:v,fetchCollaborationById:x,createNewCollaboration:b,updateExistingCollaboration:y,deleteExistingCollaboration:w,likeExistingCollaboration:j,fetchStats:k,resetData:N,searchCollaborations:S,filterCollaborations:C,sortCollaborations:A,goToPage:_,clearError:I,clearCurrentCollaboration:E,hasNextPage:m.hasNext,hasPrevPage:m.hasPrev,currentPage:m.page,totalPages:m.totalPages,totalItems:m.total}}(),[v,x]=(0,o.useState)({title:"Manual Test Collaboration",description:"This is a manual test collaboration project.",projectVision:"Testing collaboration functionality manually",whyThisMatters:"This helps verify the collaboration system works correctly.",teamSize:"2-3",duration:"1-2 months",meetingSchedule:"1-2 times/week",applicationDeadline:"2024-12-31",projectType:"Test Project",contactEmail:"test@example.com",contactDiscord:"testuser#1234",contactOther:"",roles:[{id:1,customRole:"Test Role",roleDescription:"This is a test role for manual testing.",requiredSkills:"Testing, JavaScript, React"}]}),b=(e,t)=>{x(r=>(0,n.A)((0,n.A)({},r),{},{[e]:t}))},y=(e,t,r)=>{x(o=>(0,n.A)((0,n.A)({},o),{},{roles:o.roles.map((o,a)=>a===e?(0,n.A)((0,n.A)({},o),{},{[t]:r}):o)}))};return(0,Nt.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,Nt.jsxs)("div",{className:"max-w-6xl mx-auto px-4",children:[(0,Nt.jsxs)("div",{className:"text-center mb-8",children:[(0,Nt.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\ud83e\uddea Collaboration Service Test Page"}),(0,Nt.jsx)("p",{className:"text-gray-600",children:"Test the collaboration functionality and verify all features work correctly"})]}),(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,Nt.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"\ud83d\udcca Current Status"}),(0,Nt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Nt.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,Nt.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:d.length}),(0,Nt.jsx)("div",{className:"text-sm text-blue-800",children:"Total Collaborations"})]}),(0,Nt.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,Nt.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(null===f||void 0===f?void 0:f.total)||0}),(0,Nt.jsx)("div",{className:"text-sm text-green-800",children:"Active Projects"})]}),(0,Nt.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,Nt.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:u?"...":"Ready"}),(0,Nt.jsx)("div",{className:"text-sm text-purple-800",children:"Service Status"})]}),(0,Nt.jsxs)("div",{className:"bg-orange-50 p-4 rounded-lg",children:[(0,Nt.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:h?"Error":"OK"}),(0,Nt.jsx)("div",{className:"text-sm text-orange-800",children:"Error Status"})]})]})]}),(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,Nt.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"\ud83d\udd27 Test Controls"}),(0,Nt.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,Nt.jsx)("button",{onClick:async()=>{a(!0),t(null),i("");try{console.log("\ud83e\uddea Starting automated tests...");const e=await(async()=>{const e={passed:0,failed:0,tests:[]};console.log("\ud83e\uddea Starting Collaboration Service Tests...");try{console.log("\ud83d\udccb Test 1: Reset Mock Data");const t=await Zn();t.success?(e.passed++,e.tests.push({name:"Reset Mock Data",status:"PASSED"}),console.log("\u2705 Reset Mock Data: PASSED")):(e.failed++,e.tests.push({name:"Reset Mock Data",status:"FAILED",error:t.error}),console.log("\u274c Reset Mock Data: FAILED",t.error)),console.log("\ud83d\udccb Test 2: Get Collaborations List");const r=await Bn();r.success&&r.data.length>0?(e.passed++,e.tests.push({name:"Get Collaborations List",status:"PASSED",count:r.data.length}),console.log("\u2705 Get Collaborations List: PASSED","(".concat(r.data.length," items)"))):(e.failed++,e.tests.push({name:"Get Collaborations List",status:"FAILED",error:r.error}),console.log("\u274c Get Collaborations List: FAILED",r.error)),console.log("\ud83d\udccb Test 3: Get Collaboration Stats");const o=await Jn();o.success&&o.data?(e.passed++,e.tests.push({name:"Get Collaboration Stats",status:"PASSED",stats:o.data}),console.log("\u2705 Get Collaboration Stats: PASSED",o.data)):(e.failed++,e.tests.push({name:"Get Collaboration Stats",status:"FAILED",error:o.error}),console.log("\u274c Get Collaboration Stats: FAILED",o.error)),console.log("\ud83d\udccb Test 4: Create New Collaboration");const a={title:"Test Collaboration Project",description:"This is a test collaboration project for testing purposes.",projectVision:"Testing the collaboration service functionality",whyThisMatters:"This test helps ensure the service works correctly.",teamSize:"2-3",duration:"1-2 months",meetingSchedule:"1-2 times/week",applicationDeadline:"2024-12-31",projectType:"Test Project",contactEmail:"test@example.com",contactDiscord:"testuser#1234",contactOther:"",roles:[{id:1,customRole:"Test Role",roleDescription:"This is a test role for testing purposes.",requiredSkills:"Testing, JavaScript, React"}]},s=await Wn(a);if(s.success&&s.data.id){e.passed++,e.tests.push({name:"Create New Collaboration",status:"PASSED",id:s.data.id}),console.log("\u2705 Create New Collaboration: PASSED",s.data.id),console.log("\ud83d\udccb Test 5: Get Collaboration Details");const t=await Gn(s.data.id);if(t.success&&t.data){e.passed++,e.tests.push({name:"Get Collaboration Details",status:"PASSED",id:s.data.id}),console.log("\u2705 Get Collaboration Details: PASSED"),console.log("\ud83d\udccb Test 6: Like Collaboration");const t=await Vn(s.data.id);if(t.success&&t.data.likes>0){e.passed++,e.tests.push({name:"Like Collaboration",status:"PASSED",likes:t.data.likes}),console.log("\u2705 Like Collaboration: PASSED",t.data.likes),console.log("\ud83d\udccb Test 7: Update Collaboration");const r={title:"Updated Test Collaboration Project",description:"This is an updated test collaboration project.",projectVision:"Updated testing vision",teamSize:"3-4",duration:"2-3 months",meetingSchedule:"2-3 times/week",applicationDeadline:"2024-12-31",contactEmail:"updated@example.com",contactDiscord:"updateduser#5678",contactOther:"",roles:[{id:1,customRole:"Updated Test Role",roleDescription:"This is an updated test role.",requiredSkills:"Updated Testing, JavaScript, React"}]},o=await Hn(s.data.id,r);if(o.success&&o.data.title===r.title){e.passed++,e.tests.push({name:"Update Collaboration",status:"PASSED"}),console.log("\u2705 Update Collaboration: PASSED"),console.log("\ud83d\udccb Test 8: Delete Collaboration");const t=await qn(s.data.id);t.success?(e.passed++,e.tests.push({name:"Delete Collaboration",status:"PASSED"}),console.log("\u2705 Delete Collaboration: PASSED")):(e.failed++,e.tests.push({name:"Delete Collaboration",status:"FAILED",error:t.error}),console.log("\u274c Delete Collaboration: FAILED",t.error))}else e.failed++,e.tests.push({name:"Update Collaboration",status:"FAILED",error:o.error}),console.log("\u274c Update Collaboration: FAILED",o.error)}else e.failed++,e.tests.push({name:"Like Collaboration",status:"FAILED",error:t.error}),console.log("\u274c Like Collaboration: FAILED",t.error)}else e.failed++,e.tests.push({name:"Get Collaboration Details",status:"FAILED",error:t.error}),console.log("\u274c Get Collaboration Details: FAILED",t.error)}else e.failed++,e.tests.push({name:"Create New Collaboration",status:"FAILED",error:s.error}),console.log("\u274c Create New Collaboration: FAILED",s.error);console.log("\ud83d\udccb Test 9: Search Collaborations");const n=await Bn({searchTerm:"Game"});n.success?(e.passed++,e.tests.push({name:"Search Collaborations",status:"PASSED",count:n.data.length}),console.log("\u2705 Search Collaborations: PASSED","(".concat(n.data.length," results)"))):(e.failed++,e.tests.push({name:"Search Collaborations",status:"FAILED",error:n.error}),console.log("\u274c Search Collaborations: FAILED",n.error)),console.log("\ud83d\udccb Test 10: Pagination");const i=await Bn({page:1,limit:2});i.success&&i.pagination?(e.passed++,e.tests.push({name:"Pagination",status:"PASSED",pagination:i.pagination}),console.log("\u2705 Pagination: PASSED",i.pagination)):(e.failed++,e.tests.push({name:"Pagination",status:"FAILED",error:i.error}),console.log("\u274c Pagination: FAILED",i.error))}catch(h){console.error("\u274c Test Suite Error:",h),e.failed++,e.tests.push({name:"Test Suite",status:"ERROR",error:h.message})}return console.log("\n\ud83d\udcca Test Results Summary:"),console.log("\u2705 Passed: ".concat(e.passed)),console.log("\u274c Failed: ".concat(e.failed)),console.log("\ud83d\udcc8 Success Rate: ".concat((e.passed/(e.passed+e.failed)*100).toFixed(1),"%")),e})();t(e);const r=(e=>{const t=["# Collaboration Service Test Report","","## Summary","- **Total Tests**: ".concat(e.passed+e.failed),"- **Passed**: ".concat(e.passed),"- **Failed**: ".concat(e.failed),"- **Success Rate**: ".concat((e.passed/(e.passed+e.failed)*100).toFixed(1),"%"),"","## Test Details",""];return e.tests.forEach(e=>{const r="PASSED"===e.status?"\u2705":"\u274c";t.push("### ".concat(r," ").concat(e.name)),e.error&&t.push("**Error**: ".concat(e.error)),e.count&&t.push("**Count**: ".concat(e.count)),e.id&&t.push("**ID**: ".concat(e.id)),e.likes&&t.push("**Likes**: ".concat(e.likes)),e.stats&&t.push("**Stats**: ".concat(JSON.stringify(e.stats,null,2))),e.pagination&&t.push("**Pagination**: ".concat(JSON.stringify(e.pagination,null,2))),t.push("")}),t.join("\n")})(e);i(r),console.log("\u2705 Automated tests completed!")}catch(h){console.error("\u274c Test execution failed:",h),t({passed:0,failed:1,tests:[{name:"Test Execution",status:"ERROR",error:h.message}]})}finally{a(!1)}},disabled:r,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-6 py-2 rounded-lg font-medium",children:r?"\ud83d\udd04 Running Tests...":"\ud83e\uddea Run Automated Tests"}),(0,Nt.jsx)("button",{onClick:()=>{const e=(()=>{const e={valid:!0,issues:[]};try{const t=localStorage.getItem(Un);if(!t)return e.issues.push("No collaboration data found in localStorage"),e.valid=!1,e;JSON.parse(t).forEach((t,r)=>{const o=["id","title","description","projectVision","author","status"].filter(e=>!t[e]);o.length>0&&(e.issues.push("Collaboration ".concat(r,": Missing required fields: ").concat(o.join(", "))),e.valid=!1),!t.author||t.author.id&&t.author.name||(e.issues.push("Collaboration ".concat(r,": Invalid author information")),e.valid=!1),t.roles&&Array.isArray(t.roles)&&t.roles.forEach((t,o)=>{t.title&&t.description||(e.issues.push("Collaboration ".concat(r,", Role ").concat(o,": Missing title or description")),e.valid=!1)})}),console.log("\ud83d\udd0d Data Integrity Check:",e.valid?"PASSED":"FAILED"),e.issues.length>0&&console.log("\u26a0\ufe0f Issues found:",e.issues)}catch(h){e.valid=!1,e.issues.push("Data integrity check error: ".concat(h.message)),console.error("\u274c Data Integrity Check Error:",h)}return e})();console.log("\ud83d\udd0d Data Integrity Check Results:",e),e.valid?alert("\u2705 Data integrity check passed!"):alert("\u274c Data integrity check failed!\nIssues:\n".concat(e.issues.join("\n")))},className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-medium",children:"\ud83d\udd0d Check Data Integrity"}),(0,Nt.jsx)("button",{onClick:async()=>{window.confirm("Are you sure you want to reset all collaboration data? This will restore the original mock data.")&&(await g(),alert("\u2705 Data reset successfully!"))},className:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg font-medium",children:"\ud83d\udd04 Reset Data"}),(0,Nt.jsx)("button",{onClick:()=>c(!l),className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-lg font-medium",children:l?"\u274c Hide Manual Test":"\u270f\ufe0f Show Manual Test"})]})]}),l&&(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,Nt.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"\u270f\ufe0f Manual Test - Create Collaboration"}),(0,Nt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),(0,Nt.jsx)("input",{type:"text",value:v.title,onChange:e=>b("title",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Type"}),(0,Nt.jsx)("input",{type:"text",value:v.projectType,onChange:e=>b("projectType",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Nt.jsxs)("div",{className:"md:col-span-2",children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,Nt.jsx)("textarea",{value:v.description,onChange:e=>b("description",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Nt.jsxs)("div",{className:"md:col-span-2",children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Vision"}),(0,Nt.jsx)("textarea",{value:v.projectVision,onChange:e=>b("projectVision",e.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Team Size"}),(0,Nt.jsx)("input",{type:"text",value:v.teamSize,onChange:e=>b("teamSize",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration"}),(0,Nt.jsx)("input",{type:"text",value:v.duration,onChange:e=>b("duration",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Email"}),(0,Nt.jsx)("input",{type:"email",value:v.contactEmail,onChange:e=>b("contactEmail",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discord"}),(0,Nt.jsx)("input",{type:"text",value:v.contactDiscord,onChange:e=>b("contactDiscord",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,Nt.jsxs)("div",{className:"mt-6",children:[(0,Nt.jsx)("h3",{className:"text-lg font-medium mb-3",children:"Roles"}),v.roles.map((e,t)=>(0,Nt.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 mb-4",children:(0,Nt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role Title"}),(0,Nt.jsx)("input",{type:"text",value:e.customRole,onChange:e=>y(t,"customRole",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Required Skills"}),(0,Nt.jsx)("input",{type:"text",value:e.requiredSkills,onChange:e=>y(t,"requiredSkills",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Nt.jsxs)("div",{className:"md:col-span-2",children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role Description"}),(0,Nt.jsx)("textarea",{value:e.roleDescription,onChange:e=>y(t,"roleDescription",e.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})},t))]}),(0,Nt.jsx)("button",{onClick:async()=>{try{const e=await m(v);e.success?(alert("\u2705 Collaboration created successfully!\nID: ".concat(e.data.id)),await p()):alert("\u274c Failed to create collaboration:\n".concat(e.error||JSON.stringify(e.errors)))}catch(h){alert("\u274c Error creating collaboration: ".concat(h.message))}},className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-medium",children:"\ud83d\ude80 Create Collaboration"})]}),e&&(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,Nt.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"\ud83d\udcca Test Results"}),(0,Nt.jsx)("div",{className:"mb-4",children:(0,Nt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Nt.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e.passed}),(0,Nt.jsx)("div",{className:"text-sm text-green-800",children:"Passed"}),(0,Nt.jsx)("div",{className:"text-2xl font-bold text-red-600",children:e.failed}),(0,Nt.jsx)("div",{className:"text-sm text-red-800",children:"Failed"}),(0,Nt.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[(e.passed/(e.passed+e.failed)*100).toFixed(1),"%"]}),(0,Nt.jsx)("div",{className:"text-sm text-blue-800",children:"Success Rate"})]})}),(0,Nt.jsx)("div",{className:"space-y-2",children:e.tests.map((e,t)=>(0,Nt.jsxs)("div",{className:"p-3 rounded-lg ".concat("PASSED"===e.status?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:[(0,Nt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Nt.jsx)("span",{className:"PASSED"===e.status?"text-green-600":"text-red-600",children:"PASSED"===e.status?"\u2705":"\u274c"}),(0,Nt.jsx)("span",{className:"font-medium",children:e.name})]}),e.error&&(0,Nt.jsxs)("div",{className:"text-sm text-red-600 mt-1",children:["Error: ",e.error]}),e.count&&(0,Nt.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["Count: ",e.count]})]},t))})]}),s&&(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,Nt.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"\ud83d\udccb Test Report"}),(0,Nt.jsx)("pre",{className:"bg-gray-100 p-4 rounded-lg overflow-x-auto text-sm",children:s})]}),(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,Nt.jsxs)("h2",{className:"text-xl font-semibold mb-4",children:["\ud83d\udccb Current Collaborations (",d.length,")"]}),u?(0,Nt.jsx)("div",{className:"text-center py-8",children:(0,Nt.jsx)("div",{className:"text-gray-600",children:"Loading collaborations..."})}):0===d.length?(0,Nt.jsx)("div",{className:"text-center py-8",children:(0,Nt.jsx)("div",{className:"text-gray-600",children:"No collaborations found."})}):(0,Nt.jsxs)("div",{className:"space-y-4",children:[d.slice(0,5).map(e=>{var t;return(0,Nt.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,Nt.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("h3",{className:"font-medium text-lg",children:e.title}),(0,Nt.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:e.subtitle}),(0,Nt.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-500",children:[(0,Nt.jsxs)("span",{children:["\ud83d\udc64 ",null===(t=e.author)||void 0===t?void 0:t.name]}),(0,Nt.jsxs)("span",{children:["\u2764\ufe0f ",e.likes]}),(0,Nt.jsxs)("span",{children:["\ud83d\udc41\ufe0f ",e.views]}),(0,Nt.jsxs)("span",{children:["\ud83d\udcc5 ",e.dateRange]})]})]}),(0,Nt.jsxs)("div",{className:"text-right",children:[(0,Nt.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.id]}),(0,Nt.jsx)("div",{className:"text-sm text-gray-500",children:e.status})]})]})},e.id)}),d.length>5&&(0,Nt.jsxs)("div",{className:"text-center text-gray-600",children:["... and ",d.length-5," more collaborations"]})]})]})]})})};var di=r(784);const ui=()=>{const[e,t]=(0,o.useState)((0,Rr.HW)()),r=async e=>{await(0,Rr.Gr)(e),t((0,Rr.HW)()),window.dispatchEvent(new CustomEvent("user:changed"))};return(0,Nt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,Nt.jsx)("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Review Request Test Tools"}),(0,Nt.jsxs)("div",{className:"space-y-4",children:[(0,Nt.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,Nt.jsx)("p",{className:"text-sm text-gray-600",children:"Current User:"}),(0,Nt.jsxs)("p",{className:"font-medium text-gray-900",children:[e.name," (",e.id,")"]})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Switch User:"}),(0,Nt.jsxs)("div",{className:"flex space-x-2",children:[(0,Nt.jsx)("button",{onClick:()=>r("alice"),className:"px-3 py-1 text-sm rounded-md transition-colors duration-200 ".concat("alice"===e.id?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Alice (Owner)"}),(0,Nt.jsx)("button",{onClick:()=>r("bryan"),className:"px-3 py-1 text-sm rounded-md transition-colors duration-200 ".concat("bryan"===e.id?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Bryan (Collaborator)"}),(0,Nt.jsx)("button",{onClick:()=>r("alex"),className:"px-3 py-1 text-sm rounded-md transition-colors duration-200 ".concat("alex"===e.id?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Alex (Default)"})]})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Development Tools:"}),(0,Nt.jsxs)("div",{className:"flex space-x-2",children:[(0,Nt.jsx)("button",{onClick:()=>{console.log("Review requests functionality has been removed - replaced with Add Experience")},className:"px-3 py-1 text-sm bg-red-100 text-red-700 rounded-md hover:bg-red-200 transition-colors duration-200",children:"Cancel All Requests"}),(0,Nt.jsx)("button",{onClick:()=>{console.log("Review requests functionality has been removed - replaced with Add Experience")},className:"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors duration-200",children:"Show Requests (Console)"}),(0,Nt.jsx)("button",{onClick:async()=>{try{const t=await Hr.l.getUserNotifications(e.id);if(t.success){const r=t.data||[];console.log("Current notifications for",e.name,":",r),console.log("Notification count:",r.length),console.log("Unread count:",r.filter(e=>!e.isRead).length)}else console.log("No notifications found for",e.id)}catch(t){console.error("Error getting notifications:",t)}},className:"px-3 py-1 text-sm bg-purple-100 text-purple-700 rounded-md hover:bg-purple-200 transition-colors duration-200",children:"Show Notifications (Console)"})]})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Notification Test Tools:"}),(0,Nt.jsxs)("div",{className:"flex space-x-2",children:[(0,Nt.jsx)("button",{onClick:async()=>{try{const t=await(0,di.fp)({userId:e.id,title:"Collaboration Request",message:'New collaboration request for project "Interactive Web Experience" from '.concat(e.name," at ").concat((new Date).toLocaleTimeString()),projectId:"collab_project_001"});console.log("Collaboration notification created:",t)}catch(t){console.error("Error creating collaboration notification:",t)}},className:"px-3 py-1 text-sm bg-purple-100 text-purple-700 rounded-md hover:bg-purple-200 transition-colors duration-200",children:"Create Collaboration Notification"}),(0,Nt.jsx)("button",{onClick:async()=>{try{const t=await(0,di.createGeneralNotification)({userId:e.id,type:"system",title:"System Update",message:"System maintenance completed for ".concat(e.name," at ").concat((new Date).toLocaleTimeString()),projectId:null});console.log("General notification created:",t)}catch(t){console.error("Error creating general notification:",t)}},className:"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors duration-200",children:"Create General Notification"}),(0,Nt.jsx)("button",{onClick:async()=>{try{const t=await Hr.l.getUserNotifications(e.id);if(t.success){const r=t.data||[];for(const e of r)await Hr.l.deleteNotification(e.id);window.dispatchEvent(new CustomEvent("notif:unreadChanged",{detail:{userId:e.id}})),console.log("All notifications cleared for ".concat(e.name))}}catch(t){console.error("Error clearing notifications:",t)}},className:"px-3 py-1 text-sm bg-orange-100 text-orange-700 rounded-md hover:bg-orange-200 transition-colors duration-200",children:"Clear Notifications"})]})]}),(0,Nt.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,Nt.jsx)("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Test Steps:"}),(0,Nt.jsxs)("ol",{className:"text-xs text-blue-800 space-y-1",children:[(0,Nt.jsx)("li",{children:"1. Switch to Bryan \u2192 Go to Alice's collaboration project"}),(0,Nt.jsx)("li",{children:'2. Click "Send Standard Request" \u2192 Should show "Pending Approval"'}),(0,Nt.jsx)("li",{children:"3. Switch to Alice \u2192 Check Notification Center"}),(0,Nt.jsx)("li",{children:'4. Click "Approve" or "Deny" on the review request'}),(0,Nt.jsx)("li",{children:"5. Switch back to Bryan \u2192 Check if status changed"})]})]}),(0,Nt.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg",children:[(0,Nt.jsx)("p",{className:"text-sm font-medium text-green-900 mb-2",children:"Notification Test Steps:"}),(0,Nt.jsxs)("ol",{className:"text-xs text-green-800 space-y-1",children:[(0,Nt.jsx)("li",{children:'1. Select a user (e.g., Bryan) \u2192 Click "Create Collaboration Notification" (Purple theme)'}),(0,Nt.jsx)("li",{children:'2. Click "Create General Notification" (Blue theme)'}),(0,Nt.jsx)("li",{children:"3. Go to Notification Center \u2192 Check different color themes"}),(0,Nt.jsx)("li",{children:'4. Click on notifications \u2192 Verify "mark as read" functionality'}),(0,Nt.jsx)("li",{children:"5. Check unread count \u2192 Should decrease after marking as read"}),(0,Nt.jsx)("li",{children:'6. Click "Clear Notifications" \u2192 Verify all notifications are removed'})]})]})]})]})},hi=()=>{const[e,t]=(0,o.useState)([]),[r,a]=(0,o.useState)(!1),[s,n]=(0,o.useState)(""),i=(0,Rr.HW)(),l=async()=>{a(!0),n("Loading portfolio...");try{const e=await(0,lr.BD)();console.log("Load result:",e),e.success?(t(e.data),n("Loaded ".concat(e.data.length," items successfully"))):n("Error: ".concat(e.error))}catch(e){n("Exception: ".concat(e.message))}finally{a(!1)}};return(0,o.useEffect)(()=>{l()},[]),(0,Nt.jsxs)("div",{style:{padding:"20px",maxWidth:"600px",margin:"0 auto"},children:[(0,Nt.jsx)("h2",{children:"Mock API \u6d4b\u8bd5"}),(0,Nt.jsxs)("p",{children:["\u5f53\u524d\u7528\u6237: ",i.name," (ID: ",i.id,")"]}),(0,Nt.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,Nt.jsx)("button",{onClick:l,disabled:r,style:{marginRight:"10px"},children:"\u52a0\u8f7d\u4f5c\u54c1"}),(0,Nt.jsx)("button",{onClick:async()=>{a(!0),n("Creating portfolio item...");try{const e={title:"Test Item ".concat(Date.now()),description:"This is a test item",category:"Test",tags:["test","mock"],imagePaths:["test/path/image.jpg"],thumbnailPath:"test/path/thumbnail.jpg",isPublic:!0},t=await(0,lr.qo)(e);console.log("Create result:",t),t.success?(n("Created successfully! Reloading portfolio..."),await l()):n("Error: ".concat(t.error))}catch(e){n("Exception: ".concat(e.message))}finally{a(!1)}},disabled:r,style:{marginRight:"10px"},children:"\u521b\u5efa\u6d4b\u8bd5\u4f5c\u54c1"}),(0,Nt.jsx)("button",{onClick:async()=>{a(!0),n("Testing image upload...");try{const e=new File(["mock image data"],"test.jpg",{type:"image/jpeg"}),t=await(0,lr.jp)(e,i.id);console.log("Upload result:",t),t.success?n("Uploaded successfully! Path: ".concat(t.data.path)):n("Error: ".concat(t.error))}catch(e){n("Exception: ".concat(e.message))}finally{a(!1)}},disabled:r,style:{marginRight:"10px"},children:"\u6d4b\u8bd5\u4e0a\u4f20\u56fe\u7247"}),(0,Nt.jsx)("button",{onClick:()=>{Object.keys(localStorage).forEach(e=>{e.startsWith("portfolio_")&&localStorage.removeItem(e)}),t([]),n("Cleared portfolio storage")},disabled:r,children:"\u6e05\u7a7a\u5b58\u50a8"})]}),(0,Nt.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,Nt.jsx)("strong",{children:"\u72b6\u6001:"})," ",s]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsxs)("strong",{children:["\u4f5c\u54c1\u5217\u8868 (",e.length," \u4e2a):"]}),(0,Nt.jsx)("pre",{style:{background:"#f5f5f5",padding:"10px",borderRadius:"4px",maxHeight:"300px",overflow:"auto"},children:JSON.stringify(e,null,2)})]}),(0,Nt.jsxs)("div",{style:{marginTop:"20px"},children:[(0,Nt.jsx)("strong",{children:"localStorage \u4e2d\u7684 portfolio \u952e:"}),(0,Nt.jsx)("pre",{style:{background:"#f5f5f5",padding:"10px",borderRadius:"4px"},children:Object.keys(localStorage).filter(e=>e.startsWith("portfolio_")).join("\n")})]})]})},mi=e=>{let{onBackClick:t}=e;return(0,Nt.jsx)("div",{className:"p-4",children:(0,Nt.jsxs)("button",{onClick:t,className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Home"]})})},pi=()=>(0,Nt.jsxs)("div",{className:"text-center mb-8",children:[(0,Nt.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Posting Guidelines"}),(0,Nt.jsx)("p",{className:"text-lg text-gray-600",children:"Artwork Submission Tips"})]}),gi=[{id:1,text:"Upload finished works only; images must be clear and legible",icon:"check"},{id:2,text:"Use descriptive titles that capture attention",icon:"check"},{id:3,text:"Add relevant tags to improve discoverability",icon:"check"},{id:4,text:"Images only for now (JPG / PNG)",icon:"check"},{id:5,text:"Max 10 MB per work (total of all images)",icon:"check"}],fi=[{id:1,text:"Avoid uploading work that isn't yours",icon:"x"},{id:2,text:"No blurry or heavily compressed/watermarked content",icon:"x"},{id:3,text:"Video uploads aren't supported yet",icon:"x"},{id:4,text:"Uploads to Jobs and ArtMarket are currently closed (in testing)",icon:"x"}],vi={good:{title:"\u2713 Good",description:"High quality, well-composed",className:"bg-green-500",content:{title:"STUP AI",icon:"w-16 h-16 bg-red-500 rounded-full mx-auto mb-2",bar:"w-32 h-4 bg-black rounded"}},bad:{title:"\xd7 Bad",description:"Low resolution, poor lighting",className:"bg-red-500",content:{title:"STUP AI",icon:"w-16 h-16 bg-red-400 rounded-full mx-auto mb-2 blur-sm",bar:"w-32 h-4 bg-gray-800 rounded blur-sm",containerClass:"opacity-60",titleClass:"blur-sm"}}},xi="Pro Tip",bi="Projects with visual examples receive 3x more collaboration requests than those without.",yi="community guidelines",wi="#",ji=()=>{const e=(e,t)=>e.map(e=>{return(0,Nt.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Nt.jsx)("div",{className:"flex-shrink-0 w-6 h-6 ".concat(t," rounded-full flex items-center justify-center"),children:(r=e.icon,"check"===r?(0,Nt.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Nt.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):(0,Nt.jsx)("svg",{className:"w-4 h-4 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Nt.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}))}),(0,Nt.jsx)("p",{className:"text-gray-700 font-semibold",children:e.text})]},e.id);var r});return(0,Nt.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,Nt.jsxs)("div",{className:"space-y-4",children:[(0,Nt.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"\u2705 Do's"}),(0,Nt.jsx)("div",{className:"space-y-3",children:e(gi,"bg-green-100")})]}),(0,Nt.jsxs)("div",{className:"space-y-4",children:[(0,Nt.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"\u274c Don'ts"}),(0,Nt.jsx)("div",{className:"space-y-3",children:e(fi,"bg-red-100")})]})]})},ki=()=>{const e=e=>{const t=vi[e],{content:r}=t;return(0,Nt.jsxs)("div",{className:"text-center",children:[(0,Nt.jsxs)("div",{className:"relative mb-4",children:[(0,Nt.jsx)("div",{className:"w-full h-48 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center ".concat(r.containerClass||""),children:(0,Nt.jsxs)("div",{className:"text-white text-center",children:[(0,Nt.jsx)("div",{className:"text-2xl font-bold mb-2 ".concat(r.titleClass||""),children:r.title}),(0,Nt.jsx)("div",{className:r.icon}),(0,Nt.jsx)("div",{className:r.bar})]})}),(0,Nt.jsx)("div",{className:"absolute -top-2 -right-2 ".concat(t.className," text-white px-2 py-1 rounded-full text-xs font-medium"),children:t.title})]}),(0,Nt.jsx)("p",{className:"text-sm ".concat("good"===e?"text-green-600":"text-red-600"," font-medium"),children:t.description})]})};return(0,Nt.jsxs)("div",{className:"border-t border-gray-200 pt-8",children:[(0,Nt.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Visual Examples"}),(0,Nt.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[e("good"),e("bad")]})]})},Ni=()=>(0,Nt.jsx)("div",{className:"border-t border-gray-200 pt-6",children:(0,Nt.jsxs)("p",{className:"text-gray-600 text-center",children:["All uploads are subject to review by our"," ",(0,Nt.jsx)("a",{href:wi,className:"text-tag-blue hover:text-tag-dark-blue font-medium",children:yi}),". Content that violates our community guidelines may be removed."]})}),Si=()=>(0,Nt.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,Nt.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Nt.jsx)("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:(0,Nt.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Nt.jsx)("path",{d:"M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM5.05 6.464A1 1 0 106.464 5.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM5 10a1 1 0 01-1 1H3a1 1 0 110-2h1a1 1 0 011 1zM8 16v-1h4v1a2 2 0 11-4 0zM12 14c.015-.34.208-.646.477-.859a4 4 0 10-4.954 0c.27.213.462.519.476.859h4.002z"})})}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("p",{className:"font-semibold text-blue-900",children:xi}),(0,Nt.jsx)("p",{className:"text-blue-800 text-sm",children:bi})]})]})}),Ci=e=>{let{guidelinesConfirmed:t,onCheckboxChange:r,onConfirm:o,user:a}=e;return(0,Nt.jsxs)("div",{className:"border-t border-gray-200 pt-8 mt-8",children:[(0,Nt.jsx)("div",{className:"flex items-center justify-center space-x-4",children:(0,Nt.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[(0,Nt.jsx)("input",{type:"checkbox",checked:t,onChange:r,className:"h-5 w-5 text-tag-blue focus:ring-tag-blue border-gray-300 rounded"}),(0,Nt.jsx)("span",{className:"text-gray-700 font-medium",children:"I understand and agree to follow these guidelines"})]})}),(0,Nt.jsx)("div",{className:"mt-6 flex justify-center",children:(0,Nt.jsx)("button",{onClick:o,disabled:!t,className:"px-8 py-3 bg-gradient-to-r from-tag-blue to-tag-purple text-white font-medium rounded-lg shadow-lg hover:from-tag-dark-blue hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-tag-blue disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105",children:a?"Proceed to Upload":"Continue to Login"})})]})},Ai=()=>{const[e,t]=(0,o.useState)(!1);return{guidelinesConfirmed:e,handleCheckboxChange:e=>{t(e.target.checked)},resetState:()=>{t(!1)}}},_i=e=>{let{guidelinesConfirmed:t,user:r}=e;const a=ue();return{handleConfirm:(0,o.useCallback)(()=>{t&&(localStorage.setItem("tag_guidelines_accepted","true"),a(r?"/upload/form":"/login"))},[t,r,a]),handleBackToHome:(0,o.useCallback)(()=>{a("/")},[a])}},Ii=()=>{const{user:e}=Ct(),{guidelinesConfirmed:t,handleCheckboxChange:r}=Ai(),{handleConfirm:o,handleBackToHome:a}=_i({guidelinesConfirmed:t,user:e});return(0,Nt.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[(0,Nt.jsx)(mi,{onBackClick:a}),(0,Nt.jsx)("div",{className:"flex-1 flex items-center justify-center px-4 sm:px-6 lg:px-8 py-8",children:(0,Nt.jsx)("div",{className:"max-w-4xl w-full space-y-8",children:(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,Nt.jsx)(pi,{}),(0,Nt.jsxs)("div",{className:"space-y-8",children:[(0,Nt.jsx)(ji,{}),(0,Nt.jsx)(ki,{}),(0,Nt.jsx)(Ni,{}),(0,Nt.jsx)(Si,{})]}),(0,Nt.jsx)(Ci,{guidelinesConfirmed:t,onCheckboxChange:r,onConfirm:o,user:e})]})})})]})},Ei=e=>{let{children:t}=e;return"true"!==localStorage.getItem("tag_guidelines_accepted")?(0,Nt.jsx)(Ie,{to:"/upload/guidelines",replace:!0}):t},Pi=e=>{let{module:t="Milestones",title:r="Your milestone has been shared successfully!",subtitle:o="The community can now see your achievement and celebrate with you.",icon:a="\ud83c\udfc1",bannerSubtitle:s="Celebrate achievements and track creative journeys"}=e;const n=ue(),i=(e=>{const t={Milestones:{icon:"\ud83c\udfc1",bannerTitle:"Milestones Feed",bannerSubtitle:"Celebrate achievements and track creative journeys",successTitle:"Your milestone has been shared successfully!",successSubtitle:"The community can now see your achievement and celebrate with you."},"Art Market":{icon:"\ud83c\udfea",bannerTitle:"Art Market Feed",bannerSubtitle:"Showcase your artwork to the world",successTitle:"Your artwork has been published successfully!",successSubtitle:"Art lovers can now discover and appreciate your creation."},Portfolio:{icon:"\ud83d\udcc1",bannerTitle:"Portfolio Feed",bannerSubtitle:"Build your professional portfolio",successTitle:"Your portfolio has been updated successfully!",successSubtitle:"Your professional showcase is now live for the community."},Collaboration:{icon:"\ud83e\udd1d",bannerTitle:"Collaboration Feed",bannerSubtitle:"Connect and collaborate with fellow artists",successTitle:"Your collaboration has been shared successfully!",successSubtitle:"Other artists can now discover and join your project."},Jobs:{icon:"\ud83d\udcbc",bannerTitle:"Jobs Feed",bannerSubtitle:"Find opportunities and grow your career",successTitle:"Your job post has been published successfully!",successSubtitle:"Talented artists can now discover and apply for your opportunity."}};return t[e]||t.Milestones})(t),l="Portfolio"===t||"Art Market"===t,c=l?"bg-gradient-to-r from-[#3B82F6] to-[#1D4ED8]":"bg-gradient-to-r from-[#9333EA] to-[#7e22ce]",d=l?"bg-tag-blue":"bg-tag-purple",u=l?"hover:bg-blue-700":"hover:bg-purple-700",h=l?"border-tag-blue":"border-tag-purple",m=l?"text-tag-blue":"text-tag-purple",p=l?"hover:bg-blue-50":"hover:bg-purple-50";return(0,Nt.jsxs)("div",{className:"fixed inset-0 bg-gray-50 z-50 overflow-y-auto",children:[(0,Nt.jsxs)("div",{className:"".concat(c," h-48 flex flex-col items-center justify-center text-white"),children:[(0,Nt.jsx)("div",{className:"text-4xl mb-4",children:i.icon}),(0,Nt.jsx)("h1",{className:"text-2xl font-bold mb-2",children:i.bannerTitle}),(0,Nt.jsx)("p",{className:"text-white/90 text-center max-w-md",children:i.bannerSubtitle})]}),(0,Nt.jsx)("div",{className:"max-w-md mx-auto -mt-8 relative z-10",children:(0,Nt.jsx)("div",{className:"bg-[#ECFDF5] rounded-lg shadow-lg p-6 border border-green-200",children:(0,Nt.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,Nt.jsx)("div",{className:"flex-shrink-0",children:(0,Nt.jsx)("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center",children:(0,Nt.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),(0,Nt.jsxs)("div",{className:"flex-1",children:[(0,Nt.jsx)("h2",{className:"text-lg font-bold text-green-800 mb-2",children:i.successTitle}),(0,Nt.jsx)("p",{className:"text-green-700 text-sm leading-relaxed",children:i.successSubtitle})]})]})})}),(0,Nt.jsxs)("div",{className:"max-w-md mx-auto mt-8 px-4 pb-8",children:[(0,Nt.jsxs)("div",{className:"space-y-4",children:[(0,Nt.jsxs)("button",{onClick:()=>{if(console.log("\ud83d\udd0d handleViewFeed called with module:",t),"Milestones"===t){console.log("\ud83c\udfaf Navigating to TAGMe with Milestones tab");const e={activeTab:"Milestones",from:"upload-success"};console.log("\ud83c\udfaf Navigation state being passed:",e),n("/tagme",{state:e})}else if("Collaboration"===t){console.log("\ud83c\udfaf Navigating to TAGMe with Collaborations tab");const e={activeTab:"Collaborations",from:"upload-success"};console.log("\ud83c\udfaf Navigation state being passed:",e),n("/tagme",{state:e})}else if("Jobs"===t){console.log("\ud83c\udfaf Navigating to TAGMe with Jobs tab");const e={activeTab:"Jobs",from:"upload-success"};console.log("\ud83c\udfaf Navigation state being passed:",e),n("/tagme",{state:e})}else if("Portfolio"===t){console.log("\ud83c\udfaf Navigating to Gallery with Works tab");const e={activeTab:"Works",from:"upload-success",scrollToGallery:!0};console.log("\ud83c\udfaf Navigation state being passed:",e),n("/",{state:e})}else if("Art Market"===t){console.log("\ud83c\udfaf Navigating to Gallery with Market tab");const e={activeTab:"Market",from:"upload-success",scrollToGallery:!0};console.log("\ud83c\udfaf Navigation state being passed:",e),n("/",{state:e})}else console.log("\ud83c\udfaf Navigating to home page"),n("/")},className:"w-full ".concat(d," text-white font-semibold py-3 rounded-lg ").concat(u," transition-colors duration-200 flex items-center justify-center"),children:[(0,Nt.jsxs)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View ",t," Feed"]}),(0,Nt.jsxs)("button",{onClick:()=>{console.log("\ud83d\udd0d handleUploadMore called with module:",t),console.log("\ud83d\udd0d Current module value:",t);try{"Milestones"===t?(console.log("\ud83c\udfaf Navigating back to upload page with Milestones tab"),window.location.href="/upload?tab=milestones"):"Collaboration"===t?(console.log("\ud83c\udfaf Navigating back to upload page with Collaboration tab"),window.location.href="/upload?tab=collaboration"):"Jobs"===t?(console.log("\ud83c\udfaf Navigating back to upload page with Jobs tab"),window.location.href="/upload?tab=jobs"):"Art Market"===t?(console.log("\ud83c\udfaf Navigating back to upload page with Art Market tab"),window.location.href="/upload?tab=art-market"):"Portfolio"===t?(console.log("\ud83c\udfaf Navigating back to upload page with Portfolio tab"),window.location.href="/upload?tab=portfolio"):(console.log("\ud83c\udfaf Navigating back to upload page with default tab"),console.log("\u26a0\ufe0f Unknown module type:",t),window.location.href="/upload")}catch(e){console.error("\u274c Error in handleUploadMore:",e),window.location.href="/upload"}},className:"w-full bg-white ".concat(m," font-semibold py-3 rounded-lg border-2 ").concat(h," ").concat(p," transition-colors duration-200 flex items-center justify-center"),children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Upload More Content"]})]}),(0,Nt.jsx)("div",{className:"text-center mt-6",children:(0,Nt.jsx)(gt,{to:"/",className:"text-gray-500 hover:text-gray-700 text-sm transition-colors duration-200",children:"\u2190 Back to Home"})})]})]})},Di=[{value:"2-3",label:"Less than 3 people"},{value:"4-5",label:"4-5 people"},{value:"6-8",label:"6-8 people"},{value:"9+",label:"9+ people"}],Ti=[{value:"1-2 weeks",label:"1-2 weeks"},{value:"3-4 weeks",label:"3-4 weeks"},{value:"1-2 months",label:"1-2 months"},{value:"3-4 months",label:"3-4 months"},{value:"5-6 months",label:"5-6 months"},{value:"6+ months",label:"6+ months"}],Li=[{value:"1-2 times/week",label:"1-2 times/week"},{value:"2-3 times/week",label:"2-3 times/week"},{value:"3-4 times/week",label:"3-4 times/week"},{value:"Daily",label:"Daily"},{value:"As needed",label:"As needed"}],Mi=e=>{var t,r,o,a,s,n;let{formData:i,onFormChange:l}=e;return(0,Nt.jsxs)("div",{className:"space-y-6",children:[(0,Nt.jsxs)("div",{className:"space-y-4",children:[(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Basic Information"}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Project Title ",(0,Nt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Nt.jsx)("input",{type:"text",name:"title",value:i.title,onChange:l,placeholder:"What's your project about?",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Team Size"}),(0,Nt.jsx)(qo,{options:Di,value:i.teamSize,onChange:l,name:"teamSize",placeholder:"Select size"})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration"}),(0,Nt.jsx)(qo,{options:Ti,value:i.duration,onChange:l,name:"duration",placeholder:"Select duration"})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meeting Schedule"}),(0,Nt.jsx)(qo,{options:Li,value:i.meetingSchedule,onChange:l,name:"meetingSchedule",placeholder:"Select schedule"})]}),(0,Nt.jsxs)("div",{className:"space-y-3",children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Information"}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsxs)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:["Email ",(0,Nt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Nt.jsx)("input",{type:"email",name:"contactEmail",value:i.contactEmail||"",onChange:l,placeholder:"your.email@example.com",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Discord"}),(0,Nt.jsx)("input",{type:"text",name:"contactDiscord",value:i.contactDiscord||"",onChange:l,placeholder:"username#1234",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Other"}),(0,Nt.jsx)("input",{type:"text",name:"contactOther",value:i.contactOther||"",onChange:l,placeholder:"Slack, Telegram, etc.",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Application Deadline ",(0,Nt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Nt.jsx)("input",{type:"text",name:"applicationDeadline",value:i.applicationDeadline,onChange:l,placeholder:"e.g., Aug 31, 2025 or To be determined",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"}),(0,Nt.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Enter deadline in any format you prefer"})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Looking For"}),(0,Nt.jsxs)("div",{className:"space-y-3",children:[(0,Nt.jsxs)("div",{className:"flex",children:[(0,Nt.jsx)("input",{type:"text",name:"projectType",value:i.projectType,onChange:l,placeholder:"Tags",className:"flex-1 bg-gray-50 border border-gray-300 rounded-l px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple",onKeyPress:e=>{if("Enter"===e.key){var t;e.preventDefault();(i.projectType?i.projectType.split(",").map(e=>e.trim()).filter(e=>e):[]).length<6&&null!==(t=i.projectType)&&void 0!==t&&t.trim()&&l({target:{name:"projectType",value:i.projectType+", "}})}}}),(0,Nt.jsx)("button",{type:"button",onClick:()=>{var e;(i.projectType?i.projectType.split(",").map(e=>e.trim()).filter(e=>e):[]).length<6&&null!==(e=i.projectType)&&void 0!==e&&e.trim()&&l({target:{name:"projectType",value:i.projectType+", "}})},disabled:!(null!==(t=i.projectType)&&void 0!==t&&t.trim())||!!i.projectType&&i.projectType.split(",").map(e=>e.trim()).filter(e=>e).length>=6,className:"bg-tag-purple text-white px-3 py-2 rounded-r hover:bg-purple-700 transition-colors duration-200 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"+"})]}),i.projectType&&(0,Nt.jsx)("div",{className:"flex flex-wrap gap-2",children:null===(r=i.projectType)||void 0===r?void 0:r.split(",").map((e,t)=>{const r=e.trim();return r?(0,Nt.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm",children:[r,(0,Nt.jsx)("button",{type:"button",onClick:()=>{var e;const r=(null===(e=i.projectType)||void 0===e?void 0:e.split(",").map(e=>e.trim()).filter(e=>e))||[];r.splice(t,1),l({target:{name:"projectType",value:r.join(", ")}})},className:"ml-1 text-purple-600 hover:text-purple-800",children:"\xd7"})]},t):null})}),(0,Nt.jsxs)("p",{className:"text-xs text-gray-500",children:[i.projectType&&(null===(o=i.projectType)||void 0===o||null===(a=o.split(","))||void 0===a||null===(s=a.map(e=>e.trim()))||void 0===s||null===(n=s.filter(e=>e))||void 0===n?void 0:n.length)||0,"/6 tags"]})]})]})]}),(0,Nt.jsxs)("div",{className:"space-y-4",children:[(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Project Details"}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Project Description ",(0,Nt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Nt.jsx)("textarea",{name:"description",value:i.description,onChange:l,placeholder:"Describe your project and what kind of help you need...",rows:4,maxLength:1e3,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"}),(0,Nt.jsxs)("div",{className:"text-xs text-gray-500 mt-1 text-right",children:[i.description.length,"/1000 characters"]})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Project Vision ",(0,Nt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Nt.jsx)("textarea",{name:"projectVision",value:i.projectVision,onChange:l,placeholder:"In one or two sentences, explain why you started this project and what excites you about it.",rows:3,maxLength:200,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"}),(0,Nt.jsxs)("div",{className:"text-xs text-gray-500 mt-1 text-right",children:[i.projectVision.length,"/200 characters"]})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Why This Matters ",(0,Nt.jsx)("span",{className:"text-gray-500",children:"(Optional)"})]}),(0,Nt.jsx)("textarea",{name:"whyThisMatters",value:i.whyThisMatters,onChange:l,placeholder:"Describe the bigger impact of your project \u2014 why it's important, and what difference it could make.",rows:5,maxLength:1e3,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"}),(0,Nt.jsxs)("div",{className:"text-xs text-gray-500 mt-1 text-right",children:[i.whyThisMatters.length,"/1000 characters"]})]})]})]})},Ri=()=>(0,Nt.jsxs)("div",{className:"text-center mb-6",children:[(0,Nt.jsx)("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Nt.jsx)("svg",{className:"w-8 h-8 text-tag-purple",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,Nt.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Create Collaboration Post"}),(0,Nt.jsx)("p",{className:"text-gray-600",children:"Post a collaboration request to find teammates and partners for your projects"})]}),Fi=e=>{let{roles:t,onAddRole:r,onRemoveRole:a,onRoleChange:s}=e;const[i,l]=(0,o.useState)({}),c=(e,r)=>{if(!r)return null;const o=r.split(",").map(e=>e.trim()).filter(e=>e);return(0,Nt.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:o.map((r,o)=>(0,Nt.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-800 text-xs font-medium rounded-full",children:[r,(0,Nt.jsx)("button",{type:"button",onClick:()=>((e,r)=>{var o;const a=((null===(o=t.find(t=>t.id===e))||void 0===o?void 0:o.requiredSkills)||"").split(",").map(e=>e.trim()).filter(e=>e!==r);s(e,"requiredSkills",a.join(", "))})(e,r),className:"text-purple-600 hover:text-purple-800",children:(0,Nt.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},o))})};return(0,Nt.jsxs)("div",{children:[(0,Nt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Nt.jsxs)("h3",{className:"text-lg font-semibold text-gray-800",children:["Team Roles Needed ",(0,Nt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Nt.jsx)("button",{type:"button",onClick:r,className:"bg-tag-purple text-white px-3 py-1 rounded text-sm hover:bg-purple-700 transition-colors duration-200",children:"+ Add Role"})]}),(0,Nt.jsx)("div",{className:"space-y-4",children:t.map((e,r)=>(0,Nt.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,Nt.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,Nt.jsxs)("h4",{className:"text-sm font-medium text-gray-700",children:["Role #",r+1]}),t.length>1&&(0,Nt.jsx)("button",{type:"button",onClick:()=>a(e.id),className:"text-red-500 hover:text-red-700",children:(0,Nt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),(0,Nt.jsxs)("div",{className:"space-y-3",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Role Name"}),(0,Nt.jsx)("input",{type:"text",value:e.customRole,onChange:t=>s(e.id,"customRole",t.target.value),placeholder:"e.g., UI/UX Designer, Frontend Developer, Motion Designer",className:"w-full bg-white border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple text-sm"})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Role Description"}),(0,Nt.jsx)("textarea",{value:e.roleDescription,onChange:t=>s(e.id,"roleDescription",t.target.value),placeholder:"Describe responsibilities and expectations for this role...",rows:3,className:"w-full bg-white border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple text-sm"})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Required Skills"}),(0,Nt.jsx)("input",{type:"text",value:i[e.id]||"",onChange:t=>{return r=e.id,o=t.target.value,void l(e=>(0,n.A)((0,n.A)({},e),{},{[r]:o}));var r,o},onKeyDown:r=>((e,r)=>{if("Enter"===r.key){var o;r.preventDefault();const a=i[e]||"",c=(null===(o=t.find(t=>t.id===e))||void 0===o?void 0:o.requiredSkills)||"";if(a.trim()){const t=a.trim(),r=c?c.split(",").map(e=>e.trim()):[];if(!r.includes(t)){const o=[...r,t].join(", ");s(e,"requiredSkills",o)}l(t=>(0,n.A)((0,n.A)({},t),{},{[e]:""}))}}})(e.id,r),placeholder:"Type a skill and press Enter to add (e.g., Adobe Creative Suite, React Native)",className:"w-full bg-white border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple text-sm"}),(0,Nt.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Press Enter to add each skill."}),c(e.id,e.requiredSkills)]})]})]},e.id))})]})},Ui=e=>{let{isOpen:t,onClose:r}=e;return t?(0,Nt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 transform transition-all",children:[(0,Nt.jsx)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:(0,Nt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Nt.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:(0,Nt.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Draft Saved"})]})}),(0,Nt.jsxs)("div",{className:"p-6",children:[(0,Nt.jsx)("p",{className:"text-gray-600 mb-6",children:"Your collaboration draft has been saved successfully! You can continue editing later or publish when you're ready."}),(0,Nt.jsx)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:(0,Nt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Nt.jsx)("span",{className:"text-sm text-purple-700 font-medium",children:"Draft saved to your profile"})]})})]}),(0,Nt.jsx)("div",{className:"flex justify-end p-6 border-t border-gray-200",children:(0,Nt.jsx)("button",{onClick:r,className:"bg-purple-600 text-white px-6 py-2 rounded-md hover:bg-purple-700 transition-colors duration-200 font-medium",children:"Continue Editing"})})]})}):null},Oi=e=>{let{onFileUpload:t,posterPreview:r}=e;return(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Recruitment Poster"}),r?(0,Nt.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg bg-white p-4",children:[(0,Nt.jsxs)("div",{className:"relative",children:[(0,Nt.jsx)("img",{src:r,alt:"Recruitment Poster Preview",className:"w-full h-48 object-cover rounded-lg"}),(0,Nt.jsx)("button",{type:"button",onClick:()=>{const e=document.getElementById("recruitment-poster-upload");e&&(e.value=""),t({target:{files:[]}})},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600 transition-colors",children:"\xd7"})]}),(0,Nt.jsx)("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Click the \xd7 button to remove and upload a new image"})]}):(0,Nt.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg bg-white py-6 px-4 text-center",children:[(0,Nt.jsx)("svg",{className:"w-8 h-8 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,Nt.jsx)("p",{className:"text-gray-600 mb-2",children:"Upload recruitment poster"}),(0,Nt.jsx)("p",{className:"text-xs text-gray-400 mb-4",children:"JPG, PNG (Max 5MB) - Only one image allowed"}),(0,Nt.jsx)("input",{type:"file",accept:".jpg,.jpeg,.png",onChange:t,multiple:!1,className:"hidden",id:"recruitment-poster-upload"}),(0,Nt.jsx)("label",{htmlFor:"recruitment-poster-upload",className:"bg-tag-purple text-white px-4 py-2 rounded cursor-pointer hover:bg-purple-700 transition-colors duration-200",children:"Choose Image"})]})]})},zi=e=>{let{state:t,setters:r}=e;const{setFormData:a,setIsSubmitting:s,setIsSaving:i}=r,[l,c]=(0,o.useState)(!1),d=(0,o.useCallback)(e=>{e&&e.startsWith("blob:")&&(URL.revokeObjectURL(e),console.log("[CollaborationActions] Revoked blob URL:",e))},[]);return{handleFormChange:(0,o.useCallback)(e=>{const{name:t,value:r}=e.target;a(e=>(0,n.A)((0,n.A)({},e),{},{[t]:r}))},[a]),handleFileUpload:(0,o.useCallback)(e=>{const r=e.target.files;if(console.log("Collaboration files selected:",r),r&&r.length>0){const e=r[0];if(!["image/jpeg","image/jpg","image/png"].includes(e.type))return void alert("Please select a valid image file (JPG, PNG)");const o=5242880;if(e.size>o)return void alert("File size must be less than 5MB");t.formData.posterPreview&&d(t.formData.posterPreview);const s=URL.createObjectURL(e);a(t=>(0,n.A)((0,n.A)({},t),{},{poster:e,posterPreview:s})),console.log("File uploaded successfully:",e.name)}else t.formData.posterPreview&&d(t.formData.posterPreview),a(e=>(0,n.A)((0,n.A)({},e),{},{poster:null,posterPreview:""}))},[a,t.formData,d]),handleSubmit:(0,o.useCallback)(async e=>{var o,a;e.preventDefault(),console.log("Collaboration form submitted:",t.formData),console.log("[useCollaborationActions] Form roles data:",t.formData.roles),console.log("[useCollaborationActions] Form roles structure:",null===(o=t.formData.roles)||void 0===o?void 0:o.map(e=>({customRole:e.customRole,roleDescription:e.roleDescription,requiredSkills:e.requiredSkills})));const i={title:"Project Title",description:"Project Description",projectVision:"Project Vision",contactEmail:"Contact Email",teamSize:"Team Size",meetingSchedule:"Meeting Schedule",applicationDeadline:"Application Deadline"},l=[];for(const[r,s]of Object.entries(i))t.formData[r]&&""!==t.formData[r].trim()||l.push(s);if(console.log("[CollaborationForm] \u5b57\u6bb5\u9a8c\u8bc1\u7ed3\u679c:",{requiredFields:i,missingFields:l,projectVisionValue:t.formData.projectVision,whyThisMattersValue:t.formData.whyThisMatters,projectVisionValid:!(!t.formData.projectVision||""===(null===(a=t.formData.projectVision)||void 0===a?void 0:a.trim())),whyThisMattersValid:!0}),t.formData.roles&&0!==t.formData.roles.length){t.formData.roles.filter(e=>!e.customRole||!e.roleDescription||!e.requiredSkills).length>0&&l.push("Complete Team Role information")}else l.push("At least one Team Role");if(l.length>0)return r.setValidationErrors(l),void r.setShowValidationModal(!0);if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.formData.contactEmail))return r.setValidationErrors(["Please enter a valid email address"]),void r.setShowValidationModal(!0);try{s(!0);const e=await _n(t.formData);console.log("[useCollaborationActions] Formatted data:",e);const o=(0,n.A)((0,n.A)({},e),{},{applicationDeadline:t.formData.applicationDeadline||"TEST DEADLINE",author:{id:"current_user",name:"Current User",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face"},createdAt:(new Date).toISOString(),status:"active",likes:0,views:0});console.log("Submitting collaboration data:",o),console.log("Application Deadline check:",{applicationDeadline:o.applicationDeadline,formDataKeys:Object.keys(o)});const a=await Wn(o);if(!a.success)throw new Error(a.error||"Failed to create collaboration");console.log("Collaboration posted successfully!",a.data),t.formData.posterPreview&&d(t.formData.posterPreview),window.dispatchEvent(new CustomEvent("collaboration:created",{detail:{collaboration:a.data}})),r.setShowSuccess(!0)}catch(c){console.error("Error posting collaboration:",c),console.error("Error details:",{message:c.message,stack:c.stack,formData:t.formData}),alert("Failed to post collaboration: ".concat(c.message))}finally{s(!1)}},[t.formData,r,d]),handleSaveDraft:(0,o.useCallback)(async e=>{e.preventDefault(),console.log("Saving collaboration draft:",t.formData);try{var r;i(!0);const e=new URLSearchParams(window.location.search).get("draftId")||(null===(r=window.location.state)||void 0===r?void 0:r.draftId);if(!e){const e=await Gr.getDrafts({type:"collaboration"});if(e.success&&e.data.items.length>=3)return alert("You have reached the maximum limit of 3 drafts. Please delete an existing draft before saving a new one."),void i(!1)}const o={title:t.formData.title||"Untitled Draft",description:t.formData.description||"",projectVision:t.formData.projectVision||"",whyThisMatters:t.formData.whyThisMatters||"",teamSize:t.formData.teamSize||"",duration:t.formData.duration||"",meetingSchedule:t.formData.meetingSchedule||"",contactEmail:t.formData.contactEmail||"",contactDiscord:t.formData.contactDiscord||"",roles:t.formData.roles||[],tags:[],image:t.formData.posterPreview||null};let a;if(console.log("Saving draft data:",o),a=e?await Gr.updateDraft(e,o):await Gr.saveDraft("collaboration",o),!a.success)throw new Error(a.error||"Failed to save draft");console.log("Draft saved successfully!",a.data),window.dispatchEvent(new CustomEvent("draft:saved",{detail:{draft:a.data}})),c(!0)}catch(o){console.error("Error saving draft:",o),alert("Failed to save draft. Please try again.")}finally{i(!1)}},[t.formData,i]),handleAddRole:(0,o.useCallback)(()=>{const e={id:Date.now(),customRole:"",roleDescription:"",requiredSkills:""};a(t=>(0,n.A)((0,n.A)({},t),{},{roles:[...t.roles,e]}))},[a]),handleRemoveRole:(0,o.useCallback)(e=>{a(t=>(0,n.A)((0,n.A)({},t),{},{roles:t.roles.filter(t=>t.id!==e)}))},[a]),handleRoleChange:(0,o.useCallback)((e,t,r)=>{a(o=>(0,n.A)((0,n.A)({},o),{},{roles:o.roles.map(o=>o.id===e?(0,n.A)((0,n.A)({},o),{},{[t]:r}):o)}))},[a]),showDraftSavedModal:l,setShowDraftSavedModal:c}},Wi=()=>{const[e,t]=(0,o.useState)(!1),[r,a]=(0,o.useState)(!1),[s,n]=(0,o.useState)(!1),[i,l]=(0,o.useState)({title:"",projectType:"",description:"",projectVision:"",whyThisMatters:"",teamSize:"",duration:"",meetingSchedule:"",contactEmail:"",contactDiscord:"",contactOther:"",applicationDeadline:"",poster:null,posterPreview:"",roles:[{id:1,customRole:"",roleDescription:"",requiredSkills:""}]}),[c,d]=(0,o.useState)(!1),[u,h]=(0,o.useState)([]);return(0,o.useMemo)(()=>({state:{showSuccess:e,isSubmitting:r,isSaving:s,formData:i,showValidationModal:c,validationErrors:u},setters:{setShowSuccess:t,setIsSubmitting:a,setIsSaving:n,setFormData:l,setShowValidationModal:d,setValidationErrors:h}}),[e,r,s,i,c,u])},Bi=()=>{var e,t,r;const a=ue(),s=le(),n=(0,o.useRef)(!1),{state:i,setters:l}=Wi(),c=zi({state:i,setters:l});return(0,o.useEffect)(()=>{var e,t;if("draft-edit"===(null===(e=s.state)||void 0===e?void 0:e.from)&&null!==(t=s.state)&&void 0!==t&&t.draftData&&!n.current){console.log("Loading draft data:",s.state.draftData);const e=s.state.draftData;l.setFormData({title:e.title||"",description:e.description||"",projectVision:e.projectVision||"",whyThisMatters:e.whyThisMatters||"",teamSize:e.teamSize||"",duration:e.duration||"",meetingSchedule:e.meetingSchedule||"",contactEmail:e.contactEmail||"",contactDiscord:e.contactDiscord||"",roles:e.roles||[],poster:null,posterPreview:e.image||""}),n.current=!0,console.log("Draft data loaded successfully")}},[null===(e=s.state)||void 0===e?void 0:e.from,null===(t=s.state)||void 0===t?void 0:t.draftData]),(0,o.useEffect)(()=>()=>{i.formData.posterPreview&&i.formData.posterPreview.startsWith("blob:")&&(URL.revokeObjectURL(i.formData.posterPreview),console.log("[UploadCollaboration] Cleaned up blob URL on unmount"))},[i.formData.posterPreview]),i.showSuccess?(0,Nt.jsx)(Pi,{module:"Collaboration"}):(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsx)(Jo,{isOpen:i.showValidationModal,onClose:()=>l.setShowValidationModal(!1),errors:i.validationErrors,title:"Please Complete Required Fields"}),(0,Nt.jsx)(Ui,{isOpen:c.showDraftSavedModal,onClose:()=>c.setShowDraftSavedModal(!1)}),(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:["draft-edit"===(null===(r=s.state)||void 0===r?void 0:r.from)&&(0,Nt.jsx)("div",{className:"mb-6",children:(0,Nt.jsxs)("button",{onClick:()=>a(-1),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition-colors duration-200 hover:bg-gray-50 px-3 py-2 rounded-md border border-gray-300",children:[(0,Nt.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),(0,Nt.jsx)("span",{className:"font-medium",children:"Back to Drafts"})]})}),(0,Nt.jsx)(Ri,{}),(0,Nt.jsxs)("form",{onSubmit:c.handleSubmit,className:"space-y-6",children:[(0,Nt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Nt.jsxs)("div",{className:"space-y-4",children:[(0,Nt.jsx)(Oi,{onFileUpload:c.handleFileUpload,posterPreview:i.formData.posterPreview}),(0,Nt.jsx)(Mi,{formData:i.formData,onFormChange:c.handleFormChange})]}),(0,Nt.jsx)(Fi,{roles:i.formData.roles,onAddRole:c.handleAddRole,onRemoveRole:c.handleRemoveRole,onRoleChange:c.handleRoleChange})]}),(0,Nt.jsxs)("div",{className:"flex gap-4",children:[(0,Nt.jsx)("button",{type:"button",onClick:c.handleSaveDraft,disabled:i.isSaving,className:"flex-1 font-semibold py-3 rounded-md transition-colors duration-200 flex items-center justify-center ".concat(i.isSaving?"bg-gray-400 cursor-not-allowed":"bg-purple-200 text-purple-700 hover:bg-purple-300"),children:i.isSaving?(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-purple-700",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Nt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Nt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"Save Draft"]})}),(0,Nt.jsx)("button",{type:"submit",disabled:i.isSubmitting,className:"flex-1 font-semibold py-3 rounded-md transition-colors duration-200 flex items-center justify-center ".concat(i.isSubmitting?"bg-gray-400 cursor-not-allowed":"bg-tag-purple text-white hover:bg-purple-700"),children:i.isSubmitting?(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Nt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Nt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Posting..."]}):(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Post Collaboration TAGMe!"]})})]})]})]})]})},Gi=()=>{const e=ue(),[t,r]=(0,o.useState)({title:"",company:"",location:"",jobType:"",salary:"",description:"",requirements:"",contactEmail:""}),a=e=>{const{name:t,value:o}=e.target;r(e=>(0,n.A)((0,n.A)({},e),{},{[t]:o}))};return(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,Nt.jsxs)("div",{className:"text-center mb-6",children:[(0,Nt.jsx)("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Nt.jsx)("svg",{className:"w-8 h-8 text-tag-purple",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7a2 2 0 012-2h12a2 2 0 012 2v2H4V7zM4 9h16v10a2 2 0 01-2 2H6a2 2 0 01-2-2V9z"})})}),(0,Nt.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Post Job Opportunity"}),(0,Nt.jsx)("p",{className:"text-gray-600",children:"Share creative job opportunities with the TAG community"})]}),(0,Nt.jsxs)("form",{onSubmit:r=>{r.preventDefault(),console.log("Jobs form submitted:",t),alert("Job posting created successfully on TAGMe!"),e("/")},className:"space-y-6",children:[(0,Nt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Job Title"}),(0,Nt.jsx)("input",{type:"text",name:"title",value:t.title,onChange:a,placeholder:"e.g., Senior UI/UX Designer",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company"}),(0,Nt.jsx)("input",{type:"text",name:"company",value:t.company,onChange:a,placeholder:"Company name",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]})]}),(0,Nt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),(0,Nt.jsx)("input",{type:"text",name:"location",value:t.location,onChange:a,placeholder:"City, Country or Remote",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Job Type"}),(0,Nt.jsxs)("div",{className:"relative",children:[(0,Nt.jsxs)("select",{name:"jobType",value:t.jobType,onChange:a,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 pr-10 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple appearance-none",children:[(0,Nt.jsx)("option",{value:"",children:"Select type"}),(0,Nt.jsx)("option",{value:"full-time",children:"Full-time"}),(0,Nt.jsx)("option",{value:"part-time",children:"Part-time"}),(0,Nt.jsx)("option",{value:"contract",children:"Contract"}),(0,Nt.jsx)("option",{value:"freelance",children:"Freelance"}),(0,Nt.jsx)("option",{value:"internship",children:"Internship"})]}),(0,Nt.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,Nt.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Salary Range"}),(0,Nt.jsx)("input",{type:"text",name:"salary",value:t.salary,onChange:a,placeholder:"e.g., $50k-$80k",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Job Description"}),(0,Nt.jsx)("textarea",{name:"description",value:t.description,onChange:a,placeholder:"Describe the role, responsibilities, and what you're looking for...",rows:6,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Requirements"}),(0,Nt.jsx)("textarea",{name:"requirements",value:t.requirements,onChange:a,placeholder:"List required skills, experience, and qualifications...",rows:4,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Email"}),(0,Nt.jsx)("input",{type:"email",name:"contactEmail",value:t.contactEmail,onChange:a,placeholder:"hr@company.com",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,Nt.jsxs)("button",{type:"submit",className:"w-full bg-tag-purple text-white font-semibold py-3 rounded-md hover:bg-purple-700 transition-colors duration-200 flex items-center justify-center",children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6.5M8 6V4a2 2 0 00-2-2H4a2 2 0 00-2 2v2m8 0V6a2 2 0 012 2v6.5"})}),"Post Job TAGMe!"]})]})]})},Hi=()=>(0,Nt.jsxs)("div",{className:"text-center mb-8",children:[(0,Nt.jsx)("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Nt.jsx)("svg",{className:"w-8 h-8 text-tag-purple",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 3v18m0-16h12l-2 4 2 4H6"})})}),(0,Nt.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Share Your Milestone Stages"}),(0,Nt.jsx)("p",{className:"text-gray-600",children:"You can only share your work in progress in milestone stages after publishing a collaboration post and linking it to your existing collaboration project."})]}),qi=e=>{let{stage:t,index:r,isLast:o,onStageNameChange:a,onProgressChange:s,onFileUpload:n,onFieldChange:i,onRemoveStage:l,onAddNewStage:c,onKeyDown:d}=e;return(0,Nt.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,Nt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Nt.jsxs)("h3",{className:"text-lg font-semibold text-gray-800",children:["Milestone Stage ",r+1]}),(0,Nt.jsx)("button",{type:"button",onClick:()=>l(t.id),className:"text-red-500 hover:text-red-700 text-sm transition-colors",children:"Delete Stage"})]}),(0,Nt.jsxs)("div",{className:"mb-6",children:[(0,Nt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Stage Name ",(0,Nt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Nt.jsx)("input",{type:"text",value:t.stageName,onChange:e=>a(t.id,e.target.value),onKeyDown:d,placeholder:"e.g., Initial Design, Production, Final Review",className:"w-full bg-white border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,Nt.jsxs)("div",{className:"mb-6",children:[(0,Nt.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Nt.jsxs)("span",{className:"text-sm text-gray-600",children:["Stage Progress ",(0,Nt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Nt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Nt.jsx)("input",{type:"number",min:"0",max:"100",value:t.progress,onChange:e=>s(t.id,e.target.value),onKeyDown:d,className:"w-16 bg-white border border-gray-300 rounded px-2 py-1 text-sm text-center focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"}),(0,Nt.jsx)("span",{className:"text-sm text-gray-600",children:"%"})]})]}),(0,Nt.jsx)(or,{progress:t.progress})]}),(0,Nt.jsxs)("div",{className:"mb-6",children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Milestone Poster"}),(0,Nt.jsxs)(sr,{onFileUpload:e=>n(t.id,e),id:"milestone-poster-upload-".concat(t.id),children:[(0,Nt.jsx)("p",{className:"text-gray-600 mb-2",children:"Upload a representative image for this stage"}),(0,Nt.jsx)("p",{className:"text-xs text-gray-400 mb-4",children:"Only JPG or PNG, max 2MB - Single image only"})]}),t.posterFiles.length>0&&(0,Nt.jsx)("div",{className:"mt-3",children:(0,Nt.jsxs)("p",{className:"text-sm text-gray-600",children:[t.posterFiles.length," image selected"]})})]}),(0,Nt.jsxs)("div",{className:"mb-6",children:[(0,Nt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Stage Due Date ",(0,Nt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Nt.jsx)("input",{type:"date",value:t.dateAchieved,onChange:e=>i(t.id,"dateAchieved",e.target.value),onKeyDown:d,className:"w-full bg-white border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,Nt.jsxs)("div",{className:"mb-6",children:[(0,Nt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Related Skills ",(0,Nt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Nt.jsx)("input",{type:"text",value:t.relatedSkills,onChange:e=>i(t.id,"relatedSkills",e.target.value),onKeyDown:d,placeholder:"Skills you developed or used in this stage",className:"w-full bg-white border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,Nt.jsxs)("div",{className:"mb-6",children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Introduction"}),(0,Nt.jsx)("textarea",{name:"introduction-".concat(t.id),value:t.introduction||"",onChange:e=>i(t.id,"introduction",e.target.value),onKeyDown:d,placeholder:"Brief introduction about this stage (max 200 characters)",rows:3,maxLength:200,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple resize-none"}),(0,Nt.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,Nt.jsx)("span",{className:"text-xs text-gray-500",children:"Brief introduction about this stage"}),(0,Nt.jsxs)("span",{className:"text-xs text-gray-500",children:[(t.introduction||"").length,"/200"]})]})]}),o&&(0,Nt.jsx)("div",{className:"text-center",children:(0,Nt.jsxs)("button",{type:"button",onClick:c,className:"bg-tag-purple text-white px-6 py-3 rounded-md hover:bg-purple-700 transition-colors duration-200 flex items-center justify-center mx-auto",children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Next Stage"]})})]})},Vi=e=>{let{relatedProject:t}=e;return(0,Nt.jsxs)("div",{className:"mb-8",children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Related Collaboration Project"}),(0,Nt.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,Nt.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("h4",{className:"font-medium text-gray-800",children:t.name}),(0,Nt.jsx)("p",{className:"text-sm text-gray-600",children:t.description})]}),(0,Nt.jsx)("button",{type:"button",className:"text-tag-purple text-sm hover:text-purple-700 transition-colors",children:"View Project"})]}),(0,Nt.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-3",children:[(0,Nt.jsxs)("span",{children:["Team: ",t.teamSize," members"]}),(0,Nt.jsxs)("span",{children:["Deadline: ",t.deadline]})]}),(0,Nt.jsx)("button",{type:"button",className:"text-tag-purple text-sm hover:text-purple-700 transition-colors",children:"Link Different Project"})]})]})},Ji=e=>{let{state:t,setters:r}=e;const{setMilestoneStages:a}=r;return{handleStageNameChange:(0,o.useCallback)((e,t)=>{a(r=>r.map(r=>r.id===e?(0,n.A)((0,n.A)({},r),{},{stageName:t}):r))},[a]),handleProgressChange:(0,o.useCallback)((e,t)=>{a(r=>r.map(r=>r.id===e?(0,n.A)((0,n.A)({},r),{},{progress:parseInt(t)}):r))},[a]),handleFileUpload:(0,o.useCallback)((e,t)=>{const r=Array.from(t.target.files),o=r.length>0?[r[0]]:[];a(t=>t.map(t=>t.id===e?(0,n.A)((0,n.A)({},t),{},{posterFiles:o}):t))},[a]),handleFieldChange:(0,o.useCallback)((e,t,r)=>{a(o=>o.map(o=>o.id===e?(0,n.A)((0,n.A)({},o),{},{[t]:r}):o))},[a]),addNewStage:(0,o.useCallback)(()=>{const e={id:Date.now(),stageName:"",progress:20,posterFiles:[],dateAchieved:"",relatedSkills:"",whatsNext:""};a(t=>[...t,e])},[a]),removeStage:(0,o.useCallback)(e=>{t.milestoneStages.length>1&&a(t=>t.filter(t=>t.id!==e))},[t.milestoneStages.length,a]),handleKeyDown:(0,o.useCallback)(e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation())},[]),handleSubmit:(0,o.useCallback)(e=>{e.preventDefault(),console.log("Milestones stages submitted:",t.milestoneStages),r.setShowSuccess(!0)},[t.milestoneStages,r])}},Zi=()=>{const[e,t]=(0,o.useState)(!1),[r,a]=(0,o.useState)([{id:1,stageName:"",progress:20,posterFiles:[],dateAchieved:"",relatedSkills:"",whatsNext:""}]);return(0,o.useMemo)(()=>({state:{showSuccess:e,milestoneStages:r},setters:{setShowSuccess:t,setMilestoneStages:a}}),[e,r])},Ki=()=>{ue();const{state:e,setters:t}=Zi(),r=Ji({state:e,setters:t}),o={name:"Mobile App Design Collaboration",description:"Fintech app needs UI/UX designer",teamSize:4,deadline:"Dec 15, 2024"};return e.showSuccess?(0,Nt.jsx)(Pi,{module:"Milestones"}):(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,Nt.jsx)(Hi,{}),(0,Nt.jsx)(Vi,{relatedProject:o}),(0,Nt.jsxs)("form",{onSubmit:r.handleSubmit,className:"space-y-8",children:[e.milestoneStages.map((t,o)=>(0,Nt.jsx)(qi,{stage:t,index:o,isLast:o===e.milestoneStages.length-1,onStageNameChange:r.handleStageNameChange,onProgressChange:r.handleProgressChange,onFileUpload:r.handleFileUpload,onFieldChange:r.handleFieldChange,onRemoveStage:r.removeStage,onAddNewStage:r.addNewStage,onKeyDown:r.handleKeyDown},t.id)),(0,Nt.jsxs)("button",{type:"submit",className:"w-full bg-tag-purple text-white font-semibold py-3 rounded-md hover:bg-purple-700 transition-colors duration-200 flex items-center justify-center",children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Share All Milestone Stages TAGMe!"]})]})]})},Yi=()=>(0,Nt.jsxs)("div",{className:"text-center mb-6",children:[(0,Nt.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Nt.jsx)("svg",{className:"w-8 h-8 text-tag-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,Nt.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Sell Your Art Assets"}),(0,Nt.jsx)("p",{className:"text-gray-600",children:"Upload digital assets to the marketplace and earn from your creative work"})]}),Qi=e=>{let{onFileUpload:t}=e;return(0,Nt.jsxs)("div",{className:"space-y-6",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Files"}),(0,Nt.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg bg-white py-6 px-4 text-center",children:[(0,Nt.jsx)("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,Nt.jsx)("p",{className:"text-gray-600 mb-2",children:"Drag files here or click to browse"}),(0,Nt.jsx)("p",{className:"text-xs text-gray-400 mb-4",children:"JPG, PNG, AI, PSD, SVG, EPS (Max 25MB)"}),(0,Nt.jsx)("input",{type:"file",multiple:!0,accept:".jpg,.jpeg,.png,.ai,.psd,.svg,.eps",onChange:t,className:"hidden",id:"art-market-file-upload"}),(0,Nt.jsx)("label",{htmlFor:"art-market-file-upload",className:"bg-tag-blue text-white px-4 py-2 rounded cursor-pointer hover:bg-blue-700 transition-colors duration-200",children:"Choose Files"})]})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preview Images"}),(0,Nt.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg bg-white py-6 px-4 text-center",children:[(0,Nt.jsx)("svg",{className:"w-8 h-8 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,Nt.jsx)("p",{className:"text-gray-600 mb-2",children:"Upload preview images to showcase your asset"}),(0,Nt.jsx)("p",{className:"text-xs text-gray-400 mb-4",children:"JPG, PNG (Max 5MB each)"}),(0,Nt.jsx)("input",{type:"file",multiple:!0,accept:".jpg,.jpeg,.png",onChange:t,className:"hidden",id:"preview-images-upload"}),(0,Nt.jsx)("label",{htmlFor:"preview-images-upload",className:"bg-blue-100 text-blue-800 font-semibold py-2 px-4 rounded cursor-pointer hover:bg-blue-200 transition-colors duration-200",children:"Add Previews"})]})]})]})},$i=e=>{let{formData:t,onFormChange:r,errors:o=[]}=e;const a=[{value:"",label:"Select category"},{value:"graphics",label:"Graphics"},{value:"illustrations",label:"Illustrations"},{value:"templates",label:"Templates"},{value:"icons",label:"Icons"},{value:"fonts",label:"Fonts"},{value:"textures",label:"Textures"}],s=[{value:"Standard License",label:"Standard License"},{value:"Extended License",label:"Extended License"},{value:"Commercial License",label:"Commercial License"}];return(0,Nt.jsxs)("div",{className:"space-y-4",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Asset Title"}),(0,Nt.jsx)("input",{type:"text",name:"title",value:t.title,onChange:r,placeholder:"Name your digital asset...",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue"})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,Nt.jsxs)("div",{className:"relative",children:[(0,Nt.jsx)("select",{name:"category",value:t.category,onChange:r,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 pr-10 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue appearance-none",children:a.map(e=>(0,Nt.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,Nt.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,Nt.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,Nt.jsx)("textarea",{name:"description",value:t.description,onChange:r,placeholder:"Describe your asset, what's included, and how it can be used...",rows:4,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue"})]}),(0,Nt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price"}),(0,Nt.jsx)("input",{type:"number",name:"price",value:t.price,onChange:r,placeholder:"0.00",step:"0.01",min:"0",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue"})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"License Type"}),(0,Nt.jsxs)("div",{className:"relative",children:[(0,Nt.jsx)("select",{name:"licenseType",value:t.licenseType,onChange:r,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 pr-10 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue appearance-none",children:s.map(e=>(0,Nt.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,Nt.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,Nt.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"File Format"}),(0,Nt.jsx)("input",{type:"text",name:"fileFormat",value:t.fileFormat,onChange:r,placeholder:"e.g., AI, PSD, SVG",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue"})]})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),(0,Nt.jsx)("input",{type:"text",name:"tags",value:t.tags,onChange:r,placeholder:"Add relevant tags (e.g., minimal, vector, business)",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue"})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Software Used"}),(0,Nt.jsx)("input",{type:"text",name:"softwareUsed",value:t.softwareUsed,onChange:r,placeholder:"e.g., Adobe Illustrator, Photoshop",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue"})]}),o.length>0&&(0,Nt.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,Nt.jsxs)("div",{className:"flex items-start",children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 text-red-600 mt-0.5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("h4",{className:"text-sm font-semibold text-red-800 mb-1",children:"Please fix the following errors:"}),(0,Nt.jsx)("ul",{className:"text-sm text-red-800 list-disc list-inside",children:o.map((e,t)=>(0,Nt.jsx)("li",{children:e},t))})]})]})})]})},Xi=e=>{let{formData:t,onFormChange:r,onSubmit:o,isSubmitting:a=!1}=e;return(0,Nt.jsxs)("div",{className:"space-y-4",children:[(0,Nt.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,Nt.jsxs)("div",{className:"flex items-start",children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 text-blue-600 mt-0.5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("h4",{className:"text-sm font-semibold text-blue-800 mb-1",children:"Marketplace Guidelines"}),(0,Nt.jsx)("p",{className:"text-sm text-blue-800",children:"All assets must be original work. We take 30% commission on sales. Assets are reviewed before going live."})]})]})}),(0,Nt.jsxs)("div",{className:"flex items-start",children:[(0,Nt.jsx)("input",{type:"checkbox",name:"agreeToTerms",checked:t.agreeToTerms,onChange:r,className:"mt-1 h-4 w-4 text-tag-blue focus:ring-tag-blue border-gray-300 rounded"}),(0,Nt.jsx)("label",{className:"ml-2 text-sm text-gray-700",children:"I agree to the marketplace terms and confirm this is my original work"})]}),(0,Nt.jsx)("button",{type:"submit",disabled:!t.agreeToTerms||a,onClick:o,className:"w-full font-semibold py-3 rounded-md transition-colors duration-200 flex items-center justify-center ".concat(t.agreeToTerms&&!a?"bg-tag-blue text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:a?(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Nt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Nt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Submitting..."]}):(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"List on TAG!"]})})]})},el=()=>{const[e,t]=(0,o.useState)({title:"",category:"",description:"",tags:"",price:"0.00",licenseType:"Standard License",fileFormat:"",softwareUsed:"",agreeToTerms:!1}),[r,a]=(0,o.useState)([]),[s,i]=(0,o.useState)(!1),l=(0,o.useCallback)(e=>{const{name:o,value:s,type:i,checked:l}=e.target,c="checkbox"===i?l:s;t(e=>(0,n.A)((0,n.A)({},e),{},{[o]:c})),r.length>0&&a(e=>e.filter(e=>!e.includes(o)))},[r]),c=(0,o.useCallback)(e=>{const t=e.target.files;console.log("Art Market files selected:",t)},[]),d=(0,o.useCallback)(()=>{const t=(e=>{const t=[];return e.title.trim()||t.push("Title is required"),e.category||t.push("Category is required"),e.description.trim()||t.push("Description is required"),parseFloat(e.price)<0&&t.push("Price must be non-negative"),e.agreeToTerms||t.push("You must agree to the terms"),{isValid:0===t.length,errors:t}})(e);return a(t.errors),t.isValid},[e]),u=(0,o.useCallback)(()=>{t({title:"",category:"",description:"",tags:"",price:"0.00",licenseType:"Standard License",fileFormat:"",softwareUsed:"",agreeToTerms:!1}),a([]),i(!1)},[]),h=(0,o.useCallback)(e=>{i(e)},[]);return{formData:e,errors:r,isSubmitting:s,handleFormChange:l,handleFileUpload:c,validateForm:d,resetForm:u,setSubmitting:h}},tl=e=>{let{formData:t,validateForm:r,setSubmitting:a,onSuccess:s}=e;const i=ue(),l=(0,o.useCallback)(async e=>{if(e.preventDefault(),r()){a(!0);try{const e=(e=>(0,n.A)((0,n.A)({},e),{},{price:parseFloat(e.price)||0,tags:e.tags.split(",").map(e=>e.trim()).filter(e=>e),submittedAt:(new Date).toISOString()}))(t);console.log("Art Market form submitted:",e),await new Promise(e=>setTimeout(e,1e3)),s&&s()}catch(o){console.error("Error submitting form:",o)}finally{a(!1)}}},[t,r,a,s]);return{handleSubmit:l,handleCancel:(0,o.useCallback)(()=>{i("/upload/form")},[i])}},rl=()=>{const[e,t]=(0,o.useState)(!1),{formData:r,errors:a,isSubmitting:s,handleFormChange:n,handleFileUpload:i,validateForm:l,setSubmitting:c}=el(),d=tl({formData:r,validateForm:l,setSubmitting:c,onSuccess:()=>{t(!0)}});return e?(0,Nt.jsx)(Pi,{module:"Art Market"}):(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,Nt.jsx)(Yi,{}),(0,Nt.jsxs)("form",{className:"space-y-6",children:[(0,Nt.jsx)(Qi,{onFileUpload:i}),(0,Nt.jsx)($i,{formData:r,onFormChange:n,errors:a}),(0,Nt.jsx)(Xi,{formData:r,onFormChange:n,onSubmit:d.handleSubmit,isSubmitting:s})]})]})},ol=e=>e.type.startsWith("image/")?URL.createObjectURL(e):null,al=e=>{let{selectedFiles:t,onFileUpload:r,onRemoveFile:o,isSubmitting:a,uploadProgress:s,errors:n}=e;return(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg bg-white py-6 px-4 text-center mb-6",children:[(0,Nt.jsx)("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,Nt.jsx)("p",{className:"text-gray-600 mb-2",children:"Drag files here or click to browse"}),(0,Nt.jsx)("p",{className:"text-xs text-gray-400 mb-4",children:"JPG, PNG, GIF, PDF (Max 10MB)"}),(0,Nt.jsx)("input",{type:"file",multiple:!0,accept:".jpg,.jpeg,.png,.gif,.pdf",onChange:e=>{const t=Array.from(e.target.files),{validFiles:o,errors:a}=(e=>{const t=[],r=[];return e.forEach(e=>{const o=(e=>["image/jpeg","image/png","image/gif","application/pdf"].includes(e.type)?e.size>10485760?{isValid:!1,error:"File too large: ".concat(e.name,". Maximum size is 10MB.")}:{isValid:!0,error:null}:{isValid:!1,error:"Invalid file type: ".concat(e.name,". Please upload JPG, PNG, GIF, or PDF files.")})(e);o.isValid?t.push(e):r.push(o.error)}),{validFiles:t,errors:r}})(t);a.length>0?alert(a[0]):r({target:{files:o}})},className:"hidden",id:"portfolio-file-upload",disabled:a}),(0,Nt.jsx)("label",{htmlFor:"portfolio-file-upload",className:"bg-tag-blue text-white px-4 py-2 rounded cursor-pointer hover:bg-blue-700 transition-colors duration-200 ".concat(a?"opacity-50 cursor-not-allowed":""),children:t.length>0?"Selected ".concat(t.length," files"):"Choose Files"})]}),t.length>0&&(0,Nt.jsxs)("div",{className:"mb-6",children:[(0,Nt.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Selected Files:"}),(0,Nt.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:t.map((e,t)=>(0,Nt.jsxs)("div",{className:"relative group",children:[(0,Nt.jsx)("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:e.type.startsWith("image/")?(0,Nt.jsx)("img",{src:ol(e),alt:e.name,className:"w-full h-full object-cover"}):(0,Nt.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,Nt.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})})}),(0,Nt.jsx)("p",{className:"text-xs text-gray-600 mt-1 truncate",children:e.name}),(0,Nt.jsx)("button",{type:"button",onClick:()=>o(t),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600 transition-colors",children:"\xd7"})]},t))}),n.files&&(0,Nt.jsx)("p",{className:"text-red-600 text-sm mt-2",children:n.files})]}),a&&(0,Nt.jsxs)("div",{className:"mb-6",children:[(0,Nt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Nt.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Uploading..."}),(0,Nt.jsxs)("span",{className:"text-sm text-gray-500",children:[Math.round(s),"%"]})]}),(0,Nt.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,Nt.jsx)("div",{className:"bg-tag-blue h-2 rounded-full transition-all duration-300",style:{width:"".concat(s,"%")}})})]})]})},sl=e=>{let{formData:t,tagInput:r,onFormChange:o,onTagInputChange:a,onTagInputKeyDown:s,onRemoveSoftware:n,onRemoveTag:i,onShowCustomSoftwareModal:l,isSubmitting:c,errors:d}=e;const u=["3D-Coat","3ds Max","After Effects","Blender","Cinema 4D","DaVinci Resolve","Figma","Gaea","Houdini","Illustrator","InDesign","JavaScript","Maya","Nuke","Photoshop","Python","Substance Designer","Substance Painter","Unity","Unreal Engine","ZBrush","Other"];return(0,Nt.jsxs)("div",{className:"space-y-4",children:[(0,Nt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),(0,Nt.jsx)("input",{type:"text",name:"title",value:t.title,onChange:o,placeholder:"Give your work a title...",disabled:c,className:"w-full bg-gray-50 border rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue ".concat(d.title?"border-red-300":"border-gray-300"," ").concat(c?"opacity-50 cursor-not-allowed":"")}),d.title&&(0,Nt.jsx)("p",{className:"text-red-600 text-sm mt-1",children:d.title})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Software Used"}),t.software.length>0&&(0,Nt.jsx)("div",{className:"mb-3 flex flex-wrap gap-2",children:t.software.map((e,t)=>(0,Nt.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[e,(0,Nt.jsx)("button",{type:"button",onClick:()=>n(e),className:"ml-2 text-blue-600 hover:text-blue-800",children:"\xd7"})]},t))}),(0,Nt.jsxs)("div",{className:"relative",children:[(0,Nt.jsxs)("select",{name:"software",value:"",onChange:e=>{const t=o(e);"showCustomSoftwareModal"===(null===t||void 0===t?void 0:t.action)&&l()},disabled:c,className:"w-full bg-gray-50 border rounded px-3 py-2 pr-10 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue appearance-none ".concat(d.software?"border-red-300":"border-gray-300"," ").concat(c?"opacity-50 cursor-not-allowed":""),children:[(0,Nt.jsx)("option",{value:"",children:"Add software"}),u.map(e=>(0,Nt.jsx)("option",{value:e,children:e},e))]}),(0,Nt.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,Nt.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),d.software&&(0,Nt.jsx)("p",{className:"text-red-600 text-sm mt-1",children:d.software})]})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,Nt.jsx)("textarea",{name:"description",value:t.description,onChange:o,placeholder:"Describe your work...",rows:6,disabled:c,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue h-24 ".concat(c?"opacity-50 cursor-not-allowed":"")})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tags ",(0,Nt.jsx)("span",{className:"text-red-500",children:"*"})]}),t.tags.length>0&&(0,Nt.jsx)("div",{className:"mb-3 flex flex-wrap gap-2",children:t.tags.map((e,t)=>(0,Nt.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-green-100 text-green-800",children:[e,(0,Nt.jsx)("button",{type:"button",onClick:()=>i(e),className:"ml-2 text-green-600 hover:text-green-800",children:"\xd7"})]},t))}),(0,Nt.jsx)("input",{type:"text",value:r,onChange:a,onKeyDown:s,placeholder:t.tags.length>=10?"Maximum 10 tags reached":"Type # to add tags (e.g., #design #illustration)",disabled:c||t.tags.length>=10,className:"w-full bg-gray-50 border rounded px-3 py-2 focus:outline-none focus:ring-1 ".concat(t.tags.length>=10?"border-red-300 bg-red-50 text-gray-400":"border-gray-300 focus:ring-tag-blue focus:border-tag-blue"," ").concat(c?"opacity-50 cursor-not-allowed":"")}),(0,Nt.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,Nt.jsx)("p",{className:"text-xs text-gray-500",children:"Start with # and use lowercase letters only. Press space, comma, or enter to add tags."}),(0,Nt.jsxs)("p",{className:"text-xs ".concat(t.tags.length>=10?"text-red-500":t.tags.length>=8?"text-yellow-600":"text-gray-400"),children:[t.tags.length,"/10 tags"]})]}),t.tags.length>=10&&(0,Nt.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"\u26a0\ufe0f Maximum of 10 tags allowed. Remove some tags to add new ones."}),d.tags&&(0,Nt.jsx)("p",{className:"text-red-600 text-sm mt-1",children:d.tags})]})]})},nl=e=>{let{isOpen:t,onClose:r,onAdd:a}=e;const[s,n]=(0,o.useState)(""),i=()=>{if(s.trim()){a(s.trim())&&(n(""),r())}};return t?(0,Nt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Nt.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,Nt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Add Custom Software"}),(0,Nt.jsx)("input",{type:"text",value:s,onChange:e=>n(e.target.value),onKeyPress:e=>{"Enter"===e.key&&i()},placeholder:"Enter software name...",className:"w-full border border-gray-300 rounded px-3 py-2 mb-4 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue"}),(0,Nt.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Nt.jsx)("button",{type:"button",onClick:()=>{n(""),r()},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,Nt.jsx)("button",{type:"button",onClick:i,disabled:!s.trim(),className:"px-4 py-2 bg-tag-blue text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"})]})]})}):null},il=e=>{let{isOpen:t,onClose:r,onConfirm:o}=e;return t?(0,Nt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Nt.jsx)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:(0,Nt.jsxs)("div",{className:"text-center",children:[(0,Nt.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Nt.jsx)("svg",{className:"w-8 h-8 text-tag-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Confirm Upload"}),(0,Nt.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to publish this work to TAG? This action cannot be undone."}),(0,Nt.jsxs)("div",{className:"flex space-x-3",children:[(0,Nt.jsx)("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,Nt.jsx)("button",{type:"button",onClick:o,className:"flex-1 px-4 py-2 bg-tag-blue text-white rounded-md hover:bg-blue-700 transition-colors",children:"Confirm Upload"})]})]})})}):null},ll=e=>{let{isSubmitting:t,onSubmit:r}=e;return(0,Nt.jsx)("button",{type:"submit",disabled:t,onClick:r,className:"w-full font-semibold py-3 rounded-md transition-colors duration-200 flex items-center justify-center ".concat(t?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-tag-blue text-white hover:bg-blue-700"),children:t?(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-gray-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Nt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Nt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Publishing..."]}):(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Publish to TAG!"]})})},cl=()=>{const[e,t]=(0,o.useState)({title:"",software:[],description:"",tags:[]}),[r,a]=(0,o.useState)(""),[s,i]=(0,o.useState)({}),l=(0,o.useCallback)(r=>{const{name:o,value:a}=r.target;if("software"===o){if("Other"===a)return{action:"showCustomSoftwareModal"};a&&!e.software.includes(a)&&t(e=>(0,n.A)((0,n.A)({},e),{},{software:[...e.software,a]}))}else t(e=>(0,n.A)((0,n.A)({},e),{},{[o]:a}));return s[o]&&i(e=>((e,t)=>{const r=(0,n.A)({},e);return r[t]&&delete r[t],r})(e,o)),{action:"none"}},[e.software,s]),c=(0,o.useCallback)(r=>!(!r.trim()||e.software.includes(r.trim()))&&(t(e=>(0,n.A)((0,n.A)({},e),{},{software:[...e.software,r.trim()]})),!0),[e.software]),d=(0,o.useCallback)(e=>{t(t=>(0,n.A)((0,n.A)({},t),{},{software:t.software.filter(t=>t!==e)}))},[]),u=(0,o.useCallback)(r=>{const o=r.target.value;a(o);if([" ",",","\n"].some(e=>o.includes(e))){if(e.tags.length>=10)return void a("");let r=o.split(/[\s,\n]/)[0];if(r.startsWith("#")&&(r=r.slice(1)),r.length>=2&&/^[a-zA-Z0-9_-]+$/.test(r)){const o="#".concat(r.toLowerCase());e.tags.includes(o)||t(e=>(0,n.A)((0,n.A)({},e),{},{tags:[...e.tags,o]}))}a("")}},[e.tags]),h=(0,o.useCallback)(o=>{if("Enter"===o.key||","===o.key||" "===o.key){if(o.preventDefault(),e.tags.length>=10)return void a("");const s=r.trim();if(s.length>0){let r=s;if(r.startsWith("#")&&(r=r.slice(1)),r.length>=2&&/^[a-zA-Z0-9_-]+$/.test(r)){const o="#".concat(r.toLowerCase());e.tags.includes(o)||t(e=>(0,n.A)((0,n.A)({},e),{},{tags:[...e.tags,o]}))}}a("")}},[r,e.tags]),m=(0,o.useCallback)(e=>{t(t=>(0,n.A)((0,n.A)({},t),{},{tags:t.tags.filter(t=>t!==e)}))},[]),p=(0,o.useCallback)(t=>{const r=((e,t)=>{const r={};return e.title.trim()||(r.title="Title is required"),0===e.tags.length&&(r.tags="At least one tag is required"),0===t.length&&(r.files="Please select at least one file"),r})(e,t);return i(r),0===Object.keys(r).length},[e]),g=(0,o.useCallback)(()=>{t({title:"",software:[],description:"",tags:[]}),a(""),i({})},[]);return{formData:e,tagInput:r,errors:s,handleFormChange:l,handleAddCustomSoftware:c,handleRemoveSoftware:d,handleTagInputChange:u,handleTagInputKeyDown:h,handleRemoveTag:m,validateForm:p,resetForm:g,setErrors:i}},dl=()=>{const{formData:e,tagInput:t,errors:r,handleFormChange:a,handleAddCustomSoftware:s,handleRemoveSoftware:n,handleTagInputChange:i,handleTagInputKeyDown:l,handleRemoveTag:c,validateForm:d,setErrors:u}=cl(),{selectedFiles:h,isSubmitting:m,uploadProgress:p,showSuccessModal:g,showErrorModal:f,errorMessage:v,showConfirmModal:x,handleFileUpload:b,handleRemoveFile:y,handleSubmit:w,handleConfirmUpload:j,handleCloseSuccessModal:k,handleCloseErrorModal:N,handleCloseConfirmModal:S}=(()=>{const e=ue(),{user:t}=Ct(),[r,a]=(0,o.useState)([]),[s,n]=(0,o.useState)(!1),[i,l]=(0,o.useState)(0),[c,d]=(0,o.useState)(!1),[u,h]=(0,o.useState)(!1),[m,p]=(0,o.useState)(""),[g,f]=(0,o.useState)(!1),v=(0,o.useCallback)(e=>{const t=Array.from(e.target.files);console.log("Portfolio files selected:",t),a(t)},[]),x=(0,o.useCallback)(e=>{a(t=>t.filter((t,r)=>r!==e))},[]),b=(0,o.useCallback)(async()=>{const e=[];for(let o=0;o<r.length;o++){const a=r[o];l(o/r.length*100);const s=await(0,lr.jp)(a,t.id);if(!s.success)throw new Error("Failed to upload ".concat(a.name,": ").concat(s.error));e.push(s.data)}return l(100),e},[r,t.id]),y=(0,o.useCallback)(async(e,o,a)=>{if(e.preventDefault(),a(r))return t?void f(!0):(p("Please log in to upload artwork"),void h(!0))},[r,t]),w=(0,o.useCallback)(async r=>{f(!1),n(!0);try{const a=await b();console.log("[UploadPortfolio] Form data tags:",r.tags),console.log("[UploadPortfolio] Form data software:",r.software);const s=((e,t,r)=>{var o,a;return{userId:r,title:e.title.trim(),description:e.description.trim(),tags:e.tags||[],software:e.software||[],imagePaths:t.map(e=>e.path),thumbnailPath:(null===(o=t[0])||void 0===o?void 0:o.path)||"",imageKey:(null===(a=t[0])||void 0===a?void 0:a.path)||"",isPublic:!0}})(r,a,null===t||void 0===t?void 0:t.id);console.log("[UploadPortfolio] Final portfolio data tags:",s.tags);const n=await(0,lr.qo)(s);if(!n.success)throw new Error(n.error||"Failed to save artwork");if(t&&t.id)try{await Ar.ensureArtistIndexed(t.id),console.log("[UploadPortfolio] Artist indexed successfully")}catch(o){console.warn("[UploadPortfolio] Failed to index artist:",o)}d(!0),setTimeout(()=>{e("/")},2e3)}catch(a){console.error("Upload error:",a),p("Upload failed. Please try again."),h(!0)}finally{n(!1),l(0)}},[b,e]),j=(0,o.useCallback)(()=>{d(!1)},[]),k=(0,o.useCallback)(()=>{h(!1)},[]),N=(0,o.useCallback)(()=>{f(!1)},[]);return{selectedFiles:r,isSubmitting:s,uploadProgress:i,showSuccessModal:c,showErrorModal:u,errorMessage:m,showConfirmModal:g,handleFileUpload:v,handleRemoveFile:x,handleSubmit:y,handleConfirmUpload:w,handleCloseSuccessModal:j,handleCloseErrorModal:k,handleCloseConfirmModal:N}})(),[C,A]=(0,o.useState)(!1),_=()=>{A(!1)},I=t=>{w(t,e,d)};return(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,Nt.jsxs)("div",{className:"text-center mb-6",children:[(0,Nt.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Nt.jsx)("svg",{className:"w-8 h-8 text-tag-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,Nt.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Share Your Portfolio Work"}),(0,Nt.jsx)("p",{className:"text-gray-600",children:"Upload your creative work to the gallery for everyone to see and get inspired"})]}),r.general&&(0,Nt.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,Nt.jsx)("p",{className:"text-red-600 text-sm",children:r.general})}),(0,Nt.jsx)(al,{selectedFiles:h,onFileUpload:b,onRemoveFile:y,isSubmitting:m,uploadProgress:p,errors:r}),(0,Nt.jsxs)("form",{onSubmit:I,className:"space-y-4",children:[(0,Nt.jsx)(sl,{formData:e,tagInput:t,onFormChange:a,onTagInputChange:i,onTagInputKeyDown:l,onRemoveSoftware:n,onRemoveTag:c,onShowCustomSoftwareModal:()=>{A(!0)},isSubmitting:m,errors:r}),(0,Nt.jsx)(ll,{isSubmitting:m,onSubmit:I})]}),(0,Nt.jsx)(nl,{isOpen:C,onClose:_,onAdd:e=>{s(e)&&_()}}),(0,Nt.jsx)(il,{isOpen:x,onClose:S,onConfirm:()=>{j(e)}}),(0,Nt.jsx)(Gt,{isOpen:g,title:"\ud83c\udf89 Success!",message:"Portfolio work published successfully to TAG!",onClose:k}),(0,Nt.jsx)(Bt,{isOpen:f,title:"\u26a0\ufe0f Error",message:v,onClose:N})]})},ul=()=>{const e=le(),[t,r]=(0,o.useState)("portfolio"),[a,s]=(0,o.useState)(!1),[n,i]=(0,o.useState)(""),[l,c]=(0,o.useState)(null);(0,o.useEffect)(()=>{var t,o,a;const s=new URLSearchParams(e.search).get("tab");if(s){r(s);const e=window.location.pathname;window.history.replaceState({},document.title,e)}else null===(t=e.state)||void 0===t||!t.activeUploadType||"upload-success"!==(null===(o=e.state)||void 0===o?void 0:o.from)&&"draft-edit"!==(null===(a=e.state)||void 0===a?void 0:a.from)||(r(e.state.activeUploadType),window.history.replaceState({},document.title))},[e.state,e.search]);const d=[{id:"art-market",name:"Art Market",theme:"blue",icon:(0,Nt.jsx)("svg",{className:"w-6 h-6 text-current",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})},{id:"portfolio",name:"Portfolio",theme:"blue",icon:(0,Nt.jsx)("svg",{className:"w-6 h-6 text-current",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})},{id:"collaboration",name:"Collaboration",theme:"purple",icon:(0,Nt.jsx)("svg",{className:"w-6 h-6 text-current",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})},{id:"milestones",name:"Milestones",theme:"purple",icon:(0,Nt.jsx)("svg",{className:"w-6 h-6 text-current",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 3v18m0-16h12l-2 4 2 4H6"})})},{id:"jobs",name:"Jobs",theme:"purple",icon:(0,Nt.jsx)("svg",{className:"w-6 h-6 text-current",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7a2 2 0 012-2h12a2 2 0 012 2v2H4V7zM4 9h16v10a2 2 0 01-2 2H6a2 2 0 01-2-2V9z"})})}],u=e=>{const r=t===e.id,o="blue"===e.theme,a="purple"===e.theme;if(r){if(o)return"border-tag-blue bg-blue-50 text-tag-blue ring-2 ring-tag-blue/20";if(a)return"border-tag-purple bg-purple-50 text-tag-purple ring-2 ring-tag-purple/20"}return"text-gray-600 hover:text-gray-800"},h=e=>{const r=t===e.id,o="blue"===e.theme,a="purple"===e.theme;if(r){if(o)return"text-tag-blue";if(a)return"text-tag-purple"}return"text-gray-400"};return(0,Nt.jsxs)("div",{className:"min-h-screen bg-gray-50 pt-16",children:[(0,Nt.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-10",children:[(0,Nt.jsxs)("div",{className:"text-center mb-8",children:[(0,Nt.jsx)("h1",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"What would you like to upload?"}),(0,Nt.jsx)("p",{className:"text-base text-gray-500",children:"Choose the type of content you want to share with the community"})]}),(0,Nt.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 mb-8",children:d.map(e=>(0,Nt.jsx)("button",{onClick:()=>{return t=e.id,o=e.name,void("art-market"===t||"jobs"===t?(i("".concat(o," upload is currently in testing phase and not available yet.")),s(!0),c(t)):r(t));var t,o},className:"bg-white border border-gray-200 rounded-lg px-4 py-3 text-center transition-all duration-200 hover:shadow ".concat("blue"===e.theme?"hover:border-tag-blue":"hover:border-tag-purple"," ").concat(u(e)),children:(0,Nt.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,Nt.jsx)("div",{className:h(e),children:e.icon}),(0,Nt.jsx)("span",{className:"text-sm font-medium",children:e.name})]})},e.id))}),(0,Nt.jsxs)("div",{className:"mt-8 rounded-lg p-6 ".concat("portfolio"===t||"art-market"===t?"bg-blue-50":"bg-purple-50"),children:[console.log("\ud83d\udd0d Rendering uploadType:",t),"portfolio"===t&&(0,Nt.jsx)(dl,{}),"art-market"===t&&(0,Nt.jsx)(rl,{}),"collaboration"===t&&(0,Nt.jsx)(Bi,{}),"jobs"===t&&(0,Nt.jsx)(Gi,{}),"milestones"===t&&(0,Nt.jsx)(Ki,{})]})]}),a&&(0,Nt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Nt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-sm w-full",children:[(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-red-600 mb-2",children:"Feature Under Development"}),(0,Nt.jsx)("p",{className:"text-sm text-gray-800 mb-4",children:n}),(0,Nt.jsx)("div",{className:"flex justify-end space-x-2",children:(0,Nt.jsx)("button",{onClick:()=>{s(!1),l&&(r(l),c(null))},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"OK"})})]})})]})},hl=()=>({id:"default",title:"Untitled Work",description:"No description available",category:"",date:(new Date).toLocaleDateString(),likes:0,views:0,tags:[],mainImage:"",allImages:[],author:ml()}),ml=()=>({id:"unknown",name:"Unknown Artist",role:"",avatar:"",works:0,followers:"0",following:0}),pl=e=>{let{imageUrl:t,imageAlt:r="Image",isOpen:a=!1,onClose:s,className:n=""}=e;const[i,l]=(0,o.useState)(1),[c,d]=(0,o.useState)(!1),[u,h]=(0,o.useState)({x:0,y:0}),[m,p]=(0,o.useState)({x:0,y:0}),g=(0,o.useCallback)(e=>{e.preventDefault();const t=e.deltaY>0?-.2:.2,r=Math.max(.5,Math.min(5,i+t));l(r)},[i]),f=(0,o.useCallback)(()=>{l(1),p({x:0,y:0})},[]),v=(0,o.useCallback)(e=>{i>1&&(d(!0),h({x:e.clientX-m.x,y:e.clientY-m.y}))},[i,m]),x=(0,o.useCallback)(e=>{c&&i>1&&p({x:e.clientX-u.x,y:e.clientY-u.y})},[c,i,u]),b=(0,o.useCallback)(()=>{d(!1)},[]);return(0,o.useEffect)(()=>{const e=e=>{"Escape"===e.key&&s()};return a&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[a,s]),(0,o.useEffect)(()=>{a&&(l(1),p({x:0,y:0}),d(!1))},[a]),a?(0,Nt.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm ".concat(n),onClick:s,onWheel:g,onMouseMove:x,onMouseUp:b,onMouseLeave:b,children:[(0,Nt.jsx)("button",{onClick:s,className:"absolute top-4 right-4 z-10 w-10 h-10 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white/30 transition-colors duration-200","aria-label":"Close image viewer",children:(0,Nt.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),1!==i&&(0,Nt.jsx)("button",{onClick:f,className:"absolute top-4 left-4 z-10 w-10 h-10 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white/30 transition-colors duration-200","aria-label":"Reset zoom",children:(0,Nt.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}),(0,Nt.jsx)("div",{className:"relative max-w-[90vw] max-h-[90vh] flex items-center justify-center",onClick:e=>e.stopPropagation(),onMouseDown:v,style:{cursor:i>1?c?"grabbing":"grab":"default"},children:(0,Nt.jsx)("img",{src:t,alt:r,className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl transition-transform duration-200",loading:"eager",onDoubleClick:f,style:{transform:"scale(".concat(i,") translate(").concat(m.x/i,"px, ").concat(m.y/i,"px)"),transformOrigin:"center"}})}),1!==i&&(0,Nt.jsxs)("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-white/20 backdrop-blur-sm rounded-full px-3 py-1 text-white text-sm",children:[Math.round(100*i),"%"]}),(0,Nt.jsx)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 text-white/70 text-sm",children:"Scroll to zoom \u2022 Double-click to reset \u2022 ESC to close"})]}):null},gl=e=>{let{images:t=[],workTitle:r="Work",className:a=""}=e;const[s,n]=(0,o.useState)(!1),[i,l]=(0,o.useState)(0),[c,d]=(0,o.useState)([]),[u,h]=(0,o.useState)(!0);(0,o.useEffect)(()=>{(async()=>{if(!t||0===t.length)return d([]),void h(!1);try{h(!0);const o=[];console.log("[WorkImageGallery] Processing images:",t);for(const a of t)if("string"===typeof a)if(a.startsWith("data:image/")||a.startsWith("blob:")||a.startsWith("http"))"/assets/placeholder.svg"!==a&&""!==a.trim()?(console.log("[WorkImageGallery] Using direct URL:",a.substring(0,50)+"..."),o.push(a)):console.log("[WorkImageGallery] Skipping placeholder path:",a);else{console.log("[WorkImageGallery] Converting file path to URL:",a);try{var e;const t=await(0,lr.getPortfolioImageUrl)(a);console.log("[WorkImageGallery] getPortfolioImageUrl result:",t),t.success&&null!==(e=t.data)&&void 0!==e&&e.url?(console.log("[WorkImageGallery] Successfully converted path to URL:",t.data.url.substring(0,50)+"..."),o.push(t.data.url)):(console.warn("[WorkImageGallery] Failed to convert path to URL:",a,t.error),console.log("[WorkImageGallery] Checking if image exists in IndexedDB..."))}catch(r){console.error("[WorkImageGallery] Error converting path to URL:",a,r)}}else console.log("[WorkImageGallery] Skipping non-string: ".concat(typeof a," - ").concat(a));console.log("[WorkImageGallery] Final URLs count: ".concat(o.length),o.map(e=>(null===e||void 0===e?void 0:e.substring(0,30))+"...")),d(o)}catch(o){console.error("Error loading image URLs:",o),d([])}finally{h(!1)}})()},[t]);return u?(0,Nt.jsx)("div",{className:"".concat(a),children:(0,Nt.jsx)("div",{className:"relative aspect-square bg-gray-100 rounded-lg flex items-center justify-center",children:(0,Nt.jsxs)("div",{className:"text-center text-gray-500",children:[(0,Nt.jsx)("svg",{className:"w-8 h-8 mx-auto mb-2 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,Nt.jsx)("p",{children:"Loading images..."})]})})}):c&&0!==c.length?(0,Nt.jsxs)("div",{className:"".concat(a),children:[(0,Nt.jsx)("div",{className:"space-y-4",children:c.map((e,t)=>(0,Nt.jsx)("div",{className:"relative",children:(0,Nt.jsxs)("div",{className:"relative aspect-square bg-white rounded-lg shadow-sm overflow-hidden",children:[e?(0,Nt.jsx)("img",{src:e,alt:"".concat(r," - ").concat(t+1),className:"w-full h-full object-cover cursor-pointer hover:opacity-90 transition-opacity duration-200",onClick:()=>(e=>{l(e),n(!0)})(t)}):(0,Nt.jsx)("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:(0,Nt.jsxs)("div",{className:"text-center text-gray-500",children:[(0,Nt.jsx)("svg",{className:"w-12 h-12 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,Nt.jsx)("p",{className:"text-sm",children:"Image not found"})]})}),c.length>1&&(0,Nt.jsxs)("div",{className:"absolute top-4 left-4 bg-black/50 text-white px-2 py-1 rounded text-sm",children:[t+1," / ",c.length]})]})},t))}),s&&c[i]&&(0,Nt.jsx)(pl,{imageUrl:c[i],imageAlt:"".concat(r," - ").concat(i+1),isOpen:s,onClose:()=>{n(!1)}})]}):(0,Nt.jsx)("div",{className:"".concat(a),children:(0,Nt.jsx)("div",{className:"relative aspect-square bg-gray-100 rounded-lg flex items-center justify-center",children:(0,Nt.jsxs)("div",{className:"text-center text-gray-500",children:[(0,Nt.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,Nt.jsx)("p",{children:"No images available"})]})})})},fl=e=>{let{workData:t,onBackClick:r,onImageNavigation:o,navigationState:a,className:s=""}=e;return(0,Nt.jsxs)("div",{className:"".concat(s),children:[(0,Nt.jsxs)("button",{onClick:r,className:"flex items-center text-gray-600 hover:text-gray-900 mb-6 transition-colors duration-200 relative z-10 bg-white px-4 py-2 rounded-lg shadow-sm hover:shadow-md",children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),(0,Nt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Nt.jsxs)("button",{onClick:null===a||void 0===a?void 0:a.navigateToPrevious,disabled:!(null!==a&&void 0!==a&&a.hasPrevious)&&(null===a||void 0===a?void 0:a.totalWorks)<=1,className:"flex items-center px-4 py-2 bg-white rounded-lg shadow-sm hover:shadow-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous work (\u2190)",children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Previous Work"]}),(0,Nt.jsxs)("button",{onClick:null===a||void 0===a?void 0:a.navigateToNext,disabled:!(null!==a&&void 0!==a&&a.hasNext)&&(null===a||void 0===a?void 0:a.totalWorks)<=1,className:"flex items-center px-4 py-2 bg-white rounded-lg shadow-sm hover:shadow-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Next work (\u2192)",children:["Next Work",(0,Nt.jsx)("svg",{className:"w-5 h-5 ml-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),(0,Nt.jsx)("div",{className:"mb-6",children:(0,Nt.jsx)(gl,{images:t.allImages||[t.mainImage],workTitle:t.title})})]})},vl=e=>{if(!e||"string"!==typeof e)return[];const t=e.match(/#([a-zA-Z0-9_-]{1,50})/g);if(!t)return[];const r=new Set,o=[];return t.forEach(e=>{const t=e.slice(1),a=t.toLowerCase().trim();xl(a)&&!r.has(a)&&(r.add(a),o.push({name:t,slug:a}))}),o},xl=e=>e.length>=2&&!["the","and","or","but","in","on","at","to","for","of","with","by","from","up","about","into","through","during","before","after","above","below","between","among","within","without","this","that","these","those","is","are","was","were","be","been","being","have","has","had","do","does","did","will","would","could","should","may","might","can","must","shall"].includes(e),bl=e=>{let{tag:t,onClick:r,children:o}=e;return(0,Nt.jsx)("a",{href:"/t/".concat(t.slug),onClick:e=>{r&&(e.preventDefault(),r(t))},target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline cursor-pointer",title:"View all content tagged with ".concat(t.name),children:o})},yl=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e&&0!==e.length?(0,Nt.jsx)("div",{className:"flex flex-wrap gap-2 ".concat(r),children:e.map((e,r)=>(0,Nt.jsxs)(bl,{tag:e,onClick:t,children:["#",e.name]},"".concat(e.slug,"-").concat(r)))}):null},wl=e=>{const t="flex items-center px-4 py-2 rounded-lg transition-colors duration-200";return"".concat(t,e?" bg-red-50 text-red-600":" bg-gray-100 text-gray-700 hover:bg-gray-200")},jl=e=>{let{workData:t,isLiked:r,isSaved:o,onLikeClick:a,onSaveClick:s,className:n=""}=e;return(0,Nt.jsxs)("div",{className:"bg-white rounded-lg p-6 mb-6 ".concat(n),children:[(0,Nt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Nt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Nt.jsxs)("button",{onClick:a,className:wl(r),children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 mr-2 ".concat(r?"fill-current":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),t.likes]}),(0,Nt.jsx)(zt,{isFavorited:o,itemType:"work",itemId:t.id,onToggle:s,size:"md"})]}),(0,Nt.jsxs)("div",{className:"flex items-center text-gray-500",children:[(0,Nt.jsxs)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),(i=t.views,i.toLocaleString())]})]}),(0,Nt.jsxs)("div",{className:"flex flex-wrap gap-2",children:[t.tags&&t.tags.length>0&&t.tags.map((e,t)=>{if(e.startsWith("#")){const r=vl(e);if(r.length>0)return(0,Nt.jsx)("div",{className:"inline-block",children:yl(r,null,"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium hover:bg-green-200 cursor-pointer")},"tag-".concat(t))}else{const r=e.trim();if(r){const e={name:r,slug:r.toLowerCase().replace(/\s+/g,"-")};return(0,Nt.jsx)("div",{className:"inline-block",children:yl([e],null,"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium hover:bg-green-200 cursor-pointer")},"tag-".concat(t))}}return(0,Nt.jsx)("span",{className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm font-medium",children:e},"tag-".concat(t))}),t.software&&t.software.length>0&&t.software.map((e,t)=>(0,Nt.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:e},"software-".concat(t))),(!t.tags||0===t.tags.length)&&(!t.software||0===t.software.length)&&(0,Nt.jsx)("span",{className:"text-gray-500 text-sm",children:"No tags"})]})]});var i},kl=e=>{let{parentId:t,parentAuthorName:r,draft:a,onChange:s,onSubmit:n,onCancel:i,className:l=""}=e;const[c,d]=(0,o.useState)(null),[u,h]=(0,o.useState)(!0);(0,o.useEffect)(()=>{(async()=>{try{h(!0);const e=await(0,Rr.ou)();d(e)}catch(e){console.warn("[CommentReplyForm] Failed to load avatar:",e),d(null)}finally{h(!1)}})()},[]);return(0,Nt.jsx)("div",{className:"mt-2 pl-10 ".concat(l),children:(0,Nt.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Nt.jsx)("img",{src:c||"/default-avatar.png",alt:"Your avatar",className:"w-8 h-8 rounded-full flex-shrink-0"}),(0,Nt.jsxs)("div",{className:"flex-1",children:[(0,Nt.jsx)("textarea",{value:a||"",onChange:e=>s(t,e.target.value),placeholder:"Reply to ".concat(r,"\u2026"),rows:2,className:"w-full p-2 border border-gray-300 rounded-md text-sm resize-none focus:outline-none focus:ring-2 focus:ring-tag-blue focus:border-transparent",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),n(t))}}),(0,Nt.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,Nt.jsx)("button",{className:"px-3 py-1 rounded bg-tag-blue text-white text-sm hover:bg-tag-dark-blue transition-colors duration-200",onClick:()=>n(t),children:"Post"}),(0,Nt.jsx)("button",{className:"px-3 py-1 rounded border border-gray-300 text-sm hover:bg-gray-50 transition-colors duration-200",onClick:i,children:"Cancel"})]})]})]})})},Nl=e=>{var t,r;let{reply:a,currentUser:s,onUserClick:n,onLikeClick:i,onDeleteClick:l,formatTime:c}=e;const{user:d}=Ct(),[u,h]=(0,o.useState)(null),[m,p]=(0,o.useState)(!0);(0,o.useEffect)(()=>{(async()=>{if(a.authorId)try{p(!0);const e=await ha(a.authorId);h(e)}catch(e){console.warn("[ReplyItem] Failed to get reply author info for ".concat(a.authorId,":"),e),h(null)}finally{p(!1)}else p(!1)})()},[a.authorId]);return(0,Nt.jsxs)("div",{className:"flex space-x-3",children:[(0,Nt.jsx)("img",{src:m?(null===u||void 0===u?void 0:u.avatar)||"/default-avatar.png":null!==u&&void 0!==u&&u.avatar?u.avatar:"/default-avatar.png",alt:a.authorName||"Reply author",className:"w-8 h-8 rounded-full cursor-pointer hover:opacity-80 transition-opacity duration-200",onClick:()=>n(a.authorId)}),(0,Nt.jsxs)("div",{className:"flex-1",children:[(0,Nt.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,Nt.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Nt.jsx)("span",{className:"font-medium text-gray-900 cursor-pointer hover:text-tag-blue transition-colors duration-200",onClick:()=>n(a.authorId),children:a.authorName}),(0,Nt.jsx)("span",{className:"text-sm text-gray-500",children:c(a.createdAt)})]}),(0,Nt.jsx)("p",{className:"text-gray-700",children:a.text||a.content})]}),(0,Nt.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-sm",children:[(0,Nt.jsxs)("button",{onClick:()=>i(a.id),className:"flex items-center gap-1 ".concat(null!==(t=a.likedBy)&&void 0!==t&&t.includes(null===s||void 0===s?void 0:s.id)?"text-red-500":"text-gray-500 hover:text-gray-700"),children:[(0,Nt.jsx)("svg",{className:"w-4 h-4",fill:null!==(r=a.likedBy)&&void 0!==r&&r.includes(null===s||void 0===s?void 0:s.id)?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),(0,Nt.jsx)("span",{children:a.likes||0})]}),s&&a.authorId===s.id&&(0,Nt.jsx)("button",{onClick:()=>l(a.id),className:"text-red-500 hover:text-red-700",children:"Delete"})]})]})]})},Sl=e=>{var t,r;let{comment:a,comments:s,onUserClick:n,onLikeClick:i,onReplyClick:l,onDeleteClick:c,replyingTo:d,replyDrafts:u,onStartReply:h,onCancelReply:m,onSetReplyDraft:p,onSubmitReply:g,className:f=""}=e;const{user:v}=Ct(),x=v&&a.authorId===v.id,b=(null===d||void 0===d?void 0:d.parentId)===a.id,y=(0,o.useMemo)(()=>s.filter(e=>String(e.parentId)===String(a.id)).sort((e,t)=>e.createdAt-t.createdAt),[s,a.id]),[w,j]=(0,o.useState)(null),[k,N]=(0,o.useState)(!0);(0,o.useEffect)(()=>{(async()=>{if(a.authorId)try{N(!0);const e=await ha(a.authorId);j(e)}catch(e){console.warn("[CommentItem] Failed to get author info for ".concat(a.authorId,":"),e),j(null)}finally{N(!1)}else N(!1)})()},[a.authorId]);const S=()=>k?a.authorName||"Loading...":null!==w&&void 0!==w&&w.name?w.name:a.authorName||"Unknown User",C=e=>{const t="string"===typeof e?new Date(e).getTime():e,r=new Date(t),o=new Date,a=Math.floor((o-r)/6e4);return a<1?"Just now":a<60?"".concat(a,"m ago"):a<1440?"".concat(Math.floor(a/60),"h ago"):"".concat(Math.floor(a/1440),"d ago")};return(0,Nt.jsxs)("div",{className:"flex space-x-3 ".concat(f),children:[(0,Nt.jsx)("img",{src:k?(null===w||void 0===w?void 0:w.avatar)||"/default-avatar.png":null!==w&&void 0!==w&&w.avatar?w.avatar:"/default-avatar.png",alt:S(),className:"w-10 h-10 rounded-full cursor-pointer hover:opacity-80 transition-opacity duration-200",onClick:()=>n(a.authorId)}),(0,Nt.jsxs)("div",{className:"flex-1",children:[(0,Nt.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,Nt.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Nt.jsx)("span",{className:"font-medium text-gray-900 cursor-pointer hover:text-tag-blue transition-colors duration-200",onClick:()=>n(a.authorId),children:S()}),(0,Nt.jsx)("span",{className:"text-sm text-gray-500",children:C(a.createdAt)})]}),(0,Nt.jsx)("p",{className:"text-gray-700",children:a.text||a.content||""})]}),(0,Nt.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-sm",children:[(0,Nt.jsxs)("button",{onClick:()=>i(a.id),className:"flex items-center gap-1 ".concat(null!==(t=a.likedBy)&&void 0!==t&&t.includes(null===v||void 0===v?void 0:v.id)?"text-red-500":"text-gray-500 hover:text-gray-700"),children:[(0,Nt.jsx)("svg",{className:"w-4 h-4",fill:null!==(r=a.likedBy)&&void 0!==r&&r.includes(null===v||void 0===v?void 0:v.id)?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),(0,Nt.jsx)("span",{children:a.likes||0})]}),!x&&(0,Nt.jsx)("button",{onClick:()=>h(a),className:"text-gray-500 hover:text-gray-700",children:"Reply"}),x&&(0,Nt.jsx)("button",{onClick:()=>c(a.id),className:"text-red-500 hover:text-red-700",children:"Delete"})]}),b&&(0,Nt.jsx)(kl,{parentId:a.id,parentAuthorName:S(),draft:(null===u||void 0===u?void 0:u[a.id])||"",onChange:p,onSubmit:g,onCancel:m}),y.length>0&&(0,Nt.jsx)("div",{className:"mt-3 border-l-2 border-gray-200 pl-4 space-y-3",children:y.map(e=>(0,Nt.jsx)(Nl,{reply:e,currentUser:v,onUserClick:n,onLikeClick:i,onDeleteClick:c,formatTime:C},e.id))})]})]})},Cl=e=>{let{comment:t,onCommentChange:r,onCommentSubmit:a,replyTo:s,onCancelReply:n,className:i=""}=e;const[l,c]=(0,o.useState)(null),[d,u]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{(async()=>{try{u(!0);const e=await(0,Rr.ou)();c(e)}catch(e){console.warn("[CommentInput] Failed to load avatar:",e),c(null)}finally{u(!1)}})()},[]),(0,Nt.jsxs)("div",{className:"flex items-start space-x-3 mb-6 ".concat(i),children:[(0,Nt.jsx)("img",{src:l||"/default-avatar.png",alt:"Your avatar",className:"w-10 h-10 rounded-full"}),(0,Nt.jsxs)("div",{className:"flex-1",children:[s&&(0,Nt.jsx)("div",{className:"mb-2 p-2 bg-blue-50 border border-blue-200 rounded-lg",children:(0,Nt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Nt.jsx)("span",{className:"text-sm text-blue-700",children:"Replying to a comment"}),(0,Nt.jsx)("button",{onClick:n,className:"text-blue-500 hover:text-blue-700 text-sm",children:"Cancel"})]})}),(0,Nt.jsx)("textarea",{value:t,onChange:r,placeholder:s?"Write your reply...":"Add a comment...",className:"w-full p-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-tag-blue focus:border-transparent",rows:"3"}),(0,Nt.jsx)("div",{className:"flex justify-end mt-2",children:(0,Nt.jsx)("button",{onClick:a,className:"px-4 py-2 bg-tag-blue text-white rounded-lg hover:bg-tag-dark-blue transition-colors duration-200",children:s?"Reply":"Post"})})]})]})},Al=e=>{let{comments:t,comment:r,onCommentChange:a,onCommentSubmit:s,onCommentUserClick:n,onCommentLike:i,onCommentReply:l,onCommentDelete:c,replyingTo:d,replyDrafts:u,onStartReply:h,onCancelReply:m,onSetReplyDraft:p,onSubmitReply:g,replyTo:f,onCancelReplyOld:v,className:x=""}=e;const b=(0,o.useMemo)(()=>t.filter(e=>!e.parentId).sort((e,t)=>e.createdAt-t.createdAt),[t]);return(0,Nt.jsxs)("div",{className:"bg-white rounded-lg p-6 ".concat(x),children:[(0,Nt.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Comments (",t.length,")"]}),(0,Nt.jsx)(Cl,{comment:r,onCommentChange:a,onCommentSubmit:s,replyTo:f,onCancelReply:v}),(0,Nt.jsx)("div",{className:"space-y-4",children:b.map(e=>(0,Nt.jsx)(Sl,{comment:e,comments:t,onUserClick:n,onLikeClick:i,onReplyClick:l,onDeleteClick:c,replyingTo:d,replyDrafts:u,onStartReply:h,onCancelReply:m,onSetReplyDraft:p,onSubmitReply:g},e.id))})]})},_l=e=>{let{author:t,isFollowing:r=!1,followersCount:o=0,onAuthorClick:a,onFollowClick:s,className:n=""}=e;return(0,Nt.jsxs)("div",{className:"bg-white rounded-lg p-6 mb-6 ".concat(n),children:[(0,Nt.jsxs)(gt,{to:"/artist/".concat(t.id),className:"flex items-center mb-4 cursor-pointer hover:bg-gray-50 p-2 rounded-lg transition-colors duration-200 block",children:[(0,Nt.jsx)("img",{src:t.avatar,alt:t.name,className:"w-16 h-16 rounded-full mr-4"}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 hover:text-tag-blue transition-colors duration-200",children:t.name}),(0,Nt.jsx)("p",{className:"text-sm text-gray-600",children:t.role})]})]}),(0,Nt.jsxs)("div",{className:"flex justify-between mb-4 text-sm",children:[(0,Nt.jsxs)("div",{className:"text-center",children:[(0,Nt.jsx)("div",{className:"font-semibold text-gray-900",children:t.works}),(0,Nt.jsx)("div",{className:"text-gray-500",children:"Works"})]}),(0,Nt.jsxs)("div",{className:"text-center",children:[(0,Nt.jsx)("div",{className:"font-semibold text-gray-900",children:o}),(0,Nt.jsx)("div",{className:"text-gray-500",children:"Followers"})]}),(0,Nt.jsxs)("div",{className:"text-center",children:[(0,Nt.jsx)("div",{className:"font-semibold text-gray-900",children:t.following}),(0,Nt.jsx)("div",{className:"text-gray-500",children:"Following"})]})]}),(0,Nt.jsx)("div",{className:"flex",children:(0,Nt.jsx)("button",{onClick:s,className:"w-full px-4 py-2 rounded-lg transition-colors duration-200 ".concat(r?"bg-gray-500 text-white hover:bg-gray-600":"bg-tag-blue text-white hover:bg-tag-dark-blue"),children:r?"Following":"Follow"})})]})},Il=e=>{let{workData:t,className:r=""}=e;return(0,Nt.jsxs)("div",{className:"bg-white rounded-lg p-6 mb-6 ".concat(r),children:[(0,Nt.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:t.title}),(0,Nt.jsx)("p",{className:"text-gray-600 mb-4",children:t.description}),(0,Nt.jsx)("div",{className:"space-y-2 text-sm",children:(0,Nt.jsxs)("div",{className:"flex justify-between",children:[(0,Nt.jsx)("span",{className:"text-gray-500",children:"Date:"}),(0,Nt.jsx)("span",{className:"text-gray-900",children:t.date})]})})]})},El=e=>{let{relatedWorks:t,authorName:r,onAuthorClick:o,onWorkClick:a,loading:s=!1,className:n=""}=e;return(0,Nt.jsxs)("div",{className:"bg-white rounded-lg p-6 ".concat(n),children:[(0,Nt.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 cursor-pointer hover:text-tag-blue transition-colors duration-200",onClick:o,children:["More from ",r]}),s?(0,Nt.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[1,2,3,4].map(e=>(0,Nt.jsx)("div",{className:"aspect-square rounded-lg bg-gray-200 animate-pulse"},e))}):t.length>0?(0,Nt.jsx)("div",{className:"grid grid-cols-2 gap-2",children:t.map(e=>(0,Nt.jsx)("div",{className:"aspect-square rounded-lg overflow-hidden cursor-pointer hover:opacity-80 transition-opacity duration-200",onClick:()=>a(e.id),children:(0,Nt.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-full object-cover",onError:e=>{e.target.src="https://images.unsplash.com/photo-1541961017774-22349e4a1262?w=200&h=200&fit=crop"}})},e.id))}):(0,Nt.jsx)("div",{className:"text-center py-4",children:(0,Nt.jsx)("p",{className:"text-gray-500 text-sm",children:"No other works available"})})]})},Pl=()=>{const[e,t]=(0,o.useState)(!1),[r,a]=(0,o.useState)(!1),[s,i]=(0,o.useState)(""),[l,c]=(0,o.useState)(!1),[d,u]=(0,o.useState)([]),[h,m]=(0,o.useState)(null),[p,g]=(0,o.useState)(null),[f,v]=(0,o.useState)({}),{id:x}=he(),[b,y]=(0,o.useState)(null),[w,j]=(0,o.useState)(!0),[k,N]=(0,o.useState)(null);return(0,o.useEffect)(()=>{(async()=>{if(!x)return N("No work ID provided"),void j(!1);try{j(!0),N(null);const e=await(async e=>{try{var t,r,o,a,s,n,i,l,c,d,u,h,m,p,g,f,v,x,b,y,w;console.log("[WorkDetail] Loading work data for ID: ".concat(e));const j=await yr.getWorkById(e);if(!j.success)return console.error("[WorkDetail] Failed to load work data:",j.error),null;const N=j.data;if(!N)return console.warn("[WorkDetail] Work not found with ID: ".concat(e)),null;console.log("[WorkDetail] Found work:",N);const S=(null===(t=N.author)||void 0===t?void 0:t.id)||(null===(r=N.profiles)||void 0===r?void 0:r.id)||N.userId;let C=null,A=null,_=null;if(S)try{const e=await yr.getUserWorks(S);e.success&&(_=e.data,console.log("[WorkDetail] Retrieved ".concat(_.length," works for ").concat(S)));const t=await uo(S);t.success&&(A=t.data,console.log("[WorkDetail] Retrieved profile data for ".concat(S))),C=await ha(S),console.log("[WorkDetail] Retrieved author info for ".concat(S))}catch(k){console.warn("[WorkDetail] Failed to get author info for ".concat(S,":"),k)}const I={id:N.id,title:N.title||"Untitled",description:N.description||"",category:N.category||"",date:N.createdAt?new Date(N.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Unknown",likes:124,views:1247,tags:N.tags||[],software:N.software||[],mainImage:N.mainImageUrl||N.thumbnailPath||N.imagePaths&&N.imagePaths[0]||"",allImages:N.allImages||N.imagePaths||[],author:{id:S||"unknown",name:(null===(o=C)||void 0===o?void 0:o.name)||(null===(a=N.author)||void 0===a?void 0:a.name)||(null===(s=N.profiles)||void 0===s?void 0:s.full_name)||"Unknown Artist",role:(null===(n=C)||void 0===n?void 0:n.title)||(null===(i=N.author)||void 0===i?void 0:i.role)||N.category||"",avatar:(null===(l=C)||void 0===l?void 0:l.avatar)||(null===(c=N.author)||void 0===c?void 0:c.avatar)||(null===(d=N.profiles)||void 0===d?void 0:d.avatar_url)||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face",works:(null===(u=_)||void 0===u?void 0:u.length)||(null===(h=A)||void 0===h||null===(m=h.portfolio)||void 0===m?void 0:m.length)||(null===(p=C)||void 0===p||null===(g=p.works)||void 0===g?void 0:g.length)||0,followers:(null===(f=C)||void 0===f||null===(v=f.stats)||void 0===v||null===(x=v.followers)||void 0===x?void 0:x.toString())||"0",following:(null===(b=C)||void 0===b||null===(y=b.stats)||void 0===y||null===(w=y.following)||void 0===w?void 0:w.toString())||0},relatedWorks:[]};return console.log("[WorkDetail] Transformed work data:",I),console.log("[WorkDetail] Tags data:",I.tags),I}catch(k){return console.error("[WorkDetail] Error loading work data:",k),null}})(x);e?y(e):N("Work not found")}catch(e){console.error("Error loading work data:",e),N("Failed to load work data")}finally{j(!1)}})()},[x]),(0,o.useEffect)(()=>{window.scrollTo({top:0,behavior:"auto"})},[]),(0,o.useEffect)(()=>{if(!b)return;(async()=>{const e=((e,t)=>{var r,o;const a=[null===e||void 0===e?void 0:e.mainImage,null===e||void 0===e||null===(r=e.author)||void 0===r?void 0:r.avatar,...(null===e||void 0===e||null===(o=e.relatedWorks)||void 0===o?void 0:o.map(e=>e.image))||[],...(null===t||void 0===t?void 0:t.map(e=>e.avatar))||[]].filter(e=>"string"===typeof e&&(e.startsWith("data:image/")||e.startsWith("http")||e.startsWith("blob:")));return console.log("[WorkDetail] Preloading ".concat(a.length," images")),a})(b,d);await(async e=>{try{const t=e.filter(e=>e&&""!==e.trim()&&(e.startsWith("blob:")||e.startsWith("http")||e.startsWith("data:")));return 0===t.length?(console.log("[WorkDetail] No valid image URLs to preload"),!0):(console.log("[WorkDetail] Preloading ".concat(t.length," images:"),t),await Promise.all(t.map(e=>new Promise((t,r)=>{const o=new Image;o.onload=()=>{const r=e.split("/").pop()||e.substring(0,30);console.log("[WorkDetail] Preloaded: ".concat(r)),t()},o.onerror=r=>{const o=e.split("/").pop()||e.substring(0,30);console.warn("[WorkDetail] Failed to preload: ".concat(o)),t()},o.src=e}))),!0)}catch(k){return console.error("[WorkDetail] Failed to preload images:",k),!1}})(e);c(!0)})()},[d,b]),(0,o.useEffect)(()=>{if(!x)return;(async()=>{try{const e=await ao.getWorkComments(x);e.success?u(e.data):console.error("[WorkDetail] Failed to load comments:",e.error)}catch(k){console.error("[WorkDetail] Error loading comments:",k)}})()},[x]),(0,o.useEffect)(()=>{if(null===b||void 0===b||!b.id)return;(async()=>{try{const e=await zr.checkFavoriteStatus("work",b.id);e.success&&a(e.data.isFavorited)}catch(k){console.error("Failed to check favorite status:",k)}})()},[null===b||void 0===b?void 0:b.id]),{liked:e,saved:r,comment:s,imagesLoaded:l,comments:d,workData:b,loading:w,error:k,setLiked:t,setSaved:a,setComment:i,setImagesLoaded:c,setComments:u,setReplyTo:m,replyingTo:p,replyDrafts:f,setReplyingTo:g,setReplyDrafts:v,toggleLike:()=>{t(!e)},toggleSave:()=>{a(!r)},startReply:e=>{e&&g({parentId:e.id,parentAuthorId:e.authorId,parentAuthorName:e.authorName})},cancelReply:()=>{g(null)},setReplyDraft:(e,t)=>{v(r=>(0,n.A)((0,n.A)({},r),{},{[e]:t}))},addCommentOptimistic:e=>{u(t=>[...t,e])},replaceTempComment:e=>{let{tempId:t,saved:r}=e;u(e=>e.map(e=>e.id===t?r:e))},removeTempComment:e=>{u(t=>t.filter(t=>t.id!==e))},loadComments:async()=>{if(x)try{const e=await ao.getWorkComments(x);e.success?u(e.data):console.error("[WorkDetail] Failed to reload comments:",e.error)}catch(k){console.error("[WorkDetail] Error reloading comments:",k)}},clearComment:()=>{i("")}}};function Dl(e){let{isOpen:t,onClose:r,onLoginSuccess:a}=e;const s=ue(),{login:i}=Ct(),[l,c]=(0,o.useState)({email:"",password:""}),[d,u]=(0,o.useState)(!1),[h,m]=(0,o.useState)(""),p=e=>{const{name:t,value:r}=e.target;c(e=>(0,n.A)((0,n.A)({},e),{},{[t]:r}))};return(0,Nt.jsx)(Ut,{isOpen:t,onClose:r,title:"Sign In Required",maxWidth:"max-w-sm",children:(0,Nt.jsxs)("div",{className:"space-y-4",children:[(0,Nt.jsx)("p",{className:"text-sm text-gray-600",children:"Please sign in to save favorites and access all features."}),(0,Nt.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),u(!0),m("");try{const e=await i(l.email,l.password);e.success?(console.log("[LoginModal] Login successful"),r(),a&&a()):(m(e.error||"Login failed"),console.error("[LoginModal] Login failed:",e.error))}catch(t){m("An unexpected error occurred"),console.error("[LoginModal] Login error:",t)}finally{u(!1)}},className:"space-y-4",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,Nt.jsx)("input",{type:"email",id:"email",name:"email",value:l.email,onChange:p,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your email"})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,Nt.jsx)("input",{type:"password",id:"password",name:"password",value:l.password,onChange:p,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your password"})]}),h&&(0,Nt.jsx)("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:h}),(0,Nt.jsxs)("div",{className:"flex space-x-3",children:[(0,Nt.jsx)("button",{type:"submit",disabled:d,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Signing In...":"Sign In"}),(0,Nt.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-600 hover:text-gray-800 focus:outline-none",children:"Cancel"})]})]}),(0,Nt.jsx)("div",{className:"text-center",children:(0,Nt.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",(0,Nt.jsx)("button",{type:"button",onClick:()=>{r(),s("/register")},className:"text-blue-600 hover:text-blue-800 focus:outline-none",children:"Sign up"})]})})]})})}const Tl=e=>{var t,r,a,s,n,i;let{state:l,setters:c}=e;const{goBack:d,navigateToArtist:u,navigateToWork:h}=Qo(),{user:m}=Ct(),[p,g]=(0,o.useState)(!1),[f,v]=(0,o.useState)(null),x=(0,o.useCallback)(()=>{d()},[d]),b=(0,o.useCallback)(()=>{c.toggleLike()},[c]),y=(0,o.useCallback)(async(e,t,r)=>{console.log("[Favorites] Save toggle payload:",{itemType:e,itemId:t,shouldFavorite:r});try{const o=await zr.toggleFavorite(e,t,r);if(console.log("[Favorites] Save toggle result:",o),o.needAuth)return console.log("[Favorites] Authentication required, showing login modal"),v({itemType:e,itemId:t,shouldFavorite:r}),void g(!0);o.success?(c.toggleSave(),console.log("[Favorites] Save toggle successful")):console.error("[Favorites] Save toggle failed:",o.error)}catch(o){console.error("[Favorites] Failed to toggle favorite:",o)}},[c]),w=(0,o.useCallback)(async()=>{f&&(console.log("[Favorites] Retrying save action after login"),await y(f.itemType,f.itemId,f.shouldFavorite),v(null))},[f,y]),j=(0,o.useCallback)(()=>{g(!1),v(null)},[]),k=(0,o.useCallback)(async()=>{if(l.comment.trim())if(m)try{const t=await ha(m.id),r=(null===t||void 0===t?void 0:t.name)||m.name,o=await ao.createComment(l.workData.id,m.id,r,l.comment.trim(),l.replyTo);if(o.success){if(console.log("[WorkDetail] Comment created successfully:",o.data),m.id!==l.workData.author.id)try{await Hr.l.createCommentNotification(m.id,r,l.workData.id,l.workData.title,l.workData.author.id,l.comment.trim()),console.log("[WorkDetail] Comment notification created successfully")}catch(e){console.warn("[WorkDetail] Failed to create comment notification:",e)}c.setComment(""),c.setReplyTo(null),c.loadComments()}else console.error("[WorkDetail] Failed to create comment:",o.error)}catch(t){console.error("[WorkDetail] Error creating comment:",t)}else console.warn("[WorkDetail] No current user found");else console.warn("[WorkDetail] Comment is empty")},[c,l.comment,null===(t=l.workData)||void 0===t?void 0:t.id,l.replyTo,null===(r=l.workData)||void 0===r||null===(a=r.author)||void 0===a?void 0:a.id,null===(s=l.workData)||void 0===s?void 0:s.title]),N=(0,o.useCallback)(async e=>{const t=(l.replyDrafts[e]||"").trim();if(!t)return;if(!m)return void console.warn("[WorkDetail] No current user found for reply");const r=l.comments.find(t=>t.id===e);if(!r)return void console.warn("[WorkDetail] Parent comment not found");const o=await ha(m.id),a=(null===o||void 0===o?void 0:o.name)||m.name,s="tmp_".concat(Date.now()),n={id:s,workId:r.workId,authorId:m.id,authorName:a,text:t,parentId:r.id,rootId:r.rootId||r.id,likes:0,replies:[],isDeleted:!1,createdAt:Date.now(),updatedAt:Date.now()};c.addCommentOptimistic(n);try{const o=await ao.createComment(r.workId,m.id,a,t,r.id);o.success?(c.replaceTempComment({tempId:s,saved:o.data}),c.setReplyDraft(e,""),c.cancelReply(),console.log("[WorkDetail] Reply submitted successfully")):(c.removeTempComment(s),console.error("[WorkDetail] Failed to submit reply:",o.error))}catch(i){c.removeTempComment(s),console.error("[WorkDetail] Error submitting reply:",i)}},[c,l.replyDrafts,l.comments]),S=(0,o.useCallback)(e=>{c.startReply(e)},[c]),C=(0,o.useCallback)(()=>{c.cancelReply()},[c]),A=(0,o.useCallback)((e,t)=>{c.setReplyDraft(e,t)},[c]),_=(0,o.useCallback)(e=>{c.setComment(e.target.value)},[c]),I=(0,o.useCallback)(()=>{var e,t;const r=null===(e=l.workData)||void 0===e||null===(t=e.author)||void 0===t?void 0:t.id;r?(console.log("[WorkDetail] Navigating to artist: ".concat(r)),u(r,"gallery","Works")):console.warn("[WorkDetail] No author ID found for navigation")},[u,null===(n=l.workData)||void 0===n||null===(i=n.author)||void 0===i?void 0:i.id]),E=(0,o.useCallback)(e=>{u(e)},[u]),P=(0,o.useCallback)(e=>{e&&(console.log("[WorkDetail] Navigating to related work:",e),h(e))},[h]),D=(0,o.useCallback)(e=>{console.log("Image navigation:",e)},[]),T=(0,o.useCallback)(async e=>{if(m)try{const t=await ao.likeComment(e,m.id);t.success?(console.log("[WorkDetail] Comment like toggled:",t.data),c.loadComments()):console.error("[WorkDetail] Failed to like comment:",t.error)}catch(t){console.error("[WorkDetail] Error liking comment:",t)}else console.warn("[WorkDetail] No current user found for comment like")},[c]),L=(0,o.useCallback)(e=>{c.setReplyTo(e),console.log("[WorkDetail] Reply to comment:",e)},[c]),M=(0,o.useCallback)(async e=>{if(m)try{const t=await ao.deleteComment(e,m.id);t.success?(console.log("[WorkDetail] Comment deleted successfully"),c.loadComments()):console.error("[WorkDetail] Failed to delete comment:",t.error)}catch(t){console.error("[WorkDetail] Error deleting comment:",t)}else console.warn("[WorkDetail] No current user found for comment delete")},[c]);return{handleBackClick:x,handleAuthorClick:I,handleCommentUserClick:E,handleRelatedWorkClick:P,handleLikeClick:b,handleSaveClick:y,handleCommentSubmit:k,handleCommentChange:_,handleCommentLike:T,handleCommentReply:L,handleCommentDelete:M,handleCancelReply:C,handleImageNavigation:D,handleStartReply:S,handleSubmitReply:N,handleSetReplyDraft:A,isLoginModalOpen:p,handleLoginModalClose:j,handleLoginSuccess:w,LoginModalComponent:()=>(0,Nt.jsx)(Dl,{isOpen:p,onClose:j,onLoginSuccess:w})}},Ll="tag_artwork_views",Ml="tag_user_fingerprint",Rl=()=>{let e=0;const t=[navigator.userAgent,navigator.language,screen.width+"x"+screen.height,(new Date).getTimezoneOffset()].join("|");for(let r=0;r<t.length;r++){e=(e<<5)-e+t.charCodeAt(r),e&=e}return Math.abs(e).toString(36)},Fl=()=>{try{const e=localStorage.getItem(Ll);return e?JSON.parse(e):{}}catch(e){return console.warn("Failed to get stored view data:",e),{}}},Ul=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const{userId:r=null,visitorFingerprint:o=null}=t;r&&o&&console.warn("[MockViewCount] Warning: Both userId and visitorFingerprint provided, using userId only");const a=Fl();a[e]||(a[e]={totalViews:0,userViews:[],visitorViews:[]});const s=a[e];let n=!1;return r?s.userViews.includes(r)?console.log("[MockViewCount] User already viewed: ".concat(r)):(s.userViews.push(r),s.totalViews++,n=!0,console.log("[MockViewCount] New user view recorded for user: ".concat(r))):o?s.visitorViews.includes(o)?console.log("[MockViewCount] Visitor already viewed: ".concat(o)):(s.visitorViews.push(o),s.totalViews++,n=!0,console.log("[MockViewCount] New visitor view recorded for fingerprint: ".concat(o))):console.warn("[MockViewCount] No userId or visitorFingerprint provided"),(e=>{try{localStorage.setItem(Ll,JSON.stringify(e))}catch(t){console.warn("Failed to save view data:",t)}})(a),console.log("[MockViewCount] ".concat(n?"New view recorded":"View already exists"," for artwork: ").concat(e)),{success:!0,viewCount:s.totalViews,isNewView:n}}catch(r){return console.error("[MockViewCount] Error recording view:",r),{success:!1,error:r.message}}},Ol=()=>(()=>{try{let e=localStorage.getItem(Ml);return e||(e=Rl(),localStorage.setItem(Ml,e)),e}catch(e){return console.warn("Failed to access localStorage for fingerprint:",e),Rl()}})(),zl=()=>{try{const e=document.createElement("canvas"),t=e.getContext("2d"),r=[navigator.userAgent,navigator.language,screen.width+"x"+screen.height,screen.colorDepth,(new Date).getTimezoneOffset(),navigator.hardwareConcurrency||"",navigator.deviceMemory||"",navigator.platform,navigator.cookieEnabled,navigator.doNotTrack||"",window.devicePixelRatio||"",navigator.maxTouchPoints||""];t.textBaseline="top",t.font="14px Arial",t.fillText("User fingerprint",2,2);const o=e.toDataURL();r.push(o);const a=r.join("|");return Wl(a)}catch(e){return console.warn("Failed to generate user fingerprint:",e),Wl(Date.now().toString()+Math.random().toString())}},Wl=e=>{let t=0;if(0===e.length)return t.toString();for(let r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t&=t}return Math.abs(t).toString(36)},Bl=()=>{const e="tag_user_fingerprint";try{let t=localStorage.getItem(e);return t||(t=zl(),localStorage.setItem(e,t)),t}catch(t){return console.warn("Failed to access localStorage:",t),zl()}},Gl=function(e){const{user:t}=Ct(),[r,a]=(0,o.useState)(0),[s,n]=(0,o.useState)(!1),[i,l]=(0,o.useState)(!1),c=!(null===t||void 0===t||!t.id),d=(0,o.useCallback)(async()=>{if(e)try{const t=await(0,kt.B)(),r=t?await(async e=>{try{const{data:t,error:r}=await kt.supabase.rpc("get_artwork_view_count",{p_artwork_id:e});return r?(console.error("Failed to get artwork view count:",r),{success:!1,error:r.message}):{success:!0,viewCount:("object"===typeof t&&null!==t?t.count:t)||0}}catch(t){return console.error("Error getting artwork view count:",t),{success:!1,error:t.message}}})(e):await(async e=>{try{const t=Fl()[e];return{success:!0,viewCount:t?t.totalViews:0}}catch(t){return console.error("[MockViewCount] Error getting view count:",t),{success:!1,error:t.message}}})(e);if(r.success){const e=r.count||r.viewCount||0;a(e),console.log("[ViewCount] Refreshed view count:",e,"(Mode: ".concat(t?"Supabase":"Mock",")"))}else console.error("[ViewCount] Failed to refresh view count:",r.error)}catch(t){console.error("[ViewCount] Error refreshing view count:",t)}},[e]),u=(0,o.useCallback)(async()=>{if(!e||s)return;const r=c?null===t||void 0===t?void 0:t.id:"visitor",o="hasRecorded_".concat(e,"_").concat(r);let i=!1;try{i="true"===localStorage.getItem(o)}catch(u){console.warn("[ViewCount] Failed to check recorded status:",u)}if(i)console.log("[ViewCount] Already recorded for user: ".concat(r," on artwork: ").concat(e));else try{n(!0);const s=await(0,kt.B)(),i={userId:c?t.id:null,visitorFingerprint:c?null:s?Bl():Ol(),userAgent:navigator.userAgent};c?i.visitorFingerprint=null:i.userId=null,console.log("[ViewCount] Recording view for artwork:",e,i,"(Mode: ".concat(s?"Supabase":"Mock",")")),console.log("[ViewCount] Current user info:",{isLoggedIn:c,userId:null===t||void 0===t?void 0:t.id,userName:null===t||void 0===t?void 0:t.name});const h=s?await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const{userId:r=null,visitorFingerprint:o=null,ipAddress:a=null,userAgent:s=null}=t,{data:n,error:i}=await kt.supabase.rpc("increment_artwork_views",{p_artwork_id:e,p_user_id:r,p_visitor_fingerprint:o,p_ip_address:a,p_user_agent:s});if(i)return console.error("Failed to record artwork view:",i),{success:!1,error:i.message};if(n){const e=Array.isArray(n)?n[0]:n;return{success:e.success,viewCount:e.view_count||e.count,error:e.error_message}}return{success:!1,error:"No data returned from database function"}}catch(u){return console.error("Error recording artwork view:",u),{success:!1,error:u.message}}}(e,i):await Ul(e,i);if(h.success){a(h.viewCount),l(!0);try{localStorage.setItem(o,"true"),console.log("[ViewCount] Saved recorded status for ".concat(r," on ").concat(e))}catch(u){console.warn("[ViewCount] Failed to save recorded status:",u)}console.log("[ViewCount] View recorded successfully, new count:",h.viewCount,"(Mode: ".concat(s?"Supabase":"Mock",")")),s||(e=>{try{const t=Fl()[e];return t?(console.log("[Debug] View stats for artwork: ".concat(e)),console.log("  Total views: ".concat(t.totalViews)),console.log("  User views: ".concat(t.userViews.join(", "))),console.log("  Visitor views: ".concat(t.visitorViews.join(", "))),t):void console.log("[Debug] No view data for artwork: ".concat(e))}catch(u){console.error("[Debug] Error getting view stats:",u)}})(e),setTimeout(()=>{d()},100)}else console.error("[ViewCount] Failed to record view:",h.error)}catch(u){console.error("[ViewCount] Error recording view:",u)}finally{n(!1)}},[e,c,null===t||void 0===t?void 0:t.id,d,null===t||void 0===t?void 0:t.name,s]);return(0,o.useEffect)(()=>{e&&(d(),u())},[e,u,d]),(0,o.useEffect)(()=>{l(!1),n(!1)},[e,null===t||void 0===t?void 0:t.id]),{viewCount:r,isRecording:s,hasRecorded:i,recordView:u,refreshViewCount:d}},Hl=function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const{user:s}=Ct(),[n,i]=(0,o.useState)(r),[l,c]=(0,o.useState)(!1),[d,u]=(0,o.useState)(!1),h=!(null===s||void 0===s||!s.id),m=(0,o.useCallback)(async()=>{if(e&&h&&!d)try{u(!0),console.log("[LikeCount] Toggling like for artwork:",e,"User:",s.id);const n=await Dr(e,s.id);if(n.success){var t;if(i(n.data.likes),c(n.data.liked),console.log("[LikeCount] Like toggled successfully:",n.data.liked?"Liked":"Unliked","Total likes:",n.data.likes),n.data.liked&&a&&s.id!==((null===(t=a.author)||void 0===t?void 0:t.id)||a.authorId))try{var r;const t=await uo(s.id),o=t.success&&t.data.fullName?t.data.fullName:s.name||s.username||"Unknown User";await Hr.l.createLikeNotification(s.id,o,e,a.title||"Untitled",(null===(r=a.author)||void 0===r?void 0:r.id)||a.authorId),console.log("[LikeCount] Created like notification")}catch(o){console.error("[LikeCount] Failed to create like notification:",o)}console.log("[LikeCount] Debug: Artwork ".concat(e," total likes: ").concat(n.data.likes))}else console.error("[LikeCount] Failed to toggle like:",n.error)}catch(o){console.error("[LikeCount] Error toggling like:",o)}finally{u(!1)}},[e,h,null===s||void 0===s?void 0:s.id,null===a||void 0===a?void 0:a.title,null===a||void 0===a||null===(t=a.author)||void 0===t?void 0:t.id,null===a||void 0===a?void 0:a.authorId,d,a]),p=(0,o.useCallback)(async()=>{if(e&&h)try{const t=await Tr(e,s.id);t.success?(i(t.data.likes),c(t.data.liked),console.log("[LikeCount] Refreshed like status:",t.data.liked?"Liked":"Not liked","Total likes:",t.data.likes)):console.error("[LikeCount] Failed to refresh like status:",t.error)}catch(t){console.error("[LikeCount] Error refreshing like status:",t)}},[e,h,null===s||void 0===s?void 0:s.id,null===s||void 0===s?void 0:s.name,null===s||void 0===s?void 0:s.username]),g=(0,o.useCallback)(async()=>{if(e)try{const t=await Lr(e);t.success?(i(t.data.likes),console.log("[LikeCount] Refreshed like count:",t.data.likes)):console.error("[LikeCount] Failed to refresh like count:",t.error)}catch(t){console.error("[LikeCount] Error refreshing like count:",t)}},[e]);return(0,o.useEffect)(()=>{e&&h&&p()},[e,h,p]),(0,o.useEffect)(()=>{c(!1),u(!1)},[e,null===s||void 0===s?void 0:s.id]),{likeCount:n,isLiked:l,isToggling:d,toggleLike:m,refreshLikeStatus:p,refreshLikeCount:g}},ql=e=>{const t=ue(),[r,a]=(0,o.useState)([]),[s,n]=(0,o.useState)(-1),[i,l]=(0,o.useState)(!0),[c,d]=(0,o.useState)(null),u=(0,o.useCallback)(async()=>{try{l(!0),d(null);const t=await yr.getAllPublicWorks();if(t.success&&t.data){const r=t.data.sort((e,t)=>{const r=new Date(e.createdAt||e.date||0);return new Date(t.createdAt||t.date||0)-r});a(r);const o=r.findIndex(t=>t.id===e);n(o),console.log("[WorkNavigation] Loaded ".concat(r.length," works, current index: ").concat(o))}else d("Failed to load works")}catch(t){console.error("[WorkNavigation] Error loading works:",t),d("Failed to load works")}finally{l(!1)}},[e]);(0,o.useEffect)(()=>{e&&u()},[e,u]);const h=(0,o.useCallback)(()=>{if(0===r.length||-1===s)return;let e;e=0===s?r.length-1:s-1;const o=r[e];o&&(console.log("[WorkNavigation] Navigating to previous work: ".concat(o.id)),t("/work/".concat(o.id)))},[r,s,t]),m=(0,o.useCallback)(()=>{if(0===r.length||-1===s)return;let e;e=s===r.length-1?0:s+1;const o=r[e];o&&(console.log("[WorkNavigation] Navigating to next work: ".concat(o.id)),t("/work/".concat(o.id)))},[r,s,t]);return(0,o.useEffect)(()=>{const e=e=>{"ArrowLeft"===e.key?(e.preventDefault(),h()):"ArrowRight"===e.key&&(e.preventDefault(),m())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[h,m]),{allWorks:r,currentIndex:s,loading:i,error:c,hasPrevious:r.length>0&&s>0,hasNext:r.length>0&&s<r.length-1,totalWorks:r.length,currentWorkNumber:s>=0?s+1:0,navigateToPrevious:h,navigateToNext:m,reloadWorks:u}},Vl=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;const[a,s]=(0,o.useState)([]),[n,i]=(0,o.useState)(!0),[l,c]=(0,o.useState)(null),d=(0,o.useCallback)(async()=>{if(!e)return s([]),void i(!1);try{i(!0),c(null);const o=await yr.getUserWorks(e);if(o.success&&o.data){const a=o.data.filter(e=>e.id!==t);if(0===a.length)return void s([]);const n=[...a].sort(()=>.5-Math.random()).slice(0,Math.min(r,a.length)),i=await Promise.all(n.map(async e=>{const t=e.thumbnailPath||e.imagePaths&&e.imagePaths[0]||null;let r="";if(t)try{console.log("[RelatedWorks] Converting image path: ".concat(t));const e=await(0,lr.getPortfolioImageUrl)(t);console.log("[RelatedWorks] Image conversion result:",e),e&&e.success&&e.data&&e.data.url?(r=e.data.url,console.log("[RelatedWorks] Successfully converted to: ".concat(r))):console.warn("[RelatedWorks] Invalid image result:",e)}catch(l){console.warn("[RelatedWorks] Failed to convert image path ".concat(t,":"),l)}return{id:e.id,title:e.title||"Untitled",image:r,category:e.category||""}}));s(i),console.log("[RelatedWorks] Loaded ".concat(i.length," related works for artist ").concat(e))}else c("Failed to load related works"),s([])}catch(o){console.error("[RelatedWorks] Error loading related works:",o),c("Failed to load related works"),s([])}finally{i(!1)}},[e,t,r]);return(0,o.useEffect)(()=>{d()},[d]),{relatedWorks:a,loading:n,error:l,reloadWorks:d}},Jl=()=>{var e,t,r,o,a,s,i,l,c,d,u,h,m,p;const{state:g}=zo(),f=Pl(),v=Tl({state:f,setters:{toggleLike:f.toggleLike,toggleSave:f.toggleSave,setComment:f.setComment,setReplyTo:f.setReplyTo,loadComments:f.loadComments,startReply:f.startReply,cancelReply:f.cancelReply,setReplyDraft:f.setReplyDraft,addCommentOptimistic:f.addCommentOptimistic,replaceTempComment:f.replaceTempComment,removeTempComment:f.removeTempComment}}),x=Gl((null===(e=f.workData)||void 0===e?void 0:e.id)||null,(null===(t=f.workData)||void 0===t?void 0:t.views)||0),b=Hl((null===(r=f.workData)||void 0===r?void 0:r.id)||null,(null===(o=f.workData)||void 0===o?void 0:o.likes)||0,f.workData||{}),y=Ia((null===(a=f.workData)||void 0===a||null===(s=a.author)||void 0===s?void 0:s.id)||null,(null===(i=f.workData)||void 0===i||null===(l=i.author)||void 0===l?void 0:l.followers)||0),w=Ea((null===(c=f.workData)||void 0===c||null===(d=c.author)||void 0===d?void 0:d.id)||null),j=ql((null===(u=f.workData)||void 0===u?void 0:u.id)||null),k=Vl((null===(h=f.workData)||void 0===h||null===(m=h.author)||void 0===m?void 0:m.id)||null,(null===(p=f.workData)||void 0===p?void 0:p.id)||null,4),N=(e=>{if(!e)return{isValid:!1,error:"Work data is null or undefined",fallbackData:hl()};const t=["id","title","author"].filter(t=>!e[t]);return t.length>0?{isValid:!1,error:"Missing required fields: ".concat(t.join(", ")),fallbackData:hl()}:e.author&&"object"===typeof e.author?{isValid:!0,error:null,fallbackData:null}:{isValid:!1,error:"Author data is invalid",fallbackData:hl()}})(f.workData),S=N.isValid?f.workData:N.fallbackData;return f.loading?(0,Nt.jsx)(Ht,{}):f.error?(0,Nt.jsx)("main",{className:"max-w-7xl mx-auto pt-4 px-4 bg-gray-50 min-h-screen",children:(0,Nt.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,Nt.jsxs)("div",{className:"text-center",children:[(0,Nt.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Error"}),(0,Nt.jsx)("p",{className:"text-gray-600 mb-4",children:f.error}),(0,Nt.jsx)("button",{onClick:()=>window.history.back(),className:"px-4 py-2 bg-tag-blue text-white rounded-lg hover:bg-blue-600",children:"Go Back"})]})})}):f.workData?g.isLoading||!f.imagesLoaded?(0,Nt.jsx)(Ht,{}):(0,Nt.jsx)("main",{className:"max-w-7xl mx-auto pt-4 px-4 bg-gray-50 min-h-screen",children:(0,Nt.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8 py-0",children:[(0,Nt.jsxs)("div",{className:"flex-1",children:[(0,Nt.jsx)(fl,{workData:S,onBackClick:v.handleBackClick,onImageNavigation:v.handleImageNavigation,navigationState:j}),(0,Nt.jsx)(jl,{workData:(0,n.A)((0,n.A)({},S),{},{views:x.viewCount,likes:b.likeCount}),isLiked:b.isLiked,isSaved:f.saved,onLikeClick:b.toggleLike,onSaveClick:v.handleSaveClick}),(0,Nt.jsx)(Al,{comments:f.comments,comment:f.comment,onCommentChange:v.handleCommentChange,onCommentSubmit:v.handleCommentSubmit,onCommentUserClick:v.handleCommentUserClick,onCommentLike:v.handleCommentLike,onCommentReply:v.handleCommentReply,onCommentDelete:v.handleCommentDelete,replyingTo:f.replyingTo,replyDrafts:f.replyDrafts,onStartReply:v.handleStartReply,onCancelReply:v.handleCancelReply,onSetReplyDraft:v.handleSetReplyDraft,onSubmitReply:v.handleSubmitReply,replyTo:f.replyTo,onCancelReplyOld:v.handleCancelReply})]}),(0,Nt.jsxs)("div",{className:"lg:w-80 flex-shrink-0",children:[(0,Nt.jsx)(_l,{author:(0,n.A)((0,n.A)({},S.author),{},{following:w.followingCount}),isFollowing:y.isFollowing,followersCount:y.followersCount,onAuthorClick:v.handleAuthorClick,onFollowClick:y.toggleFollow}),(0,Nt.jsx)(Il,{workData:S}),(0,Nt.jsx)(El,{relatedWorks:k.relatedWorks,authorName:S.author.name,onAuthorClick:v.handleAuthorClick,onWorkClick:v.handleRelatedWorkClick,loading:k.loading})]})]})}):(0,Nt.jsx)("main",{className:"max-w-7xl mx-auto pt-4 px-4 bg-gray-50 min-h-screen",children:(0,Nt.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,Nt.jsxs)("div",{className:"text-center",children:[(0,Nt.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Work Not Found"}),(0,Nt.jsx)("p",{className:"text-gray-600 mb-4",children:"The requested work could not be found."}),(0,Nt.jsx)("button",{onClick:()=>window.history.back(),className:"px-4 py-2 bg-tag-blue text-white rounded-lg hover:bg-blue-600",children:"Go Back"})]})})})},Zl=e=>{let{onLoginSuccess:t}=e;const[r,a]=(0,o.useState)(""),[s,n]=(0,o.useState)(""),[i,l]=(0,o.useState)(""),[c,d]=(0,o.useState)(!1),u="shuwang09",h="139680";return(0,Nt.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:(0,Nt.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md max-w-md w-full",children:[(0,Nt.jsxs)("div",{className:"text-center mb-8",children:[(0,Nt.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"\ud83d\udd10 \u7ba1\u7406\u5458\u767b\u5f55"}),(0,Nt.jsx)("p",{className:"text-gray-600",children:"\u8bf7\u8f93\u5165\u7ba1\u7406\u5458\u51ed\u636e\u4ee5\u8bbf\u95ee\u7ba1\u7406\u9762\u677f"})]}),(0,Nt.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),l(""),d(!0),await new Promise(e=>setTimeout(e,500));try{if(r===u&&s===h){const e={isAuthenticated:!0,username:r,loginTime:(new Date).toISOString(),token:"admin_auth_"+Date.now(),userAgent:navigator.userAgent,loginIP:"local",sessionId:Math.random().toString(36).substring(2)};localStorage.setItem("admin_auth_data",JSON.stringify(e)),console.log("[Admin Login] \u7ba1\u7406\u5458 ".concat(r," \u767b\u5f55\u6210\u529f - ").concat((new Date).toLocaleString())),t(e)}else l("\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef"),console.warn("[Admin Login] \u767b\u5f55\u5931\u8d25\u5c1d\u8bd5 - \u7528\u6237\u540d: ".concat(r," - ").concat((new Date).toLocaleString()))}catch(i){l("\u767b\u5f55\u8fc7\u7a0b\u4e2d\u53d1\u751f\u9519\u8bef"),console.error("[Admin Login] \u767b\u5f55\u9519\u8bef:",i)}finally{d(!1)}},className:"space-y-6",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2",children:"\u7528\u6237\u540d"}),(0,Nt.jsx)("input",{id:"username",type:"text",value:r,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",required:!0})]}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"\u5bc6\u7801"}),(0,Nt.jsx)("input",{id:"password",type:"password",value:s,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",required:!0})]}),i&&(0,Nt.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:(0,Nt.jsx)("p",{className:"text-red-600 text-sm",children:i})}),(0,Nt.jsx)("button",{type:"submit",disabled:c,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c?(0,Nt.jsxs)("div",{className:"flex items-center justify-center",children:[(0,Nt.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"\u767b\u5f55\u4e2d..."]}):"\u767b\u5f55"})]}),(0,Nt.jsx)("div",{className:"mt-6 text-center",children:(0,Nt.jsx)("p",{className:"text-xs text-gray-500",children:"\u26a0\ufe0f \u6b64\u9875\u9762\u4ec5\u4f9b\u7ba1\u7406\u5458\u4f7f\u7528\uff0c\u8bf7\u52ff\u6cc4\u9732\u51ed\u636e"})})]})})},Kl=e=>{let{isOpen:t,onClose:r,onConfirm:o,title:a,message:s,confirmText:n="\u786e\u8ba4",cancelText:i="\u53d6\u6d88",type:l="danger"}=e;if(!t)return null;const c=(()=>{switch(l){case"danger":return{icon:"\u26a0\ufe0f",bgColor:"bg-red-50",borderColor:"border-red-200",iconColor:"text-red-600",buttonColor:"bg-red-600 hover:bg-red-700"};case"warning":return{icon:"\u26a0\ufe0f",bgColor:"bg-yellow-50",borderColor:"border-yellow-200",iconColor:"text-yellow-600",buttonColor:"bg-yellow-600 hover:bg-yellow-700"};case"info":return{icon:"\u2139\ufe0f",bgColor:"bg-blue-50",borderColor:"border-blue-200",iconColor:"text-blue-600",buttonColor:"bg-blue-600 hover:bg-blue-700"};default:return{icon:"\u2753",bgColor:"bg-gray-50",borderColor:"border-gray-200",iconColor:"text-gray-600",buttonColor:"bg-gray-600 hover:bg-gray-700"}}})();return(0,Nt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e=>{e.target===e.currentTarget&&r()},children:(0,Nt.jsxs)("div",{className:"".concat(c.bgColor," border ").concat(c.borderColor," rounded-lg shadow-xl max-w-md w-full mx-4"),children:[(0,Nt.jsxs)("div",{className:"flex items-center p-4 border-b border-gray-200",children:[(0,Nt.jsx)("span",{className:"text-2xl mr-3 ".concat(c.iconColor),children:c.icon}),(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:a})]}),(0,Nt.jsx)("div",{className:"p-4",children:(0,Nt.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:s})}),(0,Nt.jsxs)("div",{className:"flex justify-end space-x-3 p-4 border-t border-gray-200",children:[(0,Nt.jsx)("button",{onClick:()=>{r()},className:"px-4 py-2 text-gray-700 bg-gray-200 hover:bg-gray-300 rounded transition-colors",children:i}),(0,Nt.jsx)("button",{onClick:()=>{o(),r()},className:"px-4 py-2 text-white ".concat(c.buttonColor," rounded transition-colors"),children:n})]})]})})},Yl=e=>{let{authData:t,onLogout:r}=e;return(0,Nt.jsx)("div",{className:"bg-red-600 text-white p-4",children:(0,Nt.jsxs)("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("h1",{className:"text-2xl font-bold",children:"\ud83d\udd27 \u8d85\u7ea7\u7ba1\u7406\u5458\u6d4b\u8bd5\u9762\u677f"}),(0,Nt.jsx)("p",{className:"text-red-100",children:"\u5177\u6709\u6700\u9ad8\u6743\u9650\u7684\u6570\u636e\u7ba1\u7406\u5de5\u5177"})]}),(0,Nt.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Nt.jsxs)("span",{className:"text-red-100",children:["\u6b22\u8fce\uff0c",(null===t||void 0===t?void 0:t.username)||"\u7ba1\u7406\u5458"]}),(0,Nt.jsx)("button",{onClick:r,className:"bg-red-700 hover:bg-red-800 text-white px-4 py-2 rounded transition-colors",children:"\ud83d\udeaa \u9000\u51fa\u767b\u5f55"})]})]})})},Ql=e=>{let{selectedItems:t,sortedItems:r,toggleSelectAll:o,handleDeleteSelected:a}=e;return(0,Nt.jsx)("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:(0,Nt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Nt.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Nt.jsxs)("label",{className:"flex items-center",children:[(0,Nt.jsx)("input",{type:"checkbox",checked:t.length===r.length&&r.length>0,onChange:o,className:"mr-2"}),"\u5168\u9009"]}),(0,Nt.jsxs)("span",{className:"text-sm text-gray-600",children:["\u5df2\u9009\u62e9 ",t.length," \u9879"]})]}),(0,Nt.jsxs)("button",{onClick:a,disabled:0===t.length,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:["\ud83d\uddd1\ufe0f \u5220\u9664\u9009\u4e2d (",t.length,")"]})]})})},$l=e=>{let{items:t,selectedItems:r,toggleItemSelection:o,viewMode:a}=e;return 0===t.length?(0,Nt.jsx)("div",{className:"p-8 text-center text-gray-500",children:"\u6ca1\u6709\u627e\u5230\u5339\u914d\u7684\u9879\u76ee"}):"table"===a?(0,Nt.jsx)("div",{className:"overflow-x-auto",children:(0,Nt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Nt.jsx)("thead",{className:"bg-gray-50",children:(0,Nt.jsxs)("tr",{children:[(0,Nt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u9009\u62e9"}),(0,Nt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u6807\u9898"}),(0,Nt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u521b\u5efa\u8005"}),(0,Nt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u521b\u5efa\u65f6\u95f4"}),(0,Nt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u5927\u5c0f"})]})}),(0,Nt.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,Nt.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Nt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Nt.jsx)("input",{type:"checkbox",checked:r.includes(e.id),onChange:()=>o(e.id),className:"mr-2"})}),(0,Nt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.title}),(0,Nt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.creator}),(0,Nt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.createdAt}),(0,Nt.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.size," B"]})]},e.id))})]})}):(0,Nt.jsx)("div",{className:"divide-y divide-gray-200",children:t.map(e=>(0,Nt.jsxs)("div",{className:"p-4 hover:bg-gray-50 flex items-center space-x-4",children:[(0,Nt.jsx)("input",{type:"checkbox",checked:r.includes(e.id),onChange:()=>o(e.id),className:"mr-2"}),(0,Nt.jsx)("div",{className:"flex-1 min-w-0",children:(0,Nt.jsx)("div",{className:"flex items-center justify-between",children:(0,Nt.jsxs)("div",{className:"flex-1",children:[(0,Nt.jsx)("h4",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),(0,Nt.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[(0,Nt.jsxs)("span",{children:["\u521b\u5efa\u8005: ",e.creator]}),(0,Nt.jsxs)("span",{children:["\u65f6\u95f4: ",e.createdAt]}),(0,Nt.jsxs)("span",{children:["\u5927\u5c0f: ",e.size," B"]})]})]})})})]},e.id))})},Xl=e=>{let{dataType:t,totalItems:r,searchTerm:o,setSearchTerm:a,sortBy:s,setSortBy:n,sortOrder:i,toggleSortOrder:l,viewMode:c,toggleViewMode:d}=e;return(0,Nt.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,Nt.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,Nt.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:(()=>{switch(t){case"collaborations":return"\u534f\u4f5c\u9879\u76ee\u6570\u636e\u7ba1\u7406";case"portfolios":return"\u4f5c\u54c1\u6570\u636e\u7ba1\u7406";case"comments":return"\u8bc4\u8bba\u6570\u636e\u7ba1\u7406";case"notifications":return"\u901a\u77e5\u6570\u636e\u7ba1\u7406";case"likes":return"\u70b9\u8d5e\u6570\u636e\u7ba1\u7406";case"views":return"\u6d4f\u89c8\u7edf\u8ba1\u6570\u636e\u7ba1\u7406";case"drafts":return"\u534f\u4f5c\u8349\u7a3f\u6570\u636e\u7ba1\u7406";default:return"\u6570\u636e\u7ba1\u7406"}})()}),(0,Nt.jsxs)("span",{className:"text-sm text-gray-500",children:["\u5171 ",r," \u4e2a\u9879\u76ee"]})]}),(0,Nt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Nt.jsx)("input",{type:"text",placeholder:"\u641c\u7d22\u9879\u76ee...",value:o,onChange:e=>a(e.target.value),className:"px-3 py-1 border border-gray-300 rounded text-sm"}),(0,Nt.jsxs)("select",{value:s,onChange:e=>n(e.target.value),className:"px-3 py-1 border border-gray-300 rounded text-sm",children:[(0,Nt.jsx)("option",{value:"title",children:"\u6309\u6807\u9898"}),(0,Nt.jsx)("option",{value:"creator",children:"\u6309\u521b\u5efa\u8005"}),(0,Nt.jsx)("option",{value:"createdAt",children:"\u6309\u65f6\u95f4"}),(0,Nt.jsx)("option",{value:"size",children:"\u6309\u5927\u5c0f"})]}),(0,Nt.jsx)("button",{onClick:l,className:"px-3 py-1 border border-gray-300 rounded text-sm hover:bg-gray-50",children:"asc"===i?"\u2191":"\u2193"}),(0,Nt.jsx)("button",{onClick:d,className:"px-3 py-1 border border-gray-300 rounded text-sm hover:bg-gray-50",children:"list"===c?"\ud83d\udccb \u8868\u683c":"\ud83d\udcdd \u5217\u8868"})]})]})})},ec=(e,t,r)=>{var o,a,s,n,i,l;const c={title:"\u9879\u76ee ".concat(r+1),creator:"\u672a\u77e5",createdAt:"\u672a\u77e5",size:0};if(!e||"object"!==typeof e)return c;switch(t){case"collaborations":return{title:e.title||e.name||e.collaborationTitle||"\u534f\u4f5c\u9879\u76ee ".concat(r+1),creator:(null===(o=e.author)||void 0===o?void 0:o.name)||(null===(a=e.author)||void 0===a?void 0:a.id)||e.creator||e.owner||e.userId||e.createdBy||"\u672a\u77e5",createdAt:e.createdAt||e.createdDate||e.date||"\u672a\u77e5",size:JSON.stringify(e).length};case"portfolios":return{title:e.title||e.name||e.workTitle||"\u4f5c\u54c1 ".concat(r+1),creator:(null===(s=e.author)||void 0===s?void 0:s.name)||e.artist||e.creator||e.userId||"\u672a\u77e5",createdAt:e.createdAt||e.uploadDate||e.date||"\u672a\u77e5",size:JSON.stringify(e).length};case"comments":return{title:e.text||e.content?(e.text||e.content).substring(0,30)+"...":"\u8bc4\u8bba ".concat(r+1),creator:e.authorName||(null===(n=e.author)||void 0===n?void 0:n.name)||e.author||e.userId||e.commenter||"\u672a\u77e5",createdAt:e.createdAt||e.commentDate||e.date||"\u672a\u77e5",size:JSON.stringify(e).length};case"notifications":return{title:e.title||e.message||e.content||"\u901a\u77e5 ".concat(r+1),creator:e.senderName||(null===(i=e.sender)||void 0===i?void 0:i.name)||e.senderId||e.userId||"\u672a\u77e5",createdAt:e.createdAt||e.date||"\u672a\u77e5",size:JSON.stringify(e).length};case"likes":return{title:e.workTitle||e.title||e.artworkTitle||"\u70b9\u8d5e\u8bb0\u5f55 ".concat(r+1),creator:e.userName||(null===(l=e.user)||void 0===l?void 0:l.name)||e.userId||e.likerId||"\u672a\u77e5",createdAt:e.createdAt||e.likedAt||e.date||"\u672a\u77e5",size:JSON.stringify(e).length};case"views":var d,u;return"object"===typeof e&&void 0!==e.totalViews?{title:"\u4f5c\u54c1\u6d4f\u89c8\u7edf\u8ba1 (ID: ".concat(r+1,")"),creator:"\u603b\u6d4f\u89c8\u91cf: ".concat(e.totalViews),createdAt:"\u767b\u5f55\u7528\u6237: ".concat((null===(d=e.userViews)||void 0===d?void 0:d.length)||0,", \u8bbf\u5ba2: ").concat((null===(u=e.visitorViews)||void 0===u?void 0:u.length)||0),size:JSON.stringify(e).length}:{title:"\u6d4f\u89c8\u8bb0\u5f55 ".concat(r+1),creator:"\u7edf\u8ba1\u6570\u636e",createdAt:"N/A",size:JSON.stringify(e).length};case"drafts":var h;return{title:e.title||e.draftTitle||e.name||e.projectTitle||e.collaborationTitle||"\u8349\u7a3f ".concat(r+1),creator:e.userId||(null===(h=e.author)||void 0===h?void 0:h.name)||e.author||e.creator||e.owner||"\u672a\u77e5",createdAt:e.createdAt||e.updatedAt||e.date||"\u672a\u77e5",size:JSON.stringify(e).length};default:return{title:e.title||e.name||"\u9879\u76ee ".concat(r+1),creator:e.creator||e.author||"\u672a\u77e5",createdAt:e.createdAt||e.date||"\u672a\u77e5",size:JSON.stringify(e).length}}},tc=e=>{const[t,r]=(0,o.useState)([]),[a,s]=(0,o.useState)(!0),[i,l]=(0,o.useState)(null),c=(0,o.useCallback)(()=>{try{s(!0),l(null);const t=(e=>{const t=Object.keys(localStorage);let r=[];switch(e){case"collaborations":r=t.filter(e=>e.toLowerCase().includes("collaboration")&&!e.includes("draft"));break;case"portfolios":r=t.filter(e=>e.startsWith("portfolio_"));break;case"comments":r=t.filter(e=>e.includes("comment"));break;case"notifications":r=t.filter(e=>e.includes("notification"));break;case"likes":r=t.filter(e=>e.includes("like"));break;case"views":r=t.filter(e=>e.includes("view"));break;case"drafts":r=t.filter(e=>e.includes("draft"));break;default:r=t}return r})(e),o=((e,t)=>e.map(e=>{const r=localStorage.getItem(e);let o=null,a=0,s="",l=[];try{if(o=JSON.parse(r),Array.isArray(o))a=o.length,s="\u6570\u7ec4\uff0c\u5305\u542b ".concat(a," \u9879"),l=o.map((r,o)=>{const a=ec(r,t,o);return(0,n.A)((0,n.A)({id:r.id||r.collaborationId||"item_".concat(o),groupKey:e},a),{},{rawData:r})});else if("object"===typeof o)if(a=Object.keys(o).length,s="\u5bf9\u8c61\uff0c\u5305\u542b ".concat(a," \u4e2a\u5c5e\u6027"),"drafts"===t&&e.includes("draft")){const r=[];Object.entries(o).forEach(o=>{let[a,s]=o;Array.isArray(s)&&s.forEach((o,s)=>{const i=ec(o,t,s);r.push((0,n.A)((0,n.A)({id:o.id||"draft_".concat(a,"_").concat(s),groupKey:e},i),{},{rawData:o,userId:a,title:"".concat(i.title," (\u7528\u6237: ").concat(a,")")}))})}),l=r}else l=Object.entries(o).map((r,o)=>{let[a,s]=r;const i=ec(s,t,o);return(0,n.A)((0,n.A)({id:a||"item_".concat(o),groupKey:e},i),{},{rawData:s})});else s="\u7b80\u5355\u6570\u636e: ".concat(typeof o),l=[{id:e,groupKey:e,title:e,creator:"\u7cfb\u7edf",createdAt:"\u672a\u77e5",size:JSON.stringify(o).length,rawData:o}]}catch(i){console.error("\u89e3\u6790\u6570\u636e\u5931\u8d25:",e,i),s="\u89e3\u6790\u5931\u8d25",l=[{id:e,groupKey:e,title:e,creator:"\u89e3\u6790\u5931\u8d25",createdAt:"\u672a\u77e5",size:0,rawData:null}]}return{key:e,preview:s,itemCount:a,items:l}}))(t,e);r(o)}catch(t){console.error("\u52a0\u8f7d\u6570\u636e\u5217\u8868\u5931\u8d25:",t),l(t.message)}finally{s(!1)}},[e]),d=(0,o.useCallback)(()=>{c()},[c]);return(0,o.useEffect)(()=>{c()},[c]),{dataList:t,loading:a,error:i,reloadData:d}},rc=e=>{let{dataType:t,onDeleteSelected:r}=e;const{dataList:a,loading:s,error:n,reloadData:i}=tc(t),{searchTerm:l,setSearchTerm:c,sortBy:d,setSortBy:u,sortOrder:h,toggleSortOrder:m,viewMode:p,toggleViewMode:g,allItems:f,sortedItems:v}=(e=>{const[t,r]=(0,o.useState)(""),[a,s]=(0,o.useState)("title"),[n,i]=(0,o.useState)("asc"),[l,c]=(0,o.useState)("list"),d=(0,o.useMemo)(()=>e.flatMap(e=>e.items||[]),[e]),u=(0,o.useMemo)(()=>{let e=d;if(t.trim()){const r=t.toLowerCase();e=e.filter(e=>{var t,o,a;return(null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(r))||(null===(o=e.creator)||void 0===o?void 0:o.toLowerCase().includes(r))||(null===(a=e.createdAt)||void 0===a?void 0:a.toLowerCase().includes(r))})}return e.sort((e,t)=>{let r=e[a],o=t[a];return"size"===a?(r=parseInt(r)||0,o=parseInt(o)||0):(r=String(r||"").toLowerCase(),o=String(o||"").toLowerCase()),"asc"===n?r>o?1:-1:r<o?1:-1}),e},[d,t,a,n]);return{searchTerm:t,setSearchTerm:r,sortBy:a,setSortBy:s,sortOrder:n,setSortOrder:i,viewMode:l,setViewMode:c,allItems:d,sortedItems:u,toggleSortOrder:()=>{i(e=>"asc"===e?"desc":"asc")},toggleViewMode:()=>{c(e=>"list"===e?"table":"list")}}})(a),{selectedItems:x,showConfirmDialog:b,toggleItemSelection:y,toggleSelectAll:w,handleDeleteSelected:j,confirmDelete:k,cancelDelete:N}=((e,t,r)=>{const[a,s]=(0,o.useState)([]),[i,l]=(0,o.useState)(!1),c=(0,o.useCallback)(e=>{s(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[]),d=(0,o.useCallback)(()=>{a.length===e.length&&e.length>0?s([]):s(e.map(e=>e.id))},[a.length,e]),u=(0,o.useCallback)(()=>{a.length>0&&l(!0)},[a.length]),h=(0,o.useCallback)(()=>{a.length>0&&(a.map(t=>({groupKey:e.find(e=>e.id===t).groupKey,itemId:t})).forEach(e=>{let{groupKey:t,itemId:r}=e;try{const e=JSON.parse(localStorage.getItem(t));if(t.includes("draft")&&"object"===typeof e){let o=!1;Object.keys(e).forEach(t=>{const a=e[t];if(Array.isArray(a)){const s=a.length,n=a.filter(e=>e.id!==r);n.length<s&&(e[t]=n,o=!0,console.log("\u5220\u9664\u4e86\u7528\u6237 ".concat(t," \u7684\u8349\u7a3f ").concat(r)))}}),o&&localStorage.setItem(t,JSON.stringify(e))}else if(Array.isArray(e)){const o=e.filter(e=>(e.id||e.collaborationId)!==r);localStorage.setItem(t,JSON.stringify(o))}}catch(n){console.error("Error deleting item:",n)}}),r&&r(),s([]),t&&t(a.length)),l(!1)},[a,t,r,e]),m=(0,o.useCallback)(()=>{l(!1)},[]),p=(0,o.useCallback)(()=>{s([])},[]);return{selectedItems:a,showConfirmDialog:i,toggleItemSelection:c,toggleSelectAll:d,handleDeleteSelected:u,confirmDelete:h,cancelDelete:m,clearSelection:p}})(v,r,i);return s?(0,Nt.jsx)("div",{className:"bg-white rounded-lg shadow",children:(0,Nt.jsx)("div",{className:"p-8 text-center text-gray-500",children:"\u52a0\u8f7d\u4e2d..."})}):n?(0,Nt.jsx)("div",{className:"bg-white rounded-lg shadow",children:(0,Nt.jsxs)("div",{className:"p-8 text-center text-red-500",children:["\u52a0\u8f7d\u5931\u8d25: ",n]})}):(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,Nt.jsx)(Xl,{dataType:t,totalItems:f.length,searchTerm:l,setSearchTerm:c,sortBy:d,setSortBy:u,sortOrder:h,toggleSortOrder:m,viewMode:p,toggleViewMode:g}),(0,Nt.jsx)(Ql,{selectedItems:x,sortedItems:v,toggleSelectAll:w,handleDeleteSelected:j}),(0,Nt.jsx)("div",{className:"max-h-96 overflow-y-auto",children:(0,Nt.jsx)($l,{items:v,selectedItems:x,toggleItemSelection:y,viewMode:p})}),(0,Nt.jsx)(Kl,{isOpen:b,onClose:N,onConfirm:k,title:"\u786e\u8ba4\u5220\u9664",message:"\u786e\u5b9a\u8981\u5220\u9664\u9009\u4e2d\u7684 ".concat(x.length," \u4e2a\u9879\u76ee\u5417\uff1f\n\n\u6b64\u64cd\u4f5c\u4e0d\u53ef\u64a4\u9500\uff01"),confirmText:"\u786e\u8ba4\u5220\u9664",cancelText:"\u53d6\u6d88",type:"danger"})]})},oc=e=>{let{showDataManager:t,currentDataType:r,onClose:o,onDeleteSelected:a}=e;if(!t)return null;return(0,Nt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[(0,Nt.jsxs)("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[(0,Nt.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:(()=>{switch(r){case"collaborations":return"\u534f\u4f5c\u9879\u76ee\u6570\u636e\u7ba1\u7406";case"portfolios":return"\u4f5c\u54c1\u6570\u636e\u7ba1\u7406";case"comments":return"\u8bc4\u8bba\u6570\u636e\u7ba1\u7406";case"notifications":return"\u901a\u77e5\u6570\u636e\u7ba1\u7406";case"likes":return"\u70b9\u8d5e\u6570\u636e\u7ba1\u7406";case"views":return"\u6d4f\u89c8\u7edf\u8ba1\u6570\u636e\u7ba1\u7406";case"drafts":return"\u534f\u4f5c\u8349\u7a3f\u6570\u636e\u7ba1\u7406";default:return"\u6570\u636e\u7ba1\u7406"}})()}),(0,Nt.jsx)("button",{onClick:o,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\xd7"})]}),(0,Nt.jsx)("div",{className:"p-4 overflow-y-auto max-h-[calc(90vh-80px)]",children:(0,Nt.jsx)(rc,{dataType:r,onDeleteSelected:a})})]})})},ac=e=>{let{dataOverview:t}=e;return(0,Nt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,Nt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"\u603b\u6570\u636e\u9879"}),(0,Nt.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:t.totalKeys||0})]}),(0,Nt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"\u4f5c\u54c1\u96c6"}),(0,Nt.jsx)("p",{className:"text-3xl font-bold text-green-600",children:t.portfolios||0})]}),(0,Nt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"\u534f\u4f5c\u9879\u76ee"}),(0,Nt.jsx)("p",{className:"text-3xl font-bold text-purple-600",children:t.collaborations||0})]}),(0,Nt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"\u5176\u4ed6\u6570\u636e"}),(0,Nt.jsx)("p",{className:"text-3xl font-bold text-orange-600",children:t.other||0})]})]})},sc=e=>{let{openDataManager:t}=e;return(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow mb-8",children:[(0,Nt.jsxs)("div",{className:"p-6 border-b",children:[(0,Nt.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"\u8be6\u7ec6\u6570\u636e\u7ba1\u7406"}),(0,Nt.jsx)("p",{className:"text-gray-600 mt-2",children:"\u67e5\u770b\u548c\u9009\u62e9\u6027\u5220\u9664\u7279\u5b9a\u6570\u636e\u9879"})]}),(0,Nt.jsx)("div",{className:"p-6",children:(0,Nt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,Nt.jsx)("button",{className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded transition-colors",onClick:()=>t("collaborations"),children:"\ud83d\udccb \u7ba1\u7406\u534f\u4f5c\u9879\u76ee\u6570\u636e"}),(0,Nt.jsx)("button",{className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded transition-colors",onClick:()=>t("portfolios"),children:"\ud83d\udccb \u7ba1\u7406\u4f5c\u54c1\u6570\u636e"}),(0,Nt.jsx)("button",{className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded transition-colors",onClick:()=>t("comments"),children:"\ud83d\udccb \u7ba1\u7406\u8bc4\u8bba\u6570\u636e"}),(0,Nt.jsx)("button",{className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded transition-colors",onClick:()=>t("notifications"),children:"\ud83d\udccb \u7ba1\u7406\u901a\u77e5\u6570\u636e"}),(0,Nt.jsx)("button",{className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded transition-colors",onClick:()=>t("likes"),children:"\ud83d\udccb \u7ba1\u7406\u70b9\u8d5e\u6570\u636e"}),(0,Nt.jsx)("button",{className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded transition-colors",onClick:()=>t("views"),children:"\ud83d\udccb \u7ba1\u7406\u6d4f\u89c8\u8bb0\u5f55\u6570\u636e"}),(0,Nt.jsx)("button",{className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded transition-colors",onClick:()=>t("drafts"),children:"\ud83d\udccb \u7ba1\u7406\u534f\u4f5c\u8349\u7a3f\u6570\u636e"})]})})]})},nc=async()=>{try{const e=["mock_collaborations","mock_collaboration_applications","mock_collaboration_likes","mock_collaboration_views","mock_collaboration_favorites","tag.collaboration_requests"];let t=0;e.forEach(e=>{localStorage.getItem(e)&&(localStorage.removeItem(e),t++)});const r=Object.keys(localStorage);return r.filter(t=>t.toLowerCase().includes("collaboration")&&!e.includes(t)).forEach(e=>{localStorage.removeItem(e),t++}),{success:!0,clearedCount:t,message:"\u6210\u529f\u6e05\u7406 ".concat(t," \u4e2aCollaborations\u76f8\u5173\u6570\u636e\u9879")}}catch(e){return console.error("Error clearing collaborations:",e),{success:!1,error:e.message}}},ic=async()=>{try{const e=Object.keys(localStorage).filter(e=>e.startsWith("portfolio_"));let t=0;return e.forEach(e=>{localStorage.removeItem(e),t++}),{success:!0,clearedCount:t,message:"\u6210\u529f\u6e05\u7406 ".concat(t," \u4e2a\u4f5c\u54c1\u6570\u636e\u9879")}}catch(e){return console.error("Error clearing portfolios:",e),{success:!1,error:e.message}}},lc=async()=>{try{const e=Object.keys(localStorage).filter(e=>e.includes("comment"));let t=0;return e.forEach(e=>{localStorage.removeItem(e),t++}),{success:!0,clearedCount:t,message:"\u6210\u529f\u6e05\u7406 ".concat(t," \u4e2a\u8bc4\u8bba\u6570\u636e\u9879")}}catch(e){return console.error("Error clearing comments:",e),{success:!1,error:e.message}}},cc=async()=>{try{const e=Object.keys(localStorage).filter(e=>e.includes("notification"));let t=0;return e.forEach(e=>{localStorage.removeItem(e),t++}),{success:!0,clearedCount:t,message:"\u6210\u529f\u6e05\u7406 ".concat(t," \u4e2a\u901a\u77e5\u6570\u636e\u9879")}}catch(e){return console.error("Error clearing notifications:",e),{success:!1,error:e.message}}},dc=async()=>{try{const e=Object.keys(localStorage).filter(e=>e.includes("like"));let t=0;return e.forEach(e=>{localStorage.removeItem(e),t++}),{success:!0,clearedCount:t,message:"\u6210\u529f\u6e05\u7406 ".concat(t," \u4e2a\u70b9\u8d5e\u6570\u636e\u9879")}}catch(e){return console.error("Error clearing likes:",e),{success:!1,error:e.message}}},uc=async()=>{try{const e=Object.keys(localStorage).filter(e=>e.includes("view"));let t=0;return e.forEach(e=>{localStorage.removeItem(e),t++}),{success:!0,clearedCount:t,message:"\u6210\u529f\u6e05\u7406 ".concat(t," \u4e2a\u6d4f\u89c8\u8bb0\u5f55\u6570\u636e\u9879")}}catch(e){return console.error("Error clearing views:",e),{success:!1,error:e.message}}},hc=async e=>{try{const t=Object.keys(localStorage).filter(t=>t.includes(e)||t.startsWith("portfolio_".concat(e)));let r=0;return t.forEach(e=>{localStorage.removeItem(e),r++}),{success:!0,clearedCount:r,message:"\u6210\u529f\u6e05\u7406\u7528\u6237 ".concat(e," \u7684 ").concat(r," \u4e2a\u6570\u636e\u9879")}}catch(t){return console.error("Error clearing user data:",t),{success:!1,error:t.message}}},mc=async()=>{try{const e=Object.keys(localStorage).filter(e=>e.startsWith("tag.")||e.startsWith("user_")||e.startsWith("artist_")||e.startsWith("portfolio_")||e.startsWith("tag_favorites")||e.startsWith("tag_follows")||e.startsWith("tag_service_data")||e.includes("comment")||e.includes("notification")||e.includes("view")||e.includes("like")||e.includes("review")||e.includes("collaboration")||e.includes("avatar")||e.includes("mock_"));let t=0;return e.forEach(e=>{localStorage.removeItem(e),t++}),{success:!0,clearedCount:t,message:"\u6210\u529f\u6e05\u7406 ".concat(t," \u4e2aTAG\u76f8\u5173\u6570\u636e\u9879")}}catch(e){return console.error("Error clearing all TAG data:",e),{success:!1,error:e.message}}},pc=e=>{let{isOperating:t,showConfirm:r,openDataManager:o}=e;return(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow mb-8",children:[(0,Nt.jsx)("div",{className:"p-6 border-b",children:(0,Nt.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"\u6279\u91cf\u6e05\u7406\u529f\u80fd"})}),(0,Nt.jsxs)("div",{className:"p-6",children:[(0,Nt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,Nt.jsx)("button",{className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded transition-colors disabled:opacity-50",disabled:t,onClick:()=>r(nc,"\u6e05\u7406\u6240\u6709Collaborations","\u786e\u5b9a\u8981\u5220\u9664\u6240\u6709\u534f\u4f5c\u9879\u76ee\u6570\u636e\u5417\uff1f\n\n\u6b64\u64cd\u4f5c\u5c06\u5220\u9664\u6240\u6709\u534f\u4f5c\u9879\u76ee\u3001\u7533\u8bf7\u3001\u70b9\u8d5e\u7b49\u76f8\u5173\u6570\u636e\u3002"),children:"\ud83d\uddd1\ufe0f \u6e05\u7406\u6240\u6709Collaborations"}),(0,Nt.jsx)("button",{className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded transition-colors disabled:opacity-50",disabled:t,onClick:()=>r(ic,"\u6e05\u7406\u6240\u6709\u4f5c\u54c1","\u786e\u5b9a\u8981\u5220\u9664\u6240\u6709\u4f5c\u54c1\u6570\u636e\u5417\uff1f\n\n\u6b64\u64cd\u4f5c\u5c06\u5220\u9664\u6240\u6709\u7528\u6237\u7684\u4f5c\u54c1\u96c6\u6570\u636e\u3002"),children:"\ud83d\uddd1\ufe0f \u6e05\u7406\u6240\u6709\u4f5c\u54c1"}),(0,Nt.jsx)("button",{className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded transition-colors disabled:opacity-50",disabled:t,onClick:()=>r(lc,"\u6e05\u7406\u6240\u6709\u8bc4\u8bba","\u786e\u5b9a\u8981\u5220\u9664\u6240\u6709\u8bc4\u8bba\u6570\u636e\u5417\uff1f\n\n\u6b64\u64cd\u4f5c\u5c06\u5220\u9664\u6240\u6709\u4f5c\u54c1\u7684\u8bc4\u8bba\u6570\u636e\u3002"),children:"\ud83d\uddd1\ufe0f \u6e05\u7406\u6240\u6709\u8bc4\u8bba"}),(0,Nt.jsx)("button",{className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded transition-colors disabled:opacity-50",disabled:t,onClick:()=>r(cc,"\u6e05\u7406\u6240\u6709\u901a\u77e5","\u786e\u5b9a\u8981\u5220\u9664\u6240\u6709\u901a\u77e5\u6570\u636e\u5417\uff1f\n\n\u6b64\u64cd\u4f5c\u5c06\u5220\u9664\u6240\u6709\u7528\u6237\u7684\u901a\u77e5\u6570\u636e\u3002"),children:"\ud83d\uddd1\ufe0f \u6e05\u7406\u6240\u6709\u901a\u77e5"}),(0,Nt.jsx)("button",{className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded transition-colors disabled:opacity-50",disabled:t,onClick:()=>r(dc,"\u6e05\u7406\u6240\u6709\u70b9\u8d5e","\u786e\u5b9a\u8981\u5220\u9664\u6240\u6709\u70b9\u8d5e\u6570\u636e\u5417\uff1f\n\n\u6b64\u64cd\u4f5c\u5c06\u5220\u9664\u6240\u6709\u4f5c\u54c1\u7684\u70b9\u8d5e\u8bb0\u5f55\u3002"),children:"\ud83d\uddd1\ufe0f \u6e05\u7406\u6240\u6709\u70b9\u8d5e"}),(0,Nt.jsx)("button",{className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded transition-colors disabled:opacity-50",disabled:t,onClick:()=>r(uc,"\u6e05\u7406\u6240\u6709\u6d4f\u89c8\u8bb0\u5f55","\u786e\u5b9a\u8981\u5220\u9664\u6240\u6709\u6d4f\u89c8\u8bb0\u5f55\u6570\u636e\u5417\uff1f\n\n\u6b64\u64cd\u4f5c\u5c06\u5220\u9664\u6240\u6709\u4f5c\u54c1\u7684\u6d4f\u89c8\u7edf\u8ba1\u3002"),children:"\ud83d\uddd1\ufe0f \u6e05\u7406\u6240\u6709\u6d4f\u89c8\u8bb0\u5f55"})]}),(0,Nt.jsxs)("div",{className:"mt-6 pt-6 border-t border-red-200",children:[(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-red-700 mb-4",children:"\u26a0\ufe0f \u5371\u9669\u64cd\u4f5c"}),(0,Nt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Nt.jsx)("button",{className:"bg-red-700 hover:bg-red-800 text-white px-4 py-2 rounded transition-colors disabled:opacity-50",disabled:t,onClick:()=>r(mc,"\u6e05\u7406\u6240\u6709TAG\u6570\u636e","\u26a0\ufe0f \u5371\u9669\u64cd\u4f5c\uff01\n\n\u786e\u5b9a\u8981\u5220\u9664\u6240\u6709TAG\u76f8\u5173\u6570\u636e\u5417\uff1f\n\n\u8fd9\u5c06\u5220\u9664\uff1a\n\u2022 \u6240\u6709\u7528\u6237\u6570\u636e\n\u2022 \u6240\u6709\u4f5c\u54c1\u6570\u636e\n\u2022 \u6240\u6709\u8bc4\u8bba\u6570\u636e\n\u2022 \u6240\u6709\u901a\u77e5\u6570\u636e\n\u2022 \u6240\u6709\u70b9\u8d5e\u6570\u636e\n\u2022 \u6240\u6709\u6d4f\u89c8\u8bb0\u5f55\n\u2022 \u6240\u6709\u534f\u4f5c\u9879\u76ee\n\n\u6b64\u64cd\u4f5c\u4e0d\u53ef\u64a4\u9500\uff01"),children:"\ud83d\udca5 \u6e05\u7406\u6240\u6709TAG\u6570\u636e"}),(0,Nt.jsx)("button",{className:"bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded transition-colors disabled:opacity-50",disabled:t,onClick:()=>{const e=prompt("\u8bf7\u8f93\u5165\u8981\u6e05\u7406\u7684\u7528\u6237ID (alice/bryan/alex):");e&&["alice","bryan","alex"].includes(e)&&r(()=>hc(e),"\u6e05\u7406\u7528\u6237 ".concat(e," \u7684\u6570\u636e"),"\u786e\u5b9a\u8981\u5220\u9664\u7528\u6237 ".concat(e," \u7684\u6240\u6709\u6570\u636e\u5417\uff1f\n\n\u8fd9\u5c06\u5220\u9664\u8be5\u7528\u6237\u7684\u6240\u6709\u4f5c\u54c1\u3001\u8bc4\u8bba\u3001\u901a\u77e5\u7b49\u76f8\u5173\u6570\u636e\u3002"))},children:"\ud83d\udc64 \u6e05\u7406\u7279\u5b9a\u7528\u6237\u6570\u636e"})]})]})]})]})},gc=e=>{let{operationLog:t}=e;return(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,Nt.jsx)("div",{className:"p-6 border-b",children:(0,Nt.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"\u64cd\u4f5c\u65e5\u5fd7"})}),(0,Nt.jsx)("div",{className:"p-6",children:(0,Nt.jsx)("div",{className:"max-h-64 overflow-y-auto",children:0===t.length?(0,Nt.jsx)("p",{className:"text-gray-500 text-center py-4",children:"\u6682\u65e0\u64cd\u4f5c\u8bb0\u5f55"}):(0,Nt.jsx)("div",{className:"space-y-2",children:t.map((e,t)=>(0,Nt.jsxs)("div",{className:"flex items-start space-x-2 text-sm",children:[(0,Nt.jsx)("span",{className:"text-gray-500 min-w-[60px]",children:e.timestamp}),(0,Nt.jsx)("span",{className:"flex-1 ".concat("success"===e.type?"text-green-600":"error"===e.type?"text-red-600":"text-gray-700"),children:e.message})]},t))})})})]})},fc=e=>{let{dataOverview:t}=e;return(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow mb-8",children:[(0,Nt.jsx)("div",{className:"p-6 border-b",children:(0,Nt.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"\u7528\u6237\u6570\u636e\u6982\u89c8"})}),(0,Nt.jsx)("div",{className:"p-6",children:(0,Nt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(t.users||{}).map(e=>{let[t,r]=e;return(0,Nt.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded",children:[(0,Nt.jsx)("span",{className:"font-medium text-gray-700 capitalize",children:t}),(0,Nt.jsx)("span",{className:"text-lg font-bold text-blue-600",children:r})]},t)})})})]})},vc=()=>{const[e,t]=(0,o.useState)(!1),[r,a]=(0,o.useState)(null),[s,n]=(0,o.useState)(!0),i=()=>{localStorage.removeItem("admin_auth_data"),localStorage.removeItem("admin_super_token"),localStorage.removeItem("admin_token_timestamp"),t(!1),a(null),console.log("[Admin Logout] \u7ba1\u7406\u5458\u9000\u51fa\u767b\u5f55 - ".concat((new Date).toLocaleString()))},l=()=>{console.warn("[Admin] \u65e7\u7684\u6fc0\u6d3b\u65b9\u5f0f\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528\u5bc6\u7801\u767b\u5f55"),alert("\u8bf7\u4f7f\u7528\u7528\u6237\u540d\u548c\u5bc6\u7801\u767b\u5f55\u7ba1\u7406\u5458\u9762\u677f")};return(0,o.useEffect)(()=>{(()=>{try{const e=localStorage.getItem("admin_auth_data");if(e){const r=JSON.parse(e),o=new Date(r.loginTime),s=(new Date-o)/36e5;if(r.isAuthenticated&&s<24)return t(!0),a(r),!0;localStorage.removeItem("admin_auth_data"),localStorage.removeItem("admin_super_token"),localStorage.removeItem("admin_token_timestamp")}return!1}catch(e){return console.error("Admin validation error:",e),!1}})();n(!1),window.activateAdminMode=l;const e=setInterval(()=>{const e=localStorage.getItem("admin_auth_data");if(e)try{const t=JSON.parse(e),r=new Date(t.loginTime),o=new Date;(o-r)/36e5>=24&&(i(),alert("\u4f1a\u8bdd\u5df2\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55"))}catch(t){console.error("Session check error:",t)}},36e5);return()=>clearInterval(e)},[]),{isAuthorized:e,authData:r,loading:s,handleLoginSuccess:e=>{a(e),t(!0)},handleLogout:i,activateAdminMode:l}},xc=e=>{const[t,r]=(0,o.useState)([]),[a,s]=(0,o.useState)(!1),[n,i]=(0,o.useState)(!1),[l,c]=(0,o.useState)(null),[d,u]=(0,o.useState)(null),[h,m]=(0,o.useState)(!1),p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";const o={timestamp:(new Date).toLocaleTimeString(),message:e,type:t};r(e=>[o,...e.slice(0,49)])};return{operationLog:t,isOperating:a,showConfirmDialog:n,currentDataType:d,showDataManager:h,addLog:p,showConfirm:(t,r,o)=>{c(()=>()=>(async(t,r)=>{if(!a){s(!0),p("\u5f00\u59cb\u6267\u884c: ".concat(r),"info");try{const r=await t();r.success?(p("\u2705 ".concat(r.message),"success"),e()):p("\u274c \u64cd\u4f5c\u5931\u8d25: ".concat(r.error),"error")}catch(o){p("\u274c \u64cd\u4f5c\u5f02\u5e38: ".concat(o.message),"error")}finally{s(!1)}}})(t,r)),i(!0)},handleConfirm:()=>{l&&l()},openDataManager:e=>{u(e),m(!0)},handleDataManagerDelete:t=>{p("\u2705 \u901a\u8fc7\u6570\u636e\u7ba1\u7406\u5668\u5220\u9664\u4e86 ".concat(t," \u9879\u6570\u636e"),"success"),e()},setShowConfirmDialog:i,setShowDataManager:m}},bc=()=>{const[e,t]=(0,o.useState)({}),r=()=>{const e=(()=>{try{const e=Object.keys(localStorage),t={totalKeys:e.length,users:{alice:0,bryan:0,alex:0},collaborations:0,portfolios:0,comments:0,notifications:0,likes:0,views:0,favorites:0,other:0};return e.forEach(e=>{if(e.includes("portfolio_")){t.portfolios++;const r=e.replace("portfolio_","");void 0!==t.users[r]&&t.users[r]++}else e.includes("collaboration")?t.collaborations++:e.includes("comment")?t.comments++:e.includes("notification")?t.notifications++:e.includes("like")?t.likes++:e.includes("view")?t.views++:e.includes("favorite")?t.favorites++:t.other++}),t}catch(e){return console.error("Error getting data overview:",e),{}}})();t(e)};return(0,o.useEffect)(()=>{r()},[]),{dataOverview:e,refreshDataOverview:r}},yc=()=>{const{isAuthorized:e,authData:t,loading:r,handleLoginSuccess:o,handleLogout:a}=vc(),{dataOverview:s,refreshDataOverview:n}=bc(),{operationLog:i,isOperating:l,showConfirmDialog:c,currentDataType:d,showDataManager:u,showConfirm:h,handleConfirm:m,openDataManager:p,handleDataManagerDelete:g,setShowConfirmDialog:f,setShowDataManager:v}=xc(n);return r?(0,Nt.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:(0,Nt.jsxs)("div",{className:"text-center",children:[(0,Nt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,Nt.jsx)("p",{className:"mt-4 text-gray-600",children:"\u9a8c\u8bc1\u7ba1\u7406\u5458\u6743\u9650..."})]})}):e?(0,Nt.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,Nt.jsx)(Yl,{authData:t,onLogout:a}),(0,Nt.jsxs)("div",{className:"max-w-7xl mx-auto p-6",children:[(0,Nt.jsx)(ac,{dataOverview:s}),(0,Nt.jsx)(fc,{dataOverview:s}),(0,Nt.jsx)(pc,{isOperating:l,showConfirm:h,openDataManager:p}),(0,Nt.jsx)(sc,{openDataManager:p}),(0,Nt.jsx)(gc,{operationLog:i})]}),(0,Nt.jsx)(Kl,{isOpen:c,onClose:()=>f(!1),onConfirm:m,title:"\u786e\u8ba4\u64cd\u4f5c",message:"\u786e\u5b9a\u8981\u6267\u884c\u6b64\u64cd\u4f5c\u5417\uff1f\\n\\n\u6b64\u64cd\u4f5c\u4e0d\u53ef\u64a4\u9500\uff01",confirmText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",type:"danger"}),(0,Nt.jsx)(oc,{showDataManager:u,currentDataType:d,onClose:()=>v(!1),onDeleteSelected:g})]}):(0,Nt.jsx)(Zl,{onLoginSuccess:o})},wc=gs("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),jc=gs("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),kc=gs("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),Nc=gs("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),Sc=gs("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),Cc=gs("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]),Ac=gs("rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]),_c=gs("pen-tool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),Ic=gs("box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Ec=gs("gamepad",[["line",{x1:"6",x2:"10",y1:"12",y2:"12",key:"161bw2"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"15",x2:"15.01",y1:"13",y2:"13",key:"dqpgro"}],["line",{x1:"18",x2:"18.01",y1:"11",y2:"11",key:"meh2c"}],["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]]),Pc=gs("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Dc=gs("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),Tc=gs("handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),Lc=gs("building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),Mc=gs("hammer",[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]]),Rc=gs("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Fc=gs("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Uc={container:"CoFuture2025_container__ZK5Ze",hero:"CoFuture2025_hero__OU85u",heroContent:"CoFuture2025_heroContent__K38iO",title:"CoFuture2025_title__Ag7cX",titlePrefix:"CoFuture2025_titlePrefix__zCITE",gradientText:"CoFuture2025_gradientText__VpOpM",subtitle:"CoFuture2025_subtitle__SIZMK",primaryBtn:"CoFuture2025_primaryBtn__x4ztR",processStrip:"CoFuture2025_processStrip__6w4ED",step:"CoFuture2025_step__Bulkv",stepIcon:"CoFuture2025_stepIcon__cKdgR",stepText:"CoFuture2025_stepText__QeDUr",stepSeparator:"CoFuture2025_stepSeparator__3Vc4r",about:"CoFuture2025_about__tOwZV",aboutContent:"CoFuture2025_aboutContent__ix1Il",aboutTitle:"CoFuture2025_aboutTitle__6XfGp",aboutDescription:"CoFuture2025_aboutDescription__SfTCe",quote:"CoFuture2025_quote__0RS3l",features:"CoFuture2025_features__oE2az",feature:"CoFuture2025_feature__p9lyH",iconCircle:"CoFuture2025_iconCircle__9ooh7",iconBlue:"CoFuture2025_iconBlue__YtD2l",iconPurple:"CoFuture2025_iconPurple__VDYJy",iconBluePurple:"CoFuture2025_iconBluePurple__mhl+J",featureIcon:"CoFuture2025_featureIcon__lDobi",featureTitle:"CoFuture2025_featureTitle__7xMuY",featureDescription:"CoFuture2025_featureDescription__aaFJT",sectionTitle:"CoFuture2025_sectionTitle__fTNpT",tracks:"CoFuture2025_tracks__PyO0P",tracksContent:"CoFuture2025_tracksContent__iz1N0",tracksGrid:"CoFuture2025_tracksGrid__EfbsC",trackCard:"CoFuture2025_trackCard__Of4Cr",trackIcon:"CoFuture2025_trackIcon__Ay5dz",trackTitle:"CoFuture2025_trackTitle__Rvim7",trackDescription:"CoFuture2025_trackDescription__T3--3",trackButton:"CoFuture2025_trackButton__MZdfx",buttonBlue:"CoFuture2025_buttonBlue__3o30o",buttonPurple:"CoFuture2025_buttonPurple__2sr1U",buttonGreen:"CoFuture2025_buttonGreen__w8YvR",awards:"CoFuture2025_awards__82z4d",awardsContent:"CoFuture2025_awardsContent__hSWNC",awardsGrid:"CoFuture2025_awardsGrid__DpIMv",awardItem:"CoFuture2025_awardItem__C+hbd",awardIcon:"CoFuture2025_awardIcon__UcH+h",awardYellow:"CoFuture2025_awardYellow__hopvc",awardBlue:"CoFuture2025_awardBlue__ZDDyU",awardPurple:"CoFuture2025_awardPurple__AFTPo",awardGreen:"CoFuture2025_awardGreen__zmT2X",awardIconText:"CoFuture2025_awardIconText__ukZpZ",awardTitle:"CoFuture2025_awardTitle__zzPao",awardDescription:"CoFuture2025_awardDescription__4t7tg",howToJoin:"CoFuture2025_howToJoin__edHAM",howToJoinContent:"CoFuture2025_howToJoinContent__aOq0j",stepsGrid:"CoFuture2025_stepsGrid__gjajo",stepItem:"CoFuture2025_stepItem__KBZVQ",stepNumber:"CoFuture2025_stepNumber__NizGo",stepTitle:"CoFuture2025_stepTitle__yqtrb",stepDescription:"CoFuture2025_stepDescription__AyUIr",ctaContainer:"CoFuture2025_ctaContainer__XaGfV",ctaButton:"CoFuture2025_ctaButton__Ntg3q",timeline:"CoFuture2025_timeline__iqBiD",timelineContent:"CoFuture2025_timelineContent__lBrHt",timelineContainer:"CoFuture2025_timelineContainer__oU9V2",timelineEvent:"CoFuture2025_timelineEvent__MX89R",timelineIcon:"CoFuture2025_timelineIcon__e8uul",timelineDate:"CoFuture2025_timelineDate__QmZfI",timelineTitle:"CoFuture2025_timelineTitle__LpcpN",timelineLine:"CoFuture2025_timelineLine__Bxw3B",gallery:"CoFuture2025_gallery__cBNQg",galleryContent:"CoFuture2025_galleryContent__paSYN",galleryCard:"CoFuture2025_galleryCard__7nNio",galleryIcon:"CoFuture2025_galleryIcon__QY0Xa",galleryComingSoon:"CoFuture2025_galleryComingSoon__MYi6B",galleryDescription:"CoFuture2025_galleryDescription__XpeEq",faq:"CoFuture2025_faq__BjYt2",faqContent:"CoFuture2025_faqContent__geJNg",faqList:"CoFuture2025_faqList__SVbhC",faqItem:"CoFuture2025_faqItem__YPMrZ",faqQuestion:"CoFuture2025_faqQuestion__j4oT8",faqIcon:"CoFuture2025_faqIcon__pNQa5",faqIconRotated:"CoFuture2025_faqIconRotated__4QtS5",faqAnswer:"CoFuture2025_faqAnswer__y+MiQ"},Oc={title:{prefix:"TAGMe:",main:"Co-Future"},subtitle:"Student Competitions 2025",button:{text:"Join the Challenge",href:"/tagme/co-future-2025#apply"},steps:[{icon:wc,text:"Team Up"},{icon:jc,text:"Co-Create"},{icon:kc,text:"Submit"},{icon:Nc,text:"Celebrate"}],about:{title:"About Co-Future",description:"Co-Future is TAG's official global art competition, inviting creative students from all over the world to team up and design what the future could be \u2014 together.",quote:'"The future is designed together."',features:[{title:"Global Collaboration",description:"Connect with creative minds from around the world.",icon:Sc,gradientClass:"iconBlue"},{title:"Cross-Disciplinary",description:"Blend 2D, 3D, interactive media, and storytelling.",icon:Cc,gradientClass:"iconPurple"},{title:"Future-Focused",description:"Design innovative solutions for tomorrow's challenges.",icon:Ac,gradientClass:"iconBluePurple"}]},tracks:{title:"Competition Tracks",items:[{title:"2D Visual Design",description:"Create stunning illustrations, graphics, and visual narratives that bring the future to life.",icon:_c,buttonText:"Explore Track",buttonColor:"blue"},{title:"3D Visual Design",description:"Build immersive 3D environments, characters, and objects that define tomorrow's world.",icon:Ic,buttonText:"Explore Track",buttonColor:"purple"},{title:"Game & Interactive Media",description:"Design interactive experiences, games, and digital media that engage and inspire.",icon:Ec,buttonText:"Explore Track",buttonColor:"green"}]},awards:{title:"Awards & Recognition",items:[{title:"Best Visual Presentation",description:"Outstanding aesthetic quality",icon:Nc,gradientClass:"awardYellow"},{title:"Best Concept Development",description:"Innovative thinking and ideation",icon:jc,gradientClass:"awardBlue"},{title:"Best Technical Execution",description:"Superior craftsmanship and skill",icon:Pc,gradientClass:"awardPurple"},{title:"Rising Star Award",description:"Outstanding emerging talent",icon:Dc,gradientClass:"awardGreen"}]},howToJoin:{title:"How to Join",steps:[{number:"1",title:"Build or Join a Team",description:"Connect with collaborators via TAGMe platform",icon:wc},{number:"2",title:"Choose a Track",description:"Select your preferred competition category",icon:Cc},{number:"3",title:"Collaborate & Co-Create",description:"Work together to bring your vision to life",icon:Tc},{number:"4",title:"Submit Your Work",description:"Upload before February 10 deadline",icon:kc}],ctaButton:{text:"Start on TAGMe",href:"/tagme"}},timeline:{title:"Competition Timeline",events:[{date:"October",title:"Registration Opens",icon:Lc},{date:"November \u2013 January",title:"Creation Phase",icon:Mc},{date:"February 10",title:"Submission Deadline",icon:kc},{date:"February 20",title:"Awards & Showcase",icon:Nc}]},gallery:{title:"Submission Gallery",comingSoon:"Coming Soon",description:"This space will showcase the most inspiring submissions from each track. Check back during the creation phase to see amazing work from teams worldwide."},faq:{title:"Frequently Asked Questions",items:[{question:"Who can join?",answer:"Any student currently enrolled in an educational institution worldwide can participate."},{question:"Can I submit solo?",answer:"While we encourage collaboration, solo submissions are welcome in all tracks."},{question:"What file types are accepted?",answer:"We accept various formats including images, videos, interactive files, and project documentation."},{question:"Do I need specific software?",answer:"No, you can use any tools or software you prefer to create your submission."},{question:"How are awards judged?",answer:"Submissions are evaluated by industry professionals based on creativity, technical skill, and concept development."}]}},zc=()=>{const[e,t]=(0,o.useState)(null);return(0,Nt.jsxs)("div",{className:Uc.container,children:[(0,Nt.jsx)("section",{className:Uc.hero,children:(0,Nt.jsxs)("div",{className:Uc.heroContent,children:[(0,Nt.jsxs)("h1",{className:Uc.title,children:[(0,Nt.jsx)("span",{className:Uc.titlePrefix,children:Oc.title.prefix}),(0,Nt.jsx)("span",{className:Uc.gradientText,children:Oc.title.main})]}),(0,Nt.jsx)("p",{className:Uc.subtitle,children:Oc.subtitle}),(0,Nt.jsx)("a",{href:Oc.button.href,className:Uc.primaryBtn,"aria-label":"Join the Co-Future challenge",children:Oc.button.text}),(0,Nt.jsx)("div",{className:Uc.processStrip,"aria-label":"Competition process steps",children:Oc.steps.map((e,t)=>(0,Nt.jsxs)(o.Fragment,{children:[(0,Nt.jsxs)("span",{className:Uc.step,children:[(0,Nt.jsx)("span",{className:Uc.stepIcon,children:(0,Nt.jsx)(e.icon,{size:18})}),(0,Nt.jsx)("span",{className:Uc.stepText,children:e.text})]}),t<Oc.steps.length-1&&(0,Nt.jsx)("span",{className:Uc.stepSeparator,children:"\u2022"})]},e.text))})]})}),(0,Nt.jsx)("section",{className:Uc.about,children:(0,Nt.jsxs)("div",{className:Uc.aboutContent,children:[(0,Nt.jsx)("h2",{className:Uc.aboutTitle,children:Oc.about.title}),(0,Nt.jsx)("p",{className:Uc.aboutDescription,children:Oc.about.description}),(0,Nt.jsx)("blockquote",{className:Uc.quote,children:Oc.about.quote}),(0,Nt.jsx)("div",{className:Uc.features,children:Oc.about.features.map(e=>(0,Nt.jsxs)("div",{className:Uc.feature,children:[(0,Nt.jsx)("div",{className:"".concat(Uc.iconCircle," ").concat(Uc[e.gradientClass]),children:(0,Nt.jsx)("span",{className:Uc.featureIcon,children:(0,Nt.jsx)(e.icon,{size:32})})}),(0,Nt.jsx)("h3",{className:Uc.featureTitle,children:e.title}),(0,Nt.jsx)("p",{className:Uc.featureDescription,children:e.description})]},e.title))})]})}),(0,Nt.jsx)("section",{className:Uc.tracks,children:(0,Nt.jsxs)("div",{className:Uc.tracksContent,children:[(0,Nt.jsx)("h2",{className:Uc.sectionTitle,children:Oc.tracks.title}),(0,Nt.jsx)("div",{className:Uc.tracksGrid,children:Oc.tracks.items.map(e=>(0,Nt.jsxs)("div",{className:Uc.trackCard,children:[(0,Nt.jsx)("div",{className:Uc.trackIcon,children:(0,Nt.jsx)(e.icon,{size:48})}),(0,Nt.jsx)("h3",{className:Uc.trackTitle,children:e.title}),(0,Nt.jsx)("p",{className:Uc.trackDescription,children:e.description}),(0,Nt.jsx)("button",{className:"".concat(Uc.trackButton," ").concat(Uc["button".concat(e.buttonColor.charAt(0).toUpperCase()+e.buttonColor.slice(1))]),children:e.buttonText})]},e.title))})]})}),(0,Nt.jsx)("section",{className:Uc.awards,children:(0,Nt.jsxs)("div",{className:Uc.awardsContent,children:[(0,Nt.jsx)("h2",{className:Uc.sectionTitle,children:Oc.awards.title}),(0,Nt.jsx)("div",{className:Uc.awardsGrid,children:Oc.awards.items.map(e=>(0,Nt.jsxs)("div",{className:Uc.awardItem,children:[(0,Nt.jsx)("div",{className:"".concat(Uc.awardIcon," ").concat(Uc[e.gradientClass]),children:(0,Nt.jsx)("span",{className:Uc.awardIconText,children:(0,Nt.jsx)(e.icon,{size:24})})}),(0,Nt.jsx)("h3",{className:Uc.awardTitle,children:e.title}),(0,Nt.jsx)("p",{className:Uc.awardDescription,children:e.description})]},e.title))})]})}),(0,Nt.jsx)("section",{className:Uc.howToJoin,children:(0,Nt.jsxs)("div",{className:Uc.howToJoinContent,children:[(0,Nt.jsx)("h2",{className:Uc.sectionTitle,children:Oc.howToJoin.title}),(0,Nt.jsx)("div",{className:Uc.stepsGrid,children:Oc.howToJoin.steps.map(e=>(0,Nt.jsxs)("div",{className:Uc.stepItem,children:[(0,Nt.jsx)("div",{className:Uc.stepNumber,children:(0,Nt.jsx)(e.icon,{size:20})}),(0,Nt.jsx)("h3",{className:Uc.stepTitle,children:e.title}),(0,Nt.jsx)("p",{className:Uc.stepDescription,children:e.description})]},e.number))}),(0,Nt.jsx)("div",{className:Uc.ctaContainer,children:(0,Nt.jsx)("a",{href:Oc.howToJoin.ctaButton.href,className:Uc.ctaButton,children:Oc.howToJoin.ctaButton.text})})]})}),(0,Nt.jsx)("section",{className:Uc.timeline,children:(0,Nt.jsxs)("div",{className:Uc.timelineContent,children:[(0,Nt.jsx)("h2",{className:Uc.sectionTitle,children:Oc.timeline.title}),(0,Nt.jsx)("div",{className:Uc.timelineContainer,children:Oc.timeline.events.map((e,t)=>(0,Nt.jsxs)("div",{className:Uc.timelineEvent,children:[(0,Nt.jsx)("div",{className:Uc.timelineIcon,children:(0,Nt.jsx)(e.icon,{size:24})}),(0,Nt.jsxs)("div",{className:Uc.timelineContent,children:[(0,Nt.jsx)("div",{className:Uc.timelineDate,children:e.date}),(0,Nt.jsx)("div",{className:Uc.timelineTitle,children:e.title})]}),t<Oc.timeline.events.length-1&&(0,Nt.jsx)("div",{className:Uc.timelineLine})]},e.date))})]})}),(0,Nt.jsx)("section",{className:Uc.gallery,children:(0,Nt.jsxs)("div",{className:Uc.galleryContent,children:[(0,Nt.jsx)("h2",{className:Uc.sectionTitle,children:Oc.gallery.title}),(0,Nt.jsxs)("div",{className:Uc.galleryCard,children:[(0,Nt.jsx)("div",{className:Uc.galleryIcon,children:(0,Nt.jsx)(Rc,{size:64})}),(0,Nt.jsx)("h3",{className:Uc.galleryComingSoon,children:Oc.gallery.comingSoon}),(0,Nt.jsx)("p",{className:Uc.galleryDescription,children:Oc.gallery.description})]})]})}),(0,Nt.jsx)("section",{className:Uc.faq,children:(0,Nt.jsxs)("div",{className:Uc.faqContent,children:[(0,Nt.jsx)("h2",{className:Uc.sectionTitle,children:Oc.faq.title}),(0,Nt.jsx)("div",{className:Uc.faqList,children:Oc.faq.items.map((r,o)=>(0,Nt.jsxs)("div",{className:Uc.faqItem,children:[(0,Nt.jsxs)("button",{className:Uc.faqQuestion,onClick:()=>(r=>{t(e===r?null:r)})(o),"aria-expanded":e===o,children:[(0,Nt.jsx)("span",{children:r.question}),(0,Nt.jsx)(Fc,{size:20,className:"".concat(Uc.faqIcon," ").concat(e===o?Uc.faqIconRotated:"")})]}),e===o&&(0,Nt.jsx)("div",{className:Uc.faqAnswer,children:(0,Nt.jsx)("p",{children:r.answer})})]},o))})]})})]})},Wc=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var t;const{majors:o=[],software:a=[],sortBy:s="latest",limit:i=12,cursor:l=null}=e;console.log("[majorService] Filtering by:",{majors:o,software:a,sortBy:s});const c=[],d=["9da7c012-2b80-4597-b138-4f5c0c7fdcd1","512411b2-adac-4dec-8fe5-63fb405f756b"];for(const e of d)try{const t=await(0,lr.ep)(e);if(t.success&&t.data){const r=await ha(e),o=t.data.map(t=>(0,n.A)((0,n.A)({},t),{},{author:{id:(null===r||void 0===r?void 0:r.id)||e,name:(null===r||void 0===r?void 0:r.name)||e,majors:(null===r||void 0===r?void 0:r.majors)||[],minors:(null===r||void 0===r?void 0:r.minors)||[]}}));c.push(...o)}}catch(r){console.warn("[majorService] Failed to get works for artist ".concat(e,":"),r)}let u=c;o.length>0&&(u=u.filter(e=>{const t=[...e.author.majors||[],...e.author.minors||[]];return o.every(e=>t.some(t=>t.toLowerCase()===e.toLowerCase()))})),a.length>0&&(u=u.filter(e=>{const t=e.software||[];return a.every(e=>t.some(t=>t.toLowerCase().includes(e.toLowerCase())))})),("latest"===s||"popular"===s)&&u.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt));let h=0;if(l){h=u.findIndex(e=>e.id===l)+1}const m=h+i,p=u.slice(h,m),g=await Promise.all(p.map(async e=>{let t="/assets/placeholder.svg";if(e.thumbnailPath){const r=await(0,lr.getPortfolioImageUrl)(e.thumbnailPath);r.success&&(t=r.data.url)}else if(e.imagePaths&&e.imagePaths[0]){const r=await(0,lr.getPortfolioImageUrl)(e.imagePaths[0]);r.success&&(t=r.data.url)}return{id:e.id,title:e.title,image:t,author:e.author,category:e.category,tags:e.tags||[],description:e.description,createdAt:e.createdAt}})),f=m<u.length,v=f?null===(t=p[p.length-1])||void 0===t?void 0:t.id:null;return console.log("[majorService] Found ".concat(u.length," works, returning ").concat(g.length)),{items:g,cursor:v,hasMore:f,total:u.length}}catch(r){throw console.error("[majorService] Error getting works by major:",r),r}},Bc=()=>{var e,t;const[r]=bt(),[a,s]=(ue(),(0,o.useState)([])),[n,i]=(0,o.useState)(!0),[l,c]=(0,o.useState)(null),[d,u]=(0,o.useState)(!0),[h,m]=(0,o.useState)(null),p=(null===(e=r.get("categories"))||void 0===e?void 0:e.split(","))||[],g=(null===(t=r.get("software"))||void 0===t?void 0:t.split(","))||[],f=r.get("sort")||"latest",v=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{i(!0);const t=await Wc({majors:p,software:g,sortBy:f,limit:12,cursor:e});s(e?e=>[...e,...t.items]:t.items),m(t.cursor),u(t.hasMore),c(null)}catch(l){console.error("Error loading works by major:",l),c("Failed to load works")}finally{i(!1)}};(0,o.useEffect)(()=>{v()},[p.join(","),g.join(","),f]);return n&&0===a.length?(0,Nt.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Nt.jsxs)("div",{className:"text-center",children:[(0,Nt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,Nt.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading works..."})]})}):l&&0===a.length?(0,Nt.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Nt.jsxs)("div",{className:"text-center",children:[(0,Nt.jsx)("div",{className:"text-red-600 text-lg font-semibold mb-2",children:"Error"}),(0,Nt.jsx)("p",{className:"text-gray-600 mb-4",children:l}),(0,Nt.jsx)("button",{onClick:()=>v(),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Try Again"})]})}):(0,Nt.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Nt.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,Nt.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,Nt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:(()=>{if(0===p.length&&0===g.length)return"All Works";const e=[];return p.length>0&&e.push("Major: ".concat(p.join(", "))),g.length>0&&e.push("Software: ".concat(g.join(", "))),e.join(" | ")})()}),(0,Nt.jsx)("p",{className:"text-gray-600 mt-2",children:0===a.length?"0 works":1===a.length?"1 work":"".concat(a.length," works")}),(p.length>0||g.length>0)&&(0,Nt.jsxs)("div",{className:"flex flex-wrap gap-2 mt-3",children:[p.map(e=>(0,Nt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e},e)),g.map(e=>(0,Nt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:e},e))]})]}),(0,Nt.jsxs)("button",{onClick:()=>window.history.back(),className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[(0,Nt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back"]})]})})}),(0,Nt.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:0===a.length?(0,Nt.jsxs)("div",{className:"text-center py-12",children:[(0,Nt.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"\ud83c\udfa8"}),(0,Nt.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No works found"}),(0,Nt.jsx)("p",{className:"text-gray-600",children:"No works match the selected criteria. Try adjusting your filters."})]}):(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:a.map(e=>(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow cursor-pointer",onClick:()=>window.open("/work/".concat(e.id),"_blank"),children:[(0,Nt.jsx)("div",{className:"aspect-w-16 aspect-h-9 bg-gray-200 rounded-t-lg",children:(0,Nt.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-48 object-cover rounded-t-lg",onError:e=>{e.target.src="/assets/placeholder.svg"}})}),(0,Nt.jsxs)("div",{className:"p-4",children:[(0,Nt.jsx)("h3",{className:"font-medium text-gray-900 truncate",children:e.title}),(0,Nt.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["by ",e.author.name]}),e.author.majors&&e.author.majors.length>0&&(0,Nt.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:e.author.majors.slice(0,2).map(e=>(0,Nt.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:e},e))})]})]},e.id))}),d&&(0,Nt.jsx)("div",{className:"text-center mt-8",children:(0,Nt.jsx)("button",{onClick:()=>{d&&v(h)},disabled:n,className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors duration-200",children:n?"Loading...":"Load More Works"})})]})})]})},Gc="EditProfile_container__IkubN",Hc="EditProfile_header__K3AJ7",qc="EditProfile_headerLeft__Cf4sl",Vc="EditProfile_backButton__mrj22",Jc="EditProfile_backIcon__CFjC9",Zc="EditProfile_pageTitle__C2f+e",Kc="EditProfile_headerRight__RhuX-",Yc="EditProfile_cancelButton__2s1x1",Qc="EditProfile_saveButton__Wayap",$c="EditProfile_successMessage__npX8G",Xc="EditProfile_successIcon__ezwUa",ed="EditProfile_grid__mrd1a",td="EditProfile_leftCol__iTTBq",rd="EditProfile_rightCol__Tgyti",od="EditProfile_card__JLxMq",ad="EditProfile_cardTitle__gOJEN",sd="EditProfile_avatarSection__SBCYc",nd="EditProfile_avatarContainer__JGWTL",id="EditProfile_avatar__JfBVT",ld="EditProfile_avatarActions__fhG0j",cd="EditProfile_changePhotoButton__Uvyeb",dd="EditProfile_cameraIcon__nPnd3",ud="EditProfile_formField__-xQhQ",hd="EditProfile_basicInfoGrid__L8Uqd",md="EditProfile_fullRow__gMTKI",pd="EditProfile_bioTextarea__26OTA",gd="EditProfile_inputError__h+bTv",fd="EditProfile_bioFooter__9rTtO",vd="EditProfile_label__Dt+aP",xd="EditProfile_input__rW7WI",bd="EditProfile_textarea__9NKl2",yd="EditProfile_errorMessage__jReZa",wd="EditProfile_charCount__uvzqh",jd="EditProfile_charCountWarning__HnCvV",kd="EditProfile_socialInputContainer__BgFPk",Nd="EditProfile_socialIconContainer__hkUKi",Sd="EditProfile_socialIcon__Cq5Cj",Cd="EditProfile_socialInput__lAUZL",Ad="EditProfile_socialLinksContainer__0h9be",_d="EditProfile_socialSection__zbU2v",Id="EditProfile_sectionHeader__wX01L",Ed="EditProfile_sectionTitle__qY0N6",Pd="EditProfile_otherLinksList__cM-3T",Dd="EditProfile_otherLinkRow__IK+VN",Td="EditProfile_otherLinkInfo__XvxYR",Ld="EditProfile_otherLinkLabel__vKKtD",Md="EditProfile_otherLinkUrl__eu-3g",Rd="EditProfile_removeLinkButton__Ytti9",Fd="EditProfile_addLinkSection__GQNZW",Ud="EditProfile_addLinkRow__okDDd",Od="EditProfile_addLinkInputGroup__9pboc",zd="EditProfile_addLinkInput__qcDkf",Wd="EditProfile_addLinkButton__+80nZ",Bd="EditProfile_suggestions__6dQob",Gd="EditProfile_suggestionButton__4FsVN",Hd="EditProfile_maxLinksMessage__qadHX",qd="EditProfile_skillsContainer__zTdNo",Vd="EditProfile_skillsList__CqxMp",Jd="EditProfile_skillTag__BYLvV",Zd="EditProfile_skillText__KF2Mn",Kd="EditProfile_removeSkillButton__QgK83",Yd="EditProfile_removeIcon__0wB4r",Qd="EditProfile_addSkillContainer__TWSXM",$d="EditProfile_addSkillInputGroup__GPOwF",Xd="EditProfile_addSkillInput__3vkFF",eu="EditProfile_addSkillButton__Y-e-W",tu="EditProfile_addIcon__LK-oP",ru="EditProfile_helpText__QLYpo",ou="EditProfile_majorsContainer__y+v-i",au="EditProfile_majorsList__nro4w",su="EditProfile_majorTag__+62bm",nu="EditProfile_majorText__1NwOV",iu="EditProfile_removeMajorButton__-0lfq",lu="EditProfile_addMajorContainer__7hcG6",cu="EditProfile_uploadArea__RBBIb",du="EditProfile_uploadAreaClickable__UhlWL",uu="EditProfile_uploadIcon__Uu4Do",hu="EditProfile_uploadText__DyRAA",mu="EditProfile_uploadSubtext__Vv8hF",pu="EditProfile_chooseFilesButton__RdltH",gu="EditProfile_publicNotice__D7tuk",fu="EditProfile_publicIcon__KSjhS",vu="EditProfile_portfolioGrid__Nxc06",xu="EditProfile_portfolioItem__G9AjO",bu="EditProfile_portfolioImageContainer__Yc1la",yu="EditProfile_portfolioImage__EdMj7",wu="EditProfile_publicBadge__vDOWI",ju="EditProfile_modalOverlay__zOlaL",ku="EditProfile_modal__V5yfn",Nu="EditProfile_modalHeader__8WA4B",Su="EditProfile_modalTitle__8dRQl",Cu="EditProfile_modalContent__wpgwQ",Au="EditProfile_modalWarning__RRbh8",_u="EditProfile_modalActions__0ErUX",Iu="EditProfile_modalCancelButton__MY1ND",Eu="EditProfile_modalDeleteButton__NrN69",Pu="EditProfile_portfolioOverlay__wHCNS",Du="EditProfile_visibilityButton__a-Mcb",Tu="EditProfile_removeButton__hTjYd",Lu="EditProfile_public__jweuU",Mu="EditProfile_private__VNZqB",Ru="EditProfile_editButton__4V9ef",Fu="EditProfile_portfolioStatus__+zH7y",Uu="EditProfile_statusBadge__DdUpb",Ou="EditProfile_privateBadge__a2mPn",zu="EditProfile_portfolioInfo__Yzmbj",Wu="EditProfile_portfolioTitle__5mStV",Bu="EditProfile_emptyState__BytyE",Gu="EditProfile_emptyIcon__cIyOv",Hu="EditProfile_emptyText__c+EDW",qu="EditProfile_emptySubtext__n3em7",Vu="EditProfile_portfolioModalContent__xcTAE",Ju="EditProfile_portfolioModalHeader__LC6BZ",Zu="EditProfile_portfolioCloseButton__IXIC-",Ku="EditProfile_portfolioModalBody__w5jQ-",Yu="EditProfile_formGroup__Y521H",Qu="EditProfile_required__zObno",$u="EditProfile_error__VwHJg",Xu="EditProfile_errorText__kwONd",eh="EditProfile_portfolioModalFooter__-6agc",th=["Accessory Design","Acting","Advertising","Animation","Architecture","Art History","Creative Business Leadership","Fashion Design","Fibers","Film","Film/Television","Fine Art","Game/ITGM","Graphic Design","Industrial Design","Illustration","Interior Design","Jewelry","Motion Design","Painting","Photography","Service Design","Sequential Art","UI/UX","Visual Effects"],rh=e=>{let{onAddMajor:t,disabled:r=!1}=e;const[a,s]=(0,o.useState)(""),[n,i]=(0,o.useState)(!1),[l,c]=(0,o.useState)([]),[d,u]=(0,o.useState)(-1),[h,m]=(0,o.useState)(""),p=(0,o.useRef)(null),g=(0,o.useRef)(null);(0,o.useEffect)(()=>{if(a.trim()){const e=th.filter(e=>e.toLowerCase().includes(a.toLowerCase()));c(e)}else c(th);u(-1)},[a]);const f=e=>{s(e),i(!1),u(-1),t(e)},v=()=>{const e=a.trim();if(!e)return void m("Please enter a major or minor");const r=th.find(t=>t.toLowerCase()===e.toLowerCase());r?(t(r),s(""),m(""),i(!1)):m("Please select a valid major or minor from the list")};return(0,o.useEffect)(()=>{const e=e=>{g.current&&!g.current.contains(e.target)&&p.current&&!p.current.contains(e.target)&&(i(!1),u(-1))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,Nt.jsxs)("div",{className:"relative",children:[(0,Nt.jsxs)("div",{className:"flex gap-2",children:[(0,Nt.jsxs)("div",{className:"relative flex-1",children:[(0,Nt.jsx)("input",{ref:p,type:"text",value:a,onChange:e=>{const t=e.target.value;s(t),m(""),i(!0)},onKeyDown:e=>{"ArrowDown"===e.key?(e.preventDefault(),u(e=>e<l.length-1?e+1:0)):"ArrowUp"===e.key?(e.preventDefault(),u(e=>e>0?e-1:l.length-1)):"Enter"===e.key?(e.preventDefault(),d>=0&&d<l.length?f(l[d]):a.trim()&&v()):"Escape"===e.key&&(i(!1),u(-1))},onFocus:()=>i(!0),placeholder:"Type to search majors...",disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 disabled:bg-gray-100 disabled:cursor-not-allowed"}),(0,Nt.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,Nt.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}),n&&l.length>0&&(0,Nt.jsx)("div",{ref:g,className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:l.map((e,t)=>(0,Nt.jsx)("div",{className:"px-3 py-2 cursor-pointer hover:bg-purple-50 ".concat(t===d?"bg-purple-100":""),onClick:()=>f(e),children:e},e))})]}),(0,Nt.jsx)("button",{type:"button",onClick:v,disabled:!a.trim()||r,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-1 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors duration-200",children:(0,Nt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]}),h&&(0,Nt.jsx)("div",{className:"mt-1 text-sm text-red-600",children:h}),(0,Nt.jsx)("div",{className:"mt-1 text-xs text-gray-500",children:"Type to search and select from the list. Maximum 3 majors & minors."})]})},oh=e=>{var t,r;let{data:a,onChange:s,onMajorsChange:n,onMinorsChange:i,errors:l}=e;const c=(e,t)=>{s(e,t)},d=(0,o.useCallback)(e=>{const t=e.toLowerCase();if([...a.majors||[],...a.minors||[]].some(e=>e.toLowerCase()===t))return;const r=a.majors||[],o=a.minors||[];if(r.length<3){const t=[...r,e];n(t)}else if(o.length<3){const t=[...o,e];i(t)}},[a.majors,a.minors,n,i]),u=(0,o.useCallback)(e=>{const t=(a.majors||[]).filter(t=>t!==e);n(t)},[a.majors,n]),h=(0,o.useCallback)(e=>{const t=(a.minors||[]).filter(t=>t!==e);i(t)},[a.minors,i]);return(0,Nt.jsxs)("div",{className:od,children:[(0,Nt.jsx)("h3",{className:ad,children:"Basic Information"}),(0,Nt.jsxs)("div",{className:hd,children:[(0,Nt.jsxs)("div",{className:ud,children:[(0,Nt.jsx)("label",{htmlFor:"fullName",className:vd,children:"Full Name *"}),(0,Nt.jsx)("input",{id:"fullName",type:"text",value:a.fullName,onChange:e=>c("fullName",e.target.value),className:"".concat(xd," ").concat(l.fullName?gd:""),placeholder:"Enter your full name","aria-describedby":l.fullName?"fullName-error":void 0}),l.fullName&&(0,Nt.jsx)("div",{id:"fullName-error",className:yd,children:l.fullName})]}),(0,Nt.jsxs)("div",{className:ud,children:[(0,Nt.jsx)("label",{htmlFor:"title",className:vd,children:"Title"}),(0,Nt.jsx)("input",{id:"title",type:"text",value:a.title,onChange:e=>c("title",e.target.value),className:xd,placeholder:"e.g., Visual Designer, UI/UX Designer"})]}),(0,Nt.jsxs)("div",{className:ud,children:[(0,Nt.jsx)("label",{htmlFor:"school",className:vd,children:"School"}),(0,Nt.jsx)("input",{id:"school",type:"text",value:a.school,onChange:e=>c("school",e.target.value),className:xd,placeholder:"e.g., Art Institute of Chicago, Parsons School of Design"})]}),(0,Nt.jsxs)("div",{className:ud,children:[(0,Nt.jsx)("label",{htmlFor:"pronouns",className:vd,children:"Pronouns"}),(0,Nt.jsx)("input",{id:"pronouns",type:"text",value:a.pronouns,onChange:e=>c("pronouns",e.target.value),className:xd,placeholder:"e.g., she/her, they/them, he/him"})]}),(0,Nt.jsxs)("div",{className:md,children:[(0,Nt.jsx)("label",{className:vd,children:"Major & Minor"}),(0,Nt.jsxs)("div",{className:ou,children:[(0,Nt.jsxs)("div",{className:au,children:[null===(t=a.majors)||void 0===t?void 0:t.map((e,t)=>(0,Nt.jsxs)("div",{className:su,children:[(0,Nt.jsx)("span",{className:nu,children:e}),(0,Nt.jsx)("button",{type:"button",onClick:()=>u(e),className:iu,"aria-label":"Remove ".concat(e," major"),children:(0,Nt.jsx)("svg",{className:Yd,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},"major-".concat(t))),null===(r=a.minors)||void 0===r?void 0:r.map((e,t)=>(0,Nt.jsxs)("div",{className:su,children:[(0,Nt.jsx)("span",{className:nu,children:e}),(0,Nt.jsx)("button",{type:"button",onClick:()=>h(e),className:iu,"aria-label":"Remove ".concat(e," minor"),children:(0,Nt.jsx)("svg",{className:Yd,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},"minor-".concat(t)))]}),(0,Nt.jsx)("div",{className:lu,children:(0,Nt.jsx)(rh,{onAddMajor:d,disabled:!1})})]})]}),(0,Nt.jsxs)("div",{className:md,children:[(0,Nt.jsx)("label",{htmlFor:"bio",className:vd,children:"About"}),(0,Nt.jsx)("textarea",{id:"bio",value:a.bio,onChange:e=>c("bio",e.target.value),className:"".concat(pd," ").concat(l.bio?gd:""),placeholder:"Tell us about yourself...",rows:4,maxLength:280,"aria-describedby":l.bio?"bio-error":"bio-counter"}),(0,Nt.jsxs)("div",{className:fd,children:[(0,Nt.jsxs)("div",{id:"bio-counter",className:"".concat(wd," ").concat(a.bio.length>250?jd:""),children:[a.bio.length,"/280"]}),l.bio&&(0,Nt.jsx)("div",{id:"bio-error",className:yd,children:l.bio})]})]})]})]})},ah=e=>{let{isOpen:t,onClose:r,onSave:a,initialData:s={},fileName:i=""}=e;const[l,c]=(0,o.useState)({title:"",description:"",software:[],tags:[]}),[d,u]=(0,o.useState)({});(0,o.useEffect)(()=>{if(t){const e=i.replace(/\.[^/.]+$/,"")||"";c({title:s.title||e,description:s.description||"",software:Array.isArray(s.software)?s.software:[],tags:Array.isArray(s.tags)?s.tags:[]}),u({})}},[t,i,s]);const h=(e,t)=>{c(r=>(0,n.A)((0,n.A)({},r),{},{[e]:t})),d[e]&&u(t=>(0,n.A)((0,n.A)({},t),{},{[e]:""}))},m=()=>{r()};return t?(0,Nt.jsx)("div",{className:ju,children:(0,Nt.jsxs)("div",{className:Vu,children:[(0,Nt.jsxs)("div",{className:Ju,children:[(0,Nt.jsx)("h2",{children:"Edit Portfolio Item"}),(0,Nt.jsx)("button",{type:"button",className:Zu,onClick:m,children:"\xd7"})]}),(0,Nt.jsxs)("div",{className:Ku,children:[(0,Nt.jsxs)("div",{className:Yu,children:[(0,Nt.jsxs)("label",{htmlFor:"title",className:vd,children:["Title ",(0,Nt.jsx)("span",{className:Qu,children:"*"})]}),(0,Nt.jsx)("input",{type:"text",id:"title",value:l.title,onChange:e=>h("title",e.target.value),className:"".concat(xd," ").concat(d.title?$u:""),placeholder:"Enter your artwork title"}),d.title&&(0,Nt.jsx)("span",{className:Xu,children:d.title})]}),(0,Nt.jsxs)("div",{className:Yu,children:[(0,Nt.jsx)("label",{htmlFor:"description",className:vd,children:"Description"}),(0,Nt.jsx)("textarea",{id:"description",value:l.description,onChange:e=>h("description",e.target.value),className:bd,placeholder:"Describe your artwork, concept, or inspiration...",rows:4})]})]}),(0,Nt.jsxs)("div",{className:eh,children:[(0,Nt.jsx)("button",{type:"button",className:Yc,onClick:m,children:"Cancel"}),(0,Nt.jsx)("button",{type:"button",className:Qc,onClick:()=>{(()=>{const e={};return l.title.trim()||(e.title="Title is required"),u(e),0===Object.keys(e).length})()&&(a(l),r())},children:"Save"})]})]})}):null},sh=e=>{let{items:t,onChange:a,onDelete:s,onToggleVisibility:i}=e;const[l,c]=(0,o.useState)({isOpen:!1,itemId:null,itemTitle:""}),[d,u]=(0,o.useState)({isOpen:!1,itemId:null,itemData:null}),h=()=>{c({isOpen:!1,itemId:null,itemTitle:""})},m=()=>{u({isOpen:!1,itemId:null,itemData:null})};return(0,Nt.jsxs)("div",{className:od,children:[(0,Nt.jsx)("h3",{className:ad,children:"Portfolio"}),0===t.length?(0,Nt.jsxs)("div",{className:Bu,children:[(0,Nt.jsx)("div",{className:Gu,children:(0,Nt.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[(0,Nt.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,Nt.jsx)("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),(0,Nt.jsx)("polyline",{points:"21,15 16,10 5,21"})]})}),(0,Nt.jsx)("p",{className:Hu,children:"No works uploaded yet"}),(0,Nt.jsx)("p",{className:qu,children:"Upload your first work to start building your portfolio"})]}):(0,Nt.jsx)("div",{className:vu,children:t.map(e=>(0,Nt.jsxs)("div",{className:xu,children:[(0,Nt.jsxs)("div",{className:bu,children:[(0,Nt.jsx)("img",{src:e.image,alt:e.title,className:yu}),(0,Nt.jsxs)("div",{className:Pu,children:[(0,Nt.jsx)("button",{type:"button",onClick:()=>(e=>{let t=[],r=[];e.tags&&Array.isArray(e.tags)&&(t=e.tags.filter(e=>["Photoshop","Illustrator","Blender","Maya","3ds Max","Cinema 4D","After Effects","Premiere Pro","Figma","Sketch","Procreate","ZBrush","Substance Painter","Unity","Unreal Engine"].includes(e)),r=e.tags.filter(e=>e.startsWith("@"))),u({isOpen:!0,itemId:e.id,itemData:{title:e.title||"",description:e.description||"",software:t,tags:r}})})(e),className:Ru,title:"Edit work details",children:(0,Nt.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,Nt.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})}),(0,Nt.jsx)("button",{type:"button",onClick:()=>(e=>{const r=t.find(t=>t.id===e);if(r&&i)i(e,r.isPublic);else{const r=t.map(t=>t.id===e?(0,n.A)((0,n.A)({},t),{},{isPublic:!t.isPublic}):t);a(r)}})(e.id),className:"".concat(Du," ").concat(e.isPublic?Lu:Mu),title:e.isPublic?"Make Private":"Make Public",children:e.isPublic?(0,Nt.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,Nt.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})}):(0,Nt.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,Nt.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"})})}),(0,Nt.jsx)("button",{type:"button",onClick:()=>{return t=e.id,r=e.title,void c({isOpen:!0,itemId:t,itemTitle:r});var t,r},className:Tu,title:"Remove from portfolio",children:(0,Nt.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,Nt.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})})]}),(0,Nt.jsx)("div",{className:Fu,children:(0,Nt.jsx)("span",{className:"".concat(Uu," ").concat(e.isPublic?wu:Ou),children:e.isPublic?"Public":"Private"})})]}),(0,Nt.jsx)("div",{className:zu,children:(0,Nt.jsx)("h4",{className:Wu,children:e.title})})]},e.id))}),l.isOpen&&(0,Nt.jsx)("div",{className:ju,onClick:h,children:(0,Nt.jsxs)("div",{className:ku,onClick:e=>e.stopPropagation(),children:[(0,Nt.jsx)("div",{className:Nu,children:(0,Nt.jsx)("h3",{className:Su,children:"Delete Work"})}),(0,Nt.jsxs)("div",{className:Cu,children:[(0,Nt.jsxs)("p",{children:["Are you sure you want to delete"," ",(0,Nt.jsxs)("strong",{children:['"',l.itemTitle,'"']})," from your portfolio?"]}),(0,Nt.jsx)("p",{className:Au,children:"This action cannot be undone."})]}),(0,Nt.jsxs)("div",{className:_u,children:[(0,Nt.jsx)("button",{type:"button",onClick:h,className:Iu,children:"Cancel"}),(0,Nt.jsx)("button",{type:"button",onClick:()=>{if(l.itemId){if(s)s(l.itemId);else{const e=t.filter(e=>e.id!==l.itemId);a(e)}h()}},className:Eu,children:"Delete"})]})]})}),(0,Nt.jsx)(ah,{isOpen:d.isOpen,onClose:m,onSave:async e=>{if(d.itemId)try{const{updatePortfolioItem:o}=await Promise.resolve().then(r.bind(r,200)),s=await o(d.itemId,{title:e.title,description:e.description,tags:[...e.software,...e.tags,"uploaded"]});if(s.success){const r=t.map(t=>t.id===d.itemId?(0,n.A)((0,n.A)({},t),{},{title:e.title,description:e.description,software:e.software,tags:[...e.software,...e.tags,"uploaded"]}):t);a(r),m()}else console.error("Failed to update portfolio item:",s.error),alert("Failed to update work details. Please try again.")}catch(o){console.error("Error updating portfolio item:",o),alert("Failed to update work details. Please try again.")}},initialData:d.itemData||{}})]})},nh=1.375,ih=.5,lh=4,ch=.1,dh=1,uh=.1,hh="Update Profile Photo",mh="Choose Photo",ph="Upload Successful!",gh="Your profile photo has been updated.",fh="Done",vh="Cancel",xh="Save",bh="Uploading...",yh="Zoom",wh="Choose a new profile photo",jh="Current avatar",kh={CROPPER:{containerStyle:{width:"100%",height:"100%",backgroundColor:"#f3f4f6"},cropAreaStyle:{border:"2px solid #8b5cf6",borderRadius:"50%",boxShadow:"0 0 0 9999px rgba(0, 0, 0, 0.3)"},mediaStyle:{width:"100%",height:"100%",objectFit:"contain"}}},Nh=e=>{let{onCancel:t,error:r}=e;return(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Nt.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:hh}),(0,Nt.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:(0,Nt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r&&(0,Nt.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,Nt.jsx)("p",{className:"text-red-600 text-sm",children:r})})]})},Sh=e=>{let{currentAvatar:t,onUploadClick:r,onFileChange:o,fileInputRef:a}=e;return(0,Nt.jsxs)("div",{className:"text-center",children:[(0,Nt.jsx)("div",{className:"mb-4",children:(0,Nt.jsx)("img",{src:t,alt:jh,className:"w-24 h-24 rounded-full mx-auto border-2 border-gray-200",onError:e=>{e.target.style.display="none",e.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiByeD0iNjQiIGZpbGw9IiNGM0Y0RjYiLz4KPHN2ZyB4PSIzMiIgeT0iMjQiIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSIjOEM5Q0E2Ij4KPHBhdGggZD0iTTEyIDEyYzIuMjEgMCA0LTEuNzkgNC00cy0xLjc5LTQtNC00LTQgMS43OS00IDQgMS43OSA0IDQgNHptMCAyYy0yLjY3IDAtOCAxLjM0LTggNHYyaDE2di0yYzAtMi42Ni01LjMzLTQtOC00eiIvPgo8L3N2Zz4KPC9zdmc+",e.target.style.display="block"}})}),(0,Nt.jsx)("p",{className:"text-gray-600 mb-4",children:wh}),(0,Nt.jsx)("button",{onClick:r,className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:mh}),(0,Nt.jsx)("input",{ref:a,type:"file",accept:"image/jpeg,image/png,image/webp",onChange:o,className:"hidden"})]})};var Ch=function(e,t){return Ch=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},Ch(e,t)};function Ah(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Ch(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var _h=function(){return _h=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},_h.apply(this,arguments)};Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var Ih=r(185),Eh=r.n(Ih);function Ph(e,t,r,o,a){void 0===a&&(a=0);var s=Uh(t.width,t.height,a),n=s.width,i=s.height;return{x:Dh(e.x,n,r.width,o),y:Dh(e.y,i,r.height,o)}}function Dh(e,t,r,o){var a=t*o/2-r/2;return Oh(e,-a,a)}function Th(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function Lh(e,t){return 180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI}function Mh(e,t){return Math.min(e,Math.max(0,t))}function Rh(e,t){return t}function Fh(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function Uh(e,t,r){var o=r*Math.PI/180;return{width:Math.abs(Math.cos(o)*e)+Math.abs(Math.sin(o)*t),height:Math.abs(Math.sin(o)*e)+Math.abs(Math.cos(o)*t)}}function Oh(e,t,r){return Math.min(Math.max(e,t),r)}function zh(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(function(e){return"string"===typeof e&&e.length>0}).join(" ").trim()}var Wh=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.cropperRef=o.createRef(),r.imageRef=o.createRef(),r.videoRef=o.createRef(),r.containerPosition={x:0,y:0},r.containerRef=null,r.styleRef=null,r.containerRect=null,r.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},r.dragStartPosition={x:0,y:0},r.dragStartCrop={x:0,y:0},r.gestureZoomStart=0,r.gestureRotationStart=0,r.isTouching=!1,r.lastPinchDistance=0,r.lastPinchRotation=0,r.rafDragTimeout=null,r.rafPinchTimeout=null,r.wheelTimer=null,r.currentDoc="undefined"!==typeof document?document:null,r.currentWindow="undefined"!==typeof window?window:null,r.resizeObserver=null,r.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},r.initResizeObserver=function(){if("undefined"!==typeof window.ResizeObserver&&r.containerRef){var e=!0;r.resizeObserver=new window.ResizeObserver(function(t){e?e=!1:r.computeSizes()}),r.resizeObserver.observe(r.containerRef)}},r.preventZoomSafari=function(e){return e.preventDefault()},r.cleanEvents=function(){r.currentDoc&&(r.currentDoc.removeEventListener("mousemove",r.onMouseMove),r.currentDoc.removeEventListener("mouseup",r.onDragStopped),r.currentDoc.removeEventListener("touchmove",r.onTouchMove),r.currentDoc.removeEventListener("touchend",r.onDragStopped),r.currentDoc.removeEventListener("gesturechange",r.onGestureChange),r.currentDoc.removeEventListener("gestureend",r.onGestureEnd),r.currentDoc.removeEventListener("scroll",r.onScroll))},r.clearScrollEvent=function(){r.containerRef&&r.containerRef.removeEventListener("wheel",r.onWheel),r.wheelTimer&&clearTimeout(r.wheelTimer)},r.onMediaLoad=function(){var e=r.computeSizes();e&&(r.emitCropData(),r.setInitialCrop(e)),r.props.onMediaLoaded&&r.props.onMediaLoaded(r.mediaSize)},r.setInitialCrop=function(e){if(r.props.initialCroppedAreaPercentages){var t=function(e,t,r,o,a,s){var n=Uh(t.width,t.height,r),i=Oh(o.width/n.width*(100/e.width),a,s);return{crop:{x:i*n.width/2-o.width/2-n.width*i*(e.x/100),y:i*n.height/2-o.height/2-n.height*i*(e.y/100)},zoom:i}}(r.props.initialCroppedAreaPercentages,r.mediaSize,r.props.rotation,e,r.props.minZoom,r.props.maxZoom),o=t.crop,a=t.zoom;r.props.onCropChange(o),r.props.onZoomChange&&r.props.onZoomChange(a)}else if(r.props.initialCroppedAreaPixels){var s=function(e,t,r,o,a,s){void 0===r&&(r=0);var n=Uh(t.naturalWidth,t.naturalHeight,r),i=Oh(function(e,t,r){var o=function(e){return e.width>e.height?e.width/e.naturalWidth:e.height/e.naturalHeight}(t);return r.height>r.width?r.height/(e.height*o):r.width/(e.width*o)}(e,t,o),a,s),l=o.height>o.width?o.height/e.height:o.width/e.width;return{crop:{x:((n.width-e.width)/2-e.x)*l,y:((n.height-e.height)/2-e.y)*l},zoom:i}}(r.props.initialCroppedAreaPixels,r.mediaSize,r.props.rotation,e,r.props.minZoom,r.props.maxZoom);o=s.crop,a=s.zoom;r.props.onCropChange(o),r.props.onZoomChange&&r.props.onZoomChange(a)}},r.computeSizes=function(){var e,t,o,a,s,n,i=r.imageRef.current||r.videoRef.current;if(i&&r.containerRef){r.containerRect=r.containerRef.getBoundingClientRect(),r.saveContainerPosition();var l=r.containerRect.width/r.containerRect.height,c=(null===(e=r.imageRef.current)||void 0===e?void 0:e.naturalWidth)||(null===(t=r.videoRef.current)||void 0===t?void 0:t.videoWidth)||0,d=(null===(o=r.imageRef.current)||void 0===o?void 0:o.naturalHeight)||(null===(a=r.videoRef.current)||void 0===a?void 0:a.videoHeight)||0,u=c/d,h=void 0;if(i.offsetWidth<c||i.offsetHeight<d)switch(r.state.mediaObjectFit){default:case"contain":h=l>u?{width:r.containerRect.height*u,height:r.containerRect.height}:{width:r.containerRect.width,height:r.containerRect.width/u};break;case"horizontal-cover":h={width:r.containerRect.width,height:r.containerRect.width/u};break;case"vertical-cover":h={width:r.containerRect.height*u,height:r.containerRect.height}}else h={width:i.offsetWidth,height:i.offsetHeight};r.mediaSize=_h(_h({},h),{naturalWidth:c,naturalHeight:d}),r.props.setMediaSize&&r.props.setMediaSize(r.mediaSize);var m=r.props.cropSize?r.props.cropSize:function(e,t,r,o,a,s){void 0===s&&(s=0);var n=Uh(e,t,s),i=n.width,l=n.height,c=Math.min(i,r),d=Math.min(l,o);return c>d*a?{width:d*a,height:d}:{width:c,height:c/a}}(r.mediaSize.width,r.mediaSize.height,r.containerRect.width,r.containerRect.height,r.props.aspect,r.props.rotation);return(null===(s=r.state.cropSize)||void 0===s?void 0:s.height)===m.height&&(null===(n=r.state.cropSize)||void 0===n?void 0:n.width)===m.width||r.props.onCropSizeChange&&r.props.onCropSizeChange(m),r.setState({cropSize:m},r.recomputeCropPosition),r.props.setCropSize&&r.props.setCropSize(m),m}},r.saveContainerPosition=function(){if(r.containerRef){var e=r.containerRef.getBoundingClientRect();r.containerPosition={x:e.left,y:e.top}}},r.onMouseDown=function(e){r.currentDoc&&(e.preventDefault(),r.currentDoc.addEventListener("mousemove",r.onMouseMove),r.currentDoc.addEventListener("mouseup",r.onDragStopped),r.saveContainerPosition(),r.onDragStart(t.getMousePoint(e)))},r.onMouseMove=function(e){return r.onDrag(t.getMousePoint(e))},r.onScroll=function(e){r.currentDoc&&(e.preventDefault(),r.saveContainerPosition())},r.onTouchStart=function(e){r.currentDoc&&(r.isTouching=!0,r.props.onTouchRequest&&!r.props.onTouchRequest(e)||(r.currentDoc.addEventListener("touchmove",r.onTouchMove,{passive:!1}),r.currentDoc.addEventListener("touchend",r.onDragStopped),r.saveContainerPosition(),2===e.touches.length?r.onPinchStart(e):1===e.touches.length&&r.onDragStart(t.getTouchPoint(e.touches[0]))))},r.onTouchMove=function(e){e.preventDefault(),2===e.touches.length?r.onPinchMove(e):1===e.touches.length&&r.onDrag(t.getTouchPoint(e.touches[0]))},r.onGestureStart=function(e){r.currentDoc&&(e.preventDefault(),r.currentDoc.addEventListener("gesturechange",r.onGestureChange),r.currentDoc.addEventListener("gestureend",r.onGestureEnd),r.gestureZoomStart=r.props.zoom,r.gestureRotationStart=r.props.rotation)},r.onGestureChange=function(e){if(e.preventDefault(),!r.isTouching){var o=t.getMousePoint(e),a=r.gestureZoomStart-1+e.scale;if(r.setNewZoom(a,o,{shouldUpdatePosition:!0}),r.props.onRotationChange){var s=r.gestureRotationStart+e.rotation;r.props.onRotationChange(s)}}},r.onGestureEnd=function(e){r.cleanEvents()},r.onDragStart=function(e){var t,o,a=e.x,s=e.y;r.dragStartPosition={x:a,y:s},r.dragStartCrop=_h({},r.props.crop),null===(o=(t=r.props).onInteractionStart)||void 0===o||o.call(t)},r.onDrag=function(e){var t=e.x,o=e.y;r.currentWindow&&(r.rafDragTimeout&&r.currentWindow.cancelAnimationFrame(r.rafDragTimeout),r.rafDragTimeout=r.currentWindow.requestAnimationFrame(function(){if(r.state.cropSize&&void 0!==t&&void 0!==o){var e=t-r.dragStartPosition.x,a=o-r.dragStartPosition.y,s={x:r.dragStartCrop.x+e,y:r.dragStartCrop.y+a},n=r.props.restrictPosition?Ph(s,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):s;r.props.onCropChange(n)}}))},r.onDragStopped=function(){var e,t;r.isTouching=!1,r.cleanEvents(),r.emitCropData(),null===(t=(e=r.props).onInteractionEnd)||void 0===t||t.call(e)},r.onWheel=function(e){if(r.currentWindow&&(!r.props.onWheelRequest||r.props.onWheelRequest(e))){e.preventDefault();var o=t.getMousePoint(e),a=Eh()(e).pixelY,s=r.props.zoom-a*r.props.zoomSpeed/200;r.setNewZoom(s,o,{shouldUpdatePosition:!0}),r.state.hasWheelJustStarted||r.setState({hasWheelJustStarted:!0},function(){var e,t;return null===(t=(e=r.props).onInteractionStart)||void 0===t?void 0:t.call(e)}),r.wheelTimer&&clearTimeout(r.wheelTimer),r.wheelTimer=r.currentWindow.setTimeout(function(){return r.setState({hasWheelJustStarted:!1},function(){var e,t;return null===(t=(e=r.props).onInteractionEnd)||void 0===t?void 0:t.call(e)})},250)}},r.getPointOnContainer=function(e,t){var o=e.x,a=e.y;if(!r.containerRect)throw new Error("The Cropper is not mounted");return{x:r.containerRect.width/2-(o-t.x),y:r.containerRect.height/2-(a-t.y)}},r.getPointOnMedia=function(e){var t=e.x,o=e.y,a=r.props,s=a.crop,n=a.zoom;return{x:(t+s.x)/n,y:(o+s.y)/n}},r.setNewZoom=function(e,t,o){var a=(void 0===o?{}:o).shouldUpdatePosition,s=void 0===a||a;if(r.state.cropSize&&r.props.onZoomChange){var n=Oh(e,r.props.minZoom,r.props.maxZoom);if(s){var i=r.getPointOnContainer(t,r.containerPosition),l=r.getPointOnMedia(i),c={x:l.x*n-i.x,y:l.y*n-i.y},d=r.props.restrictPosition?Ph(c,r.mediaSize,r.state.cropSize,n,r.props.rotation):c;r.props.onCropChange(d)}r.props.onZoomChange(n)}},r.getCropData=function(){return r.state.cropSize?function(e,t,r,o,a,s,n){void 0===s&&(s=0),void 0===n&&(n=!0);var i=n?Mh:Rh,l=Uh(t.width,t.height,s),c=Uh(t.naturalWidth,t.naturalHeight,s),d={x:i(100,((l.width-r.width/a)/2-e.x/a)/l.width*100),y:i(100,((l.height-r.height/a)/2-e.y/a)/l.height*100),width:i(100,r.width/l.width*100/a),height:i(100,r.height/l.height*100/a)},u=Math.round(i(c.width,d.width*c.width/100)),h=Math.round(i(c.height,d.height*c.height/100)),m=c.width>=c.height*o?{width:Math.round(h*o),height:h}:{width:u,height:Math.round(u/o)};return{croppedAreaPercentages:d,croppedAreaPixels:_h(_h({},m),{x:Math.round(i(c.width-m.width,d.x*c.width/100)),y:Math.round(i(c.height-m.height,d.y*c.height/100))})}}(r.props.restrictPosition?Ph(r.props.crop,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):r.props.crop,r.mediaSize,r.state.cropSize,r.getAspect(),r.props.zoom,r.props.rotation,r.props.restrictPosition):null},r.emitCropData=function(){var e=r.getCropData();if(e){var t=e.croppedAreaPercentages,o=e.croppedAreaPixels;r.props.onCropComplete&&r.props.onCropComplete(t,o),r.props.onCropAreaChange&&r.props.onCropAreaChange(t,o)}},r.emitCropAreaChange=function(){var e=r.getCropData();if(e){var t=e.croppedAreaPercentages,o=e.croppedAreaPixels;r.props.onCropAreaChange&&r.props.onCropAreaChange(t,o)}},r.recomputeCropPosition=function(){if(r.state.cropSize){var e=r.props.restrictPosition?Ph(r.props.crop,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):r.props.crop;r.props.onCropChange(e),r.emitCropData()}},r.onKeyDown=function(e){var t,o,a=r.props,s=a.crop,n=a.onCropChange,i=a.keyboardStep,l=a.zoom,c=a.rotation,d=i;if(r.state.cropSize){e.shiftKey&&(d*=.2);var u=_h({},s);switch(e.key){case"ArrowUp":u.y-=d,e.preventDefault();break;case"ArrowDown":u.y+=d,e.preventDefault();break;case"ArrowLeft":u.x-=d,e.preventDefault();break;case"ArrowRight":u.x+=d,e.preventDefault();break;default:return}r.props.restrictPosition&&(u=Ph(u,r.mediaSize,r.state.cropSize,l,c)),e.repeat||null===(o=(t=r.props).onInteractionStart)||void 0===o||o.call(t),n(u)}},r.onKeyUp=function(e){var t,o;switch(e.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":e.preventDefault();break;default:return}r.emitCropData(),null===(o=(t=r.props).onInteractionEnd)||void 0===o||o.call(t)},r}return Ah(t,e),t.prototype.componentDidMount=function(){this.currentDoc&&this.currentWindow&&(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),"undefined"===typeof window.ResizeObserver&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=".reactEasyCrop_Container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  user-select: none;\n  touch-action: none;\n  cursor: move;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.reactEasyCrop_Image,\n.reactEasyCrop_Video {\n  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */\n}\n\n.reactEasyCrop_Contain {\n  max-width: 100%;\n  max-height: 100%;\n  margin: auto;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.reactEasyCrop_Cover_Horizontal {\n  width: 100%;\n  height: auto;\n}\n.reactEasyCrop_Cover_Vertical {\n  width: auto;\n  height: 100%;\n}\n\n.reactEasyCrop_CropArea {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  box-sizing: border-box;\n  box-shadow: 0 0 0 9999em;\n  color: rgba(0, 0, 0, 0.5);\n  overflow: hidden;\n}\n\n.reactEasyCrop_CropAreaRound {\n  border-radius: 50%;\n}\n\n.reactEasyCrop_CropAreaGrid::before {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 0;\n  bottom: 0;\n  left: 33.33%;\n  right: 33.33%;\n  border-top: 0;\n  border-bottom: 0;\n}\n\n.reactEasyCrop_CropAreaGrid::after {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 33.33%;\n  bottom: 33.33%;\n  left: 0;\n  right: 0;\n  border-left: 0;\n  border-right: 0;\n}\n",this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},t.prototype.componentWillUnmount=function(){var e,t;this.currentDoc&&this.currentWindow&&("undefined"===typeof window.ResizeObserver&&this.currentWindow.removeEventListener("resize",this.computeSizes),null===(e=this.resizeObserver)||void 0===e||e.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&(null===(t=this.styleRef.parentNode)||void 0===t||t.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},t.prototype.componentDidUpdate=function(e){var t,r,o,a,s,n,i,l,c;e.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):e.aspect!==this.props.aspect||e.objectFit!==this.props.objectFit?this.computeSizes():e.zoom!==this.props.zoom?this.recomputeCropPosition():(null===(t=e.cropSize)||void 0===t?void 0:t.height)!==(null===(r=this.props.cropSize)||void 0===r?void 0:r.height)||(null===(o=e.cropSize)||void 0===o?void 0:o.width)!==(null===(a=this.props.cropSize)||void 0===a?void 0:a.width)?this.computeSizes():(null===(s=e.crop)||void 0===s?void 0:s.x)===(null===(n=this.props.crop)||void 0===n?void 0:n.x)&&(null===(i=e.crop)||void 0===i?void 0:i.y)===(null===(l=this.props.crop)||void 0===l?void 0:l.y)||this.emitCropAreaChange(),e.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),e.video!==this.props.video&&(null===(c=this.videoRef.current)||void 0===c||c.load());var d=this.getObjectFit();d!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:d},this.computeSizes)},t.prototype.getAspect=function(){var e=this.props,t=e.cropSize,r=e.aspect;return t?t.width/t.height:r},t.prototype.getObjectFit=function(){var e,t,r,o;if("cover"===this.props.objectFit){if((this.imageRef.current||this.videoRef.current)&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var a=this.containerRect.width/this.containerRect.height;return((null===(e=this.imageRef.current)||void 0===e?void 0:e.naturalWidth)||(null===(t=this.videoRef.current)||void 0===t?void 0:t.videoWidth)||0)/((null===(r=this.imageRef.current)||void 0===r?void 0:r.naturalHeight)||(null===(o=this.videoRef.current)||void 0===o?void 0:o.videoHeight)||0)<a?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},t.prototype.onPinchStart=function(e){var r=t.getTouchPoint(e.touches[0]),o=t.getTouchPoint(e.touches[1]);this.lastPinchDistance=Th(r,o),this.lastPinchRotation=Lh(r,o),this.onDragStart(Fh(r,o))},t.prototype.onPinchMove=function(e){var r=this;if(this.currentDoc&&this.currentWindow){var o=t.getTouchPoint(e.touches[0]),a=t.getTouchPoint(e.touches[1]),s=Fh(o,a);this.onDrag(s),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var e=Th(o,a),t=r.props.zoom*(e/r.lastPinchDistance);r.setNewZoom(t,s,{shouldUpdatePosition:!1}),r.lastPinchDistance=e;var n=Lh(o,a),i=r.props.rotation+(n-r.lastPinchRotation);r.props.onRotationChange&&r.props.onRotationChange(i),r.lastPinchRotation=n})}},t.prototype.render=function(){var e,t=this,r=this.props,a=r.image,s=r.video,n=r.mediaProps,i=r.cropperProps,l=r.transform,c=r.crop,d=c.x,u=c.y,h=r.rotation,m=r.zoom,p=r.cropShape,g=r.showGrid,f=r.roundCropAreaPixels,v=r.style,x=v.containerStyle,b=v.cropAreaStyle,y=v.mediaStyle,w=r.classes,j=w.containerClassName,k=w.cropAreaClassName,N=w.mediaClassName,S=null!==(e=this.state.mediaObjectFit)&&void 0!==e?e:this.getObjectFit();return o.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(e){return t.containerRef=e},"data-testid":"container",style:x,className:zh("reactEasyCrop_Container",j)},a?o.createElement("img",_h({alt:"",className:zh("reactEasyCrop_Image","contain"===S&&"reactEasyCrop_Contain","horizontal-cover"===S&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===S&&"reactEasyCrop_Cover_Vertical",N)},n,{src:a,ref:this.imageRef,style:_h(_h({},y),{transform:l||"translate(".concat(d,"px, ").concat(u,"px) rotate(").concat(h,"deg) scale(").concat(m,")")}),onLoad:this.onMediaLoad})):s&&o.createElement("video",_h({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:zh("reactEasyCrop_Video","contain"===S&&"reactEasyCrop_Contain","horizontal-cover"===S&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===S&&"reactEasyCrop_Cover_Vertical",N)},n,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:_h(_h({},y),{transform:l||"translate(".concat(d,"px, ").concat(u,"px) rotate(").concat(h,"deg) scale(").concat(m,")")}),controls:!1}),(Array.isArray(s)?s:[{src:s}]).map(function(e){return o.createElement("source",_h({key:e.src},e))})),this.state.cropSize&&o.createElement("div",_h({ref:this.cropperRef,style:_h(_h({},b),{width:f?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:f?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:zh("reactEasyCrop_CropArea","round"===p&&"reactEasyCrop_CropAreaRound",g&&"reactEasyCrop_CropAreaGrid",k)},i)))},t.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:3,minZoom:1,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:1},t.getMousePoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},t.getTouchPoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},t}(o.Component);const Bh=e=>{let{previewUrl:t,crop:r,zoom:o,isUploading:a,uploadProgress:s,croppedAreaPixels:n,onCropChange:i,onZoomChange:l,onCropComplete:c,onCancel:d,onConfirmCrop:u}=e;return(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("div",{className:"mb-4",children:(0,Nt.jsx)("div",{className:"relative w-full h-64 bg-gray-100 rounded-lg overflow-hidden",children:(0,Nt.jsx)(Wh,{image:t,crop:r,zoom:o,aspect:dh,onCropChange:i,onZoomChange:l,onCropComplete:c,showGrid:!1,objectFit:"contain",minZoom:ih,maxZoom:lh,wheelZoomRatio:uh,style:kh.CROPPER})})}),(0,Nt.jsxs)("div",{className:"mb-4",children:[(0,Nt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:yh}),(0,Nt.jsx)("input",{type:"range",min:ih,max:lh,step:ch,value:o,onChange:e=>l(Number(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),a&&(0,Nt.jsxs)("div",{className:"mb-4",children:[(0,Nt.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-1",children:[(0,Nt.jsx)("span",{children:bh}),(0,Nt.jsxs)("span",{children:[s,"%"]})]}),(0,Nt.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,Nt.jsx)("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(s,"%")}})})]}),(0,Nt.jsxs)("div",{className:"flex gap-3",children:[(0,Nt.jsx)("button",{onClick:d,disabled:a,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:vh}),(0,Nt.jsx)("button",{onClick:u,disabled:a||!n,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50",children:a?bh:xh})]})]})},Gh=e=>{let{onComplete:t}=e;return(0,Nt.jsxs)("div",{className:"text-center",children:[(0,Nt.jsx)("div",{className:"mb-4",children:(0,Nt.jsx)("div",{className:"w-24 h-24 rounded-full mx-auto border-2 border-green-200 bg-green-50 flex items-center justify-center",children:(0,Nt.jsx)("svg",{className:"w-12 h-12 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),(0,Nt.jsx)("p",{className:"text-green-600 font-medium mb-2",children:ph}),(0,Nt.jsx)("p",{className:"text-gray-600 mb-4",children:gh}),(0,Nt.jsx)("button",{onClick:t,className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors",children:fh})]})},Hh=()=>{const[e,t]=(0,o.useState)(!1),[r,a]=(0,o.useState)(0),[s,n]=(0,o.useState)(null);return{isUploading:e,uploadProgress:r,error:s,handleFileSelect:(0,o.useCallback)(async e=>{try{n(null),(e=>{if(!["image/jpeg","image/png","image/webp"].includes(e.type))throw new Error("Please select a valid image file (JPG, PNG, WebP)");if(e.size>5242880)throw new Error("File size must be less than 5MB")})(e);const t=await new Promise((t,r)=>{const o=new FileReader;o.onload=()=>t(o.result),o.onerror=()=>r(new Error("Failed to read file")),o.readAsDataURL(e)});return console.log("[handleFileSelect] Generated preview URL:",null===t||void 0===t?void 0:t.substring(0,30)),{file:e,previewUrl:t}}catch(t){return n(t.message),null}},[]),handleCropComplete:(0,o.useCallback)(async(e,r,o)=>{try{t(!0),a(10),console.log("[handleCropComplete] Input parameters:",{imageNaturalWidth:e.naturalWidth,imageNaturalHeight:e.naturalHeight,crop:r,pixelCrop:o});const s=function(e,t,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:512;const a=document.createElement("canvas"),s=a.getContext("2d");return a.width=o,a.height=o,s.drawImage(e,r.x,r.y,r.width,r.height,0,0,o,o),console.log("[cropImageToCanvas] Image dimensions:",{naturalWidth:e.naturalWidth,naturalHeight:e.naturalHeight}),console.log("[cropImageToCanvas] Pixel crop:",r),console.log("[cropImageToCanvas] Output size:",o),a}(e,r,o,512);a(30);const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.85;const r=e.toDataURL("image/webp",t);return console.log("[exportToDataURL] Canvas dimensions:",{width:e.width,height:e.height}),console.log("[exportToDataURL] Generated dataURL length:",null===r||void 0===r?void 0:r.length),console.log("[exportToDataURL] Generated dataURL preview:",null===r||void 0===r?void 0:r.substring(0,50)),r}(s,.85);a(50),console.log("[useAvatarUpload] Generated dataURL:",null===n||void 0===n?void 0:n.substring(0,30));const i=await(0,Rr.QU)();if(!i)throw new Error("User not authenticated. Please log in again.");a(80);const l=await po(n,i);if(a(100),await new Promise(e=>setTimeout(e,500)),!l.success)throw new Error(l.error);return console.log("[useAvatarUpload] Upload successful, returning:",l.data),l.data}catch(s){throw console.error("[useAvatarUpload] Upload failed:",s),n(s.message),s}finally{t(!1),a(0)}},[]),cleanup:(0,o.useCallback)(e=>{console.log("[cleanup] Data URL cleanup completed")},[])}},qh=e=>{let{isOpen:t,onClose:r,onAvatarUpdate:a,currentAvatar:s}=e;const n=(e=>{const[t,r]=(0,o.useState)({x:0,y:0}),[a,s]=(0,o.useState)(nh),[n,i]=(0,o.useState)(null),[l,c]=(0,o.useState)(null),[d,u]=(0,o.useState)(null),[h,m]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{e&&(r({x:0,y:0}),s(nh),i(null),c(null),u(null),m(!1))},[e]),{crop:t,zoom:a,croppedAreaPixels:n,selectedImage:l,previewUrl:d,uploadCompleted:h,setCrop:r,setZoom:s,setCroppedAreaPixels:i,setSelectedImage:c,setPreviewUrl:u,setUploadCompleted:m,resetState:()=>{r({x:0,y:0}),s(nh),i(null),c(null),u(null),m(!1)}}})(t),{crop:i,zoom:l,croppedAreaPixels:c,selectedImage:d,previewUrl:u,uploadCompleted:h,setCrop:m,setZoom:p}=n,g=((e,t,r,a)=>{const{selectedImage:s,previewUrl:n,croppedAreaPixels:i,crop:l}=e,{setSelectedImage:c,setPreviewUrl:d,setCrop:u,setZoom:h,setCroppedAreaPixels:m,setUploadCompleted:p,resetState:g}=t,f=(0,o.useRef)(null),{isUploading:v,uploadProgress:x,error:b,handleFileSelect:y,handleCropComplete:w,cleanup:j}=Hh(),k=(0,o.useCallback)(async e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!r)return;const o=await y(r);o&&(c(o.file),d(o.previewUrl),u({x:0,y:0}),h(nh))},[y,c,d,u,h]),N=(0,o.useCallback)((e,t)=>{m(t)},[m]),S=(0,o.useCallback)(async()=>{if(console.log("[AvatarCropModal] handleConfirmCrop called"),console.log("[AvatarCropModal] selectedImage:",!!s),console.log("[AvatarCropModal] croppedAreaPixels:",!!i),s&&i)try{var e;const t=new Image;t.src=n,await new Promise(e=>{t.onload=e}),console.log("[AvatarCropModal] Image loaded, calling handleCropComplete");const r=await w(t,l,i);if(console.log("[AvatarCropModal] Crop result:",r),!r.avatarUrl||!r.avatarUrl.startsWith("data:image/")&&!r.avatarUrl.startsWith("http"))throw console.error("[AvatarCropModal] Invalid avatarUrl format:",r.avatarUrl),new Error("Invalid avatar URL format");console.log("[AvatarCropModal] Calling onAvatarUpdate with:",null===(e=r.avatarUrl)||void 0===e?void 0:e.substring(0,30)),a(r.avatarUrl,r.avatarUpdatedAt),j(n),p(!0)}catch(t){console.error("Crop failed:",t)}else console.error("[AvatarCropModal] Missing required data for crop")},[s,i,l,w,a,j,n,p]),C=(0,o.useCallback)(()=>{j(n),g(),r()},[j,n,g,r]),A=(0,o.useCallback)(()=>{p(!1),r()},[p,r]),_=(0,o.useCallback)(()=>{var e;null===(e=f.current)||void 0===e||e.click()},[]);return{fileInputRef:f,isUploading:v,uploadProgress:x,error:b,handleFileChange:k,onCropComplete:N,handleConfirmCrop:S,handleCancel:C,handleComplete:A,handleUploadClick:_}})(n,n,r,a),{fileInputRef:f,isUploading:v,uploadProgress:x,error:b,handleFileChange:y,onCropComplete:w,handleConfirmCrop:j,handleCancel:k,handleComplete:N,handleUploadClick:S}=g;return t?(0,Nt.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,Nt.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,Nt.jsx)(Nh,{onCancel:k,error:b}),h?(0,Nt.jsx)(Gh,{onComplete:N}):d?(0,Nt.jsx)(Bh,{previewUrl:u,crop:i,zoom:l,isUploading:v,uploadProgress:x,croppedAreaPixels:c,onCropChange:m,onZoomChange:p,onCropComplete:w,onCancel:k,onConfirmCrop:j}):(0,Nt.jsx)(Sh,{currentAvatar:s,onUploadClick:S,onFileChange:y,fileInputRef:f})]})}):null},Vh=e=>{let{avatar:t,onAvatarChange:r}=e;const[a,s]=(0,o.useState)(!1),[n,i]=(0,o.useState)(null),[l,c]=(0,o.useState)(t);(0,o.useEffect)(()=>{t&&t!==l&&(console.log("[ProfilePhotoCard] Avatar prop changed:",null===t||void 0===t?void 0:t.substring(0,30)),c(t))},[t,l]),(0,o.useEffect)(()=>{(async()=>{if(!l&&"undefined"!==typeof window)try{const t=await(0,Rr.WR)();if(t){const r=window.localStorage.getItem("tag.avatars.".concat(t));if(r){const t=JSON.parse(r);var e;if(t&&t.avatarUrl)console.log("[ProfilePhotoCard] Initialized from localStorage:",null===(e=t.avatarUrl)||void 0===e?void 0:e.substring(0,30)),c(t.avatarUrl)}}}catch(t){console.warn("[ProfilePhotoCard] Failed to read avatar from localStorage:",t)}})()},[l]);const d="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiByeD0iNjQiIGZpbGw9IiNGM0Y0RjYiLz4KPHN2ZyB4PSIzMiIgeT0iMjQiIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSIjOEM5Q0E2Ij4KPHBhdGggZD0iTTEyIDEyYzIuMjEgMCA0LTEuNzkgNC00cy0xLjc5LTQtNC00LTQgMS43OS00IDQgMS43OSA0IDQgNHptMCAyYy0yLjY3IDAtOCAxLjM0LTggNHYyaDE2di0yYzAtMi42Ni01LjMzLTQtOC00eiIvPgo8L3N2Zz4KPC9zdmc+",[u,h]=(0,o.useState)(null);(0,o.useEffect)(()=>{(async()=>{if(l)if(l.startsWith("data:image/"))h(l);else try{const e=await(0,Rr.WR)();if(e){const t=await go(e);h(t||l)}else h(l)}catch(e){console.error("[ProfilePhotoCard] Failed to get avatar URL:",e),h(l)}else h(null)})()},[l]);const m=(0,o.useCallback)(async(e,t)=>{if(console.log("[ProfilePhotoCard] Received new avatar URL:",null===e||void 0===e?void 0:e.substring(0,30)),console.log("[ProfilePhotoCard] Avatar URL type:",typeof e),console.log("[ProfilePhotoCard] Full avatar URL:",e),e&&(e.startsWith("data:image/")||e.startsWith("http"))){c(e),i(t),r(e);try{await(0,Pt.$u)(e)?console.log("[ProfilePhotoCard] Successfully updated unified avatar"):console.error("[ProfilePhotoCard] Failed to update unified avatar")}catch(o){console.error("[ProfilePhotoCard] Error updating unified avatar:",o)}console.log("[onAvatarUpdate] prefix:",null===e||void 0===e?void 0:e.substring(0,4)),console.log("[ProfilePhotoCard] Successfully updated avatar"),s(!1)}else console.error("[ProfilePhotoCard] Invalid avatar URL format:",e)},[r]),p=(0,o.useCallback)(()=>{s(!0)},[]),g=(0,o.useCallback)(()=>{s(!1)},[]);return(0,Nt.jsxs)("div",{className:od,children:[(0,Nt.jsx)("h3",{className:ad,children:"Profile Photo"}),(0,Nt.jsxs)("div",{className:sd,children:[(0,Nt.jsx)("div",{className:nd,children:u?(0,Nt.jsx)("img",{src:u,alt:"Profile avatar",className:id,onError:e=>{let{currentTarget:t}=e;t.onerror=null,t.src=d}}):(0,Nt.jsx)("img",{src:d,alt:"Default profile avatar",className:id})}),(0,Nt.jsx)("div",{className:ld,children:(0,Nt.jsxs)("button",{type:"button",onClick:p,className:cd,"aria-label":"Change profile photo",children:[(0,Nt.jsxs)("svg",{className:dd,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Change Photo"]})})]}),(0,Nt.jsx)(qh,{isOpen:a,onClose:g,onAvatarUpdate:m,currentAvatar:u||d})]})},Jh=e=>{let{skills:t,onChange:r}=e;const[a,s]=(0,o.useState)(""),[n,i]=(0,o.useState)(""),l=(0,o.useCallback)(()=>{const e=a.trim();if(!e)return void i("Please enter a skill");if(e.length>20)return void i("Skill name must be 20 characters or less");if(e.length<2)return void i("Skill name must be at least 2 characters");const o=e.toLowerCase();if(t.some(e=>e.toLowerCase()===o))return void i("This skill already exists");if(t.length>=12)return void i("Maximum 12 skills allowed");const n=[...t,e];r(n),s(""),i("")},[a,t,r]),c=(0,o.useCallback)(e=>{const o=t.filter(t=>t!==e);r(o)},[t,r]),d=(0,o.useCallback)(e=>{"Enter"===e.key&&(e.preventDefault(),l())},[l]),u=(0,o.useCallback)(e=>{s(e.target.value),n&&i("")},[n]);return(0,Nt.jsxs)("div",{className:od,children:[(0,Nt.jsx)("h3",{className:ad,children:"Skills"}),(0,Nt.jsxs)("div",{className:qd,children:[(0,Nt.jsx)("div",{className:Vd,children:t.map((e,t)=>(0,Nt.jsxs)("div",{className:Jd,children:[(0,Nt.jsx)("span",{className:Zd,children:e}),(0,Nt.jsx)("button",{type:"button",onClick:()=>c(e),className:Kd,"aria-label":"Remove ".concat(e," skill"),children:(0,Nt.jsx)("svg",{className:Yd,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t))}),(0,Nt.jsxs)("div",{className:Qd,children:[(0,Nt.jsxs)("div",{className:$d,children:[(0,Nt.jsx)("input",{type:"text",value:a,onChange:u,onKeyPress:d,className:"".concat(Xd," ").concat(n?gd:""),placeholder:"Add a skill...",maxLength:20,"aria-describedby":n?"skill-error":"skill-help"}),(0,Nt.jsx)("button",{type:"button",onClick:l,className:eu,disabled:!a.trim()||t.length>=12,"aria-label":"Add skill",children:(0,Nt.jsx)("svg",{className:tu,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]}),n&&(0,Nt.jsx)("div",{id:"skill-error",className:yd,children:n}),(0,Nt.jsx)("div",{id:"skill-help",className:ru,children:"Press Enter or click + to add. Maximum 12 skills."})]})]})]})},Zh=[{label:"ArtStation",placeholder:"artstation.com/yourname"},{label:"Behance",placeholder:"behance.net/yourname"}],Kh=e=>e.trim()?e.match(/^https?:\/\//i)?e:(e.match(/^www\./i),"https://".concat(e)):e,Yh=e=>{if(!e.trim())return!0;try{return new URL(e),!0}catch(t){try{return new URL(Kh(e)),!0}catch(r){return!1}}},Qh=e=>{let{links:t,onChange:r,onOtherLinksChange:a}=e;const[s,n]=(0,o.useState)(""),[i,l]=(0,o.useState)(""),[c,d]=(0,o.useState)(""),u=(0,o.useCallback)(()=>{const e=s.trim(),r=i.trim();if(!e)return void d("Please enter a website name");if(!r)return void d("Please enter a URL");if(!Yh(r))return void d("Please enter a valid website address");const o=(e=>e.trim()?Kh(e):e)(r);try{const e=new URL(o).hostname.toLowerCase();if((t.otherLinks||[]).some(t=>{try{return new URL(t.url).hostname.toLowerCase()===e}catch(r){return!1}}))return void d("This website is already added")}catch(u){return void d("Please enter a valid website address")}if((t.otherLinks||[]).length>=5)return void d("Maximum of 5 links");const c={id:crypto.randomUUID(),label:e,url:o};a([...t.otherLinks||[],c]),n(""),l(""),d("")},[s,i,t,a]),h=(0,o.useCallback)(e=>{a((t.otherLinks||[]).filter(t=>t.id!==e))},[t,a]),m=(0,o.useCallback)(e=>{n(e.label),l(""),d("")},[]),p=e=>{const t=e.toLowerCase();return t.includes("artstation")?(0,Nt.jsx)("svg",{className:Sd,viewBox:"0 0 24 24",fill:"currentColor",children:(0,Nt.jsx)("path",{d:"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm0 2.25c5.385 0 9.75 4.365 9.75 9.75s-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12 6.615 2.25 12 2.25zm0 3.75c-3.314 0-6 2.686-6 6s2.686 6 6 6 6-2.686 6-6-2.686-6-6-6zm0 2.25c2.071 0 3.75 1.679 3.75 3.75s-1.679 3.75-3.75 3.75S8.25 14.821 8.25 12.75 9.929 9 12 9z"})}):t.includes("behance")?(0,Nt.jsx)("svg",{className:Sd,viewBox:"0 0 24 24",fill:"currentColor",children:(0,Nt.jsx)("path",{d:"M22 7h-7V5h7v2zm1.726 10c-.442 1.297-2.029 3-5.101 3-3.074 0-5.564-1.729-5.564-5.675 0-3.91 2.561-5.92 5.466-5.92 3.082 0 4.588 1.837 5.038 4.426l.332 1.906H17.19l-.23-1.518c-.245-1.332-1.104-1.804-2.13-1.804-1.245 0-2.916.988-2.916 3.368 0 2.507 1.688 3.716 3.111 3.716 1.149 0 1.955-.518 2.19-1.138h1.701zM11.649 9.413c0-1.288.875-2.013 1.857-2.013.983 0 1.857.725 1.857 2.013 0 1.287-.874 2.013-1.857 2.013-.982 0-1.857-.726-1.857-2.013zM8.14 12.213c0-1.634.893-2.6 2.072-2.6 1.179 0 2.072.966 2.072 2.6 0 1.635-.893 2.6-2.072 2.6-1.179 0-2.072-.965-2.072-2.6z"})}):(0,Nt.jsx)("svg",{className:Sd,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9m0 9c-5 0-9-4-9-9s4-9 9-9"})})},g=[{key:"instagram",label:"Instagram URL",placeholder:"instagram.com/yourusername",icon:(0,Nt.jsx)("svg",{className:Sd,viewBox:"0 0 24 24",fill:"currentColor",children:(0,Nt.jsx)("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})},{key:"portfolio",label:"Portfolio URL",placeholder:"your-portfolio.com",icon:(0,Nt.jsx)("svg",{className:Sd,fill:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})})},{key:"discord",label:"Discord URL",placeholder:"discord.gg/yourname",icon:(0,Nt.jsx)("svg",{className:Sd,viewBox:"0 0 24 24",fill:"currentColor",children:(0,Nt.jsx)("path",{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.019 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1568 2.4189Z"})})}];return(0,Nt.jsxs)("div",{className:od,children:[(0,Nt.jsx)("h3",{className:ad,children:"Social Links"}),(0,Nt.jsxs)("div",{className:Ad,children:[(0,Nt.jsx)("div",{className:_d,children:g.map(e=>{const o=t[e.key],a="string"===typeof o?o:"";return(0,Nt.jsxs)("div",{className:ud,children:[(0,Nt.jsx)("label",{htmlFor:e.key,className:vd,children:e.label}),(0,Nt.jsxs)("div",{className:kd,children:[(0,Nt.jsx)("div",{className:Nd,children:e.icon}),(0,Nt.jsx)("input",{id:e.key,type:"url",value:a,onChange:t=>((e,t)=>{r(e,t)})(e.key,t.target.value),className:"".concat(Cd," ").concat(a&&!Yh(a)?gd:""),placeholder:e.placeholder,"aria-describedby":"".concat(e.key,"-error")})]}),a&&!Yh(a)&&(0,Nt.jsx)("div",{id:"".concat(e.key,"-error"),className:yd,children:"Please enter a valid website address"})]},e.key)})}),(0,Nt.jsxs)("div",{className:_d,children:[(0,Nt.jsx)("div",{className:Id,children:(0,Nt.jsx)("h4",{className:Ed,children:"Other Websites"})}),(0,Nt.jsx)("div",{className:Pd,children:(t.otherLinks||[]).map(e=>(0,Nt.jsxs)("div",{className:Dd,children:[(0,Nt.jsx)("div",{className:Nd,children:p(e.label)}),(0,Nt.jsxs)("div",{className:Td,children:[(0,Nt.jsx)("div",{className:Ld,children:e.label}),(0,Nt.jsx)("div",{className:Md,children:e.url})]}),(0,Nt.jsx)("button",{type:"button",onClick:()=>h(e.id),className:Rd,"aria-label":"Remove ".concat(e.label," website"),children:(0,Nt.jsx)("svg",{className:Yd,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},e.id))}),(t.otherLinks||[]).length<5&&(0,Nt.jsxs)("div",{className:Fd,children:[(0,Nt.jsx)("div",{className:Ud,children:(0,Nt.jsxs)("div",{className:Od,children:[(0,Nt.jsx)("input",{type:"text",value:s,onChange:e=>{n(e.target.value),d("")},placeholder:"Website name",className:zd}),(0,Nt.jsx)("input",{type:"url",value:i,onChange:e=>{l(e.target.value),d("")},placeholder:"example.com",className:zd}),(0,Nt.jsx)("button",{type:"button",onClick:u,className:Wd,disabled:!s.trim()||!i.trim(),children:"Add"})]})}),(0,Nt.jsx)("div",{className:Bd,children:Zh.map(e=>(0,Nt.jsx)("button",{type:"button",onClick:()=>m(e),className:Gd,children:e.label},e.label))}),c&&(0,Nt.jsx)("div",{className:yd,children:c})]}),(t.otherLinks||[]).length>=5&&(0,Nt.jsx)("div",{className:Hd,children:"Maximum of 5 links reached."})]})]})]})},$h=()=>{const e=ue(),t=()=>{e("/upload/guidelines")};return(0,Nt.jsxs)("div",{className:od,children:[(0,Nt.jsx)("h3",{className:ad,children:"Upload New Work"}),(0,Nt.jsxs)("div",{className:"".concat(cu," ").concat(du),onClick:t,style:{cursor:"pointer"},children:[(0,Nt.jsx)("svg",{className:uu,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,Nt.jsx)("p",{className:hu,children:"Click to upload new work"}),(0,Nt.jsx)("p",{className:mu,children:"You'll be redirected to the upload guidelines"}),(0,Nt.jsx)("button",{type:"button",className:pu,onClick:t,children:"Upload New Work"})]}),(0,Nt.jsxs)("div",{className:gu,children:[(0,Nt.jsx)("svg",{className:fu,fill:"currentColor",viewBox:"0 0 20 20",children:(0,Nt.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,Nt.jsx)("span",{children:"Click to start the upload process"})]})]})},Xh=()=>{var e,t,a,s;const i=ue(),{user:l}=Ct(),c={fullName:(null===l||void 0===l?void 0:l.name)||"",title:(null===l||void 0===l?void 0:l.role)||"",school:(null===l||void 0===l?void 0:l.school)||"",pronouns:(null===l||void 0===l?void 0:l.pronouns)||"",majors:(null===l||void 0===l?void 0:l.majors)||[],minors:[],bio:(null===l||void 0===l?void 0:l.bio)||"",avatar:(null===l||void 0===l?void 0:l.avatar)||null,socialLinks:{instagram:(null===l||void 0===l||null===(e=l.socialLinks)||void 0===e?void 0:e.instagram)||"",portfolio:(null===l||void 0===l||null===(t=l.socialLinks)||void 0===t?void 0:t.portfolio)||"",discord:(null===l||void 0===l||null===(a=l.socialLinks)||void 0===a?void 0:a.discord)||"",otherLinks:(null===l||void 0===l||null===(s=l.socialLinks)||void 0===s?void 0:s.otherLinks)||[]},skills:(null===l||void 0===l?void 0:l.skills)||[]},d=(0,n.A)({},c),[u,h]=(0,o.useState)((0,n.A)((0,n.A)({},d),{},{socialLinks:(0,n.A)((0,n.A)({},d.socialLinks),{},{otherLinks:[]})}));(0,o.useEffect)(()=>{l&&(async()=>{try{const e=null===l||void 0===l?void 0:l.id;if(!e)return;const t=await uo(e);t.success&&t.data&&h(e=>(0,n.A)((0,n.A)({},e),{},{fullName:t.data.fullName,title:t.data.title,school:t.data.school,pronouns:t.data.pronouns,majors:t.data.majors,minors:t.data.minors||[],skills:t.data.skills||[],bio:t.data.bio||"",avatar:t.data.avatar||e.avatar,socialLinks:t.data.socialLinks||e.socialLinks}))}catch(e){console.error("Error loading user profile:",e)}})()},[l]);const[m,p]=(0,o.useState)([]),[g,f]=(0,o.useState)(!1),[v,x]=(0,o.useState)(!1),[b,y]=(0,o.useState)({}),w=(0,o.useCallback)(async()=>{console.log("[EditProfile] Loading portfolio from Supabase...");try{const e=await(0,lr.BD)();if(console.log("[EditProfile] Portfolio load result:",e),e.success){const t=await Promise.all(e.data.map(async e=>{let t="";const o=e.thumbnailPath||e.imagePaths&&e.imagePaths[0];if(o)try{const{getPortfolioImageUrl:e}=await Promise.resolve().then(r.bind(r,200)),a=await e(o);a.success&&a.data&&(t=a.data.url)}catch(a){console.warn("[EditProfile] Failed to get image URL for:",o,a)}return{id:e.id,title:e.title,description:e.description||"",image:t||"/assets/placeholder.svg",isPublic:e.isPublic,tags:e.tags||[]}}));console.log("[EditProfile] Setting portfolio items:",t),p(t)}else console.log("[EditProfile] Failed to load portfolio, using empty array"),p([])}catch(e){console.error("Error loading portfolio:",e),p([])}},[]);(0,o.useEffect)(()=>{w()},[w]);const j=(0,o.useCallback)(async e=>{try{const t=await(0,lr.zB)(e);t.success?w():console.error("Failed to delete portfolio item:",t.error)}catch(t){console.error("Error deleting portfolio item:",t)}},[w]),k=(0,o.useCallback)(async(e,t)=>{try{const r=await(0,lr.updatePortfolioItem)(e,{isPublic:!t});r.success?w():console.error("Failed to update portfolio visibility:",r.error)}catch(r){console.error("Error updating portfolio visibility:",r)}},[w]),N=(0,o.useCallback)(()=>{const e={};return u.fullName.trim()||(e.fullName="Full name is required"),u.bio.length>280&&(e.bio="Bio must be 280 characters or less"),{isValid:0===Object.keys(e).length,errors:e}},[u]),S=(0,o.useCallback)((e,t)=>{h(r=>(0,n.A)((0,n.A)({},r),{},{[e]:t})),f(!0)},[]),C=(0,o.useCallback)((e,t)=>{const r=(o=t).trim()?o.match(/^https?:\/\//i)?o:(o.match(/^www\./i),"https://".concat(o)):o;var o;h(t=>(0,n.A)((0,n.A)({},t),{},{socialLinks:(0,n.A)((0,n.A)({},t.socialLinks),{},{[e]:r})})),f(!0)},[]),A=(0,o.useCallback)(e=>{h(t=>(0,n.A)((0,n.A)({},t),{},{socialLinks:(0,n.A)((0,n.A)({},t.socialLinks),{},{otherLinks:e})})),f(!0)},[]),_=(0,o.useCallback)(e=>{h(t=>(0,n.A)((0,n.A)({},t),{},{skills:e})),f(!0)},[]),I=(0,o.useCallback)(e=>{h(t=>(0,n.A)((0,n.A)({},t),{},{majors:e})),f(!0)},[]),E=(0,o.useCallback)(e=>{h(t=>(0,n.A)((0,n.A)({},t),{},{minors:e})),f(!0)},[]),P=(0,o.useCallback)(e=>{p(e)},[]),D=(0,o.useCallback)(()=>{h(c),w(),f(!1),y({})},[w]),T=(0,o.useCallback)(async()=>{const e=N();if(y(e.errors),e.isValid)try{const e=(null===l||void 0===l?void 0:l.id)||"alice",r=await ho(e,{fullName:u.fullName,title:u.title,school:u.school,pronouns:u.pronouns,majors:u.majors,minors:u.minors||[],skills:u.skills||[],bio:u.bio||"",avatar:u.avatar||null,socialLinks:u.socialLinks});if(r.success){if(console.log("Profile saved successfully:",r.data),da(["artist",e]),u.avatar&&u.avatar.startsWith("data:image/"))try{await(0,Pt.$u)(u.avatar)?console.log("[EditProfile] Successfully updated unified avatar"):console.error("[EditProfile] Failed to update unified avatar")}catch(t){console.error("[EditProfile] Error updating unified avatar:",t)}f(!1),x(!0),setTimeout(()=>{x(!1)},3e3)}else console.error("Failed to save profile:",r.error)}catch(t){console.error("Error saving profile:",t)}},[u,m,N,l]),L=(0,o.useCallback)(()=>{i(-1)},[i]),M=(0,o.useCallback)(e=>{if(console.log("[EditProfile] handleAvatarChange called with:",typeof e),"string"===typeof e)console.log("[EditProfile] Setting new avatar:",null===e||void 0===e?void 0:e.substring(0,30)),console.log("[EditProfile] Avatar type:",typeof e),h(t=>(0,n.A)((0,n.A)({},t),{},{avatar:e})),f(!0);else if(e instanceof File){const t=new FileReader;t.onload=e=>{var t;const r=null===(t=e.target)||void 0===t?void 0:t.result;console.log("[EditProfile] Converted File to data URL:",null===r||void 0===r?void 0:r.substring(0,30)),h(e=>(0,n.A)((0,n.A)({},e),{},{avatar:r})),f(!0)},t.readAsDataURL(e)}},[]);return(0,Nt.jsxs)("div",{className:Gc,children:[(0,Nt.jsxs)("div",{className:Hc,children:[(0,Nt.jsxs)("div",{className:qc,children:[(0,Nt.jsxs)("button",{onClick:L,className:Vc,"aria-label":"Go back",children:[(0,Nt.jsx)("svg",{className:Jc,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),(0,Nt.jsx)("h1",{className:Zc,children:"Edit Profile"})]}),(0,Nt.jsxs)("div",{className:Kc,children:[(0,Nt.jsx)("button",{onClick:D,className:Yc,disabled:!g,children:"Cancel"}),(0,Nt.jsx)("button",{onClick:T,className:Qc,disabled:!g,children:"Save Changes"})]})]}),v&&(0,Nt.jsxs)("div",{className:$c,children:[(0,Nt.jsx)("svg",{className:Xc,fill:"currentColor",viewBox:"0 0 20 20",children:(0,Nt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Saved successfully!"]}),(0,Nt.jsxs)("div",{className:ed,children:[(0,Nt.jsxs)("div",{className:td,children:[(0,Nt.jsx)(Vh,{avatar:u.avatar,onAvatarChange:M}),(0,Nt.jsx)(oh,{data:u,onChange:S,onMajorsChange:I,onMinorsChange:E,errors:b}),(0,Nt.jsx)(Qh,{links:u.socialLinks,onChange:C,onOtherLinksChange:A})]}),(0,Nt.jsxs)("div",{className:rd,children:[(0,Nt.jsx)(Jh,{skills:u.skills,onChange:_}),(0,Nt.jsx)($h,{}),(0,Nt.jsx)(sh,{items:m,onChange:P,onDelete:j,onToggleVisibility:k})]})]})]})},em="tag_service_data",tm=async e=>{try{const r=["alice","bryan","alex"];for(const o of r){const r="portfolio_".concat(o),a=await wr.IG.getItem(r);if(a)try{const t=JSON.parse(a);if(Array.isArray(t)){const r=t.find(t=>t.id===e);if(r){const e=ir.o1[o];return(0,n.A)((0,n.A)({},r),{},{userId:o,authorName:(null===e||void 0===e?void 0:e.displayName)||o})}}}catch(t){console.warn("Failed to parse portfolio data for ".concat(o,":"),t)}}return null}catch(r){return console.error("Error getting portfolio data by ID:",r),null}},rm=async()=>{await(async()=>{if(!await wr.IG.getItem(em)){const e={tagStats:{design:{works:15,users:8,projects:3},illustration:{works:12,users:6,projects:2},photography:{works:8,users:4,projects:1},"3d":{works:6,users:3,projects:2},animation:{works:4,users:2,projects:1},ui:{works:10,users:5,projects:4},ux:{works:7,users:4,projects:3},branding:{works:9,users:5,projects:2},typography:{works:5,users:3,projects:1},"digital-art":{works:11,users:6,projects:2},photo:{works:1,users:1,projects:0},landscape:{works:1,users:1,projects:0}},workTags:{work1:["design","ui","branding"],work2:["illustration","digital-art"],work3:["photography","design"],work4:["3d","animation"],work5:["ux","ui","design"],pf_alice_01:["photo","landscape"],pf_bryan_01:["illustration","digital-art"],pf_alex_01:["design","ui"]},userTags:{alex:["design","ui","ux"],bryan:["illustration","digital-art","typography"],alice:["photography","design","branding","photo","landscape"]},projectTags:{project1:["design","ui","branding"],project2:["illustration","digital-art"],project3:["3d","animation"]}};await wr.IG.setItem(em,JSON.stringify(e))}})();const e=await wr.IG.getItem(em);return e?JSON.parse(e):null},om=async e=>{await wr.IG.setItem(em,JSON.stringify(e))},am=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300;return new Promise(t=>setTimeout(t,e))},sm=async e=>{await am();let t=0;const r=["alice","bryan","alex"];for(const s of r){const r="portfolio_".concat(s),o=await wr.IG.getItem(r);if(o)try{const r=JSON.parse(o);if(Array.isArray(r))for(const o of r)o.tags&&o.tags.some(t=>t.toLowerCase()===e.toLowerCase()||t.toLowerCase().includes(e.toLowerCase()))&&t++}catch(a){console.warn("Failed to parse portfolio data for ".concat(s,":"),a)}}if(0===t){var o;const t=await rm();return(null===t||void 0===t||null===(o=t.tagStats)||void 0===o?void 0:o[e])||{works:0,users:0,projects:0}}return{works:t,users:0,projects:0}},nm=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await am();const{limit:r=10,cursor:o=null}=t,a=[],s=["alice","bryan","alex"];for(const u of s){const t="portfolio_".concat(u),r=await wr.IG.getItem(t);if(r)try{const t=JSON.parse(r);if(Array.isArray(t)){const r=ir.o1[u];for(const o of t)if(o.tags&&o.tags.some(t=>t.toLowerCase()===e.toLowerCase()||t.toLowerCase().includes(e.toLowerCase()))){let t="";o.imageKey?t=await Ba.default.getImageUrl(o.imageKey):o.thumbnailPath?t=await Ba.default.getImageUrl(o.thumbnailPath):o.imagePaths&&o.imagePaths[0]&&(t=await Ba.default.getImageUrl(o.imagePaths[0])),a.push({id:o.id,title:o.title,description:o.description||"Tagged with #".concat(e),author:{id:u,name:(null===r||void 0===r?void 0:r.displayName)||u},image:t||""})}}}catch(d){console.warn("Failed to parse portfolio data for ".concat(u,":"),d)}}if(0===a.length){const t=await rm(),r=Object.entries((null===t||void 0===t?void 0:t.workTags)||{}).filter(t=>{let[r,o]=t;return o.includes(e)}).map(e=>{let[t]=e;return t});for(const o of r){const t=await tm(o);if(t){let r="";t.imageKey?r=await Ba.default.getImageUrl(t.imageKey):t.thumbnailPath?r=await Ba.default.getImageUrl(t.thumbnailPath):t.imagePaths&&t.imagePaths[0]&&(r=await Ba.default.getImageUrl(t.imagePaths[0])),a.push({id:t.id,title:t.title,description:t.description||"Tagged with #".concat(e),author:{id:t.userId,name:t.authorName},image:r||""})}}}const n=o?parseInt(o):0,i=n+r,l=a.slice(n,i),c=i<a.length;return{items:l,hasMore:c,cursor:c?i.toString():null}},im=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await am();const{limit:r=10,cursor:o=null}=t,a=await rm(),s=Object.entries((null===a||void 0===a?void 0:a.userTags)||{}).filter(t=>{let[r,o]=t;return o.includes(e)}).map(e=>{let[t]=e;return t}),n=o?parseInt(o):0,i=n+r,l=s.slice(n,i),c=i<s.length,d=c?i.toString():null;return{items:l.map(e=>{const t=ir.o1[e];return t?{id:t.id,name:t.displayName,avatar:t.avatar,title:t.role,school:t.school}:{id:e,name:e.charAt(0).toUpperCase()+e.slice(1),avatar:"/avatars/".concat(e,".jpg"),title:"Artist",school:"Art School"}}),hasMore:c,cursor:d}},lm=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await am();const{limit:r=10,cursor:o=null}=t,a=await rm(),s=Object.entries((null===a||void 0===a?void 0:a.projectTags)||{}).filter(t=>{let[r,o]=t;return o.includes(e)}).map(e=>{let[t]=e;return t}),n=o?parseInt(o):0,i=n+r,l=s.slice(n,i),c=i<s.length,d=c?i.toString():null;return{items:l.map(t=>({id:t,title:"Project ".concat(t),description:"This is a project tagged with #".concat(e),owner:{id:"alex",name:"Alex"},status:"active"})),hasMore:c,cursor:d}},cm=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;await am();const r=await rm();return Object.keys((null===r||void 0===r?void 0:r.tagStats)||{}).filter(t=>t.toLowerCase().includes(e.toLowerCase())).slice(0,t).map(e=>{var t,o;return{name:e,slug:e,count:(null===r||void 0===r||null===(t=r.tagStats)||void 0===t||null===(o=t[e])||void 0===o?void 0:o.works)||0}})},dm=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;await am();const t=await rm();return Object.entries((null===t||void 0===t?void 0:t.tagStats)||{}).map(e=>{let[t,r]=e;return{name:t,slug:t,count:r.works+r.users+r.projects}}).sort((e,t)=>t.count-e.count).slice(0,e)},um=async(e,t)=>{await am();const r=rm();return r.workTags[e]||(r.workTags[e]=[]),t.forEach(t=>{r.workTags[e].includes(t.slug)||r.workTags[e].push(t.slug),r.tagStats[t.slug]||(r.tagStats[t.slug]={works:0,users:0,projects:0}),r.tagStats[t.slug].works++}),om(r),!0},hm=async(e,t)=>{await am();const r=rm();return r.userTags[e]||(r.userTags[e]=[]),t.forEach(t=>{r.userTags[e].includes(t.slug)||r.userTags[e].push(t.slug),r.tagStats[t.slug]||(r.tagStats[t.slug]={works:0,users:0,projects:0}),r.tagStats[t.slug].users++}),om(r),!0},mm=async(e,t)=>{await am();const r=rm();return r.projectTags[e]||(r.projectTags[e]=[]),t.forEach(t=>{r.projectTags[e].includes(t.slug)||r.projectTags[e].push(t.slug),r.tagStats[t.slug]||(r.tagStats[t.slug]={works:0,users:0,projects:0}),r.tagStats[t.slug].projects++}),om(r),!0},pm=async e=>{try{console.log("[TagService] Getting stats for tag: ".concat(e));const t="#".concat(e),r=e,{data:o,error:a}=await kt.supabase.from("portfolio").select("id",{count:"exact"}).eq("is_public",!0).or("tags.cs.{".concat(t,"},tags.cs.{").concat(r,"}"));if(a)throw console.error("[TagService] Error getting works count:",a),a;const{data:s,error:n}=await kt.supabase.from("portfolio").select("user_id",{count:"exact"}).eq("is_public",!0).or("tags.cs.{".concat(t,"},tags.cs.{").concat(r,"}"));if(n)throw console.error("[TagService] Error getting users count:",n),n;const i=new Set((null===s||void 0===s?void 0:s.map(e=>e.user_id))||[]).size,l={works:(null===o||void 0===o?void 0:o.length)||0,users:i,projects:0};return console.log("[TagService] Tag stats for ".concat(e,":"),l),l}catch(t){return console.error("[TagService] Error getting tag stats:",t),{works:0,users:0,projects:0}}},gm=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const{limit:r=12,cursor:o=null}=t;console.log("[TagService] Getting works for tag: ".concat(e,", limit: ").concat(r,", cursor: ").concat(o));const a="#".concat(e),s=e;let n=kt.supabase.from("portfolio").select("\n        id,\n        title,\n        description,\n        tags,\n        thumbnail_path,\n        image_paths,\n        created_at,\n        user_id,\n        profiles!fk_portfolio_profiles (\n          id,\n          full_name,\n          avatar_url,\n          title\n        )\n      ").eq("is_public",!0).or("tags.cs.{".concat(a,"},tags.cs.{").concat(s,"}")).order("created_at",{ascending:!1}).limit(r);if(o){const{data:e}=await kt.supabase.from("portfolio").select("created_at").eq("id",o).single();e&&(n=n.lt("created_at",e.created_at))}const{data:i,error:l}=await n;if(l)throw console.error("[TagService] Error getting works by tag:",l),l;const c=await Promise.all((i||[]).map(async t=>{var r,o,a;let s="/assets/placeholder.svg";if(t.thumbnail_path)try{const{data:e}=kt.supabase.storage.from("portfolio").getPublicUrl(t.thumbnail_path);s=(null===e||void 0===e?void 0:e.publicUrl)||s}catch(n){console.warn("[TagService] Failed to get image URL:",n)}return{id:t.id,title:t.title,description:t.description||"Tagged with #".concat(e),author:{id:t.user_id,name:(null===(r=t.profiles)||void 0===r?void 0:r.full_name)||"Unknown Artist",avatar:(null===(o=t.profiles)||void 0===o?void 0:o.avatar_url)||"",role:(null===(a=t.profiles)||void 0===a?void 0:a.title)||""},image:s,tags:t.tags||[],createdAt:t.created_at}})),d=c.length===r,u={items:c,cursor:d&&c.length>0?c[c.length-1].id:null,hasMore:d};return console.log("[TagService] Found ".concat(c.length," works for tag ").concat(e)),u}catch(r){return console.error("[TagService] Error getting works by tag:",r),{items:[],cursor:null,hasMore:!1}}},fm=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{console.log("[TagService] Searching tags with query: ".concat(e));const{data:r,error:o}=await kt.supabase.from("portfolio").select("tags").eq("is_public",!0).not("tags","is",null);if(o)throw console.error("[TagService] Error searching tags:",o),o;const a={};null===r||void 0===r||r.forEach(t=>{t.tags&&Array.isArray(t.tags)&&t.tags.forEach(t=>{const r=t.toLowerCase(),o=e.toLowerCase();r.includes(o)&&(a[t]=(a[t]||0)+1)})});const s=Object.entries(a).map(e=>{let[t,r]=e;return{name:t,slug:t.toLowerCase().replace(/[^a-z0-9]/g,"-"),count:r}}).sort((e,t)=>t.count-e.count).slice(0,t);return console.log("[TagService] Found ".concat(s.length," matching tags")),s}catch(r){return console.error("[TagService] Error searching tags:",r),[]}},vm=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;try{console.log("[TagService] Getting popular tags, limit: ".concat(e));const{data:t,error:r}=await kt.supabase.from("portfolio").select("tags").eq("is_public",!0).not("tags","is",null);if(r)throw console.error("[TagService] Error getting popular tags:",r),r;const o={};null===t||void 0===t||t.forEach(e=>{e.tags&&Array.isArray(e.tags)&&e.tags.forEach(e=>{o[e]=(o[e]||0)+1})});const a=Object.entries(o).map(e=>{let[t,r]=e;return{name:t,slug:t.toLowerCase().replace(/[^a-z0-9]/g,"-"),count:r}}).sort((e,t)=>t.count-e.count).slice(0,e);return console.log("[TagService] Found ".concat(a.length," popular tags")),a}catch(t){return console.error("[TagService] Error getting popular tags:",t),[]}},xm=async e=>{try{console.log("[TagService] Getting stats for major: ".concat(e));const{data:t,error:r}=await kt.supabase.from("portfolio").select("id",{count:"exact"}).eq("is_public",!0).in("user_id",kt.supabase.from("profiles").select("id").or("majors.cs.{".concat(e,"},minors.cs.{").concat(e,"}")));if(r)throw console.error("[TagService] Error getting works count for major:",r),r;const{data:o,error:a}=await kt.supabase.from("profiles").select("id",{count:"exact"}).or("majors.cs.{".concat(e,"},minors.cs.{").concat(e,"}"));if(a)throw console.error("[TagService] Error getting users count for major:",a),a;const s={works:(null===t||void 0===t?void 0:t.length)||0,users:(null===o||void 0===o?void 0:o.length)||0,projects:0};return console.log("[TagService] Major stats for ".concat(e,":"),s),s}catch(t){return console.error("[TagService] Error getting major stats:",t),{works:0,users:0,projects:0}}},bm=async e=>{try{console.log("[TagService] Getting stats for software: ".concat(e));const{data:t,error:r}=await kt.supabase.from("portfolio").select("id",{count:"exact"}).eq("is_public",!0).contains("software",[e]);if(r)throw console.error("[TagService] Error getting works count for software:",r),r;const{data:o,error:a}=await kt.supabase.from("portfolio").select("user_id",{count:"exact"}).eq("is_public",!0).contains("software",[e]);if(a)throw console.error("[TagService] Error getting users count for software:",a),a;const s={works:(null===t||void 0===t?void 0:t.length)||0,users:(null===o||void 0===o?void 0:o.length)||0,projects:0};return console.log("[TagService] Software stats for ".concat(e,":"),s),s}catch(t){return console.error("[TagService] Error getting software stats:",t),{works:0,users:0,projects:0}}},ym=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{limit:r=12,cursor:o=null}=t;try{console.log("[TagService] Getting works for major: ".concat(e,", limit: ").concat(r,", cursor: ").concat(o));let t=kt.supabase.from("portfolio").select("\n        id,\n        title,\n        description,\n        tags,\n        software,\n        thumbnail_path,\n        image_paths,\n        created_at,\n        user_id,\n        profiles!fk_portfolio_profiles (\n          id,\n          full_name,\n          avatar_url,\n          title\n        )\n      ").eq("is_public",!0).in("user_id",kt.supabase.from("profiles").select("id").or("majors.cs.{".concat(e,"},minors.cs.{").concat(e,"}"))).order("created_at",{ascending:!1}).limit(r);if(o){const{data:e}=await kt.supabase.from("portfolio").select("created_at").eq("id",o).single();e&&(t=t.lt("created_at",e.created_at))}const{data:a,error:s}=await t;if(s)throw console.error("[TagService] Error getting works by major:",s),s;console.log("[TagService] Found ".concat((null===a||void 0===a?void 0:a.length)||0," works for major ").concat(e));const n=await Promise.all((null===a||void 0===a?void 0:a.map(async t=>{var r,o,a;let s="";if(t.thumbnail_path)try{const{data:e}=await kt.supabase.storage.from("portfolio").getPublicUrl(t.thumbnail_path);s=(null===e||void 0===e?void 0:e.publicUrl)||""}catch(n){console.warn("[TagService] Failed to get image URL:",n)}return{id:t.id,title:t.title,description:t.description||"Works by ".concat(e," professionals"),author:{id:t.user_id,name:(null===(r=t.profiles)||void 0===r?void 0:r.full_name)||"Unknown Artist",avatar:(null===(o=t.profiles)||void 0===o?void 0:o.avatar_url)||"",role:(null===(a=t.profiles)||void 0===a?void 0:a.title)||""},image:s,tags:t.tags||[],software:t.software||[],createdAt:t.created_at}}))||[]),i=n.length===r;return{items:n,hasMore:i,cursor:i&&n.length>0?n[n.length-1].id:null}}catch(a){return console.error("[TagService] Error getting works by major:",a),{items:[],hasMore:!1,cursor:null}}},wm=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{limit:r=12,cursor:o=null}=t;try{console.log("[TagService] Getting works for software: ".concat(e,", limit: ").concat(r,", cursor: ").concat(o));let t=kt.supabase.from("portfolio").select("\n        id,\n        title,\n        description,\n        tags,\n        software,\n        thumbnail_path,\n        image_paths,\n        created_at,\n        user_id,\n        profiles!fk_portfolio_profiles (\n          id,\n          full_name,\n          avatar_url,\n          title\n        )\n      ").eq("is_public",!0).contains("software",[e]).order("created_at",{ascending:!1}).limit(r);if(o){const{data:e}=await kt.supabase.from("portfolio").select("created_at").eq("id",o).single();e&&(t=t.lt("created_at",e.created_at))}const{data:a,error:s}=await t;if(s)throw console.error("[TagService] Error getting works by software:",s),s;console.log("[TagService] Found ".concat((null===a||void 0===a?void 0:a.length)||0," works for software ").concat(e));const n=await Promise.all((null===a||void 0===a?void 0:a.map(async t=>{var r,o,a;let s="";if(t.thumbnail_path)try{const{data:e}=await kt.supabase.storage.from("portfolio").getPublicUrl(t.thumbnail_path);s=(null===e||void 0===e?void 0:e.publicUrl)||""}catch(n){console.warn("[TagService] Failed to get image URL:",n)}return{id:t.id,title:t.title,description:t.description||"Created with ".concat(e),author:{id:t.user_id,name:(null===(r=t.profiles)||void 0===r?void 0:r.full_name)||"Unknown Artist",avatar:(null===(o=t.profiles)||void 0===o?void 0:o.avatar_url)||"",role:(null===(a=t.profiles)||void 0===a?void 0:a.title)||""},image:s,tags:t.tags||[],software:t.software||[],createdAt:t.created_at}}))||[]),i=n.length===r;return{items:n,hasMore:i,cursor:i&&n.length>0?n[n.length-1].id:null}}catch(a){return console.error("[TagService] Error getting works by software:",a),{items:[],hasMore:!1,cursor:null}}},jm=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{major:r=null,software:o=[],tags:a=[]}=e,{limit:s=12,cursor:n=null}=t;try{console.log("[TagService] Getting works by combination:",{major:r,software:o,tags:a});let e=kt.supabase.from("portfolio").select("\n        id,\n        title,\n        description,\n        tags,\n        software,\n        thumbnail_path,\n        image_paths,\n        created_at,\n        user_id,\n        profiles!fk_portfolio_profiles (\n          id,\n          full_name,\n          avatar_url,\n          title\n        )\n      ").eq("is_public",!0);if(r&&(e=e.in("user_id",kt.supabase.from("profiles").select("id").or("majors.cs.{".concat(r,"},minors.cs.{").concat(r,"}")))),o&&o.length>0&&(e=e.contains("software",o)),a&&a.length>0&&(e=e.contains("tags",a)),e=e.order("created_at",{ascending:!1}).limit(s),n){const{data:t}=await kt.supabase.from("portfolio").select("created_at").eq("id",n).single();t&&(e=e.lt("created_at",t.created_at))}const{data:t,error:i}=await e;if(i)throw console.error("[TagService] Error getting works by combination:",i),i;console.log("[TagService] Found ".concat((null===t||void 0===t?void 0:t.length)||0," works by combination"));const l=await Promise.all((null===t||void 0===t?void 0:t.map(async e=>{var t,r,o;let a="";if(e.thumbnail_path)try{const{data:t}=await kt.supabase.storage.from("portfolio").getPublicUrl(e.thumbnail_path);a=(null===t||void 0===t?void 0:t.publicUrl)||""}catch(s){console.warn("[TagService] Failed to get image URL:",s)}return{id:e.id,title:e.title,description:e.description||"Combined filter results",author:{id:e.user_id,name:(null===(t=e.profiles)||void 0===t?void 0:t.full_name)||"Unknown Artist",avatar:(null===(r=e.profiles)||void 0===r?void 0:r.avatar_url)||"",role:(null===(o=e.profiles)||void 0===o?void 0:o.title)||""},image:a,tags:e.tags||[],software:e.software||[],createdAt:e.created_at}}))||[]),c=l.length===s;return{items:l,hasMore:c,cursor:c&&l.length>0?l[l.length-1].id:null}}catch(i){return console.error("[TagService] Error getting works by combination:",i),{items:[],hasMore:!1,cursor:null}}},km=async(e,t)=>{try{console.log("[TagService] Attaching tags to work ".concat(e,":"),t);const{data:r,error:o}=await kt.supabase.from("portfolio").select("tags").eq("id",e).single();if(o)throw console.error("[TagService] Error fetching existing work:",o),o;const a=(null===r||void 0===r?void 0:r.tags)||[],s=t.map(e=>e.slug||e),n=[...new Set([...a,...s])],{error:i}=await kt.supabase.from("portfolio").update({tags:n}).eq("id",e);if(i)throw console.error("[TagService] Error updating work tags:",i),i;return console.log("[TagService] Successfully attached tags to work ".concat(e)),!0}catch(r){return console.error("[TagService] Error attaching tags to work:",r),!1}},Nm=async(e,t)=>{try{return console.log("[TagService] Attaching tags to user ".concat(e,":"),t),console.log("[TagService] User tag attachment not implemented yet"),!0}catch(r){return console.error("[TagService] Error attaching tags to user:",r),!1}},Sm=async(e,t)=>{try{return console.log("[TagService] Attaching tags to project ".concat(e,":"),t),console.log("[TagService] Project tag attachment not implemented yet"),!0}catch(r){return console.error("[TagService] Error attaching tags to project:",r),!1}},Cm="supabase"===({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9vYWljcHZzam1teHVjY3FsenVoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjIyNjQsImV4cCI6MjA3MjMzODI2NH0.-YXCVgkGIpu0eTDGCoiSgnF5IHhyIYMITaB-oMjFt7s",REACT_APP_SUPABASE_ENABLE_MOCK_DATA:"false",REACT_APP_SUPABASE_ENABLE_SUPABASE:"true",REACT_APP_SUPABASE_URL:"https://ooaicpvsjmmxuccqlzuh.supabase.co"}.REACT_APP_API_IMPL||"supabase")?t:e,Am=Cm.getTagStats,_m=Cm.getWorksByTag,Im=Cm.getMajorStats,Em=Cm.getSoftwareStats,Pm=Cm.getWorksByMajor,Dm=Cm.getWorksBySoftware,Tm=Cm.getWorksByCombination,Lm="tag",Mm="major",Rm="software",Fm="combined",Um=e=>{const{type:t,value:r,major:o,software:a,tags:s}=e;let n,i,l={};return t&&r?(n=t,i=r):o||a||s?(n=Fm,i="combined",l={major:o||null,software:a?Array.isArray(a)?a:[a]:[],tags:s?Array.isArray(s)?s:[s]:[]}):(n=Lm,i=r||""),{type:n,value:i,filters:l}},Om=e=>{const{type:t,value:r,filters:o}=e;switch(t){case Lm:return"#".concat(r);case Mm:case Rm:return r;case Fm:{const e=[];return o.major&&e.push(o.major),o.software&&o.software.length>0&&e.push(o.software.join(" + ")),o.tags&&o.tags.length>0&&e.push(o.tags.map(e=>"#".concat(e)).join(" + ")),e.join(" + ")}default:return"Aggregation"}},zm=(e,t)=>{const{type:r,value:o,filters:a}=e,{works:s,users:n}=t;switch(r){case Lm:return"Discover ".concat(s," works tagged with #").concat(o," from ").concat(n," artists");case Mm:return"Explore ".concat(s," works by ").concat(o," professionals from ").concat(n," artists");case Rm:return"Browse ".concat(s," works created with ").concat(o," from ").concat(n," artists");case Fm:{const e=[];return a.major&&e.push("".concat(a.major," professionals")),a.software&&a.software.length>0&&e.push("".concat(a.software.join(", ")," users")),a.tags&&a.tags.length>0&&e.push("".concat(a.tags.map(e=>"#".concat(e)).join(", ")," tagged works")),"Find ".concat(s," works matching: ").concat(e.join(" + "))}default:return"Browse ".concat(s," works")}},Wm=e=>{const{type:t,value:r,filters:o}=e;switch(t){case Lm:case Mm:case Rm:return r&&r.trim().length>0;case Fm:return o.major||o.software&&o.software.length>0||o.tags&&o.tags.length>0;default:return!1}},Bm=()=>{const{slug:e}=he(),t=ue(),[r]=bt(),[a,s]=(0,o.useState)(null),[n,i]=(0,o.useState)(null),[l,c]=(0,o.useState)([]),[d,u]=(0,o.useState)(!0),[h,m]=(0,o.useState)(null),[p,g]=(0,o.useState)(!0);(0,o.useEffect)(()=>{const t={slug:e,type:r.get("type"),value:r.get("value"),major:r.get("major"),software:r.getAll("software"),tags:r.getAll("tags")};let o;o=t.type&&t.value?Um(t):t.major?{type:"major",value:t.major,filters:{}}:t.slug&&window.location.pathname.includes("/software/")?{type:"software",value:t.slug,filters:{}}:t.major||t.software.length>0||t.tags.length>0?Um(t):{type:"tag",value:t.slug||"",filters:{}},s(o)},[e,r]);const f=async()=>{if(a&&Wm(a))try{const e=await async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{switch(console.log("[AggregationService] Getting stats for ".concat(e,": ").concat(t)),e){case Lm:return await Am(t);case Mm:return await Im(t);case Rm:return await Em(t);case Fm:{const{major:e,software:t,tags:o}=r;let a=0;return e&&(a=(await Im(e)).works),t&&t.length>0&&(a=(await Em(t[0])).works),{works:a,users:0,projects:0}}default:throw new Error("Unsupported aggregation type: ".concat(e))}}catch(o){return console.error("[AggregationService] Error getting stats for ".concat(e,":"),o),{works:0,users:0,projects:0}}}(a.type,a.value,a.filters);i(e)}catch(e){console.error("Error loading aggregation stats:",e)}else console.error("Invalid aggregation config:",a)},v=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(a&&Wm(a))try{const t=await async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{switch(console.log("[AggregationService] Getting works for ".concat(e,": ").concat(t)),e){case Lm:return await _m(t,r);case Mm:return await Pm(t,r);case Rm:return await Dm(t,r);case Fm:return await Tm(o,r);default:throw new Error("Unsupported aggregation type: ".concat(e))}}catch(a){return console.error("[AggregationService] Error getting works for ".concat(e,":"),a),{items:[],hasMore:!1,cursor:null}}}(a.type,a.value,{limit:12,cursor:e},a.filters);c(e?e=>[...e,...t.items]:t.items),m(t.cursor),g(t.hasMore)}catch(t){console.error("Error loading works:",t)}else console.error("Invalid aggregation config:",a)},x=e=>{t("/t/".concat(e.slug))};return(0,o.useEffect)(()=>{if(a){(async()=>{u(!0),await Promise.all([f(),v()]),u(!1)})()}},[a]),d?(0,Nt.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Nt.jsxs)("div",{className:"text-center",children:[(0,Nt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,Nt.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading tag content..."})]})}):(0,Nt.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Nt.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,Nt.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:a?Om(a):"#".concat(e)}),n&&(0,Nt.jsx)("p",{className:"text-gray-600 mt-2",children:zm(a,n)})]})})}),(0,Nt.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:l.map(e=>(0,Nt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow cursor-pointer",onClick:()=>window.open("/work/".concat(e.id),"_blank"),children:[(0,Nt.jsx)("div",{className:"aspect-w-16 aspect-h-9 bg-gray-200 rounded-t-lg",children:(0,Nt.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-48 object-cover rounded-t-lg"})}),(0,Nt.jsxs)("div",{className:"p-4",children:[(0,Nt.jsx)("h3",{className:"font-medium text-gray-900 truncate",children:e.title}),(0,Nt.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["by ",e.author.name]}),e.tags&&e.tags.length>0&&(0,Nt.jsx)("div",{className:"mt-3 flex flex-wrap gap-1",children:e.tags.map((e,t)=>{if(!e.startsWith("#"))return(0,Nt.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:e},t);{const r=vl(e);if(r.length>0)return(0,Nt.jsx)("div",{className:"inline-block",children:yl(r,x,"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium hover:bg-blue-200 cursor-pointer")},t)}return null})})]})]},e.id))}),p&&(0,Nt.jsx)("div",{className:"text-center mt-8",children:(0,Nt.jsx)("button",{onClick:()=>{p&&v(h)},className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700",children:"Load More Works"})})]})})]})},Gm=()=>(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsx)(Ms,{}),(0,Nt.jsx)(Da,{}),(0,Nt.jsx)(Is,{}),(0,Nt.jsx)(Ls,{})]}),Hm=()=>{const{navigateToCollaboration:e,navigateToMilestone:t}=Qo();return(0,Nt.jsxs)(De,{children:[(0,Nt.jsx)(Ee,{path:"/login",element:(0,Nt.jsx)(zs,{})}),(0,Nt.jsx)(Ee,{path:"/register",element:(0,Nt.jsx)(Sn,{})}),(0,Nt.jsx)(Ee,{path:"/",element:(0,Nt.jsx)(gn,{children:(0,Nt.jsx)(Gm,{})})}),(0,Nt.jsx)(Ee,{path:"/about",element:(0,Nt.jsx)(ea,{})}),(0,Nt.jsx)(Ee,{path:"/me",element:(0,Nt.jsx)(gn,{children:(0,Nt.jsx)(Pa,{})})}),(0,Nt.jsx)(Ee,{path:"/work/:id",element:(0,Nt.jsx)(gn,{children:(0,Nt.jsx)(Jl,{})})}),(0,Nt.jsx)(Ee,{path:"/artist/:id",element:(0,Nt.jsx)(gn,{children:(0,Nt.jsx)(Pa,{})})}),(0,Nt.jsx)(Ee,{path:"/tagme",element:(0,Nt.jsx)(gn,{children:(0,Nt.jsx)(li,{onCollaborationClick:t=>{e(t)},onMilestoneClick:e=>{t(e)}})})}),(0,Nt.jsx)(Ee,{path:"/tagme/milestone/:id",element:(0,Nt.jsx)(gn,{children:(0,Nt.jsx)(Ks,{})})}),(0,Nt.jsx)(Ee,{path:"/tagme/collaboration/:id",element:(0,Nt.jsx)(gn,{children:(0,Nt.jsx)(ls,{})})}),(0,Nt.jsx)(Ee,{path:"/tagme/co-future-2025",element:(0,Nt.jsx)(zc,{})}),(0,Nt.jsx)(Ee,{path:"/upload/guidelines",element:(0,Nt.jsx)(Ii,{})}),(0,Nt.jsx)(Ee,{path:"/upload/form",element:(0,Nt.jsx)(gn,{children:(0,Nt.jsx)(Ei,{children:(0,Nt.jsx)(ul,{})})})}),(0,Nt.jsx)(Ee,{path:"/upload",element:(0,Nt.jsx)(Ii,{})}),(0,Nt.jsx)(Ee,{path:"/notifications",element:(0,Nt.jsx)(gn,{children:(0,Nt.jsx)(pn,{})})}),(0,Nt.jsx)(Ee,{path:"/notification-test",element:(0,Nt.jsx)(gn,{children:(0,Nt.jsx)(ui,{})})}),(0,Nt.jsx)(Ee,{path:"/settings/edit-profile",element:(0,Nt.jsx)(gn,{children:(0,Nt.jsx)(Xh,{})})}),(0,Nt.jsx)(Ee,{path:"/test-mock-api",element:(0,Nt.jsx)(gn,{children:(0,Nt.jsx)(hi,{})})}),(0,Nt.jsx)(Ee,{path:"/test-collaboration",element:(0,Nt.jsx)(gn,{children:(0,Nt.jsx)(ci,{})})}),(0,Nt.jsx)(Ee,{path:"/test-supabase",element:(0,Nt.jsx)(Cn,{})}),(0,Nt.jsx)(Ee,{path:"/t/:slug",element:(0,Nt.jsx)(gn,{children:(0,Nt.jsx)(Bm,{})})}),(0,Nt.jsx)(Ee,{path:"/aggregation",element:(0,Nt.jsx)(gn,{children:(0,Nt.jsx)(Bm,{})})}),(0,Nt.jsx)(Ee,{path:"/major/:major",element:(0,Nt.jsx)(gn,{children:(0,Nt.jsx)(Bm,{})})}),(0,Nt.jsx)(Ee,{path:"/software/:software",element:(0,Nt.jsx)(gn,{children:(0,Nt.jsx)(Bm,{})})}),(0,Nt.jsx)(Ee,{path:"/major-aggregation",element:(0,Nt.jsx)(gn,{children:(0,Nt.jsx)(Bc,{})})}),(0,Nt.jsx)(Ee,{path:"/admin-panel",element:(0,Nt.jsx)(yc,{})}),(0,Nt.jsx)(Ee,{path:"*",element:(0,Nt.jsx)(Ie,{to:"/",replace:!0})})]})};var qm=r(453);function Vm(){const{state:e}=zo();return(0,o.useEffect)(()=>{document.body.style.overflow="unset",document.documentElement.style.overflow="unset"},[]),(0,o.useEffect)(()=>{qm.default.init().catch(e=>{console.warn("[App] Smart data cleaner initialization failed:",e)})},[]),e.isInitialized?(0,Nt.jsx)(Vt,{children:(0,Nt.jsxs)(mt,{children:[(0,Nt.jsx)(Bo,{}),(0,Nt.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,Nt.jsx)(Xo,{}),(0,Nt.jsxs)("main",{className:"pt-16",children:[(0,Nt.jsx)(Wo,{}),(0,Nt.jsx)(Hm,{})]})]})]})}):(0,Nt.jsx)(Vo,{})}const Jm=function(){return(0,Nt.jsx)(At,{children:(0,Nt.jsx)(Oo,{children:(0,Nt.jsx)(Vm,{})})})};(0,r(77).qm)();a.createRoot(document.getElementById("root")).render((0,Nt.jsx)(o.StrictMode,{children:(0,Nt.jsx)(Jm,{})}))})()})();
//# sourceMappingURL=main.5c041cd2.js.map