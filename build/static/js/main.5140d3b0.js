/*! For license information please see main.5140d3b0.js.LICENSE.txt */
(()=>{var e={8:(e,t,r)=>{"use strict";r.d(t,{Gr:()=>c,HW:()=>l,WR:()=>i,ou:()=>d});var a=r(179),o=r(915),n=r(420);const s="tag.currentUserId";const i=()=>{try{if("undefined"===typeof window)return"alice";let e=window.localStorage.getItem(s);if(!e){const t=["tag_current_user_id","currentUserId","user_id","tag.userId"];for(const r of t){const t=window.localStorage.getItem(r);if(t){console.log(`[currentUser] Migrating from old key: ${r} = ${t}`),e=t,window.localStorage.setItem(s,t),window.localStorage.removeItem(r);break}}}return e||(console.log("[currentUser] Setting default user ID: alice"),window.localStorage.setItem(s,"alice"),e="alice"),e}catch(e){return console.warn("Failed to get current user ID:",e),"alice"}},l=()=>{var e;const t=i(),r=(0,n.ug)(t);if("undefined"!==typeof window)try{const e=window.localStorage.getItem(`tag.avatars.${t}`);if(e){const t=JSON.parse(e);var a;if(t&&t.avatarUrl)return console.log("[getCurrentUser] Found avatar in localStorage:",null===(a=t.avatarUrl)||void 0===a?void 0:a.substring(0,30)),{...r,avatar:t.avatarUrl}}}catch(l){console.warn("[getCurrentUser] Failed to read avatar data:",l)}const s=(0,o.EP)(t);return s?(console.log("[getCurrentUser] Using cached avatar:",null===s||void 0===s?void 0:s.substring(0,30)),{...r,avatar:s}):(r.avatar&&(0,o.Ih)(t,r.avatar),console.log("[getCurrentUser] Using default avatar:",null===(e=r.avatar)||void 0===e?void 0:e.substring(0,30)),r)},c=async e=>{await async function(e){try{if("undefined"===typeof window)return;await a.IG.setItem(s,e)}catch(t){console.warn("Failed to write current user ID:",t)}}(e),"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent("user:changed",{detail:{userId:e}}))},d=()=>{const e=l();return(null===e||void 0===e?void 0:e.avatar)||null}},32:(e,t,r)=>{"use strict";r.d(t,{BO:()=>er,ND:()=>Xt});class a extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",r=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=r}}class o extends a{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class n extends a{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class s extends a{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var i;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(i||(i={}));var l=function(e,t,r,a){return new(r||(r=Promise))(function(o,n){function s(e){try{l(a.next(e))}catch(t){n(t)}}function i(e){try{l(a.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,i)}l((a=a.apply(e,t||[])).next())})};class c{constructor(e){let{headers:t={},customFetch:a,region:o=i.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=o,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Promise.resolve().then(r.bind(r,630)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}})(a)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;return l(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:l}=t;let c={},{region:d}=t;d||(d=this.region);const u=new URL(`${this.url}/${e}`);let h;d&&"any"!==d&&(c["x-region"]=d,u.searchParams.set("forceFunctionRegion",d)),l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&("undefined"!==typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=l):"string"===typeof l?(c["Content-Type"]="text/plain",h=l):"undefined"!==typeof FormData&&l instanceof FormData?h=l:(c["Content-Type"]="application/json",h=JSON.stringify(l)));const m=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),a),body:h}).catch(e=>{throw new o(e)}),p=m.headers.get("x-relay-error");if(p&&"true"===p)throw new n(m);if(!m.ok)throw new s(m);let g,f=(null!==(r=m.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return g="application/json"===f?yield m.json():"application/octet-stream"===f?yield m.blob():"text/event-stream"===f?m:"multipart/form-data"===f?yield m.formData():yield m.text(),{data:g,error:null,response:m}}catch(a){return{data:null,error:a,response:a instanceof s||a instanceof n?a.context:void 0}}})}}var d=r(980);const{PostgrestClient:u,PostgrestQueryBuilder:h,PostgrestFilterBuilder:m,PostgrestTransformBuilder:p,PostgrestBuilder:g,PostgrestError:f}=d;const v=class{static detectEnvironment(){var e;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof r.g&&"undefined"!==typeof r.g.WebSocket)return{type:"native",constructor:r.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!==typeof process&&process.versions&&process.versions.node){const e=parseInt(process.versions.node.split(".")[0]);return e>=22?"undefined"!==typeof globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${e} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${e} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},x=1e4;var b,y,w,k,j,N;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(b||(b={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(y||(y={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(w||(w={})),function(e){e.websocket="websocket"}(k||(k={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(j||(j={}));class C{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const a=t.getUint8(1),o=t.getUint8(2);let n=this.HEADER_LENGTH+2;const s=r.decode(e.slice(n,n+a));n+=a;const i=r.decode(e.slice(n,n+o));n+=o;return{ref:null,topic:s,event:i,payload:JSON.parse(r.decode(e.slice(n,e.byteLength)))}}}class S{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(N||(N={}));const _=function(e,t){var r;const a=null!==(r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce((r,o)=>(r[o]=I(o,e,t,a),r),{})},I=(e,t,r,a)=>{const o=t.find(t=>t.name===e),n=null===o||void 0===o?void 0:o.type,s=r[e];return n&&!a.includes(n)?E(n,s):P(s)},E=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return M(t,r)}switch(e){case N.bool:return A(t);case N.float4:case N.float8:case N.int2:case N.int4:case N.int8:case N.numeric:case N.oid:return T(t);case N.json:case N.jsonb:return L(t);case N.timestamp:return D(t);case N.abstime:case N.date:case N.daterange:case N.int4range:case N.int8range:case N.money:case N.reltime:case N.text:case N.time:case N.timestamptz:case N.timetz:case N.tsrange:case N.tstzrange:default:return P(t)}},P=e=>e,A=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},T=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},L=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},M=(e,t)=>{if("string"!==typeof e)return e;const r=e.length-1,a=e[r];if("{"===e[0]&&"}"===a){let a;const n=e.slice(1,r);try{a=JSON.parse("["+n+"]")}catch(o){a=n?n.split(","):[]}return a.map(e=>E(t,e))}return e},D=e=>"string"===typeof e?e.replace(" ","T"):e,R=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class ${constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;this.channel=e,this.event=t,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:r}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var F,O,U,z;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(F||(F={}));class W{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{const{onJoin:t,onLeave:r,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=W.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=W.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},e=>{const{onJoin:t,onLeave:r,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=W.syncDiff(this.state,e,t,r),a())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,a){const o=this.cloneDeep(e),n=this.transformState(t),s={},i={};return this.map(o,(e,t)=>{n[e]||(i[e]=t)}),this.map(n,(e,t)=>{const r=o[e];if(r){const a=t.map(e=>e.presence_ref),o=r.map(e=>e.presence_ref),n=t.filter(e=>o.indexOf(e.presence_ref)<0),l=r.filter(e=>a.indexOf(e.presence_ref)<0);n.length>0&&(s[e]=n),l.length>0&&(i[e]=l)}else s[e]=t}),this.syncDiff(o,{joins:s,leaves:i},r,a)}static syncDiff(e,t,r,a){const{joins:o,leaves:n}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(o,(t,a)=>{var o;const n=null!==(o=e[t])&&void 0!==o?o:[];if(e[t]=this.cloneDeep(a),n.length>0){const r=e[t].map(e=>e.presence_ref),a=n.filter(e=>r.indexOf(e.presence_ref)<0);e[t].unshift(...a)}r(t,n,a)}),this.map(n,(t,r)=>{let o=e[t];if(!o)return;const n=r.map(e=>e.presence_ref);o=o.filter(e=>n.indexOf(e.presence_ref)<0),e[t]=o,a(t,o,r),0===o.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const a=e[r];return t[r]="metas"in a?a.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(O||(O={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(U||(U={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(z||(z={}));class B{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},r=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=y.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new $(this,w.join,this.params,this.timeout),this.rejoinTimer=new S(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=y.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=y.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=y.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=y.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=y.errored,this.rejoinTimer.scheduleTimeout())}),this._on(w.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new W(this),this.broadcastEndpointURL=R(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var r,a;if(this.socket.isConnected()||this.socket.connect(),this.state==y.closed){const{config:{broadcast:o,presence:n,private:s}}=this.params,i=null!==(a=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map(e=>e.filter))&&void 0!==a?a:[],l=!!this.bindings[U.PRESENCE]&&this.bindings[U.PRESENCE].length>0,c={},d={broadcast:o,presence:Object.assign(Object.assign({},n),{enabled:l}),postgres_changes:i,private:s};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this._onError(t=>null===e||void 0===e?void 0:e(z.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(z.CLOSED)),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:r}=t;var a;if(this.socket.setAuth(),void 0!==r){const t=this.bindings.postgres_changes,o=null!==(a=null===t||void 0===t?void 0:t.length)&&void 0!==a?a:0,n=[];for(let a=0;a<o;a++){const o=t[a],{filter:{event:s,schema:i,table:l,filter:c}}=o,d=r&&r[a];if(!d||d.event!==s||d.schema!==i||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=y.errored,void(null===e||void 0===e||e(z.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));n.push(Object.assign(Object.assign({},o),{id:d.id}))}return this.bindings.postgres_changes=n,void(e&&e(z.SUBSCRIBED))}null===e||void 0===e||e(z.SUBSCRIBED)}).receive("error",t=>{this.state=y.errored,null===e||void 0===e||e(z.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(z.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===y.joined&&e===U.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r,a;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var a,o,n;const s=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(n=null===(o=null===(a=this.params)||void 0===a?void 0:a.config)||void 0===o?void 0:o.broadcast)||void 0===n?void 0:n.ack)||r("ok"),s.receive("ok",()=>r("ok")),s.receive("error",()=>r("error")),s.receive("timeout",()=>r("timed out"))});{const{event:n,payload:s}=e,i={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:s,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,i,null!==(r=t.timeout)&&void 0!==r?r:this.timeout);return await(null===(a=e.body)||void 0===a?void 0:a.cancel()),e.ok?"ok":"error"}catch(o){return"AbortError"===o.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=y.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(w.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new $(this,w.leave,{},e),r.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null===r||void 0===r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=y.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const a=new AbortController,o=setTimeout(()=>a.abort(),r),n=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(o),n}_push(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new $(this,e,t,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var a,o;const n=e.toLocaleLowerCase(),{close:s,error:i,leave:l,join:c}=w;if(r&&[s,i,l,c].indexOf(n)>=0&&r!==this._joinRef())return;let d=this._onMessage(n,t,r);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(n)?null===(a=this.bindings.postgres_changes)||void 0===a||a.filter(e=>{var t,r,a;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(a=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===a?void 0:a.toLocaleLowerCase())===n}).map(e=>e.callback(d,r)):null===(o=this.bindings[n])||void 0===o||o.filter(e=>{var r,a,o,s,i,l;if(["broadcast","presence","postgres_changes"].includes(n)){if("id"in e){const n=e.id,s=null===(r=e.filter)||void 0===r?void 0:r.event;return n&&(null===(a=t.ids)||void 0===a?void 0:a.includes(n))&&("*"===s||(null===s||void 0===s?void 0:s.toLocaleLowerCase())===(null===(o=t.data)||void 0===o?void 0:o.type.toLocaleLowerCase()))}{const r=null===(i=null===(s=null===e||void 0===e?void 0:e.filter)||void 0===s?void 0:s.event)||void 0===i?void 0:i.toLocaleLowerCase();return"*"===r||r===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===n}).map(e=>{if("object"===typeof d&&"ids"in d){const e=d.data,{schema:t,table:r,commit_timestamp:a,type:o,errors:n}=e,s={schema:t,table:r,commit_timestamp:a,eventType:o,new:{},old:{},errors:n};d=Object.assign(Object.assign({},s),this._getPayloadRecords(e))}e.callback(d,r)})}_isClosed(){return this.state===y.closed}_isJoined(){return this.state===y.joined}_isJoining(){return this.state===y.joining}_isLeaving(){return this.state===y.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const a=e.toLocaleLowerCase(),o={type:a,filter:t,callback:r};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(e=>{var a;return!((null===(a=e.type)||void 0===a?void 0:a.toLocaleLowerCase())===r&&B.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(w.close,{},e)}_onError(e){this._on(w.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=y.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=_(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=_(e.columns,e.old_record)),t}}const q=()=>{},H=25e3,G=10,V=100,J=[1e3,2e3,5e3,1e4];class K{constructor(e,t){var a;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=x,this.transport=null,this.heartbeatIntervalMs=H,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=q,this.ref=0,this.reconnectTimer=null,this.logger=q,this.conn=null,this.sendBuffer=[],this.serializer=new C,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Promise.resolve().then(r.bind(r,630)).then(e=>{let{default:r}=e;return r(...t)}).catch(e=>{throw new Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)})}:fetch),function(){return t(...arguments)}},!(null===(a=null===t||void 0===t?void 0:t.params)||void 0===a?void 0:a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${k.websocket}`,this.httpEndpoint=R(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=v.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case b.connecting:return j.Connecting;case b.open:return j.Open;case b.closing:return j.Closing;default:return j.Closed}}isConnected(){return this.connectionState()===j.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const r=`realtime:${e}`,a=this.getChannels().find(e=>e.topic===r);if(a)return a;{const r=new B(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:r,payload:a,ref:o}=e,n=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${r} (${o})`,a),this.isConnected()?n():this.sendBuffer.push(n)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},V);this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{"phoenix"===e.topic&&"phx_reply"===e.event&&this.heartbeatCallback("ok"===e.payload.status?"ok":"error"),e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:r,payload:a,ref:o}=e,n=o?`(${o})`:"",s=a.status||"";this.log("receive",`${s} ${t} ${r} ${n}`.trim(),a),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,a,o)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(w.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?";return`${e}${r}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=t||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const r={access_token:e,version:"realtime-js/2.15.1"};e&&t.updateJoinPayload(r),t.joinedOnce&&t._isJoined()&&t._push(w.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new S(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},G)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,a,o,n,s,i,l;if(this.transport=null!==(t=null===e||void 0===e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(r=null===e||void 0===e?void 0:e.timeout)&&void 0!==r?r:x,this.heartbeatIntervalMs=null!==(a=null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&void 0!==a?a:H,this.worker=null!==(o=null===e||void 0===e?void 0:e.worker)&&void 0!==o&&o,this.accessToken=null!==(n=null===e||void 0===e?void 0:e.accessToken)&&void 0!==n?n:null,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),((null===e||void 0===e?void 0:e.logLevel)||(null===e||void 0===e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(s=null===e||void 0===e?void 0:e.reconnectAfterMs)&&void 0!==s?s:e=>J[e-1]||1e4,this.encode=null!==(i=null===e||void 0===e?void 0:e.encode)&&void 0!==i?i:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(l=null===e||void 0===e?void 0:e.decode)&&void 0!==l?l:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===e||void 0===e?void 0:e.workerUrl}}}class Y extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Z(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class Q extends Y{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class X extends Y{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var ee=function(e,t,r,a){return new(r||(r=Promise))(function(o,n){function s(e){try{l(a.next(e))}catch(t){n(t)}}function i(e){try{l(a.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,i)}l((a=a.apply(e,t||[])).next())})};const te=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Promise.resolve().then(r.bind(r,630)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}},re=e=>{if(Array.isArray(e))return e.map(e=>re(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[r,a]=e;const o=r.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[o]=re(a)}),t};var ae=function(e,t,r,a){return new(r||(r=Promise))(function(o,n){function s(e){try{l(a.next(e))}catch(t){n(t)}}function i(e){try{l(a.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,i)}l((a=a.apply(e,t||[])).next())})};const oe=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ne=(e,t,a)=>ae(void 0,void 0,void 0,function*(){const o=yield ee(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(r.bind(r,630))).Response:Response});e instanceof o&&!(null===a||void 0===a?void 0:a.noResolveJson)?e.json().then(r=>{const a=e.status||500,o=(null===r||void 0===r?void 0:r.statusCode)||a+"";t(new Q(oe(r),a,o))}).catch(e=>{t(new X(oe(e),e))}):t(new X(oe(e),e))}),se=(e,t,r,a)=>{const o={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&a?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(a)?(o.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),o.body=JSON.stringify(a)):o.body=a,(null===t||void 0===t?void 0:t.duplex)&&(o.duplex=t.duplex),Object.assign(Object.assign({},o),r)):o};function ie(e,t,r,a,o,n){return ae(this,void 0,void 0,function*(){return new Promise((s,i)=>{e(r,se(t,a,o,n)).then(e=>{if(!e.ok)throw e;return(null===a||void 0===a?void 0:a.noResolveJson)?e:e.json()}).then(e=>s(e)).catch(e=>ne(e,i,a))})})}function le(e,t,r,a){return ae(this,void 0,void 0,function*(){return ie(e,"GET",t,r,a)})}function ce(e,t,r,a,o){return ae(this,void 0,void 0,function*(){return ie(e,"POST",t,a,o,r)})}function de(e,t,r,a,o){return ae(this,void 0,void 0,function*(){return ie(e,"PUT",t,a,o,r)})}function ue(e,t,r,a,o){return ae(this,void 0,void 0,function*(){return ie(e,"DELETE",t,a,o,r)})}var he=function(e,t,r,a){return new(r||(r=Promise))(function(o,n){function s(e){try{l(a.next(e))}catch(t){n(t)}}function i(e){try{l(a.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,i)}l((a=a.apply(e,t||[])).next())})};const me={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},pe={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ge{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;this.url=e,this.headers=t,this.bucketId=r,this.fetch=te(a)}uploadOrUpdate(e,t,r,a){return he(this,void 0,void 0,function*(){try{let o;const n=Object.assign(Object.assign({},pe),a);let s=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(n.upsert)});const i=n.metadata;"undefined"!==typeof Blob&&r instanceof Blob?(o=new FormData,o.append("cacheControl",n.cacheControl),i&&o.append("metadata",this.encodeMetadata(i)),o.append("",r)):"undefined"!==typeof FormData&&r instanceof FormData?(o=r,o.append("cacheControl",n.cacheControl),i&&o.append("metadata",this.encodeMetadata(i))):(o=r,s["cache-control"]=`max-age=${n.cacheControl}`,s["content-type"]=n.contentType,i&&(s["x-metadata"]=this.toBase64(this.encodeMetadata(i)))),(null===a||void 0===a?void 0:a.headers)&&(s=Object.assign(Object.assign({},s),a.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield("PUT"==e?de:ce)(this.fetch,`${this.url}/object/${c}`,o,Object.assign({headers:s},(null===n||void 0===n?void 0:n.duplex)?{duplex:n.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(o){if(Z(o))return{data:null,error:o};throw o}})}upload(e,t,r){return he(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,a){return he(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),n=this._getFinalPath(o),s=new URL(this.url+`/object/upload/sign/${n}`);s.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:pe.upsert},a),n=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&r instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!==typeof FormData&&r instanceof FormData?(e=r,e.append("cacheControl",t.cacheControl)):(e=r,n["cache-control"]=`max-age=${t.cacheControl}`,n["content-type"]=t.contentType);return{data:{path:o,fullPath:(yield de(this.fetch,s.toString(),e,{headers:n})).Key},error:null}}catch(i){if(Z(i))return{data:null,error:i};throw i}})}createSignedUploadUrl(e,t){return he(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const a=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(a["x-upsert"]="true");const o=yield ce(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),n=new URL(this.url+o.url),s=n.searchParams.get("token");if(!s)throw new Y("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:s},error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}})}update(e,t,r){return he(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return he(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===r||void 0===r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(Z(a))return{data:null,error:a};throw a}})}copy(e,t,r){return he(this,void 0,void 0,function*(){try{return{data:{path:(yield ce(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===r||void 0===r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(Z(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,r){return he(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),o=yield ce(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},(null===r||void 0===r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});const n=(null===r||void 0===r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${n}`)},{data:o,error:null}}catch(a){if(Z(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,r){return he(this,void 0,void 0,function*(){try{const a=yield ce(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=(null===r||void 0===r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:a.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${o}`):null})),error:null}}catch(a){if(Z(a))return{data:null,error:a};throw a}})}download(e,t){return he(this,void 0,void 0,function*(){const r="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",a=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),o=a?`?${a}`:"";try{const t=this._getFinalPath(e),a=yield le(this.fetch,`${this.url}/${r}/${t}${o}`,{headers:this.headers,noResolveJson:!0});return{data:yield a.blob(),error:null}}catch(n){if(Z(n))return{data:null,error:n};throw n}})}info(e){return he(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield le(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:re(e),error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}})}exists(e){return he(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,r,a){return ae(this,void 0,void 0,function*(){return ie(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),a)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Z(r)&&r instanceof X){const e=r.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),a=[],o=(null===t||void 0===t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==o&&a.push(o);const n="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",s=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==s&&a.push(s);let i=a.join("&");return""!==i&&(i=`?${i}`),{data:{publicUrl:encodeURI(`${this.url}/${n}/public/${r}${i}`)}}}remove(e){return he(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Z(t))return{data:null,error:t};throw t}})}list(e,t,r){return he(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},me),t),{prefix:e||""});return{data:yield ce(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(Z(a))return{data:null,error:a};throw a}})}listV2(e,t){return he(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield ce(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const fe={"X-Client-Info":"storage-js/2.11.0"};var ve=function(e,t,r,a){return new(r||(r=Promise))(function(o,n){function s(e){try{l(a.next(e))}catch(t){n(t)}}function i(e){try{l(a.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,i)}l((a=a.apply(e,t||[])).next())})};class xe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;const o=new URL(e);if(null===a||void 0===a?void 0:a.useNewHostname){/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase."))}this.url=o.href,this.headers=Object.assign(Object.assign({},fe),t),this.fetch=te(r)}listBuckets(){return ve(this,void 0,void 0,function*(){try{return{data:yield le(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Z(e))return{data:null,error:e};throw e}})}getBucket(e){return ve(this,void 0,void 0,function*(){try{return{data:yield le(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Z(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return ve(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return ve(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ve(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Z(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ve(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Z(t))return{data:null,error:t};throw t}})}}class be extends xe{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new ge(this.url,this.headers,e,this.fetch)}}let ye="";ye="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const we={headers:{"X-Client-Info":`supabase-js-${ye}/2.55.0`}},ke={schema:"public"},je={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ne={};var Ce=r(630),Se=function(e,t,r,a){return new(r||(r=Promise))(function(o,n){function s(e){try{l(a.next(e))}catch(t){n(t)}}function i(e){try{l(a.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,i)}l((a=a.apply(e,t||[])).next())})};const _e=e=>{let t;return t=e||("undefined"===typeof fetch?Ce.default:fetch),function(){return t(...arguments)}},Ie=(e,t,r)=>{const a=_e(r),o="undefined"===typeof Headers?Ce.Headers:Headers;return(r,n)=>Se(void 0,void 0,void 0,function*(){var s;const i=null!==(s=yield t())&&void 0!==s?s:e;let l=new o(null===n||void 0===n?void 0:n.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${i}`),a(r,Object.assign(Object.assign({},n),{headers:l}))})};var Ee=function(e,t,r,a){return new(r||(r=Promise))(function(o,n){function s(e){try{l(a.next(e))}catch(t){n(t)}}function i(e){try{l(a.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,i)}l((a=a.apply(e,t||[])).next())})};const Pe="2.71.1",Ae=3e4,Te=9e4,Le={"X-Client-Info":`gotrue-js/${Pe}`},Me="X-Supabase-Api-Version",De={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Re=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class $e extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Fe(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class Oe extends $e{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class Ue extends $e{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ze extends $e{constructor(e,t,r,a){super(e,r,a),this.name=t,this.status=r}}class We extends ze{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Be extends ze{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class qe extends ze{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class He extends ze{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ge extends ze{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ve extends ze{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Je(e){return Fe(e)&&"AuthRetryableFetchError"===e.name}class Ke extends ze{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Ye extends ze{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ze="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Qe=" \t\n\r=".split(""),Xe=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Qe.length;t+=1)e[Qe[t].charCodeAt(0)]=-2;for(let t=0;t<Ze.length;t+=1)e[Ze[t].charCodeAt(0)]=t;return e})();function et(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Ze[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Ze[e]),t.queuedBits-=6}}function tt(e,t,r){const a=Xe[e];if(!(a>-1)){if(-2===a)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function rt(e){const t=[],r=e=>{t.push(String.fromCodePoint(e))},a={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},n=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return void r(e);for(let r=1;r<6;r+=1)if(0===(e>>7-r&1)){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,a,r)};for(let s=0;s<e.length;s+=1)tt(e.charCodeAt(s),o,n);return t.join("")}function at(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function ot(e,t){for(let r=0;r<e.length;r+=1){let a=e.charCodeAt(r);if(a>55295&&a<=56319){const t=1024*(a-55296)&65535;a=65536+(e.charCodeAt(r+1)-56320&65535|t),r+=1}at(a,t)}}function nt(e){const t=[],r={queue:0,queuedBits:0},a=e=>{t.push(e)};for(let o=0;o<e.length;o+=1)tt(e.charCodeAt(o),r,a);return new Uint8Array(t)}function st(e){const t=[],r={queue:0,queuedBits:0},a=e=>{t.push(e)};return e.forEach(e=>et(e,r,a)),et(null,r,a),t.join("")}const it=()=>"undefined"!==typeof window&&"undefined"!==typeof document,lt={tested:!1,writable:!1},ct=()=>{if(!it())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(lt.tested)return lt.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),lt.tested=!0,lt.writable=!0}catch(t){lt.tested=!0,lt.writable=!1}return lt.writable};const dt=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Promise.resolve().then(r.bind(r,630)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}},ut=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},ht=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(a){return r}},mt=async(e,t)=>{await e.removeItem(t)};class pt{constructor(){this.promise=new pt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function gt(e){const t=e.split(".");if(3!==t.length)throw new Ye("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Re.test(t[r]))throw new Ye("JWT not in base64url format");return{header:JSON.parse(rt(t[0])),payload:JSON.parse(rt(t[1])),signature:nt(t[2]),raw:{header:t[0],payload:t[1]}}}function ft(e){return("0"+e.toString(16)).substr(-2)}async function vt(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(r);return Array.from(a).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xt(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let r="";for(let a=0;a<56;a++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,ft).join("")}();let o=a;r&&(o+="/PASSWORD_RECOVERY"),await ut(e,`${t}-code-verifier`,o);const n=await vt(a);return[n,a===n?"plain":"s256"]}pt.promiseConstructor=Promise;const bt=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const yt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wt(e){if(!yt.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function kt(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function jt(e){return JSON.parse(JSON.stringify(e))}var Nt=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(r[a[o]]=e[a[o]])}return r};const Ct=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),St=[502,503,504];async function _t(e){var t,r;if(!("object"===typeof(r=e)&&null!==r&&"status"in r&&"ok"in r&&"json"in r&&"function"===typeof r.json))throw new Ve(Ct(e),0);if(St.includes(e.status))throw new Ve(Ct(e),e.status);let a,o;try{a=await e.json()}catch(s){throw new Ue(Ct(s),s)}const n=function(e){const t=e.headers.get(Me);if(!t)return null;if(!t.match(bt))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(s){return null}}(e);if(n&&n.getTime()>=De.timestamp&&"object"===typeof a&&a&&"string"===typeof a.code?o=a.code:"object"===typeof a&&a&&"string"===typeof a.error_code&&(o=a.error_code),o){if("weak_password"===o)throw new Ke(Ct(a),e.status,(null===(t=a.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===o)throw new We}else if("object"===typeof a&&a&&"object"===typeof a.weak_password&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new Ke(Ct(a),e.status,a.weak_password.reasons);throw new Oe(Ct(a),e.status||500,o)}async function It(e,t,r,a){var o;const n=Object.assign({},null===a||void 0===a?void 0:a.headers);n[Me]||(n[Me]=De.name),(null===a||void 0===a?void 0:a.jwt)&&(n.Authorization=`Bearer ${a.jwt}`);const s=null!==(o=null===a||void 0===a?void 0:a.query)&&void 0!==o?o:{};(null===a||void 0===a?void 0:a.redirectTo)&&(s.redirect_to=a.redirectTo);const i=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=await async function(e,t,r,a,o,n){const s=((e,t,r,a)=>{const o={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),o.body=JSON.stringify(a),Object.assign(Object.assign({},o),r))})(t,a,o,n);let i;try{i=await e(r,Object.assign({},s))}catch(l){throw console.error(l),new Ve(Ct(l),0)}i.ok||await _t(i);if(null===a||void 0===a?void 0:a.noResolveJson)return i;try{return await i.json()}catch(l){await _t(l)}}(e,t,r+i,{headers:n,noResolveJson:null===a||void 0===a?void 0:a.noResolveJson},{},null===a||void 0===a?void 0:a.body);return(null===a||void 0===a?void 0:a.xform)?null===a||void 0===a?void 0:a.xform(l):{data:Object.assign({},l),error:null}}function Et(e){var t;let r=null;var a;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=(a=e.expires_in,Math.round(Date.now()/1e3)+a)));return{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Pt(e){const t=Et(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function At(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Tt(e){return{data:e,error:null}}function Lt(e){const{action_link:t,email_otp:r,hashed_token:a,redirect_to:o,verification_type:n}=e,s=Nt(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:a,redirect_to:o,verification_type:n},user:Object.assign({},s)},error:null}}function Mt(e){return e}const Dt=["global","local","others"];var Rt=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(r[a[o]]=e[a[o]])}return r};class $t{constructor(e){let{url:t="",headers:r={},fetch:a}=e;this.url=t,this.headers=r,this.fetch=dt(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dt[0];if(Dt.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Dt.join(", ")}`);try{return await It(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await It(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:At})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Rt(e,["options"]),a=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(a.new_email=null===r||void 0===r?void 0:r.newEmail,delete a.newEmail),await It(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Lt,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(Fe(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await It(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:At})}catch(t){if(Fe(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,a,o,n,s,i;try{const l={nextPage:null,lastPage:0,total:0},c=await It(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(o=null===(a=null===e||void 0===e?void 0:e.perPage)||void 0===a?void 0:a.toString())&&void 0!==o?o:""},xform:Mt});if(c.error)throw c.error;const d=await c.json(),u=null!==(n=c.headers.get("x-total-count"))&&void 0!==n?n:0,h=null!==(i=null===(s=c.headers.get("link"))||void 0===s?void 0:s.split(","))&&void 0!==i?i:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(Fe(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){wt(e);try{return await It(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:At})}catch(t){if(Fe(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){wt(e);try{return await It(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:At})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];wt(e);try{return await It(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:At})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){wt(e.userId);try{const{data:t,error:r}=await It(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(t){if(Fe(t))return{data:null,error:t};throw t}}async _deleteFactor(e){wt(e.userId),wt(e.id);try{return{data:await It(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Fe(t))return{data:null,error:t};throw t}}}function Ft(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Ot=!!(globalThis&&ct()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Ut extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class zt extends Ut{}async function Wt(e,t,r){Ot&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),Ot&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async a=>{if(!a){if(0===t)throw Ot&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new zt(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ot)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}Ot&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Ot&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const Bt={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Le,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function qt(e,t,r){return await r()}const Ht={};class Gt{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Gt.nextInstanceID,Gt.nextInstanceID+=1,this.instanceID>0&&it()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},Bt),e);if(this.logDebugMessages=!!a.debug,"function"===typeof a.debug&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new $t({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=dt(a.fetch),this.lock=a.lock||qt,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:it()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Wt:this.lock=qt,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:ct()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ft(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Ft(this.memoryStorage)),it()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=Ht[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Ht[this.storageKey]=Object.assign(Object.assign({},Ht[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Ht[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ht[this.storageKey]=Object.assign(Object.assign({},Ht[this.storageKey]),{cachedAt:e})}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger(`GoTrueClient@${this.instanceID} (${Pe}) ${(new Date).toISOString()}`,...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(a){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),it()&&this.detectSessionInUrl&&"none"!==r){const{data:a,error:o}=await this._getSessionFromURL(t,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),function(e){return Fe(e)&&"AuthImplicitGrantRedirectError"===e.name}(o)){const t=null===(e=o.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:o}}return await this._removeSession(),{error:o}}const{session:n,redirectType:s}=a;return this._debug("#_initialize()","detected session in URL",n,"redirect type",s),await this._saveSession(n),setTimeout(async()=>{"recovery"===s?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Fe(t)?{error:t}:{error:new Ue("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,a;try{const o=await It(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(r=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===(a=null===e||void 0===e?void 0:e.options)||void 0===a?void 0:a.captchaToken}},xform:Et}),{data:n,error:s}=o;if(s||!n)return{data:{user:null,session:null},error:s};const i=n.session,l=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",i)),{data:{user:l,session:i},error:null}}catch(o){if(Fe(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var t,r,a;try{let o;if("email"in e){const{email:r,password:a,options:n}=e;let s=null,i=null;"pkce"===this.flowType&&([s,i]=await xt(this.storage,this.storageKey)),o=await It(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null===n||void 0===n?void 0:n.emailRedirectTo,body:{email:r,password:a,data:null!==(t=null===n||void 0===n?void 0:n.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},code_challenge:s,code_challenge_method:i},xform:Et})}else{if(!("phone"in e))throw new qe("You must provide either an email or phone number and a password");{const{phone:t,password:n,options:s}=e;o=await It(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:n,data:null!==(r=null===s||void 0===s?void 0:s.data)&&void 0!==r?r:{},channel:null!==(a=null===s||void 0===s?void 0:s.channel)&&void 0!==a?a:"sms",gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},xform:Et})}}const{data:n,error:s}=o;if(s||!n)return{data:{user:null,session:null},error:s};const i=n.session,l=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",i)),{data:{user:l,session:i},error:null}}catch(o){if(Fe(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:a,options:o}=e;t=await It(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:a,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}},xform:Pt})}else{if(!("phone"in e))throw new qe("You must provide either an email or phone number and a password");{const{phone:r,password:a,options:o}=e;t=await It(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:a,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}},xform:Pt})}}const{data:r,error:a}=t;return a?{data:{user:null,session:null},error:a}:r&&r.session&&r.user?(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a}):{data:{user:null,session:null},error:new Be}}catch(t){if(Fe(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,a,o;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:null===(o=e.options)||void 0===o?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,a,o,n,s,i,l,c,d,u,h;let m,p;if("message"in e)m=e.message,p=e.signature;else{const{chain:u,wallet:h,statement:g,options:f}=e;let v;if(it())if("object"===typeof h)v=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");v=e.solana}else{if("object"!==typeof h||!(null===f||void 0===f?void 0:f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=h}const x=new URL(null!==(t=null===f||void 0===f?void 0:f.url)&&void 0!==t?t:window.location.href);if("signIn"in v&&v.signIn){const e=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===f||void 0===f?void 0:f.signInWithSolana),{version:"1",domain:x.host,uri:x.href}),g?{statement:g}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");m="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in v)||"function"!==typeof v.signMessage||!("publicKey"in v)||"object"!==typeof v||!v.publicKey||!("toBase58"in v.publicKey)||"function"!==typeof v.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${x.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${x.href}`,`Issued At: ${null!==(a=null===(r=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===r?void 0:r.issuedAt)&&void 0!==a?a:(new Date).toISOString()}`,...(null===(o=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===o?void 0:o.notBefore)?[`Not Before: ${f.signInWithSolana.notBefore}`]:[],...(null===(n=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===n?void 0:n.expirationTime)?[`Expiration Time: ${f.signInWithSolana.expirationTime}`]:[],...(null===(s=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===s?void 0:s.chainId)?[`Chain ID: ${f.signInWithSolana.chainId}`]:[],...(null===(i=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===i?void 0:i.nonce)?[`Nonce: ${f.signInWithSolana.nonce}`]:[],...(null===(l=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${f.signInWithSolana.requestId}`]:[],...(null===(d=null===(c=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...f.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await v.signMessage((new TextEncoder).encode(m),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:r}=await It(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:st(p)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:Et});if(r)throw r;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:r}):{data:{user:null,session:null},error:new Be}}catch(g){if(Fe(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(e){const t=await ht(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:o}=await It(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Et});if(await mt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==a&&void 0!==a?a:null}),error:o}):{data:{user:null,session:null,redirectType:null},error:new Be}}catch(o){if(Fe(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:t,provider:r,token:a,access_token:o,nonce:n}=e,s=await It(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:o,nonce:n,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:Et}),{data:i,error:l}=s;return l?{data:{user:null,session:null},error:l}:i&&i.session&&i.user?(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:i,error:l}):{data:{user:null,session:null},error:new Be}}catch(t){if(Fe(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,a,o,n;try{if("email"in e){const{email:a,options:o}=e;let n=null,s=null;"pkce"===this.flowType&&([n,s]=await xt(this.storage,this.storageKey));const{error:i}=await It(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:null!==(t=null===o||void 0===o?void 0:o.data)&&void 0!==t?t:{},create_user:null===(r=null===o||void 0===o?void 0:o.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken},code_challenge:n,code_challenge_method:s},redirectTo:null===o||void 0===o?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:t,options:r}=e,{data:s,error:i}=await It(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(a=null===r||void 0===r?void 0:r.data)&&void 0!==a?a:{},create_user:null===(o=null===r||void 0===r?void 0:r.shouldCreateUser)||void 0===o||o,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken},channel:null!==(n=null===r||void 0===r?void 0:r.channel)&&void 0!==n?n:"sms"}});return{data:{user:null,session:null,messageId:null===s||void 0===s?void 0:s.message_id},error:i}}throw new qe("You must provide either an email or phone number.")}catch(s){if(Fe(s))return{data:{user:null,session:null},error:s};throw s}}async verifyOtp(e){var t,r;try{let a,o;"options"in e&&(a=null===(t=e.options)||void 0===t?void 0:t.redirectTo,o=null===(r=e.options)||void 0===r?void 0:r.captchaToken);const{data:n,error:s}=await It(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:Et});if(s)throw s;if(!n)throw new Error("An error occurred on token verification.");const i=n.session,l=n.user;return(null===i||void 0===i?void 0:i.access_token)&&(await this._saveSession(i),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",i)),{data:{user:l,session:i},error:null}}catch(a){if(Fe(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var t,r,a;try{let o=null,n=null;return"pkce"===this.flowType&&([o,n]=await xt(this.storage,this.storageKey)),await It(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(a=null===e||void 0===e?void 0:e.options)||void 0===a?void 0:a.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:n}),headers:this.headers,xform:Tt})}catch(o){if(Fe(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new We;const{error:a}=await It(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(Fe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:a,options:o}=e,{error:n}=await It(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}},redirectTo:null===o||void 0===o?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:n}}if("phone"in e){const{phone:r,type:a,options:o}=e,{data:n,error:s}=await It(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:null===n||void 0===n?void 0:n.message_id},error:s}}throw new qe("You must provide either an email or phone number and a type")}catch(t){if(Fe(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(e){}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await ht(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=!!e.expires_at&&1e3*e.expires_at-Date.now()<Te;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const t=await ht(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=kt()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,r,a)=>(t||"user"!==r||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,r,a))})}return{data:{session:e},error:null}}const{session:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await It(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:At}):await this._useSession(async e=>{var t,r,a;const{data:o,error:n}=e;if(n)throw n;return(null===(t=o.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await It(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(a=null===(r=o.session)||void 0===r?void 0:r.access_token)&&void 0!==a?a:void 0,xform:At}):{data:{user:null},error:new We}})}catch(t){if(Fe(t))return function(e){return Fe(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await mt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async r=>{const{data:a,error:o}=r;if(o)throw o;if(!a.session)throw new We;const n=a.session;let s=null,i=null;"pkce"===this.flowType&&null!=e.email&&([s,i]=await xt(this.storage,this.storageKey));const{data:l,error:c}=await It(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:i}),jwt:n.access_token,xform:At});if(c)throw c;return n.user=l.user,await this._saveSession(n),await this._notifyAllSubscribers("USER_UPDATED",n),{data:{user:n.user},error:null}})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new We;const t=Date.now()/1e3;let r=t,a=!0,o=null;const{payload:n}=gt(e.access_token);if(n.exp&&(r=n.exp,a=r<=t),a){const{session:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return{data:{user:null,session:null},error:r};if(!t)return{data:{user:null,session:null},error:null};o=t}else{const{data:a,error:n}=await this._getUser(e.access_token);if(n)throw n;o={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(Fe(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:a,error:o}=t;if(o)throw o;e=null!==(r=a.session)&&void 0!==r?r:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new We;const{session:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Fe(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!it())throw new He("No browser detected.");if(e.error||e.error_description||e.error_code)throw new He(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Ge("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new He("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ge("No code detected.");const{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;const a=new URL(window.location.href);return a.searchParams.delete("code"),window.history.replaceState(window.history.state,"",a.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:o,refresh_token:n,expires_in:s,expires_at:i,token_type:l}=e;if(!o||!s||!n||!l)throw new He("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(s);let u=c+d;i&&(u=parseInt(i));const h=u-c;1e3*h<=Ae&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const m=u-d;c-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,u,c):c-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,u,c);const{data:p,error:g}=await this._getUser(o);if(g)throw g;const f={provider_token:r,provider_refresh_token:a,access_token:o,expires_in:d,expires_at:u,refresh_token:n,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:f,redirectType:e.type},error:null}}catch(r){if(Fe(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ht(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var r;const{data:a,error:o}=t;if(o)return{error:o};const n=null===(r=a.session)||void 0===r?void 0:r.access_token;if(n){const{error:t}=await this.admin.signOut(n,e);if(t&&(!function(e){return Fe(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await mt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,a;try{const{data:{session:a},error:o}=t;if(o)throw o;await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(o){await(null===(a=this.stateChangeEmitters.get(e))||void 0===a?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,a=null;"pkce"===this.flowType&&([r,a]=await xt(this.storage,this.storageKey,!0));try{return await It(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(Fe(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Fe(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:a}=await this._useSession(async t=>{var r,a,o,n,s;const{data:i,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,scopes:null===(a=e.options)||void 0===a?void 0:a.scopes,queryParams:null===(o=e.options)||void 0===o?void 0:o.queryParams,skipBrowserRedirect:!0});return await It(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(s=null===(n=i.session)||void 0===n?void 0:n.access_token)&&void 0!==s?s:void 0})});if(a)throw a;return it()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===r||void 0===r?void 0:r.url),{data:{provider:e.provider,url:null===r||void 0===r?void 0:r.url},error:null}}catch(r){if(Fe(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,a;const{data:o,error:n}=t;if(n)throw n;return await It(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(a=null===(r=o.session)||void 0===r?void 0:r.access_token)&&void 0!==a?a:void 0})})}catch(t){if(Fe(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const o=Date.now();return await(r=async r=>(r>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await It(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Et})),a=(e,t)=>{const r=200*Math.pow(2,e);return t&&Je(t)&&Date.now()+r-o<Ae},new Promise((e,t)=>{(async()=>{for(let n=0;n<1/0;n++)try{const t=await r(n);if(!a(n,null,t))return void e(t)}catch(o){if(!a(n,o))return void t(o)}})()}))}catch(o){if(this._debug(t,"error",o),Fe(o))return{data:{session:null,user:null},error:o};throw o}finally{this._debug(t,"end")}var r,a}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),it()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const o=await ht(this.storage,this.storageKey);if(o&&this.userStorage){let t=await ht(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:o.user},await ut(this.userStorage,this.storageKey+"-user",t)),o.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:kt()}else if(o&&!o.user&&!o.user){const e=await ht(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(o.user=e.user,await mt(this.storage,this.storageKey+"-user"),await ut(this.storage,this.storageKey,o)):o.user=kt()}if(this._debug(r,"session from storage",o),!this._isValidSession(o))return this._debug(r,"session is not valid"),void(null!==o&&await this._removeSession());const n=1e3*(null!==(t=o.expires_at)&&void 0!==t?t:1/0)-Date.now()<Te;if(this._debug(r,`session has${n?"":" not"} expired with margin of 90000s`),n){if(this.autoRefreshToken&&o.refresh_token){const{error:e}=await this._callRefreshToken(o.refresh_token);e&&(console.error(e),Je(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(o.user&&!0===o.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(o.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(o.user=e.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){return this._debug(r,"error",o),void console.error(o)}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new We;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new pt;const{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new We;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const a={session:t.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(a,"error",o),Fe(o)){const e={session:null,error:o};return Je(o)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(o){a.push(o)}});if(await Promise.all(o),a.length>0){for(let e=0;e<a.length;e+=1)console.error(a[e]);throw a[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await ut(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const a=jt(e);await ut(this.storage,this.storageKey,a)}else{const e=jt(t);await ut(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await mt(this.storage,this.storageKey),await mt(this.storage,this.storageKey+"-code-verifier"),await mt(this.storage,this.storageKey+"-user"),this.userStorage&&await mt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&it()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ae);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:r}}=e;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const a=Math.floor((1e3*r.expires_at-t)/Ae);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),a<=3&&await this._callRefreshToken(r.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof Ut))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!it()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const a=[`provider=${encodeURIComponent(t)}`];if((null===r||void 0===r?void 0:r.redirectTo)&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),(null===r||void 0===r?void 0:r.scopes)&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),"pkce"===this.flowType){const[e,t]=await xt(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});a.push(r.toString())}if(null===r||void 0===r?void 0:r.queryParams){const e=new URLSearchParams(r.queryParams);a.push(e.toString())}return(null===r||void 0===r?void 0:r.skipBrowserRedirect)&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:a,error:o}=t;return o?{data:null,error:o}:await It(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(r=null===a||void 0===a?void 0:a.session)||void 0===r?void 0:r.access_token})})}catch(t){if(Fe(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,a;const{data:o,error:n}=t;if(n)return{data:null,error:n};const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:i,error:l}=await It(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:null===(r=null===o||void 0===o?void 0:o.session)||void 0===r?void 0:r.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(a=null===i||void 0===i?void 0:i.totp)||void 0===a?void 0:a.qr_code)&&(i.totp.qr_code=`data:image/svg+xml;utf-8,${i.totp.qr_code}`),{data:i,error:null})})}catch(t){if(Fe(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:a,error:o}=t;if(o)return{data:null,error:o};const{data:n,error:s}=await It(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(r=null===a||void 0===a?void 0:a.session)||void 0===r?void 0:r.access_token});return s?{data:null,error:s}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+n.expires_in},n)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",n),{data:n,error:s})})}catch(t){if(Fe(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:a,error:o}=t;return o?{data:null,error:o}:await It(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(r=null===a||void 0===a?void 0:a.session)||void 0===r?void 0:r.access_token})})}catch(t){if(Fe(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(null===e||void 0===e?void 0:e.factors)||[],a=r.filter(e=>"totp"===e.factor_type&&"verified"===e.status),o=r.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:r,totp:a,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:a},error:o}=e;if(o)return{data:null,error:o};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:n}=gt(a.access_token);let s=null;n.aal&&(s=n.aal);let i=s;(null!==(r=null===(t=a.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==r?r:[]).length>0&&(i="aal2");return{data:{currentLevel:s,nextLevel:i,currentAuthenticationMethods:n.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const r=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>r)return t;const{data:a,error:o}=await It(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return a.keys&&0!==a.keys.length?(this.jwks=a,this.jwks_cached_at=r,t=a.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let r=e;if(!r){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};r=e.session.access_token}const{header:a,payload:o,signature:n,raw:{header:s,payload:i}}=gt(r);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(o.exp);const l=a.alg&&!a.alg.startsWith("HS")&&a.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(a.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(r);if(e)throw e;return{data:{claims:o,header:a,signature:n},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(a.alg),d=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,n,function(e){const t=[];return ot(e,e=>t.push(e)),new Uint8Array(t)}(`${s}.${i}`)))throw new Ye("Invalid JWT signature");return{data:{claims:o,header:a,signature:n},error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}}}Gt.nextInstanceID=0;const Vt=Gt;class Jt extends Vt{constructor(e){super(e)}}var Kt=function(e,t,r,a){return new(r||(r=Promise))(function(o,n){function s(e){try{l(a.next(e))}catch(t){n(t)}}function i(e){try{l(a.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,i)}l((a=a.apply(e,t||[])).next())})};class Yt{constructor(e,t,r){var a,o,n;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const s=(i=e).endsWith("/")?i:i+"/";var i;const l=new URL(s);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d=function(e,t){var r,a;const{db:o,auth:n,realtime:s,global:i}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),o),auth:Object.assign(Object.assign({},c),n),realtime:Object.assign(Object.assign({},d),s),storage:{},global:Object.assign(Object.assign(Object.assign({},u),i),{headers:Object.assign(Object.assign({},null!==(r=null===u||void 0===u?void 0:u.headers)&&void 0!==r?r:{}),null!==(a=null===i||void 0===i?void 0:i.headers)&&void 0!==a?a:{})}),accessToken:()=>Ee(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==r&&void 0!==r?r:{},{db:ke,realtime:Ne,auth:Object.assign(Object.assign({},je),{storageKey:c}),global:we});this.storageKey=null!==(a=d.auth.storageKey)&&void 0!==a?a:"",this.headers=null!==(o=d.global.headers)&&void 0!==o?o:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(n=d.auth)&&void 0!==n?n:{},this.headers,d.global.fetch),this.fetch=Ie(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new u(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new be(this.storageUrl.href,this.headers,this.fetch,null===r||void 0===r?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new c(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,r)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Kt(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return null!==(t=null===(e=r.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient(e,t,r){let{autoRefreshToken:a,persistSession:o,detectSessionInUrl:n,storage:s,storageKey:i,flowType:l,lock:c,debug:d}=e;const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Jt({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),t),storageKey:i,autoRefreshToken:a,persistSession:o,detectSessionInUrl:n,storage:s,flowType:l,lock:c,debug:d,fetch:r,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new K(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=r}}(function(){if("undefined"!==typeof window)return!1;if("undefined"===typeof process)return!1;const e=process.version;if(void 0===e||null===e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Zt={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SUPABASE_URL,Qt={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SUPABASE_ANON_KEY;Zt&&Qt||(console.warn("\u26a0\ufe0f Supabase\u73af\u5883\u53d8\u91cf\u672a\u914d\u7f6e\uff0c\u5c06\u4f7f\u7528mock\u6570\u636e"),console.warn("\u8bf7\u8bbe\u7f6e REACT_APP_SUPABASE_URL \u548c REACT_APP_SUPABASE_ANON_KEY"));const Xt=((e,t,r)=>new Yt(e,t,r))(Zt||"https://placeholder.supabase.co",Qt||"placeholder-key"),er=async()=>{if(!Zt||!Qt)return console.log("\u2139\ufe0f Supabase\u73af\u5883\u53d8\u91cf\u672a\u914d\u7f6e\uff0c\u4f7f\u7528mock\u6570\u636e"),!1;try{const{data:e,error:t}=await Xt.from("users").select("count").limit(1);return t?(console.warn("\u26a0\ufe0f Supabase\u8fde\u63a5\u5931\u8d25\uff0c\u5c06\u4f7f\u7528mock\u6570\u636e:",t.message),!1):(console.log("\u2705 Supabase\u8fde\u63a5\u6210\u529f"),!0)}catch(e){return console.warn("\u26a0\ufe0f Supabase\u8fde\u63a5\u68c0\u67e5\u5931\u8d25\uff0c\u5c06\u4f7f\u7528mock\u6570\u636e:",e.message),!1}}},43:(e,t,r)=>{"use strict";e.exports=r(202)},121:(e,t,r)=>{"use strict";r.d(t,{Lt:()=>l,getProfile:()=>i});var a=r(792);const o=e=>`tag.userProfile.${e}`;function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return Array.isArray(e)?e.filter(e=>e&&e.trim()).map(e=>e.trim()).filter((e,t,r)=>r.indexOf(e)===t).slice(0,t):[]}function s(e){var t,r,a,o;return{id:e.id||"",fullName:(e.fullName||"").trim(),title:(e.title||"").trim(),school:(e.school||"").trim(),pronouns:(e.pronouns||"").trim(),majors:n(e.majors,3),minors:n(e.minors,3),skills:n(e.skills,12),bio:(e.bio||"").trim(),avatar:e.avatar||null,socialLinks:{instagram:((null===(t=e.socialLinks)||void 0===t?void 0:t.instagram)||"").trim(),portfolio:((null===(r=e.socialLinks)||void 0===r?void 0:r.portfolio)||"").trim(),discord:((null===(a=e.socialLinks)||void 0===a?void 0:a.discord)||"").trim(),otherLinks:Array.isArray(null===(o=e.socialLinks)||void 0===o?void 0:o.otherLinks)?e.socialLinks.otherLinks.filter(e=>e&&e.label&&e.url):[]},updatedAt:e.updatedAt||(new Date).toISOString()}}const i=async e=>{try{const r=function(e){try{if("undefined"===typeof window)return null;const t=window.localStorage.getItem(o(e));return t?JSON.parse(t):null}catch(t){return console.warn("Failed to read user profile data:",t),null}}(e),a=function(e){return{id:e,fullName:"",title:"",school:"",pronouns:"",majors:[],minors:[],skills:[],bio:"",avatar:null,socialLinks:{instagram:"",portfolio:"",discord:"",otherLinks:[]},updatedAt:(new Date).toISOString()}}(e);if(!r)return{success:!0,data:a};const n={...a,...r,socialLinks:{...a.socialLinks,...r.socialLinks||{}}};try{const t=window.localStorage.getItem(`tag.avatars.${e}`);if(t){const e=JSON.parse(t);e&&e.avatarUrl&&(n.avatar=e.avatarUrl,console.log("[userProfileService] Loaded avatar from tag.avatars storage"))}}catch(t){console.warn("[userProfileService] Failed to load avatar from tag.avatars storage:",t)}const i=s(n);return console.log("[userProfileService] Loading profile data:",{userId:e,socialLinks:i.socialLinks,fullProfile:i}),{success:!0,data:i}}catch(t){return console.error("Failed to get profile:",t),{success:!1,error:t.message}}},l=async(e,t)=>{try{const l=await i(e);if(!l.success)return l;const c=l.data,d=s({...c,...t,socialLinks:{...c.socialLinks,...t.socialLinks||{}},id:e,updatedAt:(new Date).toISOString()}),u=function(e){const t={};return e.fullName&&e.fullName.trim()||(t.fullName="Full name is required"),{isValid:0===Object.keys(t).length,errors:t}}(d);if(!u.isValid)return{success:!1,errors:u.errors};console.log("[userProfileService] Saving profile data:",{userId:e,socialLinks:d.socialLinks,fullProfile:d});const h=function(e,t){try{return"undefined"!==typeof window&&(window.localStorage.setItem(o(e),JSON.stringify(t)),!0)}catch(r){return console.warn("Failed to write user profile data:",r),!1}}(e,d);if(!h)return{success:!1,error:"Failed to save profile data"};if(console.log("[userProfileService] Profile data saved successfully"),d.avatar)try{(await a.A.storeAvatar(e,d.avatar)).success?console.log(`[userProfileService] Avatar stored in IndexedDB for user: ${e}`):console.warn(`[userProfileService] Failed to store avatar in IndexedDB for user: ${e}`);const t={avatarUrl:d.avatar,timestamp:Date.now()};localStorage.setItem(`tag.avatars.${e}`,JSON.stringify(t)),console.log(`[userProfileService] Avatar stored in localStorage for user: ${e}`)}catch(n){console.error(`[userProfileService] Error storing avatar: ${n}`)}return r=d,"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent("profile:updated",{detail:r})),{success:!0,data:d}}catch(n){return console.error("Failed to save profile:",n),{success:!1,error:n.message}}var r}},153:(e,t,r)=>{"use strict";var a=r(43),o=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var a,n={},c=null,d=null;for(a in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)s.call(t,a)&&!l.hasOwnProperty(a)&&(n[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===n[a]&&(n[a]=t[a]);return{$$typeof:o,type:e,key:c,ref:d,props:n,_owner:i.current}}t.Fragment=n,t.jsx=c,t.jsxs=c},179:(e,t,r)=>{"use strict";r.d(t,{IG:()=>s});class a{constructor(){this.storage=new Map}async getItem(e){return this.storage.get(e)||null}async setItem(e,t){try{return this.storage.set(e,t),!0}catch(r){return console.warn(`[MemoryStorageAdapter] Failed to set ${e}:`,r),!1}}async removeItem(e){try{return this.storage.delete(e)}catch(t){return console.warn(`[MemoryStorageAdapter] Failed to remove ${e}:`,t),!1}}async keys(){return Array.from(this.storage.keys())}async clear(){try{return this.storage.clear(),!0}catch(e){return console.warn("[MemoryStorageAdapter] Failed to clear:",e),!1}}async init(){return!0}}class o{static async getAdapter(){if(this.instance)return this.instance;return console.log("[StorageFactory] Using MemoryStorageAdapter"),this.instance=new a,this.instance}static reset(){this.instance=null}}o.instance=null;const n=o.getAdapter.bind(o),s={getItem:async e=>(await n()).getItem(e),setItem:async(e,t)=>(await n()).setItem(e,t),removeItem:async e=>(await n()).removeItem(e),keys:async()=>(await n()).keys(),clear:async()=>(await n()).clear(),init:async()=>(await n()).init()};new class{constructor(){this.cache=new Map}async storeImageUrl(e,t){try{return this.cache.set(e,t),!0}catch(r){return console.warn(`[ImageStorage] Failed to store image URL for ${e}:`,r),!1}}async getImageUrl(e){try{return this.cache.get(e)||null}catch(t){return console.warn(`[ImageStorage] Failed to get image URL for ${e}:`,t),null}}async removeImageUrl(e){try{return this.cache.delete(e)}catch(t){return console.warn(`[ImageStorage] Failed to remove image URL for ${e}:`,t),!1}}async clearCache(){try{return this.cache.clear(),!0}catch(e){return console.warn("[ImageStorage] Failed to clear cache:",e),!1}}}},185:(e,t,r)=>{e.exports=r(392)},200:(e,t,r)=>{"use strict";r.d(t,{BD:()=>l,S5:()=>d,Vp:()=>i,ep:()=>c,jp:()=>p,qo:()=>u,updatePortfolioItem:()=>h,zB:()=>m});var a=r(8),o=r(337),n=r(420),s=r(179);const i=async e=>{if(console.log(`[Portfolio] Mock API: Getting image URL for ${e}`),!e)return console.warn("[Portfolio] Mock API: filePath is empty or undefined"),{success:!1,error:"Invalid file path"};try{const t=await o.default.getImageUrl(e);return t?(console.log(`[Portfolio] Mock API: \u547d\u4e2d - queryKey: ${e}, url: ${t.substring(0,32)}...`),{success:!0,data:{url:t,path:e}}):(console.log(`[Portfolio] Mock API: \u672a\u547d\u4e2d - queryKey: ${e}`),{success:!1,error:"Image not found"})}catch(t){return console.error("[Portfolio] Mock API: Error getting image URL:",t),{success:!1,error:t.message}}},l=async()=>{console.log("[Portfolio] Mock API: Reading from localStorage");try{const t=(0,a.WR)(),r=`portfolio_${t}`,o=await s.IG.getItem(r);let n=[];try{n=o?JSON.parse(o):[]}catch(e){console.warn(`[Portfolio] Mock API: Failed to parse portfolio data for user ${t}:`,e),n=[]}Array.isArray(n)||(console.warn(`[Portfolio] Mock API: Portfolio data for user ${t} is not an array`),n=[]),console.log(`[Portfolio] Mock API: Found ${n.length} items for user ${t}`);return{success:!0,data:await Promise.all(n.map(async e=>{if(e.imagePaths&&e.imagePaths.length>0&&e.imagePaths[0]){const t=await i(e.imagePaths[0]);if(t.success)return{...e,thumbnailPath:t.data.url}}return e}))}}catch(t){return console.error("[Portfolio] Mock API: Error reading portfolio:",t),{success:!1,error:t.message}}},c=async e=>{console.log(`[Portfolio] Mock API: Reading public portfolio for user ${e}`);try{const r=`portfolio_${e}`,a=await s.IG.getItem(r);let o=[];try{o=a?JSON.parse(a):[]}catch(t){console.warn(`[Portfolio] Mock API: Failed to parse portfolio data for user ${e}:`,t),o=[]}Array.isArray(o)||(console.warn(`[Portfolio] Mock API: Portfolio data for user ${e} is not an array`),o=[]);const n=o.filter(e=>!1!==e.isPublic);console.log(`[Portfolio] Mock API: Found ${n.length} public items for user ${e}`);return{success:!0,data:await Promise.all(n.map(async e=>{if(e.imagePaths&&e.imagePaths.length>0&&e.imagePaths[0]){const t=await i(e.imagePaths[0]);if(t.success)return{...e,thumbnailPath:t.data.url}}return e}))}}catch(r){return console.error("[Portfolio] Mock API: Error reading public portfolio:",r),{success:!1,error:r.message}}},d=async()=>{console.log("[Portfolio] Mock API: Reading all public portfolios");try{const t=[],a=await s.IG.keys();for(const i of a)if(i&&i.startsWith("portfolio_")&&!i.includes("image_")){const a=i.replace("portfolio_",""),o=await s.IG.getItem(i);let l=[];try{l=o?JSON.parse(o):[]}catch(e){console.warn(`[Portfolio] Mock API: Failed to parse portfolio data for user ${a}:`,e);continue}if(!Array.isArray(l)){console.warn(`[Portfolio] Mock API: Portfolio data for user ${a} is not an array`);continue}const c=l.filter(e=>e&&e.id&&!1!==e.isPublic).map(async e=>{var t,o,s;const{getProfile:i}=await Promise.resolve().then(r.bind(r,121)),l=await i(a),c=l.success?l.data:null;return{...e,profiles:{id:a,full_name:(null===c||void 0===c?void 0:c.fullName)||(null===(t=(0,n.ug)(a))||void 0===t?void 0:t.name)||"Unknown Artist",avatar_url:(null===(o=(0,n.ug)(a))||void 0===o?void 0:o.avatar)||"",role:(null===c||void 0===c?void 0:c.title)||(null===(s=(0,n.ug)(a))||void 0===s?void 0:s.role)||"Design"}}}),d=await Promise.all(c);t.push(...d)}const o=await Promise.all(t.map(async e=>{if(e.imagePaths&&e.imagePaths.length>0){const t=await i(e.imagePaths[0]);if(t.success)return{...e,thumbnailPath:t.data.url}}return e}));return o.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)),console.log(`[Portfolio] Mock API: Found ${o.length} total public items`),{success:!0,data:o}}catch(t){return console.error("[Portfolio] Mock API: Error reading all public portfolios:",t),{success:!1,error:t.message}}},u=async e=>{console.log("[Portfolio] Mock API: Creating new portfolio item");try{var t;const o=(0,a.WR)(),n=`portfolio_${o}`,i=await s.IG.getItem(n);let l=[];try{l=i?JSON.parse(i):[]}catch(r){console.warn(`[Portfolio] Mock API: Failed to parse portfolio data for user ${o}:`,r),l=[]}Array.isArray(l)||(console.warn(`[Portfolio] Mock API: Portfolio data for user ${o} is not an array`),l=[]);const c={id:`mock_${Date.now()}_${Math.random().toString(36).substring(2)}`,title:e.title||"Untitled",description:e.description||"",category:e.category||"",tags:e.tags||[],imagePaths:e.imagePaths||[],thumbnailPath:e.thumbnailPath||"",imageKey:(null===(t=e.imagePaths)||void 0===t?void 0:t[0])||e.thumbnailPath||"",isPublic:!1!==e.isPublic,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};return console.log("[Portfolio] Creating item with tags:",e.tags),console.log("[Portfolio] New item tags:",c.tags),l.unshift(c),await s.IG.setItem(n,JSON.stringify(l)),console.log(`[Portfolio] Mock API: Created item ${c.id} for user ${o}`),{success:!0,data:c}}catch(o){return console.error("[Portfolio] Mock API: Error creating portfolio item:",o),{success:!1,error:o.message}}},h=async(e,t)=>{console.log(`[Portfolio] Mock API: Updating item ${e}`);try{const o=(0,a.WR)(),n=`portfolio_${o}`,i=await s.IG.getItem(n);let l=[];try{l=i?JSON.parse(i):[]}catch(r){console.warn(`[Portfolio] Mock API: Failed to parse portfolio data for user ${o}:`,r),l=[]}Array.isArray(l)||(console.warn(`[Portfolio] Mock API: Portfolio data for user ${o} is not an array`),l=[]);const c=l.findIndex(t=>t.id===e);if(-1===c)throw new Error("Portfolio item not found");return l[c]={...l[c],...t,updatedAt:(new Date).toISOString()},await s.IG.setItem(n,JSON.stringify(l)),console.log(`[Portfolio] Mock API: Updated item ${e} for user ${o}`),{success:!0,data:l[c]}}catch(o){return console.error("[Portfolio] Mock API: Error updating portfolio item:",o),{success:!1,error:o.message}}},m=async e=>{console.log(`[Portfolio] Mock API: Deleting item ${e}`);try{const r=(0,a.WR)(),o=`portfolio_${r}`,n=await s.IG.getItem(o);let i=[];try{i=n?JSON.parse(n):[]}catch(t){console.warn(`[Portfolio] Mock API: Failed to parse portfolio data for user ${r}:`,t),i=[]}Array.isArray(i)||(console.warn(`[Portfolio] Mock API: Portfolio data for user ${r} is not an array`),i=[]);const l=i.findIndex(t=>t.id===e);if(-1===l)throw new Error("Portfolio item not found");const c=i[l];if(c.imagePaths&&c.imagePaths.length>0)for(const e of c.imagePaths)await g(e);return i.splice(l,1),await s.IG.setItem(o,JSON.stringify(i)),console.log(`[Portfolio] Mock API: Deleted item ${e} for user ${r}`),{success:!0}}catch(r){return console.error("[Portfolio] Mock API: Error deleting portfolio item:",r),{success:!1,error:r.message}}},p=async(e,t)=>{console.log(`[Portfolio] Mock API: Uploading image ${e.name} for user ${t}`);try{const r=e.name.split(".").pop().toLowerCase(),a=`portfolio/${t}/${`${Date.now()}-${Math.random().toString(36).substring(2)}.${r}`}`,n=await new Promise((t,r)=>{const a=new FileReader;a.onload=()=>t(a.result),a.onerror=()=>r(a.error),a.readAsDataURL(e)});if("string"!==typeof n||!n.startsWith("data:image/"))throw new Error("Invalid Data URL format generated");return console.log(`[Portfolio] Mock API: \u5b58\u5132\u6642 - path: ${a}, dataUrl: ${n.substring(0,32)}...`),await o.default.storeImage(a,n),console.log(`[Portfolio] Mock API: Stored Data URL to IndexedDB for ${a}`),{success:!0,data:{path:a,url:n}}}catch(r){return console.error("[Portfolio] Mock API: Error uploading image:",r),{success:!1,error:r.message}}},g=async e=>{console.log(`[Portfolio] Mock API: Deleting image ${e}`);try{const t=await o.default.deleteImage(e);return t.success&&console.log(`[Portfolio] Mock API: Deleted image ${e}`),t}catch(t){return console.error("[Portfolio] Mock API: Error deleting image:",t),{success:!1,error:t.message}}}},202:(e,t)=>{"use strict";var r=Symbol.for("react.element"),a=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,f={};function v(e,t,r){this.props=e,this.context=t,this.refs=f,this.updater=r||p}function x(){}function b(e,t,r){this.props=e,this.context=t,this.refs=f,this.updater=r||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=v.prototype;var y=b.prototype=new x;y.constructor=b,g(y,v.prototype),y.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,j={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,a){var o,n={},s=null,i=null;if(null!=t)for(o in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(s=""+t.key),t)k.call(t,o)&&!N.hasOwnProperty(o)&&(n[o]=t[o]);var l=arguments.length-2;if(1===l)n.children=a;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];n.children=c}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===n[o]&&(n[o]=l[o]);return{$$typeof:r,type:e,key:s,ref:i,props:n,_owner:j.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var _=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(e,t,o,n,s){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var l=!1;if(null===e)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case a:l=!0}}if(l)return s=s(l=e),e=""===n?"."+I(l,0):n,w(s)?(o="",null!=e&&(o=e.replace(_,"$&/")+"/"),E(s,t,o,"",function(e){return e})):null!=s&&(S(s)&&(s=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,o+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(_,"$&/")+"/")+e)),t.push(s)),1;if(l=0,n=""===n?".":n+":",w(e))for(var c=0;c<e.length;c++){var d=n+I(i=e[c],c);l+=E(i,t,o,d,s)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(i=e.next()).done;)l+=E(i=i.value,t,o,d=n+I(i,c++),s);else if("object"===i)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,r){if(null==e)return e;var a=[],o=0;return E(e,a,"","",function(e){return t.call(r,e,o++)}),a}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var T={current:null},L={transition:null},M={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:L,ReactCurrentOwner:j};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,r){P(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=o,t.Profiler=s,t.PureComponent=b,t.StrictMode=n,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.act=D,t.cloneElement=function(e,t,a){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=g({},e.props),n=e.key,s=e.ref,i=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,i=j.current),void 0!==t.key&&(n=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!N.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=a;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];o.children=l}return{$$typeof:r,type:e.type,key:n,ref:s,props:o,_owner:i}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return T.current.useCallback(e,t)},t.useContext=function(e){return T.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return T.current.useDeferredValue(e)},t.useEffect=function(e,t){return T.current.useEffect(e,t)},t.useId=function(){return T.current.useId()},t.useImperativeHandle=function(e,t,r){return T.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return T.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return T.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return T.current.useMemo(e,t)},t.useReducer=function(e,t,r){return T.current.useReducer(e,t,r)},t.useRef=function(e){return T.current.useRef(e)},t.useState=function(e){return T.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return T.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return T.current.useTransition()},t.version="18.3.1"},210:function(e,t,r){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(r(829)),n=a(r(736)),s=r(745);class i{constructor(e){let{headers:t={},schema:r,fetch:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),t),this.schemaName=r,this.fetch=a}from(e){const t=new URL(`${this.url}/${e}`);return new o.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new i(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:a=!1,get:o=!1,count:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new URL(`${this.url}/rpc/${e}`);let l;a||o?(t=a?"HEAD":"GET",Object.entries(r).filter(e=>{let[t,r]=e;return void 0!==r}).map(e=>{let[t,r]=e;return[t,Array.isArray(r)?`{${r.join(",")}}`:`${r}`]}).forEach(e=>{let[t,r]=e;i.searchParams.append(t,r)})):(t="POST",l=r);const c=Object.assign({},this.headers);return s&&(c.Prefer=`count=${s}`),new n.default({method:t,url:i,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}}t.default=i},218:e=>{var t,r,a,o,n,s,i,l,c,d,u,h,m,p,g,f=!1;function v(){if(!f){f=!0;var e=navigator.userAgent,v=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),x=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(h=/\b(iPhone|iP[ao]d)/.exec(e),m=/\b(iP[ao]d)/.exec(e),d=/Android/i.exec(e),p=/FBAN\/\w+;/i.exec(e),g=/Mobile/i.exec(e),u=!!/Win64/.exec(e),v){(t=v[1]?parseFloat(v[1]):v[5]?parseFloat(v[5]):NaN)&&document&&document.documentMode&&(t=document.documentMode);var b=/(?:Trident\/(\d+.\d+))/.exec(e);s=b?parseFloat(b[1])+4:t,r=v[2]?parseFloat(v[2]):NaN,a=v[3]?parseFloat(v[3]):NaN,(o=v[4]?parseFloat(v[4]):NaN)?(v=/(?:Chrome\/(\d+\.\d+))/.exec(e),n=v&&v[1]?parseFloat(v[1]):NaN):n=NaN}else t=r=a=n=o=NaN;if(x){if(x[1]){var y=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);i=!y||parseFloat(y[1].replace("_","."))}else i=!1;l=!!x[2],c=!!x[3]}else i=l=c=!1}}var x={ie:function(){return v()||t},ieCompatibilityMode:function(){return v()||s>t},ie64:function(){return x.ie()&&u},firefox:function(){return v()||r},opera:function(){return v()||a},webkit:function(){return v()||o},safari:function(){return x.webkit()},chrome:function(){return v()||n},windows:function(){return v()||l},osx:function(){return v()||i},linux:function(){return v()||c},iphone:function(){return v()||h},mobile:function(){return v()||h||m||d||g},nativeApp:function(){return v()||p},android:function(){return v()||d},ipad:function(){return v()||m}};e.exports=x},234:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var a=r-1>>>1,o=e[a];if(!(0<n(o,t)))break e;e[a]=t,e[r]=o,r=a}}function a(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var a=0,o=e.length,s=o>>>1;a<s;){var i=2*(a+1)-1,l=e[i],c=i+1,d=e[c];if(0>n(l,r))c<o&&0>n(d,l)?(e[a]=d,e[c]=r,a=c):(e[a]=l,e[i]=r,a=i);else{if(!(c<o&&0>n(d,r)))break e;e[a]=d,e[c]=r,a=c}}}return t}function n(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],d=[],u=1,h=null,m=3,p=!1,g=!1,f=!1,v="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function y(e){for(var t=a(d);null!==t;){if(null===t.callback)o(d);else{if(!(t.startTime<=e))break;o(d),t.sortIndex=t.expirationTime,r(c,t)}t=a(d)}}function w(e){if(f=!1,y(e),!g)if(null!==a(c))g=!0,L(k);else{var t=a(d);null!==t&&M(w,t.startTime-e)}}function k(e,r){g=!1,f&&(f=!1,x(S),S=-1),p=!0;var n=m;try{for(y(r),h=a(c);null!==h&&(!(h.expirationTime>r)||e&&!E());){var s=h.callback;if("function"===typeof s){h.callback=null,m=h.priorityLevel;var i=s(h.expirationTime<=r);r=t.unstable_now(),"function"===typeof i?h.callback=i:h===a(c)&&o(c),y(r)}else o(c);h=a(c)}if(null!==h)var l=!0;else{var u=a(d);null!==u&&M(w,u.startTime-r),l=!1}return l}finally{h=null,m=n,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var j,N=!1,C=null,S=-1,_=5,I=-1;function E(){return!(t.unstable_now()-I<_)}function P(){if(null!==C){var e=t.unstable_now();I=e;var r=!0;try{r=C(!0,e)}finally{r?j():(N=!1,C=null)}}else N=!1}if("function"===typeof b)j=function(){b(P)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,T=A.port2;A.port1.onmessage=P,j=function(){T.postMessage(null)}}else j=function(){v(P,0)};function L(e){C=e,N||(N=!0,j())}function M(e,r){S=v(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,L(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return a(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var r=m;m=t;try{return e()}finally{m=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=m;m=e;try{return t()}finally{m=r}},t.unstable_scheduleCallback=function(e,o,n){var s=t.unstable_now();switch("object"===typeof n&&null!==n?n="number"===typeof(n=n.delay)&&0<n?s+n:s:n=s,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:u++,callback:o,priorityLevel:e,startTime:n,expirationTime:i=n+i,sortIndex:-1},n>s?(e.sortIndex=n,r(d,e),null===a(c)&&e===a(d)&&(f?(x(S),S=-1):f=!0,M(w,n-s))):(e.sortIndex=i,r(c,e),g||p||(g=!0,L(k))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=m;return function(){var r=m;m=t;try{return e.apply(this,arguments)}finally{m=r}}}},255:(e,t,r)=>{"use strict";r.d(t,{userService:()=>p});var a=r(179),o=r(915),n=r(8);const s={getCurrentUser:async()=>{try{const t=(0,n.WR)();if(!t)return console.warn("[localStorageAdapter] No current user ID found"),null;const r=await a.IG.getItem(`user_${t}`);if(!r)return console.log(`[localStorageAdapter] No user data found for ${t}`),null;const s=JSON.parse(r),i=(0,o.EP)(t);i&&(s.avatar=i);const l=await a.IG.getItem(`tag.avatars.${t}`);if(l)try{const e=JSON.parse(l);e&&e.avatarUrl&&((0,o.Ih)(t,e.avatarUrl),s.avatar=e.avatarUrl)}catch(e){console.warn("[localStorageAdapter] Failed to parse avatar data:",e)}return console.log(`[localStorageAdapter] Retrieved user data for ${t}`),s}catch(e){return console.error("[localStorageAdapter] Error getting current user:",e),null}},getUserById:async e=>{try{if(!e)return console.warn("[localStorageAdapter] No user ID provided"),null;const r=await a.IG.getItem(`user_${e}`);if(!r)return console.log(`[localStorageAdapter] No user data found for ${e}`),null;const n=JSON.parse(r),s=(0,o.EP)(e);s&&(n.avatar=s);const i=await a.IG.getItem(`tag.avatars.${e}`);if(i)try{const t=JSON.parse(i);t&&t.avatarUrl&&((0,o.Ih)(e,t.avatarUrl),n.avatar=t.avatarUrl)}catch(t){console.warn("[localStorageAdapter] Failed to parse avatar data:",t)}return console.log(`[localStorageAdapter] Retrieved user data for ${e}`),n}catch(t){return console.error(`[localStorageAdapter] Error getting user ${e}:`,t),null}},createUser:async(e,t)=>{try{if(!e||!t)return{success:!1,error:"Missing userId or userData"};const r=await s.getUserById(e);if(r)return console.log(`[localStorageAdapter] User ${e} already exists`),{success:!0,data:r};const o={id:e,...t,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};return await a.IG.setItem(`user_${e}`,JSON.stringify(o)),console.log(`[localStorageAdapter] Created user ${e}`),{success:!0,data:o}}catch(r){return console.error(`[localStorageAdapter] Error creating user ${e}:`,r),{success:!1,error:r.message}}},updateUser:async(e,t)=>{try{if(!e||!t)return{success:!1,error:"Missing userId or userData"};const r=await s.getUserById(e);if(!r)return console.warn(`[localStorageAdapter] User ${e} not found for update`),{success:!1,error:"User not found"};const o={...r,...t,updatedAt:(new Date).toISOString()};return await a.IG.setItem(`user_${e}`,JSON.stringify(o)),console.log(`[localStorageAdapter] Updated user ${e}`),{success:!0,data:o}}catch(r){return console.error(`[localStorageAdapter] Error updating user ${e}:`,r),{success:!1,error:r.message}}},getAllUsers:async()=>{try{const t=[],r=await a.IG.keys();for(const o of r)if(o&&o.startsWith("user_"))try{const e=await a.IG.getItem(o);if(e){const r=JSON.parse(e);t.push(r)}}catch(e){console.warn(`[localStorageAdapter] Failed to parse user data for key ${o}:`,e)}return console.log(`[localStorageAdapter] Retrieved ${t.length} users`),t}catch(e){return console.error("[localStorageAdapter] Error getting all users:",e),[]}},deleteUser:async e=>{try{return e?(await a.IG.removeItem(`user_${e}`),await a.IG.removeItem(`tag.avatars.${e}`),console.log(`[localStorageAdapter] Deleted user ${e}`),{success:!0}):{success:!1,error:"Missing userId"}}catch(t){return console.error(`[localStorageAdapter] Error deleting user ${e}:`,t),{success:!1,error:t.message}}}};var i=r(420);const l=async()=>{try{const e=(0,n.WR)();if(!e)return console.warn("[mockUsersAdapter] No current user ID found"),null;const t=(0,i.ug)(e);return console.log(`[mockUsersAdapter] Retrieved current user ${e} (fallback)`),t}catch(e){return console.error("[mockUsersAdapter] Error getting current user:",e),null}},c=async e=>{try{if(!e)return console.warn("[mockUsersAdapter] No user ID provided"),null;const t=(0,i.ug)(e);return console.log(`[mockUsersAdapter] Retrieved user ${e} (fallback)`),t}catch(t){return console.error(`[mockUsersAdapter] Error getting user ${e}:`,t),null}},d=async()=>{try{const e=(0,i.CF)();return console.log(`[mockUsersAdapter] Retrieved ${e.length} users (fallback)`),e}catch(e){return console.error("[mockUsersAdapter] Error getting all users:",e),[]}},u=async()=>(console.log("[supabaseAdapter] getCurrentUser not implemented yet"),null),h=async e=>(console.log(`[supabaseAdapter] getUserById not implemented yet for ${e}`),null),m=async(e,t)=>(console.log(`[supabaseAdapter] updateUser not implemented yet for ${e}`),{success:!1,error:"Supabase adapter not implemented yet"}),p={getCurrentUser:async()=>{try{const e=await s.getCurrentUser();if(e)return console.log("[userService] Using LocalStorage user data"),e;const t=await u();return t?(console.log("[userService] Using Supabase user data"),t):(console.log("[userService] Using MockUsers fallback"),await l())}catch(e){return console.error("[userService] Error getting current user:",e),await l()}},getUserById:async e=>{try{const t=await s.getUserById(e);if(t)return console.log(`[userService] Using LocalStorage user data for ${e}`),t;const r=await h(e);return r?(console.log(`[userService] Using Supabase user data for ${e}`),r):(console.log(`[userService] Using MockUsers fallback for ${e}`),await c(e))}catch(t){return console.error(`[userService] Error getting user ${e}:`,t),await c(e)}},updateUser:async(e,t)=>{try{const r=await s.updateUser(e,t);if(r.success)return console.log(`[userService] Updated user ${e} in LocalStorage`),r;const a=await m(e,t);return a.success?(console.log(`[userService] Updated user ${e} in Supabase`),a):(console.warn(`[userService] Failed to update user ${e}`),{success:!1,error:"Failed to update user"})}catch(r){return console.error(`[userService] Error updating user ${e}:`,r),{success:!1,error:r.message}}},ensureUserIndexed:async e=>{try{const t=await p.getUserById(e);if(t)return console.log(`[userService] User ${e} already indexed`),{success:!0,data:t};const r=await c(e);if(r){const t=await s.createUser(e,r);return console.log(`[userService] Created user index for ${e}`),t}return console.warn(`[userService] No base data found for user ${e}`),{success:!1,error:"No base data found"}}catch(t){return console.error(`[userService] Error ensuring user indexed ${e}:`,t),{success:!1,error:t.message}}},getAllUsers:async()=>{try{const e=await s.getAllUsers();return e&&e.length>0?(console.log("[userService] Using LocalStorage users list"),e):(console.log("[userService] Using MockUsers users list"),await d())}catch(e){return console.error("[userService] Error getting all users:",e),await d()}}}},266:(e,t,r)=>{"use strict";r.d(t,{CM:()=>b,KJ:()=>x,Mg:()=>v,OW:()=>h,Ys:()=>y,i8:()=>m,iA:()=>w,mY:()=>f,os:()=>p,vb:()=>g});const a="tag_review_requests",o="tag_final_comments",n="tag_notifications",s=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),i=()=>(new Date).toISOString(),l=()=>{localStorage.getItem(a)||localStorage.setItem(a,JSON.stringify([])),localStorage.getItem(o)||localStorage.setItem(o,JSON.stringify([])),localStorage.getItem(n)||localStorage.setItem(n,JSON.stringify([]))},c=e=>{try{const t=localStorage.getItem(e);return t?JSON.parse(t):[]}catch(t){return console.error(`Error reading ${e} from localStorage:`,t),[]}},d=(e,t)=>{try{return localStorage.setItem(e,JSON.stringify(t)),!0}catch(r){return console.error(`Error saving ${e} to localStorage:`,r),!1}},u=e=>{const t=c(n),r={id:s(),...e,createdAt:i(),isRead:!1};return t.unshift(r),d(n,t),r},h=async(e,t,r,o)=>{l();const n=c(a);if(n.find(r=>r.projectId===e&&r.userId===t))throw new Error("Review request already exists");const h={id:s(),projectId:e,userId:t,userName:o,projectName:r,status:"pending",createdAt:i(),updatedAt:i()};return n.push(h),d(a,n),u({type:"review_request",recipientId:"project_owner",title:"New Review Request",message:`${o} \u8bf7\u6c42\u4e3a\u9879\u76ee "${r}" \u5199\u6700\u7ec8\u8bc4\u8bba`,projectId:e,meta:{requestId:h.id,requesterId:t,requesterName:o}}),h},m=async(e,t)=>{l();const r=c(a).find(r=>r.projectId===e&&r.userId===t);return r?r.status:"none"},p=async e=>{l();return c(a).filter(t=>t.projectId===e)},g=async(e,t,r)=>{l();const o=c(a),n=o.findIndex(t=>t.id===e);if(-1===n)throw new Error("Review request not found");const s=o[n];return s.status=t,s.updatedAt=i(),o[n]=s,d(a,o),u({type:"review_response",recipientId:s.userId,title:"Review Request Response",message:`Your review request for "${s.projectName}" has been ${t}`,projectId:s.projectId,meta:{requestId:s.id,status:t,projectName:s.projectName}}),s},f=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;l();const h=c(o);if(h.find(r=>r.projectId===e&&r.authorId===t.authorId))throw new Error("Final comment already exists for this project");let m=!1;try{const{getCollaborationRequestStatus:a}=await Promise.resolve().then(r.bind(r,405));"approved"===await a(e,t.authorId)&&(m=!0)}catch(g){}if(!m){const r=c(a).find(r=>r.projectId===e&&r.userId===t.authorId);r&&"approved"===r.status&&(m=!0)}if(!m)throw new Error("Review request not approved");const p={id:s(),projectId:e,authorId:t.authorId,authorName:t.authorName,authorRole:t.authorRole,text:t.text,sentiment:t.sentiment||"neutral",createdAt:i()};if(h.push(p),d(o,h),n)try{const{createGeneralNotification:a}=await Promise.resolve().then(r.bind(r,784));await a({userId:n,type:"final_comment",title:"New Final Comment",message:`${t.authorName} has submitted a final comment for project "${e}"`,projectId:e,meta:{commentId:p.id,authorId:t.authorId,authorName:t.authorName,authorRole:t.authorRole,commentText:t.text,sentiment:t.sentiment||"neutral",projectName:u||e}})}catch(g){console.error("Error creating final comment notification:",g)}return p},v=async e=>{l();return c(o).filter(t=>t.projectId===e)},x=()=>{localStorage.removeItem(a),localStorage.removeItem(o),localStorage.removeItem(n)},b=async function(e,t,r,a){return f(e,{authorId:t,authorName:(arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)||"User",authorRole:(arguments.length>7&&void 0!==arguments[7]?arguments[7]:null)||"Member",text:r,sentiment:a},arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null)},y=async()=>{x()},w=async()=>(l(),c(a))},286:function(e,t,r){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(r(630)),n=a(r(611));t.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=o.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,r,a;let o=null,s=null,i=null,l=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(s="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const a=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),n=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");a&&n&&n.length>1&&(i=parseInt(n[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(s)&&(s.length>1?(o={code:"PGRST116",details:`Results contain ${s.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},s=null,i=null,l=406,c="Not Acceptable"):s=1===s.length?s[0]:null)}else{const t=await e.text();try{o=JSON.parse(t),Array.isArray(o)&&404===e.status&&(s=[],o=null,l=200,c="OK")}catch(d){404===e.status&&""===t?(l=204,c="No Content"):o={message:t}}if(o&&this.isMaybeSingle&&(null===(a=null===o||void 0===o?void 0:o.details)||void 0===a?void 0:a.includes("0 rows"))&&(o=null,l=200,c="OK"),o&&this.shouldThrowOnError)throw new n.default(o)}return{error:o,data:s,count:i,status:l,statusText:c}});return this.shouldThrowOnError||(r=r.catch(e=>{var t,r,a;return{error:{message:`${null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null===e||void 0===e?void 0:e.message}`,details:`${null!==(r=null===e||void 0===e?void 0:e.stack)&&void 0!==r?r:""}`,hint:"",code:`${null!==(a=null===e||void 0===e?void 0:e.code)&&void 0!==a?a:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}}},337:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});const a=new class{constructor(){this.dbName="TAGPortfolioDB",this.dbVersion=1,this.storeName="images"}async initDB(){return new Promise((e,t)=>{const r=indexedDB.open(this.dbName,this.dbVersion);r.onerror=()=>t(r.error),r.onsuccess=()=>e(r.result),r.onupgradeneeded=e=>{const t=e.target.result;if(!t.objectStoreNames.contains(this.storeName)){t.createObjectStore(this.storeName,{keyPath:"path"}).createIndex("path","path",{unique:!0})}}})}async storeImage(e,t){const r=await this.initDB();let a;if(t instanceof Blob)a=t;else if(t instanceof File)a=t;else{if("string"!==typeof t||!t.startsWith("data:image/"))throw new Error("Unsupported data format");{const e=await fetch(t);a=await e.blob()}}return new Promise((t,o)=>{const n=r.transaction([this.storeName],"readwrite").objectStore(this.storeName).put({path:e,file:a,timestamp:Date.now()});n.onsuccess=()=>t({success:!0,path:e}),n.onerror=()=>o(n.error)})}async getImage(e){const t=await this.initDB();return new Promise((r,a)=>{const o=t.transaction([this.storeName],"readonly").objectStore(this.storeName).get(e);o.onsuccess=()=>{if(o.result){const t=o.result.file;t instanceof Blob?(console.log(`[ImageStorage] Found Blob for ${e}: ${t.size} bytes`),r({success:!0,file:t})):(console.warn(`[ImageStorage] Invalid Blob format for ${e}: ${typeof t}`),r({success:!1,error:"Invalid Blob format"}))}else r({success:!1,error:"Image not found"})},o.onerror=()=>a(o.error)})}async deleteImage(e){const t=await this.initDB();return new Promise((r,a)=>{const o=t.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(e);o.onsuccess=()=>r({success:!0}),o.onerror=()=>a(o.error)})}async deleteImages(e){return(await Promise.all(e.map(e=>this.deleteImage(e)))).every(e=>e.success)}async getImageUrl(e){if(!e||"string"!==typeof e)return console.log(`[ImageStorage] Invalid filePath type: ${typeof e}, returning null`),null;if(console.log(`[ImageStorage] Getting URL for: ${e}`),e.startsWith("data:image/"))try{const t=await fetch(e),r=await t.blob(),a=URL.createObjectURL(r);return console.log(`[ImageStorage] Created ObjectURL from Data URL: ${a}`),a}catch(t){return console.error(`[ImageStorage] Error converting Data URL to ObjectURL: ${t}`),null}if(e.startsWith("http"))return console.log(`[ImageStorage] Returning remote URL: ${e}`),e;if(e.startsWith("portfolio/"))try{console.log(`[ImageStorage] Looking up in IndexedDB: ${e}`);const t=await this.getImage(e);if(console.log("[ImageStorage] IndexedDB lookup result:",t),t.success&&t.file instanceof Blob){const e=URL.createObjectURL(t.file);return console.log(`[ImageStorage] Created ObjectURL from IndexedDB: ${e}`),e}return console.log(`[ImageStorage] Blob not found in IndexedDB for ${e}`),null}catch(t){return console.error(`[ImageStorage] Error reading from IndexedDB: ${t}`),null}return console.log(`[ImageStorage] No valid image found for ${e}`),null}revokeImageUrl(e){e&&e.startsWith("blob:")&&URL.revokeObjectURL(e)}}},358:(e,t)=>{"use strict";const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,a=/^[\u0021-\u003A\u003C-\u007E]*$/,o=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,i=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function l(e,t,r){do{const r=e.charCodeAt(t);if(32!==r&&9!==r)return t}while(++t<r);return r}function c(e,t,r){for(;t>r;){const r=e.charCodeAt(--t);if(32!==r&&9!==r)return t+1}return r}function d(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},374:function(e,t,r){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(r(286));class n extends o.default{select(e){let t=!1;const r=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e){let{ascending:t=!0,nullsFirst:r,foreignTable:a,referencedTable:o=a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=o?`${o}.order`:"order",s=this.url.searchParams.get(n);return this.url.searchParams.set(n,`${s?`${s},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a="undefined"===typeof r?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,t){let{foreignTable:r,referencedTable:a=r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o="undefined"===typeof a?"offset":`${a}.offset`,n="undefined"===typeof a?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(n,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain(){let{analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:a=!1,wal:o=!1,format:n="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var s;const i=[e?"analyze":null,t?"verbose":null,r?"settings":null,a?"buffers":null,o?"wal":null].filter(Boolean).join("|"),l=null!==(s=this.headers.Accept)&&void 0!==s?s:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${n}; for="${l}"; options=${i};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}t.default=n},391:(e,t,r)=>{"use strict";var a=r(950);t.createRoot=a.createRoot,t.hydrateRoot=a.hydrateRoot},392:(e,t,r)=>{"use strict";var a=r(218),o=r(496);function n(e){var t=0,r=0,a=0,o=0;return"detail"in e&&(r=e.detail),"wheelDelta"in e&&(r=-e.wheelDelta/120),"wheelDeltaY"in e&&(r=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=r,r=0),a=10*t,o=10*r,"deltaY"in e&&(o=e.deltaY),"deltaX"in e&&(a=e.deltaX),(a||o)&&e.deltaMode&&(1==e.deltaMode?(a*=40,o*=40):(a*=800,o*=800)),a&&!t&&(t=a<1?-1:1),o&&!r&&(r=o<1?-1:1),{spinX:t,spinY:r,pixelX:a,pixelY:o}}n.getEventType=function(){return a.firefox()?"DOMMouseScroll":o("wheel")?"wheel":"mousewheel"},e.exports=n},400:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="0.0.0-automated"},405:(e,t,r)=>{"use strict";r.d(t,{BL:()=>i,RO:()=>c,g$:()=>l,getCollaborationRequestStatus:()=>d});const a="tag.collaboration_requests",o=()=>(new Date).toISOString(),n=()=>{try{if("undefined"===typeof window)return[];const e=window.localStorage.getItem(a);return e?JSON.parse(e):[]}catch(e){return console.error("Error reading collaboration requests:",e),[]}},s=e=>{try{if("undefined"===typeof window)return;window.localStorage.setItem(a,JSON.stringify(e))}catch(t){console.error("Error writing collaboration requests:",t)}},i=async e=>{const{projectId:t,projectName:r,requesterId:a,requesterName:i,requesterAvatar:l,ownerId:c,ownerName:d,message:u=""}=e,h={id:Date.now().toString(36)+Math.random().toString(36).slice(2),projectId:t,projectName:r,requesterId:a,requesterName:i,requesterAvatar:l,ownerId:c,ownerName:d,message:u,status:"pending",createdAt:o(),updatedAt:o()},m=n();return m.unshift(h),s(m),"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent("collaboration:requestCreated",{detail:{request:h}})),h},l=async(e,t)=>{const a=n(),i=a.findIndex(r=>r.id===e&&r.ownerId===t);if(-1===i)throw new Error("Request not found");const l=a[i];l.status="approved",l.updatedAt=o(),s(a);try{const{createGeneralNotification:e}=await Promise.resolve().then(r.bind(r,784));await e({userId:l.requesterId,type:"collaboration",title:"Collaboration Request Approved",message:`Your collaboration request for project "${l.projectName}" has been approved by ${l.ownerName}. You can now submit your final review.`,projectId:l.projectId,meta:{requestId:l.id,status:"approved",projectName:l.projectName,ownerName:l.ownerName}})}catch(c){console.error("Error creating approval notification:",c)}return"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent("collaboration:requestStatusChanged",{detail:{requestId:e,status:"approved",request:l}})),l},c=async(e,t)=>{const a=n(),i=a.findIndex(r=>r.id===e&&r.ownerId===t);if(-1===i)throw new Error("Request not found");const l=a[i];l.status="denied",l.updatedAt=o(),s(a);try{const{createGeneralNotification:e}=await Promise.resolve().then(r.bind(r,784));await e({userId:l.requesterId,type:"collaboration",title:"Collaboration Request Denied",message:`Your collaboration request for project "${l.projectName}" has been denied by ${l.ownerName}.`,projectId:l.projectId,meta:{requestId:l.id,status:"denied",projectName:l.projectName,ownerName:l.ownerName}})}catch(c){console.error("Error creating denial notification:",c)}return"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent("collaboration:requestStatusChanged",{detail:{requestId:e,status:"denied",request:l}})),l},d=async(e,t)=>{const r=n().find(r=>r.projectId===e&&r.requesterId===t);return r?r.status:"none"}},420:(e,t,r)=>{"use strict";r.d(t,{CF:()=>n,o1:()=>a,ug:()=>o});const a={alice:{id:"alice",name:"Alice",displayName:"Alice",avatar:null,role:"Photographer",roleIcon:"\ud83d\udcf7",bio:"Professional photographer specializing in portrait and street photography. Passionate about capturing authentic moments and telling stories through images.",school:"MICA",pronouns:"She/Her",majors:["Photograph","Art History"],skills:["Photography","Digital Art","Creative Design"],socialLinks:{instagram:"https://www.instagram.com/alice",portfolio:"https://alice.com",discord:"https://discord.gg/alice"},portfolio:[{id:"pf_alice_01",title:"Traditional Japanese Temple",thumb:null,tags:["Architecture","Traditional"],category:"Digital Art"}]},bryan:{id:"bryan",name:"Bryan Rodriguez",displayName:"Bryan",avatar:null,role:"Illustrator",roleIcon:"\ud83c\udfa8",bio:"Digital illustrator and concept artist. Creating vibrant characters and imaginative worlds through digital art and traditional techniques.",school:"Parsons School of Design",pronouns:"he/him",majors:["Illustration","Digital Arts"],skills:["Illustration","Digital Art","Creative Design"],socialLinks:{instagram:"https://www.instagram.com/bryanrodriguez",portfolio:"https://bryanrodriguez.com",discord:"https://discord.gg/bryanrodriguez"},portfolio:[{id:"pf_bryan_01",title:"Fantasy Character",thumb:null,tags:["Character","Fantasy"],category:"Illustration"},{id:"pf_bryan_02",title:"Sci-Fi Concept",thumb:null,tags:["Concept","Sci-Fi"],category:"Illustration"},{id:"pf_bryan_03",title:"Digital Painting",thumb:null,tags:["Digital","Painting"],category:"Illustration"}]},alex:{id:"alex",name:"Alex Chen",displayName:"Alex",avatar:null,role:"Concept Artist",roleIcon:"\ud83c\udfad",bio:"Experienced concept artist and 3D modeler. Specializing in environment design and character development for games and films.",school:"California Institute of the Arts",pronouns:"they/them",majors:["Character Animation","Game Design"],skills:["Concept Art","Digital Art","Creative Design"],socialLinks:{instagram:"https://www.instagram.com/alexchen",portfolio:"https://alexchen.com",discord:"https://discord.gg/alexchen"},portfolio:[{id:"pf_alex_01",title:"Mountain Landscape",thumb:null,tags:["Environment","Landscape"],category:"Concept Art"},{id:"pf_alex_02",title:"Character Design",thumb:null,tags:["Character","Design"],category:"Concept Art"},{id:"pf_alex_03",title:"3D Environment",thumb:null,tags:["3D","Environment"],category:"Concept Art"}]}},o=e=>{const t=a[e];return t||(console.warn(`[getUserInfo] User not found: ${e}, falling back to alice`),a.alice)},n=()=>Object.values(a)},450:(e,t,r)=>{"use strict";r.d(t,{$F:()=>I,fN:()=>ee,BL:()=>oe.BL,Gw:()=>re.Gw,zF:()=>E.A,Bc:()=>le,E$:()=>te.getProfile,i8:()=>ae.i8,lY:()=>U,Lt:()=>te.Lt,CM:()=>ae.CM,F4:()=>ie,Jb:()=>y});r(255);var a=r(420),o=r(200);const n=async e=>{try{if(!e)return{success:!1,error:"Missing userId"};const t=await(0,o.ep)(e);return console.log(`[localStorageAdapter] Retrieved works for user ${e}`),t}catch(t){return console.error(`[localStorageAdapter] Error getting works for user ${e}:`,t),{success:!1,error:t.message}}},s=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{if(!e)return{success:!1,error:"Missing workId"};if(t){const s=await(0,o.ep)(t);if(s.success){const o=s.data.find(t=>t.id===e);if(o){var r,n;const s={...o,author:{id:t,name:(null===(r=(0,a.ug)(t))||void 0===r?void 0:r.name)||"Unknown Artist",role:o.category||"Design",avatar:(null===(n=(0,a.ug)(t))||void 0===n?void 0:n.avatar)||null}};return console.log(`[localStorageAdapter] Found work ${e} for user ${t}`),{success:!0,data:s}}}}else{const t=await(0,o.S5)();if(t.success){const r=t.data.find(t=>t.id===e);if(r){var s,i,l,c;const t={...r,author:{id:(null===(s=r.profiles)||void 0===s?void 0:s.id)||r.userId||"unknown",name:(null===(i=r.profiles)||void 0===i?void 0:i.full_name)||"Unknown Artist",role:(null===(l=r.profiles)||void 0===l?void 0:l.role)||r.category||"Design",avatar:(null===(c=r.profiles)||void 0===c?void 0:c.avatar_url)||""}};return console.log(`[localStorageAdapter] Found work ${e}`),{success:!0,data:t}}}}return console.log(`[localStorageAdapter] Work ${e} not found`),{success:!1,error:"Work not found"}}catch(d){return console.error(`[localStorageAdapter] Error getting work ${e}:`,d),{success:!1,error:d.message}}},i=async e=>{try{if(!e)return{success:!1,error:"Missing workData"};const t=await(0,o.qo)(e);return console.log("[localStorageAdapter] Created work"),t}catch(t){return console.error("[localStorageAdapter] Error creating work:",t),{success:!1,error:t.message}}},l=async(e,t)=>{try{if(!e||!t)return{success:!1,error:"Missing workId or workData"};const r=await(0,o.updatePortfolioItem)(e,t);return console.log(`[localStorageAdapter] Updated work ${e}`),r}catch(r){return console.error(`[localStorageAdapter] Error updating work ${e}:`,r),{success:!1,error:r.message}}},c=async e=>{try{if(!e)return{success:!1,error:"Missing workId"};const t=await(0,o.zB)(e);return console.log(`[localStorageAdapter] Deleted work ${e}`),t}catch(t){return console.error(`[localStorageAdapter] Error deleting work ${e}:`,t),{success:!1,error:t.message}}},d=async()=>{try{const e=await(0,o.S5)();if(e.success&&e.data){const t=e.data.map(e=>{var t,r,a;return{...e,author:{id:(null===(t=e.profiles)||void 0===t?void 0:t.id)||e.userId||"unknown",name:(null===(r=e.profiles)||void 0===r?void 0:r.full_name)||"Unknown Artist",role:e.category||"Design",avatar:(null===(a=e.profiles)||void 0===a?void 0:a.avatar_url)||""}}});return console.log("[localStorageAdapter] Retrieved all public works with unified author format"),{success:!0,data:t}}return e}catch(e){return console.error("[localStorageAdapter] Error getting all public works:",e),{success:!1,error:e.message}}},u=async e=>{try{if(!e)return{success:!1,error:"Missing userId"};const t=a.o1[e];if(!t||!t.portfolio)return console.log(`[mockUsersAdapter] No portfolio found for user ${e}`),{success:!0,data:[]};const r=t.portfolio.map(r=>({id:r.id,title:r.title,description:"",category:r.category,tags:r.tags,imagePaths:[r.thumb],thumbnailPath:r.thumb,isPublic:!0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),author:{id:e,name:t.name,avatar:t.avatar,role:t.role}}));return console.log(`[mockUsersAdapter] Retrieved ${r.length} works for user ${e} (fallback)`),{success:!0,data:r}}catch(t){return console.error(`[mockUsersAdapter] Error getting works for user ${e}:`,t),{success:!1,error:t.message}}},h=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{if(!e)return{success:!1,error:"Missing workId"};if(t){const r=a.o1[t];if(r&&r.portfolio){const a=r.portfolio.find(t=>t.id===e);if(a){const o={id:a.id,title:a.title,description:"",category:a.category,tags:a.tags,imagePaths:[a.thumb],thumbnailPath:a.thumb,isPublic:!0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),author:{id:t,name:r.name,avatar:r.avatar,role:r.role}};return console.log(`[mockUsersAdapter] Found work ${e} for user ${t} (fallback)`),{success:!0,data:o}}}}else for(const[t,r]of Object.entries(a.o1))if(r.portfolio){const a=r.portfolio.find(t=>t.id===e);if(a){const o={id:a.id,title:a.title,description:"",category:a.category,tags:a.tags,imagePaths:[a.thumb],thumbnailPath:a.thumb,isPublic:!0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),author:{id:t,name:r.name,avatar:r.avatar,role:r.role}};return console.log(`[mockUsersAdapter] Found work ${e} for user ${t} (fallback)`),{success:!0,data:o}}}return console.log(`[mockUsersAdapter] Work ${e} not found (fallback)`),{success:!1,error:"Work not found"}}catch(r){return console.error(`[mockUsersAdapter] Error getting work ${e}:`,r),{success:!1,error:r.message}}},m=async()=>{try{const e=[];for(const[t,r]of Object.entries(a.o1))if(r.portfolio){const a=r.portfolio.map(e=>({id:e.id,title:e.title,description:"",category:e.category,tags:e.tags,imagePaths:[e.thumb],thumbnailPath:e.thumb,isPublic:!0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),author:{id:t,name:r.name,avatar:r.avatar,role:r.role}}));e.push(...a)}return console.log(`[mockUsersAdapter] Retrieved ${e.length} public works (fallback)`),{success:!0,data:e}}catch(e){return console.error("[mockUsersAdapter] Error getting all public works:",e),{success:!1,error:e.message}}},p=async e=>(console.log(`[supabaseAdapter] getUserWorks not implemented yet for ${e}`),{success:!1,data:[]}),g=async function(e){return console.log(`[supabaseAdapter] getWorkById not implemented yet for ${e}`),{success:!1,data:null}},f=async e=>(console.log("[supabaseAdapter] createWork not implemented yet"),{success:!1,error:"Supabase adapter not implemented yet"}),v=async(e,t)=>(console.log(`[supabaseAdapter] updateWork not implemented yet for ${e}`),{success:!1,error:"Supabase adapter not implemented yet"}),x=async e=>(console.log(`[supabaseAdapter] deleteWork not implemented yet for ${e}`),{success:!1,error:"Supabase adapter not implemented yet"}),b=async()=>(console.log("[supabaseAdapter] getAllPublicWorks not implemented yet"),{success:!1,data:[]}),y={getUserWorks:async e=>{try{const t=await n(e);if(t&&t.data&&t.data.length>0)return console.log(`[workService] Using LocalStorage works for user ${e}`),t;const r=await p(e);return r&&r.data&&r.data.length>0?(console.log(`[workService] Using Supabase works for user ${e}`),r):(console.log(`[workService] Using MockUsers fallback for user ${e}`),await u(e))}catch(t){return console.error(`[workService] Error getting works for user ${e}:`,t),await u(e)}},getWorkById:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const r=await s(e,t);if(r&&r.data)return console.log(`[workService] Using LocalStorage work data for ${e}`),r;const a=await g(e,t);return a&&a.data?(console.log(`[workService] Using Supabase work data for ${e}`),a):(console.log(`[workService] Using MockUsers fallback for work ${e}`),await h(e,t))}catch(r){return console.error(`[workService] Error getting work ${e}:`,r),await h(e,t)}},createWork:async e=>{try{const t=await i(e);if(t.success)return console.log("[workService] Created work in LocalStorage"),t;const r=await f(e);return r.success?(console.log("[workService] Created work in Supabase"),r):(console.warn("[workService] Failed to create work"),{success:!1,error:"Failed to create work"})}catch(t){return console.error("[workService] Error creating work:",t),{success:!1,error:t.message}}},updateWork:async(e,t)=>{try{const r=await l(e,t);if(r.success)return console.log(`[workService] Updated work ${e} in LocalStorage`),r;const a=await v(e,t);return a.success?(console.log(`[workService] Updated work ${e} in Supabase`),a):(console.warn(`[workService] Failed to update work ${e}`),{success:!1,error:"Failed to update work"})}catch(r){return console.error(`[workService] Error updating work ${e}:`,r),{success:!1,error:r.message}}},deleteWork:async e=>{try{const t=await c(e);if(t.success)return console.log(`[workService] Deleted work ${e} from LocalStorage`),t;const r=await x(e);return r.success?(console.log(`[workService] Deleted work ${e} from Supabase`),r):(console.warn(`[workService] Failed to delete work ${e}`),{success:!1,error:"Failed to delete work"})}catch(t){return console.error(`[workService] Error deleting work ${e}:`,t),{success:!1,error:t.message}}},getAllPublicWorks:async()=>{try{const e=await d();if(e&&e.data&&e.data.length>0)return console.log("[workService] Using LocalStorage public works"),e;const t=await b();return t&&t.data&&t.data.length>0?(console.log("[workService] Using Supabase public works"),t):(console.log("[workService] Using MockUsers fallback for public works"),await m())}catch(e){return console.error("[workService] Error getting all public works:",e),await m()}}};var w=r(179);const k={getPublicArtists:async()=>{try{const t=[],r=await w.IG.keys();for(const a of r)if(a&&a.startsWith("artist_"))try{const e=await w.IG.getItem(a);if(e){const r=JSON.parse(e);t.push(r)}}catch(e){console.warn(`[localStorageAdapter] Failed to parse artist data for key ${a}:`,e)}return console.log(`[localStorageAdapter] Retrieved ${t.length} artists`),{success:!0,data:t}}catch(e){return console.error("[localStorageAdapter] Error getting public artists:",e),{success:!1,error:e.message}}},getArtistProfile:async e=>{try{if(!e)return{success:!1,error:"Missing artistId"};const t=await w.IG.getItem(`artist_${e}`);if(!t)return console.log(`[localStorageAdapter] No artist data found for ${e}`),{success:!1,error:"Artist not found"};const r=JSON.parse(t);return console.log(`[localStorageAdapter] Retrieved artist profile for ${e}`),{success:!0,data:r}}catch(t){return console.error(`[localStorageAdapter] Error getting artist profile ${e}:`,t),{success:!1,error:t.message}}},createArtist:async(e,t)=>{try{if(!e||!t)return{success:!1,error:"Missing artistId or artistData"};const r=await k.getArtistProfile(e);if(r.success)return console.log(`[localStorageAdapter] Artist ${e} already exists`),{success:!0,data:r.data};const a={id:e,...t,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};return await w.IG.setItem(`artist_${e}`,JSON.stringify(a)),console.log(`[localStorageAdapter] Created artist ${e}`),{success:!0,data:a}}catch(r){return console.error(`[localStorageAdapter] Error creating artist ${e}:`,r),{success:!1,error:r.message}}},updateArtist:async(e,t)=>{try{if(!e||!t)return{success:!1,error:"Missing artistId or artistData"};const r=await k.getArtistProfile(e);if(!r.success)return console.warn(`[localStorageAdapter] Artist ${e} not found for update`),{success:!1,error:"Artist not found"};const a={...r.data,...t,updatedAt:(new Date).toISOString()};return await w.IG.setItem(`artist_${e}`,JSON.stringify(a)),console.log(`[localStorageAdapter] Updated artist ${e}`),{success:!0,data:a}}catch(r){return console.error(`[localStorageAdapter] Error updating artist ${e}:`,r),{success:!1,error:r.message}}},saveArtistIndex:async e=>{try{if(!Array.isArray(e))return{success:!1,error:"Artists must be an array"};for(const t of e)t.id&&await w.IG.setItem(`artist_${t.id}`,JSON.stringify(t));return console.log(`[localStorageAdapter] Saved ${e.length} artists to index`),{success:!0,data:e}}catch(t){return console.error("[localStorageAdapter] Error saving artist index:",t),{success:!1,error:t.message}}},deleteArtist:async e=>{try{return e?(await w.IG.removeItem(`artist_${e}`),console.log(`[localStorageAdapter] Deleted artist ${e}`),{success:!0}):{success:!1,error:"Missing artistId"}}catch(t){return console.error(`[localStorageAdapter] Error deleting artist ${e}:`,t),{success:!1,error:t.message}}}},j=async()=>{try{const e=(0,a.CF)().map(e=>({id:e.id,name:e.name,displayName:e.displayName,avatar:e.avatar,role:e.role,roleIcon:e.roleIcon,bio:e.bio,school:e.school,pronouns:e.pronouns,majors:e.majors,skills:e.skills,socialLinks:e.socialLinks,works:e.portfolio?e.portfolio.map(e=>({id:e.id,title:e.title,thumbnailPath:e.thumb,category:e.category})):[],followers:0,following:0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}));return console.log(`[mockUsersAdapter] Retrieved ${e.length} artists (fallback)`),{success:!0,data:e}}catch(e){return console.error("[mockUsersAdapter] Error getting public artists:",e),{success:!1,error:e.message}}},N=async e=>{try{if(!e)return{success:!1,error:"Missing artistId"};let t=a.o1[e];if(!t){if(t=a.o1[e.toLowerCase()],!t){t=Object.values(a.o1).find(t=>{var r,a;return(null===(r=t.displayName)||void 0===r?void 0:r.toLowerCase())===e.toLowerCase()||(null===(a=t.name)||void 0===a?void 0:a.toLowerCase())===e.toLowerCase()})}t||(console.warn(`[mockUsersAdapter] No artist found for ${e}, using alice as fallback`),t=a.o1.alice)}const r={id:t.id,name:t.name,displayName:t.displayName,avatar:t.avatar,role:t.role,roleIcon:t.roleIcon,bio:t.bio,school:t.school,pronouns:t.pronouns,majors:t.majors,skills:t.skills,socialLinks:t.socialLinks,works:t.portfolio?t.portfolio.map(e=>({id:e.id,title:e.title,thumbnailPath:e.thumb,category:e.category})):[],followers:0,following:0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};return console.log(`[mockUsersAdapter] Retrieved artist profile for ${e} (fallback)`),{success:!0,data:r}}catch(t){return console.error(`[mockUsersAdapter] Error getting artist profile ${e}:`,t),{success:!1,error:t.message}}},C=async()=>(console.log("[supabaseAdapter] getPublicArtists not implemented yet"),{success:!1,data:[]}),S=async e=>(console.log(`[supabaseAdapter] getArtistProfile not implemented yet for ${e}`),{success:!1,data:null}),_=async(e,t)=>(console.log(`[supabaseAdapter] updateArtist not implemented yet for ${e}`),{success:!1,error:"Supabase adapter not implemented yet"}),I={getPublicArtists:async()=>{try{const e=await k.getPublicArtists();if(e&&e.data&&e.data.length>0)return console.log("[artistService] Using LocalStorage artists list"),e;const t=await C();return t&&t.data&&t.data.length>0?(console.log("[artistService] Using Supabase artists list"),t):(console.log("[artistService] Using MockUsers fallback for artists list"),await j())}catch(e){return console.error("[artistService] Error getting public artists:",e),await j()}},getArtistProfile:async e=>{try{const t=await k.getArtistProfile(e);if(t&&t.data)return console.log(`[artistService] Using LocalStorage artist profile for ${e}`),t;const r=await S(e);return r&&r.data?(console.log(`[artistService] Using Supabase artist profile for ${e}`),r):(console.log(`[artistService] Using MockUsers fallback for artist ${e}`),await N(e))}catch(t){return console.error(`[artistService] Error getting artist profile ${e}:`,t),await N(e)}},bootstrapFromPortfolios:async()=>{try{console.log("[artistService] Starting bootstrap from portfolios");const e=await y.getAllPublicWorks();if(!e.success)return console.warn("[artistService] Failed to get all works for bootstrap"),{success:!1,error:"Failed to get works"};const t=new Map;for(const o of e.data)if(o.author&&o.author.id){const e=o.author.id;if(!t.has(e)){const r={id:e,name:o.author.name||"Unknown Artist",avatar:o.author.avatar||"",role:o.author.role||"Artist",bio:"",school:"",pronouns:"",majors:[],skills:[],socialLinks:{},works:[],followers:0,following:0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};t.set(e,r)}const r=t.get(e);r.works.find(e=>e.id===o.id)||r.works.push({id:o.id,title:o.title,thumbnailPath:o.thumbnailPath,category:o.category})}const r=Array.from(t.values()),a=await k.saveArtistIndex(r);return console.log(`[artistService] Bootstraped ${r.length} artists from portfolios`),a}catch(e){return console.error("[artistService] Error bootstrapping from portfolios:",e),{success:!1,error:e.message}}},ensureArtistIndexed:async e=>{try{if(!e)return{success:!1,error:"Missing userId"};const t=await I.getArtistProfile(e);if(t&&t.success)return console.log(`[artistService] Artist ${e} already indexed`),{success:!0,data:t.data};const{userService:a}=await Promise.resolve().then(r.bind(r,255)),o=await a.getUserById(e);if(o){const t={id:e,name:o.name||o.displayName||"Unknown Artist",avatar:o.avatar||"",role:o.role||"Artist",bio:o.bio||"",school:o.school||"",pronouns:o.pronouns||"",majors:o.majors||[],skills:o.skills||[],socialLinks:o.socialLinks||{},works:[],followers:0,following:0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},r=await k.createArtist(e,t);return console.log(`[artistService] Created artist index for ${e}`),r}return console.warn(`[artistService] No user data found for ${e}`),{success:!1,error:"No user data found"}}catch(t){return console.error(`[artistService] Error ensuring artist indexed ${e}:`,t),{success:!1,error:t.message}}},updateArtist:async(e,t)=>{try{const r=await k.updateArtist(e,t);if(r.success)return console.log(`[artistService] Updated artist ${e} in LocalStorage`),r;const a=await _(e,t);return a.success?(console.log(`[artistService] Updated artist ${e} in Supabase`),a):(console.warn(`[artistService] Failed to update artist ${e}`),{success:!1,error:"Failed to update artist"})}catch(r){return console.error(`[artistService] Error updating artist ${e}:`,r),{success:!1,error:r.message}}}};r(32);r(979);var E=r(945);const P=async e=>{try{const t=`notifications_${e.receiverId}`,r=JSON.parse(localStorage.getItem(t)||"[]");r.unshift(e);const a=r.slice(0,100);return localStorage.setItem(t,JSON.stringify(a)),window.dispatchEvent(new CustomEvent("notif:unreadChanged",{detail:{userId:e.receiverId}})),console.log(`[localStorageAdapter] Created notification for user ${e.receiverId}`),{success:!0,data:e}}catch(t){return console.error("[localStorageAdapter] Error creating notification:",t),{success:!1,error:t.message}}},A=async e=>{try{const t=`notifications_${e}`,r=JSON.parse(localStorage.getItem(t)||"[]");return console.log(`[localStorageAdapter] Retrieved ${r.length} notifications for user ${e}`),{success:!0,data:r}}catch(t){return console.error(`[localStorageAdapter] Error getting notifications for user ${e}:`,t),{success:!1,error:t.message}}},T=async e=>{try{const t=Object.keys(localStorage).filter(e=>e.startsWith("notifications_"));for(const r of t){const t=JSON.parse(localStorage.getItem(r)||"[]"),a=t.findIndex(t=>t.id===e);if(-1!==a){t[a].isRead=!0,localStorage.setItem(r,JSON.stringify(t));const o=r.replace("notifications_","");return window.dispatchEvent(new CustomEvent("notif:unreadChanged",{detail:{userId:o}})),console.log(`[localStorageAdapter] Marked notification ${e} as read`),{success:!0,data:t[a]}}}return console.warn(`[localStorageAdapter] Notification ${e} not found`),{success:!1,error:"Notification not found"}}catch(t){return console.error("[localStorageAdapter] Error marking notification as read:",t),{success:!1,error:t.message}}},L=async e=>{try{const t=`notifications_${e}`,r=JSON.parse(localStorage.getItem(t)||"[]").map(e=>({...e,isRead:!0}));return localStorage.setItem(t,JSON.stringify(r)),window.dispatchEvent(new CustomEvent("notif:unreadChanged",{detail:{userId:e}})),console.log(`[localStorageAdapter] Marked all notifications as read for user ${e}`),{success:!0,data:r}}catch(t){return console.error("[localStorageAdapter] Error marking all notifications as read:",t),{success:!1,error:t.message}}},M=async e=>{try{const t=Object.keys(localStorage).filter(e=>e.startsWith("notifications_"));for(const r of t){const t=JSON.parse(localStorage.getItem(r)||"[]"),a=t.findIndex(t=>t.id===e);if(-1!==a){t.splice(a,1),localStorage.setItem(r,JSON.stringify(t));const o=r.replace("notifications_","");return window.dispatchEvent(new CustomEvent("notif:unreadChanged",{detail:{userId:o}})),console.log(`[localStorageAdapter] Deleted notification ${e}`),{success:!0}}}return console.warn(`[localStorageAdapter] Notification ${e} not found`),{success:!1,error:"Notification not found"}}catch(t){return console.error("[localStorageAdapter] Error deleting notification:",t),{success:!1,error:t.message}}},D=async e=>(console.log("[supabaseAdapter] Would create notification in Supabase:",e),{success:!1,error:"Supabase adapter not implemented yet"}),R=async e=>(console.log(`[supabaseAdapter] Would get notifications from Supabase for user: ${e}`),{success:!1,error:"Supabase adapter not implemented yet"}),$=async e=>(console.log(`[supabaseAdapter] Would mark notification as read in Supabase: ${e}`),{success:!1,error:"Supabase adapter not implemented yet"}),F=async e=>(console.log(`[supabaseAdapter] Would mark all notifications as read in Supabase for user: ${e}`),{success:!1,error:"Supabase adapter not implemented yet"}),O=async e=>(console.log(`[supabaseAdapter] Would delete notification in Supabase: ${e}`),{success:!1,error:"Supabase adapter not implemented yet"}),U={createFollowNotification:async(e,t,r)=>{try{const a={id:`follow_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"follow",senderId:e,senderName:t,receiverId:r,title:"New Follower",content:`${t} followed you`,message:`${t} followed you`,isRead:!1,createdAt:(new Date).toISOString(),meta:{action:"follow",followerId:e,followerName:t}},o=await P(a);if(o.success)return console.log("[notificationService] Created follow notification in LocalStorage"),o;const n=await D(a);return n.success?(console.log("[notificationService] Created follow notification in Supabase"),n):(console.warn("[notificationService] Failed to create follow notification"),{success:!1,error:"Failed to create follow notification"})}catch(a){return console.error("[notificationService] Error creating follow notification:",a),{success:!1,error:a.message}}},createLikeNotification:async(e,t,r,a,o)=>{try{const n={id:`like_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"like",senderId:e,senderName:t,receiverId:o,title:"Work Liked",content:`${t} liked your work "${a}"`,message:`${t} liked your work "${a}"`,isRead:!1,createdAt:(new Date).toISOString(),meta:{action:"like",workId:r,workTitle:a,likerId:e,likerName:t}},s=await P(n);if(s.success)return console.log("[notificationService] Created like notification in LocalStorage"),s;const i=await D(n);return i.success?(console.log("[notificationService] Created like notification in Supabase"),i):(console.warn("[notificationService] Failed to create like notification"),{success:!1,error:"Failed to create like notification"})}catch(n){return console.error("[notificationService] Error creating like notification:",n),{success:!1,error:n.message}}},createCommentNotification:async(e,t,r,a,o,n)=>{try{const s={id:`comment_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"comment",senderId:e,senderName:t,receiverId:o,title:"New Comment",content:`${t} commented on your work "${a}"`,message:`${t} commented on your work "${a}": "${n}"`,isRead:!1,createdAt:(new Date).toISOString(),meta:{action:"comment",workId:r,workTitle:a,commenterId:e,commenterName:t,commentContent:n}},i=await P(s);if(i.success)return console.log("[notificationService] Created comment notification in LocalStorage"),i;const l=await D(s);return l.success?(console.log("[notificationService] Created comment notification in Supabase"),l):(console.warn("[notificationService] Failed to create comment notification"),{success:!1,error:"Failed to create comment notification"})}catch(s){return console.error("[notificationService] Error creating comment notification:",s),{success:!1,error:s.message}}},getUserNotifications:async e=>{try{const t=await A(e);if(t&&t.success)return console.log(`[notificationService] Using LocalStorage notifications for user ${e}`),t;const r=await R(e);return r&&r.success?(console.log(`[notificationService] Using Supabase notifications for user ${e}`),r):(console.log(`[notificationService] No notifications found for user ${e}`),{success:!0,data:[]})}catch(t){return console.error(`[notificationService] Error getting notifications for user ${e}:`,t),{success:!1,error:t.message}}},markAsRead:async e=>{try{const t=await T(e);if(t.success)return console.log(`[notificationService] Marked notification ${e} as read in LocalStorage`),t;const r=await $(e);return r.success?(console.log(`[notificationService] Marked notification ${e} as read in Supabase`),r):(console.warn(`[notificationService] Failed to mark notification ${e} as read`),{success:!1,error:"Failed to mark notification as read"})}catch(t){return console.error("[notificationService] Error marking notification as read:",t),{success:!1,error:t.message}}},markAllAsRead:async e=>{try{const t=await L(e);if(t.success)return console.log(`[notificationService] Marked all notifications as read in LocalStorage for user ${e}`),t;const r=await F(e);return r.success?(console.log(`[notificationService] Marked all notifications as read in Supabase for user ${e}`),r):(console.warn(`[notificationService] Failed to mark all notifications as read for user ${e}`),{success:!1,error:"Failed to mark all notifications as read"})}catch(t){return console.error("[notificationService] Error marking all notifications as read:",t),{success:!1,error:t.message}}},deleteNotification:async e=>{try{const t=await M(e);if(t.success)return console.log(`[notificationService] Deleted notification ${e} in LocalStorage`),t;const r=await O(e);return r.success?(console.log(`[notificationService] Deleted notification ${e} in Supabase`),r):(console.warn(`[notificationService] Failed to delete notification ${e}`),{success:!1,error:"Failed to delete notification"})}catch(t){return console.error("[notificationService] Error deleting notification:",t),{success:!1,error:t.message}}}},z=async e=>{try{const t=`comments_${e.workId}`,r=JSON.parse(localStorage.getItem(t)||"[]"),a={...e,parentId:e.parentId||null,rootId:e.rootId||null,text:e.text||e.content||"",createdAt:e.createdAt||Date.now(),updatedAt:e.updatedAt||Date.now()};r.unshift(a);const o=r.slice(0,100);return localStorage.setItem(t,JSON.stringify(o)),console.log(`[localStorageAdapter] Created comment for work ${e.workId}`),{success:!0,data:a}}catch(t){return console.error("[localStorageAdapter] Error creating comment:",t),{success:!1,error:t.message}}},W=async e=>{try{const t=`comments_${e}`,r=JSON.parse(localStorage.getItem(t)||"[]").filter(e=>!e.isDeleted).map(e=>({...e,parentId:e.parentId||null,rootId:e.rootId||null,text:e.text||e.content||"",createdAt:e.createdAt||(e.createdAt?new Date(e.createdAt).getTime():Date.now()),updatedAt:e.updatedAt||(e.updatedAt?new Date(e.updatedAt).getTime():Date.now())}));return console.log(`[localStorageAdapter] Retrieved ${r.length} comments for work ${e}`),{success:!0,data:r}}catch(t){return console.error(`[localStorageAdapter] Error getting comments for work ${e}:`,t),{success:!1,error:t.message}}},B=async()=>{try{const e=[],t=Object.keys(localStorage).filter(e=>e.startsWith("comments_"));for(const r of t){const t=JSON.parse(localStorage.getItem(r)||"[]");e.push(...t)}return e}catch(e){return console.error("[localStorageAdapter] Error getting all comments:",e),[]}},q=async(e,t)=>{try{const r=Object.keys(localStorage).filter(e=>e.startsWith("comments_"));for(const a of r){const r=JSON.parse(localStorage.getItem(a)||"[]"),o=r.findIndex(t=>t.id===e);if(-1!==o){const n=r[o];n.likedBy||(n.likedBy=[]);const s=n.likedBy.indexOf(t);return-1!==s?(n.likedBy.splice(s,1),n.likes=Math.max(0,n.likes-1)):(n.likedBy.push(t),n.likes++),n.updatedAt=(new Date).toISOString(),localStorage.setItem(a,JSON.stringify(r)),console.log(`[localStorageAdapter] ${-1!==s?"Unliked":"Liked"} comment ${e}`),{success:!0,data:n,isLiked:-1===s}}}return console.warn(`[localStorageAdapter] Comment ${e} not found`),{success:!1,error:"Comment not found"}}catch(r){return console.error("[localStorageAdapter] Error liking comment:",r),{success:!1,error:r.message}}},H=async(e,t)=>{try{const r=Object.keys(localStorage).filter(e=>e.startsWith("comments_"));for(const a of r){const r=JSON.parse(localStorage.getItem(a)||"[]"),o=r.findIndex(t=>t.id===e);if(-1!==o){const n=r[o];n.likedBy||(n.likedBy=[]);const s=n.likedBy.indexOf(t);if(-1!==s)return n.likedBy.splice(s,1),n.likes=Math.max(0,n.likes-1),n.updatedAt=(new Date).toISOString(),localStorage.setItem(a,JSON.stringify(r)),console.log(`[localStorageAdapter] Unliked comment ${e}`),{success:!0,data:n,isLiked:!1}}}return console.warn(`[localStorageAdapter] Comment ${e} not found or not liked`),{success:!1,error:"Comment not found or not liked"}}catch(r){return console.error("[localStorageAdapter] Error unliking comment:",r),{success:!1,error:r.message}}},G=async(e,t)=>{try{const r=Object.keys(localStorage).filter(e=>e.startsWith("comments_"));for(const a of r){const r=JSON.parse(localStorage.getItem(a)||"[]"),o=r.findIndex(t=>t.id===e);if(-1!==o){const n=r[o];return n.authorId!==t?(console.warn(`[localStorageAdapter] User ${t} not authorized to delete comment ${e}`),{success:!1,error:"Not authorized to delete comment"}):(n.isDeleted=!0,n.updatedAt=(new Date).toISOString(),localStorage.setItem(a,JSON.stringify(r)),console.log(`[localStorageAdapter] Deleted comment ${e}`),{success:!0})}}return console.warn(`[localStorageAdapter] Comment ${e} not found`),{success:!1,error:"Comment not found"}}catch(r){return console.error("[localStorageAdapter] Error deleting comment:",r),{success:!1,error:r.message}}},V=async(e,t,r)=>{try{const a=Object.keys(localStorage).filter(e=>e.startsWith("comments_"));for(const o of a){const a=JSON.parse(localStorage.getItem(o)||"[]"),n=a.findIndex(t=>t.id===e);if(-1!==n){const s=a[n];return s.authorId!==t?(console.warn(`[localStorageAdapter] User ${t} not authorized to update comment ${e}`),{success:!1,error:"Not authorized to update comment"}):(s.content=r,s.updatedAt=(new Date).toISOString(),localStorage.setItem(o,JSON.stringify(a)),console.log(`[localStorageAdapter] Updated comment ${e}`),{success:!0,data:s})}}return console.warn(`[localStorageAdapter] Comment ${e} not found`),{success:!1,error:"Comment not found"}}catch(a){return console.error("[localStorageAdapter] Error updating comment:",a),{success:!1,error:a.message}}},J=async e=>(console.log("[supabaseAdapter] createComment - Placeholder implementation"),{success:!1,error:"Supabase adapter not implemented yet"}),K=async e=>(console.log("[supabaseAdapter] getWorkComments - Placeholder implementation"),{success:!1,error:"Supabase adapter not implemented yet"}),Y=async(e,t)=>(console.log("[supabaseAdapter] likeComment - Placeholder implementation"),{success:!1,error:"Supabase adapter not implemented yet"}),Z=async(e,t)=>(console.log("[supabaseAdapter] unlikeComment - Placeholder implementation"),{success:!1,error:"Supabase adapter not implemented yet"}),Q=async(e,t)=>(console.log("[supabaseAdapter] deleteComment - Placeholder implementation"),{success:!1,error:"Supabase adapter not implemented yet"}),X=async(e,t,r)=>(console.log("[supabaseAdapter] updateComment - Placeholder implementation"),{success:!1,error:"Supabase adapter not implemented yet"}),ee={createComment:async function(e,t,r,a){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{let n=null;if(o){n=(await B()).find(e=>e.id===o)}const s={id:`comment_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,workId:e,authorId:t,authorName:r,text:a,parentId:o,rootId:n?n.rootId||n.id:null,likes:0,replies:[],isDeleted:!1,createdAt:Date.now(),updatedAt:Date.now()};o&&console.log("[reply:optimistic]",s);const i=await z(s);if(i.success)return console.log("[commentService] Created comment in LocalStorage"),o&&console.log("[reply:saved]",i.data),i;const l=await J(s);return l.success?(console.log("[commentService] Created comment in Supabase"),o&&console.log("[reply:saved]",l.data),l):(console.warn("[commentService] Failed to create comment"),{success:!1,error:"Failed to create comment"})}catch(n){return console.error("[commentService] Error creating comment:",n),{success:!1,error:n.message}}},getWorkComments:async e=>{try{const t=await W(e);if(t&&t.success)return console.log(`[commentService] Using LocalStorage comments for work ${e}`),t;const r=await K(e);return r&&r.success?(console.log(`[commentService] Using Supabase comments for work ${e}`),r):(console.log(`[commentService] No comments found for work ${e}`),{success:!0,data:[]})}catch(t){return console.error(`[commentService] Error getting comments for work ${e}:`,t),{success:!1,error:t.message}}},likeComment:async(e,t)=>{try{const r=await q(e,t);if(r.success)return console.log(`[commentService] Liked comment ${e} in LocalStorage`),r;const a=await Y(e,t);return a.success?(console.log(`[commentService] Liked comment ${e} in Supabase`),a):(console.warn(`[commentService] Failed to like comment ${e}`),{success:!1,error:"Failed to like comment"})}catch(r){return console.error("[commentService] Error liking comment:",r),{success:!1,error:r.message}}},unlikeComment:async(e,t)=>{try{const r=await H(e,t);if(r.success)return console.log(`[commentService] Unliked comment ${e} in LocalStorage`),r;const a=await Z(e,t);return a.success?(console.log(`[commentService] Unliked comment ${e} in Supabase`),a):(console.warn(`[commentService] Failed to unlike comment ${e}`),{success:!1,error:"Failed to unlike comment"})}catch(r){return console.error("[commentService] Error unliking comment:",r),{success:!1,error:r.message}}},deleteComment:async(e,t)=>{try{const r=await G(e,t);if(r.success)return console.log(`[commentService] Deleted comment ${e} in LocalStorage`),r;const a=await Q(e,t);return a.success?(console.log(`[commentService] Deleted comment ${e} in Supabase`),a):(console.warn(`[commentService] Failed to delete comment ${e}`),{success:!1,error:"Failed to delete comment"})}catch(r){return console.error("[commentService] Error deleting comment:",r),{success:!1,error:r.message}}},updateComment:async(e,t,r)=>{try{const a=await V(e,t,r);if(a.success)return console.log(`[commentService] Updated comment ${e} in LocalStorage`),a;const o=await X(e,t,r);return o.success?(console.log(`[commentService] Updated comment ${e} in Supabase`),o):(console.warn(`[commentService] Failed to update comment ${e}`),{success:!1,error:"Failed to update comment"})}catch(a){return console.error("[commentService] Error updating comment:",a),{success:!1,error:a.message}}}};var te=r(121),re=r(784),ae=r(266),oe=r(405);const ne=e=>`tag.avatars.${e}`;function se(e,t){try{"undefined"!==typeof window&&window.localStorage.setItem(ne(e),JSON.stringify(t))}catch(r){console.warn("Failed to write avatar data:",r)}}const ie=async(e,t)=>{try{await new Promise(e=>setTimeout(e,1e3));const r=(e=>`avatars/${e}/${Date.now()}.webp`)(t),a=e,o=(new Date).toISOString();console.log("[avatarService] Received dataURL:",null===e||void 0===e?void 0:e.substring(0,30)),console.log("[avatarService] Storing avatarUrl:",null===a||void 0===a?void 0:a.substring(0,30));return se(t,{avatarUrl:a,avatarUpdatedAt:o,fileName:r,userId:t}),"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent("avatar:updated",{detail:{userId:t,avatarUrl:a,avatarUpdatedAt:o}})),{success:!0,data:{avatarUrl:a,avatarUpdatedAt:o,fileName:r}}}catch(r){return{success:!1,error:r.message}}},le=(e,t)=>{if(!e)return null;if(e.startsWith("blob:")||e.startsWith("data:"))return e;const r=t?new Date(t).getTime():Date.now(),a=e.includes("?")?"&":"?";return`${e}${a}v=${r}`}},496:(e,t,r)=>{"use strict";var a,o=r(989);o.canUseDOM&&(a=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),e.exports=function(e,t){if(!o.canUseDOM||t&&!("addEventListener"in document))return!1;var r="on"+e,n=r in document;if(!n){var s=document.createElement("div");s.setAttribute(r,"return;"),n="function"===typeof s[r]}return!n&&a&&"wheel"===e&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}},560:(e,t,r)=>{"use strict";r.d(t,{Cs:()=>c,Y1:()=>i,fO:()=>m,lx:()=>h,o2:()=>u,zx:()=>d});var a=r(121),o=r(792),n=(r(8),r(420));const s=new Map,i=e=>{if(!Array.isArray(e)||0===e.length)return void console.warn("[invalidate] Invalid keys provided:",e);const[t,r]=e;if("artist"===t&&r){const e=`artist_${r}`;s.has(e)&&(s.delete(e),console.log(`[invalidate] Cleared cache for artist: ${r}`))}else if("artist"===t){for(const[e]of s)e.startsWith("artist_")&&s.delete(e);console.log("[invalidate] Cleared all artist cache")}},l=e=>{const t={Photographer:"\ud83d\udcf7","Visual Designer":"\ud83c\udfa8",Illustrator:"\ud83c\udfa8","Concept Artist":"\ud83c\udfad","Graphic Designer":"\ud83c\udfa8","Digital Artist":"\ud83c\udfa8","3D Artist":"\ud83c\udfad",Animator:"\ud83c\udfac",default:"\ud83c\udfa8"};return t[e]||t.default},c=async e=>{try{if(!e)return console.warn("[getArtistById] No userId provided"),null;const d={1:"alex",2:"alice",3:"bryan"}[e]||e,u=`artist_${d}`;if(s.has(u))return console.log(`[getArtistById] Using cached data for: ${d}`),s.get(u);const h=n.o1[d];if(!h)return console.warn(`[getArtistById] User not found for ID: ${e}`),null;const m=await(0,a.getProfile)(d),p=m.success?m.data:null;let g=null;if("undefined"!==typeof window)try{const e=window.localStorage.getItem(`tag.avatars.${d}`);if(e){const r=JSON.parse(e);var t;if(r&&r.avatarUrl)g=r.avatarUrl,console.log("[getArtistById] Using avatar from localStorage:",null===(t=g)||void 0===t?void 0:t.substring(0,50))}if(!g){const e=await o.A.getAvatarUrl(d);var r;if(e)g=e,console.log("[getArtistById] Using avatar from IndexedDB:",null===(r=g)||void 0===r?void 0:r.substring(0,50));else console.log("[getArtistById] No avatar found in IndexedDB for:",d)}var i;if(!g&&p&&p.avatar)g=p.avatar,console.log("[getArtistById] Using avatar from profile data:",null===(i=g)||void 0===i?void 0:i.substring(0,30));g||(g=h.avatar,console.log("[getArtistById] Using default mockUser avatar")),console.log("[getArtistById] Avatar resolution for Chrome compatibility:",{userId:d,hasLocalStorageAvatar:!!window.localStorage.getItem(`tag.avatars.${d}`),hasIndexedDBAvatar:!!await o.A.getAvatarUrl(d),hasProfileAvatar:!(!p||!p.avatar),hasMockUserAvatar:!!h.avatar,finalAvatar:g?"found":"null",browser:navigator.userAgent})}catch(c){console.warn("[getArtistById] Failed to read avatar data:",c),g=h.avatar}else g=h.avatar;const f=p?{...p,avatar:g}:null,v=function(e){var t,r,a,o;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return console.warn("[selectArtistView] No profile provided"),null;const s=null!==n&&void 0!==n&&n.portfolio?n.portfolio.map((e,t)=>({id:e.id,title:e.title,image:e.thumb,category:e.category})):[];return{id:e.id||"",name:e.fullName||e.name||"Unknown Artist",title:e.title||e.role||"Artist",discipline:e.title||e.role||"Artist",roleIcon:l(e.title||e.role),avatar:e.avatar||(null===n||void 0===n?void 0:n.avatar)||"",bio:e.bio||(null===n||void 0===n?void 0:n.bio)||"",school:e.school||(null===n||void 0===n?void 0:n.school)||"",pronouns:e.pronouns||(null===n||void 0===n?void 0:n.pronouns)||"",majors:Array.isArray(e.majors)?e.majors:[],minors:Array.isArray(e.minors)?e.minors:[],skills:Array.isArray(e.skills)?e.skills:[],works:s,stats:{following:0,followers:0,collaborations:12},socialLinks:{instagram:(null===(t=e.socialLinks)||void 0===t?void 0:t.instagram)||"",portfolio:(null===(r=e.socialLinks)||void 0===r?void 0:r.portfolio)||"",discord:(null===(a=e.socialLinks)||void 0===a?void 0:a.discord)||"",otherLinks:(null===(o=e.socialLinks)||void 0===o?void 0:o.otherLinks)||[]},updatedAt:e.updatedAt||(new Date).toISOString()}}(f,h);return v?(console.log("[getArtistById] Artist view socialLinks:",{userId:d,profileSocialLinks:null===f||void 0===f?void 0:f.socialLinks,mockUserSocialLinks:null===h||void 0===h?void 0:h.socialLinks,finalSocialLinks:v.socialLinks}),s.set(u,v),console.log(`[getArtistById] Cached data for: ${d}`),v):(console.warn(`[getArtistById] Failed to create artist view for ${e}`),null)}catch(c){return console.error(`[getArtistById] Error getting artist data for ${e}:`,c),null}},d=async e=>[{id:1,title:"Animation Project with Jason K.",description:"Collaborated on character design and background illustrations for a short animated film project.",image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop",partner:"Jason K.",partnerAvatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face",completionDate:"Completed May 2023",category:"Animation",isInitiator:!1,role:"Character Designer",dateRange:"March 2023 - May 2023",responsibility:"Responsible for visual design and facial animation of main characters, created complete design schemes for 5 core characters, and participated in unifying the background art style.",teamFeedback:{feedbacker:"Jason K.",feedbackerRole:"Project Director",content:"Alex demonstrated excellent creativity and technical skills in character design. His designs are not only beautiful but also serve the narrative well. He has a positive team collaboration attitude and is an important contributor to the project."}},{id:2,title:"Brand Identity with Studio X",description:"Worked together on a complete brand identity system for a tech startup.",image:"https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400&h=300&fit=crop",partner:"Studio X",partnerAvatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=40&h=40&fit=crop&crop=face",completionDate:"Completed March 2023",category:"Branding",isInitiator:!0,role:"Project Owner",dateRange:"January 2023 - March 2023",responsibility:"As project initiator, responsible for overall brand strategy development, leading the design team to complete the full visual identity system from logo design to brand guidelines.",teamFeedback:{feedbacker:"Studio X Team",feedbackerRole:"Creative Director",content:"Alex demonstrated excellent project leadership and design professionalism, accurately understanding client needs and transforming them into outstanding design solutions. The entire brand system received high recognition from clients."}},{id:3,title:"UI Design with Mobile Team",description:"Collaborated on user interface design for a mobile application.",image:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=300&fit=crop",partner:"Mobile Team",partnerAvatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=40&h=40&fit=crop&crop=face",completionDate:"Completed January 2023",category:"UI/UX",isInitiator:!1,role:"UI Designer",dateRange:"November 2022 - January 2023",responsibility:"Responsible for main interface design of mobile applications, including user flow optimization, component library establishment, and interactive prototype creation, ensuring excellent user experience.",teamFeedback:{feedbacker:"Sarah Chen",feedbackerRole:"Product Manager",content:"Alex's UI design is both beautiful and practical, balancing visual effects and functional requirements well. His design thinking and technical implementation capabilities left a deep impression on the team."}}],u=e=>e&&e.id&&e.name,h=e=>{const t="px-2 py-1 text-xs font-medium rounded-full";return e?`${t} bg-purple-100 text-purple-800 border border-purple-200`:`${t} bg-gray-100 text-gray-700`},m=e=>{const t="px-4 py-2 rounded-md font-medium transition-colors duration-200";return e?`${t} bg-gray-200 text-gray-700 hover:bg-gray-300`:`${t} bg-blue-500 text-white hover:bg-blue-600`}},579:(e,t,r)=>{"use strict";e.exports=r(153)},611:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=r},630:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Headers:()=>s,Request:()=>i,Response:()=>l,default:()=>n,fetch:()=>o});var a=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof r.g)return r.g;throw new Error("unable to locate global object")}();const o=a.fetch,n=a.fetch.bind(a),s=a.Headers,i=a.Request,l=a.Response},730:(e,t,r)=>{"use strict";var a=r(43),o=r(853);function n(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,i={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(i[e]=t,e=0;e<t.length;e++)s.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},p={};function g(e,t,r,a,o,n,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=a,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=n,this.removeEmptyString=s}var f={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){f[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];f[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){f[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){f[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){f[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){f[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){f[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){f[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){f[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}function b(e,t,r,a){var o=f.hasOwnProperty(t)?f[t]:null;(null!==o?0!==o.type:a||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,a){if(null===t||"undefined"===typeof t||function(e,t,r,a){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!a&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,a))return!0;if(a)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,o,a)&&(r=null),a||null===o?function(e){return!!u.call(p,e)||!u.call(m,e)&&(h.test(e)?p[e]=!0:(m[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=null===r?3!==o.type&&"":r:(t=o.attributeName,a=o.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(o=o.type)||4===o&&!0===r?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,x);f[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,x);f[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,x);f[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){f[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),f.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){f[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var y=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),_=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var R,$=Object.assign;function F(e){if(void 0===R)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var O=!1;function U(e,t){if(!e||O)return"";O=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var a=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){a=c}e.call(t.prototype)}else{try{throw Error()}catch(c){a=c}e()}}catch(c){if(c&&a&&"string"===typeof c.stack){for(var o=c.stack.split("\n"),n=a.stack.split("\n"),s=o.length-1,i=n.length-1;1<=s&&0<=i&&o[s]!==n[i];)i--;for(;1<=s&&0<=i;s--,i--)if(o[s]!==n[i]){if(1!==s||1!==i)do{if(s--,0>--i||o[s]!==n[i]){var l="\n"+o[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=i);break}}}finally{O=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case j:return"Fragment";case k:return"Portal";case C:return"Profiler";case N:return"StrictMode";case E:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case _:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return W(e(t))}catch(r){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var o=r.get,n=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){a=""+e,n.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function V(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=H(e)?e.checked?"true":"false":e.value),(e=a)!==r&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var r=t.checked;return $({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Y(e,t){var r=null==t.defaultValue?"":t.defaultValue,a=null!=t.checked?t.checked:t.defaultChecked;r=q(null!=t.value?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Q(e,t){Z(e,t);var r=q(t.value),a=t.type;if(null!=r)"number"===a?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===a||"reset"===a)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function X(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!("submit"!==a&&"reset"!==a||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&J(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,a){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&a&&(e[r].defaultSelected=!0)}else{for(r=""+q(r),t=null,o=0;o<e.length;o++){if(e[o].value===r)return e[o].selected=!0,void(a&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(n(91));return $({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(n(92));if(te(r)){if(1<r.length)throw Error(n(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:q(r)}}function ne(e,t){var r=q(t.value),a=q(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=a&&(e.defaultValue=""+a)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ie(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ie(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,a){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function fe(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var a=0===r.indexOf("--"),o=ge(r,t[r],a);"float"===r&&(r="cssFloat"),a?e.setProperty(r,o):e[r]=o}}Object.keys(me).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]})});var ve=$({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(n(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(n(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(n(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(n(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ye=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,je=null,Ne=null;function Ce(e){if(e=bo(e)){if("function"!==typeof ke)throw Error(n(280));var t=e.stateNode;t&&(t=wo(t),ke(e.stateNode,e.type,t))}}function Se(e){je?Ne?Ne.push(e):Ne=[e]:je=e}function _e(){if(je){var e=je,t=Ne;if(Ne=je=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ie(e,t){return e(t)}function Ee(){}var Pe=!1;function Ae(e,t,r){if(Pe)return e(t,r);Pe=!0;try{return Ie(e,t,r)}finally{Pe=!1,(null!==je||null!==Ne)&&(Ee(),_e())}}function Te(e,t){var r=e.stateNode;if(null===r)return null;var a=wo(r);if(null===a)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(n(231,t,typeof r));return r}var Le=!1;if(d)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Le=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(de){Le=!1}function De(e,t,r,a,o,n,s,i,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var Re=!1,$e=null,Fe=!1,Oe=null,Ue={onError:function(e){Re=!0,$e=e}};function ze(e,t,r,a,o,n,s,i,l){Re=!1,$e=null,De.apply(Ue,arguments)}function We(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(We(e)!==e)throw Error(n(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(n(188));return t!==e?null:e}for(var r=e,a=t;;){var o=r.return;if(null===o)break;var s=o.alternate;if(null===s){if(null!==(a=o.return)){r=a;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===r)return qe(o),e;if(s===a)return qe(o),t;s=s.sibling}throw Error(n(188))}if(r.return!==a.return)r=o,a=s;else{for(var i=!1,l=o.child;l;){if(l===r){i=!0,r=o,a=s;break}if(l===a){i=!0,a=o,r=s;break}l=l.sibling}if(!i){for(l=s.child;l;){if(l===r){i=!0,r=s,a=o;break}if(l===a){i=!0,a=s,r=o;break}l=l.sibling}if(!i)throw Error(n(189))}}if(r.alternate!==a)throw Error(n(190))}if(3!==r.tag)throw Error(n(188));return r.stateNode.current===r?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ve=o.unstable_scheduleCallback,Je=o.unstable_cancelCallback,Ke=o.unstable_shouldYield,Ye=o.unstable_requestPaint,Ze=o.unstable_now,Qe=o.unstable_getCurrentPriorityLevel,Xe=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,rt=o.unstable_LowPriority,at=o.unstable_IdlePriority,ot=null,nt=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(it(e)/lt|0)|0},it=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var r=e.pendingLanes;if(0===r)return 0;var a=0,o=e.suspendedLanes,n=e.pingedLanes,s=268435455&r;if(0!==s){var i=s&~o;0!==i?a=ut(i):0!==(n&=s)&&(a=ut(n))}else 0!==(s=r&~o)?a=ut(s):0!==n&&(a=ut(n));if(0===a)return 0;if(0!==t&&t!==a&&0===(t&o)&&((o=a&-a)>=(n=t&-t)||16===o&&0!==(4194240&n)))return t;if(0!==(4&a)&&(a|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=a;0<t;)o=1<<(r=31-st(t)),a|=e[r],t&=~o;return a}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function ft(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function vt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=r}function xt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-st(r),o=1<<a;o&t|e[a]&t&&(e[a]|=t),r&=~o}}var bt=0;function yt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,jt,Nt,Ct,St=!1,_t=[],It=null,Et=null,Pt=null,At=new Map,Tt=new Map,Lt=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tt.delete(t.pointerId)}}function Rt(e,t,r,a,o,n){return null===e||e.nativeEvent!==n?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:n,targetContainers:[o]},null!==t&&(null!==(t=bo(t))&&kt(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function $t(e){var t=xo(e.target);if(null!==t){var r=We(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Be(r)))return e.blockedOn=t,void Ct(e.priority,function(){jt(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=bo(r))&&kt(t),e.blockedOn=r,!1;var a=new(r=e.nativeEvent).constructor(r.type,r);ye=a,r.target.dispatchEvent(a),ye=null,t.shift()}return!0}function Ot(e,t,r){Ft(e)&&r.delete(t)}function Ut(){St=!1,null!==It&&Ft(It)&&(It=null),null!==Et&&Ft(Et)&&(Et=null),null!==Pt&&Ft(Pt)&&(Pt=null),At.forEach(Ot),Tt.forEach(Ot)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ut)))}function Wt(e){function t(t){return zt(t,e)}if(0<_t.length){zt(_t[0],e);for(var r=1;r<_t.length;r++){var a=_t[r];a.blockedOn===e&&(a.blockedOn=null)}}for(null!==It&&zt(It,e),null!==Et&&zt(Et,e),null!==Pt&&zt(Pt,e),At.forEach(t),Tt.forEach(t),r=0;r<Lt.length;r++)(a=Lt[r]).blockedOn===e&&(a.blockedOn=null);for(;0<Lt.length&&null===(r=Lt[0]).blockedOn;)$t(r),null===r.blockedOn&&Lt.shift()}var Bt=y.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,r,a){var o=bt,n=Bt.transition;Bt.transition=null;try{bt=1,Vt(e,t,r,a)}finally{bt=o,Bt.transition=n}}function Gt(e,t,r,a){var o=bt,n=Bt.transition;Bt.transition=null;try{bt=4,Vt(e,t,r,a)}finally{bt=o,Bt.transition=n}}function Vt(e,t,r,a){if(qt){var o=Kt(e,t,r,a);if(null===o)Ba(e,t,a,Jt,r),Dt(e,a);else if(function(e,t,r,a,o){switch(t){case"focusin":return It=Rt(It,e,t,r,a,o),!0;case"dragenter":return Et=Rt(Et,e,t,r,a,o),!0;case"mouseover":return Pt=Rt(Pt,e,t,r,a,o),!0;case"pointerover":var n=o.pointerId;return At.set(n,Rt(At.get(n)||null,e,t,r,a,o)),!0;case"gotpointercapture":return n=o.pointerId,Tt.set(n,Rt(Tt.get(n)||null,e,t,r,a,o)),!0}return!1}(o,e,t,r,a))a.stopPropagation();else if(Dt(e,a),4&t&&-1<Mt.indexOf(e)){for(;null!==o;){var n=bo(o);if(null!==n&&wt(n),null===(n=Kt(e,t,r,a))&&Ba(e,t,a,Jt,r),n===o)break;o=n}null!==o&&a.stopPropagation()}else Ba(e,t,a,null,r)}}var Jt=null;function Kt(e,t,r,a){if(Jt=null,null!==(e=xo(e=we(a))))if(null===(t=We(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Xe:return 1;case et:return 4;case tt:case rt:return 16;case at:return 536870912;default:return 16}default:return 16}}var Zt=null,Qt=null,Xt=null;function er(){if(Xt)return Xt;var e,t,r=Qt,a=r.length,o="value"in Zt?Zt.value:Zt.textContent,n=o.length;for(e=0;e<a&&r[e]===o[e];e++);var s=a-e;for(t=1;t<=s&&r[a-t]===o[n-t];t++);return Xt=o.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function ar(){return!1}function or(e){function t(t,r,a,o,n){for(var s in this._reactName=t,this._targetInst=a,this.type=r,this.nativeEvent=o,this.target=n,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(o):o[s]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?rr:ar,this.isPropagationStopped=ar,this}return $(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var nr,sr,ir,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=or(lr),dr=$({},lr,{view:0,detail:0}),ur=or(dr),hr=$({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ir&&(ir&&"mousemove"===e.type?(nr=e.screenX-ir.screenX,sr=e.screenY-ir.screenY):sr=nr=0,ir=e),nr)},movementY:function(e){return"movementY"in e?e.movementY:sr}}),mr=or(hr),pr=or($({},hr,{dataTransfer:0})),gr=or($({},dr,{relatedTarget:0})),fr=or($({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),vr=$({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xr=or(vr),br=or($({},lr,{data:0})),yr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kr[e])&&!!t[e]}function Nr(){return jr}var Cr=$({},dr,{key:function(e){if(e.key){var t=yr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sr=or(Cr),_r=or($({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ir=or($({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nr})),Er=or($({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pr=$({},hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ar=or(Pr),Tr=[9,13,27,32],Lr=d&&"CompositionEvent"in window,Mr=null;d&&"documentMode"in document&&(Mr=document.documentMode);var Dr=d&&"TextEvent"in window&&!Mr,Rr=d&&(!Lr||Mr&&8<Mr&&11>=Mr),$r=String.fromCharCode(32),Fr=!1;function Or(e,t){switch(e){case"keyup":return-1!==Tr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ur(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zr=!1;var Wr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Br(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wr[e.type]:"textarea"===t}function qr(e,t,r,a){Se(a),0<(t=Ha(t,"onChange")).length&&(r=new cr("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var Hr=null,Gr=null;function Vr(e){$a(e,0)}function Jr(e){if(V(yo(e)))return e}function Kr(e,t){if("change"===e)return t}var Yr=!1;if(d){var Zr;if(d){var Qr="oninput"in document;if(!Qr){var Xr=document.createElement("div");Xr.setAttribute("oninput","return;"),Qr="function"===typeof Xr.oninput}Zr=Qr}else Zr=!1;Yr=Zr&&(!document.documentMode||9<document.documentMode)}function ea(){Hr&&(Hr.detachEvent("onpropertychange",ta),Gr=Hr=null)}function ta(e){if("value"===e.propertyName&&Jr(Gr)){var t=[];qr(t,Gr,e,we(e)),Ae(Vr,t)}}function ra(e,t,r){"focusin"===e?(ea(),Gr=r,(Hr=t).attachEvent("onpropertychange",ta)):"focusout"===e&&ea()}function aa(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jr(Gr)}function oa(e,t){if("click"===e)return Jr(t)}function na(e,t){if("input"===e||"change"===e)return Jr(t)}var sa="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ia(e,t){if(sa(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var o=r[a];if(!u.call(t,o)||!sa(e[o],t[o]))return!1}return!0}function la(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ca(e,t){var r,a=la(e);for(e=0;a;){if(3===a.nodeType){if(r=e+a.textContent.length,e<=t&&r>=t)return{node:a,offset:t-e};e=r}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=la(a)}}function da(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?da(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ua(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(a){r=!1}if(!r)break;t=J((e=t.contentWindow).document)}return t}function ha(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ma(e){var t=ua(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&da(r.ownerDocument.documentElement,r)){if(null!==a&&ha(r))if(t=a.start,void 0===(e=a.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=r.textContent.length,n=Math.min(a.start,o);a=void 0===a.end?n:Math.min(a.end,o),!e.extend&&n>a&&(o=a,a=n,n=o),o=ca(r,n);var s=ca(r,a);o&&s&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),n>a?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pa=d&&"documentMode"in document&&11>=document.documentMode,ga=null,fa=null,va=null,xa=!1;function ba(e,t,r){var a=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;xa||null==ga||ga!==J(a)||("selectionStart"in(a=ga)&&ha(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},va&&ia(va,a)||(va=a,0<(a=Ha(fa,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=ga)))}function ya(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var wa={animationend:ya("Animation","AnimationEnd"),animationiteration:ya("Animation","AnimationIteration"),animationstart:ya("Animation","AnimationStart"),transitionend:ya("Transition","TransitionEnd")},ka={},ja={};function Na(e){if(ka[e])return ka[e];if(!wa[e])return e;var t,r=wa[e];for(t in r)if(r.hasOwnProperty(t)&&t in ja)return ka[e]=r[t];return e}d&&(ja=document.createElement("div").style,"AnimationEvent"in window||(delete wa.animationend.animation,delete wa.animationiteration.animation,delete wa.animationstart.animation),"TransitionEvent"in window||delete wa.transitionend.transition);var Ca=Na("animationend"),Sa=Na("animationiteration"),_a=Na("animationstart"),Ia=Na("transitionend"),Ea=new Map,Pa="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Aa(e,t){Ea.set(e,t),l(t,[e])}for(var Ta=0;Ta<Pa.length;Ta++){var La=Pa[Ta];Aa(La.toLowerCase(),"on"+(La[0].toUpperCase()+La.slice(1)))}Aa(Ca,"onAnimationEnd"),Aa(Sa,"onAnimationIteration"),Aa(_a,"onAnimationStart"),Aa("dblclick","onDoubleClick"),Aa("focusin","onFocus"),Aa("focusout","onBlur"),Aa(Ia,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ma="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Da=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ma));function Ra(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,a,o,s,i,l,c){if(ze.apply(this,arguments),Re){if(!Re)throw Error(n(198));var d=$e;Re=!1,$e=null,Fe||(Fe=!0,Oe=d)}}(a,t,void 0,e),e.currentTarget=null}function $a(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var a=e[r],o=a.event;a=a.listeners;e:{var n=void 0;if(t)for(var s=a.length-1;0<=s;s--){var i=a[s],l=i.instance,c=i.currentTarget;if(i=i.listener,l!==n&&o.isPropagationStopped())break e;Ra(o,i,c),n=l}else for(s=0;s<a.length;s++){if(l=(i=a[s]).instance,c=i.currentTarget,i=i.listener,l!==n&&o.isPropagationStopped())break e;Ra(o,i,c),n=l}}}if(Fe)throw e=Oe,Fe=!1,Oe=null,e}function Fa(e,t){var r=t[go];void 0===r&&(r=t[go]=new Set);var a=e+"__bubble";r.has(a)||(Wa(t,e,2,!1),r.add(a))}function Oa(e,t,r){var a=0;t&&(a|=4),Wa(r,e,a,t)}var Ua="_reactListening"+Math.random().toString(36).slice(2);function za(e){if(!e[Ua]){e[Ua]=!0,s.forEach(function(t){"selectionchange"!==t&&(Da.has(t)||Oa(t,!1,e),Oa(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ua]||(t[Ua]=!0,Oa("selectionchange",!1,t))}}function Wa(e,t,r,a){switch(Yt(t)){case 1:var o=Ht;break;case 4:o=Gt;break;default:o=Vt}r=o.bind(null,t,r,e),o=void 0,!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),a?void 0!==o?e.addEventListener(t,r,{capture:!0,passive:o}):e.addEventListener(t,r,!0):void 0!==o?e.addEventListener(t,r,{passive:o}):e.addEventListener(t,r,!1)}function Ba(e,t,r,a,o){var n=a;if(0===(1&t)&&0===(2&t)&&null!==a)e:for(;;){if(null===a)return;var s=a.tag;if(3===s||4===s){var i=a.stateNode.containerInfo;if(i===o||8===i.nodeType&&i.parentNode===o)break;if(4===s)for(s=a.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;s=s.return}for(;null!==i;){if(null===(s=xo(i)))return;if(5===(l=s.tag)||6===l){a=n=s;continue e}i=i.parentNode}}a=a.return}Ae(function(){var a=n,o=we(r),s=[];e:{var i=Ea.get(e);if(void 0!==i){var l=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":l=Sr;break;case"focusin":c="focus",l=gr;break;case"focusout":c="blur",l=gr;break;case"beforeblur":case"afterblur":l=gr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ir;break;case Ca:case Sa:case _a:l=fr;break;case Ia:l=Er;break;case"scroll":l=ur;break;case"wheel":l=Ar;break;case"copy":case"cut":case"paste":l=xr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=_r}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==i?i+"Capture":null:i;d=[];for(var m,p=a;null!==p;){var g=(m=p).stateNode;if(5===m.tag&&null!==g&&(m=g,null!==h&&(null!=(g=Te(p,h))&&d.push(qa(p,g,m)))),u)break;p=p.return}0<d.length&&(i=new l(i,c,null,r,o),s.push({event:i,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(i="mouseover"===e||"pointerover"===e)||r===ye||!(c=r.relatedTarget||r.fromElement)||!xo(c)&&!c[po])&&(l||i)&&(i=o.window===o?o:(i=o.ownerDocument)?i.defaultView||i.parentWindow:window,l?(l=a,null!==(c=(c=r.relatedTarget||r.toElement)?xo(c):null)&&(c!==(u=We(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=a),l!==c)){if(d=mr,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=_r,g="onPointerLeave",h="onPointerEnter",p="pointer"),u=null==l?i:yo(l),m=null==c?i:yo(c),(i=new d(g,p+"leave",l,r,o)).target=u,i.relatedTarget=m,g=null,xo(o)===a&&((d=new d(h,p+"enter",c,r,o)).target=m,d.relatedTarget=u,g=d),u=g,l&&c)e:{for(h=c,p=0,m=d=l;m;m=Ga(m))p++;for(m=0,g=h;g;g=Ga(g))m++;for(;0<p-m;)d=Ga(d),p--;for(;0<m-p;)h=Ga(h),m--;for(;p--;){if(d===h||null!==h&&d===h.alternate)break e;d=Ga(d),h=Ga(h)}d=null}else d=null;null!==l&&Va(s,i,l,d,!1),null!==c&&null!==u&&Va(s,u,c,d,!0)}if("select"===(l=(i=a?yo(a):window).nodeName&&i.nodeName.toLowerCase())||"input"===l&&"file"===i.type)var f=Kr;else if(Br(i))if(Yr)f=na;else{f=aa;var v=ra}else(l=i.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(f=oa);switch(f&&(f=f(e,a))?qr(s,f,r,o):(v&&v(e,i,a),"focusout"===e&&(v=i._wrapperState)&&v.controlled&&"number"===i.type&&ee(i,"number",i.value)),v=a?yo(a):window,e){case"focusin":(Br(v)||"true"===v.contentEditable)&&(ga=v,fa=a,va=null);break;case"focusout":va=fa=ga=null;break;case"mousedown":xa=!0;break;case"contextmenu":case"mouseup":case"dragend":xa=!1,ba(s,r,o);break;case"selectionchange":if(pa)break;case"keydown":case"keyup":ba(s,r,o)}var x;if(Lr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zr?Or(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(Rr&&"ko"!==r.locale&&(zr||"onCompositionStart"!==b?"onCompositionEnd"===b&&zr&&(x=er()):(Qt="value"in(Zt=o)?Zt.value:Zt.textContent,zr=!0)),0<(v=Ha(a,b)).length&&(b=new br(b,e,null,r,o),s.push({event:b,listeners:v}),x?b.data=x:null!==(x=Ur(r))&&(b.data=x))),(x=Dr?function(e,t){switch(e){case"compositionend":return Ur(t);case"keypress":return 32!==t.which?null:(Fr=!0,$r);case"textInput":return(e=t.data)===$r&&Fr?null:e;default:return null}}(e,r):function(e,t){if(zr)return"compositionend"===e||!Lr&&Or(e,t)?(e=er(),Xt=Qt=Zt=null,zr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(a=Ha(a,"onBeforeInput")).length&&(o=new br("onBeforeInput","beforeinput",null,r,o),s.push({event:o,listeners:a}),o.data=x))}$a(s,t)})}function qa(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ha(e,t){for(var r=t+"Capture",a=[];null!==e;){var o=e,n=o.stateNode;5===o.tag&&null!==n&&(o=n,null!=(n=Te(e,r))&&a.unshift(qa(e,n,o)),null!=(n=Te(e,t))&&a.push(qa(e,n,o))),e=e.return}return a}function Ga(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Va(e,t,r,a,o){for(var n=t._reactName,s=[];null!==r&&r!==a;){var i=r,l=i.alternate,c=i.stateNode;if(null!==l&&l===a)break;5===i.tag&&null!==c&&(i=c,o?null!=(l=Te(r,n))&&s.unshift(qa(r,l,i)):o||null!=(l=Te(r,n))&&s.push(qa(r,l,i))),r=r.return}0!==s.length&&e.push({event:t,listeners:s})}var Ja=/\r\n?/g,Ka=/\u0000|\uFFFD/g;function Ya(e){return("string"===typeof e?e:""+e).replace(Ja,"\n").replace(Ka,"")}function Za(e,t,r){if(t=Ya(t),Ya(e)!==t&&r)throw Error(n(425))}function Qa(){}var Xa=null,eo=null;function to(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"===typeof setTimeout?setTimeout:void 0,ao="function"===typeof clearTimeout?clearTimeout:void 0,oo="function"===typeof Promise?Promise:void 0,no="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oo?function(e){return oo.resolve(null).then(e).catch(so)}:ro;function so(e){setTimeout(function(){throw e})}function io(e,t){var r=t,a=0;do{var o=r.nextSibling;if(e.removeChild(r),o&&8===o.nodeType)if("/$"===(r=o.data)){if(0===a)return e.removeChild(o),void Wt(t);a--}else"$"!==r&&"$?"!==r&&"$!"!==r||a++;r=o}while(r);Wt(t)}function lo(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function co(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var uo=Math.random().toString(36).slice(2),ho="__reactFiber$"+uo,mo="__reactProps$"+uo,po="__reactContainer$"+uo,go="__reactEvents$"+uo,fo="__reactListeners$"+uo,vo="__reactHandles$"+uo;function xo(e){var t=e[ho];if(t)return t;for(var r=e.parentNode;r;){if(t=r[po]||r[ho]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=co(e);null!==e;){if(r=e[ho])return r;e=co(e)}return t}r=(e=r).parentNode}return null}function bo(e){return!(e=e[ho]||e[po])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function yo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(n(33))}function wo(e){return e[mo]||null}var ko=[],jo=-1;function No(e){return{current:e}}function Co(e){0>jo||(e.current=ko[jo],ko[jo]=null,jo--)}function So(e,t){jo++,ko[jo]=e.current,e.current=t}var _o={},Io=No(_o),Eo=No(!1),Po=_o;function Ao(e,t){var r=e.type.contextTypes;if(!r)return _o;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var o,n={};for(o in r)n[o]=t[o];return a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function To(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Lo(){Co(Eo),Co(Io)}function Mo(e,t,r){if(Io.current!==_o)throw Error(n(168));So(Io,t),So(Eo,r)}function Do(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,"function"!==typeof a.getChildContext)return r;for(var o in a=a.getChildContext())if(!(o in t))throw Error(n(108,B(e)||"Unknown",o));return $({},r,a)}function Ro(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_o,Po=Io.current,So(Io,e),So(Eo,Eo.current),!0}function $o(e,t,r){var a=e.stateNode;if(!a)throw Error(n(169));r?(e=Do(e,t,Po),a.__reactInternalMemoizedMergedChildContext=e,Co(Eo),Co(Io),So(Io,e)):Co(Eo),So(Eo,r)}var Fo=null,Oo=!1,Uo=!1;function zo(e){null===Fo?Fo=[e]:Fo.push(e)}function Wo(){if(!Uo&&null!==Fo){Uo=!0;var e=0,t=bt;try{var r=Fo;for(bt=1;e<r.length;e++){var a=r[e];do{a=a(!0)}while(null!==a)}Fo=null,Oo=!1}catch(o){throw null!==Fo&&(Fo=Fo.slice(e+1)),Ve(Xe,Wo),o}finally{bt=t,Uo=!1}}return null}var Bo=[],qo=0,Ho=null,Go=0,Vo=[],Jo=0,Ko=null,Yo=1,Zo="";function Qo(e,t){Bo[qo++]=Go,Bo[qo++]=Ho,Ho=e,Go=t}function Xo(e,t,r){Vo[Jo++]=Yo,Vo[Jo++]=Zo,Vo[Jo++]=Ko,Ko=e;var a=Yo;e=Zo;var o=32-st(a)-1;a&=~(1<<o),r+=1;var n=32-st(t)+o;if(30<n){var s=o-o%5;n=(a&(1<<s)-1).toString(32),a>>=s,o-=s,Yo=1<<32-st(t)+o|r<<o|a,Zo=n+e}else Yo=1<<n|r<<o|a,Zo=e}function en(e){null!==e.return&&(Qo(e,1),Xo(e,1,0))}function tn(e){for(;e===Ho;)Ho=Bo[--qo],Bo[qo]=null,Go=Bo[--qo],Bo[qo]=null;for(;e===Ko;)Ko=Vo[--Jo],Vo[Jo]=null,Zo=Vo[--Jo],Vo[Jo]=null,Yo=Vo[--Jo],Vo[Jo]=null}var rn=null,an=null,on=!1,nn=null;function sn(e,t){var r=Ac(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function ln(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rn=e,an=lo(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rn=e,an=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Ko?{id:Yo,overflow:Zo}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Ac(18,null,null,0)).stateNode=t,r.return=e,e.child=r,rn=e,an=null,!0);default:return!1}}function cn(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function dn(e){if(on){var t=an;if(t){var r=t;if(!ln(e,t)){if(cn(e))throw Error(n(418));t=lo(r.nextSibling);var a=rn;t&&ln(e,t)?sn(a,r):(e.flags=-4097&e.flags|2,on=!1,rn=e)}}else{if(cn(e))throw Error(n(418));e.flags=-4097&e.flags|2,on=!1,rn=e}}}function un(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rn=e}function hn(e){if(e!==rn)return!1;if(!on)return un(e),on=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!to(e.type,e.memoizedProps)),t&&(t=an)){if(cn(e))throw mn(),Error(n(418));for(;t;)sn(e,t),t=lo(t.nextSibling)}if(un(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(n(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){an=lo(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}an=null}}else an=rn?lo(e.stateNode.nextSibling):null;return!0}function mn(){for(var e=an;e;)e=lo(e.nextSibling)}function pn(){an=rn=null,on=!1}function gn(e){null===nn?nn=[e]:nn.push(e)}var fn=y.ReactCurrentBatchConfig;function vn(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(n(309));var a=r.stateNode}if(!a)throw Error(n(147,e));var o=a,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=o.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(n(284));if(!r._owner)throw Error(n(290,e))}return e}function xn(e,t){throw e=Object.prototype.toString.call(t),Error(n(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bn(e){return(0,e._init)(e._payload)}function yn(e){function t(t,r){if(e){var a=t.deletions;null===a?(t.deletions=[r],t.flags|=16):a.push(r)}}function r(r,a){if(!e)return null;for(;null!==a;)t(r,a),a=a.sibling;return null}function a(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Lc(e,t)).index=0,e.sibling=null,e}function s(t,r,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<r?(t.flags|=2,r):a:(t.flags|=2,r):(t.flags|=1048576,r)}function i(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,a){return null===t||6!==t.tag?((t=$c(r,e.mode,a)).return=e,t):((t=o(t,r)).return=e,t)}function c(e,t,r,a){var n=r.type;return n===j?u(e,t,r.props.children,a,r.key):null!==t&&(t.elementType===n||"object"===typeof n&&null!==n&&n.$$typeof===T&&bn(n)===t.type)?((a=o(t,r.props)).ref=vn(e,t,r),a.return=e,a):((a=Mc(r.type,r.key,r.props,null,e.mode,a)).ref=vn(e,t,r),a.return=e,a)}function d(e,t,r,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Fc(r,e.mode,a)).return=e,t):((t=o(t,r.children||[])).return=e,t)}function u(e,t,r,a,n){return null===t||7!==t.tag?((t=Dc(r,e.mode,a,n)).return=e,t):((t=o(t,r)).return=e,t)}function h(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=$c(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(r=Mc(t.type,t.key,t.props,null,e.mode,r)).ref=vn(e,null,t),r.return=e,r;case k:return(t=Fc(t,e.mode,r)).return=e,t;case T:return h(e,(0,t._init)(t._payload),r)}if(te(t)||D(t))return(t=Dc(t,e.mode,r,null)).return=e,t;xn(e,t)}return null}function m(e,t,r,a){var o=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==o?null:l(e,t,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return r.key===o?c(e,t,r,a):null;case k:return r.key===o?d(e,t,r,a):null;case T:return m(e,t,(o=r._init)(r._payload),a)}if(te(r)||D(r))return null!==o?null:u(e,t,r,a,null);xn(e,r)}return null}function p(e,t,r,a,o){if("string"===typeof a&&""!==a||"number"===typeof a)return l(t,e=e.get(r)||null,""+a,o);if("object"===typeof a&&null!==a){switch(a.$$typeof){case w:return c(t,e=e.get(null===a.key?r:a.key)||null,a,o);case k:return d(t,e=e.get(null===a.key?r:a.key)||null,a,o);case T:return p(e,t,r,(0,a._init)(a._payload),o)}if(te(a)||D(a))return u(t,e=e.get(r)||null,a,o,null);xn(t,a)}return null}function g(o,n,i,l){for(var c=null,d=null,u=n,g=n=0,f=null;null!==u&&g<i.length;g++){u.index>g?(f=u,u=null):f=u.sibling;var v=m(o,u,i[g],l);if(null===v){null===u&&(u=f);break}e&&u&&null===v.alternate&&t(o,u),n=s(v,n,g),null===d?c=v:d.sibling=v,d=v,u=f}if(g===i.length)return r(o,u),on&&Qo(o,g),c;if(null===u){for(;g<i.length;g++)null!==(u=h(o,i[g],l))&&(n=s(u,n,g),null===d?c=u:d.sibling=u,d=u);return on&&Qo(o,g),c}for(u=a(o,u);g<i.length;g++)null!==(f=p(u,o,g,i[g],l))&&(e&&null!==f.alternate&&u.delete(null===f.key?g:f.key),n=s(f,n,g),null===d?c=f:d.sibling=f,d=f);return e&&u.forEach(function(e){return t(o,e)}),on&&Qo(o,g),c}function f(o,i,l,c){var d=D(l);if("function"!==typeof d)throw Error(n(150));if(null==(l=d.call(l)))throw Error(n(151));for(var u=d=null,g=i,f=i=0,v=null,x=l.next();null!==g&&!x.done;f++,x=l.next()){g.index>f?(v=g,g=null):v=g.sibling;var b=m(o,g,x.value,c);if(null===b){null===g&&(g=v);break}e&&g&&null===b.alternate&&t(o,g),i=s(b,i,f),null===u?d=b:u.sibling=b,u=b,g=v}if(x.done)return r(o,g),on&&Qo(o,f),d;if(null===g){for(;!x.done;f++,x=l.next())null!==(x=h(o,x.value,c))&&(i=s(x,i,f),null===u?d=x:u.sibling=x,u=x);return on&&Qo(o,f),d}for(g=a(o,g);!x.done;f++,x=l.next())null!==(x=p(g,o,f,x.value,c))&&(e&&null!==x.alternate&&g.delete(null===x.key?f:x.key),i=s(x,i,f),null===u?d=x:u.sibling=x,u=x);return e&&g.forEach(function(e){return t(o,e)}),on&&Qo(o,f),d}return function e(a,n,s,l){if("object"===typeof s&&null!==s&&s.type===j&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case w:e:{for(var c=s.key,d=n;null!==d;){if(d.key===c){if((c=s.type)===j){if(7===d.tag){r(a,d.sibling),(n=o(d,s.props.children)).return=a,a=n;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===T&&bn(c)===d.type){r(a,d.sibling),(n=o(d,s.props)).ref=vn(a,d,s),n.return=a,a=n;break e}r(a,d);break}t(a,d),d=d.sibling}s.type===j?((n=Dc(s.props.children,a.mode,l,s.key)).return=a,a=n):((l=Mc(s.type,s.key,s.props,null,a.mode,l)).ref=vn(a,n,s),l.return=a,a=l)}return i(a);case k:e:{for(d=s.key;null!==n;){if(n.key===d){if(4===n.tag&&n.stateNode.containerInfo===s.containerInfo&&n.stateNode.implementation===s.implementation){r(a,n.sibling),(n=o(n,s.children||[])).return=a,a=n;break e}r(a,n);break}t(a,n),n=n.sibling}(n=Fc(s,a.mode,l)).return=a,a=n}return i(a);case T:return e(a,n,(d=s._init)(s._payload),l)}if(te(s))return g(a,n,s,l);if(D(s))return f(a,n,s,l);xn(a,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==n&&6===n.tag?(r(a,n.sibling),(n=o(n,s)).return=a,a=n):(r(a,n),(n=$c(s,a.mode,l)).return=a,a=n),i(a)):r(a,n)}}var wn=yn(!0),kn=yn(!1),jn=No(null),Nn=null,Cn=null,Sn=null;function _n(){Sn=Cn=Nn=null}function In(e){var t=jn.current;Co(jn),e._currentValue=t}function En(e,t,r){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function Pn(e,t){Nn=e,Sn=Cn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bi=!0),e.firstContext=null)}function An(e){var t=e._currentValue;if(Sn!==e)if(e={context:e,memoizedValue:t,next:null},null===Cn){if(null===Nn)throw Error(n(308));Cn=e,Nn.dependencies={lanes:0,firstContext:e}}else Cn=Cn.next=e;return t}var Tn=null;function Ln(e){null===Tn?Tn=[e]:Tn.push(e)}function Mn(e,t,r,a){var o=t.interleaved;return null===o?(r.next=r,Ln(t)):(r.next=o.next,o.next=r),t.interleaved=r,Dn(e,a)}function Dn(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Rn=!1;function $n(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function On(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Un(e,t,r){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,0!==(2&Il)){var o=a.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),a.pending=t,Dn(e,r)}return null===(o=a.interleaved)?(t.next=t,Ln(a)):(t.next=o.next,o.next=t),a.interleaved=t,Dn(e,r)}function zn(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var a=t.lanes;r|=a&=e.pendingLanes,t.lanes=r,xt(e,r)}}function Wn(e,t){var r=e.updateQueue,a=e.alternate;if(null!==a&&r===(a=a.updateQueue)){var o=null,n=null;if(null!==(r=r.firstBaseUpdate)){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===n?o=n=s:n=n.next=s,r=r.next}while(null!==r);null===n?o=n=t:n=n.next=t}else o=n=t;return r={baseState:a.baseState,firstBaseUpdate:o,lastBaseUpdate:n,shared:a.shared,effects:a.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Bn(e,t,r,a){var o=e.updateQueue;Rn=!1;var n=o.firstBaseUpdate,s=o.lastBaseUpdate,i=o.shared.pending;if(null!==i){o.shared.pending=null;var l=i,c=l.next;l.next=null,null===s?n=c:s.next=c,s=l;var d=e.alternate;null!==d&&((i=(d=d.updateQueue).lastBaseUpdate)!==s&&(null===i?d.firstBaseUpdate=c:i.next=c,d.lastBaseUpdate=l))}if(null!==n){var u=o.baseState;for(s=0,d=c=l=null,i=n;;){var h=i.lane,m=i.eventTime;if((a&h)===h){null!==d&&(d=d.next={eventTime:m,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var p=e,g=i;switch(h=t,m=r,g.tag){case 1:if("function"===typeof(p=g.payload)){u=p.call(m,u,h);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(m,u,h):p)||void 0===h)break e;u=$({},u,h);break e;case 2:Rn=!0}}null!==i.callback&&0!==i.lane&&(e.flags|=64,null===(h=o.effects)?o.effects=[i]:h.push(i))}else m={eventTime:m,lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===d?(c=d=m,l=u):d=d.next=m,s|=h;if(null===(i=i.next)){if(null===(i=o.shared.pending))break;i=(h=i).next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}if(null===d&&(l=u),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=d,null!==(t=o.shared.interleaved)){o=t;do{s|=o.lane,o=o.next}while(o!==t)}else null===n&&(o.shared.lanes=0);Rl|=s,e.lanes=s,e.memoizedState=u}}function qn(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var a=e[t],o=a.callback;if(null!==o){if(a.callback=null,a=r,"function"!==typeof o)throw Error(n(191,o));o.call(a)}}}var Hn={},Gn=No(Hn),Vn=No(Hn),Jn=No(Hn);function Kn(e){if(e===Hn)throw Error(n(174));return e}function Yn(e,t){switch(So(Jn,t),So(Vn,e),So(Gn,Hn),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Co(Gn),So(Gn,t)}function Zn(){Co(Gn),Co(Vn),Co(Jn)}function Qn(e){Kn(Jn.current);var t=Kn(Gn.current),r=le(t,e.type);t!==r&&(So(Vn,e),So(Gn,r))}function Xn(e){Vn.current===e&&(Co(Gn),Co(Vn))}var es=No(0);function ts(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var rs=[];function as(){for(var e=0;e<rs.length;e++)rs[e]._workInProgressVersionPrimary=null;rs.length=0}var os=y.ReactCurrentDispatcher,ns=y.ReactCurrentBatchConfig,ss=0,is=null,ls=null,cs=null,ds=!1,us=!1,hs=0,ms=0;function ps(){throw Error(n(321))}function gs(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!sa(e[r],t[r]))return!1;return!0}function fs(e,t,r,a,o,s){if(ss=s,is=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,os.current=null===e||null===e.memoizedState?Xs:ei,e=r(a,o),us){s=0;do{if(us=!1,hs=0,25<=s)throw Error(n(301));s+=1,cs=ls=null,t.updateQueue=null,os.current=ti,e=r(a,o)}while(us)}if(os.current=Qs,t=null!==ls&&null!==ls.next,ss=0,cs=ls=is=null,ds=!1,t)throw Error(n(300));return e}function vs(){var e=0!==hs;return hs=0,e}function xs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===cs?is.memoizedState=cs=e:cs=cs.next=e,cs}function bs(){if(null===ls){var e=is.alternate;e=null!==e?e.memoizedState:null}else e=ls.next;var t=null===cs?is.memoizedState:cs.next;if(null!==t)cs=t,ls=e;else{if(null===e)throw Error(n(310));e={memoizedState:(ls=e).memoizedState,baseState:ls.baseState,baseQueue:ls.baseQueue,queue:ls.queue,next:null},null===cs?is.memoizedState=cs=e:cs=cs.next=e}return cs}function ys(e,t){return"function"===typeof t?t(e):t}function ws(e){var t=bs(),r=t.queue;if(null===r)throw Error(n(311));r.lastRenderedReducer=e;var a=ls,o=a.baseQueue,s=r.pending;if(null!==s){if(null!==o){var i=o.next;o.next=s.next,s.next=i}a.baseQueue=o=s,r.pending=null}if(null!==o){s=o.next,a=a.baseState;var l=i=null,c=null,d=s;do{var u=d.lane;if((ss&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:e(a,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,i=a):c=c.next=h,is.lanes|=u,Rl|=u}d=d.next}while(null!==d&&d!==s);null===c?i=a:c.next=l,sa(a,t.memoizedState)||(bi=!0),t.memoizedState=a,t.baseState=i,t.baseQueue=c,r.lastRenderedState=a}if(null!==(e=r.interleaved)){o=e;do{s=o.lane,is.lanes|=s,Rl|=s,o=o.next}while(o!==e)}else null===o&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ks(e){var t=bs(),r=t.queue;if(null===r)throw Error(n(311));r.lastRenderedReducer=e;var a=r.dispatch,o=r.pending,s=t.memoizedState;if(null!==o){r.pending=null;var i=o=o.next;do{s=e(s,i.action),i=i.next}while(i!==o);sa(s,t.memoizedState)||(bi=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),r.lastRenderedState=s}return[s,a]}function js(){}function Ns(e,t){var r=is,a=bs(),o=t(),s=!sa(a.memoizedState,o);if(s&&(a.memoizedState=o,bi=!0),a=a.queue,Rs(_s.bind(null,r,a,e),[e]),a.getSnapshot!==t||s||null!==cs&&1&cs.memoizedState.tag){if(r.flags|=2048,As(9,Ss.bind(null,r,a,o,t),void 0,null),null===El)throw Error(n(349));0!==(30&ss)||Cs(r,t,o)}return o}function Cs(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=is.updateQueue)?(t={lastEffect:null,stores:null},is.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Ss(e,t,r,a){t.value=r,t.getSnapshot=a,Is(t)&&Es(e)}function _s(e,t,r){return r(function(){Is(t)&&Es(e)})}function Is(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!sa(e,r)}catch(a){return!0}}function Es(e){var t=Dn(e,1);null!==t&&rc(t,e,1,-1)}function Ps(e){var t=xs();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:e},t.queue=e,e=e.dispatch=Js.bind(null,is,e),[t.memoizedState,e]}function As(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},null===(t=is.updateQueue)?(t={lastEffect:null,stores:null},is.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e),e}function Ts(){return bs().memoizedState}function Ls(e,t,r,a){var o=xs();is.flags|=e,o.memoizedState=As(1|t,r,void 0,void 0===a?null:a)}function Ms(e,t,r,a){var o=bs();a=void 0===a?null:a;var n=void 0;if(null!==ls){var s=ls.memoizedState;if(n=s.destroy,null!==a&&gs(a,s.deps))return void(o.memoizedState=As(t,r,n,a))}is.flags|=e,o.memoizedState=As(1|t,r,n,a)}function Ds(e,t){return Ls(8390656,8,e,t)}function Rs(e,t){return Ms(2048,8,e,t)}function $s(e,t){return Ms(4,2,e,t)}function Fs(e,t){return Ms(4,4,e,t)}function Os(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Us(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ms(4,4,Os.bind(null,t,e),r)}function zs(){}function Ws(e,t){var r=bs();t=void 0===t?null:t;var a=r.memoizedState;return null!==a&&null!==t&&gs(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function Bs(e,t){var r=bs();t=void 0===t?null:t;var a=r.memoizedState;return null!==a&&null!==t&&gs(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function qs(e,t,r){return 0===(21&ss)?(e.baseState&&(e.baseState=!1,bi=!0),e.memoizedState=r):(sa(r,t)||(r=gt(),is.lanes|=r,Rl|=r,e.baseState=!0),t)}function Hs(e,t){var r=bt;bt=0!==r&&4>r?r:4,e(!0);var a=ns.transition;ns.transition={};try{e(!1),t()}finally{bt=r,ns.transition=a}}function Gs(){return bs().memoizedState}function Vs(e,t,r){var a=tc(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},Ks(e))Ys(t,r);else if(null!==(r=Mn(e,t,r,a))){rc(r,e,a,ec()),Zs(r,t,a)}}function Js(e,t,r){var a=tc(e),o={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ks(e))Ys(t,o);else{var n=e.alternate;if(0===e.lanes&&(null===n||0===n.lanes)&&null!==(n=t.lastRenderedReducer))try{var s=t.lastRenderedState,i=n(s,r);if(o.hasEagerState=!0,o.eagerState=i,sa(i,s)){var l=t.interleaved;return null===l?(o.next=o,Ln(t)):(o.next=l.next,l.next=o),void(t.interleaved=o)}}catch(c){}null!==(r=Mn(e,t,o,a))&&(rc(r,e,a,o=ec()),Zs(r,t,a))}}function Ks(e){var t=e.alternate;return e===is||null!==t&&t===is}function Ys(e,t){us=ds=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Zs(e,t,r){if(0!==(4194240&r)){var a=t.lanes;r|=a&=e.pendingLanes,t.lanes=r,xt(e,r)}}var Qs={readContext:An,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useInsertionEffect:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useSyncExternalStore:ps,useId:ps,unstable_isNewReconciler:!1},Xs={readContext:An,useCallback:function(e,t){return xs().memoizedState=[e,void 0===t?null:t],e},useContext:An,useEffect:Ds,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ls(4194308,4,Os.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ls(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ls(4,2,e,t)},useMemo:function(e,t){var r=xs();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=xs();return t=void 0!==r?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Vs.bind(null,is,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},xs().memoizedState=e},useState:Ps,useDebugValue:zs,useDeferredValue:function(e){return xs().memoizedState=e},useTransition:function(){var e=Ps(!1),t=e[0];return e=Hs.bind(null,e[1]),xs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=is,o=xs();if(on){if(void 0===r)throw Error(n(407));r=r()}else{if(r=t(),null===El)throw Error(n(349));0!==(30&ss)||Cs(a,t,r)}o.memoizedState=r;var s={value:r,getSnapshot:t};return o.queue=s,Ds(_s.bind(null,a,s,e),[e]),a.flags|=2048,As(9,Ss.bind(null,a,s,r,t),void 0,null),r},useId:function(){var e=xs(),t=El.identifierPrefix;if(on){var r=Zo;t=":"+t+"R"+(r=(Yo&~(1<<32-st(Yo)-1)).toString(32)+r),0<(r=hs++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=ms++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ei={readContext:An,useCallback:Ws,useContext:An,useEffect:Rs,useImperativeHandle:Us,useInsertionEffect:$s,useLayoutEffect:Fs,useMemo:Bs,useReducer:ws,useRef:Ts,useState:function(){return ws(ys)},useDebugValue:zs,useDeferredValue:function(e){return qs(bs(),ls.memoizedState,e)},useTransition:function(){return[ws(ys)[0],bs().memoizedState]},useMutableSource:js,useSyncExternalStore:Ns,useId:Gs,unstable_isNewReconciler:!1},ti={readContext:An,useCallback:Ws,useContext:An,useEffect:Rs,useImperativeHandle:Us,useInsertionEffect:$s,useLayoutEffect:Fs,useMemo:Bs,useReducer:ks,useRef:Ts,useState:function(){return ks(ys)},useDebugValue:zs,useDeferredValue:function(e){var t=bs();return null===ls?t.memoizedState=e:qs(t,ls.memoizedState,e)},useTransition:function(){return[ks(ys)[0],bs().memoizedState]},useMutableSource:js,useSyncExternalStore:Ns,useId:Gs,unstable_isNewReconciler:!1};function ri(e,t){if(e&&e.defaultProps){for(var r in t=$({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function ai(e,t,r,a){r=null===(r=r(a,t=e.memoizedState))||void 0===r?t:$({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var oi={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=ec(),o=tc(e),n=On(a,o);n.payload=t,void 0!==r&&null!==r&&(n.callback=r),null!==(t=Un(e,n,o))&&(rc(t,e,o,a),zn(t,e,o))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=ec(),o=tc(e),n=On(a,o);n.tag=1,n.payload=t,void 0!==r&&null!==r&&(n.callback=r),null!==(t=Un(e,n,o))&&(rc(t,e,o,a),zn(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),a=tc(e),o=On(r,a);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=Un(e,o,a))&&(rc(t,e,a,r),zn(t,e,a))}};function ni(e,t,r,a,o,n,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,n,s):!t.prototype||!t.prototype.isPureReactComponent||(!ia(r,a)||!ia(o,n))}function si(e,t,r){var a=!1,o=_o,n=t.contextType;return"object"===typeof n&&null!==n?n=An(n):(o=To(t)?Po:Io.current,n=(a=null!==(a=t.contextTypes)&&void 0!==a)?Ao(e,o):_o),t=new t(r,n),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=oi,e.stateNode=t,t._reactInternals=e,a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=n),t}function ii(e,t,r,a){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,a),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&oi.enqueueReplaceState(t,t.state,null)}function li(e,t,r,a){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs={},$n(e);var n=t.contextType;"object"===typeof n&&null!==n?o.context=An(n):(n=To(t)?Po:Io.current,o.context=Ao(e,n)),o.state=e.memoizedState,"function"===typeof(n=t.getDerivedStateFromProps)&&(ai(e,t,n,r),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&oi.enqueueReplaceState(o,o.state,null),Bn(e,r,o,a),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function ci(e,t){try{var r="",a=t;do{r+=z(a),a=a.return}while(a);var o=r}catch(n){o="\nError generating stack: "+n.message+"\n"+n.stack}return{value:e,source:t,stack:o,digest:null}}function di(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function ui(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var hi="function"===typeof WeakMap?WeakMap:Map;function mi(e,t,r){(r=On(-1,r)).tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){ql||(ql=!0,Hl=a),ui(0,t)},r}function pi(e,t,r){(r=On(-1,r)).tag=3;var a=e.type.getDerivedStateFromError;if("function"===typeof a){var o=t.value;r.payload=function(){return a(o)},r.callback=function(){ui(0,t)}}var n=e.stateNode;return null!==n&&"function"===typeof n.componentDidCatch&&(r.callback=function(){ui(0,t),"function"!==typeof a&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function gi(e,t,r){var a=e.pingCache;if(null===a){a=e.pingCache=new hi;var o=new Set;a.set(t,o)}else void 0===(o=a.get(t))&&(o=new Set,a.set(t,o));o.has(r)||(o.add(r),e=Cc.bind(null,e,t,r),t.then(e,e))}function fi(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vi(e,t,r,a,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=On(-1,1)).tag=2,Un(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var xi=y.ReactCurrentOwner,bi=!1;function yi(e,t,r,a){t.child=null===e?kn(t,null,r,a):wn(t,e.child,r,a)}function wi(e,t,r,a,o){r=r.render;var n=t.ref;return Pn(t,o),a=fs(e,t,r,a,n,o),r=vs(),null===e||bi?(on&&r&&en(t),t.flags|=1,yi(e,t,a,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,qi(e,t,o))}function ki(e,t,r,a,o){if(null===e){var n=r.type;return"function"!==typeof n||Tc(n)||void 0!==n.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Mc(r.type,null,a,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=n,ji(e,t,n,a,o))}if(n=e.child,0===(e.lanes&o)){var s=n.memoizedProps;if((r=null!==(r=r.compare)?r:ia)(s,a)&&e.ref===t.ref)return qi(e,t,o)}return t.flags|=1,(e=Lc(n,a)).ref=t.ref,e.return=t,t.child=e}function ji(e,t,r,a,o){if(null!==e){var n=e.memoizedProps;if(ia(n,a)&&e.ref===t.ref){if(bi=!1,t.pendingProps=a=n,0===(e.lanes&o))return t.lanes=e.lanes,qi(e,t,o);0!==(131072&e.flags)&&(bi=!0)}}return Si(e,t,r,a,o)}function Ni(e,t,r){var a=t.pendingProps,o=a.children,n=null!==e?e.memoizedState:null;if("hidden"===a.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},So(Ll,Tl),Tl|=r;else{if(0===(1073741824&r))return e=null!==n?n.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,So(Ll,Tl),Tl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=null!==n?n.baseLanes:r,So(Ll,Tl),Tl|=a}else null!==n?(a=n.baseLanes|r,t.memoizedState=null):a=r,So(Ll,Tl),Tl|=a;return yi(e,t,o,r),t.child}function Ci(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Si(e,t,r,a,o){var n=To(r)?Po:Io.current;return n=Ao(t,n),Pn(t,o),r=fs(e,t,r,a,n,o),a=vs(),null===e||bi?(on&&a&&en(t),t.flags|=1,yi(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,qi(e,t,o))}function _i(e,t,r,a,o){if(To(r)){var n=!0;Ro(t)}else n=!1;if(Pn(t,o),null===t.stateNode)Bi(e,t),si(t,r,a),li(t,r,a,o),a=!0;else if(null===e){var s=t.stateNode,i=t.memoizedProps;s.props=i;var l=s.context,c=r.contextType;"object"===typeof c&&null!==c?c=An(c):c=Ao(t,c=To(r)?Po:Io.current);var d=r.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate;u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(i!==a||l!==c)&&ii(t,s,a,c),Rn=!1;var h=t.memoizedState;s.state=h,Bn(t,a,s,o),l=t.memoizedState,i!==a||h!==l||Eo.current||Rn?("function"===typeof d&&(ai(t,r,d,a),l=t.memoizedState),(i=Rn||ni(t,r,i,a,h,l,c))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=l),s.props=a,s.state=l,s.context=c,a=i):("function"===typeof s.componentDidMount&&(t.flags|=4194308),a=!1)}else{s=t.stateNode,Fn(e,t),i=t.memoizedProps,c=t.type===t.elementType?i:ri(t.type,i),s.props=c,u=t.pendingProps,h=s.context,"object"===typeof(l=r.contextType)&&null!==l?l=An(l):l=Ao(t,l=To(r)?Po:Io.current);var m=r.getDerivedStateFromProps;(d="function"===typeof m||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(i!==u||h!==l)&&ii(t,s,a,l),Rn=!1,h=t.memoizedState,s.state=h,Bn(t,a,s,o);var p=t.memoizedState;i!==u||h!==p||Eo.current||Rn?("function"===typeof m&&(ai(t,r,m,a),p=t.memoizedState),(c=Rn||ni(t,r,c,a,h,p,l)||!1)?(d||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(a,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(a,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=p),s.props=a,s.state=p,s.context=l,a=c):("function"!==typeof s.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),a=!1)}return Ii(e,t,r,a,n,o)}function Ii(e,t,r,a,o,n){Ci(e,t);var s=0!==(128&t.flags);if(!a&&!s)return o&&$o(t,r,!1),qi(e,t,n);a=t.stateNode,xi.current=t;var i=s&&"function"!==typeof r.getDerivedStateFromError?null:a.render();return t.flags|=1,null!==e&&s?(t.child=wn(t,e.child,null,n),t.child=wn(t,null,i,n)):yi(e,t,i,n),t.memoizedState=a.state,o&&$o(t,r,!0),t.child}function Ei(e){var t=e.stateNode;t.pendingContext?Mo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Mo(0,t.context,!1),Yn(e,t.containerInfo)}function Pi(e,t,r,a,o){return pn(),gn(o),t.flags|=256,yi(e,t,r,a),t.child}var Ai,Ti,Li,Mi,Di={dehydrated:null,treeContext:null,retryLane:0};function Ri(e){return{baseLanes:e,cachePool:null,transitions:null}}function $i(e,t,r){var a,o=t.pendingProps,s=es.current,i=!1,l=0!==(128&t.flags);if((a=l)||(a=(null===e||null!==e.memoizedState)&&0!==(2&s)),a?(i=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),So(es,1&s),null===e)return dn(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=o.children,e=o.fallback,i?(o=t.mode,i=t.child,l={mode:"hidden",children:l},0===(1&o)&&null!==i?(i.childLanes=0,i.pendingProps=l):i=Rc(l,o,0,null),e=Dc(e,o,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Ri(r),t.memoizedState=Di,e):Fi(t,l));if(null!==(s=e.memoizedState)&&null!==(a=s.dehydrated))return function(e,t,r,a,o,s,i){if(r)return 256&t.flags?(t.flags&=-257,Oi(e,t,i,a=di(Error(n(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=a.fallback,o=t.mode,a=Rc({mode:"visible",children:a.children},o,0,null),(s=Dc(s,o,i,null)).flags|=2,a.return=t,s.return=t,a.sibling=s,t.child=a,0!==(1&t.mode)&&wn(t,e.child,null,i),t.child.memoizedState=Ri(i),t.memoizedState=Di,s);if(0===(1&t.mode))return Oi(e,t,i,null);if("$!"===o.data){if(a=o.nextSibling&&o.nextSibling.dataset)var l=a.dgst;return a=l,Oi(e,t,i,a=di(s=Error(n(419)),a,void 0))}if(l=0!==(i&e.childLanes),bi||l){if(null!==(a=El)){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(a.suspendedLanes|i))?0:o)&&o!==s.retryLane&&(s.retryLane=o,Dn(e,o),rc(a,e,o,-1))}return gc(),Oi(e,t,i,a=di(Error(n(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=_c.bind(null,e),o._reactRetry=t,null):(e=s.treeContext,an=lo(o.nextSibling),rn=t,on=!0,nn=null,null!==e&&(Vo[Jo++]=Yo,Vo[Jo++]=Zo,Vo[Jo++]=Ko,Yo=e.id,Zo=e.overflow,Ko=t),t=Fi(t,a.children),t.flags|=4096,t)}(e,t,l,o,a,s,r);if(i){i=o.fallback,l=t.mode,a=(s=e.child).sibling;var c={mode:"hidden",children:o.children};return 0===(1&l)&&t.child!==s?((o=t.child).childLanes=0,o.pendingProps=c,t.deletions=null):(o=Lc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==a?i=Lc(a,i):(i=Dc(i,l,r,null)).flags|=2,i.return=t,o.return=t,o.sibling=i,t.child=o,o=i,i=t.child,l=null===(l=e.child.memoizedState)?Ri(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~r,t.memoizedState=Di,o}return e=(i=e.child).sibling,o=Lc(i,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=r),o.return=t,o.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=o,t.memoizedState=null,o}function Fi(e,t){return(t=Rc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Oi(e,t,r,a){return null!==a&&gn(a),wn(t,e.child,null,r),(e=Fi(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ui(e,t,r){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),En(e.return,t,r)}function zi(e,t,r,a,o){var n=e.memoizedState;null===n?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:o}:(n.isBackwards=t,n.rendering=null,n.renderingStartTime=0,n.last=a,n.tail=r,n.tailMode=o)}function Wi(e,t,r){var a=t.pendingProps,o=a.revealOrder,n=a.tail;if(yi(e,t,a.children,r),0!==(2&(a=es.current)))a=1&a|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ui(e,r,t);else if(19===e.tag)Ui(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(So(es,a),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;null!==r;)null!==(e=r.alternate)&&null===ts(e)&&(o=r),r=r.sibling;null===(r=o)?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),zi(t,!1,o,r,n);break;case"backwards":for(r=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ts(e)){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}zi(t,!0,r,null,n);break;case"together":zi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bi(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qi(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Rl|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(n(153));if(null!==t.child){for(r=Lc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Lc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Hi(e,t){if(!on)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;null!==r;)null!==r.alternate&&(a=r),r=r.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Gi(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,a=0;if(t)for(var o=e.child;null!==o;)r|=o.lanes|o.childLanes,a|=14680064&o.subtreeFlags,a|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)r|=o.lanes|o.childLanes,a|=o.subtreeFlags,a|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function Vi(e,t,r){var a=t.pendingProps;switch(tn(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gi(t),null;case 1:case 17:return To(t.type)&&Lo(),Gi(t),null;case 3:return a=t.stateNode,Zn(),Co(Eo),Co(Io),as(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(hn(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==nn&&(sc(nn),nn=null))),Ti(e,t),Gi(t),null;case 5:Xn(t);var o=Kn(Jn.current);if(r=t.type,null!==e&&null!=t.stateNode)Li(e,t,r,a,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(null===t.stateNode)throw Error(n(166));return Gi(t),null}if(e=Kn(Gn.current),hn(t)){a=t.stateNode,r=t.type;var s=t.memoizedProps;switch(a[ho]=t,a[mo]=s,e=0!==(1&t.mode),r){case"dialog":Fa("cancel",a),Fa("close",a);break;case"iframe":case"object":case"embed":Fa("load",a);break;case"video":case"audio":for(o=0;o<Ma.length;o++)Fa(Ma[o],a);break;case"source":Fa("error",a);break;case"img":case"image":case"link":Fa("error",a),Fa("load",a);break;case"details":Fa("toggle",a);break;case"input":Y(a,s),Fa("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!s.multiple},Fa("invalid",a);break;case"textarea":oe(a,s),Fa("invalid",a)}for(var l in xe(r,s),o=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?a.textContent!==c&&(!0!==s.suppressHydrationWarning&&Za(a.textContent,c,e),o=["children",c]):"number"===typeof c&&a.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Za(a.textContent,c,e),o=["children",""+c]):i.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fa("scroll",a)}switch(r){case"input":G(a),X(a,s,!0);break;case"textarea":G(a),se(a);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(a.onclick=Qa)}a=o,t.updateQueue=a,null!==a&&(t.flags|=4)}else{l=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ie(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof a.is?e=l.createElement(r,{is:a.is}):(e=l.createElement(r),"select"===r&&(l=e,a.multiple?l.multiple=!0:a.size&&(l.size=a.size))):e=l.createElementNS(e,r),e[ho]=t,e[mo]=a,Ai(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(r,a),r){case"dialog":Fa("cancel",e),Fa("close",e),o=a;break;case"iframe":case"object":case"embed":Fa("load",e),o=a;break;case"video":case"audio":for(o=0;o<Ma.length;o++)Fa(Ma[o],e);o=a;break;case"source":Fa("error",e),o=a;break;case"img":case"image":case"link":Fa("error",e),Fa("load",e),o=a;break;case"details":Fa("toggle",e),o=a;break;case"input":Y(e,a),o=K(e,a),Fa("invalid",e);break;case"option":default:o=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},o=$({},a,{value:void 0}),Fa("invalid",e);break;case"textarea":oe(e,a),o=ae(e,a),Fa("invalid",e)}for(s in xe(r,o),c=o)if(c.hasOwnProperty(s)){var d=c[s];"style"===s?fe(e,d):"dangerouslySetInnerHTML"===s?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===s?"string"===typeof d?("textarea"!==r||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(i.hasOwnProperty(s)?null!=d&&"onScroll"===s&&Fa("scroll",e):null!=d&&b(e,s,d,l))}switch(r){case"input":G(e),X(e,a,!1);break;case"textarea":G(e),se(e);break;case"option":null!=a.value&&e.setAttribute("value",""+q(a.value));break;case"select":e.multiple=!!a.multiple,null!=(s=a.value)?re(e,!!a.multiple,s,!1):null!=a.defaultValue&&re(e,!!a.multiple,a.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Qa)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gi(t),null;case 6:if(e&&null!=t.stateNode)Mi(e,t,e.memoizedProps,a);else{if("string"!==typeof a&&null===t.stateNode)throw Error(n(166));if(r=Kn(Jn.current),Kn(Gn.current),hn(t)){if(a=t.stateNode,r=t.memoizedProps,a[ho]=t,(s=a.nodeValue!==r)&&null!==(e=rn))switch(e.tag){case 3:Za(a.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Za(a.nodeValue,r,0!==(1&e.mode))}s&&(t.flags|=4)}else(a=(9===r.nodeType?r:r.ownerDocument).createTextNode(a))[ho]=t,t.stateNode=a}return Gi(t),null;case 13:if(Co(es),a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(on&&null!==an&&0!==(1&t.mode)&&0===(128&t.flags))mn(),pn(),t.flags|=98560,s=!1;else if(s=hn(t),null!==a&&null!==a.dehydrated){if(null===e){if(!s)throw Error(n(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(n(317));s[ho]=t}else pn(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gi(t),s=!1}else null!==nn&&(sc(nn),nn=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((a=null!==a)!==(null!==e&&null!==e.memoizedState)&&a&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&es.current)?0===Ml&&(Ml=3):gc())),null!==t.updateQueue&&(t.flags|=4),Gi(t),null);case 4:return Zn(),Ti(e,t),null===e&&za(t.stateNode.containerInfo),Gi(t),null;case 10:return In(t.type._context),Gi(t),null;case 19:if(Co(es),null===(s=t.memoizedState))return Gi(t),null;if(a=0!==(128&t.flags),null===(l=s.rendering))if(a)Hi(s,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ts(e))){for(t.flags|=128,Hi(s,!1),null!==(a=l.updateQueue)&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;null!==r;)e=a,(s=r).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return So(es,1&es.current|2),t.child}e=e.sibling}null!==s.tail&&Ze()>Wl&&(t.flags|=128,a=!0,Hi(s,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=ts(l))){if(t.flags|=128,a=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Hi(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!on)return Gi(t),null}else 2*Ze()-s.renderingStartTime>Wl&&1073741824!==r&&(t.flags|=128,a=!0,Hi(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=s.last)?r.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ze(),t.sibling=null,r=es.current,So(es,a?1&r|2:1&r),t):(Gi(t),null);case 22:case 23:return uc(),a=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==a&&(t.flags|=8192),a&&0!==(1&t.mode)?0!==(1073741824&Tl)&&(Gi(t),6&t.subtreeFlags&&(t.flags|=8192)):Gi(t),null;case 24:case 25:return null}throw Error(n(156,t.tag))}function Ji(e,t){switch(tn(t),t.tag){case 1:return To(t.type)&&Lo(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Zn(),Co(Eo),Co(Io),as(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xn(t),null;case 13:if(Co(es),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(n(340));pn()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Co(es),null;case 4:return Zn(),null;case 10:return In(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Ai=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Ti=function(){},Li=function(e,t,r,a){var o=e.memoizedProps;if(o!==a){e=t.stateNode,Kn(Gn.current);var n,s=null;switch(r){case"input":o=K(e,o),a=K(e,a),s=[];break;case"select":o=$({},o,{value:void 0}),a=$({},a,{value:void 0}),s=[];break;case"textarea":o=ae(e,o),a=ae(e,a),s=[];break;default:"function"!==typeof o.onClick&&"function"===typeof a.onClick&&(e.onclick=Qa)}for(d in xe(r,a),r=null,o)if(!a.hasOwnProperty(d)&&o.hasOwnProperty(d)&&null!=o[d])if("style"===d){var l=o[d];for(n in l)l.hasOwnProperty(n)&&(r||(r={}),r[n]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(i.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in a){var c=a[d];if(l=null!=o?o[d]:void 0,a.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(n in l)!l.hasOwnProperty(n)||c&&c.hasOwnProperty(n)||(r||(r={}),r[n]="");for(n in c)c.hasOwnProperty(n)&&l[n]!==c[n]&&(r||(r={}),r[n]=c[n])}else r||(s||(s=[]),s.push(d,r)),r=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(i.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Fa("scroll",e),s||l===c||(s=[])):(s=s||[]).push(d,c))}r&&(s=s||[]).push("style",r);var d=s;(t.updateQueue=d)&&(t.flags|=4)}},Mi=function(e,t,r,a){r!==a&&(t.flags|=4)};var Ki=!1,Yi=!1,Zi="function"===typeof WeakSet?WeakSet:Set,Qi=null;function Xi(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(a){Nc(e,t,a)}else r.current=null}function el(e,t,r){try{r()}catch(a){Nc(e,t,a)}}var tl=!1;function rl(e,t,r){var a=t.updateQueue;if(null!==(a=null!==a?a.lastEffect:null)){var o=a=a.next;do{if((o.tag&e)===e){var n=o.destroy;o.destroy=void 0,void 0!==n&&el(t,r,n)}o=o.next}while(o!==a)}}function al(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function ol(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function nl(e){var t=e.alternate;null!==t&&(e.alternate=null,nl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ho],delete t[mo],delete t[go],delete t[fo],delete t[vo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function il(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,r){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Qa));else if(4!==a&&null!==(e=e.child))for(ll(e,t,r),e=e.sibling;null!==e;)ll(e,t,r),e=e.sibling}function cl(e,t,r){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==a&&null!==(e=e.child))for(cl(e,t,r),e=e.sibling;null!==e;)cl(e,t,r),e=e.sibling}var dl=null,ul=!1;function hl(e,t,r){for(r=r.child;null!==r;)ml(e,t,r),r=r.sibling}function ml(e,t,r){if(nt&&"function"===typeof nt.onCommitFiberUnmount)try{nt.onCommitFiberUnmount(ot,r)}catch(i){}switch(r.tag){case 5:Yi||Xi(r,t);case 6:var a=dl,o=ul;dl=null,hl(e,t,r),ul=o,null!==(dl=a)&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):dl.removeChild(r.stateNode));break;case 18:null!==dl&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?io(e.parentNode,r):1===e.nodeType&&io(e,r),Wt(e)):io(dl,r.stateNode));break;case 4:a=dl,o=ul,dl=r.stateNode.containerInfo,ul=!0,hl(e,t,r),dl=a,ul=o;break;case 0:case 11:case 14:case 15:if(!Yi&&(null!==(a=r.updateQueue)&&null!==(a=a.lastEffect))){o=a=a.next;do{var n=o,s=n.destroy;n=n.tag,void 0!==s&&(0!==(2&n)||0!==(4&n))&&el(r,t,s),o=o.next}while(o!==a)}hl(e,t,r);break;case 1:if(!Yi&&(Xi(r,t),"function"===typeof(a=r.stateNode).componentWillUnmount))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(i){Nc(r,t,i)}hl(e,t,r);break;case 21:hl(e,t,r);break;case 22:1&r.mode?(Yi=(a=Yi)||null!==r.memoizedState,hl(e,t,r),Yi=a):hl(e,t,r);break;default:hl(e,t,r)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Zi),t.forEach(function(t){var a=Ic.bind(null,e,t);r.has(t)||(r.add(t),t.then(a,a))})}}function gl(e,t){var r=t.deletions;if(null!==r)for(var a=0;a<r.length;a++){var o=r[a];try{var s=e,i=t,l=i;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(n(160));ml(s,i,o),dl=null,ul=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(d){Nc(o,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)fl(t,e),t=t.sibling}function fl(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&a){try{rl(3,e,e.return),al(3,e)}catch(f){Nc(e,e.return,f)}try{rl(5,e,e.return)}catch(f){Nc(e,e.return,f)}}break;case 1:gl(t,e),vl(e),512&a&&null!==r&&Xi(r,r.return);break;case 5:if(gl(t,e),vl(e),512&a&&null!==r&&Xi(r,r.return),32&e.flags){var o=e.stateNode;try{he(o,"")}catch(f){Nc(e,e.return,f)}}if(4&a&&null!=(o=e.stateNode)){var s=e.memoizedProps,i=null!==r?r.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&Z(o,s),be(l,i);var d=be(l,s);for(i=0;i<c.length;i+=2){var u=c[i],h=c[i+1];"style"===u?fe(o,h):"dangerouslySetInnerHTML"===u?ue(o,h):"children"===u?he(o,h):b(o,u,h,d)}switch(l){case"input":Q(o,s);break;case"textarea":ne(o,s);break;case"select":var m=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?re(o,!!s.multiple,p,!1):m!==!!s.multiple&&(null!=s.defaultValue?re(o,!!s.multiple,s.defaultValue,!0):re(o,!!s.multiple,s.multiple?[]:"",!1))}o[mo]=s}catch(f){Nc(e,e.return,f)}}break;case 6:if(gl(t,e),vl(e),4&a){if(null===e.stateNode)throw Error(n(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(f){Nc(e,e.return,f)}}break;case 3:if(gl(t,e),vl(e),4&a&&null!==r&&r.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(f){Nc(e,e.return,f)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(o=e.child).flags&&(s=null!==o.memoizedState,o.stateNode.isHidden=s,!s||null!==o.alternate&&null!==o.alternate.memoizedState||(zl=Ze())),4&a&&pl(e);break;case 22:if(u=null!==r&&null!==r.memoizedState,1&e.mode?(Yi=(d=Yi)||u,gl(t,e),Yi=d):gl(t,e),vl(e),8192&a){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Qi=e,u=e.child;null!==u;){for(h=Qi=u;null!==Qi;){switch(p=(m=Qi).child,m.tag){case 0:case 11:case 14:case 15:rl(4,m,m.return);break;case 1:Xi(m,m.return);var g=m.stateNode;if("function"===typeof g.componentWillUnmount){a=m,r=m.return;try{t=a,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(f){Nc(a,r,f)}}break;case 5:Xi(m,m.return);break;case 22:if(null!==m.memoizedState){wl(h);continue}}null!==p?(p.return=m,Qi=p):wl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{o=h.stateNode,d?"function"===typeof(s=o.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,i=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",i))}catch(f){Nc(e,e.return,f)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(f){Nc(e,e.return,f)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),vl(e),4&a&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(sl(r)){var a=r;break e}r=r.return}throw Error(n(160))}switch(a.tag){case 5:var o=a.stateNode;32&a.flags&&(he(o,""),a.flags&=-33),cl(e,il(e),o);break;case 3:case 4:var s=a.stateNode.containerInfo;ll(e,il(e),s);break;default:throw Error(n(161))}}catch(i){Nc(e,e.return,i)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xl(e,t,r){Qi=e,bl(e,t,r)}function bl(e,t,r){for(var a=0!==(1&e.mode);null!==Qi;){var o=Qi,n=o.child;if(22===o.tag&&a){var s=null!==o.memoizedState||Ki;if(!s){var i=o.alternate,l=null!==i&&null!==i.memoizedState||Yi;i=Ki;var c=Yi;if(Ki=s,(Yi=l)&&!c)for(Qi=o;null!==Qi;)l=(s=Qi).child,22===s.tag&&null!==s.memoizedState?kl(o):null!==l?(l.return=s,Qi=l):kl(o);for(;null!==n;)Qi=n,bl(n,t,r),n=n.sibling;Qi=o,Ki=i,Yi=c}yl(e)}else 0!==(8772&o.subtreeFlags)&&null!==n?(n.return=o,Qi=n):yl(e)}}function yl(e){for(;null!==Qi;){var t=Qi;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yi||al(5,t);break;case 1:var a=t.stateNode;if(4&t.flags&&!Yi)if(null===r)a.componentDidMount();else{var o=t.elementType===t.type?r.memoizedProps:ri(t.type,r.memoizedProps);a.componentDidUpdate(o,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&qn(t,s,a);break;case 3:var i=t.updateQueue;if(null!==i){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}qn(t,i,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Wt(h)}}}break;default:throw Error(n(163))}Yi||512&t.flags&&ol(t)}catch(m){Nc(t,t.return,m)}}if(t===e){Qi=null;break}if(null!==(r=t.sibling)){r.return=t.return,Qi=r;break}Qi=t.return}}function wl(e){for(;null!==Qi;){var t=Qi;if(t===e){Qi=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Qi=r;break}Qi=t.return}}function kl(e){for(;null!==Qi;){var t=Qi;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{al(4,t)}catch(l){Nc(t,r,l)}break;case 1:var a=t.stateNode;if("function"===typeof a.componentDidMount){var o=t.return;try{a.componentDidMount()}catch(l){Nc(t,o,l)}}var n=t.return;try{ol(t)}catch(l){Nc(t,n,l)}break;case 5:var s=t.return;try{ol(t)}catch(l){Nc(t,s,l)}}}catch(l){Nc(t,t.return,l)}if(t===e){Qi=null;break}var i=t.sibling;if(null!==i){i.return=t.return,Qi=i;break}Qi=t.return}}var jl,Nl=Math.ceil,Cl=y.ReactCurrentDispatcher,Sl=y.ReactCurrentOwner,_l=y.ReactCurrentBatchConfig,Il=0,El=null,Pl=null,Al=0,Tl=0,Ll=No(0),Ml=0,Dl=null,Rl=0,$l=0,Fl=0,Ol=null,Ul=null,zl=0,Wl=1/0,Bl=null,ql=!1,Hl=null,Gl=null,Vl=!1,Jl=null,Kl=0,Yl=0,Zl=null,Ql=-1,Xl=0;function ec(){return 0!==(6&Il)?Ze():-1!==Ql?Ql:Ql=Ze()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Al?Al&-Al:null!==fn.transition?(0===Xl&&(Xl=gt()),Xl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,r,a){if(50<Yl)throw Yl=0,Zl=null,Error(n(185));vt(e,r,a),0!==(2&Il)&&e===El||(e===El&&(0===(2&Il)&&($l|=r),4===Ml&&ic(e,Al)),ac(e,a),1===r&&0===Il&&0===(1&t.mode)&&(Wl=Ze()+500,Oo&&Wo()))}function ac(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,o=e.expirationTimes,n=e.pendingLanes;0<n;){var s=31-st(n),i=1<<s,l=o[s];-1===l?0!==(i&r)&&0===(i&a)||(o[s]=mt(i,t)):l<=t&&(e.expiredLanes|=i),n&=~i}}(e,t);var a=ht(e,e===El?Al:0);if(0===a)null!==r&&Je(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(null!=r&&Je(r),1===t)0===e.tag?function(e){Oo=!0,zo(e)}(lc.bind(null,e)):zo(lc.bind(null,e)),no(function(){0===(6&Il)&&Wo()}),r=null;else{switch(yt(a)){case 1:r=Xe;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=at}r=Ec(r,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function oc(e,t){if(Ql=-1,Xl=0,0!==(6&Il))throw Error(n(327));var r=e.callbackNode;if(kc()&&e.callbackNode!==r)return null;var a=ht(e,e===El?Al:0);if(0===a)return null;if(0!==(30&a)||0!==(a&e.expiredLanes)||t)t=fc(e,a);else{t=a;var o=Il;Il|=2;var s=pc();for(El===e&&Al===t||(Bl=null,Wl=Ze()+500,hc(e,t));;)try{xc();break}catch(l){mc(e,l)}_n(),Cl.current=s,Il=o,null!==Pl?t=0:(El=null,Al=0,t=Ml)}if(0!==t){if(2===t&&(0!==(o=pt(e))&&(a=o,t=nc(e,o))),1===t)throw r=Dl,hc(e,0),ic(e,a),ac(e,Ze()),r;if(6===t)ic(e,a);else{if(o=e.current.alternate,0===(30&a)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var a=0;a<r.length;a++){var o=r[a],n=o.getSnapshot;o=o.value;try{if(!sa(n(),o))return!1}catch(i){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=fc(e,a))&&(0!==(s=pt(e))&&(a=s,t=nc(e,s))),1===t))throw r=Dl,hc(e,0),ic(e,a),ac(e,Ze()),r;switch(e.finishedWork=o,e.finishedLanes=a,t){case 0:case 1:throw Error(n(345));case 2:case 5:wc(e,Ul,Bl);break;case 3:if(ic(e,a),(130023424&a)===a&&10<(t=zl+500-Ze())){if(0!==ht(e,0))break;if(((o=e.suspendedLanes)&a)!==a){ec(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(wc.bind(null,e,Ul,Bl),t);break}wc(e,Ul,Bl);break;case 4:if(ic(e,a),(4194240&a)===a)break;for(t=e.eventTimes,o=-1;0<a;){var i=31-st(a);s=1<<i,(i=t[i])>o&&(o=i),a&=~s}if(a=o,10<(a=(120>(a=Ze()-a)?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Nl(a/1960))-a)){e.timeoutHandle=ro(wc.bind(null,e,Ul,Bl),a);break}wc(e,Ul,Bl);break;default:throw Error(n(329))}}}return ac(e,Ze()),e.callbackNode===r?oc.bind(null,e):null}function nc(e,t){var r=Ol;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=fc(e,t))&&(t=Ul,Ul=r,null!==t&&sc(t)),e}function sc(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function ic(e,t){for(t&=~Fl,t&=~$l,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-st(t),a=1<<r;e[r]=-1,t&=~a}}function lc(e){if(0!==(6&Il))throw Error(n(327));kc();var t=ht(e,0);if(0===(1&t))return ac(e,Ze()),null;var r=fc(e,t);if(0!==e.tag&&2===r){var a=pt(e);0!==a&&(t=a,r=nc(e,a))}if(1===r)throw r=Dl,hc(e,0),ic(e,t),ac(e,Ze()),r;if(6===r)throw Error(n(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Ul,Bl),ac(e,Ze()),null}function cc(e,t){var r=Il;Il|=1;try{return e(t)}finally{0===(Il=r)&&(Wl=Ze()+500,Oo&&Wo())}}function dc(e){null!==Jl&&0===Jl.tag&&0===(6&Il)&&kc();var t=Il;Il|=1;var r=_l.transition,a=bt;try{if(_l.transition=null,bt=1,e)return e()}finally{bt=a,_l.transition=r,0===(6&(Il=t))&&Wo()}}function uc(){Tl=Ll.current,Co(Ll)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,ao(r)),null!==Pl)for(r=Pl.return;null!==r;){var a=r;switch(tn(a),a.tag){case 1:null!==(a=a.type.childContextTypes)&&void 0!==a&&Lo();break;case 3:Zn(),Co(Eo),Co(Io),as();break;case 5:Xn(a);break;case 4:Zn();break;case 13:case 19:Co(es);break;case 10:In(a.type._context);break;case 22:case 23:uc()}r=r.return}if(El=e,Pl=e=Lc(e.current,null),Al=Tl=t,Ml=0,Dl=null,Fl=$l=Rl=0,Ul=Ol=null,null!==Tn){for(t=0;t<Tn.length;t++)if(null!==(a=(r=Tn[t]).interleaved)){r.interleaved=null;var o=a.next,n=r.pending;if(null!==n){var s=n.next;n.next=o,a.next=s}r.pending=a}Tn=null}return e}function mc(e,t){for(;;){var r=Pl;try{if(_n(),os.current=Qs,ds){for(var a=is.memoizedState;null!==a;){var o=a.queue;null!==o&&(o.pending=null),a=a.next}ds=!1}if(ss=0,cs=ls=is=null,us=!1,hs=0,Sl.current=null,null===r||null===r.return){Ml=1,Dl=t,Pl=null;break}e:{var s=e,i=r.return,l=r,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=fi(i);if(null!==p){p.flags&=-257,vi(p,i,l,0,t),1&p.mode&&gi(s,d,t),c=d;var g=(t=p).updateQueue;if(null===g){var f=new Set;f.add(c),t.updateQueue=f}else g.add(c);break e}if(0===(1&t)){gi(s,d,t),gc();break e}c=Error(n(426))}else if(on&&1&l.mode){var v=fi(i);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vi(v,i,l,0,t),gn(ci(c,l));break e}}s=c=ci(c,l),4!==Ml&&(Ml=2),null===Ol?Ol=[s]:Ol.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Wn(s,mi(0,c,t));break e;case 1:l=c;var x=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof x.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gl||!Gl.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,Wn(s,pi(s,l,t));break e}}s=s.return}while(null!==s)}yc(r)}catch(y){t=y,Pl===r&&null!==r&&(Pl=r=r.return);continue}break}}function pc(){var e=Cl.current;return Cl.current=Qs,null===e?Qs:e}function gc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===El||0===(268435455&Rl)&&0===(268435455&$l)||ic(El,Al)}function fc(e,t){var r=Il;Il|=2;var a=pc();for(El===e&&Al===t||(Bl=null,hc(e,t));;)try{vc();break}catch(o){mc(e,o)}if(_n(),Il=r,Cl.current=a,null!==Pl)throw Error(n(261));return El=null,Al=0,Ml}function vc(){for(;null!==Pl;)bc(Pl)}function xc(){for(;null!==Pl&&!Ke();)bc(Pl)}function bc(e){var t=jl(e.alternate,e,Tl);e.memoizedProps=e.pendingProps,null===t?yc(e):Pl=t,Sl.current=null}function yc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Vi(r,t,Tl)))return void(Pl=r)}else{if(null!==(r=Ji(r,t)))return r.flags&=32767,void(Pl=r);if(null===e)return Ml=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Ml&&(Ml=5)}function wc(e,t,r){var a=bt,o=_l.transition;try{_l.transition=null,bt=1,function(e,t,r,a){do{kc()}while(null!==Jl);if(0!==(6&Il))throw Error(n(327));r=e.finishedWork;var o=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(n(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var o=31-st(r),n=1<<o;t[o]=0,a[o]=-1,e[o]=-1,r&=~n}}(e,s),e===El&&(Pl=El=null,Al=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Vl||(Vl=!0,Ec(tt,function(){return kc(),null})),s=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||s){s=_l.transition,_l.transition=null;var i=bt;bt=1;var l=Il;Il|=4,Sl.current=null,function(e,t){if(Xa=qt,ha(e=ua())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(a&&0!==a.rangeCount){r=a.anchorNode;var o=a.anchorOffset,s=a.focusNode;a=a.focusOffset;try{r.nodeType,s.nodeType}catch(w){r=null;break e}var i=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==r||0!==o&&3!==h.nodeType||(l=i+o),h!==s||0!==a&&3!==h.nodeType||(c=i+a),3===h.nodeType&&(i+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===r&&++d===o&&(l=i),m===s&&++u===a&&(c=i),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(eo={focusedElem:e,selectionRange:r},qt=!1,Qi=t;null!==Qi;)if(e=(t=Qi).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qi=e;else for(;null!==Qi;){t=Qi;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var f=g.memoizedProps,v=g.memoizedState,x=t.stateNode,b=x.getSnapshotBeforeUpdate(t.elementType===t.type?f:ri(t.type,f),v);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var y=t.stateNode.containerInfo;1===y.nodeType?y.textContent="":9===y.nodeType&&y.documentElement&&y.removeChild(y.documentElement);break;default:throw Error(n(163))}}catch(w){Nc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Qi=e;break}Qi=t.return}g=tl,tl=!1}(e,r),fl(r,e),ma(eo),qt=!!Xa,eo=Xa=null,e.current=r,xl(r,e,o),Ye(),Il=l,bt=i,_l.transition=s}else e.current=r;if(Vl&&(Vl=!1,Jl=e,Kl=o),s=e.pendingLanes,0===s&&(Gl=null),function(e){if(nt&&"function"===typeof nt.onCommitFiberRoot)try{nt.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),ac(e,Ze()),null!==t)for(a=e.onRecoverableError,r=0;r<t.length;r++)o=t[r],a(o.value,{componentStack:o.stack,digest:o.digest});if(ql)throw ql=!1,e=Hl,Hl=null,e;0!==(1&Kl)&&0!==e.tag&&kc(),s=e.pendingLanes,0!==(1&s)?e===Zl?Yl++:(Yl=0,Zl=e):Yl=0,Wo()}(e,t,r,a)}finally{_l.transition=o,bt=a}return null}function kc(){if(null!==Jl){var e=yt(Kl),t=_l.transition,r=bt;try{if(_l.transition=null,bt=16>e?16:e,null===Jl)var a=!1;else{if(e=Jl,Jl=null,Kl=0,0!==(6&Il))throw Error(n(331));var o=Il;for(Il|=4,Qi=e.current;null!==Qi;){var s=Qi,i=s.child;if(0!==(16&Qi.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Qi=d;null!==Qi;){var u=Qi;switch(u.tag){case 0:case 11:case 15:rl(8,u,s)}var h=u.child;if(null!==h)h.return=u,Qi=h;else for(;null!==Qi;){var m=(u=Qi).sibling,p=u.return;if(nl(u),u===d){Qi=null;break}if(null!==m){m.return=p,Qi=m;break}Qi=p}}}var g=s.alternate;if(null!==g){var f=g.child;if(null!==f){g.child=null;do{var v=f.sibling;f.sibling=null,f=v}while(null!==f)}}Qi=s}}if(0!==(2064&s.subtreeFlags)&&null!==i)i.return=s,Qi=i;else e:for(;null!==Qi;){if(0!==(2048&(s=Qi).flags))switch(s.tag){case 0:case 11:case 15:rl(9,s,s.return)}var x=s.sibling;if(null!==x){x.return=s.return,Qi=x;break e}Qi=s.return}}var b=e.current;for(Qi=b;null!==Qi;){var y=(i=Qi).child;if(0!==(2064&i.subtreeFlags)&&null!==y)y.return=i,Qi=y;else e:for(i=b;null!==Qi;){if(0!==(2048&(l=Qi).flags))try{switch(l.tag){case 0:case 11:case 15:al(9,l)}}catch(k){Nc(l,l.return,k)}if(l===i){Qi=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Qi=w;break e}Qi=l.return}}if(Il=o,Wo(),nt&&"function"===typeof nt.onPostCommitFiberRoot)try{nt.onPostCommitFiberRoot(ot,e)}catch(k){}a=!0}return a}finally{bt=r,_l.transition=t}}return!1}function jc(e,t,r){e=Un(e,t=mi(0,t=ci(r,t),1),1),t=ec(),null!==e&&(vt(e,1,t),ac(e,t))}function Nc(e,t,r){if(3===e.tag)jc(e,e,r);else for(;null!==t;){if(3===t.tag){jc(t,e,r);break}if(1===t.tag){var a=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof a.componentDidCatch&&(null===Gl||!Gl.has(a))){t=Un(t,e=pi(t,e=ci(r,e),1),1),e=ec(),null!==t&&(vt(t,1,e),ac(t,e));break}}t=t.return}}function Cc(e,t,r){var a=e.pingCache;null!==a&&a.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,El===e&&(Al&r)===r&&(4===Ml||3===Ml&&(130023424&Al)===Al&&500>Ze()-zl?hc(e,0):Fl|=r),ac(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var r=ec();null!==(e=Dn(e,t))&&(vt(e,t,r),ac(e,r))}function _c(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Sc(e,r)}function Ic(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,o=e.memoizedState;null!==o&&(r=o.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(n(314))}null!==a&&a.delete(t),Sc(e,r)}function Ec(e,t){return Ve(e,t)}function Pc(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,r,a){return new Pc(e,t,r,a)}function Tc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lc(e,t){var r=e.alternate;return null===r?((r=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Mc(e,t,r,a,o,s){var i=2;if(a=e,"function"===typeof e)Tc(e)&&(i=1);else if("string"===typeof e)i=5;else e:switch(e){case j:return Dc(r.children,o,s,t);case N:i=8,o|=8;break;case C:return(e=Ac(12,r,t,2|o)).elementType=C,e.lanes=s,e;case E:return(e=Ac(13,r,t,o)).elementType=E,e.lanes=s,e;case P:return(e=Ac(19,r,t,o)).elementType=P,e.lanes=s,e;case L:return Rc(r,o,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:i=10;break e;case _:i=9;break e;case I:i=11;break e;case A:i=14;break e;case T:i=16,a=null;break e}throw Error(n(130,null==e?e:typeof e,""))}return(t=Ac(i,r,t,o)).elementType=e,t.type=a,t.lanes=s,t}function Dc(e,t,r,a){return(e=Ac(7,e,a,t)).lanes=r,e}function Rc(e,t,r,a){return(e=Ac(22,e,a,t)).elementType=L,e.lanes=r,e.stateNode={isHidden:!1},e}function $c(e,t,r){return(e=Ac(6,e,null,t)).lanes=r,e}function Fc(e,t,r){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Oc(e,t,r,a,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ft(0),this.expirationTimes=ft(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ft(0),this.identifierPrefix=a,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Uc(e,t,r,a,o,n,s,i,l){return e=new Oc(e,t,r,i,l),1===t?(t=1,!0===n&&(t|=8)):t=0,n=Ac(3,null,null,t),e.current=n,n.stateNode=e,n.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},$n(n),e}function zc(e){if(!e)return _o;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(n(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(To(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(n(171))}if(1===e.tag){var r=e.type;if(To(r))return Do(e,r,t)}return t}function Wc(e,t,r,a,o,n,s,i,l){return(e=Uc(r,a,!0,e,0,n,0,i,l)).context=zc(null),r=e.current,(n=On(a=ec(),o=tc(r))).callback=void 0!==t&&null!==t?t:null,Un(r,n,o),e.current.lanes=o,vt(e,o,a),ac(e,a),e}function Bc(e,t,r,a){var o=t.current,n=ec(),s=tc(o);return r=zc(r),null===t.context?t.context=r:t.pendingContext=r,(t=On(n,s)).payload={element:e},null!==(a=void 0===a?null:a)&&(t.callback=a),null!==(e=Un(o,t,s))&&(rc(e,o,s,n),zn(e,o,s)),s}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Gc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}jl=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Eo.current)bi=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return bi=!1,function(e,t,r){switch(t.tag){case 3:Ei(t),pn();break;case 5:Qn(t);break;case 1:To(t.type)&&Ro(t);break;case 4:Yn(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,o=t.memoizedProps.value;So(jn,a._currentValue),a._currentValue=o;break;case 13:if(null!==(a=t.memoizedState))return null!==a.dehydrated?(So(es,1&es.current),t.flags|=128,null):0!==(r&t.child.childLanes)?$i(e,t,r):(So(es,1&es.current),null!==(e=qi(e,t,r))?e.sibling:null);So(es,1&es.current);break;case 19:if(a=0!==(r&t.childLanes),0!==(128&e.flags)){if(a)return Wi(e,t,r);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),So(es,es.current),a)break;return null;case 22:case 23:return t.lanes=0,Ni(e,t,r)}return qi(e,t,r)}(e,t,r);bi=0!==(131072&e.flags)}else bi=!1,on&&0!==(1048576&t.flags)&&Xo(t,Go,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Bi(e,t),e=t.pendingProps;var o=Ao(t,Io.current);Pn(t,r),o=fs(null,t,a,e,o,r);var s=vs();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,To(a)?(s=!0,Ro(t)):s=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,$n(t),o.updater=oi,t.stateNode=o,o._reactInternals=t,li(t,a,e,r),t=Ii(null,t,a,!0,s,r)):(t.tag=0,on&&s&&en(t),yi(null,t,o,r),t=t.child),t;case 16:a=t.elementType;e:{switch(Bi(e,t),e=t.pendingProps,a=(o=a._init)(a._payload),t.type=a,o=t.tag=function(e){if("function"===typeof e)return Tc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===A)return 14}return 2}(a),e=ri(a,e),o){case 0:t=Si(null,t,a,e,r);break e;case 1:t=_i(null,t,a,e,r);break e;case 11:t=wi(null,t,a,e,r);break e;case 14:t=ki(null,t,a,ri(a.type,e),r);break e}throw Error(n(306,a,""))}return t;case 0:return a=t.type,o=t.pendingProps,Si(e,t,a,o=t.elementType===a?o:ri(a,o),r);case 1:return a=t.type,o=t.pendingProps,_i(e,t,a,o=t.elementType===a?o:ri(a,o),r);case 3:e:{if(Ei(t),null===e)throw Error(n(387));a=t.pendingProps,o=(s=t.memoizedState).element,Fn(e,t),Bn(t,a,null,r);var i=t.memoizedState;if(a=i.element,s.isDehydrated){if(s={element:a,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Pi(e,t,a,r,o=ci(Error(n(423)),t));break e}if(a!==o){t=Pi(e,t,a,r,o=ci(Error(n(424)),t));break e}for(an=lo(t.stateNode.containerInfo.firstChild),rn=t,on=!0,nn=null,r=kn(t,null,a,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(pn(),a===o){t=qi(e,t,r);break e}yi(e,t,a,r)}t=t.child}return t;case 5:return Qn(t),null===e&&dn(t),a=t.type,o=t.pendingProps,s=null!==e?e.memoizedProps:null,i=o.children,to(a,o)?i=null:null!==s&&to(a,s)&&(t.flags|=32),Ci(e,t),yi(e,t,i,r),t.child;case 6:return null===e&&dn(t),null;case 13:return $i(e,t,r);case 4:return Yn(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=wn(t,null,a,r):yi(e,t,a,r),t.child;case 11:return a=t.type,o=t.pendingProps,wi(e,t,a,o=t.elementType===a?o:ri(a,o),r);case 7:return yi(e,t,t.pendingProps,r),t.child;case 8:case 12:return yi(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,o=t.pendingProps,s=t.memoizedProps,i=o.value,So(jn,a._currentValue),a._currentValue=i,null!==s)if(sa(s.value,i)){if(s.children===o.children&&!Eo.current){t=qi(e,t,r);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){i=s.child;for(var c=l.firstContext;null!==c;){if(c.context===a){if(1===s.tag){(c=On(-1,r&-r)).tag=2;var d=s.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}s.lanes|=r,null!==(c=s.alternate)&&(c.lanes|=r),En(s.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===s.tag)i=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(i=s.return))throw Error(n(341));i.lanes|=r,null!==(l=i.alternate)&&(l.lanes|=r),En(i,r,t),i=s.sibling}else i=s.child;if(null!==i)i.return=s;else for(i=s;null!==i;){if(i===t){i=null;break}if(null!==(s=i.sibling)){s.return=i.return,i=s;break}i=i.return}s=i}yi(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,a=t.pendingProps.children,Pn(t,r),a=a(o=An(o)),t.flags|=1,yi(e,t,a,r),t.child;case 14:return o=ri(a=t.type,t.pendingProps),ki(e,t,a,o=ri(a.type,o),r);case 15:return ji(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,o=t.pendingProps,o=t.elementType===a?o:ri(a,o),Bi(e,t),t.tag=1,To(a)?(e=!0,Ro(t)):e=!1,Pn(t,r),si(t,a,o),li(t,a,o,r),Ii(null,t,a,!0,e,r);case 19:return Wi(e,t,r);case 22:return Ni(e,t,r)}throw Error(n(156,t.tag))};var Vc="function"===typeof reportError?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Xc(e,t,r,a,o){var n=r._reactRootContainer;if(n){var s=n;if("function"===typeof o){var i=o;o=function(){var e=qc(s);i.call(e)}}Bc(t,s,e,o)}else s=function(e,t,r,a,o){if(o){if("function"===typeof a){var n=a;a=function(){var e=qc(s);n.call(e)}}var s=Wc(t,a,e,0,null,!1,0,"",Qc);return e._reactRootContainer=s,e[po]=s.current,za(8===e.nodeType?e.parentNode:e),dc(),s}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof a){var i=a;a=function(){var e=qc(l);i.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[po]=l.current,za(8===e.nodeType?e.parentNode:e),dc(function(){Bc(t,l,r,a)}),l}(r,t,e,o,a);return qc(s)}Kc.prototype.render=Jc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(n(409));Bc(e,t,null,null)},Kc.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Bc(null,e,null,null)}),t[po]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Lt.length&&0!==t&&t<Lt[r].priority;r++);Lt.splice(r,0,e),0===r&&$t(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ut(t.pendingLanes);0!==r&&(xt(t,1|r),ac(t,Ze()),0===(6&Il)&&(Wl=Ze()+500,Wo()))}break;case 13:dc(function(){var t=Dn(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}}),Gc(e,1)}},kt=function(e){if(13===e.tag){var t=Dn(e,134217728);if(null!==t)rc(t,e,134217728,ec());Gc(e,134217728)}},jt=function(e){if(13===e.tag){var t=tc(e),r=Dn(e,t);if(null!==r)rc(r,e,t,ec());Gc(e,t)}},Nt=function(){return bt},Ct=function(e,t){var r=bt;try{return bt=e,t()}finally{bt=r}},ke=function(e,t,r){switch(t){case"input":if(Q(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var o=wo(a);if(!o)throw Error(n(90));V(a),Q(a,o)}}}break;case"textarea":ne(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ie=cc,Ee=dc;var ed={usingClientEntryPoint:!1,Events:[bo,yo,wo,Se,_e,cc]},td={findFiberByHostInstance:xo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ad.isDisabled&&ad.supportsFiber)try{ot=ad.inject(rd),nt=ad}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(n(200));return function(e,t,r){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==a?null:""+a,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Yc(e))throw Error(n(299));var r=!1,a="",o=Vc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Uc(e,1,!1,null,0,r,0,a,o),e[po]=t.current,za(8===e.nodeType?e.parentNode:e),new Jc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(n(188));throw e=Object.keys(e).join(","),Error(n(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,r){if(!Zc(t))throw Error(n(200));return Xc(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Yc(e))throw Error(n(405));var a=null!=r&&r.hydratedSources||null,o=!1,s="",i=Vc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(o=!0),void 0!==r.identifierPrefix&&(s=r.identifierPrefix),void 0!==r.onRecoverableError&&(i=r.onRecoverableError)),t=Wc(t,null,e,1,null!=r?r:null,o,0,s,i),e[po]=t.current,za(e),a)for(e=0;e<a.length;e++)o=(o=(r=a[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,o]:t.mutableSourceEagerHydrationData.push(r,o);return new Kc(t)},t.render=function(e,t,r){if(!Zc(t))throw Error(n(200));return Xc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(n(40));return!!e._reactRootContainer&&(dc(function(){Xc(null,null,e,!1,function(){e._reactRootContainer=null,e[po]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!Zc(r))throw Error(n(200));if(null==e||void 0===e._reactInternals)throw Error(n(38));return Xc(e,t,r,!1,a)},t.version="18.3.1-next-f1338f8080-20240426"},736:function(e,t,r){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(r(374));class n extends o.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t){let{config:r,type:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o="";"plain"===a?o="pl":"phrase"===a?o="ph":"websearch"===a&&(o="w");const n=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${o}fts${n}.${t}`),this}match(e){return Object.entries(e).forEach(e=>{let[t,r]=e;this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}t.default=n},745:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_HEADERS=void 0;const a=r(400);t.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${a.version}`}},784:(e,t,r)=>{"use strict";r.d(t,{Gw:()=>d,createGeneralNotification:()=>u,fp:()=>c});const a="notif:unreadChanged",o=e=>`tag.notifications.${e}`;function n(e){try{if("undefined"===typeof window)return[];const t=window.localStorage.getItem(o(e));return t?JSON.parse(t):[]}catch{return[]}}function s(e,t){try{"undefined"!==typeof window&&window.localStorage.setItem(o(e),JSON.stringify(t))}catch(r){console.warn("Failed to write notifications:",r)}}const i=()=>Date.now().toString(36)+Math.random().toString(36).slice(2),l=()=>(new Date).toISOString(),c=async e=>{const t={id:i(),userId:e.userId,type:"collaboration",title:e.title,message:e.message,projectId:e.projectId,meta:e.meta||{},isRead:!1,createdAt:l()},r=n(e.userId);return r.unshift(t),s(e.userId,r),"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent(a,{detail:{userId:e.userId}})),t},d=async e=>{const t={id:i(),userId:e.userId,type:"collaboration",title:"Collaboration Request",message:`New collaboration request for project "${e.projectName}" from ${e.requesterName}`,projectId:e.projectId,meta:{requestId:e.requestId,requesterId:e.requesterId,requesterName:e.requesterName,requesterAvatar:e.requesterAvatar,projectName:e.projectName,status:"pending"},isRead:!1,createdAt:l()},r=n(e.userId);return r.unshift(t),s(e.userId,r),"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent(a,{detail:{userId:e.userId}})),t},u=async e=>{const t={id:i(),userId:e.userId,type:e.type||"general",title:e.title,message:e.message,projectId:e.projectId,meta:e.meta||{},isRead:!1,createdAt:l()},r=n(e.userId);return r.unshift(t),s(e.userId,r),"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent(a,{detail:{userId:e.userId}})),t}},792:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});const a=new class{constructor(){this.dbName="TAGAvatarDB",this.dbVersion=1,this.storeName="avatars"}async initDB(){return new Promise((e,t)=>{const r=indexedDB.open(this.dbName,this.dbVersion);r.onerror=()=>t(r.error),r.onsuccess=()=>e(r.result),r.onupgradeneeded=e=>{const t=e.target.result;if(!t.objectStoreNames.contains(this.storeName)){t.createObjectStore(this.storeName,{keyPath:"userId"}).createIndex("userId","userId",{unique:!0})}}})}async storeAvatar(e,t){const r=await this.initDB();try{let a;if(t instanceof Blob)a=t;else if(t instanceof File)a=t;else{if("string"!==typeof t||!t.startsWith("data:image/"))throw new Error("Unsupported avatar data format");{const e=await fetch(t);a=await e.blob()}}return new Promise((t,o)=>{const n=r.transaction([this.storeName],"readwrite").objectStore(this.storeName).put({userId:e,avatar:a,timestamp:Date.now()});n.onsuccess=()=>{console.log(`[AvatarStorage] Stored avatar for user: ${e}, size: ${a.size} bytes`),t({success:!0,userId:e})},n.onerror=()=>o(n.error)})}catch(a){throw console.error(`[AvatarStorage] Error storing avatar: ${a}`),a}}async getAvatar(e){const t=await this.initDB();return new Promise((r,a)=>{const o=t.transaction([this.storeName],"readonly").objectStore(this.storeName).get(e);o.onsuccess=()=>{o.result&&o.result.avatar instanceof Blob?(console.log(`[AvatarStorage] Found avatar for user: ${e}, size: ${o.result.avatar.size} bytes`),r({success:!0,avatar:o.result.avatar})):(console.log(`[AvatarStorage] No avatar found for user: ${e}`),r({success:!1,error:"Avatar not found"}))},o.onerror=()=>a(o.error)})}async getAvatarUrl(e){try{const t=await this.getAvatar(e);if(t.success&&t.avatar instanceof Blob){const r=URL.createObjectURL(t.avatar);return console.log(`[AvatarStorage] Created ObjectURL for user: ${e}: ${r}`),r}return console.log(`[AvatarStorage] No avatar URL for user: ${e}`),null}catch(t){return console.error(`[AvatarStorage] Error getting avatar URL: ${t}`),null}}async deleteAvatar(e){const t=await this.initDB();return new Promise((r,a)=>{const o=t.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(e);o.onsuccess=()=>{console.log(`[AvatarStorage] Deleted avatar for user: ${e}`),r({success:!0})},o.onerror=()=>a(o.error)})}revokeAvatarUrl(e){e&&e.startsWith("blob:")&&(URL.revokeObjectURL(e),console.log(`[AvatarStorage] Revoked ObjectURL: ${e}`))}async hasAvatar(e){return(await this.getAvatar(e)).success}}},829:function(e,t,r){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(r(736));t.default=class{constructor(e,t){let{headers:r={},schema:a,fetch:o}=t;this.url=e,this.headers=r,this.schema=a,this.fetch=o}select(e){let{head:t=!1,count:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=t?"HEAD":"GET";let n=!1;const s=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!n?"":('"'===e&&(n=!n),e)).join("");return this.url.searchParams.set("select",s),r&&(this.headers.Prefer=`count=${r}`),new o.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e){let{count:t,defaultToNull:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),t&&a.push(`count=${t}`),r||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new o.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e){let{onConflict:t,ignoreDuplicates:r=!1,count:a,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=[`resolution=${r?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&s.push(this.headers.Prefer),a&&s.push(`count=${a}`),n||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new o.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new o.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new o.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}},853:(e,t,r)=>{"use strict";e.exports=r(234)},860:(e,t,r)=>{"use strict";r.d(t,{So:()=>c,_i:()=>m,bl:()=>u,follow:()=>b,getFollowersList:()=>v,getFollowingListPaginated:()=>x,kt:()=>d,m3:()=>h,unfollow:()=>y});var a=r(560),o=r(420);const n="tag_artist_follows",s=()=>{try{const e=localStorage.getItem(n);return e?JSON.parse(e):{}}catch(e){return console.warn("Failed to get stored follow data:",e),{}}},i=e=>{try{localStorage.setItem(n,JSON.stringify(e))}catch(t){console.warn("Failed to save follow data:",t)}},l=()=>{const e=s();if(Object.keys(e).length>0)return;i({bryan:{followers:["alice","alex"],followersCount:2},alice:{followers:["bryan"],followersCount:1},alex:{followers:[],followersCount:0}}),console.log("[MockFollow] Initialized follow baseline data")},c=async(e,t)=>{try{if(!e||!t)return{success:!1,error:"Missing followerId or artistId"};if(e===t)return{success:!1,error:"Cannot follow yourself"};if(!o.o1[e]||!o.o1[t])return{success:!1,error:"User not found"};const r=s();r[t]||(r[t]={followers:[],followersCount:0});const a=r[t],n=a.followers.indexOf(e);let l=!1;return-1===n?(a.followers.push(e),a.followersCount++,l=!0,console.log(`[MockFollow] User ${e} followed artist ${t}`)):(a.followers.splice(n,1),a.followersCount--,l=!1,console.log(`[MockFollow] User ${e} unfollowed artist ${t}`)),i(r),console.log(`[MockFollow] Artist ${t} followers count: ${a.followersCount}`),{success:!0,data:{isFollowing:l,followersCount:a.followersCount}}}catch(r){return console.error("[MockFollow] Error toggling follow:",r),{success:!1,error:r.message}}},d=async(e,t)=>{try{if(!e||!t)return{success:!1,error:"Missing followerId or artistId"};const r=s()[t];if(!r)return{success:!0,data:{isFollowing:!1,followersCount:0}};return{success:!0,data:{isFollowing:r.followers.includes(e),followersCount:r.followersCount}}}catch(r){return console.error("[MockFollow] Error checking follow status:",r),{success:!1,error:r.message}}},u=async e=>{try{if(!e)return{success:!1,error:"Missing artistId"};const t=s()[e];return{success:!0,data:{followersCount:t?t.followersCount:0}}}catch(t){return console.error("[MockFollow] Error getting followers count:",t),{success:!1,error:t.message}}},h=async e=>{try{if(!e)return{success:!1,error:"Missing userId"};const t=s(),r=[];return Object.keys(t).forEach(a=>{t[a].followers.includes(e)&&r.push(a)}),{success:!0,data:{following:r,followingCount:r.length}}}catch(t){return console.error("[MockFollow] Error getting following list:",t),{success:!1,error:t.message}}},m=e=>{try{const t=s()[e];return t?(console.log(`[Debug] Follow stats for artist: ${e}`),console.log(`  Followers count: ${t.followersCount}`),console.log(`  Followers: ${t.followers.join(", ")}`),t):void console.log(`[Debug] No follow data for artist: ${e}`)}catch(t){console.error("[Debug] Error getting follow stats:",t)}},p=e=>btoa(`cursor_${e}`).replace(/=/g,""),g=e=>{try{const t=atob(e).match(/cursor_(\d+)/);return t?parseInt(t[1]):0}catch{return 0}},f=(e,t)=>{if(!t.trim())return e;const r=t.toLowerCase();return e.filter(e=>{const t=o.o1[e];if(!t)return!1;return[t.displayName,t.name,t.school,...t.skills||[],...t.majors||[]].join(" ").toLowerCase().includes(r)})},v=async function(e){let{limit:t=20,cursor:r=null,q:o="",currentUserId:n="alice"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{if(!e)return{success:!1,error:"Missing artistId"};l();const i=s(),c=i[e];if(!c||!c.followers.length)return{success:!0,data:{items:[],hasMore:!1,cursor:null}};let d=[...c.followers];o.trim()&&(d=f(d,o));const u=r?g(r):0,h=u+t,m=d.slice(u,h),v=(await Promise.all(m.map(async e=>{var t;const r=await(0,a.Cs)(e);if(!r)return console.warn(`[MockFollow] Artist data not found: ${e}`),null;const o=(null===(t=i[e])||void 0===t?void 0:t.followers.includes(n))||!1;return{id:r.id,displayName:r.name,avatar:r.avatar,role:r.title||r.discipline,school:r.school,skills:r.skills||[],isFollowedByMe:o,isMutual:!1}}))).filter(Boolean),x=h<d.length;return{success:!0,data:{items:v,hasMore:x,cursor:x?p(h):null}}}catch(i){return console.error("[MockFollow] Error getting followers list:",i),{success:!1,error:i.message}}},x=async function(e){let{limit:t=20,cursor:r=null,q:o=""}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{if(!e)return{success:!1,error:"Missing userId"};l();const n=s(),i=[];if(Object.keys(n).forEach(t=>{n[t].followers.includes(e)&&i.push(t)}),!i.length)return{success:!0,data:{items:[],hasMore:!1,cursor:null}};let c=i;o.trim()&&(c=f(i,o));const d=r?g(r):0,u=d+t,h=c.slice(d,u),m=(await Promise.all(h.map(async e=>{const t=await(0,a.Cs)(e);return t?{id:t.id,displayName:t.name,avatar:t.avatar,role:t.title||t.discipline,school:t.school,skills:t.skills||[],isFollowedByMe:!0,isMutual:!1}:(console.warn(`[MockFollow] Artist data not found: ${e}`),null)}))).filter(Boolean),v=u<c.length;return{success:!0,data:{items:m,hasMore:v,cursor:v?p(u):null}}}catch(n){return console.error("[MockFollow] Error getting following list:",n),{success:!1,error:n.message}}},b=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"alice";const r=await c(t,e);return r.success&&window.dispatchEvent(new CustomEvent("follow:changed",{detail:{followerId:t,artistId:e,isFollowing:!0,operation:"follow"}})),r},y=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"alice";const r=await c(t,e);return r.success&&window.dispatchEvent(new CustomEvent("follow:changed",{detail:{followerId:t,artistId:e,isFollowing:!1,operation:"unfollow"}})),r}},915:(e,t,r)=>{"use strict";r.d(t,{Bx:()=>s,EP:()=>o,Ih:()=>n,fF:()=>i});const a="tag.avatarCache",o=e=>{try{if("undefined"===typeof window)return null;const t=JSON.parse(localStorage.getItem(a)||"{}")[e];return t&&Date.now()-t.timestamp<864e5?t.url:null}catch(t){return console.warn("Error reading avatar cache:",t),null}},n=(e,t)=>{try{if("undefined"===typeof window)return;const r=JSON.parse(localStorage.getItem(a)||"{}");r[e]={url:t,timestamp:Date.now()},localStorage.setItem(a,JSON.stringify(r))}catch(r){console.warn("Error caching avatar:",r)}},s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{if("undefined"===typeof window)return;if(e){const t=JSON.parse(localStorage.getItem(a)||"{}");delete t[e],localStorage.setItem(a,JSON.stringify(t)),localStorage.removeItem(`tag.avatars.${e}`),console.log(`[clearAvatarCache] Cleared avatar data for user: ${e}`)}else{localStorage.removeItem(a);Object.keys(localStorage).forEach(e=>{e.startsWith("tag.avatars.")&&localStorage.removeItem(e)}),console.log("[clearAvatarCache] Cleared all avatar data")}}catch(t){console.warn("Error clearing avatar cache:",t)}},i=()=>{try{if("undefined"===typeof window)return{available:!1,reason:"Server-side rendering"};const t="tag.storage.test",r="test";localStorage.setItem(t,r);const a=localStorage.getItem(t);if(localStorage.removeItem(t),a!==r)return{available:!1,reason:"Read/write test failed"};const o="tag.quota.test",n="x".repeat(1048576);try{return localStorage.setItem(o,n),localStorage.removeItem(o),{available:!0,quota:"OK"}}catch(e){return{available:!1,reason:"Quota exceeded",error:e.message}}}catch(t){return{available:!1,reason:"localStorage not available",error:t.message}}}},945:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(8);const o={WORK:"work",COLLABORATION:"collaboration"};var n=r(179);const s={STORAGE_KEY:"tag_favorites",COUNTERS_KEY:"tag_favorite_counters",async _getStorage(){try{const e=await n.IG.getItem(this.STORAGE_KEY),t=e?JSON.parse(e):{};if(0===Object.keys(t).length){const e=this._getDefaultFavorites();return await this._setStorage(e),e}return t}catch(e){return console.error("Failed to get favorites from storage:",e),{}}},_getDefaultFavorites(){return{user1:[{id:this._generateId(),userId:"user1",itemType:"work",itemId:"1",createdAt:new Date(Date.now()-864e5).toISOString()},{id:this._generateId(),userId:"user1",itemType:"collaboration",itemId:"1",createdAt:new Date(Date.now()-1728e5).toISOString()}]}},async _setStorage(e){try{await n.IG.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Failed to save favorites to storage:",t)}},async _getCounters(){try{const e=await n.IG.getItem(this.COUNTERS_KEY);return e?JSON.parse(e):{}}catch(e){return console.error("Failed to get favorite counters from storage:",e),{}}},async _setCounters(e){try{await n.IG.setItem(this.COUNTERS_KEY,JSON.stringify(e))}catch(t){console.error("Failed to save favorite counters to storage:",t)}},_generateId:()=>Date.now().toString(36)+Math.random().toString(36).substr(2),async getFavorites(e){var t;const{userId:r,type:a="all",cursor:o,limit:n=20}=e,s=(await this._getStorage())[r]||[];let i=s;"all"!==a&&(i=s.filter(e=>e.itemType===a)),i.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt));let l=0;if(o){l=i.findIndex(e=>e.id===o)+1}const c=l+n,d=i.slice(l,c),u=c<i.length,h=u?null===(t=d[d.length-1])||void 0===t?void 0:t.id:null;return await new Promise(e=>setTimeout(e,30)),{success:!0,data:{items:d,pagination:{cursor:h,hasMore:u,total:i.length}}}},async addFavorite(e){const{userId:t,itemType:r,itemId:a}=e,o=await this._getStorage(),n=await this._getCounters(),s=o[t]||[],i=s.findIndex(e=>e.itemType===r&&e.itemId===a);if(-1!==i)return{success:!0,data:s[i]};const l={id:this._generateId(),userId:t,itemType:r,itemId:a,createdAt:(new Date).toISOString()};s.push(l),o[t]=s,await this._setStorage(o);const c=`${r}_${a}`;return n[c]=(n[c]||0)+1,await this._setCounters(n),await new Promise(e=>setTimeout(e,200)),{success:!0,data:l}},async removeFavorite(e){const{userId:t,itemType:r,itemId:a}=e,o=this._getStorage(),n=this._getCounters(),s=o[t]||[],i=s.findIndex(e=>e.itemType===r&&e.itemId===a);if(-1===i)return{success:!0,data:null};const l=s.splice(i,1)[0];o[t]=s,this._setStorage(o);const c=`${r}_${a}`;return n[c]=Math.max(0,(n[c]||1)-1),this._setCounters(n),await new Promise(e=>setTimeout(e,200)),{success:!0,data:l}},async checkFavoriteStatus(e){const{userId:t,itemType:r,itemId:a}=e,o=(this._getStorage()[t]||[]).find(e=>e.itemType===r&&e.itemId===a);return await new Promise(e=>setTimeout(e,50)),{success:!0,data:{isFavorited:!!o,favoriteId:(null===o||void 0===o?void 0:o.id)||null}}},async getFavoriteCount(e){const{itemType:t,itemId:r}=e,a=this._getCounters(),o=`${t}_${r}`;return await new Promise(e=>setTimeout(e,50)),{success:!0,data:{count:a[o]||0}}},async batchCheckFavoriteStatus(e){const{userId:t,items:r}=e,a=this._getStorage()[t]||[],o={};return r.forEach(e=>{const t=`${e.itemType}_${e.itemId}`,r=a.find(t=>t.itemType===e.itemType&&t.itemId===e.itemId);o[t]=!!r}),await new Promise(e=>setTimeout(e,100)),{success:!0,data:o}},clearUserFavorites(e){const t=this._getStorage();delete t[e],this._setStorage(t)},getAllFavorites(){return this._getStorage()}};const i=new class{constructor(){this.adapter=s}async getFavorites(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,a.HW)(),r=e.userId||(null===t||void 0===t?void 0:t.id);if(!r)throw new Error("User not authenticated");return this.adapter.getFavorites({userId:r,type:e.type||"all",cursor:e.cursor,limit:e.limit||20})}async addFavorite(e,t){const r=(0,a.HW)();if(null===r||void 0===r||!r.id)throw new Error("User not authenticated");if(!e||!t)throw new Error("Item type and ID are required");if(!(e=>Object.values(o).includes(e))(e))throw new Error(`Invalid item type. Must be "${o.WORK}" or "${o.COLLABORATION}"`);return this.adapter.addFavorite({userId:r.id,itemType:e,itemId:t})}async removeFavorite(e,t){const r=(0,a.HW)();if(null===r||void 0===r||!r.id)throw new Error("User not authenticated");if(!e||!t)throw new Error("Item type and ID are required");return this.adapter.removeFavorite({userId:r.id,itemType:e,itemId:t})}async removeFavoriteById(e){const t=(0,a.HW)();if(null===t||void 0===t||!t.id)throw new Error("User not authenticated");if(!e)throw new Error("Favorite ID is required");const r=await this.getFavorites({userId:t.id});if(!r.success)throw new Error("Failed to get favorites");const o=r.data.items.find(t=>t.id===e);if(!o)throw new Error("Favorite not found");return this.adapter.removeFavorite({userId:t.id,itemType:o.itemType,itemId:o.itemId})}async toggleFavorite(e,t,r){return r?this.addFavorite(e,t):this.removeFavorite(e,t)}async checkFavoriteStatus(e,t){const r=(0,a.HW)();if(null===r||void 0===r||!r.id)return{isFavorited:!1,favoriteId:null};if(!e||!t)throw new Error("Item type and ID are required");return this.adapter.checkFavoriteStatus({userId:r.id,itemType:e,itemId:t})}async getFavoriteCount(e,t){if(!e||!t)throw new Error("Item type and ID are required");return this.adapter.getFavoriteCount({itemType:e,itemId:t})}async batchCheckFavoriteStatus(e){const t=(0,a.HW)();return null!==t&&void 0!==t&&t.id?this.adapter.batchCheckFavoriteStatus({userId:t.id,items:e}):e.reduce((e,t)=>(e[`${t.itemType}_${t.itemId}`]=!1,e),{})}}},950:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(730)},979:(e,t,r)=>{"use strict";r.d(t,{H9:()=>o,Tw:()=>n});var a=r(32);const o=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const{userId:r=null,visitorFingerprint:o=null,ipAddress:n=null,userAgent:s=null}=t,{data:i,error:l}=await a.ND.rpc("increment_artwork_views",{p_artwork_id:e,p_user_id:r,p_visitor_fingerprint:o,p_ip_address:n,p_user_agent:s});if(l)return console.error("Failed to record artwork view:",l),{success:!1,error:l.message};if(i&&i.length>0){const e=i[0];return{success:e.success,viewCount:e.view_count,error:e.error_message}}return{success:!1,error:"No data returned from database function"}}catch(r){return console.error("Error recording artwork view:",r),{success:!1,error:r.message}}},n=async e=>{try{const{data:t,error:r}=await a.ND.rpc("get_artwork_view_count",{p_artwork_id:e});return r?(console.error("Failed to get artwork view count:",r),{success:!1,error:r.message}):{success:!0,viewCount:t||0}}catch(t){return console.error("Error getting artwork view count:",t),{success:!1,error:t.message}}}},980:function(e,t,r){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const o=a(r(210));t.PostgrestClient=o.default;const n=a(r(829));t.PostgrestQueryBuilder=n.default;const s=a(r(736));t.PostgrestFilterBuilder=s.default;const i=a(r(374));t.PostgrestTransformBuilder=i.default;const l=a(r(286));t.PostgrestBuilder=l.default;const c=a(r(611));t.PostgrestError=c.default,t.default={PostgrestClient:o.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:l.default,PostgrestError:c.default}},989:e=>{"use strict";var t=!("undefined"===typeof window||!window.document||!window.document.createElement),r={canUseDOM:t,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:t&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:t&&!!window.screen,isInWorker:!t};e.exports=r}},t={};function r(a){var o=t[a];if(void 0!==o)return o.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e=r(43),t=r(391),a=(r(358),"popstate");function o(){return u(function(e,t){let{pathname:r,search:a,hash:o}=e.location;return l("",{pathname:r,search:a,hash:o},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:c(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function n(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function s(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function i(e,t){return{usr:e.state,key:e.key,idx:t}}function l(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3?arguments[3]:void 0;return{pathname:"string"===typeof e?e:e.pathname,search:"",hash:"",..."string"===typeof t?d(t):t,state:r,key:t&&t.key||a||Math.random().toString(36).substring(2,10)}}function c(e){let{pathname:t="/",search:r="",hash:a=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),a&&"#"!==a&&(t+="#"===a.charAt(0)?a:"#"+a),t}function d(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function u(e,t,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:n=document.defaultView,v5Compat:s=!1}=o,c=n.history,d="POP",u=null,m=p();function p(){return(c.state||{idx:null}).idx}function g(){d="POP";let e=p(),t=null==e?null:e-m;m=e,u&&u({action:d,location:v.location,delta:t})}function f(e){return h(e)}null==m&&(m=0,c.replaceState({...c.state,idx:m},""));let v={get action(){return d},get location(){return e(n,c)},listen(e){if(u)throw new Error("A history only accepts one active listener");return n.addEventListener(a,g),u=e,()=>{n.removeEventListener(a,g),u=null}},createHref:e=>t(n,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){d="PUSH";let a=l(v.location,e,t);r&&r(a,e),m=p()+1;let o=i(a,m),h=v.createHref(a);try{c.pushState(o,"",h)}catch(g){if(g instanceof DOMException&&"DataCloneError"===g.name)throw g;n.location.assign(h)}s&&u&&u({action:d,location:v.location,delta:1})},replace:function(e,t){d="REPLACE";let a=l(v.location,e,t);r&&r(a,e),m=p();let o=i(a,m),n=v.createHref(a);c.replaceState(o,"",n),s&&u&&u({action:d,location:v.location,delta:0})},go:e=>c.go(e)};return v}function h(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r="http://localhost";"undefined"!==typeof window&&(r="null"!==window.location.origin?window.location.origin:window.location.href),n(r,"No window.location.(origin|href) available to create URL");let a="string"===typeof e?e:c(e);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=r+a),new URL(a,r)}new WeakMap;function m(e,t){return p(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function p(e,t,r,a){let o=E(("string"===typeof t?d(t):t).pathname||"/",r);if(null==o)return null;let n=g(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(n);let s=null;for(let i=0;null==s&&i<n.length;++i){let e=I(o);s=C(n[i],e,a)}return s}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=(e,o,s)=>{let i={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};i.relativePath.startsWith("/")&&(n(i.relativePath.startsWith(a),`Absolute route path "${i.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),i.relativePath=i.relativePath.slice(a.length));let l=M([a,i.relativePath]),c=r.concat(i);e.children&&e.children.length>0&&(n(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),g(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:N(l,e.index),routesMeta:c})};return e.forEach((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let r of f(e.path))o(e,t,r);else o(e,t)}),t}function f(e){let t=e.split("/");if(0===t.length)return[];let[r,...a]=t,o=r.endsWith("?"),n=r.replace(/\?$/,"");if(0===a.length)return o?[n,""]:[n];let s=f(a.join("/")),i=[];return i.push(...s.map(e=>""===e?n:[n,e].join("/"))),o&&i.push(...s),i.map(t=>e.startsWith("/")&&""===t?"/":t)}var v=/^:[\w-]+$/,x=3,b=2,y=1,w=10,k=-2,j=e=>"*"===e;function N(e,t){let r=e.split("/"),a=r.length;return r.some(j)&&(a+=k),t&&(a+=b),r.filter(e=>!j(e)).reduce((e,t)=>e+(v.test(t)?x:""===t?y:w),a)}function C(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:a}=e,o={},n="/",s=[];for(let i=0;i<a.length;++i){let e=a[i],l=i===a.length-1,c="/"===n?t:t.slice(n.length)||"/",d=S({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&r&&!a[a.length-1].route.index&&(d=S({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(o,d.params),s.push({params:o,pathname:M([n,d.pathname]),pathnameBase:D(M([n,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(n=M([n,d.pathnameBase]))}return s}function S(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,a]=_(e.path,e.caseSensitive,e.end),o=t.match(r);if(!o)return null;let n=o[0],s=n.replace(/(.)\/+$/,"$1"),i=o.slice(1);return{params:a.reduce((e,t,r)=>{let{paramName:a,isOptional:o}=t;if("*"===a){let e=i[r]||"";s=n.slice(0,n.length-e.length).replace(/(.)\/+$/,"$1")}const l=i[r];return e[a]=o&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:n,pathnameBase:s,pattern:e}}function _(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];s("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(a.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),a]}function I(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return s(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function E(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=e.charAt(r);return a&&"/"!==a?null:e.slice(r)||"/"}function P(e,t,r,a){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function A(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function T(e){let t=A(e);return t.map((e,r)=>r===t.length-1?e.pathname:e.pathnameBase)}function L(e,t,r){let a,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?a=d(e):(a={...e},n(!a.pathname||!a.pathname.includes("?"),P("?","pathname","search",a)),n(!a.pathname||!a.pathname.includes("#"),P("#","pathname","hash",a)),n(!a.search||!a.search.includes("#"),P("#","search","hash",a)));let s,i=""===e||""===a.pathname,l=i?"/":a.pathname;if(null==l)s=r;else{let e=t.length-1;if(!o&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}s=e>=0?t[e]:"/"}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:r,search:a="",hash:o=""}="string"===typeof e?d(e):e,n=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:n,search:R(a),hash:$(o)}}(a,s),u=l&&"/"!==l&&l.endsWith("/"),h=(i||"."===l)&&r.endsWith("/");return c.pathname.endsWith("/")||!u&&!h||(c.pathname+="/"),c}var M=e=>e.join("/").replace(/\/\/+/g,"/"),D=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),R=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",$=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function F(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var O=["POST","PUT","PATCH","DELETE"],U=(new Set(O),["GET",...O]);new Set(U),Symbol("ResetLoaderData");var z=e.createContext(null);z.displayName="DataRouter";var W=e.createContext(null);W.displayName="DataRouterState";var B=e.createContext({isTransitioning:!1});B.displayName="ViewTransition";var q=e.createContext(new Map);q.displayName="Fetchers";var H=e.createContext(null);H.displayName="Await";var G=e.createContext(null);G.displayName="Navigation";var V=e.createContext(null);V.displayName="Location";var J=e.createContext({outlet:null,matches:[],isDataRoute:!1});J.displayName="Route";var K=e.createContext(null);K.displayName="RouteError";function Y(){return null!=e.useContext(V)}function Z(){return n(Y(),"useLocation() may be used only in the context of a <Router> component."),e.useContext(V).location}var Q="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function X(t){e.useContext(G).static||e.useLayoutEffect(t)}function ee(){let{isDataRoute:t}=e.useContext(J);return t?function(){let{router:t}=de("useNavigate"),r=he("useNavigate"),a=e.useRef(!1);X(()=>{a.current=!0});let o=e.useCallback(async function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(a.current,Q),a.current&&("number"===typeof e?t.navigate(e):await t.navigate(e,{fromRouteId:r,...o}))},[t,r]);return o}():function(){n(Y(),"useNavigate() may be used only in the context of a <Router> component.");let t=e.useContext(z),{basename:r,navigator:a}=e.useContext(G),{matches:o}=e.useContext(J),{pathname:i}=Z(),l=JSON.stringify(T(o)),c=e.useRef(!1);X(()=>{c.current=!0});let d=e.useCallback(function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(s(c.current,Q),!c.current)return;if("number"===typeof e)return void a.go(e);let n=L(e,JSON.parse(l),i,"path"===o.relative);null==t&&"/"!==r&&(n.pathname="/"===n.pathname?r:M([r,n.pathname])),(o.replace?a.replace:a.push)(n,o.state,o)},[r,a,l,i,t]);return d}()}e.createContext(null);function te(){let{matches:t}=e.useContext(J),r=t[t.length-1];return r?r.params:{}}function re(t){let{relative:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:a}=e.useContext(J),{pathname:o}=Z(),n=JSON.stringify(T(a));return e.useMemo(()=>L(t,JSON.parse(n),o,"path"===r),[t,n,o,r])}function ae(t,r,a,o){n(Y(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=e.useContext(G),{matches:l}=e.useContext(J),c=l[l.length-1],u=c?c.params:{},h=c?c.pathname:"/",p=c?c.pathnameBase:"/",g=c&&c.route;{let e=g&&g.path||"";ge(h,!g||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let f,v=Z();if(r){let e="string"===typeof r?d(r):r;n("/"===p||e.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${e.pathname}" was given in the \`location\` prop.`),f=e}else f=v;let x=f.pathname||"/",b=x;if("/"!==p){let e=p.replace(/^\//,"").split("/");b="/"+x.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=m(t,{pathname:b});s(g||null!=y,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),s(null==y||void 0!==y[y.length-1].route.element||void 0!==y[y.length-1].route.Component||void 0!==y[y.length-1].route.lazy,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=le(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:M([p,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?p:M([p,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,a,o);return r&&w?e.createElement(V.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},w):w}function oe(){let t=me(),r=F(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,o="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:o},s={padding:"2px 4px",backgroundColor:o},i=null;return console.error("Error handled by React Router default ErrorBoundary:",t),i=e.createElement(e.Fragment,null,e.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),e.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",e.createElement("code",{style:s},"ErrorBoundary")," or"," ",e.createElement("code",{style:s},"errorElement")," prop on your route.")),e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},r),a?e.createElement("pre",{style:n},a):null,i)}var ne=e.createElement(oe,null),se=class extends e.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?e.createElement(J.Provider,{value:this.props.routeContext},e.createElement(K.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ie(t){let{routeContext:r,match:a,children:o}=t,n=e.useContext(z);return n&&n.static&&n.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=a.route.id),e.createElement(J.Provider,{value:r},o)}function le(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==t){if(!a)return null;if(a.errors)t=a.matches;else{if(0!==r.length||a.initialized||!(a.matches.length>0))return null;t=a.matches}}let o=t,s=a?.errors;if(null!=s){let e=o.findIndex(e=>e.route.id&&void 0!==s?.[e.route.id]);n(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),o=o.slice(0,Math.min(o.length,e+1))}let i=!1,l=-1;if(a)for(let e=0;e<o.length;e++){let t=o[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(l=e),t.route.id){let{loaderData:e,errors:r}=a,n=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!r||void 0===r[t.route.id]);if(t.route.lazy||n){i=!0,o=l>=0?o.slice(0,l+1):[o[0]];break}}}return o.reduceRight((t,n,c)=>{let d,u=!1,h=null,m=null;a&&(d=s&&n.route.id?s[n.route.id]:void 0,h=n.route.errorElement||ne,i&&(l<0&&0===c?(ge("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),u=!0,m=null):l===c&&(u=!0,m=n.route.hydrateFallbackElement||null)));let p=r.concat(o.slice(0,c+1)),g=()=>{let r;return r=d?h:u?m:n.route.Component?e.createElement(n.route.Component,null):n.route.element?n.route.element:t,e.createElement(ie,{match:n,routeContext:{outlet:t,matches:p,isDataRoute:null!=a},children:r})};return a&&(n.route.ErrorBoundary||n.route.errorElement||0===c)?e.createElement(se,{location:a.location,revalidation:a.revalidation,component:h,error:d,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}function ce(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function de(t){let r=e.useContext(z);return n(r,ce(t)),r}function ue(t){let r=e.useContext(W);return n(r,ce(t)),r}function he(t){let r=function(t){let r=e.useContext(J);return n(r,ce(t)),r}(t),a=r.matches[r.matches.length-1];return n(a.route.id,`${t} can only be used on routes that contain a unique "id"`),a.route.id}function me(){let t=e.useContext(K),r=ue("useRouteError"),a=he("useRouteError");return void 0!==t?t:r.errors?.[a]}var pe={};function ge(e,t,r){t||pe[e]||(pe[e]=!0,s(!1,r))}e.memo(function(e){let{routes:t,future:r,state:a}=e;return ae(t,void 0,a,r)});function fe(t){let{to:r,replace:a,state:o,relative:i}=t;n(Y(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=e.useContext(G);s(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=e.useContext(J),{pathname:d}=Z(),u=ee(),h=L(r,T(c),d,"path"===i),m=JSON.stringify(h);return e.useEffect(()=>{u(JSON.parse(m),{replace:a,state:o,relative:i})},[u,m,i,a,o]),null}function ve(e){n(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function xe(t){let{basename:r="/",children:a=null,location:o,navigationType:i="POP",navigator:l,static:c=!1}=t;n(!Y(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=r.replace(/^\/*/,"/"),h=e.useMemo(()=>({basename:u,navigator:l,static:c,future:{}}),[u,l,c]);"string"===typeof o&&(o=d(o));let{pathname:m="/",search:p="",hash:g="",state:f=null,key:v="default"}=o,x=e.useMemo(()=>{let e=E(m,u);return null==e?null:{location:{pathname:e,search:p,hash:g,state:f,key:v},navigationType:i}},[u,m,p,g,f,v,i]);return s(null!=x,`<Router basename="${u}"> is not able to match the URL "${m}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),null==x?null:e.createElement(G.Provider,{value:h},e.createElement(V.Provider,{children:a,value:x}))}function be(e){let{children:t,location:r}=e;return ae(ye(t),r)}e.Component;function ye(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[];return e.Children.forEach(t,(t,o)=>{if(!e.isValidElement(t))return;let s=[...r,o];if(t.type===e.Fragment)return void a.push.apply(a,ye(t.props.children,s));n(t.type===ve,`[${"string"===typeof t.type?t.type:t.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),n(!t.props.index||!t.props.children,"An index route cannot have child routes.");let i={id:t.props.id||s.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,hydrateFallbackElement:t.props.hydrateFallbackElement,HydrateFallback:t.props.HydrateFallback,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:!0===t.props.hasErrorBoundary||null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(i.children=ye(t.props.children,s)),a.push(i)}),a}var we="get",ke="application/x-www-form-urlencoded";function je(e){return null!=e&&"string"===typeof e.tagName}var Ne=null;var Ce=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Se(e){return null==e||Ce.has(e)?e:(s(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ke}"`),null)}function _e(e,t){let r,a,o,n,s;if(je(i=e)&&"form"===i.tagName.toLowerCase()){let s=e.getAttribute("action");a=s?E(s,t):null,r=e.getAttribute("method")||we,o=Se(e.getAttribute("enctype"))||ke,n=new FormData(e)}else if(function(e){return je(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return je(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let s=e.form;if(null==s)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let i=e.getAttribute("formaction")||s.getAttribute("action");if(a=i?E(i,t):null,r=e.getAttribute("formmethod")||s.getAttribute("method")||we,o=Se(e.getAttribute("formenctype"))||Se(s.getAttribute("enctype"))||ke,n=new FormData(s,e),!function(){if(null===Ne)try{new FormData(document.createElement("form"),0),Ne=!1}catch(e){Ne=!0}return Ne}()){let{name:t,type:r,value:a}=e;if("image"===r){let e=t?`${t}.`:"";n.append(`${e}x`,"0"),n.append(`${e}y`,"0")}else t&&n.append(t,a)}}else{if(je(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=we,a=null,o=ke,s=e}var i;return n&&"text/plain"===o&&(s=n,n=void 0),{action:a,method:r.toLowerCase(),encType:o,formData:n,body:s}}function Ie(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}async function Ee(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Pe(e){return null!=e&&"string"===typeof e.page}function Ae(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Te(e,t,r,a,o,n){let s=(e,t)=>!r[t]||e.route.id!==r[t].route.id,i=(e,t)=>r[t].pathname!==e.pathname||r[t].route.path?.endsWith("*")&&r[t].params["*"]!==e.params["*"];return"assets"===n?t.filter((e,t)=>s(e,t)||i(e,t)):"data"===n?t.filter((t,n)=>{let l=a.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(s(t,n)||i(t,n))return!0;if(t.route.shouldRevalidate){let a=t.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof a)return a}return!0}):[]}function Le(e,t){let{includeHydrateFallback:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a=e.map(e=>{let a=t.routes[e.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1),[...new Set(a)];var a}function Me(e,t){let r=new Set,a=new Set(t);return e.reduce((e,o)=>{if(t&&!Pe(o)&&"script"===o.as&&o.href&&a.has(o.href))return e;let n=JSON.stringify(function(e){let t={},r=Object.keys(e).sort();for(let a of r)t[a]=e[a];return t}(o));return r.has(n)||(r.add(n),e.push({key:n,link:o})),e},[])}function De(e){return{__html:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;Symbol("SingleFetchRedirect");var Re=new Set([100,101,204,205]);function $e(e,t){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname="_root.data":t&&"/"===E(r.pathname,t)?r.pathname=`${t.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}e.Component;function Fe(t){let{error:r,isOutsideRemixApp:a}=t;console.error(r);let o,n=e.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(F(r))return e.createElement(Oe,{title:"Unhandled Thrown Response!"},e.createElement("h1",{style:{fontSize:"24px"}},r.status," ",r.statusText),n);if(r instanceof Error)0;else{let e=null==r?"Unknown Error":"object"===typeof r&&"toString"in r?r.toString():JSON.stringify(r);new Error(e)}return e.createElement(Oe,{title:"Application Error!",isOutsideRemixApp:a},e.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),e.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},o.stack),n)}function Oe(t){let{title:r,renderScripts:a,isOutsideRemixApp:o,children:n}=t,{routeModules:s}=qe();return s.root?.Layout&&!o?n:e.createElement("html",{lang:"en"},e.createElement("head",null,e.createElement("meta",{charSet:"utf-8"}),e.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),e.createElement("title",null,r)),e.createElement("body",null,e.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},n,a?e.createElement(Ze,null):null)))}function Ue(e,t){return"lazy"===e.mode&&!0===t}function ze(){let t=e.useContext(z);return Ie(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function We(){let t=e.useContext(W);return Ie(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Be=e.createContext(void 0);function qe(){let t=e.useContext(Be);return Ie(t,"You must render this element inside a <HydratedRouter> element"),t}function He(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function Ge(e,t,r){if(r&&!Ye)return[e[0]];if(t){let r=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,r+1)}return e}function Ve(t){let{page:r,...a}=t,{router:o}=ze(),n=e.useMemo(()=>m(o.routes,r,o.basename),[o.routes,r,o.basename]);return n?e.createElement(Ke,{page:r,matches:n,...a}):null}function Je(t){let{manifest:r,routeModules:a}=qe(),[o,n]=e.useState([]);return e.useEffect(()=>{let e=!1;return async function(e,t,r){return Me((await Promise.all(e.map(async e=>{let a=t.routes[e.route.id];if(a){let e=await Ee(a,r);return e.links?e.links():[]}return[]}))).flat(1).filter(Ae).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}(t,r,a).then(t=>{e||n(t)}),()=>{e=!0}},[t,r,a]),o}function Ke(t){let{page:r,matches:a,...o}=t,n=Z(),{manifest:s,routeModules:i}=qe(),{basename:l}=ze(),{loaderData:c,matches:d}=We(),u=e.useMemo(()=>Te(r,a,d,s,n,"data"),[r,a,d,s,n]),h=e.useMemo(()=>Te(r,a,d,s,n,"assets"),[r,a,d,s,n]),m=e.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let e=new Set,t=!1;if(a.forEach(r=>{let a=s.routes[r.route.id];a&&a.hasLoader&&(!u.some(e=>e.route.id===r.route.id)&&r.route.id in c&&i[r.route.id]?.shouldRevalidate||a.hasClientLoader?t=!0:e.add(r.route.id))}),0===e.size)return[];let o=$e(r,l);return t&&e.size>0&&o.searchParams.set("_routes",a.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[o.pathname+o.search]},[l,c,n,s,u,a,r,i]),p=e.useMemo(()=>Le(h,s),[h,s]),g=Je(h);return e.createElement(e.Fragment,null,m.map(t=>e.createElement("link",{key:t,rel:"prefetch",as:"fetch",href:t,...o})),p.map(t=>e.createElement("link",{key:t,rel:"modulepreload",href:t,...o})),g.map(t=>{let{key:r,link:a}=t;return e.createElement("link",{key:r,...a})}))}Be.displayName="FrameworkContext";var Ye=!1;function Ze(t){let{manifest:r,serverHandoffString:a,isSpaMode:o,renderMeta:n,routeDiscovery:s,ssr:i}=qe(),{router:l,static:c,staticContext:d}=ze(),{matches:u}=We(),h=Ue(s,i);n&&(n.didRenderScripts=!0);let p=Ge(u,null,o);e.useEffect(()=>{0},[]);let g=e.useMemo(()=>{let o=d?`window.__reactRouterContext = ${a};window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());`:" ",n=c?`${r.hmr?.runtime?`import ${JSON.stringify(r.hmr.runtime)};`:""}${h?"":`import ${JSON.stringify(r.url)}`};\n${p.map((e,t)=>{let a=`route${t}`,o=r.routes[e.route.id];Ie(o,`Route ${e.route.id} not found in manifest`);let{clientActionModule:n,clientLoaderModule:s,clientMiddlewareModule:i,hydrateFallbackModule:l,module:c}=o,d=[...n?[{module:n,varName:`${a}_clientAction`}]:[],...s?[{module:s,varName:`${a}_clientLoader`}]:[],...i?[{module:i,varName:`${a}_clientMiddleware`}]:[],...l?[{module:l,varName:`${a}_HydrateFallback`}]:[],{module:c,varName:`${a}_main`}];return 1===d.length?`import * as ${a} from ${JSON.stringify(c)};`:[d.map(e=>`import * as ${e.varName} from "${e.module}";`).join("\n"),`const ${a} = {${d.map(e=>`...${e.varName}`).join(",")}};`].join("\n")}).join("\n")}\n  ${h?`window.__reactRouterManifest = ${JSON.stringify(function(e,t){let{sri:r,...a}=e,o=new Set(t.state.matches.map(e=>e.route.id)),n=t.state.location.pathname.split("/").filter(Boolean),s=["/"];for(n.pop();n.length>0;)s.push(`/${n.join("/")}`),n.pop();s.forEach(e=>{let r=m(t.routes,e,t.basename);r&&r.forEach(e=>o.add(e.route.id))});let i=[...o].reduce((e,t)=>Object.assign(e,{[t]:a.routes[t]}),{});return{...a,routes:i,sri:!!r||void 0}}(r,l),null,2)};`:""}\n  window.__reactRouterRouteModules = {${p.map((e,t)=>`${JSON.stringify(e.route.id)}:route${t}`).join(",")}};\n\nimport(${JSON.stringify(r.entry.module)});`:" ";return e.createElement(e.Fragment,null,e.createElement("script",{...t,suppressHydrationWarning:!0,dangerouslySetInnerHTML:De(o),type:void 0}),e.createElement("script",{...t,suppressHydrationWarning:!0,dangerouslySetInnerHTML:De(n),type:"module",async:!0}))},[]),f=Ye?[]:(r.entry.imports.concat(Le(p,r,{includeHydrateFallback:!0})),[...new Set(v)]);var v;let x="object"===typeof r.sri?r.sri:{};return Ye?null:e.createElement(e.Fragment,null,"object"===typeof r.sri?e.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:x})}}):null,h?null:e.createElement("link",{rel:"modulepreload",href:r.url,crossOrigin:t.crossOrigin,integrity:x[r.url],suppressHydrationWarning:!0}),e.createElement("link",{rel:"modulepreload",href:r.entry.module,crossOrigin:t.crossOrigin,integrity:x[r.entry.module],suppressHydrationWarning:!0}),f.map(r=>e.createElement("link",{key:r,rel:"modulepreload",href:r,crossOrigin:t.crossOrigin,integrity:x[r],suppressHydrationWarning:!0})),g)}function Qe(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}var Xe="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{Xe&&(window.__reactRouterVersion="7.6.3")}catch(pd){}function et(t){let{basename:r,children:a,window:n}=t,s=e.useRef();null==s.current&&(s.current=o({window:n,v5Compat:!0}));let i=s.current,[l,c]=e.useState({action:i.action,location:i.location}),d=e.useCallback(t=>{e.startTransition(()=>c(t))},[c]);return e.useLayoutEffect(()=>i.listen(d),[i,d]),e.createElement(xe,{basename:r,children:a,location:l.location,navigationType:l.action,navigator:i})}var tt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rt=e.forwardRef(function(t,r){let a,{onClick:o,discover:i="render",prefetch:l="none",relative:d,reloadDocument:u,replace:h,state:m,target:p,to:g,preventScrollReset:f,viewTransition:v,...x}=t,{basename:b}=e.useContext(G),y="string"===typeof g&&tt.test(g),w=!1;if("string"===typeof g&&y&&(a=g,Xe))try{let e=new URL(window.location.href),t=g.startsWith("//")?new URL(e.protocol+g):new URL(g),r=E(t.pathname,b);t.origin===e.origin&&null!=r?g=r+t.search+t.hash:w=!0}catch(pd){s(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=function(t){let{relative:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(Y(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:o}=e.useContext(G),{hash:s,pathname:i,search:l}=re(t,{relative:r}),c=i;return"/"!==a&&(c="/"===i?a:M([a,i])),o.createHref({pathname:c,search:l,hash:s})}(g,{relative:d}),[j,N,C]=function(t,r){let a=e.useContext(Be),[o,n]=e.useState(!1),[s,i]=e.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=r,m=e.useRef(null);e.useEffect(()=>{if("render"===t&&i(!0),"viewport"===t){let e=new IntersectionObserver(e=>{e.forEach(e=>{i(e.isIntersecting)})},{threshold:.5});return m.current&&e.observe(m.current),()=>{e.disconnect()}}},[t]),e.useEffect(()=>{if(o){let e=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(e)}}},[o]);let p=()=>{n(!0)},g=()=>{n(!1),i(!1)};return a?"intent"!==t?[s,m,{}]:[s,m,{onFocus:He(l,p),onBlur:He(c,g),onMouseEnter:He(d,p),onMouseLeave:He(u,g),onTouchStart:He(h,p)}]:[!1,m,{}]}(l,x),S=function(t){let{target:r,replace:a,state:o,preventScrollReset:n,relative:s,viewTransition:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=ee(),d=Z(),u=re(t,{relative:s});return e.useCallback(e=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,r)){e.preventDefault();let r=void 0!==a?a:c(d)===c(u);l(t,{replace:r,state:o,preventScrollReset:n,relative:s,viewTransition:i})}},[d,l,u,a,o,r,t,n,s,i])}(g,{replace:h,state:m,target:p,preventScrollReset:f,relative:d,viewTransition:v});let _=e.createElement("a",{...x,...C,href:a||k,onClick:w||u?o:function(e){o&&o(e),e.defaultPrevented||S(e)},ref:Qe(r,N),target:p,"data-discover":y||"render"!==i?void 0:"true"});return j&&!y?e.createElement(e.Fragment,null,_,e.createElement(Ve,{page:k})):_});rt.displayName="Link",e.forwardRef(function(t,r){let{"aria-current":a="page",caseSensitive:o=!1,className:s="",end:i=!1,style:l,to:c,viewTransition:d,children:u,...h}=t,m=re(c,{relative:h.relative}),p=Z(),g=e.useContext(W),{navigator:f,basename:v}=e.useContext(G),x=null!=g&&function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.useContext(B);n(null!=a,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=nt("useViewTransitionState"),s=re(t,{relative:r.relative});if(!a.isTransitioning)return!1;let i=E(a.currentLocation.pathname,o)||a.currentLocation.pathname,l=E(a.nextLocation.pathname,o)||a.nextLocation.pathname;return null!=S(s.pathname,l)||null!=S(s.pathname,i)}(m)&&!0===d,b=f.encodeLocation?f.encodeLocation(m).pathname:m.pathname,y=p.pathname,w=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;o||(y=y.toLowerCase(),w=w?w.toLowerCase():null,b=b.toLowerCase()),w&&v&&(w=E(w,v)||w);const k="/"!==b&&b.endsWith("/")?b.length-1:b.length;let j,N=y===b||!i&&y.startsWith(b)&&"/"===y.charAt(k),C=null!=w&&(w===b||!i&&w.startsWith(b)&&"/"===w.charAt(b.length)),_={isActive:N,isPending:C,isTransitioning:x},I=N?a:void 0;j="function"===typeof s?s(_):[s,N?"active":null,C?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let P="function"===typeof l?l(_):l;return e.createElement(rt,{...h,"aria-current":I,className:j,ref:r,style:P,to:c,viewTransition:d},"function"===typeof u?u(_):u)}).displayName="NavLink";var at=e.forwardRef((t,r)=>{let{discover:a="render",fetcherKey:o,navigate:s,reloadDocument:i,replace:l,state:d,method:u=we,action:h,onSubmit:m,relative:p,preventScrollReset:g,viewTransition:f,...v}=t,x=lt(),b=function(t){let{relative:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:a}=e.useContext(G),o=e.useContext(J);n(o,"useFormAction must be used inside a RouteContext");let[s]=o.matches.slice(-1),i={...re(t||".",{relative:r})},l=Z();if(null==t){i.search=l.search;let e=new URLSearchParams(i.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let r=e.toString();i.search=r?`?${r}`:""}}t&&"."!==t||!s.route.index||(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index");"/"!==a&&(i.pathname="/"===i.pathname?a:M([a,i.pathname]));return c(i)}(h,{relative:p}),y="get"===u.toLowerCase()?"get":"post",w="string"===typeof h&&tt.test(h);return e.createElement("form",{ref:r,method:y,action:b,onSubmit:i?m:e=>{if(m&&m(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,r=t?.getAttribute("formmethod")||u;x(t||e.currentTarget,{fetcherKey:o,method:r,navigate:s,replace:l,state:d,relative:p,preventScrollReset:g,viewTransition:f})},...v,"data-discover":w||"render"!==a?void 0:"true"})});function ot(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nt(t){let r=e.useContext(z);return n(r,ot(t)),r}at.displayName="Form";var st=0,it=()=>`__${String(++st)}__`;function lt(){let{router:t}=nt("useSubmit"),{basename:r}=e.useContext(G),a=he("useRouteId");return e.useCallback(async function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:n,method:s,encType:i,formData:l,body:c}=_e(e,r);if(!1===o.navigate){let e=o.fetcherKey||it();await t.fetch(e,a,o.action||n,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||s,formEncType:o.encType||i,flushSync:o.flushSync})}else await t.navigate(o.action||n,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||s,formEncType:o.encType||i,replace:o.replace,state:o.state,fromRouteId:a,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,r,a])}var ct=r(8),dt=r(579);const ut=(0,e.createContext)(),ht=()=>{const t=(0,e.useContext)(ut);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},mt=t=>{let{children:r}=t;const[a,o]=(0,e.useState)(null),[n,s]=(0,e.useState)(!0);(0,e.useEffect)(()=>{(async()=>{try{const e=(0,ct.HW)();o(e)}catch(e){console.error("[AuthContext] Error loading user:",e),o(null)}finally{s(!1)}})();const e=setTimeout(()=>{s(!1)},3e3);return()=>clearTimeout(e)},[]),(0,e.useEffect)(()=>{const e=()=>{try{const e=(0,ct.HW)();o(e)}catch(e){console.error("Error handling user change:",e),o(null)}};return window.addEventListener("user:changed",e),()=>window.removeEventListener("user:changed",e)},[]);const i={user:a,loading:n,login:async(e,t)=>{try{const e=(0,ct.HW)();return o(e),{success:!0}}catch(r){return console.error("Login error:",r),{success:!1,error:r.message}}},logout:()=>{o(null),localStorage.removeItem("tag_user"),sessionStorage.removeItem("tag_user"),localStorage.removeItem("tag.currentUserId")},isAuthenticated:()=>null!==a};return(0,dt.jsx)(ut.Provider,{value:i,children:r})},pt=e=>{let{onClick:t,className:r=""}=e;return(0,dt.jsx)(rt,{to:"/",className:`flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity duration-200 ${r}`,onClick:t,children:(0,dt.jsx)("img",{src:"/TAG_Logo.png",alt:"TAG Logo",className:"h-12 w-auto"})})},gt=e=>{let{onInputChange:t,placeholder:r="Search for art, artists, or collections...",className:a=""}=e;return(0,dt.jsx)("div",{className:`${a}`,children:(0,dt.jsxs)("div",{className:"relative",children:[(0,dt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,dt.jsx)("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,dt.jsx)("input",{type:"text",placeholder:r,onChange:t,className:"block w-full pl-9 pr-3 py-2 border border-gray-200 rounded-md leading-5 bg-white placeholder-gray-400 focus:outline-none focus:placeholder-gray-300 focus:ring-1 focus:ring-gray-300 focus:border-gray-300 text-sm shadow-sm"})]})})},ft=e=>e&&e.id&&"guest"!==e.id,vt=(e,t)=>{if(ft(e)){const o=(null===t||void 0===t?void 0:t.id)||(null===e||void 0===e?void 0:e.id);if(o&&"undefined"!==typeof window)try{const e=window.localStorage.getItem(`tag.avatars.${o}`);if(e){const t=JSON.parse(e);var r;if(t&&t.avatarUrl)return console.log("[getUserAvatar] Found avatar in localStorage:",null===(r=t.avatarUrl)||void 0===r?void 0:r.substring(0,30)),t.avatarUrl}}catch(a){console.warn("[getUserAvatar] Failed to read avatar data:",a)}const n=(null===t||void 0===t?void 0:t.avatar)||e.avatar||null;return console.log("[getUserAvatar] Using fallback avatar:",null===n||void 0===n?void 0:n.substring(0,30)),n}return null},xt=t=>{let{user:r,currentMockUser:a,onClick:o,className:n=""}=t;const[s,i]=(0,e.useState)(vt(r,a)),l=ft(r);return(0,e.useEffect)(()=>{const e=e=>{const{userId:t,avatarUrl:o}=e.detail,n=(null===a||void 0===a?void 0:a.id)||(null===r||void 0===r?void 0:r.id);console.log("[UserAvatar] Avatar update event received:",{eventUserId:t,currentUserId:n,newAvatarUrl:null===o||void 0===o?void 0:o.substring(0,30)}),t===n&&(console.log("[UserAvatar] Avatar updated, setting new URL:",null===o||void 0===o?void 0:o.substring(0,30)),i(o))},t=e=>{const{userId:t}=e.detail;t===((null===a||void 0===a?void 0:a.id)||(null===r||void 0===r?void 0:r.id))&&(console.log("[UserAvatar] Avatar deleted, resetting to default"),i((null===a||void 0===a?void 0:a.avatar)||(null===r||void 0===r?void 0:r.avatar)||null))};return window.addEventListener("avatar:updated",e),window.addEventListener("avatar:deleted",t),()=>{window.removeEventListener("avatar:updated",e),window.removeEventListener("avatar:deleted",t)}},[null===a||void 0===a?void 0:a.id,null===r||void 0===r?void 0:r.id,null===a||void 0===a?void 0:a.avatar,null===r||void 0===r?void 0:r.avatar]),(0,e.useEffect)(()=>{i(vt(r,a))},[r,a]),l&&s?(0,dt.jsx)("img",{src:s,alt:(null===a||void 0===a?void 0:a.name)||(null===r||void 0===r?void 0:r.name)||"User",className:`w-8 h-8 rounded-full object-cover hover:opacity-80 transition-opacity duration-200 ${n}`,onClick:o}):(0,dt.jsx)("div",{className:`w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center cursor-pointer hover:opacity-80 transition-opacity duration-200 ${n}`,onClick:o,children:(0,dt.jsx)("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})},bt=e=>{let{children:t,onClick:r,disabled:a=!1,className:o="",size:n="md",fullWidth:s=!1}=e;const i=s?"w-full":"";return(0,dt.jsx)("button",{onClick:r,disabled:a,className:`\n        bg-purple-600 text-white font-medium hover:bg-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl\n        ${{sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-3 text-lg"}[n]}\n        ${i}\n        ${o}\n        ${a?"opacity-50 cursor-not-allowed":""}\n        rounded-lg\n      `,children:t})},yt=e=>{let{children:t,onClick:r,disabled:a=!1,className:o="",size:n="md",fullWidth:s=!1,active:i=!1}=e;const l=i?"bg-purple-100 text-purple-700 border-2 border-purple-300":"bg-white text-gray-700 border-2 border-gray-300 hover:bg-gray-50",c=s?"w-full":"";return(0,dt.jsx)("button",{onClick:r,disabled:a,className:`\n        ${l}\n        ${{sm:"px-3 py-2 text-sm",md:"px-4 py-3 text-base",lg:"px-6 py-3 text-lg"}[n]}\n        ${c}\n        ${o}\n        ${a?"opacity-50 cursor-not-allowed":""}\n        rounded-lg font-medium transition-all duration-200\n      `,children:t})};function wt(e){let{title:t,subtitle:r,children:a}=e;return(0,dt.jsxs)("div",{className:"rounded-2xl border border-gray-200 p-4",children:[(t||r)&&(0,dt.jsxs)("div",{className:"mb-2",children:[t&&(0,dt.jsx)("h3",{className:"text-base font-semibold",children:t}),r&&(0,dt.jsx)("p",{className:"text-sm text-gray-500",children:r})]}),(0,dt.jsx)("div",{children:a})]})}function kt(e){let{label:t,value:r,hint:a}=e;return(0,dt.jsxs)("div",{className:"rounded-2xl border border-gray-200 p-4 text-center",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold leading-none",children:r}),(0,dt.jsx)("div",{className:"text-sm text-gray-600",children:t}),a&&(0,dt.jsx)("div",{className:"mt-1 text-xs text-gray-400",children:a})]})}function jt(e){const{isOpen:t,onClose:r,title:a,children:o,maxWidth:n="max-w-md"}=e;return t?(0,dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,dt.jsxs)("div",{className:`bg-white rounded-lg p-6 w-full mx-4 ${n}`,children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,dt.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:a}),(0,dt.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:(0,dt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o]})}):null}const Nt={saveButton:"SaveButton_saveButton__yEdmI",unfavorited:"SaveButton_unfavorited__X4yK2",disabled:"SaveButton_disabled__Z+CE2",favoritedWork:"SaveButton_favoritedWork__HJCeZ",favoritedCollab:"SaveButton_favoritedCollab__Dsgfs",icon:"SaveButton_icon__XjoP-",outlined:"SaveButton_outlined__7aOlI",filled:"SaveButton_filled__ZTBib",text:"SaveButton_text__Z-r6l",sm:"SaveButton_sm__3QuNk",md:"SaveButton_md__Ui0eR",lg:"SaveButton_lg__7C186",savePulse:"SaveButton_savePulse__Ll8kD"};function Ct(t){const{isFavorited:r=!1,itemType:a,itemId:o,onToggle:n,className:s="",disabled:i=!1,size:l="md"}=t,[c,d]=(0,e.useState)(!1),[u,h]=(0,e.useState)(null),m=c?u:r,p=(0,e.useCallback)(async()=>{if(!i){d(!0),h(!m);try{await n(a,o,!m),d(!1),h(null)}catch(e){d(!1),h(null),console.error("Save toggle failed:",e)}}},[i,m,n,a,o]),g=(0,e.useCallback)(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),p())},[p]),f=`\n    ${Nt.saveButton}\n    ${Nt[l]}\n    ${m?"work"===a?Nt.favoritedWork:Nt.favoritedCollab:Nt.unfavorited}\n    ${i?Nt.disabled:""}\n    ${s}\n  `.trim(),v=`\n    ${Nt.icon}\n    ${m?Nt.filled:Nt.outlined}\n  `.trim();return(0,dt.jsxs)("button",{type:"button",className:f,onClick:p,onKeyDown:g,disabled:i,"aria-pressed":m,"aria-label":m?"Remove from favorites":"Add to favorites",title:m?"Remove from favorites":"Add to favorites",children:[(0,dt.jsx)("svg",{className:v,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}),(0,dt.jsx)("span",{className:Nt.text,children:m?"Saved":"Save"})]})}function St(e){const{onClick:t,text:r="Back",className:a="",showIcon:o=!0}=e;return(0,dt.jsxs)("button",{onClick:t,className:`flex items-center text-gray-600 hover:text-gray-900 transition-colors duration-200 ${a}`,children:[o&&(0,dt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),r]})}function _t(e){const{isOpen:t,title:r="Error",message:a="An error occurred.",onClose:o,className:n=""}=e;return t?(0,dt.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,dt.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity duration-300",onClick:o}),(0,dt.jsxs)("div",{className:`relative bg-white rounded-xl shadow-2xl p-8 max-w-md w-full mx-4 transform transition-all duration-300 scale-100 ${n}`,children:[(0,dt.jsx)("div",{className:"flex justify-center mb-6",children:(0,dt.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:(0,dt.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})})}),(0,dt.jsx)("h3",{className:"text-xl font-semibold text-gray-900 text-center mb-3",children:r}),(0,dt.jsx)("p",{className:"text-gray-600 text-center mb-6 leading-relaxed",children:a}),(0,dt.jsx)("div",{className:"flex justify-center",children:(0,dt.jsx)("button",{onClick:o,className:"bg-red-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-red-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:"OK"})}),(0,dt.jsx)("button",{onClick:o,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors duration-200",children:(0,dt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}):null}function It(e){const{isOpen:t,title:r="Success!",message:a="Operation completed successfully.",onClose:o,className:n=""}=e;return t?(0,dt.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,dt.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity duration-300",onClick:o}),(0,dt.jsxs)("div",{className:`relative bg-white rounded-xl shadow-2xl p-8 max-w-md w-full mx-4 transform transition-all duration-300 scale-100 ${n}`,children:[(0,dt.jsx)("div",{className:"flex justify-center mb-6",children:(0,dt.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:(0,dt.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),(0,dt.jsx)("h3",{className:"text-xl font-semibold text-gray-900 text-center mb-3",children:r}),(0,dt.jsx)("p",{className:"text-gray-600 text-center mb-6 leading-relaxed",children:a}),(0,dt.jsx)("div",{className:"flex justify-center",children:(0,dt.jsx)("button",{onClick:o,className:"bg-tag-blue text-white px-6 py-3 rounded-lg font-medium hover:bg-tag-dark-blue transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-tag-blue focus:ring-offset-2",children:"Got it!"})}),(0,dt.jsx)("button",{onClick:o,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors duration-200",children:(0,dt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}):null}function Et(e){const{message:t="Loading...",className:r="",size:a="md",color:o="blue",fullScreen:n=!1,variant:s="default"}=e,i={sm:"h-6 w-6",md:"h-12 w-12",lg:"h-16 w-16"},l={blue:"border-tag-blue",gray:"border-gray-600",green:"border-green-600",red:"border-red-600"};if("simple"===s)return(0,dt.jsx)("div",{className:`animate-spin rounded-full ${i[a]} border-b-2 ${l[o]} mx-auto ${r}`});const c=n?`flex items-center justify-center h-screen ${r}`:`flex items-center justify-center ${r}`;return(0,dt.jsx)("div",{className:c,children:(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:`animate-spin rounded-full ${i[a]} border-b-2 ${l[o]} mx-auto mb-4`}),t&&(0,dt.jsx)("p",{className:"text-gray-600",children:t})]})})}function Pt(e){const{error:t,className:r="",variant:a="default"}=e;if(!t)return null;return(0,dt.jsx)("div",{className:`${{default:"p-3 bg-red-50 border border-red-200 rounded-lg",compact:"p-2 bg-red-50 border border-red-200 rounded text-sm",full:"p-4 bg-red-50 border border-red-200 rounded-lg shadow-sm"}[a]} ${r}`,children:(0,dt.jsx)("p",{className:{default:"text-sm text-red-600",compact:"text-xs text-red-600",full:"text-base text-red-600 font-medium"}[a],children:t})})}const At={NETWORK:"NETWORK",VALIDATION:"VALIDATION",AUTHENTICATION:"AUTHENTICATION",AUTHORIZATION:"AUTHORIZATION",NOT_FOUND:"NOT_FOUND",SERVER:"SERVER",CLIENT:"CLIENT",UNKNOWN:"UNKNOWN"},Tt="LOW",Lt="MEDIUM",Mt="HIGH",Dt="CRITICAL",Rt={[At.NETWORK]:{title:"Network Error",message:"Unable to connect to the server. Please check your internet connection and try again.",userMessage:"Connection failed. Please try again."},[At.VALIDATION]:{title:"Validation Error",message:"The provided data is invalid.",userMessage:"Please check your input and try again."},[At.AUTHENTICATION]:{title:"Authentication Error",message:"You are not authenticated. Please log in.",userMessage:"Please log in to continue."},[At.AUTHORIZATION]:{title:"Authorization Error",message:"You do not have permission to perform this action.",userMessage:"You do not have permission for this action."},[At.NOT_FOUND]:{title:"Not Found",message:"The requested resource was not found.",userMessage:"The requested item was not found."},[At.SERVER]:{title:"Server Error",message:"An internal server error occurred.",userMessage:"Something went wrong. Please try again later."},[At.CLIENT]:{title:"Client Error",message:"An error occurred in the application.",userMessage:"Something went wrong. Please refresh the page."},[At.UNKNOWN]:{title:"Unknown Error",message:"An unexpected error occurred.",userMessage:"Something went wrong. Please try again."}};new class{constructor(){this.errorLog=[],this.maxLogSize=100}analyzeErrorType(e){var t,r,a,o,n,s,i,l,c,d;return e?"NetworkError"===e.name||null!==(t=e.message)&&void 0!==t&&t.includes("network")||null!==(r=e.message)&&void 0!==r&&r.includes("fetch")||null!==(a=e.message)&&void 0!==a&&a.includes("connection")?At.NETWORK:"ValidationError"===e.name||null!==(o=e.message)&&void 0!==o&&o.includes("validation")||null!==(n=e.message)&&void 0!==n&&n.includes("invalid")?At.VALIDATION:null!==(s=e.message)&&void 0!==s&&s.includes("unauthorized")||null!==(i=e.message)&&void 0!==i&&i.includes("authentication")||401===e.status?At.AUTHENTICATION:null!==(l=e.message)&&void 0!==l&&l.includes("forbidden")||null!==(c=e.message)&&void 0!==c&&c.includes("permission")||403===e.status?At.AUTHORIZATION:null!==(d=e.message)&&void 0!==d&&d.includes("not found")||404===e.status?At.NOT_FOUND:e.status>=500?At.SERVER:e.status>=400&&e.status<500?At.CLIENT:At.UNKNOWN:At.UNKNOWN}determineSeverity(e,t){switch(e){case At.CRITICAL:case At.SERVER:return Dt;case At.AUTHENTICATION:case At.AUTHORIZATION:return Mt;case At.NETWORK:case At.VALIDATION:return Lt;default:return Tt}}logError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=this.analyzeErrorType(e),o=this.determineSeverity(a,e),n={timestamp:(new Date).toISOString(),type:a,severity:o,context:t,message:e.message||"Unknown error",stack:e.stack,additionalData:r};this.errorLog.push(n),this.errorLog.length>this.maxLogSize&&this.errorLog.shift();console[o===Dt?"error":"warn"](`[${a}] ${t}:`,e.message,r),o===Dt&&console.error("Full error stack:",e.stack)}getUserMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r=this.analyzeErrorType(e),a=Rt[r];return{title:a.title,message:t||a.message,userMessage:a.userMessage,type:r}}handleError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{log:a=!0,customMessage:o=null,additionalData:n={},rethrow:s=!1}=r;a&&this.logError(e,t,n);const i=this.getUserMessage(e,o),l={success:!1,error:i.userMessage,errorType:i.type,errorTitle:i.title,errorDetails:i.message,context:t,timestamp:(new Date).toISOString()};if(s)throw l;return l}getErrorLog(){return[...this.errorLog]}clearErrorLog(){this.errorLog=[]}isRecoverable(e){const t=this.analyzeErrorType(e);return[At.NETWORK,At.VALIDATION,At.AUTHENTICATION].includes(t)}};e.Component;function $t(e){const{count:t,color:r="gray",size:a="md",variant:o="default",className:n="",...s}=e,i={gray:"bg-gray-100 text-gray-600 border-gray-200",blue:"bg-blue-100 text-blue-600 border-blue-200",green:"bg-green-100 text-green-600 border-green-200",red:"bg-red-100 text-red-600 border-red-200",yellow:"bg-yellow-100 text-yellow-600 border-yellow-200",purple:"bg-purple-100 text-purple-600 border-purple-200"},l={default:"rounded-full",outline:"rounded-full border",dot:"rounded-full w-2 h-2"};if("dot"===o)return(0,dt.jsx)("span",{className:`inline-block ${i[r]} ${l[o]} ${n}`,...s});if(!t||0===t)return null;const c=`${i[r]} ${{sm:"text-xs px-1.5 py-0.5",md:"text-xs px-2 py-1",lg:"text-sm px-2.5 py-1.5"}[a]} ${l[o]} ${n}`;return(0,dt.jsx)("span",{className:`inline-flex items-center justify-center font-medium ${c}`,...s,children:t})}function Ft(e){const{unreadCount:t=0,className:r="",size:a="md",color:o="red"}=e;if(t<=0)return null;const n=`${{sm:"w-4 h-4 text-xs",md:"w-5 h-5 text-xs",lg:"w-6 h-6 text-sm"}[a]} ${{red:"bg-red-500 text-white",blue:"bg-blue-500 text-white",green:"bg-green-500 text-white",orange:"bg-orange-500 text-white"}[o]} rounded-full flex items-center justify-center font-medium ${r}`;return(0,dt.jsx)("div",{className:n,children:(0,dt.jsx)("span",{children:(s=t,s>99?"99+":s.toString())})});var s}function Ot(e){const{progress:t=0,color:r="blue",size:a="md",className:o="",showLabel:n=!1,label:s,...i}=e,l=Math.max(0,Math.min(100,t)),c={sm:"h-1",md:"h-2",lg:"h-3"},d=`w-full bg-gray-200 rounded-full ${c[a]} ${o}`,u=`${{blue:"bg-blue-600",green:"bg-green-600",purple:"bg-purple-600",red:"bg-red-600",orange:"bg-orange-600"}[r]} ${c[a]} rounded-full transition-all duration-500`;return(0,dt.jsxs)("div",{className:"w-full",children:[n&&(0,dt.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,dt.jsx)("span",{className:"text-sm text-gray-600",children:s||"Progress"}),(0,dt.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[l,"%"]})]}),(0,dt.jsx)("div",{className:d,role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":l,"aria-label":`Progress: ${l}%`,...i,children:(0,dt.jsx)("div",{className:u,style:{width:`${l}%`}})})]})}function Ut(e){const{onFileUpload:t,id:r,children:a,className:o="",variant:n="default",accept:s=".jpg,.jpeg,.png,.gif,.pdf",multiple:i=!0,buttonText:l="Choose Files",placeholder:c="Drag and drop files here, or click to select",...d}=e,u=`${{default:"border-2 border-dashed border-gray-300 rounded-lg bg-white py-8 px-4",compact:"border-2 border-dashed border-gray-300 rounded-lg bg-white py-4 px-3",large:"border-2 border-dashed border-gray-300 rounded-lg bg-white py-12 px-6"}[n]} text-center ${o}`;return(0,dt.jsxs)("div",{className:u,...d,children:[(0,dt.jsx)("svg",{className:`${{default:"w-8 h-8",compact:"w-6 h-6",large:"w-12 h-12"}[n]} text-gray-400 mx-auto mb-3`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),a||(0,dt.jsx)("p",{className:"text-gray-600 mb-4",children:c}),(0,dt.jsx)("input",{type:"file",multiple:i,accept:s,onChange:t,className:"hidden",id:r}),(0,dt.jsx)("label",{htmlFor:r,className:`bg-tag-blue text-white ${{default:"px-4 py-2",compact:"px-3 py-1 text-sm",large:"px-6 py-3 text-lg"}[n]} rounded cursor-pointer hover:bg-tag-dark-blue transition-colors duration-200 inline-block`,children:l})]})}var zt=r(450);class Wt{constructor(){this.capabilities=this.detectCapabilities()}detectCapabilities(){const e={localStorage:this.testLocalStorage(),indexedDB:this.testIndexedDB(),fetch:this.testFetch(),cors:this.testCORS(),privateMode:this.detectPrivateMode()};return console.log("[BrowserCompatibility] Detected capabilities:",e),e}testLocalStorage(){try{const e="__test_localStorage__";localStorage.setItem(e,"test");const t="test"===localStorage.getItem(e);return localStorage.removeItem(e),t}catch(e){return console.warn("[BrowserCompatibility] localStorage not available:",e),!1}}testIndexedDB(){try{return"indexedDB"in window&&null!==indexedDB}catch(e){return console.warn("[BrowserCompatibility] IndexedDB not available:",e),!1}}testFetch(){try{return"fetch"in window&&"function"===typeof fetch}catch(e){return console.warn("[BrowserCompatibility] fetch not available:",e),!1}}testCORS(){try{return"cors"in new Request("https://example.com")}catch(e){return console.warn("[BrowserCompatibility] CORS test failed:",e),!1}}detectPrivateMode(){try{const e="__private_mode_test__";localStorage.setItem(e,"test");const t="test"===localStorage.getItem(e);return localStorage.removeItem(e),!t}catch(e){return!0}}getCompatibilityStatus(){const{localStorage:e,indexedDB:t,fetch:r,cors:a,privateMode:o}=this.capabilities;return o?{level:"warning",message:"Private browsing mode detected. Some features may be limited.",recommendations:["Use normal browsing mode for full functionality"]}:e&&t?r&&a?{level:"success",message:"All features supported.",recommendations:[]}:{level:"warning",message:"Limited network capabilities. Some images may not load.",recommendations:["Check network settings","Disable strict CORS policies"]}:{level:"error",message:"Storage not available. Core features will not work.",recommendations:["Enable cookies and storage","Use a supported browser"]}}}class Bt{constructor(){this.checker=new Wt}getStorageInterface(){const{localStorage:e,indexedDB:t}=this.checker.capabilities;return e&&t?{type:"full",localStorage:this.createSafeLocalStorage(),indexedDB:this.createSafeIndexedDB()}:e?{type:"localStorage_only",localStorage:this.createSafeLocalStorage(),indexedDB:this.createMockIndexedDB()}:{type:"memory_only",localStorage:this.createMemoryStorage(),indexedDB:this.createMockIndexedDB()}}createSafeLocalStorage(){return{getItem:e=>{try{return localStorage.getItem(e)}catch(t){return console.warn(`[SafeStorage] Failed to get ${e}:`,t),null}},setItem:(e,t)=>{try{return localStorage.setItem(e,t),!0}catch(r){return console.warn(`[SafeStorage] Failed to set ${e}:`,r),!1}},removeItem:e=>{try{return localStorage.removeItem(e),!0}catch(t){return console.warn(`[SafeStorage] Failed to remove ${e}:`,t),!1}}}}createSafeIndexedDB(){return{getImageUrl:async e=>{try{const t=await Promise.resolve().then(r.bind(r,337));return await t.default.getImageUrl(e)}catch(t){return console.warn(`[SafeStorage] Failed to get image ${e}:`,t),null}}}}createMemoryStorage(){const e=new Map;return{getItem:t=>e.get(t)||null,setItem:(t,r)=>(e.set(t,r),!0),removeItem:t=>(e.delete(t),!0)}}createMockIndexedDB(){return{getImageUrl:async e=>"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlIG5vdCBhdmFpbGFibGU8L3RleHQ+PC9zdmc+"}}}class qt{constructor(){this.checker=new Wt}async getSafeImageUrl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return this.getDefaultPlaceholder();if(e.startsWith("data:"))return e;if(!e.startsWith("http"))try{const t=await Promise.resolve().then(r.bind(r,337)),a=await t.default.getImageUrl(e);if(a)return a}catch(a){console.warn("[ImageFallback] Failed to get image from IndexedDB:",a)}if(e.startsWith("http")&&this.checker.capabilities.cors)try{if((await fetch(e,{method:"HEAD"})).ok)return e}catch(a){console.warn("[ImageFallback] CORS check failed:",a)}return t||this.getDefaultPlaceholder()}getDefaultPlaceholder(){return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlIG5vdCBhdmFpbGFibGU8L3RleHQ+PC9zdmc+"}}new Wt,new Bt,new qt;var Ht=r(179);const Gt=async()=>{try{console.log("[ResetData] Starting data reset...");const e=await Ht.IG.keys();console.log("[ResetData] Found keys:",e);const t=e.filter(e=>e.startsWith("tag.")||e.startsWith("user_")||e.startsWith("artist_")||e.startsWith("portfolio_")||e.startsWith("tag_favorites")||e.startsWith("tag_follows")||e.startsWith("tag_service_data")||e.includes("comment")||e.includes("notification")||e.includes("view")||e.includes("like")||e.includes("review")||e.includes("collaboration")||e.includes("avatar"));console.log("[ResetData] Clearing TAG keys:",t);for(const r of t)await Ht.IG.removeItem(r),console.log(`[ResetData] Removed key: ${r}`);if("undefined"!==typeof window){const e=Object.keys(localStorage).filter(e=>e.startsWith("tag.")||e.startsWith("user_")||e.startsWith("artist_")||e.startsWith("portfolio_")||e.startsWith("tag_favorites")||e.startsWith("tag_follows")||e.startsWith("tag_service_data")||e.includes("comment")||e.includes("notification")||e.includes("view")||e.includes("like")||e.includes("review")||e.includes("collaboration")||e.includes("avatar"));console.log("[ResetData] Clearing localStorage TAG keys:",e);for(const t of e)localStorage.removeItem(t),console.log(`[ResetData] Removed localStorage key: ${t}`)}return console.log("[ResetData] Data reset completed successfully"),{success:!0,message:"Data reset completed"}}catch(e){return console.error("[ResetData] Error during data reset:",e),{success:!1,error:e.message}}},Vt=()=>{try{"undefined"!==typeof window&&(localStorage.setItem("tag.currentUserId","alice"),console.log("[ResetData] Reset current user to alice"))}catch(e){console.error("[ResetData] Error resetting current user:",e)}},Jt=async()=>{try{return console.log("[ResetData] Force reinitializing all data..."),await Gt(),Vt(),"undefined"!==typeof window&&(console.log("[ResetData] Reloading page to reinitialize..."),window.location.reload()),{success:!0,message:"Reinitialization triggered"}}catch(e){return console.error("[ResetData] Error during reinitialization:",e),{success:!1,error:e.message}}};"undefined"!==typeof window&&(window.resetTAGData=Gt,window.resetTAGUser=Vt,window.forceTAGReinit=Jt,console.log("[ResetData] Reset functions added to console:"),console.log("- window.resetTAGData() - \u6e05\u9664\u6240\u6709TAG\u6570\u636e"),console.log("- window.resetTAGUser() - \u91cd\u7f6e\u5f53\u524d\u7528\u6237"),console.log("- window.forceTAGReinit() - \u5f3a\u5236\u91cd\u65b0\u521d\u59cb\u5316"));var Kt=r(420);const Yt={selectedArtist:null,selectedCollaboration:null,selectedMilestone:null,isLoading:!1,showDetail:!1,navigationHistory:[],scrollPositions:{},isInitialized:!1,comments:[{id:1,user:"Alex Chen",avatar:null,role:"Character Designer",comment:"The character sketches are looking great! I think we should focus more on the facial expressions for the next iteration.",timestamp:"2 hours ago",likes:3},{id:2,user:"Maya Rodriguez",avatar:null,role:"Art Director",comment:"Love the color palette choices. The purple hair really makes the character stand out.",timestamp:"4 hours ago",likes:5},{id:3,user:"Jordan Kim",avatar:null,role:"3D Modeler",comment:"The 3D models are coming along nicely. Can't wait to see the final renders!",timestamp:"1 day ago",likes:2}]},Zt="SET_SELECTED_ARTIST",Qt="SET_SELECTED_COLLABORATION",Xt="SET_SELECTED_MILESTONE",er="SET_LOADING",tr="SET_SHOW_DETAIL",rr="ADD_TO_HISTORY",ar="CLEAR_HISTORY",or="RESET_STATE",nr="SAVE_SCROLL_POSITION",sr="CLEAR_SCROLL_POSITION",ir="ADD_COMMENT",lr="UPDATE_COMMENT",cr="DELETE_COMMENT",dr="SET_INITIALIZED",ur=(e,t)=>{switch(t.type){case Zt:return{...e,selectedArtist:t.payload};case Qt:return{...e,selectedCollaboration:t.payload};case Xt:return{...e,selectedMilestone:t.payload};case er:return{...e,isLoading:t.payload};case tr:return{...e,showDetail:t.payload};case rr:return{...e,navigationHistory:[...e.navigationHistory,t.payload]};case ar:return{...e,navigationHistory:[]};case or:return{...Yt,isInitialized:e.isInitialized,navigationHistory:e.navigationHistory,scrollPositions:e.scrollPositions};case nr:return{...e,scrollPositions:{...e.scrollPositions,[t.payload.path]:t.payload.position}};case sr:{const{[t.payload]:r,...a}=e.scrollPositions;return{...e,scrollPositions:a}}case ir:return{...e,comments:[t.payload,...e.comments]};case lr:return{...e,comments:e.comments.map(e=>e.id===t.payload.id?t.payload:e)};case cr:return{...e,comments:e.comments.filter(e=>e.id!==t.payload)};case dr:return{...e,isInitialized:t.payload};default:return e}},hr=(0,e.createContext)(),mr=t=>{let{children:r}=t;const[a,o]=(0,e.useReducer)(ur,Yt),n={setSelectedArtist:(0,e.useCallback)(e=>o({type:Zt,payload:e}),[o]),setSelectedCollaboration:(0,e.useCallback)(e=>o({type:Qt,payload:e}),[o]),setSelectedMilestone:(0,e.useCallback)(e=>o({type:Xt,payload:e}),[o]),setLoading:(0,e.useCallback)(e=>o({type:er,payload:e}),[o]),setShowDetail:(0,e.useCallback)(e=>o({type:tr,payload:e}),[o]),addToHistory:(0,e.useCallback)(e=>o({type:rr,payload:e}),[o]),clearHistory:(0,e.useCallback)(()=>o({type:ar}),[o]),resetState:(0,e.useCallback)(()=>o({type:or}),[o]),saveScrollPosition:(0,e.useCallback)((e,t)=>o({type:nr,payload:{path:e,position:t}}),[o]),clearScrollPosition:(0,e.useCallback)(e=>o({type:sr,payload:e}),[o]),addComment:(0,e.useCallback)(e=>o({type:ir,payload:e}),[o]),updateComment:(0,e.useCallback)(e=>o({type:lr,payload:e}),[o]),deleteComment:(0,e.useCallback)(e=>o({type:cr,payload:e}),[o]),setInitialized:(0,e.useCallback)(e=>o({type:dr,payload:e}),[o])};(0,e.useEffect)(()=>{o({type:dr,payload:!0});const e=setTimeout(()=>{a.isInitialized||o({type:dr,payload:!0})},1e3);return()=>clearTimeout(e)},[]);const s=e.useMemo(()=>({state:a,actions:n}),[a,n]);return(0,dt.jsx)(hr.Provider,{value:s,children:r})},pr=()=>{const t=(0,e.useContext)(hr);if(!t)throw new Error("useAppContext must be used within an AppProvider");return t};function gr(){const{state:e}=pr();return e.isLoading?(0,dt.jsx)("div",{className:"fixed inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50",children:(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-tag-blue mx-auto mb-4"}),(0,dt.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):null}function fr(){const{pathname:t}=Z();return(0,e.useEffect)(()=>{"/"!==t&&window.scrollTo(0,0)},[t]),null}function vr(){const[t,r]=(0,e.useState)("Latest"),[a,o]=(0,e.useState)(["All"]),[n,s]=(0,e.useState)(["All"]);return(0,dt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Filters"}),(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Sort By"}),(0,dt.jsxs)("select",{value:t,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue",children:[(0,dt.jsx)("option",{value:"Latest",children:"Latest"}),(0,dt.jsx)("option",{value:"Popular",children:"Popular"}),(0,dt.jsx)("option",{value:"Trending",children:"Trending"})]})]}),(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Major"}),(0,dt.jsx)("div",{className:"space-y-2",children:["All","Visual Effects","Game Design","Animation","Illustration","Sequential Art","Graphic Design","UI/UX","Fine Art","Film","Photography","Architecture","Industrial Design","Fashion Design","Motion Design"].map(e=>(0,dt.jsxs)("label",{className:"flex items-center",children:[(0,dt.jsx)("input",{type:"checkbox",checked:a.includes(e),onChange:()=>(e=>{o("All"===e?["All"]:t=>{const r=t.filter(e=>"All"!==e);return r.includes(e)?r.filter(t=>t!==e):[...r,e]})})(e),className:"h-4 w-4 text-tag-blue focus:ring-tag-blue border-gray-300 rounded"}),(0,dt.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:e})]},e))})]}),(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Software"}),(0,dt.jsx)("div",{className:"space-y-2",children:["All","Blender","Maya","Photoshop","Illustrator","Unreal Engine","Unity","Nuke","After Effects","Cinema 4D","Zbrush","Houdini","Substance Painter","Substance Designer","Figma","Python"].map(e=>(0,dt.jsxs)("label",{className:"flex items-center",children:[(0,dt.jsx)("input",{type:"checkbox",checked:n.includes(e),onChange:()=>(e=>{s("All"===e?["All"]:t=>{const r=t.filter(e=>"All"!==e);return r.includes(e)?r.filter(t=>t!==e):[...r,e]})})(e),className:"h-4 w-4 text-tag-blue focus:ring-tag-blue border-gray-300 rounded"}),(0,dt.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:e})]},e))})]})]})}function xr(e){let{options:t,value:r,onChange:a,placeholder:o,name:n,...s}=e;return(0,dt.jsxs)("div",{className:"relative",children:[(0,dt.jsxs)("select",{value:r,onChange:a,name:n,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 pr-10 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple appearance-none",...s,children:[o&&(0,dt.jsx)("option",{value:"",children:o}),t.map((e,t)=>(0,dt.jsx)("option",{value:e.value,children:e.label},t))]}),(0,dt.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,dt.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})}function br(){return(0,dt.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center",children:(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsxs)("div",{className:"mb-8",children:[(0,dt.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"TAG"}),(0,dt.jsx)("p",{className:"text-gray-600 mt-2",children:"Loading your creative world..."})]}),(0,dt.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,dt.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full animate-bounce"}),(0,dt.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,dt.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),(0,dt.jsx)("p",{className:"text-sm text-gray-500 mt-6",children:"Initializing application..."})]})})}const yr=e=>{let{user:t,currentMockUser:r,showDropdown:a,onToggle:o,onLogoutClick:n,unreadCount:s=0,dropdownRef:i,className:l=""}=e;const c=ft(t),d=ee();return(0,dt.jsxs)("div",{className:`relative ${l}`,ref:i,"data-navbar-dropdown":!0,children:[(0,dt.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,dt.jsx)(xt,{user:t,currentMockUser:r,className:"hover:opacity-80 transition-opacity duration-200 cursor-pointer",onClick:()=>{c&&d("/artist/me")}}),c&&(0,dt.jsx)("button",{onClick:o,className:"flex items-center text-gray-700 hover:text-gray-900 transition-colors duration-200 cursor-pointer",children:(0,dt.jsx)("svg",{className:"w-4 h-4 self-center transition-transform duration-200 "+(a?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),c&&a&&(0,dt.jsxs)("div",{className:"absolute right-0 mt-2 w-40 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200",children:[(0,dt.jsxs)(rt,{to:"/settings/edit-profile",className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200",children:[(0,dt.jsxs)("svg",{className:"w-4 h-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Settings"]}),(0,dt.jsxs)(rt,{to:"/notifications",className:"flex items-center justify-between w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200",children:[(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)("svg",{className:"w-4 h-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),(0,dt.jsx)("span",{children:"Notifications"})]}),(0,dt.jsx)(Ft,{unreadCount:s})]}),(0,dt.jsxs)("button",{onClick:n,className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 border-t border-gray-100",children:[(0,dt.jsx)("svg",{className:"w-4 h-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})]})]})},wr=t=>{const[r,a]=(0,e.useState)(0),[o,n]=(0,e.useState)(null);(0,e.useEffect)(()=>{n((0,ct.HW)())},[]);const[s,i]=(0,e.useState)(!1),l=async()=>{try{const e=await zt.lY.getUserNotifications((0,ct.WR)());if(e.success){const t=(e.data||[]).filter(e=>!e.isRead).length;a(t)}else console.error("Error loading unread notifications:",e.error),a(0)}catch(e){console.error("Error loading unread notifications:",e),a(0)}};return(0,e.useEffect)(()=>{let e=!0;(async()=>{e&&await l()})();const t=t=>{var r;const a=null===t||void 0===t||null===(r=t.detail)||void 0===r?void 0:r.userId;a&&a!==(0,ct.WR)()||e&&setTimeout(()=>{e&&l()},100)},r=t=>{var r;(null===t||void 0===t||null===(r=t.detail)||void 0===r?void 0:r.userId)&&e&&(n((0,ct.HW)()),setTimeout(()=>{e&&l()},100))};return window.addEventListener("notif:unreadChanged",t),window.addEventListener("user:changed",r),()=>{e=!1,window.removeEventListener("notif:unreadChanged",t),window.removeEventListener("user:changed",r)}},[]),(0,e.useEffect)(()=>{const e=e=>{if(s){e.target.closest("[data-navbar-dropdown]")||i(!1)}};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[s]),{unreadCount:r,currentMockUser:o,showDropdown:s,setUnreadCount:a,setCurrentMockUser:n,setShowDropdown:i,loadUnreadCount:l,toggleDropdown:()=>i(!s),closeDropdown:()=>i(!1)}},kr=()=>{const e=ee(),t=Z(),{actions:r,state:a}=pr(),o=e=>{const t=a.scrollPositions[e];void 0!==t&&setTimeout(()=>{window.scrollTo({top:t,behavior:"instant"})},100)};return{navigateToWork:function(a){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"gallery";r.setLoading(!0),r.addToHistory({path:t.pathname,from:o}),"/"===t.pathname&&r.saveScrollPosition("/",window.scrollY),setTimeout(()=>{r.setShowDetail(!0),r.setLoading(!1),e(`/work/${a}`,{state:{from:o}}),window.scrollTo(0,0)},300)},navigateToArtist:function(a){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"gallery",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Artists";r.setLoading(!0),r.setSelectedArtist(a),r.addToHistory({path:t.pathname,from:o,activeTab:n}),"/"===t.pathname&&r.saveScrollPosition("/",window.scrollY),setTimeout(()=>{r.setLoading(!1);e(`/artist/${a}`),window.scrollTo(0,0)},300)},navigateToTAGMe:()=>{r.saveScrollPosition("/tag",window.scrollY),r.addToHistory({from:"tagme",path:"/tagme",activeTab:"Collaborations"}),e("/tagme"),setTimeout(()=>{o("/tagme")},100)},navigateToMilestone:function(a){"/tagme"===t.pathname&&r.saveScrollPosition("/tagme-Milestones",window.scrollY),r.setLoading(!0),r.setSelectedMilestone(a),r.addToHistory({path:t.pathname,from:"tagme",activeTab:"Milestones"}),setTimeout(()=>{r.setShowDetail(!0),r.setLoading(!1);const t=`/tagme/milestone/${a.id}`;e(t,{state:{milestone:a}}),window.scrollTo(0,0)},300)},navigateToCollaboration:a=>{"/tagme"===t.pathname&&r.saveScrollPosition("/tagme-Collaborations",window.scrollY),r.setLoading(!0),r.setSelectedCollaboration(a),r.addToHistory({path:t.pathname,from:"tagme",activeTab:"Collaborations"});const o=`/tagme/collaboration/${a.id}`;e(o,{state:{project:a}}),setTimeout(()=>{r.setLoading(!1)},100)},goBack:()=>{const t=a.navigationHistory.length>0?a.navigationHistory[a.navigationHistory.length-1]:{path:"/",from:"home"};"/tagme"===t.path||"/"===t.path?(r.setLoading(!0),e(-1),setTimeout(()=>{r.setLoading(!1)},100)):e(-1)},goHome:()=>{r.resetState(),e("/"),window.scrollTo(0,0)},navigateToGallery:()=>{if(r.addToHistory({path:t.pathname,from:"gallery",fromNavbar:!0,activeTab:"Works"}),"/"===t.pathname){console.log("[Navigation] Already on homepage, scrolling to gallery section");const e=document.querySelectorAll("section");console.log("[Navigation] All sections found:",e.length),e.forEach((e,t)=>{var r;console.log(`[Navigation] Section ${t}:`,{className:e.className,dataSection:e.getAttribute("data-section"),textContent:(null===(r=e.textContent)||void 0===r?void 0:r.substring(0,50))+"..."})});const t=document.querySelector('[data-section="gallery"]');if(console.log("[Navigation] Gallery section found:",!!t),t){const e=t.getBoundingClientRect();console.log("[Navigation] Gallery section position:",{top:e.top,bottom:e.bottom,height:e.height});const r=window.pageYOffset+e.top-80;console.log("[Navigation] Scrolling to position:",r),window.scrollTo({top:r,behavior:"smooth"}),console.log("[Navigation] Scrolled to gallery section")}else console.warn("[Navigation] Gallery section not found, scrolling to top"),window.scrollTo(0,0)}else console.log("[Navigation] Navigating to homepage first, then scrolling to gallery"),r.resetState(),e("/"),setTimeout(()=>{const e=document.querySelector('[data-section="gallery"]');if(e){const t=e.getBoundingClientRect(),r=window.pageYOffset+t.top-80;window.scrollTo({top:r,behavior:"smooth"}),console.log("[Navigation] Scrolled to gallery section after navigation")}else console.warn("[Navigation] Gallery section not found after navigation"),window.scrollTo(0,0)},300)},scrollToElement:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64;setTimeout(()=>{const r=document.querySelector(e);if(r){const e=r.getBoundingClientRect(),a=window.pageYOffset+e.top-t;window.scrollTo({top:a,behavior:"instant"})}else window.scrollTo(0,0)},100)},saveCurrentScrollPosition:()=>{const e=window.pageYOffset;r.saveScrollPosition(t.pathname,e)},restoreScrollPosition:o}},jr=t=>{let{state:r,setters:a,user:o}=t;const n=ee(),{navigateToTAGMe:s,goHome:i,navigateToGallery:l,navigateToArtist:c}=kr(),{logout:d}=ht(),u=(0,e.useCallback)(e=>{if(e.stopPropagation(),!ft(o))return void n("/login");const t=e.target,s="IMG"===t.tagName||t.closest("img");"svg"===t.tagName||t.closest("svg");s?(console.log("\ud83d\udd0d [handleDropdownToggle] Avatar clicked, navigating to /me"),n("/me")):a.setShowDropdown(!r.showDropdown)},[o,r.showDropdown,a,n,c]),h=(0,e.useCallback)(()=>{a.setShowDropdown(!1),n("/settings/edit-profile")},[a,n]),m=(0,e.useCallback)(()=>{a.setShowDropdown(!1),n("/notifications")},[a,n]),p=(0,e.useCallback)(()=>{a.setShowDropdown(!1),d(),n("/login")},[a,d,n]),g=(0,e.useCallback)(()=>{n("/upload/guidelines")},[n]),f=(0,e.useCallback)(()=>{s()},[s]),v=(0,e.useCallback)(()=>{l()},[l]);return{handleLogoClick:(0,e.useCallback)(()=>{i()},[i]),handleUploadClick:g,handleTAGMeClick:f,handleGalleryClick:v,handleSearchInput:(0,e.useCallback)(e=>{const t=e.target.value;console.log("Search input:",t)},[]),handleDropdownToggle:u,handleSettingsClick:h,handleNotificationsClick:m,handleLogoutClick:p}},Nr=()=>{const{user:t,loading:r}=ht(),a=(0,e.useRef)(null),o=wr(t),n=jr({state:o,setters:{setShowDropdown:o.setShowDropdown,setUnreadCount:o.setUnreadCount,setCurrentMockUser:o.setCurrentMockUser},user:t}),s=t||{id:"guest",name:"Guest",avatar:null};return(0,dt.jsx)("nav",{className:"fixed top-0 left-0 right-0 bg-white shadow-sm z-50",children:(0,dt.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,dt.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,dt.jsx)(pt,{onClick:n.handleLogoClick}),(0,dt.jsx)("div",{className:"absolute left-1/2 transform -translate-x-1/2",children:(0,dt.jsxs)("button",{onClick:n.handleUploadClick,className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-full text-sm font-semibold hover:from-blue-600 hover:to-purple-600 transition-all duration-200 flex items-center shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","aria-label":"Upload Work",children:[(0,dt.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Upload Work"]})}),(0,dt.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,dt.jsx)("button",{onClick:n.handleGalleryClick,onMouseDown:e=>{1===e.button&&(e.preventDefault(),window.open("/","_blank"))},className:"bg-tag-blue text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700 transition-colors duration-200 min-w-[80px] text-center",children:"Gallery"}),(0,dt.jsx)(rt,{to:"/tagme",className:"bg-tag-purple text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-purple-700 transition-colors duration-200 min-w-[80px] text-center",children:"TAGMe"}),!r&&(0,dt.jsx)(yr,{user:s,currentMockUser:o.currentMockUser,showDropdown:o.showDropdown,onToggle:n.handleDropdownToggle,onSettingsClick:n.handleSettingsClick,onNotificationsClick:n.handleNotificationsClick,onLogoutClick:n.handleLogoutClick,unreadCount:o.unreadCount,dropdownRef:a}),r&&(0,dt.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-200 animate-pulse"})]})]})})})},Cr=e=>[{id:1,title:"Brand Identity with Studio X",image:null},{id:2,title:"Interactive Web Experience",image:null},{id:3,title:"3D Character Animation",image:null}].find(t=>t.id.toString()===e),Sr=e=>{let{favorite:t,isOwnProfile:r=!1,onRemove:a}=e;ee();return(0,dt.jsxs)("div",{className:"relative aspect-[4/3] bg-tag-purple rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 overflow-hidden",children:[(0,dt.jsx)(rt,{to:`/collab/${t.itemId}`,className:"block w-full h-full",children:(0,dt.jsx)("img",{src:(e=>{console.log("[FavoriteCollabCard] Getting image for itemId:",e,"type:",typeof e);const t=Cr(e),r=(e=>{const t=Cr(e);return(null===t||void 0===t?void 0:t.image)||null})(e);return console.log("[FavoriteCollabCard] Selected collaboration:",t),console.log("[FavoriteCollabCard] Selected image URL:",r),r})(t.itemId),alt:"Collaboration",className:"w-full h-full object-cover"})}),(0,dt.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-2 bg-tag-purple"}),r&&(0,dt.jsx)("button",{onClick:e=>{e.stopPropagation(),a()},className:"absolute top-2 right-2 w-8 h-8 bg-white/80 hover:bg-white rounded-full flex items-center justify-center transition-colors duration-200",title:"Remove from favorites",children:(0,dt.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},_r=()=>{ee();const e="No favorites yet",t="Start Exploring";return(0,dt.jsxs)("div",{className:"text-center py-12",children:[(0,dt.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,dt.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})}),(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-6",children:e}),(0,dt.jsx)(rt,{to:"/",className:"inline-block px-6 py-3 bg-tag-blue text-white rounded-lg hover:bg-blue-700 transition-colors duration-200",children:t})]})},Ir=()=>(0,dt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,t)=>(0,dt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden animate-pulse",children:[(0,dt.jsx)("div",{className:"w-full h-48 bg-gray-200"}),(0,dt.jsxs)("div",{className:"p-4",children:[(0,dt.jsx)("div",{className:"h-5 bg-gray-200 rounded mb-2"}),(0,dt.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-3"}),(0,dt.jsxs)("div",{className:"flex items-center mb-3",children:[(0,dt.jsx)("div",{className:"w-6 h-6 bg-gray-200 rounded-full mr-2"}),(0,dt.jsx)("div",{className:"h-4 bg-gray-200 rounded w-24"})]}),(0,dt.jsxs)("div",{className:"space-y-2 mb-3",children:[(0,dt.jsx)("div",{className:"h-3 bg-gray-200 rounded"}),(0,dt.jsx)("div",{className:"h-3 bg-gray-200 rounded w-5/6"})]}),(0,dt.jsxs)("div",{className:"flex gap-1 mb-3",children:[(0,dt.jsx)("div",{className:"w-12 h-6 bg-gray-200 rounded-full"}),(0,dt.jsx)("div",{className:"w-16 h-6 bg-gray-200 rounded-full"}),(0,dt.jsx)("div",{className:"w-14 h-6 bg-gray-200 rounded-full"})]}),(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsxs)("div",{className:"flex space-x-4",children:[(0,dt.jsx)("div",{className:"w-12 h-4 bg-gray-200 rounded"}),(0,dt.jsx)("div",{className:"w-16 h-4 bg-gray-200 rounded"})]}),(0,dt.jsx)("div",{className:"w-16 h-8 bg-gray-200 rounded"})]})]})]},t))});var Er=r(200);const Pr=()=>{const[t,r]=(0,e.useState)({}),[a,o]=(0,e.useState)(!0),[n,s]=(0,e.useState)(null);(0,e.useEffect)(()=>{(async()=>{try{o(!0),s(null);const e=await(0,Er.S5)();if(e.success){const t={};e.data.forEach(e=>{var r;e&&e.id&&(t[e.id]={id:e.id,title:e.title||"Untitled",artist:(null===(r=e.profiles)||void 0===r?void 0:r.full_name)||"Unknown Artist",image:e.thumbnailPath||e.imagePaths&&e.imagePaths[0]||"",category:e.category||"design",tags:e.tags||[],description:e.description||"",createdAt:e.createdAt||(new Date).toISOString()})}),r(t),console.log("[useWorkData] Loaded works data:",t)}else s(e.error||"Failed to load works data"),console.error("[useWorkData] Failed to load works:",e.error)}catch(n){console.error("[useWorkData] Error loading works:",n),s(n.message||"Failed to load works data")}finally{o(!1)}})()},[]);return{worksData:t,loading:a,error:n,getWorkById:e=>{if(!e)return null;const r=t[e];if(r)return console.log("[useWorkData] Found real work data for:",e,r),r;const a=[{id:1,title:"Explosive Energy",artist:"Alex Chen",image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=400&fit=crop",category:"Visual Effects"},{id:2,title:"Dark Knight",artist:"Sarah Kim",image:"https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400&h=400&fit=crop",category:"Game Design"},{id:3,title:"Mobile UI Design",artist:"Mike Johnson",image:"https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=400&h=400&fit=crop",category:"UI/UX"},{id:4,title:"Enchanted Forest",artist:"Emma Wilson",image:"https://images.unsplash.com/photo-1489599435384-d5f1a131c7dc?w=400&h=400&fit=crop",category:"Illustration"},{id:5,title:"Digital Sculpture",artist:"David Lee",image:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=400&fit=crop",category:"Fine Art"},{id:6,title:"Brand Identity",artist:"Lisa Wang",image:"https://images.unsplash.com/photo-1541961017774-22349e4a1262?w=400&h=400&fit=crop",category:"Graphic Design"}],o=a.find(t=>t.id.toString()===e);if(o)return console.log("[useWorkData] Found default work for simple ID:",e,o),o;if(e&&e.startsWith("mock_")){const t=a[Math.abs(e.split("_")[1]?parseInt(e.split("_")[1]):0)%a.length],r={id:e,title:t.title,artist:t.artist,image:t.image,category:t.category};return console.log("[useWorkData] Created mock work for complex ID:",e,r),r}return console.warn("[useWorkData] No work found for itemId:",e),null}}},Ar=e=>{let{favorite:t,isOwnProfile:r=!1,onRemove:a}=e;ee();const{getWorkById:o,loading:n}=Pr(),s=o(t.itemId);return(0,dt.jsxs)("div",{className:"relative aspect-[4/3] bg-tag-blue rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 overflow-hidden",children:[(0,dt.jsx)(rt,{to:`/work/${t.itemId}`,className:"block w-full h-full",children:(0,dt.jsx)("img",{src:(null===s||void 0===s?void 0:s.image)||"https://images.unsplash.com/photo-1541961017774-22349e4a1262?w=400&h=400&fit=crop",alt:(null===s||void 0===s?void 0:s.title)||"Work",className:"w-full h-full object-cover",onError:e=>{console.error("[FavoriteWorkCard] Image failed to load:",e.target.src),e.target.src="https://images.unsplash.com/photo-1541961017774-22349e4a1262?w=400&h=400&fit=crop"},onLoad:()=>console.log("[FavoriteWorkCard] Image loaded successfully:",null===s||void 0===s?void 0:s.image)})}),(0,dt.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-2 bg-tag-blue"}),r&&(0,dt.jsx)("button",{onClick:e=>{e.stopPropagation(),a()},className:"absolute top-2 right-2 w-8 h-8 bg-white/80 hover:bg-white rounded-full flex items-center justify-center transition-colors duration-200",title:"Remove from favorites",children:(0,dt.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})};r(945);const Tr=t=>{let{isOwnProfile:r=!1}=t;const{favorites:a,loading:o,error:n,pagination:s,handleLoadMore:i,handleRemoveFavorite:l}=(()=>{const[t,r]=(0,e.useState)([]),[a,o]=(0,e.useState)(!0),[n,s]=(0,e.useState)(null),[i,l]=(0,e.useState)({cursor:null,hasMore:!1,total:0}),c=(0,e.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{o(!0),s(null);const t={type:"all",cursor:e?null:i.cursor,limit:12};console.log("[Favorites] Loading favorites with params:",t);const a=await zt.zF.getFavorites(t);if(a.success){const t=a.data.items;console.log("[Favorites] Loaded favorites:",t),r(e?t:e=>[...e,...t]),l({cursor:a.data.pagination.cursor,hasMore:a.data.pagination.hasMore,total:a.data.pagination.total})}else s("Failed to load favorites")}catch(t){console.error("Error loading favorites:",t),s(t.message||"Failed to load favorites")}finally{o(!1)}},[i.cursor]);(0,e.useEffect)(()=>{c(!0)},[c]);const d=(0,e.useCallback)(()=>{!a&&i.hasMore&&c(!1)},[a,i.hasMore,c]),u=(0,e.useCallback)(e=>{r(t=>t.filter(t=>t.id!==e)),l(e=>({...e,total:Math.max(0,e.total-1)}))},[]);return{favorites:t,loading:a,error:n,pagination:i,handleLoadMore:d,handleRemoveFavorite:u,refresh:()=>c(!0)}})(),{handleRemoveFavorite:c}={handleRemoveFavorite:(0,e.useCallback)(async e=>{try{const t=await zt.zF.removeFavoriteById(e);return t.success?(console.log("Favorite removed successfully"),!0):(console.error("Failed to remove favorite:",t.error),!1)}catch(n){return console.error("Error removing favorite:",n),!1}},[]),batchCheckFavoriteStatus:(0,e.useCallback)(async e=>{try{const t=e.map(e=>({itemType:e.type,itemId:e.id})),r=await zt.zF.batchCheckFavoriteStatus(t);return r.success?r.data:(console.error("Failed to check favorite status:",r.error),{})}catch(n){return console.error("Error checking favorite status:",n),{}}},[])},{loading:d}=Pr(),u=e=>"work"===e.itemType?(0,dt.jsx)(Ar,{favorite:e,isOwnProfile:r,onRemove:async()=>{await c(e.id)&&l(e.id)}},e.id):"collaboration"===e.itemType?(0,dt.jsx)(Sr,{favorite:e,isOwnProfile:r,onRemove:async()=>{await c(e.id)&&l(e.id)}},e.id):null;return(0,dt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,dt.jsx)("div",{className:"mb-6",children:(0,dt.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Favorites"})}),o||d?(0,dt.jsx)(Ir,{}):n?(0,dt.jsxs)("div",{className:"text-center py-8",children:[(0,dt.jsxs)("p",{className:"text-red-600",children:["Failed to load favorites: ",n]}),(0,dt.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-tag-blue text-white rounded-lg hover:bg-blue-700",children:"Retry"})]}):0===a.length?(0,dt.jsx)(_r,{}):(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(u)}),s.hasMore&&(0,dt.jsx)("div",{className:"text-center mt-8",children:(0,dt.jsx)("button",{onClick:i,disabled:o,className:"px-6 py-3 bg-tag-blue text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Loading...":"Load More"})})]})]})};var Lr=r(560);const Mr=e=>{let{artist:t,artworks:r=[],isFollowing:a,followersCount:o,followingCount:n,isOwnProfile:s,onBackClick:i,onEditProfileClick:l,onPreviewAsVisitorClick:c,onBackToOwnerViewClick:d,toggleFollow:u,onFollowersClick:h,onFollowingClick:m,className:p=""}=e;return(0,dt.jsxs)("div",{className:`${p}`,children:[(0,dt.jsx)("div",{className:"border-b border-gray-200",children:(0,dt.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,dt.jsxs)("button",{onClick:i,className:"flex items-center py-4 text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[(0,dt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Gallery"]})})}),(0,dt.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-8",children:(0,dt.jsx)("div",{className:"pb-8 border-b border-gray-200",children:(0,dt.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-start",children:[(0,dt.jsxs)("div",{className:"flex items-center mb-6 lg:mb-0",children:[(0,dt.jsx)("img",{src:t.avatar,alt:t.name,className:"w-20 h-20 rounded-full mr-6"}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:t.name}),(0,dt.jsx)("div",{className:"flex items-center gap-3",children:(0,dt.jsx)("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:t.title})})]})]}),(0,dt.jsxs)("div",{className:"flex items-center gap-8 mb-6 lg:mb-0 lg:ml-16",children:[(0,dt.jsxs)("div",{className:"text-left",children:[(0,dt.jsx)("div",{className:"text-xl font-bold text-gray-900",children:r.length}),(0,dt.jsx)("div",{className:"text-sm text-gray-600",children:"Works"})]}),(0,dt.jsxs)("div",{className:"text-left cursor-pointer hover:opacity-80 transition-opacity duration-200",onClick:m,role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),m())},children:[(0,dt.jsx)("div",{className:"text-xl font-bold text-gray-900",children:n||0}),(0,dt.jsx)("div",{className:"text-sm text-gray-600",children:"Following"})]}),(0,dt.jsxs)("div",{className:"text-left cursor-pointer hover:opacity-80 transition-opacity duration-200",onClick:h,role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),h())},children:[(0,dt.jsx)("div",{className:"text-xl font-bold text-gray-900",children:o}),(0,dt.jsx)("div",{className:"text-sm text-gray-600",children:"Followers"})]})]}),(0,dt.jsx)("div",{className:"flex items-center gap-3 lg:ml-auto",children:s?(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsxs)("button",{onClick:c,className:"px-4 py-2 rounded-md font-medium transition-colors duration-200 bg-blue-500 text-white hover:bg-blue-600 flex items-center gap-2",children:[(0,dt.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Preview as Visitor"]}),(0,dt.jsxs)("button",{onClick:l,className:"px-4 py-2 rounded-md font-medium transition-colors duration-200 bg-purple-500 text-white hover:bg-purple-600 flex items-center gap-2",children:[(0,dt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit Profile"]})]}):(0,dt.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),u()},className:(0,Lr.fO)(a),children:a?"Following":"Follow"})})]})})})]})},Dr=e=>{if(!e||!e.trim())return!1;if("#"===e||"http://#"===e||"https://#"===e)return!1;try{const t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch{return!1}},Rr=(e,t)=>{Dr(t)?window.open(t,"_blank","noopener,noreferrer"):console.warn(`Invalid ${e} URL:`,t)},$r=e=>{var t,r,a,o,n;let{artist:s,onSocialLinkClick:i,className:l=""}=e;return console.log("[ArtistSidebar] Artist data:",{artistId:null===s||void 0===s?void 0:s.id,artistName:null===s||void 0===s?void 0:s.name,socialLinks:null===s||void 0===s?void 0:s.socialLinks}),(0,dt.jsx)("div",{className:`lg:w-80 flex-shrink-0 ${l}`,children:(0,dt.jsxs)("div",{className:"pb-8",children:[(0,dt.jsxs)("div",{className:"mb-6",children:[s.school&&(0,dt.jsxs)("div",{className:"mb-3",children:[(0,dt.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"School:"}),(0,dt.jsx)("p",{className:"text-gray-600 mt-1",children:s.school})]}),s.pronouns&&(0,dt.jsxs)("div",{className:"mb-3",children:[(0,dt.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Pronouns:"}),(0,dt.jsx)("p",{className:"text-gray-600 mt-1",children:s.pronouns})]}),(s.majors&&s.majors.length>0||s.minors&&s.minors.length>0)&&(0,dt.jsxs)("div",{className:"mb-3",children:[(0,dt.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Major & Minor:"}),(0,dt.jsxs)("div",{className:"flex flex-wrap gap-1 mt-1",children:[null===(t=s.majors)||void 0===t?void 0:t.map((e,t)=>(0,dt.jsx)("span",{className:"bg-gray-100 text-gray-700 text-xs px-2 py-1 rounded-full",children:e},`major-${t}`)),null===(r=s.minors)||void 0===r?void 0:r.map((e,t)=>(0,dt.jsx)("span",{className:"bg-gray-100 text-gray-700 text-xs px-2 py-1 rounded-full",children:e},`minor-${t}`))]})]})]}),(0,dt.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"About"}),(0,dt.jsx)("p",{className:"text-gray-600 mb-4",children:s.bio}),(0,dt.jsx)("h4",{className:"font-bold text-gray-900 mb-2",children:"Skills"}),(0,dt.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:s.skills.map((e,t)=>(0,dt.jsx)("span",{className:"bg-gray-100 text-gray-700 text-sm px-3 py-1 rounded-full",children:e},t))}),(0,dt.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"Connect"}),(0,dt.jsxs)("div",{className:"flex gap-3",children:[(null===(a=s.socialLinks)||void 0===a?void 0:a.discord)&&Dr(s.socialLinks.discord)&&(0,dt.jsx)("button",{onClick:()=>Rr("discord",s.socialLinks.discord),className:"text-gray-600 hover:text-gray-900 transition-colors duration-200",title:"Discord",children:(0,dt.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.019 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1568 2.4189Z"})})}),(null===(o=s.socialLinks)||void 0===o?void 0:o.instagram)&&Dr(s.socialLinks.instagram)&&(0,dt.jsx)("button",{onClick:()=>Rr("instagram",s.socialLinks.instagram),className:"text-gray-600 hover:text-gray-900 transition-colors duration-200",title:"Instagram",children:(0,dt.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),(null===(n=s.socialLinks)||void 0===n?void 0:n.portfolio)&&Dr(s.socialLinks.portfolio)&&(0,dt.jsx)("button",{onClick:()=>Rr("portfolio",s.socialLinks.portfolio),className:"text-gray-600 hover:text-gray-900 transition-colors duration-200",title:"Portfolio",children:(0,dt.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})})})]}),s.socialLinks.otherLinks&&s.socialLinks.otherLinks.length>0&&s.socialLinks.otherLinks.some(e=>Dr(e.url))&&(0,dt.jsxs)("div",{className:"mt-4",children:[(0,dt.jsx)("h4",{className:"font-bold text-gray-900 mb-2",children:"Other Websites"}),(0,dt.jsx)("div",{className:"space-y-2",children:s.socialLinks.otherLinks.filter(e=>Dr(e.url)).map(e=>(0,dt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,dt.jsx)("div",{className:"flex-shrink-0",children:(0,dt.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})})}),(0,dt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,dt.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.label}),(0,dt.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-800 transition-colors duration-200",children:e.url})]})]},e.id))})]})]})})},Fr=t=>{let{artworks:r,onArtworkClick:a,className:o="",isOwnProfile:n=!1}=t;const s=ee(),[i,l]=(0,e.useState)(null);return(0,dt.jsxs)("div",{className:`pb-8 border-b border-gray-200 bg-blue-50 rounded-lg p-6 ${o}`,children:[(0,dt.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-6",children:"Portfolio"}),(0,dt.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(e=>(0,dt.jsx)("div",{onClick:()=>a(e),className:"group cursor-pointer relative",onMouseEnter:()=>l(e.id),onMouseLeave:()=>l(null),children:(0,dt.jsxs)("div",{className:"relative overflow-hidden rounded-lg",children:[(0,dt.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),n&&i===e.id&&(0,dt.jsx)("button",{onClick:t=>(e=>{e.stopPropagation(),s("/settings/edit-profile")})(t,e.id),className:"absolute top-2 right-2 p-2 bg-white bg-opacity-90 hover:bg-opacity-100 text-gray-600 hover:text-blue-600 rounded-full transition-all duration-200 shadow-md z-10",title:"Edit Profile",children:(0,dt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,dt.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-300 flex items-end",children:(0,dt.jsxs)("div",{className:"p-3 w-full transform translate-y-full group-hover:translate-y-0 transition-transform duration-300",children:[(0,dt.jsx)("h4",{className:"text-white font-medium text-sm",children:e.title}),(0,dt.jsx)("p",{className:"text-gray-200 text-xs",children:e.category})]})})]})},e.id))})]})},Or=e=>{let{collaboration:t,isExpanded:r,onToggle:a,className:o=""}=e;return(0,dt.jsxs)("div",{className:`bg-white rounded-lg overflow-hidden shadow-sm ${o}`,children:[(0,dt.jsx)("div",{onClick:()=>a(t.id),className:"p-4 cursor-pointer hover:bg-gray-50 transition-colors duration-200",children:(0,dt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,dt.jsx)("div",{className:"flex-shrink-0",children:(0,dt.jsx)("img",{src:t.image,alt:t.title,className:"w-16 h-16 object-cover rounded-lg"})}),(0,dt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,dt.jsx)("h4",{className:"font-medium text-gray-900 mb-1",children:t.title}),(0,dt.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:t.dateRange}),(0,dt.jsx)("div",{className:"flex items-center gap-2",children:(0,dt.jsxs)("span",{className:(0,Lr.lx)(t.isInitiator),children:[t.role,t.isInitiator&&(0,dt.jsx)("span",{className:"ml-1 text-purple-600",children:"\u2022 Initiator"})]})})]}),(0,dt.jsx)("div",{className:"flex-shrink-0",children:(0,dt.jsx)("svg",{className:"w-5 h-5 text-gray-400 transition-transform duration-200 "+(r?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})}),r&&(0,dt.jsx)("div",{className:"border-t border-gray-200 bg-gray-50",children:(0,dt.jsxs)("div",{className:"p-4 space-y-4",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h5",{className:"text-sm font-medium text-gray-900 mb-2",children:"Responsibilities"}),(0,dt.jsx)("p",{className:"text-sm text-gray-700 leading-relaxed",children:t.responsibility})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h5",{className:"text-sm font-medium text-gray-900 mb-2",children:"Team Feedback"}),(0,dt.jsx)("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:(0,dt.jsxs)("div",{className:"flex items-start gap-3",children:[(0,dt.jsx)("div",{className:"flex-shrink-0",children:(0,dt.jsx)("img",{src:t.partnerAvatar,alt:t.teamFeedback.feedbacker,className:"w-8 h-8 rounded-full"})}),(0,dt.jsxs)("div",{className:"flex-1",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,dt.jsx)("span",{className:"text-sm font-medium text-gray-900",children:t.teamFeedback.feedbacker}),(0,dt.jsx)("span",{className:"text-xs text-gray-500",children:t.teamFeedback.feedbackerRole})]}),(0,dt.jsx)("p",{className:"text-sm text-gray-700 leading-relaxed",children:t.teamFeedback.content})]})]})})]})]})})]})},Ur=e=>{let{collaborations:t,expandedCardId:r,onCollaborationToggle:a,className:o=""}=e;return(0,dt.jsxs)("div",{className:`pt-8 mt-8 bg-purple-50 rounded-lg p-6 ${o}`,children:[(0,dt.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-6",children:"Collaborations"}),(0,dt.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,dt.jsx)(Or,{collaboration:e,isExpanded:r===e.id,onToggle:a},e.id))})]})},zr=e=>{let{id:t,onBackClick:r,className:a=""}=e;return(0,dt.jsx)("div",{className:`bg-white min-h-screen flex items-center justify-center ${a}`,children:(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"\u827a\u672f\u5bb6\u672a\u627e\u5230"}),(0,dt.jsxs)("p",{className:"text-gray-600 mb-6",children:["\u62b1\u6b49\uff0c\u627e\u4e0d\u5230ID\u4e3a ",t," \u7684\u827a\u672f\u5bb6\u3002"]}),(0,dt.jsx)("button",{onClick:r,className:"bg-blue-500 text-white px-6 py-2 rounded-md hover:bg-blue-600 transition-colors duration-200",children:"\u8fd4\u56de\u753b\u5eca"})]})})},Wr=t=>{let{type:a,targetId:o,onClose:n,isOwnProfile:s=!1,currentUserId:i="alice"}=t;const l=ee(),[c,d]=(0,e.useState)([]),[u,h]=(0,e.useState)(!0),[m,p]=(0,e.useState)(null),[g,f]=(0,e.useState)(!1),[v,x]=(0,e.useState)(null),[b,y]=(0,e.useState)(""),[w,k]=(0,e.useState)(null),[j,N]=(0,e.useState)({}),C=(0,e.useRef)(),S=((0,e.useRef)(),(0,e.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{h(!0),p(null);const{getFollowersList:t,getFollowingListPaginated:n}=await Promise.resolve().then(r.bind(r,860)),s={limit:20,cursor:e?null:v,q:b,currentUserId:i};let l;if(l="followers"===a?await t(o,s):await n(o,s),l.success){const t=l.data.items;d(r=>e?t:[...r,...t]),f(l.data.hasMore),x(l.data.cursor)}else p(l.error)}catch(t){p(t.message)}finally{h(!1)}},[a,o,v,b]));(0,e.useEffect)(()=>{w&&clearTimeout(w);const e=setTimeout(()=>{S(!0)},250);return k(e),()=>{e&&clearTimeout(e)}},[b]),(0,e.useEffect)(()=>{S(!0)},[a,o]);const _=(0,e.useCallback)(e=>{u||(C.current&&C.current.disconnect(),C.current=new IntersectionObserver(e=>{e[0].isIntersecting&&g&&S()}),e&&C.current.observe(e))},[u,g,S]),I=(e,t)=>{const o=t===c.length-1?_:null;return(0,dt.jsx)("div",{ref:o,className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow duration-200 cursor-pointer",onClick:()=>{return t=e.id,l(`/artist/${t}`),void n();var t},children:(0,dt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,dt.jsx)("img",{src:e.avatar,alt:e.displayName,className:"w-12 h-12 rounded-full object-cover"}),(0,dt.jsx)("div",{className:"flex-1 min-w-0",children:(0,dt.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate",children:e.displayName})}),(0,dt.jsx)("button",{onClick:t=>{t.stopPropagation(),(async(e,t)=>{try{N(t=>({...t,[e]:!0}));const{follow:o,unfollow:n}=await Promise.resolve().then(r.bind(r,860)),s=i;let l;l=t?await n(e,s):await o(e,s),l.success?d("following"===a&&t?t=>t.filter(t=>t.id!==e):r=>r.map(r=>r.id===e?{...r,isFollowedByMe:!t}:r)):console.error("Follow toggle failed:",l.error)}catch(o){console.error("Follow toggle error:",o)}finally{N(t=>({...t,[e]:!1}))}})(e.id,e.isFollowedByMe)},disabled:j[e.id],className:(0,Lr.fO)(e.isFollowedByMe),children:j[e.id]?(0,dt.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.isFollowedByMe?"Following":"Follow"})]})},e.id)};return(0,dt.jsxs)("div",{className:"h-full flex flex-col",children:[(0,dt.jsx)("div",{className:"mb-4",children:(0,dt.jsx)("input",{type:"text",placeholder:`Search ${a}...`,value:b,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),(0,dt.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[m?(0,dt.jsxs)("div",{className:"text-center py-8",children:[(0,dt.jsxs)("p",{className:"text-red-500",children:["Error: ",m]}),(0,dt.jsx)("button",{onClick:()=>S(!0),className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Retry"})]}):0!==c.length||u?(0,dt.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:c.map((e,t)=>I(e,t))}):(0,dt.jsx)("div",{className:"text-center py-8",children:(0,dt.jsxs)("p",{className:"text-gray-500",children:["No ",a," found"]})}),u&&(0,dt.jsx)("div",{className:"text-center py-4",children:(0,dt.jsx)("div",{className:"inline-block w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})})]})]})},Br=t=>{let{isOpen:r,onClose:a,artistId:o,isOwnProfile:n=!1,currentUserId:s="alice"}=t;return(0,e.useEffect)(()=>{const e=e=>{"Escape"===e.key&&r&&a()};return r&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[r,a]),(0,dt.jsx)(jt,{isOpen:r,onClose:a,title:"Followers",maxWidth:"max-w-3xl",children:(0,dt.jsx)("div",{className:"h-96",children:(0,dt.jsx)(Wr,{type:"followers",targetId:o,onClose:a,isOwnProfile:n,currentUserId:s})})})},qr=t=>{let{isOpen:r,onClose:a,userId:o,isOwnProfile:n=!1,currentUserId:s="alice"}=t;return(0,e.useEffect)(()=>{const e=e=>{"Escape"===e.key&&r&&a()};return r&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[r,a]),(0,dt.jsx)(jt,{isOpen:r,onClose:a,title:"Following",maxWidth:"max-w-3xl",children:(0,dt.jsx)("div",{className:"h-96",children:(0,dt.jsx)(Wr,{type:"following",targetId:o,onClose:a,isOwnProfile:n,currentUserId:s})})})},Hr=()=>{var t,r,a;const{id:o}=te(),n=Z(),s="/me"===n.pathname||"/artist/me"===n.pathname,[i,l]=(0,e.useState)((0,ct.HW)()),c=null!==(t=null===i||void 0===i||null===(r=i.id)||void 0===r||null===(a=r.toString)||void 0===a?void 0:a.call(r))&&void 0!==t?t:null,[d,u]=(0,e.useState)(null),[h,m]=(0,e.useState)([]),[p,g]=(0,e.useState)([]),[f,v]=(0,e.useState)(!0),[x,b]=(0,e.useState)(!1),[y,w]=(0,e.useState)(156),[k,j]=(0,e.useState)(null),[N,C]=(0,e.useState)(!1);(0,e.useEffect)(()=>{const e=()=>l((0,ct.HW)());return window.addEventListener("user:changed",e),()=>window.removeEventListener("user:changed",e)},[]),(0,e.useEffect)(()=>{const e=async e=>{const{userId:t,avatarUrl:r}=e.detail;if(t&&(console.log("[ArtistProfile] Avatar updated, clearing cache for user:",t),(0,Lr.Y1)(["artist",t]),t===c&&s)){u(e=>({...e,avatar:r})),console.log("[ArtistProfile] Updated avatar for current user:",null===r||void 0===r?void 0:r.substring(0,30));const e=await(0,Lr.Cs)(c);e&&(u(e),console.log("[ArtistProfile] Refreshed artist data after avatar update"))}};return window.addEventListener("avatar:updated",e),()=>window.removeEventListener("avatar:updated",e)},[c,s]),(0,e.useEffect)(()=>{const e=e=>{const t=e.detail;t&&t.id&&(console.log("[ArtistProfile] Profile updated, clearing cache for user:",t.id),(0,Lr.Y1)(["artist",t.id]))};return window.addEventListener("profile:updated",e),()=>window.removeEventListener("profile:updated",e)},[]),(0,e.useEffect)(()=>{const e=async e=>{const t=e.detail;(null===t||void 0===t?void 0:t.id)===c&&s&&u(e=>({...e,title:t.title||(null===e||void 0===e?void 0:e.title),school:t.school||(null===e||void 0===e?void 0:e.school),pronouns:t.pronouns||(null===e||void 0===e?void 0:e.pronouns),majors:t.majors||(null===e||void 0===e?void 0:e.majors),minors:t.minors||(null===e||void 0===e?void 0:e.minors),skills:t.skills||(null===e||void 0===e?void 0:e.skills),bio:t.bio||(null===e||void 0===e?void 0:e.bio)}))};return window.addEventListener("profile:updated",e),()=>window.removeEventListener("profile:updated",e)},[c,s]),(0,e.useEffect)(()=>{window.scrollTo({top:0,behavior:"auto"})},[]),(0,e.useEffect)(()=>{let e=!0;return(s||o)&&(async()=>{if(v(!0),b(!1),w(0),j(null),s){if(i){const e=await(0,Lr.Cs)(i.id);e?u(e):(console.error("[ArtistProfile] Failed to get artist data for current user"),u(null)),console.log("[ArtistProfile] Loading portfolio for user:",i.id);const t=await(0,Er.ep)(i.id);if(console.log("[ArtistProfile] Portfolio load result:",t),t.success){const e=t.data.map(e=>({id:e.id,title:e.title,image:e.thumbnailPath||e.imagePaths&&e.imagePaths[0]||"",category:e.category,tags:e.tags,description:e.description}));console.log("[ArtistProfile] Setting portfolio artworks:",e),m(e)}else console.log("[ArtistProfile] Failed to load portfolio, using default portfolio"),m(i.portfolio||[]);const r=await(0,Lr.zx)(i.id);g(r),e&&w(e.stats.followers)}v(!1)}else try{var t;let a=null===o||void 0===o||null===(t=o.toString)||void 0===t?void 0:t.call(o);"me"===a&&(a=c,console.log('[ArtistProfile] ID is "me", using current user ID:',a));const n=await(0,Lr.Cs)(a),s=await(0,Er.ep)(a);let i=[];s.success&&(i=s.data.map(e=>({id:e.id,title:e.title,image:e.thumbnailPath||e.imagePaths&&e.imagePaths[0]||"",category:e.category,tags:e.tags,description:e.description})));const l=await(0,Lr.zx)(a);if(!e)return;var r;n?(u(n),m(i),g(l),void 0!==(null===n||void 0===n||null===(r=n.stats)||void 0===r?void 0:r.followers)&&w(n.stats.followers)):(u(null),m([]),g([]))}finally{e&&v(!1)}})(),()=>{e=!1}},[o,s,c,i]);const S=(0,e.useMemo)(()=>!!s||"me"===o,[s,o]),_=(0,e.useMemo)(()=>!1,[]),I=(0,e.useCallback)(()=>{C(!0),b(e=>!e),w(e=>x?e-1:e+1),setTimeout(()=>{C(!1)},1e3)},[x]);return{loading:f,currentUser:i,artist:d,artworks:h,collaborations:p,isFollowing:x,followersCount:y,expandedCardId:k,isOwnProfile:S,shouldShowBackToOwnerView:_,setCurrentUser:l,setIsFollowing:b,setFollowersCount:w,setExpandedCardId:j,toggleFollow:I,toggleExpandedCard:e=>{j(t=>t===e?null:e)}}},Gr=t=>{var r;let{state:a,setters:o}=t;const n=ee(),{goBack:s,navigateToWork:i}=kr();return{handleBackClick:(0,e.useCallback)(()=>{s()},[s]),handleEditProfileClick:(0,e.useCallback)(()=>{n("/settings/edit-profile")},[n]),handlePreviewAsVisitorClick:(0,e.useCallback)(()=>{var e;const t=null===(e=a.currentUser)||void 0===e?void 0:e.id;t&&n(`/artist/${t}`)},[n,null===(r=a.currentUser)||void 0===r?void 0:r.id]),handleBackToOwnerViewClick:(0,e.useCallback)(()=>{n("/artist/me")},[n]),handleArtworkClick:(0,e.useCallback)(e=>{e&&e.id&&i(e.id)},[i]),handleCollaborationToggle:(0,e.useCallback)(e=>{o.toggleExpandedCard(e)},[o]),handleSocialLinkClick:(0,e.useCallback)((e,t)=>{},[])}};var Vr=r(860),Jr=r(121);const Kr=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{user:a}=ht(),[o,n]=(0,e.useState)(r),[s,i]=(0,e.useState)(!1),[l,c]=(0,e.useState)(!1),d=!(null===a||void 0===a||!a.id),u=(0,e.useCallback)(async()=>{if(t&&d&&!l)if(a.id!==t)try{c(!0),console.log("[FollowCount] Toggling follow for artist:",t,"User:",a.id);const r=await(0,Vr.So)(a.id,t);if(r.success){if(n(r.data.followersCount),i(r.data.isFollowing),console.log("[FollowCount] Follow toggled successfully:",r.data.isFollowing?"Following":"Unfollowing","Followers count:",r.data.followersCount),r.data.isFollowing)try{const e=await(0,Jr.getProfile)(a.id),r=e.success&&e.data.fullName?e.data.fullName:a.name||a.username||"Unknown User";await zt.lY.createFollowNotification(a.id,r,t),console.log("[FollowCount] Created follow notification")}catch(e){console.error("[FollowCount] Failed to create follow notification:",e)}window.dispatchEvent(new CustomEvent("follow:changed",{detail:{followerId:a.id,artistId:t,isFollowing:r.data.isFollowing}})),(0,Vr._i)(t)}else console.error("[FollowCount] Failed to toggle follow:",r.error)}catch(e){console.error("[FollowCount] Error toggling follow:",e)}finally{c(!1)}else console.warn("[FollowCount] Cannot follow yourself")},[t,d,null===a||void 0===a?void 0:a.id,null===a||void 0===a?void 0:a.name,null===a||void 0===a?void 0:a.username,l]),h=(0,e.useCallback)(async()=>{if(t&&d)try{const e=await(0,Vr.kt)(a.id,t);e.success?(n(e.data.followersCount),i(e.data.isFollowing),console.log("[FollowCount] Refreshed follow status:",e.data.isFollowing?"Following":"Not following","Followers count:",e.data.followersCount)):console.error("[FollowCount] Failed to refresh follow status:",e.error)}catch(e){console.error("[FollowCount] Error refreshing follow status:",e)}},[t,d,null===a||void 0===a?void 0:a.id]),m=(0,e.useCallback)(async()=>{if(t)try{const e=await(0,Vr.bl)(t);e.success?(n(e.data.followersCount),console.log("[FollowCount] Refreshed followers count:",e.data.followersCount)):console.error("[FollowCount] Failed to refresh followers count:",e.error)}catch(e){console.error("[FollowCount] Error refreshing followers count:",e)}},[t]);return(0,e.useEffect)(()=>{const e=e=>{const{followerId:r,artistId:o,isFollowing:n}=e.detail;o===t&&(r===(null===a||void 0===a?void 0:a.id)&&i(n),m())};return window.addEventListener("follow:changed",e),()=>{window.removeEventListener("follow:changed",e)}},[t,null===a||void 0===a?void 0:a.id,m]),(0,e.useEffect)(()=>{t&&d&&h()},[t,d,h]),(0,e.useEffect)(()=>{i(!1),c(!1)},[t,null===a||void 0===a?void 0:a.id]),{followersCount:o,isFollowing:s,isToggling:l,toggleFollow:u,refreshFollowStatus:h,refreshFollowersCount:m}},Yr=t=>{const[r,a]=(0,e.useState)(0),[o,n]=(0,e.useState)(!1),s=(0,e.useCallback)(async()=>{if(t)try{n(!0);const e=await(0,Vr.m3)(t);e.success?(a(e.data.followingCount),console.log("[FollowingCount] Refreshed following count:",e.data.followingCount)):console.error("[FollowingCount] Failed to refresh following count:",e.error)}catch(e){console.error("[FollowingCount] Error refreshing following count:",e)}finally{n(!1)}},[t]);return(0,e.useEffect)(()=>{const e=e=>{const{followerId:r,operation:a}=e.detail;r===t&&s()};return window.addEventListener("follow:changed",e),()=>{window.removeEventListener("follow:changed",e)}},[t,s]),(0,e.useEffect)(()=>{t&&s()},[t,s]),{followingCount:r,isLoading:o,refreshFollowingCount:s}},Zr=()=>{var t,r,a,o,n,s,i,l,c,d;const{id:u}=te(),{state:h}=pr(),m=Hr(),p=(0,e.useMemo)(()=>({toggleFollow:m.toggleFollow,toggleExpandedCard:m.toggleExpandedCard}),[m.toggleFollow,m.toggleExpandedCard]),g=Gr({state:m,setters:p}),f=Kr(null===(t=m.artist)||void 0===t?void 0:t.id,m.followersCount),v=Yr(m.isOwnProfile?null===(r=m.currentUser)||void 0===r?void 0:r.id:null===(a=m.artist)||void 0===a?void 0:a.id),[x,b]=e.useState(!1),[y,w]=e.useState(!1);if(m.loading)return(0,dt.jsx)(Et,{});return(0,Lr.o2)(m.artist)?(0,dt.jsxs)("div",{className:"bg-white min-h-screen",children:[(0,dt.jsx)(Mr,{artist:m.artist,artworks:m.artworks,isFollowing:f.isFollowing,followersCount:f.followersCount,followingCount:v.followingCount,isOwnProfile:m.isOwnProfile,onBackClick:g.handleBackClick,onEditProfileClick:g.handleEditProfileClick,onPreviewAsVisitorClick:g.handlePreviewAsVisitorClick,onBackToOwnerViewClick:null,toggleFollow:f.toggleFollow,onFollowersClick:()=>{b(!0)},onFollowingClick:()=>{w(!0)}}),(0,dt.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,dt.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8 pt-8",children:[(0,dt.jsx)($r,{artist:m.artist,onSocialLinkClick:g.handleSocialLinkClick}),(0,dt.jsxs)("div",{className:"flex-1",children:[(0,dt.jsx)(Fr,{artworks:m.artworks,onArtworkClick:g.handleArtworkClick,isOwnProfile:m.isOwnProfile}),(0,dt.jsx)(Ur,{collaborations:m.collaborations,expandedCardId:m.expandedCardId,onCollaborationToggle:g.handleCollaborationToggle}),(0,dt.jsx)("div",{className:"mt-8",children:(0,dt.jsx)(Tr,{isOwnProfile:m.isOwnProfile})})]})]})}),(0,dt.jsx)(Br,{isOpen:x,onClose:()=>{b(!1)},artistId:null===(s=m.artist)||void 0===s?void 0:s.id,isOwnProfile:m.isOwnProfile,currentUserId:null===(i=m.currentUser)||void 0===i?void 0:i.id}),(0,dt.jsx)(qr,{isOpen:y,onClose:()=>{w(!1)},userId:m.isOwnProfile?null===(l=m.currentUser)||void 0===l?void 0:l.id:null===(c=m.artist)||void 0===c?void 0:c.id,isOwnProfile:m.isOwnProfile,currentUserId:null===(d=m.currentUser)||void 0===d?void 0:d.id})]},m.isOwnProfile?null===(o=m.currentUser)||void 0===o?void 0:o.id:null===(n=m.artist)||void 0===n?void 0:n.id):(0,dt.jsx)(zr,{id:u,onBackClick:g.handleBackClick})},Qr=()=>{ee();const[t,r]=(0,e.useState)(null),a=()=>{const e=document.querySelector('[data-section="gallery"]');if(e){const t=e.getBoundingClientRect(),r=window.pageYOffset+t.top-40;window.scrollTo({top:r,behavior:"smooth"})}};return(0,dt.jsx)("section",{className:"relative min-h-[560px] lg:min-h-[640px] overflow-hidden",children:(0,dt.jsxs)("div",{className:"flex flex-col lg:flex-row",children:[(0,dt.jsx)("div",{className:"relative w-full lg:w-1/2 bg-gradient-to-b from-blue-600 to-blue-700 min-h-[560px] lg:min-h-[640px] flex items-start justify-center px-8 lg:px-8 pt-20 lg:pt-24 pb-16 lg:pb-20 cursor-pointer transition-all duration-500 ease-out",style:{width:window.innerWidth>=1024?"blue"===t?"80%":"purple"===t?"20%":"50%":"100%",transitionTimingFunction:"cubic-bezier(.22,.61,.36,1)"},onClick:a,onKeyDown:e=>((e,t)=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t())})(e,a),onMouseEnter:()=>r("blue"),onMouseLeave:()=>r(null),role:"link",tabIndex:0,children:(0,dt.jsxs)("div",{className:"flex flex-col items-end max-w-md gap-6 lg:pr-0",children:[(0,dt.jsxs)("div",{className:"leading-[0.8]",children:[(0,dt.jsx)("h1",{className:"text-white font-black uppercase tracking-[-0.03em]",style:{fontSize:"clamp(56px, 7vw, 96px)",fontFamily:"Poppins, Inter, system-ui, sans-serif",textRendering:"optimizeLegibility"},children:"TAG"}),(0,dt.jsx)("h1",{className:"text-blue-200 font-black tracking-[-0.03em]",style:{fontSize:"clamp(32px, 4vw, 56px)",fontFamily:"Poppins, Inter, system-ui, sans-serif",textRendering:"optimizeLegibility"},children:"Gallery"})]}),(0,dt.jsxs)("div",{className:"space-y-2 mt-6 md:mt-8 text-right",children:[(0,dt.jsx)("p",{className:"text-white/95 font-semibold leading-tight",style:{fontSize:"clamp(20px, 2.2vw, 28px)"},children:"Show your work"}),(0,dt.jsx)("p",{className:"text-white/95 font-semibold leading-tight",style:{fontSize:"clamp(20px, 2.2vw, 28px)"},children:"Get hired!"})]}),(0,dt.jsx)("p",{className:"text-white text-lg opacity-80 leading-relaxed text-right",children:"Explore TAG Gallery"})]})}),(0,dt.jsx)(rt,{to:"/tagme",className:"relative w-full lg:w-1/2 bg-gradient-to-b from-purple-600 to-purple-700 min-h-[560px] lg:min-h-[640px] flex items-start justify-center px-8 lg:px-8 pt-20 lg:pt-24 pb-16 lg:pb-20 cursor-pointer transition-all duration-500 ease-out",style:{width:window.innerWidth>=1024?"blue"===t?"20%":"purple"===t?"80%":"50%":"100%",transitionTimingFunction:"cubic-bezier(.22,.61,.36,1)"},onMouseEnter:()=>r("purple"),onMouseLeave:()=>r(null),children:(0,dt.jsxs)("div",{className:"flex flex-col items-start max-w-md gap-6 lg:pl-0",children:[(0,dt.jsxs)("div",{className:"leading-[0.8]",children:[(0,dt.jsx)("h1",{className:"text-white font-black uppercase tracking-[-0.03em]",style:{fontSize:"clamp(56px, 7vw, 96px)",fontFamily:"Poppins, Inter, system-ui, sans-serif",textRendering:"optimizeLegibility"},children:"TAG"}),(0,dt.jsx)("h1",{className:"text-purple-200 font-black tracking-[-0.03em]",style:{fontSize:"clamp(48px, 6vw, 80px)",fontFamily:"Poppins, Inter, system-ui, sans-serif",textRendering:"optimizeLegibility"},children:"Me"})]}),(0,dt.jsxs)("div",{className:"space-y-2 mt-6 md:mt-8",children:[(0,dt.jsx)("p",{className:"text-white/95 font-semibold leading-tight",style:{fontSize:"clamp(20px, 2.2vw, 28px)"},children:"Find your team"}),(0,dt.jsx)("p",{className:"text-white/95 font-semibold leading-tight",style:{fontSize:"clamp(20px, 2.2vw, 28px)"},children:"Build experience!"})]}),(0,dt.jsx)("p",{className:"text-white text-lg opacity-80 leading-relaxed",children:"Explore TAGMe"})]})})]})})};var Xr=r(266);const ea=t=>{let{projectId:r,isOwner:a=!1}=t;const[o,n]=(0,e.useState)([]),[s,i]=(0,e.useState)(!1),[l,c]=(0,e.useState)(null),d=async()=>{try{i(!0);const e=await Xr.os(r);n(e)}catch(l){c("Failed to load review requests"),console.error("Error loading requests:",l)}finally{i(!1)}},u=async(e,t)=>{try{i(!0),await Xr.vb(e,t),await d()}catch(l){c(`Failed to ${t} request`),console.error("Error updating request:",l)}finally{i(!1)}},h=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"denied":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return(0,e.useEffect)(()=>{a&&d()},[r,a]),a?(0,dt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 relative",children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Review Requests"}),(0,dt.jsx)("button",{onClick:d,disabled:s,className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200 transition-colors duration-200",children:s?"Loading...":"Refresh"})]}),l&&(0,dt.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,dt.jsx)("p",{className:"text-sm text-red-600",children:l})}),0===o.length?(0,dt.jsx)("div",{className:"text-center py-8",children:(0,dt.jsx)("p",{className:"text-gray-500",children:"No review requests yet"})}):(0,dt.jsx)("div",{className:"space-y-4",children:o.map(e=>{return(0,dt.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,dt.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h4",{className:"font-medium text-gray-900",children:e.userName}),(0,dt.jsx)("p",{className:"text-sm text-gray-600",children:e.projectName}),(0,dt.jsxs)("p",{className:"text-xs text-gray-500",children:["Requested: ",(t=e.createdAt,new Date(t).toLocaleString())]})]}),(0,dt.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${h(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),"pending"===e.status&&(0,dt.jsxs)("div",{className:"flex gap-2",children:[(0,dt.jsx)("button",{onClick:()=>u(e.id,"approved"),disabled:s,className:"px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700 transition-colors duration-200 disabled:opacity-50",children:"Approve"}),(0,dt.jsx)("button",{onClick:()=>u(e.id,"denied"),disabled:s,className:"px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700 transition-colors duration-200 disabled:opacity-50",children:"Deny"})]})]},e.id);var t})}),(0,dt.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[(0,dt.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Development Tools"}),(0,dt.jsx)("div",{className:"flex gap-2",children:(0,dt.jsx)("button",{onClick:()=>Xr.KJ(),className:"px-3 py-1 text-xs bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors duration-200",children:"Clear Test Data"})})]})]}):null},ta=e=>{let{isOpen:t,onClose:r,applyForm:a,onFormChange:o,onSubmit:n}=e;return(0,dt.jsx)(jt,{isOpen:t,onClose:r,title:"Apply for Project",maxWidth:"max-w-md",children:(0,dt.jsxs)("form",{onSubmit:n,className:"space-y-4",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),(0,dt.jsx)("input",{id:"name",type:"text",name:"name",value:a.name,onChange:o,required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Your full name"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,dt.jsx)("input",{id:"email",type:"email",name:"email",value:a.email,onChange:o,required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"your.email@example.com"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{htmlFor:"portfolio",className:"block text-sm font-medium text-gray-700 mb-1",children:"Portfolio Link"}),(0,dt.jsx)("input",{id:"portfolio",type:"url",name:"portfolio",value:a.portfolio,onChange:o,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"https://your-portfolio.com"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-1",children:"Message"}),(0,dt.jsx)("textarea",{id:"message",name:"message",value:a.message,onChange:o,rows:"3",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none",placeholder:"Tell us why you'd like to join this project..."})]}),(0,dt.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,dt.jsx)(yt,{type:"button",onClick:r,fullWidth:!0,className:"flex-1",children:"Cancel"}),(0,dt.jsx)(bt,{type:"submit",fullWidth:!0,className:"flex-1",children:"Submit Application"})]})]})})},ra=e=>{let{projectId:t,milestones:r=[],dueDate:a,onViewMilestones:o}=e;const n=r.length,s=r.filter(e=>["done","completed"].includes(e.status)).length,i=Math.round(s/Math.max(n,1)*100),l=n>0,c=l?`Completed ${s} / ${n} milestones`:"No milestones created yet",d=l?"View Milestones":"Create Milestones",u=!l,h=()=>{l&&o&&o(t)};return(0,dt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8 w-full",children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,dt.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Project Progress"}),a&&(0,dt.jsxs)("span",{className:"text-sm text-gray-600 mr-4",children:["Deadline: ",a]})]}),(0,dt.jsxs)("div",{className:"flex items-center gap-4 cursor-pointer hover:bg-gray-50 p-3 rounded-lg transition-colors duration-200",onClick:h,role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),h())},"aria-label":`${c} \xb7 Click to view milestone details`,children:[(0,dt.jsxs)("div",{className:"flex-1",children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,dt.jsx)("span",{className:"text-sm font-medium text-gray-700",children:c}),(0,dt.jsxs)("span",{className:"text-sm text-gray-600",children:[i,"%"]})]}),(0,dt.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":i,"aria-label":`Project progress: ${i}%`,children:(0,dt.jsx)("div",{className:"h-full transition-all duration-300 ease-in-out "+(l?"bg-purple-600":"bg-gray-400"),style:{width:`${i}%`}})})]}),(0,dt.jsx)("button",{onClick:e=>{e.stopPropagation(),h()},disabled:u,className:"px-4 py-2 rounded-lg font-medium transition-all duration-200 "+(u?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-purple-600 text-white hover:bg-purple-700 shadow-lg hover:shadow-xl transform hover:-translate-y-1"),"aria-label":u?"No milestones available":"View milestone details",children:d})]}),!l&&(0,dt.jsx)("div",{className:"mt-3 text-sm text-gray-500 text-center",children:"Start by creating your first milestone to track project progress"})]})},aa=e=>{let{project:t,isSaved:r,onBack:a,onSaveToggle:o,onApplyNow:n,onViewMilestones:s,enableProjectProgressBar:i=!0}=e;return(0,dt.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,dt.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,dt.jsx)(St,{onClick:a,text:"Back to TAGMe",className:"mb-6"}),(0,dt.jsxs)("div",{className:"flex items-center text-sm text-gray-500 mb-4",children:[(0,dt.jsx)("button",{onClick:a,className:"hover:text-tag-blue transition-colors duration-200",children:"Collaborations"}),(0,dt.jsx)("span",{className:"mx-2",children:"/"}),(0,dt.jsx)("span",{className:"text-gray-900 font-medium",children:t.title})]}),(0,dt.jsx)("div",{className:"relative mb-6",children:(0,dt.jsxs)("div",{className:"w-full h-48 bg-gradient-to-r from-purple-600 to-purple-700 rounded-lg overflow-hidden",children:[(0,dt.jsx)("img",{src:t.heroImage,alt:t.title,className:"w-full h-full object-cover opacity-20"}),(0,dt.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,dt.jsxs)("div",{className:"text-center text-white",children:[(0,dt.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Learn"}),(0,dt.jsx)("p",{className:"text-lg opacity-90",children:"Collaborate \u2022 Create \u2022 Grow"})]})})]})}),(0,dt.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6",children:[(0,dt.jsxs)("div",{className:"flex-1",children:[(0,dt.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:t.title}),(0,dt.jsxs)("div",{className:"flex flex-wrap items-center gap-6 mb-4 text-sm text-gray-600",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,dt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),(0,dt.jsx)("span",{children:t.teamSize})]}),(0,dt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,dt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,dt.jsxs)("span",{children:["Posted ",t.postedTime]})]})]}),(0,dt.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:t.tags.map((e,t)=>(0,dt.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 text-sm font-medium rounded-full",children:e},t))})]}),(0,dt.jsxs)("div",{className:"lg:flex-shrink-0 flex flex-col sm:flex-row gap-3",children:[(0,dt.jsx)(Ct,{isFavorited:r,itemType:"collaboration",itemId:t.id,onToggle:o,size:"md"}),(0,dt.jsx)(bt,{onClick:n,size:"lg",className:"w-full sm:w-auto",children:"Apply Now"})]})]}),i&&(0,dt.jsx)("div",{className:"w-full",children:(0,dt.jsx)(ra,{projectId:t.id,milestones:t.milestones||[],dueDate:t.deadline,onViewMilestones:s})})]})})},oa=e=>{var t;let{comment:r,onCommentChange:a,onSubmitComment:o,positionComments:n,positionId:s}=e;return(0,dt.jsxs)("div",{className:"space-y-6",children:[(0,dt.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,dt.jsxs)("form",{onSubmit:o,className:"space-y-4",children:[(0,dt.jsx)("textarea",{value:r,onChange:a,placeholder:"Share your thoughts, questions, or feedback about this position...",className:"w-full p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:"3"}),(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsxs)("button",{type:"button",className:"flex items-center gap-2 text-sm text-gray-600 hover:text-gray-800 transition-colors duration-200",children:[(0,dt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),"Attach Image"]}),(0,dt.jsx)(bt,{type:"submit",disabled:!r.trim(),size:"sm",className:"disabled:opacity-50 disabled:cursor-not-allowed",children:"Comment"})]})]})}),(0,dt.jsx)("div",{className:"space-y-4",children:null===(t=n[s])||void 0===t?void 0:t.map(e=>(0,dt.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,dt.jsxs)("div",{className:"flex items-start gap-4",children:[(0,dt.jsx)(rt,{to:`/artist/${e.user}`,className:"w-10 h-10 rounded-full flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity duration-200",children:(0,dt.jsx)("img",{src:e.avatar,alt:e.user,className:"w-10 h-10 rounded-full"})}),(0,dt.jsxs)("div",{className:"flex-1",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,dt.jsx)(rt,{to:`/artist/${e.user}`,className:"font-medium text-gray-900 cursor-pointer hover:text-tag-blue transition-colors duration-200",children:e.user}),(0,dt.jsx)("span",{className:"text-xs text-gray-500",children:"\u2022"}),(0,dt.jsx)("span",{className:"text-xs text-gray-500",children:e.role}),(0,dt.jsx)("span",{className:"text-xs text-gray-500",children:"\u2022"}),(0,dt.jsx)("span",{className:"text-xs text-gray-500",children:e.timestamp})]}),(0,dt.jsx)("p",{className:"text-gray-700 mb-3",children:e.comment}),(0,dt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,dt.jsxs)("button",{className:"flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700 transition-colors duration-200",children:[(0,dt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),e.likes]}),(0,dt.jsx)("button",{className:"text-sm text-gray-500 hover:text-gray-700 transition-colors duration-200",children:"Reply"})]})]})]})},e.id))})]})},na=e=>{let{positions:t,hasSubmittedApplication:r,showWarning:a,appliedPositions:o,selectedPosition:n,activePositionTab:s,comment:i,positionComments:l,onApply:c,onPositionTabClick:d,onCommentChange:u,onSubmitComment:h,navigateToArtist:m,getStatusColor:p,getStatusText:g}=e;return(0,dt.jsx)("div",{className:"mt-8",children:(0,dt.jsxs)(wt,{children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,dt.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Open Positions"}),!r&&(0,dt.jsxs)("div",{className:"flex items-center gap-2 text-sm transition-colors duration-300 "+(a?"text-red-500":"text-gray-500"),children:[(0,dt.jsx)("svg",{className:"w-4 h-4 transition-colors duration-300 "+(a?"text-red-500":"text-yellow-500"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,dt.jsx)("span",{children:"Please 'Apply now' above to activate position applications"})]})]}),(0,dt.jsx)("div",{className:"space-y-6",children:t.map(e=>(0,dt.jsxs)("div",{className:"border border-gray-200 rounded-lg hover:shadow-md transition-shadow duration-200",children:[(0,dt.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,dt.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:e.title}),(0,dt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,dt.jsx)("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${p(e.status)}`,children:g(e.status)}),e.applications>0&&(0,dt.jsxs)("span",{className:"px-3 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800",children:[e.applications," applications"]})]})]})}),(0,dt.jsx)("p",{className:"text-gray-700 mb-4 leading-relaxed",children:e.description}),(0,dt.jsxs)("div",{className:"mb-4",children:[(0,dt.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Required Skills:"}),(0,dt.jsx)("div",{className:"flex flex-wrap gap-2",children:e.skills.map((e,t)=>(0,dt.jsx)("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-xs font-medium rounded-full",children:e},t))})]}),"available"===e.status?(0,dt.jsx)(bt,{onClick:()=>c(e.id),disabled:!r||o.has(e.id),size:"sm",className:o.has(e.id)?"bg-green-100 text-green-800 cursor-not-allowed":r?"":"bg-gray-300 text-gray-500 cursor-not-allowed",children:o.has(e.id)?"Applied":"Apply"}):(0,dt.jsx)("button",{disabled:!0,className:"px-6 py-2 bg-gray-100 text-gray-500 rounded-lg font-medium cursor-not-allowed",children:"Position Filled"})]}),(0,dt.jsxs)("div",{className:"flex border-b border-gray-200",children:[(0,dt.jsx)("button",{onClick:()=>d(e.id,"details"),className:"px-6 py-3 font-medium text-sm border-b-2 transition-colors duration-200 "+(n===e.id&&"details"===s?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Position Details"}),(0,dt.jsx)("button",{onClick:()=>d(e.id,"comments"),className:"px-6 py-3 font-medium text-sm border-b-2 transition-colors duration-200 "+(n===e.id&&"comments"===s?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Discussion Board"})]}),(0,dt.jsxs)("div",{className:"p-6",children:[n===e.id&&"details"===s&&(0,dt.jsx)("div",{className:"space-y-4",children:(0,dt.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,dt.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Additional Information"}),(0,dt.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,dt.jsxs)("div",{className:"flex justify-between",children:[(0,dt.jsx)("span",{className:"text-gray-600",children:"Work Type:"}),(0,dt.jsx)("span",{className:"font-medium",children:"Remote"})]}),(0,dt.jsxs)("div",{className:"flex justify-between",children:[(0,dt.jsx)("span",{className:"text-gray-600",children:"Experience Level:"}),(0,dt.jsx)("span",{className:"font-medium",children:"Mid-level"})]}),(0,dt.jsxs)("div",{className:"flex justify-between",children:[(0,dt.jsx)("span",{className:"text-gray-600",children:"Time Commitment:"}),(0,dt.jsx)("span",{className:"font-medium",children:"15-20 hours/week"})]})]})]})}),n===e.id&&"comments"===s&&(0,dt.jsx)(oa,{comment:i,onCommentChange:u,onSubmitComment:h,positionComments:l,positionId:e.id,navigateToArtist:m})]})]},e.id))})]})})},sa=e=>{let{title:t="After-Finished Review",description:r="Final, qualitative comments after project completion only.",className:a=""}=e;return(0,dt.jsxs)("div",{className:`${a}`,children:[(0,dt.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:t}),(0,dt.jsx)("p",{className:"text-sm text-gray-600 mb-8",children:r})]})},ia=e=>{let{state:t="none",onClick:r,disabled:a=!1,className:o="",ariaLabel:n,children:s}=e;const i=e=>{switch(e){case"loading":return"Loading...";case"submitted":return"Final Comment Submitted";case"pending":return"Pending Approval";case"approved":return"Submit Final Comment";case"none":return"Send Request";default:return"Unknown State"}};return(0,dt.jsx)("button",{onClick:r,disabled:a||"loading"===t||"submitted"===t||"pending"===t,className:`${(e=>{const t="px-4 py-2 rounded-lg font-medium transition-colors duration-200";switch(e){case"loading":case"pending":default:return`${t} bg-gray-300 text-gray-500 cursor-not-allowed`;case"submitted":return`${t} bg-green-100 text-green-800 cursor-not-allowed`;case"approved":case"none":return`${t} bg-purple-600 text-white hover:bg-purple-700`}})(t)} ${o}`,"aria-label":n||i(t),children:s||i(t)})},la=e=>{switch(e){case"positive":return"bg-green-100 text-green-800";case"neutral":default:return"bg-gray-100 text-gray-800";case"constructive":return"bg-blue-100 text-blue-800"}},ca=e=>{let{isLoggedIn:t=!0,isProjectMember:r=!0,hasCompletedTasks:a=!1,requestStatus:o="none",hasSubmitted:n=!1,commentText:s="",onCommentChange:i=()=>{},className:l=""}=e;const c=(e=>e.length)(s),d=(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600;e.length}(s,600),!t||!r||!a||"none"===o||"pending"===o||n);return n?(0,dt.jsx)("div",{className:`mt-4 ${l}`,children:(0,dt.jsx)("blockquote",{className:"w-full p-3 bg-gray-50 border-l-4 border-purple-500 rounded-r-lg min-h-[120px]",children:(0,dt.jsxs)("p",{className:"text-gray-700 italic",children:['"',s,'"']})})}):(0,dt.jsxs)("div",{className:`mt-4 ${l}`,children:[(0,dt.jsx)("textarea",{value:s,onChange:e=>i(e.target.value),placeholder:t?r&&a?"none"===o?"Send a request to the Project Lead to write a final comment.":"pending"===o?"Your request is being reviewed by the Project Lead.":"approved"!==o||n?"Comment input":"Share your final thoughts about the project collaboration...":"You need approval from the Project Lead to write a final comment.":"Please log in to write a final comment.",disabled:d,className:`w-full p-3 border rounded-lg resize-none min-h-[120px] focus:ring-2 focus:ring-purple-500 focus:border-transparent ${c>600?"border-red-300":"border-gray-300"} ${d?"opacity-50 pointer-events-none":""}`,"aria-label":"Final comment input",maxLength:600}),(0,dt.jsxs)("div",{className:"flex justify-between items-center mt-2 text-sm",children:[(0,dt.jsx)("span",{className:"text-gray-500",children:"Share your thoughts"}),(0,dt.jsxs)("span",{className:""+(c>600?"text-red-500":"text-gray-500"),children:[c,"/600"]})]}),c>600&&(0,dt.jsx)("div",{className:"mt-1 text-sm text-red-500",role:"alert",children:"Comment exceeds maximum length"})]})},da=e=>{let{comments:t=[],maxDisplay:r=3,className:a=""}=e;return 0===t.length?null:(0,dt.jsxs)("div",{className:`mt-6 ${a}`,children:[(0,dt.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Final Comments"}),(0,dt.jsxs)("div",{className:"space-y-3",children:[t.slice(0,r).map((e,t)=>{return(0,dt.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,dt.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,dt.jsxs)("div",{className:"text-xs text-gray-500",children:[e.userName," \xb7 ",e.userRole," \xb7"," ",(r=e.createdAt,new Date(r).toLocaleDateString())]}),e.sentiment&&(0,dt.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${la(e.sentiment)}`,children:e.sentiment.charAt(0).toUpperCase()+e.sentiment.slice(1)})]}),(0,dt.jsx)("p",{className:"text-sm text-gray-700",children:e.comment})]},t);var r}),t.length>r&&(0,dt.jsx)("div",{className:"text-center py-2",children:(0,dt.jsxs)("span",{className:"text-xs text-gray-500",children:["+",t.length-r," more comments"]})})]})]})},ua=t=>{let{isOpen:r=!1,onClose:a=()=>{},onConfirm:o=()=>{},title:n="Participation Verification",className:s=""}=t;const[i,l]=(0,e.useState)({hasApplied:!1,hasCompleted:!1});if(!r)return null;const c=i.hasApplied&&i.hasCompleted;return(0,dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,dt.jsxs)("div",{className:`bg-white rounded-lg p-8 max-w-lg w-full mx-4 ${s}`,children:[(0,dt.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:n}),(0,dt.jsxs)("div",{className:"space-y-6 mb-8",children:[(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)("input",{type:"checkbox",checked:i.hasApplied,onChange:e=>l(t=>({...t,hasApplied:e.target.checked})),className:"w-5 h-5 rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),(0,dt.jsx)("label",{className:"ml-4 text-base text-gray-700",children:"I have applied to participate in this project"})]}),(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)("input",{type:"checkbox",checked:i.hasCompleted,onChange:e=>l(t=>({...t,hasCompleted:e.target.checked})),className:"w-5 h-5 rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),(0,dt.jsx)("label",{className:"ml-4 text-base text-gray-700",children:"I have completed my tasks in this project"})]})]}),(0,dt.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,dt.jsx)("button",{onClick:()=>{a(),l({hasApplied:!1,hasCompleted:!1})},className:"px-6 py-3 text-base text-gray-600 hover:text-gray-800 transition-colors duration-200",children:"Cancel"}),(0,dt.jsx)("button",{onClick:()=>{c&&(o(),a(),l({hasApplied:!1,hasCompleted:!1}))},disabled:!c,className:"px-6 py-3 text-base rounded-lg font-medium transition-colors duration-200 "+(c?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"Send Request"})]})]})})},ha=e=>{let{isOpen:t=!1,onClose:r=()=>{},onConfirm:a=()=>{},commentText:o="",isLoading:n=!1,className:s=""}=e;return t?(0,dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,dt.jsxs)("div",{className:`bg-white rounded-lg p-8 max-w-lg w-full mx-4 ${s}`,children:[(0,dt.jsxs)("div",{className:"flex items-center mb-6",children:[(0,dt.jsx)("div",{className:"flex-shrink-0",children:(0,dt.jsx)("svg",{className:"w-8 h-8 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,dt.jsxs)("div",{className:"ml-4",children:[(0,dt.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Final Comment Confirmation"}),(0,dt.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Please read this important notice"})]})]}),(0,dt.jsxs)("div",{className:"mb-8",children:[(0,dt.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:(0,dt.jsxs)("div",{className:"flex",children:[(0,dt.jsx)("div",{className:"flex-shrink-0",children:(0,dt.jsx)("svg",{className:"w-5 h-5 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,dt.jsxs)("div",{className:"ml-3",children:[(0,dt.jsx)("h4",{className:"text-sm font-medium text-yellow-800",children:"Important Notice"}),(0,dt.jsxs)("div",{className:"mt-2 text-sm text-yellow-700",children:[(0,dt.jsxs)("p",{className:"mb-2",children:["Once you submit your final comment, it"," ",(0,dt.jsx)("strong",{children:"cannot be changed or deleted"}),"."]}),(0,dt.jsx)("p",{children:"This comment will be permanently associated with your participation in this project."})]})]})]})}),(0,dt.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,dt.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Your Comment Preview:"}),(0,dt.jsxs)("div",{className:"text-sm text-gray-700 italic",children:['"',o,'"']})]})]}),(0,dt.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,dt.jsx)("button",{onClick:r,disabled:n,className:"px-6 py-3 text-base text-gray-600 hover:text-gray-800 transition-colors duration-200 disabled:opacity-50",children:"Cancel"}),(0,dt.jsx)("button",{onClick:a,disabled:n,className:"px-6 py-3 text-base rounded-lg font-medium transition-colors duration-200 "+(n?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-purple-600 text-white hover:bg-purple-700"),children:n?"Submitting...":"Confirm & Submit"})]})]})}):null},ma=t=>{let{projectId:a,userId:o,isLoggedIn:n=!0,isProjectMember:s=!0,hasCompletedTasks:i=!1,initialRequestStatus:l="none",initialFinalComments:c=[],initialHasSubmitted:d=!1}=t;const[u,h]=(0,e.useState)(l),[m,p]=(0,e.useState)(!1),[g,f]=(0,e.useState)(null),[v,x]=(0,e.useState)(c),[b,y]=(0,e.useState)(d),[w,k]=(0,e.useState)("");(0,e.useEffect)(()=>{h(l)},[l]),(0,e.useEffect)(()=>{n&&s&&i&&(async()=>{try{const{getCollaborationRequestStatus:e}=await Promise.resolve().then(r.bind(r,450)),t=await e(a,o);if("none"!==t)return void h(t);const n=await(0,zt.i8)(a,o);h(n)}catch(g){console.error("Error loading request state:",g),f("Failed to load review state")}})()},[a,o,n,s,i]),(0,e.useEffect)(()=>{const e=e=>{const{projectId:t,requesterId:r,status:n}=e.detail;t===a&&r===o&&(h(n),"approved"===n&&f(null))};return window.addEventListener("review:requestStatusChanged",e),()=>{window.removeEventListener("review:requestStatusChanged",e)}},[a,o]),(0,e.useEffect)(()=>{const e=e=>{const{requestId:t,status:r,request:n}=e.detail;n.requesterId===o&&n.projectId===a&&(h(r),"approved"===r&&f(null))};return window.addEventListener("collaboration:requestStatusChanged",e),()=>{window.removeEventListener("collaboration:requestStatusChanged",e)}},[a,o]),(0,e.useEffect)(()=>{"approved"===u&&f(null)},[u]),(0,e.useEffect)(()=>{x([])},[a]);return{state:{localRequestStatus:u,isLoading:m,error:g,localFinalComments:v,hasSubmittedLocal:b,commentText:w},setters:{setLocalRequestStatus:h,setIsLoading:p,setError:f,setLocalFinalComments:x,setHasSubmittedLocal:y,setCommentText:k}}},pa=t=>{let{state:a,setters:o,projectId:n,userId:s,userName:i,userRole:l,projectName:c,onSendRequest:d=()=>{},onSubmitComment:u=e=>{}}=t;const{setLocalRequestStatus:h,setIsLoading:m,setError:p,setHasSubmittedLocal:g,setCommentText:f}=o,{commentText:v}=a,x=(0,e.useCallback)(async()=>{m(!0),p(null);try{const e=(0,ct.HW)(),t=await(0,zt.BL)({projectId:n,projectName:c,requesterId:s,requesterName:i,requesterAvatar:(null===e||void 0===e?void 0:e.avatar)||"",ownerId:"alice",ownerName:"Alice Chen",message:"I would like to join this collaboration project."});await(0,zt.Gw)({userId:"alice",projectId:n,projectName:c,requestId:t.id,requesterId:s,requesterName:i,requesterAvatar:(null===e||void 0===e?void 0:e.avatar)||""});return h("pending"),d(),t}catch(e){throw p(e.message),console.error("Error sending collaboration request:",e),e}finally{m(!1)}},[n,s,i,c,d,h,m,p]),b=(0,e.useCallback)(async()=>{m(!0),p(null);try{const e=await(0,zt.CM)(n,s,v,"positive","alice",c,i,l);if(e)return g(!0),f(""),u(v),e;throw new Error("Failed to create comment")}catch(e){throw p(e.message),console.error("Error submitting final comment:",e),e}finally{m(!1)}},[n,s,v,u,g,f,m,p,c,i,l]),y=(0,e.useCallback)(async()=>{try{const e=await(0,zt.i8)(n,s);h(e)}catch(e){console.error("Error refreshing review status:",e),p("Failed to refresh status")}},[n,s,h,p]);return{handleSendRequest:x,handleSubmitFinalComment:b,handleRefreshStatus:y,handleResetRequests:(0,e.useCallback)(async()=>{try{const{resetReviewRequests:e}=await Promise.resolve().then(r.bind(r,450));await e(),h("none")}catch(e){console.error("Error resetting review requests:",e),p("Failed to reset requests")}},[h,p]),handleCommentTextChange:(0,e.useCallback)(e=>{f(e)},[f]),handleClearError:(0,e.useCallback)(()=>{p(null)},[p])}},ga=t=>{let{isLoggedIn:r=!0,isProjectMember:a=!0,hasCompletedTasks:o=!1,requestStatus:n="none",hasSubmittedFinalComment:s=!1,finalComments:i=[],projectId:l="1",userId:c="current_user",userName:d="Current User",userRole:u="Member",projectName:h="Project Name",onSendRequest:m=()=>{},onSubmitComment:p=e=>{}}=t;const{state:g,setters:f}=ma({projectId:l,userId:c,isLoggedIn:r,isProjectMember:a,hasCompletedTasks:o,initialRequestStatus:n,initialFinalComments:i,initialHasSubmitted:s}),v=pa({state:g,setters:f,projectId:l,userId:c,userName:d,userRole:u,projectName:h,onSendRequest:m,onSubmitComment:p}),[x,b]=(0,e.useState)(!1),[y,w]=(0,e.useState)(!1),[k,j]=(0,e.useState)(!1),N=()=>{r?a&&o&&(g.hasSubmittedLocal||("none"===g.localRequestStatus&&b(!0),"approved"!==g.localRequestStatus||g.hasSubmittedLocal||w(!0))):console.log("Sign in to request review")};return(0,dt.jsxs)("div",{className:"mt-6",children:[(0,dt.jsx)(sa,{}),(0,dt.jsx)(Pt,{error:g.error}),(0,dt.jsxs)("div",{className:"flex justify-start items-center space-x-3",children:[(()=>{if(!r)return(0,dt.jsx)(ia,{state:"none",onClick:()=>{},ariaLabel:"Sign in to request review",children:"Sign in to request review"});if(!a||!o)return(0,dt.jsxs)("div",{className:"relative",children:[(0,dt.jsx)(ia,{state:"disabled",disabled:!0,ariaLabel:"Send a Request (disabled)",title:"Only completed project members can request to comment.",onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),children:"Send a Request"}),k&&(0,dt.jsxs)("div",{className:"absolute bottom-full left-0 mb-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg whitespace-nowrap z-10",children:["Only completed project members can request to comment.",(0,dt.jsx)("div",{className:"absolute top-full left-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]});let e=g.localRequestStatus;return g.hasSubmittedLocal&&(e="submitted"),(0,dt.jsx)(ia,{state:e,onClick:N,disabled:g.isLoading})})(),"pending"===g.localRequestStatus&&(0,dt.jsx)("button",{onClick:v.handleRefreshStatus,className:"px-3 py-2 text-sm bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition-colors duration-200",title:"Check for status updates",children:(0,dt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),!1]}),(0,dt.jsx)(ca,{isLoggedIn:r,isProjectMember:a,hasCompletedTasks:o,requestStatus:g.localRequestStatus,hasSubmitted:g.hasSubmittedLocal,commentText:g.commentText,onCommentChange:v.handleCommentTextChange}),(0,dt.jsx)(da,{comments:g.localFinalComments}),(0,dt.jsx)(ua,{isOpen:x,onClose:()=>b(!1),onConfirm:async()=>{try{await v.handleSendRequest(),b(!1)}catch(e){console.error("Failed to send request:",e)}}}),(0,dt.jsx)(ha,{isOpen:y,onClose:()=>w(!1),onConfirm:async()=>{try{await v.handleSubmitFinalComment(),w(!1)}catch(e){console.error("Failed to submit final comment:",e)}},commentText:g.commentText,isLoading:g.isLoading})]})},fa=e=>{let{project:t,enableAfterFinishedReview:r=!0,currentUser:a,projectData:o}=e;const n=[{icon:(0,dt.jsx)("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),value:t.duration,label:"Duration"},{icon:(0,dt.jsx)("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),value:t.meetingFrequency,label:"Meeting Frequency"},{icon:(0,dt.jsx)("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),value:t.deadline,label:"Deadline"}];return(0,dt.jsx)("div",{className:"lg:col-span-2",children:(0,dt.jsxs)(wt,{className:"mb-8",children:[(0,dt.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Project Description"}),(0,dt.jsx)("p",{className:"text-gray-700 leading-relaxed mb-6",children:t.description}),(0,dt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:n.map((e,t)=>(0,dt.jsx)(kt,{icon:e.icon,value:e.value,label:e.label},t))}),r&&(0,dt.jsx)("div",{className:"mt-24",children:(0,dt.jsx)(ga,{isLoggedIn:!0,isProjectMember:!0,hasCompletedTasks:!0,requestStatus:"none",hasSubmittedFinalComment:!1,finalComments:[],projectId:(null===o||void 0===o?void 0:o.id)||"proj_01",userId:(null===a||void 0===a?void 0:a.id)||"bryan",userName:(null===a||void 0===a?void 0:a.name)||"Bryan",userRole:(null===a||void 0===a?void 0:a.role)||"Collaborator",projectName:(null===o||void 0===o?void 0:o.title)||"Interactive Web Experience",onSendRequest:()=>{},onSubmitComment:e=>{}})})]})})},va=e=>{switch(e){case"available":return"bg-green-100 text-green-800";case"filled":default:return"bg-gray-100 text-gray-800";case"in_progress":return"bg-blue-100 text-blue-800"}},xa=e=>{switch(e){case"available":return"Available";case"filled":return"Position Filled";case"in_progress":return"In Progress";default:return"Unknown"}},ba=t=>{let{isOpen:r,onClose:a,onSubmit:o,isLoading:n}=t;const[s,i]=(0,e.useState)(""),[l,c]=(0,e.useState)(""),d=()=>{i(""),c(""),a()};return r?(0,dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,dt.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,dt.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Write Final Comment"}),(0,dt.jsx)("button",{onClick:d,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200","aria-label":"Close modal",children:(0,dt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,dt.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s.trim()?s.length<100?c("Comment must be at least 100 characters"):s.length>600?c("Comment must be less than 600 characters"):(c(""),o(s)):c("Please enter your comment")},className:"space-y-4",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Final Comment *"}),(0,dt.jsx)("textarea",{value:s,onChange:e=>i(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:"4",placeholder:"Share your final thoughts about this project collaboration (100-600 characters)...","aria-describedby":"comment-help comment-error"}),(0,dt.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,dt.jsxs)("p",{id:"comment-help",className:"text-xs text-gray-500",children:[s.length,"/600 characters"]}),l&&(0,dt.jsx)("p",{id:"comment-error",className:"text-xs text-red-500",children:l})]})]}),(0,dt.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,dt.jsx)("button",{type:"button",onClick:d,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors duration-200",disabled:n,children:"Cancel"}),(0,dt.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:n,children:n?"Submitting...":"Submit Comment"})]})]})]})}):null},ya=e=>{let{comments:t=[]}=e;const r=e=>{switch(e){case"positive":return"bg-green-100 text-green-800";case"constructive":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return 0===t.length?(0,dt.jsxs)("div",{className:"text-center py-8",children:[(0,dt.jsx)("p",{className:"text-gray-500",children:"No final comments yet"}),(0,dt.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"Final, qualitative comments from teammates after project completion."})]}):(0,dt.jsxs)("div",{className:"space-y-6",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Final Comments"}),(0,dt.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Final, qualitative comments from teammates after project completion."})]}),(0,dt.jsx)("div",{className:"space-y-4",children:t.map(e=>{return(0,dt.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,dt.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,dt.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:(0,dt.jsx)("span",{className:"text-sm font-medium text-purple-700",children:e.authorName.charAt(0)})}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"font-medium text-gray-900",children:e.authorName}),(0,dt.jsx)("div",{className:"text-sm text-gray-500",children:e.authorRole})]})]}),e.sentiment&&(0,dt.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${r(e.sentiment)}`,children:e.sentiment.charAt(0).toUpperCase()+e.sentiment.slice(1)})]}),(0,dt.jsx)("div",{className:"text-gray-700 leading-relaxed mb-3",children:e.text}),(0,dt.jsx)("div",{className:"text-xs text-gray-500",children:(t=e.createdAt,new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]},e.id);var t})})]})},wa=e=>{let{vision:t,owner:r}=e;return t?(0,dt.jsxs)("div",{className:"space-y-6",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-4 pb-4 border-b border-gray-200",children:[(0,dt.jsx)("img",{src:r.artistAvatar,alt:r.artist,className:"w-12 h-12 rounded-full"}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"font-medium text-gray-900",children:r.artist}),(0,dt.jsx)("div",{className:"text-sm text-gray-500",children:r.role})]})]}),t.tagline&&(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"TAGMe Vision"}),(0,dt.jsxs)("p",{className:"text-gray-700 italic",children:['"',t.tagline,'"']})]}),t.narrative&&(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"TAG This Project"}),(0,dt.jsx)("div",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:t.narrative})]}),t.hiringTargets&&t.hiringTargets.length>0&&(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Looking For"}),(0,dt.jsx)("div",{className:"flex flex-wrap gap-2",children:t.hiringTargets.map((e,t)=>(0,dt.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 text-sm font-medium rounded-full",children:e},t))})]}),t.contact&&(t.contact.discord||t.contact.email)&&(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Contact"}),(0,dt.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[t.contact.discord&&(0,dt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,dt.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"})}),(0,dt.jsx)("span",{children:t.contact.discord})]}),t.contact.email&&(0,dt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,dt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),(0,dt.jsx)("span",{children:t.contact.email})]})]})]})]}):(0,dt.jsx)("div",{className:"text-center py-8",children:(0,dt.jsx)("p",{className:"text-gray-500",children:"No project vision available"})})},ka=t=>{let{project:r,owner:a,currentUser:o,eligibility:n}=t;const[s,i]=(0,e.useState)([]),[l,c]=(0,e.useState)([]),[d,u]=(0,e.useState)(!1),[h,m]=(0,e.useState)(!1),[p,g]=(0,e.useState)("SIGN_IN"),f=o||{id:"user-1",name:"Current User"},v=n||{isMemberCompleted:!0};(0,e.useEffect)(()=>{x()},[r.id]);const x=async()=>{try{const[e,t]=await Promise.all([(0,Xr.os)(r.id),(0,Xr.Mg)(r.id)]);i(e),c(t),b(e,t)}catch(e){console.error("Error loading data:",e)}},b=(e,t)=>{if(!f)return void g("SIGN_IN");if(!v.isMemberCompleted)return void g("DISABLED");const r=e.find(e=>e.requesterId===f.id);t.find(e=>e.authorId===f.id)?g("SUBMITTED"):"approved"===(null===r||void 0===r?void 0:r.status)?g("WRITE_COMMENT"):"pending"===(null===r||void 0===r?void 0:r.status)?g("PENDING"):g("SEND_REQUEST")},y=async()=>{m(!0);try{await(0,Xr.OW)(r.id,f.id),await x()}catch(e){console.error("Error sending request:",e)}finally{m(!1)}},w="completed"===r.status;return(0,dt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 h-full overflow-auto",children:[w?(0,dt.jsx)(ya,{comments:l}):(0,dt.jsx)(wa,{vision:r.vision,owner:a}),w&&(0,dt.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(()=>{const e="w-full py-2 px-4 rounded-lg font-medium transition-all duration-200";switch(p){case"SIGN_IN":return(0,dt.jsx)("button",{className:`${e} bg-purple-600 text-white hover:bg-purple-700`,onClick:()=>window.location.href="/login",children:"Sign in to request review"});case"DISABLED":return(0,dt.jsx)("button",{className:`${e} bg-gray-300 text-gray-500 cursor-not-allowed`,disabled:!0,title:"Only completed members can request to comment.",children:"Request Review"});case"SEND_REQUEST":return(0,dt.jsx)("button",{className:`${e} bg-purple-600 text-white hover:bg-purple-700`,onClick:y,disabled:h,children:h?"Sending...":"Send a Request"});case"PENDING":return(0,dt.jsx)("button",{className:`${e} bg-gray-300 text-gray-500 cursor-not-allowed`,disabled:!0,title:"Waiting for owner approval",children:"Pending Approval"});case"WRITE_COMMENT":return(0,dt.jsx)("button",{className:`${e} bg-purple-600 text-white hover:bg-purple-700`,onClick:()=>u(!0),children:"Write Final Comment"});case"SUBMITTED":return(0,dt.jsx)("button",{className:`${e} bg-green-100 text-green-800 cursor-not-allowed`,disabled:!0,children:"Submitted"});default:return null}})()}),(0,dt.jsx)(ba,{isOpen:d,onClose:()=>u(!1),onSubmit:async e=>{m(!0);try{await(0,Xr.mY)(r.id,{authorId:f.id,authorName:f.name,authorRole:"Member",text:e,sentiment:"positive"}),await x(),u(!1)}catch(t){console.error("Error submitting comment:",t)}finally{m(!1)}},isLoading:h})]})},ja=()=>{const{state:t}=pr(),r=Z(),a=(()=>{var t;const{state:r}=pr(),a=Z(),o=r.selectedCollaboration||(null===(t=a.state)||void 0===t?void 0:t.project),[n,s]=(0,e.useState)(new Set),[i,l]=(0,e.useState)(!1),[c,d]=(0,e.useState)("details"),[u,h]=(0,e.useState)(null),[m,p]=(0,e.useState)(""),[g,f]=(0,e.useState)(!1),[v,x]=(0,e.useState)({name:"",email:"",portfolio:"",message:""}),[b,y]=(0,e.useState)(!1),[w,k]=(0,e.useState)(!1),[j,N]=(0,e.useState)((0,ct.HW)()),[C,S]=(0,e.useState)({1:[{id:1,user:"Alex Chen",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",role:"UI/UX Designer",comment:"This position looks perfect for my skill set! I have 3 years of experience with Figma and user research. Would love to discuss the project details.",timestamp:"2 hours ago",likes:2},{id:2,user:"Maya Rodriguez",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",role:"Product Designer",comment:"Great opportunity! I'm particularly interested in the AR try-on feature. Have you considered accessibility considerations for the interface?",timestamp:"4 hours ago",likes:1}],2:[{id:1,user:"David Lee",avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=100&h=100&fit=crop&crop=face",role:"Graphic Designer",comment:"I specialize in branding and have worked on several fashion projects. Would love to contribute to the visual identity!",timestamp:"1 day ago",likes:3}],3:[{id:1,user:"Sophie Wilson",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop&crop=face",role:"Motion Designer",comment:"Position filled! Looking forward to working with the team on the animations.",timestamp:"3 days ago",likes:5}]}),_=(e=>{var t;return e?{id:e.id,title:e.title,author:{id:e.id,title:e.title,artist:e.author.name,artistAvatar:e.author.avatar,description:e.subtitle,image:e.image,category:(null===(t=e.categories)||void 0===t?void 0:t[0])||"Project",likes:e.likes,views:e.views,timeAgo:"2 hours ago",role:"Project Lead"},duration:"3-4 months",teamSize:"5-6 people",postedTime:"2 hours ago",tags:e.categories||["Project"],heroImage:e.image,description:e.subtitle+". We're looking for passionate designers and developers to join our team and create something amazing together.",meetingFrequency:"2-3 times/week",deadline:"Dec 15, 2024",contactInfo:{discord:"project_lead#1234",email:"project.lead@email.com"},status:"in_progress",vision:{tagline:"Building the future of creative collaboration",narrative:"We're creating a platform that connects talented designers and developers to build amazing digital experiences together. Our vision is to make collaboration seamless, inspiring, and productive.\n\nThis project will showcase the power of interdisciplinary teamwork and innovative design thinking. We're looking for passionate individuals who share our vision and want to make a real impact.",hiringTargets:["UI/UX Designer","Frontend Developer","Motion Designer"],contact:{discord:"project_lead#1234",email:"project.lead@email.com"}},milestones:[{id:1,title:"Project Planning",status:"completed",dueDate:"Week 1"},{id:2,title:"Design Phase",status:"completed",dueDate:"Week 3"},{id:3,title:"Development Phase",status:"in-progress",dueDate:"Week 6"},{id:4,title:"Testing & QA",status:"pending",dueDate:"Week 8"},{id:5,title:"Launch Preparation",status:"pending",dueDate:"Week 10"}]}:{id:1,title:"Modern E-commerce Mobile App",author:{id:1,title:"Modern E-commerce Mobile App",artist:"Sarah Chen",artistAvatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",description:"A cutting-edge mobile shopping experience",image:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=800&h=600&fit=crop",category:"Mobile App",likes:128,views:2048,timeAgo:"2 hours ago",role:"Project Lead"},duration:"3-4 months",teamSize:"5-6 people",postedTime:"2 hours ago",tags:["Mobile App","E-commerce","React Native"],heroImage:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=800&h=600&fit=crop",description:"We're building a modern e-commerce mobile app that will revolutionize the shopping experience. Our vision is to create a seamless, intuitive, and engaging platform that connects customers with amazing products.\n\nWe're looking for passionate designers and developers to join our team and create something amazing together.",meetingFrequency:"2-3 times/week",deadline:"Dec 15, 2024",contactInfo:{discord:"project_lead#1234",email:"project.lead@email.com"},status:"in_progress",vision:{tagline:"Building the future of creative collaboration",narrative:"We're creating a platform that connects talented designers and developers to build amazing digital experiences together. Our vision is to make collaboration seamless, inspiring, and productive.\n\nThis project will showcase the power of interdisciplinary teamwork and innovative design thinking. We're looking for passionate individuals who share our vision and want to make a real impact.",hiringTargets:["UI/UX Designer","Frontend Developer","Motion Designer"],contact:{discord:"project_lead#1234",email:"project.lead@email.com"}},milestones:[{id:1,title:"Project Planning",status:"completed",dueDate:"Week 1"},{id:2,title:"Design Phase",status:"completed",dueDate:"Week 3"},{id:3,title:"Development Phase",status:"in-progress",dueDate:"Week 6"},{id:4,title:"Testing & QA",status:"pending",dueDate:"Week 8"},{id:5,title:"Launch Preparation",status:"pending",dueDate:"Week 10"}]}})(o),I=[{id:1,title:"UI/UX Designer",description:"We're looking for a talented UI/UX designer to create beautiful, intuitive user interfaces and engaging user experiences. You'll work closely with our development team to bring designs to life.",status:"available",applications:12,skills:["Figma","Adobe Creative Suite","User Research","Prototyping","Design Systems"]},{id:2,title:"Frontend Developer",description:"Join our frontend team to build responsive, performant web applications using modern technologies. You'll collaborate with designers and backend developers to create seamless user experiences.",status:"available",applications:8,skills:["React","TypeScript","CSS/SCSS","JavaScript","Responsive Design"]},{id:3,title:"Motion Designer",description:"Create stunning animations and motion graphics that enhance user engagement and bring our digital experiences to life. You'll work on micro-interactions, loading states, and brand animations.",status:"filled",applications:15,skills:["After Effects","Lottie","Principle","Animation","Storyboarding"]}];return(0,e.useEffect)(()=>{const e=()=>{N((0,ct.HW)())};return window.addEventListener("user:changed",e),()=>{window.removeEventListener("user:changed",e)}},[]),(0,e.useEffect)(()=>{null!==_&&void 0!==_&&_.id&&(async()=>{try{const e=await zt.zF.checkFavoriteStatus("collaboration",_.id);e.success&&l(e.data.isFavorited)}catch(e){console.error("Failed to check favorite status:",e)}})()},[null===_||void 0===_?void 0:_.id]),{project:_,projectData:o,positions:I,appliedPositions:n,isSaved:i,activePositionTab:c,selectedPosition:u,comment:m,showApplyModal:g,applyForm:v,hasSubmittedApplication:b,showWarning:w,currentUser:j,positionComments:C,enableProjectProgressBar:!0,enableAfterFinishedReview:!0,enableReviewApprovalPanel:!1,setAppliedPositions:s,setIsSaved:l,setActivePositionTab:d,setSelectedPosition:h,setComment:p,setShowApplyModal:f,setApplyForm:x,setHasSubmittedApplication:y,setShowWarning:k,setCurrentUser:N,setPositionComments:S}})(),o=((e,t)=>{const{goBack:r,navigateToMilestone:a,navigateToArtist:o}=kr(),{appliedPositions:n,selectedPosition:s,comment:i,positionComments:l,hasSubmittedApplication:c,showWarning:d}=e,{setAppliedPositions:u,setSelectedPosition:h,setComment:m,setPositionComments:p,setHasSubmittedApplication:g,setShowWarning:f,setShowApplyModal:v,setApplyForm:x,setIsSaved:b,setActivePositionTab:y}=t;return{goBack:r,navigateToMilestone:a,navigateToArtist:o,handleApply:e=>{if(!c)return f(!0),void setTimeout(()=>f(!1),3e3);u(t=>{const r=new Set(t);return r.add(e),r})},handleApplyNowClick:()=>{g(!0),v(!0)},handleApplySubmit:e=>{e.preventDefault(),v(!1),x({name:"",email:"",portfolio:"",message:""})},handleApplyFormChange:e=>{const{name:t,value:r}=e.target;x(e=>({...e,[t]:r}))},handleViewMilestones:()=>{a(e.project)},handleSaveToggle:async(e,t,r)=>{try{await zt.zF.toggleFavorite(e,t,r),b(r)}catch(a){console.error("Failed to toggle favorite:",a)}},handleCommentSubmit:t=>{var r,a,o;if(t.preventDefault(),!i.trim()||!s)return;const n={id:Date.now(),user:(null===(r=e.currentUser)||void 0===r?void 0:r.name)||"Anonymous",avatar:(null===(a=e.currentUser)||void 0===a?void 0:a.avatar)||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",role:(null===(o=e.currentUser)||void 0===o?void 0:o.role)||"User",comment:i,timestamp:"Just now",likes:0};p(e=>({...e,[s]:[n,...e[s]]})),m("")},handlePositionTabClick:(e,t)=>{h(e),y(t)},getStatusColor:va,getStatusText:xa}})(a,{setAppliedPositions:a.setAppliedPositions,setSelectedPosition:a.setSelectedPosition,setComment:a.setComment,setPositionComments:a.setPositionComments,setHasSubmittedApplication:a.setHasSubmittedApplication,setShowWarning:a.setShowWarning,setShowApplyModal:a.setShowApplyModal,setApplyForm:a.setApplyForm,setIsSaved:a.setIsSaved,setActivePositionTab:a.setActivePositionTab});return(0,e.useEffect)(()=>{var e;"tagme"===(null===(e=r.state)||void 0===e?void 0:e.from)||t.navigationHistory.length>0&&"/tagme"===t.navigationHistory[t.navigationHistory.length-1].path||window.scrollTo({top:0,behavior:"auto"})},[r.state,t.navigationHistory]),(0,dt.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,dt.jsx)(aa,{project:a.project,isSaved:a.isSaved,onBack:o.goBack,onSaveToggle:o.handleSaveToggle,onApplyNow:o.handleApplyNowClick,onViewMilestones:o.handleViewMilestones,enableProjectProgressBar:a.enableProjectProgressBar}),(0,dt.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,dt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,dt.jsx)(fa,{project:a.project,enableAfterFinishedReview:a.enableAfterFinishedReview,currentUser:a.currentUser,projectData:a.projectData}),(0,dt.jsxs)("div",{className:"lg:col-span-1",children:[(0,dt.jsx)(ka,{project:a.project,owner:a.project.author,currentUser:null,eligibility:{isMemberCompleted:!0}}),a.enableReviewApprovalPanel&&(0,dt.jsx)("div",{className:"mt-6",children:(0,dt.jsx)(ea,{projectId:a.project.id,isOwner:!0})})]})]}),(0,dt.jsx)(na,{positions:a.positions,hasSubmittedApplication:a.hasSubmittedApplication,showWarning:a.showWarning,appliedPositions:a.appliedPositions,selectedPosition:a.selectedPosition,activePositionTab:a.activePositionTab,comment:a.comment,positionComments:a.positionComments,onApply:o.handleApply,onPositionTabClick:o.handlePositionTabClick,onCommentChange:e=>a.setComment(e.target.value),onSubmitComment:o.handleCommentSubmit,navigateToArtist:o.navigateToArtist,getStatusColor:o.getStatusColor,getStatusText:o.getStatusText})]}),(0,dt.jsx)(ta,{isOpen:a.showApplyModal,onClose:()=>a.setShowApplyModal(!1),applyForm:a.applyForm,onFormChange:o.handleApplyFormChange,onSubmit:o.handleApplySubmit})]})},Na=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},Ca=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>Boolean(e)&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},Sa=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var _a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ia=(0,e.forwardRef)((t,r)=>{let{color:a="currentColor",size:o=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:i="",children:l,iconNode:c,...d}=t;return(0,e.createElement)("svg",{ref:r,..._a,width:o,height:o,stroke:a,strokeWidth:s?24*Number(n)/Number(o):n,className:Ca("lucide",i),...!l&&!Sa(d)&&{"aria-hidden":"true"},...d},[...c.map(t=>{let[r,a]=t;return(0,e.createElement)(r,a)}),...Array.isArray(l)?l:[l]])}),Ea=(t,r)=>{const a=(0,e.forwardRef)((a,o)=>{let{className:n,...s}=a;return(0,e.createElement)(Ia,{ref:o,iconNode:r,className:Ca(`lucide-${i=Na(t),i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${t}`,n),...s});var i});return a.displayName=Na(t),a},Pa=Ea("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Aa="Modal_overlay__P+H2T",Ta="Modal_modal__rilJw",La="Modal_closeButton__9bf7g",Ma="Modal_content__pgGBX",Da="Modal_title__Wb1XE",Ra="Modal_body__UvKYn",$a="Modal_emailLink__FjN3V",Fa="Modal_divider__RvwIc",Oa="Modal_signature__g8MvT",Ua="Modal_actions__o32Lt",za="Modal_primaryButton__lttlk",Wa=e=>{let{isOpen:t,onClose:r,onGoToCompetition:a}=e;if(!t)return null;return(0,dt.jsx)("div",{className:Aa,onClick:e=>{e.target===e.currentTarget&&r()},children:(0,dt.jsxs)("div",{className:Ta,children:[(0,dt.jsx)("button",{className:La,onClick:r,children:(0,dt.jsx)(Pa,{size:20})}),(0,dt.jsxs)("div",{className:Ma,children:[(0,dt.jsx)("h2",{className:Da,children:"Student Competitions 2025 \u2014 Notice"}),(0,dt.jsxs)("div",{className:Ra,children:[(0,dt.jsx)("p",{children:"This competition is currently in testing (beta)."}),(0,dt.jsx)("p",{children:"Some website features are still under development and will be released gradually."}),(0,dt.jsxs)("p",{children:["If you have any questions, please email:"," ",(0,dt.jsx)("a",{href:"mailto:tag@rainwang.art",className:$a,children:"tag@rainwang.art"})]})]}),(0,dt.jsx)("div",{className:Fa}),(0,dt.jsx)("div",{className:Oa,children:(0,dt.jsx)("p",{children:"Founder of TAG \u2014 Rain Wang"})}),(0,dt.jsx)("div",{className:Ua,children:(0,dt.jsx)("button",{className:za,onClick:()=>{a(),r()},children:"I Understand"})})]})]})})},Ba=()=>{const[t,r]=(0,e.useState)(!1);return(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsx)("section",{className:"py-16 bg-white",children:(0,dt.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[(0,dt.jsx)("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-tag-blue mb-6",children:"Student Competitions 2025"}),(0,dt.jsx)("p",{className:"text-lg md:text-xl text-tag-blue mb-8 max-w-2xl mx-auto leading-relaxed opacity-90",children:"Participate in exciting design challenges and win recognition from industry professionals."}),(0,dt.jsxs)("button",{onClick:e=>{e.preventDefault(),r(!0)},className:"bg-tag-blue text-white px-8 py-3 rounded-md text-lg font-medium hover:bg-tag-dark-blue transition-colors duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1 inline-flex items-center",children:[(0,dt.jsx)("svg",{className:"w-6 h-6 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Join Now"]})]})}),(0,dt.jsx)(Wa,{isOpen:t,onClose:()=>{r(!1)},onGoToCompetition:()=>{window.location.href="/tagme/co-future-2025"}})]})},qa=t=>{let{onArtistClick:r}=t;const[a,o]=(0,e.useState)([]),[n,s]=(0,e.useState)(!0),[i,l]=(0,e.useState)(null);(0,e.useEffect)(()=>{c()},[]);const c=async()=>{try{s(!0);const e=await zt.$F.getPublicArtists();e&&e.success?(console.log("[ArtistsList] Loaded artists:",e.data.length),o(e.data)):(console.error("[ArtistsList] Failed to load artists:",null===e||void 0===e?void 0:e.error),l("Failed to load artists"))}catch(i){console.error("[ArtistsList] Error loading artists:",i),l("Error loading artists")}finally{s(!1)}};return n?(0,dt.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,dt.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-tag-blue"}),(0,dt.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading artists..."})]}):i?(0,dt.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,dt.jsxs)("div",{className:"text-red-500 text-center",children:[(0,dt.jsx)("p",{className:"text-lg font-medium",children:"Error loading artists"}),(0,dt.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:i}),(0,dt.jsx)("button",{onClick:c,className:"mt-4 px-4 py-2 bg-tag-blue text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Try Again"})]})}):0===a.length?(0,dt.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("p",{className:"text-lg font-medium text-gray-900",children:"No artists found"}),(0,dt.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Check back later for new artists"})]})}):(0,dt.jsx)("div",{className:"space-y-0",children:a.map(e=>{var t,r;return(0,dt.jsx)(rt,{to:`/artist/${e.id}`,className:"group cursor-pointer bg-white border-b border-gray-200 p-6 hover:bg-gray-50 transition-all duration-300 block",children:(0,dt.jsxs)("div",{className:"flex gap-4",children:[(0,dt.jsx)("div",{className:"flex-shrink-0",children:(0,dt.jsx)("img",{src:e.avatar||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face",alt:e.name,className:"w-40 h-32 object-cover rounded-lg group-hover:scale-105 transition-transform duration-300"})}),(0,dt.jsxs)("div",{className:"flex-1 flex flex-col justify-center",children:[(0,dt.jsxs)("div",{className:"flex items-center mb-3",children:[(0,dt.jsx)("img",{src:e.avatar||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face",alt:e.name,className:"w-10 h-10 rounded-full mr-3"}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-base font-medium text-gray-900",children:e.name}),(0,dt.jsx)("span",{className:"text-sm text-gray-500 ml-2",children:e.role})]})]}),(0,dt.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2 group-hover:text-tag-blue transition-colors duration-200",children:e.name}),(0,dt.jsx)("p",{className:"text-sm text-gray-600 mb-4 leading-relaxed",children:e.bio||"No bio available"}),(0,dt.jsxs)("div",{className:"flex items-center gap-6 text-sm text-gray-500",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-1",children:[(0,dt.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),(0,dt.jsxs)("span",{children:[(null===(t=e.works)||void 0===t?void 0:t.length)||0," works"]})]}),(0,dt.jsxs)("div",{className:"flex items-center gap-1",children:[(0,dt.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),(0,dt.jsxs)("span",{children:[e.followers||0," followers"]})]}),(0,dt.jsx)("span",{className:`px-2 py-1 text-xs font-medium text-white rounded-full ${r=e.role,{"Visual Effects":"bg-blue-500","Game Design":"bg-purple-500","UI/UX":"bg-green-500",Illustration:"bg-pink-500","Fine Art":"bg-yellow-500","3D Model":"bg-indigo-500",Animation:"bg-red-500",Photography:"bg-gray-500"}[r]||"bg-gray-500"}`,children:e.role}),e.school&&(0,dt.jsx)("span",{className:"text-gray-400",children:e.school})]})]})]})},e.id)})})},Ha=t=>{let{currentUser:r}=t;const{navigateToWork:a,navigateToArtist:o}=kr(),[n,s]=(0,e.useState)([]),[i,l]=(0,e.useState)(!0),[c,d]=(0,e.useState)(null),u=(0,e.useCallback)(async()=>{try{l(!0),d(null);const e=await(0,Er.S5)();if(e.success){const t=e.data.filter(e=>e&&e.id).map(e=>{var t;const r=e.thumbnailPath||e.imagePaths&&e.imagePaths[0]||"/assets/placeholder.svg";return console.log(`[GalleryGrid] Item ${e.id}:`,{title:e.title,thumbnailPath:e.thumbnailPath,imagePaths:e.imagePaths,finalImage:"string"===typeof r?r.substring(0,50)+"...":"Invalid image type"}),{id:e.id||"unknown",title:e.title||"Untitled",artist:(null===(t=e.profiles)||void 0===t?void 0:t.full_name)||"Unknown Artist",image:r,category:e.category||"design",tags:e.tags||[],description:e.description||"",createdAt:e.createdAt||(new Date).toISOString()}});s(t)}else d(e.error||"Failed to load artworks"),s([])}catch(c){console.error("Error loading artworks:",c),d("Failed to load artworks"),s([])}finally{l(!1)}},[]);(0,e.useEffect)(()=>{u()},[u]);const h=n;return i?(0,dt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-0",children:[...Array(6)].map((e,t)=>(0,dt.jsx)("div",{className:"aspect-square bg-gray-200 animate-pulse"},t))}):c?(0,dt.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,dt.jsx)("div",{className:"text-gray-400 mb-4",children:(0,dt.jsx)("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Failed to load artworks"}),(0,dt.jsx)("p",{className:"text-gray-600 mb-4",children:c}),(0,dt.jsx)("button",{onClick:u,className:"px-4 py-2 bg-tag-blue text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Try Again"})]}):0===h.length?(0,dt.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,dt.jsx)("div",{className:"text-gray-400 mb-4",children:(0,dt.jsx)("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No artworks found"}),(0,dt.jsx)("p",{className:"text-gray-600 mb-4",children:"Be the first to upload your work and share it with the community!"}),(0,dt.jsx)(rt,{to:"/upload",className:"px-4 py-2 bg-tag-blue text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Upload Your Work"})]}):(0,dt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-0",children:h.map(e=>(0,dt.jsxs)(rt,{to:`/work/${e.id}`,className:"group cursor-pointer relative overflow-hidden aspect-square w-full h-full",children:[(0,dt.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",style:{display:"block"}}),(0,dt.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:(0,dt.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-4 text-white",children:[(0,dt.jsx)("h3",{className:"text-lg font-bold mb-1 leading-tight",children:e.title}),(0,dt.jsxs)("p",{className:"text-sm text-gray-200 mb-2",children:["by ",e.artist]}),(0,dt.jsx)("span",{className:"inline-block px-2 py-1 text-xs font-medium bg-tag-blue text-white rounded-full",children:e.category})]})})]},e.id))})},Ga=()=>{const[t,r]=(0,e.useState)(new Set),a=e=>{let{rating:t,reviews:r}=e;const a=[];for(let o=0;o<5;o++)o<t?a.push((0,dt.jsx)("svg",{className:"h-4 w-4 text-yellow-400 fill-current",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{d:"M10 15.27L16.18 19l-1.64-7.03L20 7.24l-7.19-.61L10 0 7.19 6.63 0 7.24l5.46 4.73L3.82 19z"})},o)):a.push((0,dt.jsx)("svg",{className:"h-4 w-4 text-gray-300 fill-current",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{d:"M10 15.27L16.18 19l-1.64-7.03L20 7.24l-7.19-.61L10 0 7.19 6.63 0 7.24l5.46 4.73L3.82 19z"})},o));return(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)("div",{className:"flex mr-1",children:a}),(0,dt.jsxs)("span",{className:"text-sm text-gray-500",children:["(",r,")"]})]})};return(0,dt.jsxs)("div",{className:"py-8",children:[(0,dt.jsx)("div",{className:"text-center py-8 mb-8",children:(0,dt.jsx)("p",{className:"text-red-500 text-lg font-medium",children:"Market feature coming soon..."})}),(0,dt.jsxs)("div",{className:"mb-8",children:[(0,dt.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-2 text-center",children:"Marketplace Preview"}),(0,dt.jsx)("p",{className:"text-gray-600 text-center mb-8",children:"Discover student-created assets, tools, and resources"})]}),(0,dt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{id:1,image:"https://images.unsplash.com/photo-1517694712202-14dd9538aa97?w=400&h=300&fit=crop",title:"Auto Retopology Tool",description:"Advanced mesh optimization plugin for Blender",price:"$15",originalPrice:"$25",author:"Alex Chen",authorAvatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",rating:5,reviews:24,downloads:"1.2k"},{id:2,image:"https://images.unsplash.com/photo-1599305445671-ac291c9a87bb?w=400&h=300&fit=crop",title:"Sci-Fi Character Pack",description:"High-poly character models with PBR textures",price:"$45",originalPrice:null,author:"Maya Rodriguez",authorAvatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",rating:4,reviews:856,downloads:"856"},{id:3,image:"https://images.unsplash.com/photo-1542831371-29b0f74f9713?w=400&h=300&fit=crop",title:"Procedural Building Generator",description:"Generate realistic buildings with customizable parameters",price:"$79",originalPrice:"$99",author:"John Doe",authorAvatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face",rating:4,reviews:120,downloads:"3.5k"},{id:4,image:"https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=400&h=300&fit=crop",title:"Ocean Shader Pack",description:"Realistic ocean shaders for various rendering engines",price:"$29",originalPrice:null,author:"Oceanic Arts",authorAvatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop&crop=face",rating:5,reviews:78,downloads:"900"},{id:5,image:"https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=400&h=300&fit=crop",title:"UI Kit - Modern Dashboard",description:"Complete UI kit for modern web applications",price:"$35",originalPrice:"$50",author:"Design Studio",authorAvatar:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=100&h=100&fit=crop&crop=face",rating:5,reviews:156,downloads:"2.1k"},{id:6,image:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=300&fit=crop",title:"Animation Rigging System",description:"Professional character rigging for Maya and Blender",price:"$89",originalPrice:null,author:"Animation Pro",authorAvatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=100&h=100&fit=crop&crop=face",rating:4,reviews:203,downloads:"1.8k"}].map(e=>(0,dt.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-4 hover:shadow-md transition-all duration-300 cursor-pointer group",children:[(0,dt.jsxs)("div",{className:"relative mb-4",children:[(0,dt.jsx)("img",{src:e.image,alt:e.title,className:"w-full aspect-[4/3] object-cover rounded-lg"}),(0,dt.jsx)("button",{onClick:t=>{var a;t.stopPropagation(),a=e.id,r(e=>{const t=new Set(e);return t.has(a)?t.delete(a):t.add(a),t})},className:"absolute top-2 right-2 p-2 bg-white/80 backdrop-blur-sm rounded-full hover:bg-white transition-colors duration-200",children:(0,dt.jsx)("svg",{className:"w-5 h-5 "+(t.has(e.id)?"text-red-500 fill-current":"text-gray-400 hover:text-red-500"),fill:t.has(e.id)?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]}),(0,dt.jsxs)("div",{className:"space-y-3",children:[(0,dt.jsx)("h4",{className:"text-lg font-bold text-gray-900 group-hover:text-tag-blue transition-colors duration-200",children:e.title}),(0,dt.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.description}),(0,dt.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,dt.jsx)("span",{className:"text-xl font-bold text-tag-blue",children:e.price}),e.originalPrice&&(0,dt.jsx)("span",{className:"text-sm text-gray-400 line-through",children:e.originalPrice})]}),(0,dt.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,dt.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),(0,dt.jsxs)("span",{children:[e.downloads," downloads"]})]}),(0,dt.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)("img",{src:e.authorAvatar,alt:e.author,className:"w-6 h-6 rounded-full mr-2"}),(0,dt.jsx)("span",{className:"text-sm text-gray-700",children:e.author})]}),(0,dt.jsx)(a,{rating:e.rating,reviews:e.reviews})]})]})]},e.id))})]})},Va=()=>{const[t,r]=(0,e.useState)("Works"),[a,o]=(0,e.useState)(!0),[n,s]=(0,e.useState)((0,ct.HW)()),{navigateToArtist:i}=kr(),{state:l}=pr(),c=Z();(0,e.useEffect)(()=>{var e;if("upload-success"===(null===(e=c.state)||void 0===e?void 0:e.from))r(c.state.activeTab||"Works"),c.state.scrollToGallery?requestAnimationFrame(()=>{const e=document.querySelector('[data-section="gallery"]');if(e){const t=e.getBoundingClientRect(),r=window.pageYOffset+t.top-80;window.scrollTo({top:r,behavior:"auto"})}o(!1)}):o(!1),window.history.replaceState({},document.title);else{const e=l.scrollPositions["/"];if(void 0!==e&&requestAnimationFrame(()=>{window.scrollTo({top:e,behavior:"auto"})}),l.navigationHistory.length>0){const e=l.navigationHistory[l.navigationHistory.length-1];e.activeTab&&"gallery"===e.from&&!e.fromNavbar?r(e.activeTab):r("Works")}else r("Works");o(!1)}},[c.state,l.scrollPositions,l.navigationHistory]),(0,e.useEffect)(()=>{const e=()=>{s((0,ct.HW)())};return window.addEventListener("user:changed",e),()=>{window.removeEventListener("user:changed",e)}},[]);const d=["Works","Artists","Market"];return a?(0,dt.jsx)("section",{className:"py-16 bg-gray-50","data-section":"gallery",children:(0,dt.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,dt.jsxs)("div",{className:"flex flex-col mb-8",children:[(0,dt.jsx)("h2",{className:"text-3xl font-bold text-gray-400 mb-6",children:"TAG Gallery"}),(0,dt.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,dt.jsx)("div",{className:"w-7/12",children:(0,dt.jsx)("div",{className:"h-10 bg-gray-200 rounded-md animate-pulse"})}),(0,dt.jsx)("div",{className:"inline-flex rounded-full border border-gray-300 bg-white p-1",children:d.map(e=>(0,dt.jsxs)("button",{className:"relative px-12 py-3 text-base font-semibold tracking-wide "+(t===e?"text-white":"text-gray-700"),children:[t===e&&(0,dt.jsx)("div",{className:"absolute inset-0 bg-tag-blue rounded-full"}),(0,dt.jsx)("span",{className:"relative z-10",children:e})]},e))})]})]}),(0,dt.jsx)("div",{className:"flex-1",children:(0,dt.jsx)("div",{className:"animate-pulse",children:(0,dt.jsx)("div",{className:"h-64 bg-gray-200 rounded-lg"})})})]})}):(0,dt.jsx)("section",{className:"py-16 bg-gray-50","data-section":"gallery",children:(0,dt.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,dt.jsxs)("div",{className:"flex flex-col mb-8",children:[(0,dt.jsx)("h2",{className:"text-3xl font-bold text-gray-400 mb-6",children:"TAG Gallery"}),(0,dt.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,dt.jsx)("div",{className:"w-7/12",children:(0,dt.jsx)(gt,{onInputChange:e=>console.log("Search:",e.target.value),placeholder:"Search for Works or Artists",className:"w-full"})}),(0,dt.jsx)("div",{className:"inline-flex rounded-full border border-gray-300 bg-white p-1",children:d.map((e,a)=>(0,dt.jsxs)("button",{onClick:()=>r(e),className:"relative px-12 py-3 text-base font-semibold tracking-wide transition-all duration-300 ease-in-out "+(t===e?"text-white":"text-gray-700 hover:text-gray-900"),children:[t===e&&(0,dt.jsx)("div",{className:"absolute inset-0 bg-tag-blue rounded-full transition-all duration-300 ease-in-out"}),(0,dt.jsx)("span",{className:"relative z-10",children:e})]},e))})]})]}),(0,dt.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,dt.jsx)("div",{className:"hidden lg:block lg:w-64 flex-shrink-0",children:(0,dt.jsx)(vr,{})}),(0,dt.jsxs)("div",{className:"flex-1",children:["Works"===t&&(0,dt.jsx)(Ha,{currentUser:n}),"Artists"===t&&(0,dt.jsx)(qa,{onArtistClick:e=>{i(e.id,"gallery",t)}}),"Market"===t&&(0,dt.jsx)(Ga,{})]})]})]})})},Ja=()=>(0,dt.jsx)("section",{className:"pt-20 pb-16 bg-white",children:(0,dt.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[(0,dt.jsx)("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 mb-6",children:"Discover Amazing Student Creative Work"}),(0,dt.jsx)("p",{className:"text-lg md:text-xl text-gray-600 mb-8 max-w-3xl mx-auto leading-relaxed",children:"Explore thousands of inspiring projects from talented students across the globe. From 3D art to concept design, find your next creative inspiration."}),(0,dt.jsx)("button",{onClick:()=>{},className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-md text-lg font-medium hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:"About TAG"})]})}),Ka=()=>{const t=ee(),{login:r}=ht(),[a,o]=(0,e.useState)({email:"",password:"",rememberMe:!1}),[n,s]=(0,e.useState)(!1),i=e=>{const{name:t,value:r,type:a,checked:n}=e.target;o(e=>({...e,[t]:"checkbox"===a?n:r}))};return(0,dt.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[(0,dt.jsx)("div",{className:"flex-1 flex items-center justify-center px-4 sm:px-6 lg:px-8",children:(0,dt.jsx)("div",{className:"max-w-md w-full space-y-8",children:(0,dt.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,dt.jsx)("div",{className:"text-center mb-8",children:(0,dt.jsx)("img",{src:"/TAG_Logo.png",alt:"TAG Logo",className:"h-12 w-auto mx-auto mb-6"})}),(0,dt.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),s(!0);try{const e=await r(a.email,a.password);e.success?t("/"):console.error("Login failed:",e.error)}catch(o){console.error("Login error:",o)}finally{s(!1)}},className:"space-y-6",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Student Email"}),(0,dt.jsxs)("div",{className:"relative",children:[(0,dt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,dt.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,dt.jsx)("input",{id:"email",name:"email",type:"email",required:!0,value:a.email,onChange:i,placeholder:"your.name@university.edu",className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-tag-blue focus:border-tag-blue sm:text-sm"})]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,dt.jsxs)("div",{className:"relative",children:[(0,dt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,dt.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,dt.jsx)("input",{id:"password",name:"password",type:"password",required:!0,value:a.password,onChange:i,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-tag-blue focus:border-tag-blue sm:text-sm"})]})]}),(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)("input",{id:"rememberMe",name:"rememberMe",type:"checkbox",checked:a.rememberMe,onChange:i,className:"h-4 w-4 text-tag-blue focus:ring-tag-blue border-gray-300 rounded"}),(0,dt.jsx)("label",{htmlFor:"rememberMe",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),(0,dt.jsx)("div",{className:"text-sm",children:(0,dt.jsx)("a",{href:"#",className:"font-medium text-tag-blue hover:text-tag-dark-blue",children:"Forgot password?"})})]}),(0,dt.jsxs)("button",{type:"submit",disabled:n,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-tag-blue hover:bg-tag-dark-blue focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-tag-blue disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[n?(0,dt.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,dt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,dt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,n?"Signing in...":"Sign in"]})]}),(0,dt.jsx)("div",{className:"mt-6 flex justify-center",children:(0,dt.jsx)(rt,{to:"/register",className:"w-full flex justify-center py-3 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-tag-blue transition-colors duration-200",children:"Register"})})]})})}),(0,dt.jsx)("footer",{className:"bg-white border-t border-gray-200",children:(0,dt.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,dt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,dt.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,dt.jsx)("span",{className:"font-bold",children:"Tech Art Guide"}),(0,dt.jsx)("span",{className:"ml-2",children:"\xa9 2025 TAG. All rights reserved."})]}),(0,dt.jsxs)("div",{className:"flex space-x-6 text-sm text-gray-500",children:[(0,dt.jsx)("a",{href:"#",className:"hover:text-gray-700",children:"Privacy Policy"}),(0,dt.jsx)("a",{href:"#",className:"hover:text-gray-700",children:"Terms of Service"}),(0,dt.jsx)("a",{href:"#",className:"hover:text-gray-700",children:"Help Center"})]})]})})})]})},Ya=e=>{let{comment:t,onCommentChange:r,onCommentSubmit:a,comments:o,onNavigateToArtist:n}=e;return(0,dt.jsxs)("div",{className:"space-y-6",children:[(0,dt.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,dt.jsxs)("form",{onSubmit:a,className:"space-y-4",children:[(0,dt.jsx)("textarea",{value:t,onChange:r,placeholder:"Share your thoughts, feedback, or questions...",className:"w-full p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:"3"}),(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsxs)("button",{type:"button",className:"flex items-center gap-2 text-sm text-gray-600 hover:text-gray-800 transition-colors duration-200",children:[(0,dt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),"Attach Image"]}),(0,dt.jsx)("button",{type:"submit",disabled:!t.trim(),className:"bg-purple-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-purple-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Comment"})]})]})}),(0,dt.jsx)("div",{className:"space-y-4",children:o.map(e=>(0,dt.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,dt.jsxs)("div",{className:"flex items-start gap-4",children:[(0,dt.jsx)(rt,{to:`/artist/${e.user}`,className:"w-10 h-10 rounded-full flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity duration-200",children:(0,dt.jsx)("img",{src:e.avatar,alt:e.user,className:"w-10 h-10 rounded-full"})}),(0,dt.jsxs)("div",{className:"flex-1",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,dt.jsx)(rt,{to:`/artist/${e.user}`,className:"font-medium text-gray-900 cursor-pointer hover:text-tag-blue transition-colors duration-200",children:e.user}),(0,dt.jsx)("span",{className:"text-xs text-gray-500",children:"\u2022"}),(0,dt.jsx)("span",{className:"text-xs text-gray-500",children:e.role}),(0,dt.jsx)("span",{className:"text-xs text-gray-500",children:"\u2022"}),(0,dt.jsx)("span",{className:"text-xs text-gray-500",children:e.timestamp})]}),(0,dt.jsx)("p",{className:"text-gray-700 mb-3",children:e.comment}),(0,dt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,dt.jsxs)("button",{className:"flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700 transition-colors duration-200",children:[(0,dt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),e.likes]}),(0,dt.jsx)("button",{className:"text-sm text-gray-500 hover:text-gray-700 transition-colors duration-200",children:"Reply"})]})]})]})},e.id))})]})},Za=e=>{let{goBack:t,project:r}=e;return(0,dt.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,dt.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,dt.jsxs)("button",{onClick:t,className:"flex items-center text-gray-600 hover:text-gray-900 mb-6 transition-colors duration-200",children:[(0,dt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to TAGMe"]}),(0,dt.jsxs)("div",{className:"flex items-center text-sm text-gray-500 mb-4",children:[(0,dt.jsx)("button",{onClick:t,className:"hover:text-tag-blue transition-colors duration-200",children:"TAGMe"}),(0,dt.jsx)("span",{className:"mx-2",children:"/"}),(0,dt.jsx)("span",{children:"Milestones"}),(0,dt.jsx)("span",{className:"mx-2",children:"/"}),(0,dt.jsx)("span",{className:"text-gray-900 font-medium",children:r.title})]})]})})},Qa=e=>{let{project:t,onNavigateToArtist:r}=e;return(0,dt.jsxs)("div",{className:"space-y-6",children:[(0,dt.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,dt.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Project Details"}),(0,dt.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,dt.jsxs)("div",{className:"flex justify-between",children:[(0,dt.jsx)("span",{className:"text-gray-600",children:"Due Date:"}),(0,dt.jsx)("span",{className:"font-medium",children:t.dueDate})]}),(0,dt.jsxs)("div",{className:"flex justify-between",children:[(0,dt.jsx)("span",{className:"text-gray-600",children:"Project Type:"}),(0,dt.jsx)("span",{className:"font-medium",children:t.projectType})]}),(0,dt.jsxs)("div",{className:"flex justify-between",children:[(0,dt.jsx)("span",{className:"text-gray-600",children:"Team Size:"}),(0,dt.jsxs)("span",{className:"font-medium",children:[t.teamSize," Members"]})]})]})]}),(0,dt.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,dt.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Tags"}),(0,dt.jsx)("div",{className:"flex flex-wrap gap-2",children:t.tags.map((e,t)=>(0,dt.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 text-xs font-medium rounded-full",children:e},t))})]}),(0,dt.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,dt.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Team Members"}),(0,dt.jsx)("div",{className:"space-y-3",children:t.teamMembers.map((e,t)=>(0,dt.jsxs)(rt,{to:`/artist/${e.id}`,className:"flex items-center gap-3 cursor-pointer hover:bg-gray-100 p-2 rounded-lg transition-colors duration-200",children:[(0,dt.jsx)("img",{src:e.artistAvatar,alt:e.artist,className:"w-8 h-8 rounded-full"}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"text-sm font-medium text-gray-900 hover:text-tag-blue transition-colors duration-200",children:e.artist}),(0,dt.jsx)("div",{className:"text-xs text-gray-500",children:e.role})]})]},t))})]})]})},Xa=e=>{let{project:t,onViewProject:r}=e;return(0,dt.jsxs)("div",{className:"lg:col-span-2",children:[(0,dt.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:t.title}),(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,dt.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Overall Progress"}),(0,dt.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[t.progress,"%"]})]}),(0,dt.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,dt.jsx)("div",{className:"bg-purple-600 h-3 rounded-full transition-all duration-500",style:{width:`${t.progress}%`}})}),(0,dt.jsxs)("div",{className:"mt-12 mb-4",children:[(0,dt.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Looking For"}),(0,dt.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,dt.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 text-sm font-medium rounded-full",children:"UI/UX Designer"}),(0,dt.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 text-sm font-medium rounded-full",children:"Frontend Developer"}),(0,dt.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 text-sm font-medium rounded-full",children:"Motion Designer"}),(0,dt.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 text-sm font-medium rounded-full",children:"Product Manager"})]})]}),(0,dt.jsx)("div",{className:"flex justify-end",children:(0,dt.jsx)("button",{onClick:r,className:"bg-purple-600 text-white py-3 px-8 rounded-lg font-medium hover:bg-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:"View & Apply"})}),(0,dt.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"TAGMe Vision"}),(0,dt.jsx)("div",{className:"mb-4",children:(0,dt.jsx)("p",{className:"text-gray-700 italic text-lg",children:'"Building the future of creative collaboration"'})}),(0,dt.jsxs)("div",{className:"mb-4",children:[(0,dt.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-2",children:"TAG This Project"}),(0,dt.jsx)("div",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap text-sm",children:"We're creating a platform that connects talented designers and developers to build amazing digital experiences together. Our vision is to make collaboration seamless, inspiring, and productive. This project will showcase the power of interdisciplinary teamwork and innovative design thinking. We're looking for passionate individuals who share our vision and want to make a real impact. Join us in building something extraordinary that will revolutionize how creative teams work together."})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-2",children:"Contact"}),(0,dt.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,dt.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"})}),(0,dt.jsx)("span",{children:"project_lead#1234"})]}),(0,dt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,dt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),(0,dt.jsx)("span",{children:"project.lead@email.com"})]})]})]})]})]})]})},eo=e=>({completed:"Completed","in-progress":"In Progress",upcoming:"Upcoming"}[e]||"Unknown"),to=e=>{let{milestones:t}=e;return(0,dt.jsx)("div",{className:"space-y-6",children:t.map((e,t)=>{return(0,dt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,dt.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:e.title}),(0,dt.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,dt.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,dt.jsxs)("span",{children:["Due: ",e.dueDate]}),e.progress>0&&(0,dt.jsxs)("span",{children:[e.progress,"% complete"]})]})]}),(0,dt.jsx)("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${r=e.status,{completed:"bg-green-100 text-green-800","in-progress":"bg-blue-100 text-blue-800",upcoming:"bg-gray-100 text-gray-800"}[r]||"bg-gray-100 text-gray-800"}`,children:eo(e.status)})]}),e.progress>0&&(0,dt.jsx)("div",{className:"mb-4",children:(0,dt.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,dt.jsx)("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-500",style:{width:`${e.progress}%`}})})}),e.images.length>0&&(0,dt.jsx)("div",{className:"flex gap-3 overflow-x-auto pb-2",children:e.images.map((t,r)=>(0,dt.jsx)("div",{className:"flex-shrink-0",children:(0,dt.jsx)("img",{src:t,alt:`${e.title} preview ${r+1}`,className:"w-24 h-16 object-cover rounded-lg"})},r))})]},e.id);var r})})},ro=t=>{let{state:r,setters:a,actions:o,navigateToCollaboration:n,project:s,comments:i}=t;const{setComment:l}=a;return{handleCommentSubmit:(0,e.useCallback)(e=>{if(e.preventDefault(),r.comment.trim()){const e={id:((null===i||void 0===i?void 0:i.length)||0)+1,user:"You",avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=100&h=100&fit=crop&crop=face",role:"Team Member",comment:r.comment,timestamp:"Just now",likes:0};o.addComment(e),l("")}},[r.comment,i,o,l]),handleApplyToCollaboration:(0,e.useCallback)(()=>{var e,t;console.log("\ud83d\udd0d [DEBUG] handleApplyToCollaboration - project:",s),console.log("\ud83d\udd0d [DEBUG] handleApplyToCollaboration - project.id:",s.id);const r={id:s.id,title:s.title,subtitle:s.description,image:s.images[0]||"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop",categories:s.tags,author:{name:(null===(e=s.teamMembers[0])||void 0===e?void 0:e.artist)||"Project Lead",avatar:(null===(t=s.teamMembers[0])||void 0===t?void 0:t.artistAvatar)||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face"},likes:"1.2k",views:"8.4k"};console.log("\ud83d\udd0d [DEBUG] handleApplyToCollaboration - collaborationProject:",r),console.log("\ud83d\udd0d [DEBUG] handleApplyToCollaboration - collaborationProject.id:",r.id),n(r)},[s,n])}},ao=()=>{const[t,r]=(0,e.useState)("timeline"),[a,o]=(0,e.useState)("");return(0,e.useMemo)(()=>({state:{activeTab:t,comment:a},setters:{setActiveTab:r,setComment:o}}),[t,a])},oo=()=>{var t;const{goBack:r,navigateToArtist:a,navigateToCollaboration:o}=kr(),{state:n,actions:s}=pr(),i=Z(),{id:l}=te(),c=n.selectedMilestone||(null===(t=i.state)||void 0===t?void 0:t.milestone),d=l||(null===c||void 0===c?void 0:c.id)||1,u=((e,t)=>e?{id:t,title:e.title,description:e.description,progress:e.progress||75,dueDate:e.dueDate||"March 15, 2024",projectType:e.projectType||"Project",teamSize:e.teamSize||2,tags:e.tags||["Project"],teamMembers:e.teamMembers||[{id:1,title:"Cyberpunk Street Scene",artist:"Alex Chen",artistAvatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",description:"A futuristic city street with vibrant neon signs and cyberpunk aesthetics",image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop",category:"Visual Effects",likes:"1.2k",views:"8.4k",timeAgo:"2 days ago",role:"Character Designer"},{id:2,title:"Dragon Knight Concept",artist:"Maya Rodriguez",artistAvatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",description:"Detailed illustration of a knight in dark, ornate armor",image:"https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400&h=300&fit=crop",category:"Game Design",likes:"2.1k",views:"12k",timeAgo:"5 days ago",role:"Art Director"}],images:["https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=300&fit=crop","https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400&h=300&fit=crop","https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop","https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=400&h=300&fit=crop"]}:{id:t,title:"Fantasy Character Series",description:"Digital illustration project exploring mythical creatures and fantasy character design. This collaborative project focuses on creating a series of unique characters with distinct personalities and visual styles.",progress:75,dueDate:"March 15, 2024",projectType:"Illustration Project",teamSize:2,tags:["Illustration","Character Design","Digital Art"],teamMembers:[{id:1,title:"Cyberpunk Street Scene",artist:"Alex Chen",artistAvatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",description:"A futuristic city street with vibrant neon signs and cyberpunk aesthetics",image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop",category:"Visual Effects",likes:"1.2k",views:"8.4k",timeAgo:"2 days ago",role:"Character Designer"},{id:2,title:"Dragon Knight Concept",artist:"Maya Rodriguez",artistAvatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",description:"Detailed illustration of a knight in dark, ornate armor",image:"https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400&h=300&fit=crop",category:"Game Design",likes:"2.1k",views:"12k",timeAgo:"5 days ago",role:"Art Director"}],images:["https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=300&fit=crop","https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400&h=300&fit=crop","https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop","https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=400&h=300&fit=crop"]})(c,d),h="Artist Collaborations"===u.projectType?[{id:1,title:"Character Design Collaboration",description:"Collaborated with game studio on character design for fantasy RPG",status:"completed",progress:100,dueDate:"Feb 15, 2024",images:["https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=200&h=150&fit=crop","https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=200&h=150&fit=crop"]},{id:2,title:"UI/UX Design Project",description:"Led design team for mobile app interface redesign",status:"completed",progress:100,dueDate:"Feb 28, 2024",images:["https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=200&h=150&fit=crop"]},{id:3,title:"Animation Short Film",description:"Directed and animated short film for film festival",status:"in-progress",progress:75,dueDate:"March 15, 2024",images:["https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=200&h=150&fit=crop","https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=200&h=150&fit=crop"]},{id:4,title:"Brand Identity Project",description:"Created complete brand identity for startup company",status:"upcoming",progress:0,dueDate:"March 30, 2024",images:[]},{id:5,title:"Illustration Series",description:"Commissioned illustration series for children's book",status:"upcoming",progress:0,dueDate:"April 10, 2024",images:[]}]:[{id:1,title:"Character Concept Sketches",description:"Initial character design exploration and concept development",status:"completed",progress:100,dueDate:"Feb 15, 2024",images:["https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=200&h=150&fit=crop","https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=200&h=150&fit=crop"]},{id:2,title:"Color Palette Development",description:"Establishing the visual color scheme and mood for the series",status:"completed",progress:100,dueDate:"Feb 28, 2024",images:["https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=200&h=150&fit=crop"]},{id:3,title:"Final Character Illustrations",description:"Complete detailed illustrations of all main characters",status:"in-progress",progress:75,dueDate:"March 15, 2024",images:["https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=200&h=150&fit=crop","https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=200&h=150&fit=crop"]},{id:4,title:"Character Expressions & Poses",description:"Creating various expressions and dynamic poses for each character",status:"upcoming",progress:0,dueDate:"March 30, 2024",images:[]},{id:5,title:"Final Presentation & Portfolio",description:"Compiling all work into a professional portfolio presentation",status:"upcoming",progress:0,dueDate:"April 10, 2024",images:[]}];const{comments:m}=n,{state:p,setters:g}=ao(),f=ro({state:p,setters:g,actions:s,navigateToCollaboration:o,project:u,comments:m});return(0,e.useLayoutEffect)(()=>{window.scrollTo({top:0,left:0,behavior:"auto"})},[d]),(0,dt.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,dt.jsx)(Za,{goBack:r,project:u}),(0,dt.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,dt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,dt.jsx)(Xa,{project:u,onViewProject:f.handleApplyToCollaboration}),(0,dt.jsx)(Qa,{project:u,onNavigateToArtist:a})]})}),(0,dt.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,dt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,dt.jsxs)("div",{className:"lg:col-span-1",children:[(0,dt.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Project Preview"}),(0,dt.jsx)("div",{className:"grid grid-cols-2 gap-3",children:u.images.map((e,t)=>(0,dt.jsx)("div",{className:"aspect-square overflow-hidden rounded-lg",children:(0,dt.jsx)("img",{src:e,alt:`Project preview ${t+1}`,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"})},t))})]}),(0,dt.jsxs)("div",{className:"lg:col-span-2",children:[(0,dt.jsxs)("div",{className:"flex border-b border-gray-200 mb-6",children:[(0,dt.jsx)("button",{onClick:()=>g.setActiveTab("timeline"),className:"px-4 py-2 font-medium text-sm border-b-2 transition-colors duration-200 "+("timeline"===p.activeTab?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Timeline"}),(0,dt.jsx)("button",{onClick:()=>g.setActiveTab("comments"),className:"px-4 py-2 font-medium text-sm border-b-2 transition-colors duration-200 "+("comments"===p.activeTab?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Discussion Board"})]}),"timeline"===p.activeTab&&(0,dt.jsx)(to,{milestones:h}),"comments"===p.activeTab&&(0,dt.jsx)(Ya,{comment:p.comment,onCommentChange:e=>g.setComment(e.target.value),onCommentSubmit:f.handleCommentSubmit,comments:m,onNavigateToArtist:a})]})]})})]})},no={System:"system",Comments:"comments",Comment:"comment",Collaboration:"collaboration",Follow:"follow",Like:"like"},so=["All","System","Comments","Collaboration"],io=["Last 7 days","Today","Last 30 days"],lo=(e,t)=>{if("All"===t)return e.length;const r=no[t];return e.filter(e=>e.type===r).length},co=(e,t)=>{switch(e){case"system":return(0,dt.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,dt.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"})})});case"comments":return(0,dt.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,dt.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})})});case"comment":case"final_comment":return(0,dt.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,dt.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})})});case"collaboration":return(0,dt.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:(0,dt.jsx)("svg",{className:"w-4 h-4 text-purple-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"})})});case"review_request":return(0,dt.jsx)("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:(0,dt.jsx)("svg",{className:"w-4 h-4 text-orange-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})});case"follow":return(0,dt.jsx)("div",{className:"w-8 h-8 bg-pink-100 rounded-full flex items-center justify-center",children:(0,dt.jsxs)("svg",{className:"w-4 h-4 text-pink-600",fill:"currentColor",viewBox:"0 0 20 20",children:[(0,dt.jsx)("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),(0,dt.jsx)("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]})});case"like":return(0,dt.jsx)("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:(0,dt.jsx)("svg",{className:"w-4 h-4 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})})});default:return(0,dt.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:(0,dt.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})})}},uo=e=>{let{activeTab:t,timeFilter:r,items:a,onTabChange:o,onTimeFilterChange:n,onMarkAllAsRead:s}=e;return(0,dt.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,dt.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,dt.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Notification Center"}),(0,dt.jsx)("div",{className:"flex space-x-8 border-b border-gray-200",children:so.map(e=>(0,dt.jsxs)("button",{onClick:()=>o(e),className:"py-3 px-1 border-b-2 font-medium text-sm transition-colors duration-200 "+(t===e?"Collaboration"===e?"border-purple-500 text-purple-600":"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e,(0,dt.jsx)($t,{count:lo(a,e),color:t===e?"Collaboration"===e?"purple":"blue":"gray"})]},e))}),(0,dt.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,dt.jsx)("div",{className:"flex items-center space-x-4",children:(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("span",{className:"text-sm text-gray-600",children:"Filter by:"}),(0,dt.jsx)("select",{value:r,onChange:e=>n(e.target.value),className:"text-sm border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:io.map(e=>(0,dt.jsx)("option",{children:e},e))})]})}),(0,dt.jsxs)("button",{onClick:s,className:"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center space-x-1 transition-colors duration-200",children:[(0,dt.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,dt.jsx)("span",{children:"Mark all as read"})]})]})]})})},ho=e=>{let{isOpen:t,onClose:r,onConfirm:a,onDeny:o,notification:n,actionType:s="collaboration"}=e;if(!t)return null;const i=(()=>{var e;return"collaboration"===s?{title:"Collaboration Request",confirmText:"Approve",denyText:"Deny",message:`Are you sure you want to approve the collaboration request from "${(null===n||void 0===n||null===(e=n.meta)||void 0===e?void 0:e.requesterName)||"Unknown"}"?`}:{title:"Review Request",confirmText:"Approve",denyText:"Deny",message:"Are you sure you want to approve the review request?"}})();return(0,dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,dt.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-xl",children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:i.title}),(0,dt.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:(0,dt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:i.message}),n&&(0,dt.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,dt.jsx)("p",{className:"text-sm font-medium text-gray-900 mb-1",children:n.title}),n.message&&(0,dt.jsx)("p",{className:"text-xs text-gray-600",children:n.message})]})]}),(0,dt.jsxs)("div",{className:"flex space-x-3",children:[(0,dt.jsx)("button",{onClick:r,className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors duration-200",children:"Cancel"}),(0,dt.jsx)("button",{onClick:o,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 transition-colors duration-200",children:i.denyText}),(0,dt.jsx)("button",{onClick:a,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 transition-colors duration-200",children:i.confirmText})]})]})})},mo=e=>{let{isOpen:t=!1,onClose:r=()=>{},notification:a=null,className:o=""}=e;if(!t||!a)return null;const n=a.meta||{},s=n.commentText||"No comment content available",i=n.authorName||"Unknown User",l=n.authorRole||"Member",c=n.projectName||a.projectId||"Unknown Project",d=n.sentiment||"positive";return(0,dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,dt.jsxs)("div",{className:`bg-white rounded-lg p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto ${o}`,children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)("div",{className:"flex-shrink-0",children:(0,dt.jsx)("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),(0,dt.jsxs)("div",{className:"ml-4",children:[(0,dt.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Final Comment Details"}),(0,dt.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Review the submitted final comment"})]})]}),(0,dt.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:(0,dt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,dt.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,dt.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Project Information"}),(0,dt.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Project:"})," ",c]}),(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Notification:"})," ",a.title]}),(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Received:"})," ",new Date(a.createdAt).toLocaleString()]})]})]}),(0,dt.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:[(0,dt.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Comment Author"}),(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Name:"})," ",i]}),(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Role:"})," ",l]})]}),(0,dt.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${(e=>{switch(e){case"positive":default:return"bg-green-100 text-green-800";case"neutral":return"bg-gray-100 text-gray-800";case"negative":return"bg-red-100 text-red-800"}})(d)}`,children:(e=>{switch(e){case"positive":default:return"Positive";case"neutral":return"Neutral";case"negative":return"Negative"}})(d)})]})]}),(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Comment Content"}),(0,dt.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 border-l-4 border-blue-500",children:(0,dt.jsxs)("blockquote",{className:"text-gray-700 italic leading-relaxed",children:['"',s,'"']})})]}),(0,dt.jsx)("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200",children:(0,dt.jsx)("button",{onClick:r,className:"px-6 py-3 text-base text-gray-600 hover:text-gray-800 transition-colors duration-200",children:"Close"})})]})})},po=t=>{var r,a;let{notification:o,onNotificationClick:n,onReviewRequest:s,onCollaborationRequest:i,onMarkAsRead:l}=t;const[c,d]=(0,e.useState)(!1),[u,h]=(0,e.useState)(!1),[m,p]=(0,e.useState)(null);return e.useEffect(()=>{"review_request"===o.type?p("review"):"collaboration"===o.type&&p("collaboration")},[o.type]),(0,dt.jsxs)("div",{onClick:e=>{e.target.closest("button")||(()=>{var e,t;"final_comment"!==o.type?"review_request"===o.type&&!o.isRead||"collaboration"===o.type&&null!==(e=o.meta)&&void 0!==e&&e.requestId&&"pending"===(null===(t=o.meta)||void 0===t?void 0:t.status)&&!o.isRead?d(!0):(!o.isRead&&l&&l(o.id),n(o)):h(!0)})()},className:"rounded-lg border p-6 hover:shadow-md transition-all duration-200 cursor-pointer "+(o.isRead?"bg-white border-gray-200":"collaboration"===o.type?"bg-purple-50 border-l-4 border-l-purple-500":"bg-blue-50 border-l-4 border-l-blue-500"),children:[(0,dt.jsxs)("div",{className:"flex items-start space-x-4",children:[!o.isRead&&(0,dt.jsx)("div",{className:"w-2 h-2 rounded-full mt-3 flex-shrink-0 "+("collaboration"===o.type?"bg-purple-500":"bg-blue-500")}),(0,dt.jsx)("div",{className:"flex-shrink-0",children:co(o.type)}),(0,dt.jsx)("div",{className:"flex-1 min-w-0",children:(0,dt.jsxs)("div",{className:"flex items-start justify-between",children:[(0,dt.jsxs)("div",{className:"flex-1",children:[(0,dt.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:o.title||o.content}),o.message&&(0,dt.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:o.message}),("review_request"===o.type&&!o.isRead||"collaboration"===o.type&&(null===(r=o.meta)||void 0===r?void 0:r.requestId)&&"pending"===(null===(a=o.meta)||void 0===a?void 0:a.status)&&!o.isRead)&&(0,dt.jsx)("div",{className:"mt-3",children:(0,dt.jsx)("p",{className:"text-xs text-gray-500 italic",children:"Click to approve or deny this request"})})]}),(0,dt.jsx)("span",{className:"text-xs text-gray-500 ml-4 flex-shrink-0",children:new Date(o.createdAt).toLocaleDateString()})]})})]}),(0,dt.jsx)(ho,{isOpen:c,onClose:()=>{d(!1),p(null)},onConfirm:()=>{"review"===m?s(o,"approved"):"collaboration"===m&&i(o,"approve"),d(!1),p(null)},onDeny:()=>{"review"===m?s(o,"denied"):"collaboration"===m&&i(o,"deny"),d(!1),p(null)},notification:o,actionType:m}),(0,dt.jsx)(mo,{isOpen:u,onClose:()=>{h(!1),!o.isRead&&l&&l(o.id)},notification:o})]})},go=e=>{let{isLoading:t,filteredNotifications:r,hasMore:a,onNotificationClick:o,onReviewRequest:n,onCollaborationRequest:s,onMarkAsRead:i,onLoadMore:l}=e;return t?(0,dt.jsxs)("div",{className:"text-center py-12",children:[(0,dt.jsx)(Et,{}),(0,dt.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading notifications..."})]}):(0,dt.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,dt.jsx)("div",{className:"space-y-4",children:r.map(e=>(0,dt.jsx)(po,{notification:e,onNotificationClick:o,onReviewRequest:n,onCollaborationRequest:s,onMarkAsRead:i},e.id))}),a&&!t&&(0,dt.jsx)("div",{className:"text-center mt-8",children:(0,dt.jsxs)("button",{onClick:l,className:"text-blue-600 hover:text-blue-700 font-medium flex items-center space-x-1 mx-auto transition-colors duration-200",children:[(0,dt.jsx)("span",{children:"Load more notifications"}),(0,dt.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})};var fo=r(405);const vo=t=>{let{state:r,setters:a}=t;const{setItems:o,setFilteredNotifications:n,setIsLoading:s}=a,i=(0,e.useCallback)(async()=>{try{s(!0);const e=await zt.lY.getUserNotifications((0,ct.WR)());if(e.success){const t=e.data||[];console.log("NotificationCenter: Loaded notifications:",t.length),o(t),console.log("NotificationCenter: Updated items state")}else console.error("Failed to load notifications:",e.error),o([])}catch(e){console.error("Error loading notifications:",e),o([])}finally{s(!1)}},[o,s]);(0,e.useEffect)(()=>{let e=!0;const t=async()=>{e&&await i()};t();const r=r=>{var a;const o=null===r||void 0===r||null===(a=r.detail)||void 0===a?void 0:a.userId;console.log("NotificationCenter: Received event:",r.type,"for user:",o,"current user:",(0,ct.WR)()),o&&o!==(0,ct.WR)()||(console.log("NotificationCenter: Reloading notifications due to change"),setTimeout(()=>{e&&t()},100))};return window.addEventListener("notif:unreadChanged",r),window.addEventListener("user:changed",t),()=>{e=!1,window.removeEventListener("notif:unreadChanged",r),window.removeEventListener("user:changed",t)}},[i]),(0,e.useEffect)(()=>{const e=((e,t)=>{let r=[...e];if("All"!==t){const e=no[t];r=r.filter(t=>t.type===e)}return r})(r.items,r.activeTab,r.timeFilter);n(e)},[r.items,r.activeTab,r.timeFilter,n]);const l=(0,e.useCallback)(async e=>{e.projectId,console.log("Navigate to notification detail:",e)},[]),c=(0,e.useCallback)(async e=>{try{await zt.lY.markAsRead(e),console.log("NotificationCenter: Marked notification as read:",e);const t=await zt.lY.getUserNotifications((0,ct.WR)());t.success&&o(t.data||[])}catch(t){console.error("Error marking notification as read:",t)}},[o]),d=(0,e.useCallback)(async()=>{try{await zt.lY.markAllAsRead((0,ct.WR)()),console.log("NotificationCenter: Marked all as read")}catch(e){console.error("Error marking notifications as read:",e)}},[]),u=(0,e.useCallback)(async(e,t)=>{try{const{requestId:r}=e.meta,a=(0,Xr.vb)(r,t);a&&(console.log(`Review request ${t}:`,a),await zt.lY.markAsRead(e.id))}catch(r){console.error("Error handling review request:",r)}},[]),h=(0,e.useCallback)(async(e,t)=>{try{const{requestId:r}=e.meta,a=(0,ct.WR)();let n;if(console.log("Handling collaboration request:",{requestId:r,action:t,currentUserId:a}),"approve"===t?n=await(0,fo.g$)(r,a):"deny"===t&&(n=await(0,fo.RO)(r,a)),n){console.log(`Collaboration request ${t}:`,n),await zt.lY.markAsRead(e.id);const r=await zt.lY.getUserNotifications(a);r.success&&o(r.data||[])}}catch(r){console.error("Error handling collaboration request:",r)}},[o]);return{loadNotifications:i,handleNotificationClick:l,handleMarkAsRead:c,handleMarkAllAsRead:d,handleReviewRequest:u,handleCollaborationRequest:h}},xo=()=>{const[t,r]=(0,e.useState)([]),[a,o]=(0,e.useState)([]),[n,s]=(0,e.useState)("All"),[i,l]=(0,e.useState)("Last 7 days"),[c,d]=(0,e.useState)(!1),[u,h]=(0,e.useState)(!0);return(0,e.useMemo)(()=>({state:{items:t,filteredNotifications:a,activeTab:n,timeFilter:i,isLoading:c,hasMore:u},setters:{setItems:r,setFilteredNotifications:o,setActiveTab:s,setTimeFilter:l,setIsLoading:d,setHasMore:h}}),[t,a,n,i,c,u])},bo=()=>{const{state:e,setters:t}=xo(),r=vo({state:e,setters:t});return(0,dt.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,dt.jsx)(uo,{activeTab:e.activeTab,timeFilter:e.timeFilter,items:e.items,onTabChange:t.setActiveTab,onTimeFilterChange:t.setTimeFilter,onMarkAllAsRead:r.handleMarkAllAsRead}),(0,dt.jsx)(go,{isLoading:e.isLoading,filteredNotifications:e.filteredNotifications,hasMore:e.hasMore,onNotificationClick:r.handleNotificationClick,onReviewRequest:r.handleReviewRequest,onCollaborationRequest:r.handleCollaborationRequest,onMarkAsRead:r.handleMarkAsRead,onLoadMore:()=>{}})]})},yo=e=>{let{children:t}=e;const{user:r,loading:a}=ht();return a?(0,dt.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-tag-blue mx-auto"}),(0,dt.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):r?t:(0,dt.jsx)(fe,{to:"/login",replace:!0})},wo=()=>(0,dt.jsxs)("div",{className:"text-center mb-8",children:[(0,dt.jsx)("img",{src:"/TAG_Logo.png",alt:"TAG Logo",className:"h-12 w-auto mx-auto mb-6"}),(0,dt.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create your account"})]}),ko=e=>{let{formData:t,errors:r,onInputChange:a,onSendCode:o,onSubmit:n,isLoading:s,isSendingCode:i}=e;return(0,dt.jsxs)("form",{onSubmit:n,className:"space-y-6",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Student Email"}),(0,dt.jsxs)("div",{className:"flex space-x-2",children:[(0,dt.jsxs)("div",{className:"relative flex-1",children:[(0,dt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,dt.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,dt.jsx)("input",{id:"email",name:"email",type:"email",required:!0,value:t.email,onChange:a,placeholder:"your.name@university.edu",className:"block w-full pl-10 pr-3 py-3 border rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-tag-blue focus:border-tag-blue sm:text-sm "+(r.email?"border-red-300":"border-gray-300")})]}),(0,dt.jsx)("button",{type:"button",onClick:()=>o(t.email),disabled:i,className:"px-4 py-3 text-sm font-medium text-white bg-tag-blue hover:bg-tag-dark-blue focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-tag-blue disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 rounded-md whitespace-nowrap",children:i?"Sending...":"Send Code"})]}),r.email&&(0,dt.jsx)("p",{className:"mt-1 text-sm text-red-600",children:r.email})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{htmlFor:"verificationCode",className:"block text-sm font-medium text-gray-700 mb-2",children:"Verification Code"}),(0,dt.jsxs)("div",{className:"relative",children:[(0,dt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,dt.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,dt.jsx)("input",{id:"verificationCode",name:"verificationCode",type:"text",required:!0,value:t.verificationCode,onChange:a,placeholder:"Enter 6-digit code",maxLength:"6",className:"block w-full pl-10 pr-3 py-3 border rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-tag-blue focus:border-tag-blue sm:text-sm "+(r.verificationCode?"border-red-300":"border-gray-300")})]}),r.verificationCode&&(0,dt.jsx)("p",{className:"mt-1 text-sm text-red-600",children:r.verificationCode})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,dt.jsxs)("div",{className:"relative",children:[(0,dt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,dt.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,dt.jsx)("input",{id:"password",name:"password",type:"password",required:!0,value:t.password,onChange:a,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",className:"block w-full pl-10 pr-3 py-3 border rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-tag-blue focus:border-tag-blue sm:text-sm "+(r.password?"border-red-300":"border-gray-300")})]}),r.password&&(0,dt.jsx)("p",{className:"mt-1 text-sm text-red-600",children:r.password})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),(0,dt.jsxs)("div",{className:"relative",children:[(0,dt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,dt.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,dt.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:t.confirmPassword,onChange:a,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",className:"block w-full pl-10 pr-3 py-3 border rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-tag-blue focus:border-tag-blue sm:text-sm "+(r.confirmPassword?"border-red-300":"border-gray-300")})]}),r.confirmPassword&&(0,dt.jsx)("p",{className:"mt-1 text-sm text-red-600",children:r.confirmPassword})]}),r.general&&(0,dt.jsx)("div",{className:"text-sm text-red-600 text-center",children:r.general}),(0,dt.jsxs)("button",{type:"submit",disabled:s,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-tag-blue hover:bg-tag-dark-blue focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-tag-blue disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[s?(0,dt.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,dt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,dt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,s?"Creating account...":"Register"]})]})},jo=e=>{let{onLoginClick:t}=e;return(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsx)("div",{className:"mt-6 flex justify-center",children:(0,dt.jsx)("button",{onClick:t,className:"w-full flex justify-center py-3 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-tag-blue transition-colors duration-200",children:"Login"})}),(0,dt.jsx)("footer",{className:"bg-white border-t border-gray-200",children:(0,dt.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,dt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,dt.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,dt.jsx)("span",{className:"font-bold",children:"Tech Art Guide"}),(0,dt.jsx)("span",{className:"ml-2",children:"\xa9 2025 TAG. All rights reserved."})]}),(0,dt.jsxs)("div",{className:"flex space-x-6 text-sm text-gray-500",children:[(0,dt.jsx)("a",{href:"#",className:"hover:text-gray-700",children:"Privacy Policy"}),(0,dt.jsx)("a",{href:"#",className:"hover:text-gray-700",children:"Terms of Service"}),(0,dt.jsx)("a",{href:"#",className:"hover:text-gray-700",children:"Help Center"})]})]})})})]})},No=()=>{const[t,r]=(0,e.useState)({email:"",verificationCode:"",password:"",confirmPassword:""}),[a,o]=(0,e.useState)({}),[n,s]=(0,e.useState)(!1),[i,l]=(0,e.useState)(!1),c=(0,e.useCallback)(e=>{const{name:t,value:n}=e.target;r(e=>({...e,[t]:n})),a[t]&&o(e=>((e,t)=>{if(e[t]){const r={...e};return delete r[t],r}return e})(e,t))},[a]),d=(0,e.useCallback)(()=>{const e=(e=>{const t={};var r,a;return e.email?(r=e.email,/\S+@\S+\.\S+/.test(r)||(t.email="Please enter a valid email address")):t.email="Please enter your email address",e.verificationCode?(a=e.verificationCode,/^\d{6}$/.test(a)||(t.verificationCode="Verification code should be 6 digits")):t.verificationCode="Please enter verification code",e.password?e.password.length>=6||(t.password="Password must be at least 6 characters"):t.password="Please enter password",e.confirmPassword?(o=e.password,n=e.confirmPassword,o===n||(t.confirmPassword="Passwords do not match")):t.confirmPassword="Please confirm password",{isValid:0===Object.keys(t).length,errors:t};var o,n})(t);return o(e.errors),e.isValid},[t]),u=(0,e.useCallback)(()=>{r({email:"",verificationCode:"",password:"",confirmPassword:""}),o({}),s(!1),l(!1)},[]),h=(0,e.useCallback)(e=>{s(e)},[]),m=(0,e.useCallback)(e=>{l(e)},[]),p=(0,e.useCallback)((e,t)=>{o(r=>({...r,[e]:t}))},[]),g=(0,e.useCallback)(e=>{o(t=>({...t,general:e}))},[]);return{formData:t,errors:a,isLoading:n,isSendingCode:i,handleInputChange:c,validateForm:d,resetForm:u,setLoading:h,setSendingCode:m,setError:p,setGeneralError:g}},Co=t=>{let{formData:r,validateForm:a,setLoading:o,setSendingCode:n,setError:s,setGeneralError:i}=t;const l=ee();return{sendVerificationCode:(0,e.useCallback)(async e=>{if(e){n(!0);try{console.log("Sending verification code to:",e),setTimeout(()=>{n(!1),alert("Verification code has been sent to your email")},1e3)}catch(t){console.error("Failed to send verification code:",t),n(!1),s("email","Failed to send verification code, please try again")}}else s("email","Please enter your email address")},[n,s]),handleSubmit:(0,e.useCallback)(async e=>{if(e.preventDefault(),a()){o(!0);try{console.log("Registration info:",r),setTimeout(()=>{o(!1),alert("Registration successful! Please go to login page"),l("/login")},1e3)}catch(t){console.error("Registration failed:",t),o(!1),i("Registration failed, please try again")}}},[r,a,o,i,l]),handleLoginClick:(0,e.useCallback)(()=>{l("/login")},[l])}},So=()=>{const{formData:e,errors:t,isLoading:r,isSendingCode:a,handleInputChange:o,validateForm:n,setLoading:s,setSendingCode:i,setError:l,setGeneralError:c}=No(),d=Co({formData:e,validateForm:n,setLoading:s,setSendingCode:i,setError:l,setGeneralError:c});return(0,dt.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,dt.jsx)("div",{className:"flex-1 flex items-center justify-center px-4 sm:px-6 lg:px-8",children:(0,dt.jsx)("div",{className:"max-w-md w-full space-y-8",children:(0,dt.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,dt.jsx)(wo,{}),(0,dt.jsx)(ko,{formData:e,errors:t,onInputChange:o,onSendCode:d.sendVerificationCode,onSubmit:d.handleSubmit,isLoading:r,isSendingCode:a}),(0,dt.jsx)(jo,{onLoginClick:d.handleLoginClick})]})})})})},_o={categories:[{id:"thesis-project",name:"Thesis Project"},{id:"course-project",name:"Course Project"},{id:"studio-class",name:"Studio Class"},{id:"research-collaboration",name:"Research Collaboration"},{id:"internship-project",name:"Internship Project"},{id:"startup",name:"Startup"},{id:"student-club",name:"Student Club"},{id:"interdisciplinary-teamwork",name:"Interdisciplinary Teamwork"},{id:"international-exchange",name:"International Exchange"},{id:"others",name:"Others"}],majors:[{id:"visual-effects",name:"Visual Effects"},{id:"game-design",name:"Game Design"},{id:"animation",name:"Animation"},{id:"illustration",name:"Illustration"},{id:"sequential-art",name:"Sequential Art"},{id:"graphic-design",name:"Graphic Design"},{id:"ui-ux",name:"UI/UX"},{id:"fine-art",name:"Fine Art"},{id:"film",name:"Film"},{id:"photography",name:"Photography"},{id:"architecture",name:"Architecture"},{id:"industrial-design",name:"Industrial Design"},{id:"fashion-design",name:"Fashion Design"},{id:"motion-design",name:"Motion Design"}],tags:[{id:"typography",name:"Typography"},{id:"branding",name:"Branding"},{id:"editorial",name:"Editorial"},{id:"minimalist",name:"Minimalist"},{id:"experimental",name:"Experimental"},{id:"sustainable",name:"Sustainable"},{id:"interactive",name:"Interactive"},{id:"motion",name:"Motion"}]},Io=[{id:1,title:"Fantasy Character Series",description:"Digital illustration project exploring mythical creatures",image:null,progress:75,tags:["Illustration","Character Design"],teamMembers:[{name:"Sarah Chen",avatar:null},{name:"Alex Kim",avatar:null}],timestamp:"3 hours ago"},{id:2,title:"Cyberpunk Game Environment",description:"3D environment design for indie game project",image:null,progress:60,tags:["Game Design","3D Modeling"],teamMembers:[{name:"Maya Rodriguez",avatar:null},{name:"David Lee",avatar:null},{name:"Emma Wilson",avatar:null}],timestamp:"5 hours ago"},{id:3,title:"Short Film Storyboard",description:"Pre-production planning for student film festival",image:null,progress:25,tags:["Film","Storyboard"],teamMembers:[{name:"Jordan Park",avatar:null},{name:"Sophie Davis",avatar:null}],timestamp:"1 day ago"},{id:4,title:"Music Festival Branding",description:"Complete visual identity for campus music festival",image:null,progress:80,tags:["Graphic Design","Branding"],teamMembers:[{name:"Mike Johnson",avatar:null},{name:"Lisa Chen",avatar:null},{name:"Tom Wilson",avatar:null}],timestamp:"6 hours ago"},{id:5,title:"Magic VFX Sequence",description:"Visual effects compositing for fantasy short film",image:null,progress:40,tags:["VFX","Compositing"],teamMembers:[{name:"Anna Smith",avatar:null},{name:"Chris Brown",avatar:null}],timestamp:"2 days ago"},{id:6,title:"2D Character Animation",description:"Walk cycle and expressions for animated short",image:null,progress:90,tags:["Animation","2D Art"],teamMembers:[{name:"Rachel Green",avatar:null},{name:"Kevin Lee",avatar:null},{name:"Maria Garcia",avatar:null},{name:"James Miller",avatar:null}],timestamp:"4 hours ago"}],Eo=[{id:1,title:"Indie Horror Game",description:"Seeking talented artists for an atmospheric horror game project with unique visual style and immersive storytelling.",status:"Open",timePosted:"2 days ago",skills:["3D Artist","Concept Artist"],tools:["Unity","Blender"],recruiter:{name:"Alex Chen",avatar:null},applicants:5,dueDate:"March 15"},{id:2,title:"Animated Short Film",description:"Collaborative animation project for film festival submission. Looking for creative animators and sound designers.",status:"Open",timePosted:"1 week ago",skills:["Animator","Sound Designer"],tools:["After Effects","Premiere"],recruiter:{name:"Sarah Kim",avatar:null},applicants:12,dueDate:"April 2"},{id:3,title:"Mobile App UI Design",description:"Design intuitive and modern user interface for a productivity app targeting young professionals.",status:"Urgent",timePosted:"3 hours ago",skills:["UI Designer","UX Designer"],tools:["Figma","Sketch"],recruiter:{name:"Mike Rodriguez",avatar:null},applicants:8,dueDate:"Feb 28"},{id:4,title:"VR Experience Project",description:"Immersive virtual reality experience for educational purposes. Seeking developers with VR development experience.",status:"Open",timePosted:"5 days ago",skills:["Unity Developer","3D Artist"],tools:["Unity","Oculus SDK"],recruiter:{name:"Emma Johnson",avatar:null},applicants:3,dueDate:"May 10"},{id:5,title:"Podcast Series Design",description:"Create visual identity and promotional materials for a student-run podcast series about design and creativity.",status:"Open",timePosted:"1 day ago",skills:["Graphic Designer","Motion Designer"],tools:["Photoshop","After Effects"],recruiter:{name:"David Lee",avatar:null},applicants:6,dueDate:"March 20"}],Po=[{id:1,title:"Brand Identity with Studio X",description:"Complete brand identity system for a tech startup. Seeking talented designers to join the creative team.",image:null,categories:["Branding","Graphic Design"],author:{name:"Alice Chen",avatar:null},likes:"1.8k",views:"9.2k",isLiked:!1,isBookmarked:!1,isInitiator:!0,role:"Project Owner \u2022 Initiator",dateRange:"January 2023 - March 2023",status:"Open for Collaboration",skills:["Brand Strategy","Logo Design","Visual Identity"],teamSize:3,currentMembers:1},{id:2,title:"Interactive Web Experience",description:"Immersive digital storytelling platform with cutting-edge web technologies.",image:null,categories:["UI/UX Design","Interactive"],author:{name:"Maya Kim",avatar:null},likes:"2.1k",views:"12k",isLiked:!1,isBookmarked:!1,isInitiator:!0,role:"Project Lead",dateRange:"February 2023 - Present",status:"Open for Collaboration",skills:["Frontend Development","UI/UX Design","Storytelling"],teamSize:4,currentMembers:2},{id:3,title:"3D Character Animation",description:"Character design and rigging for short film project. Looking for skilled animators.",image:null,categories:["3D Design","Animation"],author:{name:"David Lee",avatar:null},likes:"1.8k",views:"9.1k",isLiked:!1,isBookmarked:!1,isInitiator:!1,role:"Character Designer",dateRange:"March 2023 - June 2023",status:"Open for Collaboration",skills:["Character Design","3D Modeling","Rigging"],teamSize:5,currentMembers:3}],Ao=e=>{let{onCollaborationClick:t,onBookmarkToggle:r}=e;return(0,dt.jsx)("div",{className:"flex-1",children:(0,dt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Po.map(e=>(0,dt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md hover:scale-105 transition-all duration-300",children:[(0,dt.jsxs)("div",{className:"relative",children:[(0,dt.jsx)(rt,{to:`/tagme/collaboration/${e.id}`,className:"block",children:(0,dt.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-56 object-cover"})}),(0,dt.jsx)("button",{onClick:t=>{t.stopPropagation(),r&&r(e.id)},className:"absolute top-3 right-3 p-2 bg-white bg-opacity-90 rounded-full hover:bg-opacity-100 transition-all duration-200",children:(0,dt.jsx)("svg",{className:"w-5 h-5 "+(e.isBookmarked?"text-purple-500 fill-current":"text-gray-400"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})})]}),(0,dt.jsxs)("div",{className:"p-3",children:[(0,dt.jsxs)(rt,{to:`/tagme/collaboration/${e.id}`,className:"block",children:[(0,dt.jsx)("h3",{className:"font-bold text-gray-900 mb-1 text-sm hover:text-purple-600 transition-colors duration-200",children:e.title}),(0,dt.jsx)("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:e.description})]}),(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)("img",{src:e.author.avatar,alt:e.author.name,className:"w-6 h-6 rounded-full mr-2"}),(0,dt.jsx)("span",{className:"text-xs font-medium text-gray-900",children:e.author.name})]}),(0,dt.jsx)("span",{className:"text-xs text-gray-500",children:"Dec 15, 2024"})]})]})]},e.id))})})},To=e=>{let{onApplyJob:t}=e;return(0,dt.jsxs)("div",{className:"flex-1",children:[(0,dt.jsxs)("div",{className:"text-center py-8 mb-8",children:[(0,dt.jsx)("h3",{className:"text-lg font-medium text-red-500 mb-2",children:"Jobs Coming Soon"}),(0,dt.jsx)("p",{className:"text-red-400",children:"Job opportunities and internships will be available here."})]}),(0,dt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Eo.map(e=>(0,dt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-all duration-300",children:[(0,dt.jsxs)("div",{className:"p-4 border-b border-gray-100",children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,dt.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full "+("Urgent"===e.status?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.status}),(0,dt.jsx)("span",{className:"text-xs text-gray-500",children:e.timePosted})]}),(0,dt.jsx)("h3",{className:"font-bold text-gray-900 text-lg mb-2",children:e.title}),(0,dt.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:e.description})]}),(0,dt.jsxs)("div",{className:"p-4",children:[(0,dt.jsx)("div",{className:"mb-3",children:(0,dt.jsx)("div",{className:"flex flex-wrap gap-2",children:e.skills.map((e,t)=>(0,dt.jsx)("span",{className:"px-3 py-1 text-xs bg-blue-100 text-blue-800 rounded-full font-medium",children:e},t))})}),(0,dt.jsx)("div",{className:"mb-4",children:(0,dt.jsx)("div",{className:"flex flex-wrap gap-2",children:e.tools.map((e,t)=>(0,dt.jsx)("span",{className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded-full font-medium",children:e},t))})}),(0,dt.jsxs)("div",{className:"flex items-center mb-3",children:[(0,dt.jsx)("img",{src:e.recruiter.avatar,alt:e.recruiter.name,className:"w-8 h-8 rounded-full mr-3"}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.recruiter.name}),(0,dt.jsxs)("p",{className:"text-xs text-gray-500",children:[e.applicants," applicants"]})]})]}),(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsxs)("span",{className:"text-sm text-gray-600",children:["Due: ",e.dueDate]}),(0,dt.jsx)("button",{onClick:()=>t&&t(e.id),className:"bg-purple-500 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-purple-600 transition-colors duration-200",children:"Apply"})]})]})]},e.id))})]})},Lo=e=>({Illustration:"bg-purple-200 text-purple-800","Character Design":"bg-blue-200 text-blue-800","Game Design":"bg-green-200 text-green-800","3D Modeling":"bg-purple-200 text-purple-800",Film:"bg-orange-200 text-orange-800",Storyboard:"bg-blue-200 text-blue-800","Graphic Design":"bg-pink-200 text-pink-800",Branding:"bg-blue-200 text-blue-800",VFX:"bg-purple-200 text-purple-800",Compositing:"bg-orange-200 text-orange-800",Animation:"bg-green-200 text-green-800","2D Art":"bg-pink-200 text-pink-800"}[e]||"bg-gray-200 text-gray-800"),Mo=e=>{let{onMilestoneClick:t}=e;return(0,dt.jsx)("div",{className:"flex-1",children:(0,dt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Io.map(e=>{return(0,dt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md hover:scale-105 transition-all duration-300",children:[(0,dt.jsx)("div",{className:"relative",children:(0,dt.jsx)(rt,{to:`/tagme/milestone/${e.id}`,className:"block",children:(0,dt.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-48 object-cover"})})}),(0,dt.jsxs)("div",{className:"p-4",children:[(0,dt.jsxs)(rt,{to:`/tagme/milestone/${e.id}`,className:"block",children:[(0,dt.jsx)("h3",{className:"font-bold text-gray-900 mb-1 text-lg hover:text-purple-600 transition-colors duration-200",children:e.title}),(0,dt.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:e.description})]}),(0,dt.jsxs)("div",{className:"mb-4",children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,dt.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Progress"}),(0,dt.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[e.progress,"%"]})]}),(0,dt.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,dt.jsx)("div",{className:`h-2 rounded-full transition-all duration-300 ${t=e.tags[0],{Illustration:"bg-purple-500","Character Design":"bg-blue-500","Game Design":"bg-green-500","3D Modeling":"bg-purple-500",Film:"bg-orange-500",Storyboard:"bg-blue-500","Graphic Design":"bg-pink-500",Branding:"bg-blue-500",VFX:"bg-purple-500",Compositing:"bg-orange-500",Animation:"bg-green-500","2D Art":"bg-pink-500"}[t]||"bg-gray-500"}`,style:{width:`${e.progress}%`}})})]}),(0,dt.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:e.tags.map((e,t)=>(0,dt.jsx)("span",{className:`px-3 py-1 text-xs rounded-full font-medium ${Lo(e)}`,children:e},t))}),(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)("div",{className:"flex -space-x-2 mr-3",children:e.teamMembers.slice(0,4).map((e,t)=>(0,dt.jsx)("img",{src:e.avatar,alt:e.name,className:"w-8 h-8 rounded-full border-2 border-white"},t))}),(0,dt.jsxs)("span",{className:"text-sm text-gray-600",children:[e.teamMembers.length," members"]})]}),(0,dt.jsx)("span",{className:"text-xs text-gray-500",children:e.timestamp})]})]})]},e.id);var t})})})},Do=e=>{let{children:t,activeTab:r,onTabChange:a,onCollaborationClick:o,onMilestoneClick:n}=e;return(0,dt.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[(0,dt.jsxs)("div",{className:"flex flex-col mb-8","data-tagme-section":!0,children:[(0,dt.jsx)("h2",{className:"text-3xl font-bold text-gray-400 mb-6",children:"TAG Me"}),(0,dt.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,dt.jsx)("div",{className:"w-7/12",children:(0,dt.jsx)(gt,{onInputChange:e=>console.log("Search:",e.target.value),placeholder:"Search for Collaborations or Artists",className:"w-full"})}),(0,dt.jsx)("div",{className:"inline-flex rounded-full border border-gray-300 bg-white p-1",children:["Collaborations","Milestones","Jobs"].map(e=>(0,dt.jsxs)("button",{onClick:()=>a(e),className:"relative px-12 py-3 text-base font-semibold tracking-wide transition-all duration-300 ease-in-out "+(r===e?"text-white":"text-gray-700 hover:text-gray-900"),children:[r===e&&(0,dt.jsx)("div",{className:"absolute inset-0 bg-purple-500 rounded-full transition-all duration-300 ease-in-out"}),(0,dt.jsx)("span",{className:"relative z-10",children:e})]},e))})]})]}),(0,dt.jsx)("div",{className:"flex flex-col lg:flex-row gap-8",children:t})]})},Ro=e=>{let{selectedCategories:t,selectedMajors:r,selectedTags:a,onCategoryToggle:o,onMajorToggle:n,onTagToggle:s}=e;return(0,dt.jsx)("div",{className:"lg:w-64 flex-shrink-0",children:(0,dt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,dt.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-6",children:"Filters"}),(0,dt.jsxs)("div",{className:"mb-8",children:[(0,dt.jsx)("h4",{className:"font-bold text-gray-900 mb-3",children:"Category"}),(0,dt.jsx)("div",{className:"space-y-2",children:_o.categories.map(e=>(0,dt.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,dt.jsx)("input",{type:"checkbox",checked:t.includes(e.id),onChange:()=>o(e.id),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),(0,dt.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:e.name})]},e.id))})]}),(0,dt.jsxs)("div",{className:"mb-8",children:[(0,dt.jsx)("h4",{className:"font-bold text-gray-900 mb-3",children:"Major"}),(0,dt.jsx)("div",{className:"space-y-2",children:_o.majors.map(e=>(0,dt.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,dt.jsx)("input",{type:"checkbox",checked:r.includes(e.id),onChange:()=>n(e.id),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),(0,dt.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:e.name})]},e.id))})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h4",{className:"font-bold text-gray-900 mb-3",children:"Tags"}),(0,dt.jsx)("div",{className:"flex flex-wrap gap-2",children:_o.tags.map(e=>(0,dt.jsx)("button",{onClick:()=>s(e.id),className:"px-3 py-1 text-xs rounded-full transition-colors duration-200 "+(a.includes(e.id)?"bg-purple-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.name},e.id))})]})]})})},$o=()=>(0,dt.jsx)(dt.Fragment,{children:(0,dt.jsx)("section",{className:"pt-20 pb-16 bg-white",children:(0,dt.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[(0,dt.jsx)("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 mb-6",children:"Discover Amazing Student Creative Work"}),(0,dt.jsx)("p",{className:"text-lg md:text-xl text-gray-600 mb-8 max-w-3xl mx-auto leading-relaxed",children:"Explore thousands of inspiring projects from talented students across the globe. From 3D art to concept design, find your next creative inspiration."}),(0,dt.jsx)("button",{onClick:()=>{},className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-md text-lg font-medium hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:"About TAG"})]})})}),Fo=t=>{let{state:r,setters:a}=t;const{setSelectedCategories:o,setSelectedMajors:n,setSelectedTags:s}=a;return{handleCategoryToggle:(0,e.useCallback)(e=>{o(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[o]),handleMajorToggle:(0,e.useCallback)(e=>{n(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[n]),handleTagToggle:(0,e.useCallback)(e=>{s(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[s]),handleLikeToggle:(0,e.useCallback)(e=>{},[]),handleApplyJob:(0,e.useCallback)(e=>{},[]),handleBookmarkToggle:(0,e.useCallback)(e=>{},[])}},Oo=()=>{const[t,r]=(0,e.useState)("Collaborations"),[a,o]=(0,e.useState)([]),[n,s]=(0,e.useState)([]),[i,l]=(0,e.useState)([]);return(0,e.useMemo)(()=>({state:{activeTab:t,selectedCategories:a,selectedMajors:n,selectedTags:i},setters:{setActiveTab:r,setSelectedCategories:o,setSelectedMajors:s,setSelectedTags:l}}),[t,a,n,i])},Uo=t=>{var r,a;let{onBackClick:o,onMilestoneClick:n,onCollaborationClick:s}=t;const i=Z(),{restoreScrollPosition:l}=kr(),{state:c,actions:d}=pr(),{state:u,setters:h}=Oo(),m=Fo({state:u,setters:h});return(0,e.useEffect)(()=>{var e,t;null!==(e=i.state)&&void 0!==e&&e.activeTab&&"upload-success"===(null===(t=i.state)||void 0===t?void 0:t.from)&&(h.setActiveTab(i.state.activeTab),window.history.replaceState({},document.title),setTimeout(()=>{const e=document.querySelector("[data-tagme-section]");if(e){const t=e.getBoundingClientRect(),r=window.pageYOffset+t.top-80;window.scrollTo({top:r,behavior:"auto"})}},100))},[null===(r=i.state)||void 0===r?void 0:r.activeTab,null===(a=i.state)||void 0===a?void 0:a.from,h.setActiveTab]),(0,e.useEffect)(()=>{const e=c.scrollPositions[`/tagme-${u.activeTab}`];if(c.navigationHistory.length>0&&e){"tagme"===c.navigationHistory[c.navigationHistory.length-1].from&&window.scrollTo({top:e,behavior:"auto"})}},[u.activeTab,c.scrollPositions,c.navigationHistory]),(0,e.useEffect)(()=>{if(c.navigationHistory.length>0){const e=c.navigationHistory[c.navigationHistory.length-1];"tagme"===e.from&&e.activeTab&&h.setActiveTab(e.activeTab)}},[c.navigationHistory,h.setActiveTab]),(0,e.useEffect)(()=>{const e=()=>{const e=window.pageYOffset;d.saveScrollPosition(`/tagme-${u.activeTab}`,e)},t=setInterval(e,1e3),r=e,a=()=>{"hidden"===document.visibilityState&&e()};return window.addEventListener("beforeunload",r),document.addEventListener("visibilitychange",a),()=>{e(),clearInterval(t),window.removeEventListener("beforeunload",r),document.removeEventListener("visibilitychange",a)}},[u.activeTab,d.saveScrollPosition]),(0,dt.jsxs)("div",{className:"min-h-screen bg-gray-50",style:{opacity:1,transition:"opacity 0.2s ease-in"},children:[(0,dt.jsx)($o,{}),(0,dt.jsxs)(Do,{activeTab:u.activeTab,onTabChange:h.setActiveTab,onCollaborationClick:s,onMilestoneClick:n,children:[(0,dt.jsx)(Ro,{selectedCategories:u.selectedCategories,selectedMajors:u.selectedMajors,selectedTags:u.selectedTags,onCategoryToggle:m.handleCategoryToggle,onMajorToggle:m.handleMajorToggle,onTagToggle:m.handleTagToggle}),"Collaborations"===u.activeTab&&(0,dt.jsx)(Ao,{onCollaborationClick:s,onBookmarkToggle:m.handleBookmarkToggle}),"Milestones"===u.activeTab&&(0,dt.jsx)(Mo,{onMilestoneClick:n}),"Jobs"===u.activeTab&&(0,dt.jsx)(To,{onApplyJob:m.handleApplyJob})]})]})};var zo=r(784);const Wo=()=>{const[t,r]=(0,e.useState)((0,ct.HW)()),a=async e=>{await(0,ct.Gr)(e),r((0,ct.HW)()),window.dispatchEvent(new CustomEvent("user:changed"))};return(0,dt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,dt.jsx)("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Review Request Test Tools"}),(0,dt.jsxs)("div",{className:"space-y-4",children:[(0,dt.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,dt.jsx)("p",{className:"text-sm text-gray-600",children:"Current User:"}),(0,dt.jsxs)("p",{className:"font-medium text-gray-900",children:[t.name," (",t.id,")"]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Switch User:"}),(0,dt.jsxs)("div",{className:"flex space-x-2",children:[(0,dt.jsx)("button",{onClick:()=>a("alice"),className:"px-3 py-1 text-sm rounded-md transition-colors duration-200 "+("alice"===t.id?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Alice (Owner)"}),(0,dt.jsx)("button",{onClick:()=>a("bryan"),className:"px-3 py-1 text-sm rounded-md transition-colors duration-200 "+("bryan"===t.id?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Bryan (Collaborator)"}),(0,dt.jsx)("button",{onClick:()=>a("alex"),className:"px-3 py-1 text-sm rounded-md transition-colors duration-200 "+("alex"===t.id?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Alex (Default)"})]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Development Tools:"}),(0,dt.jsxs)("div",{className:"flex space-x-2",children:[(0,dt.jsx)("button",{onClick:()=>{(0,Xr.Ys)(),console.log("All review requests cancelled")},className:"px-3 py-1 text-sm bg-red-100 text-red-700 rounded-md hover:bg-red-200 transition-colors duration-200",children:"Cancel All Requests"}),(0,dt.jsx)("button",{onClick:()=>{const e=(0,Xr.iA)();console.log("Current review requests:",e)},className:"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors duration-200",children:"Show Requests (Console)"}),(0,dt.jsx)("button",{onClick:async()=>{try{const e=await zt.lY.getUserNotifications(t.id);if(e.success){const r=e.data||[];console.log("Current notifications for",t.name,":",r),console.log("Notification count:",r.length),console.log("Unread count:",r.filter(e=>!e.isRead).length)}else console.log("No notifications found for",t.id)}catch(e){console.error("Error getting notifications:",e)}},className:"px-3 py-1 text-sm bg-purple-100 text-purple-700 rounded-md hover:bg-purple-200 transition-colors duration-200",children:"Show Notifications (Console)"})]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Notification Test Tools:"}),(0,dt.jsxs)("div",{className:"flex space-x-2",children:[(0,dt.jsx)("button",{onClick:async()=>{try{const e=await(0,zo.fp)({userId:t.id,title:"Collaboration Request",message:`New collaboration request for project "Interactive Web Experience" from ${t.name} at ${(new Date).toLocaleTimeString()}`,projectId:"collab_project_001"});console.log("Collaboration notification created:",e)}catch(e){console.error("Error creating collaboration notification:",e)}},className:"px-3 py-1 text-sm bg-purple-100 text-purple-700 rounded-md hover:bg-purple-200 transition-colors duration-200",children:"Create Collaboration Notification"}),(0,dt.jsx)("button",{onClick:async()=>{try{const e=await(0,zo.createGeneralNotification)({userId:t.id,type:"system",title:"System Update",message:`System maintenance completed for ${t.name} at ${(new Date).toLocaleTimeString()}`,projectId:null});console.log("General notification created:",e)}catch(e){console.error("Error creating general notification:",e)}},className:"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors duration-200",children:"Create General Notification"}),(0,dt.jsx)("button",{onClick:async()=>{try{const e=await zt.lY.getUserNotifications(t.id);if(e.success){const r=e.data||[];for(const e of r)await zt.lY.deleteNotification(e.id);window.dispatchEvent(new CustomEvent("notif:unreadChanged",{detail:{userId:t.id}})),console.log(`All notifications cleared for ${t.name}`)}}catch(e){console.error("Error clearing notifications:",e)}},className:"px-3 py-1 text-sm bg-orange-100 text-orange-700 rounded-md hover:bg-orange-200 transition-colors duration-200",children:"Clear Notifications"})]})]}),(0,dt.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,dt.jsx)("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Test Steps:"}),(0,dt.jsxs)("ol",{className:"text-xs text-blue-800 space-y-1",children:[(0,dt.jsx)("li",{children:"1. Switch to Bryan \u2192 Go to Alice's collaboration project"}),(0,dt.jsx)("li",{children:'2. Click "Send Standard Request" \u2192 Should show "Pending Approval"'}),(0,dt.jsx)("li",{children:"3. Switch to Alice \u2192 Check Notification Center"}),(0,dt.jsx)("li",{children:'4. Click "Approve" or "Deny" on the review request'}),(0,dt.jsx)("li",{children:"5. Switch back to Bryan \u2192 Check if status changed"})]})]}),(0,dt.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg",children:[(0,dt.jsx)("p",{className:"text-sm font-medium text-green-900 mb-2",children:"Notification Test Steps:"}),(0,dt.jsxs)("ol",{className:"text-xs text-green-800 space-y-1",children:[(0,dt.jsx)("li",{children:'1. Select a user (e.g., Bryan) \u2192 Click "Create Collaboration Notification" (Purple theme)'}),(0,dt.jsx)("li",{children:'2. Click "Create General Notification" (Blue theme)'}),(0,dt.jsx)("li",{children:"3. Go to Notification Center \u2192 Check different color themes"}),(0,dt.jsx)("li",{children:'4. Click on notifications \u2192 Verify "mark as read" functionality'}),(0,dt.jsx)("li",{children:"5. Check unread count \u2192 Should decrease after marking as read"}),(0,dt.jsx)("li",{children:'6. Click "Clear Notifications" \u2192 Verify all notifications are removed'})]})]})]})]})},Bo=()=>{const[t,r]=(0,e.useState)([]),[a,o]=(0,e.useState)(!1),[n,s]=(0,e.useState)(""),i=(0,ct.HW)(),l=async()=>{o(!0),s("Loading portfolio...");try{const e=await(0,Er.BD)();console.log("Load result:",e),e.success?(r(e.data),s(`Loaded ${e.data.length} items successfully`)):s(`Error: ${e.error}`)}catch(e){s(`Exception: ${e.message}`)}finally{o(!1)}};return(0,e.useEffect)(()=>{l()},[]),(0,dt.jsxs)("div",{style:{padding:"20px",maxWidth:"600px",margin:"0 auto"},children:[(0,dt.jsx)("h2",{children:"Mock API \u6d4b\u8bd5"}),(0,dt.jsxs)("p",{children:["\u5f53\u524d\u7528\u6237: ",i.name," (ID: ",i.id,")"]}),(0,dt.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,dt.jsx)("button",{onClick:l,disabled:a,style:{marginRight:"10px"},children:"\u52a0\u8f7d\u4f5c\u54c1"}),(0,dt.jsx)("button",{onClick:async()=>{o(!0),s("Creating portfolio item...");try{const e={title:`Test Item ${Date.now()}`,description:"This is a test item",category:"Test",tags:["test","mock"],imagePaths:["test/path/image.jpg"],thumbnailPath:"test/path/thumbnail.jpg",isPublic:!0},t=await(0,Er.qo)(e);console.log("Create result:",t),t.success?(s("Created successfully! Reloading portfolio..."),await l()):s(`Error: ${t.error}`)}catch(e){s(`Exception: ${e.message}`)}finally{o(!1)}},disabled:a,style:{marginRight:"10px"},children:"\u521b\u5efa\u6d4b\u8bd5\u4f5c\u54c1"}),(0,dt.jsx)("button",{onClick:async()=>{o(!0),s("Testing image upload...");try{const e=new File(["mock image data"],"test.jpg",{type:"image/jpeg"}),t=await(0,Er.jp)(e,i.id);console.log("Upload result:",t),t.success?s(`Uploaded successfully! Path: ${t.data.path}`):s(`Error: ${t.error}`)}catch(e){s(`Exception: ${e.message}`)}finally{o(!1)}},disabled:a,style:{marginRight:"10px"},children:"\u6d4b\u8bd5\u4e0a\u4f20\u56fe\u7247"}),(0,dt.jsx)("button",{onClick:()=>{Object.keys(localStorage).forEach(e=>{e.startsWith("portfolio_")&&localStorage.removeItem(e)}),r([]),s("Cleared portfolio storage")},disabled:a,children:"\u6e05\u7a7a\u5b58\u50a8"})]}),(0,dt.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,dt.jsx)("strong",{children:"\u72b6\u6001:"})," ",n]}),(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("strong",{children:["\u4f5c\u54c1\u5217\u8868 (",t.length," \u4e2a):"]}),(0,dt.jsx)("pre",{style:{background:"#f5f5f5",padding:"10px",borderRadius:"4px",maxHeight:"300px",overflow:"auto"},children:JSON.stringify(t,null,2)})]}),(0,dt.jsxs)("div",{style:{marginTop:"20px"},children:[(0,dt.jsx)("strong",{children:"localStorage \u4e2d\u7684 portfolio \u952e:"}),(0,dt.jsx)("pre",{style:{background:"#f5f5f5",padding:"10px",borderRadius:"4px"},children:Object.keys(localStorage).filter(e=>e.startsWith("portfolio_")).join("\n")})]})]})},qo=e=>{let{onBackClick:t}=e;return(0,dt.jsx)("div",{className:"p-4",children:(0,dt.jsxs)("button",{onClick:t,className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[(0,dt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Home"]})})},Ho=()=>(0,dt.jsxs)("div",{className:"text-center mb-8",children:[(0,dt.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Posting Guidelines"}),(0,dt.jsx)("p",{className:"text-lg text-gray-600",children:"Artwork Submission Tips"})]}),Go=[{id:1,text:"Upload finished works only; images must be clear and legible",icon:"check"},{id:2,text:"Use descriptive titles that capture attention",icon:"check"},{id:3,text:"Add relevant tags to improve discoverability",icon:"check"},{id:4,text:"Images only for now (JPG / PNG)",icon:"check"},{id:5,text:"Max 10 MB per work (total of all images)",icon:"check"}],Vo=[{id:1,text:"Avoid uploading work that isn't yours",icon:"x"},{id:2,text:"No blurry or heavily compressed/watermarked content",icon:"x"},{id:3,text:"Video uploads aren't supported yet",icon:"x"},{id:4,text:"Uploads to Jobs and ArtMarket are currently closed (in testing)",icon:"x"}],Jo={good:{title:"\u2713 Good",description:"High quality, well-composed",className:"bg-green-500",content:{title:"STUP AI",icon:"w-16 h-16 bg-red-500 rounded-full mx-auto mb-2",bar:"w-32 h-4 bg-black rounded"}},bad:{title:"\xd7 Bad",description:"Low resolution, poor lighting",className:"bg-red-500",content:{title:"STUP AI",icon:"w-16 h-16 bg-red-400 rounded-full mx-auto mb-2 blur-sm",bar:"w-32 h-4 bg-gray-800 rounded blur-sm",containerClass:"opacity-60",titleClass:"blur-sm"}}},Ko="Pro Tip",Yo="Projects with visual examples receive 3x more collaboration requests than those without.",Zo="community guidelines",Qo="#",Xo=()=>{const e=(e,t)=>e.map(e=>{return(0,dt.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,dt.jsx)("div",{className:`flex-shrink-0 w-6 h-6 ${t} rounded-full flex items-center justify-center`,children:(r=e.icon,"check"===r?(0,dt.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):(0,dt.jsx)("svg",{className:"w-4 h-4 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}))}),(0,dt.jsx)("p",{className:"text-gray-700 font-semibold",children:e.text})]},e.id);var r});return(0,dt.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,dt.jsxs)("div",{className:"space-y-4",children:[(0,dt.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"\u2705 Do's"}),(0,dt.jsx)("div",{className:"space-y-3",children:e(Go,"bg-green-100")})]}),(0,dt.jsxs)("div",{className:"space-y-4",children:[(0,dt.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"\u274c Don'ts"}),(0,dt.jsx)("div",{className:"space-y-3",children:e(Vo,"bg-red-100")})]})]})},en=()=>{const e=e=>{const t=Jo[e],{content:r}=t;return(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsxs)("div",{className:"relative mb-4",children:[(0,dt.jsx)("div",{className:`w-full h-48 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center ${r.containerClass||""}`,children:(0,dt.jsxs)("div",{className:"text-white text-center",children:[(0,dt.jsx)("div",{className:`text-2xl font-bold mb-2 ${r.titleClass||""}`,children:r.title}),(0,dt.jsx)("div",{className:r.icon}),(0,dt.jsx)("div",{className:r.bar})]})}),(0,dt.jsx)("div",{className:`absolute -top-2 -right-2 ${t.className} text-white px-2 py-1 rounded-full text-xs font-medium`,children:t.title})]}),(0,dt.jsx)("p",{className:`text-sm ${"good"===e?"text-green-600":"text-red-600"} font-medium`,children:t.description})]})};return(0,dt.jsxs)("div",{className:"border-t border-gray-200 pt-8",children:[(0,dt.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Visual Examples"}),(0,dt.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[e("good"),e("bad")]})]})},tn=()=>(0,dt.jsx)("div",{className:"border-t border-gray-200 pt-6",children:(0,dt.jsxs)("p",{className:"text-gray-600 text-center",children:["All uploads are subject to review by our"," ",(0,dt.jsx)("a",{href:Qo,className:"text-tag-blue hover:text-tag-dark-blue font-medium",children:Zo}),". Content that violates our community guidelines may be removed."]})}),rn=()=>(0,dt.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,dt.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,dt.jsx)("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:(0,dt.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{d:"M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM5.05 6.464A1 1 0 106.464 5.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM5 10a1 1 0 01-1 1H3a1 1 0 110-2h1a1 1 0 011 1zM8 16v-1h4v1a2 2 0 11-4 0zM12 14c.015-.34.208-.646.477-.859a4 4 0 10-4.954 0c.27.213.462.519.476.859h4.002z"})})}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("p",{className:"font-semibold text-blue-900",children:Ko}),(0,dt.jsx)("p",{className:"text-blue-800 text-sm",children:Yo})]})]})}),an=e=>{let{guidelinesConfirmed:t,onCheckboxChange:r,onConfirm:a,user:o}=e;return(0,dt.jsxs)("div",{className:"border-t border-gray-200 pt-8 mt-8",children:[(0,dt.jsx)("div",{className:"flex items-center justify-center space-x-4",children:(0,dt.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[(0,dt.jsx)("input",{type:"checkbox",checked:t,onChange:r,className:"h-5 w-5 text-tag-blue focus:ring-tag-blue border-gray-300 rounded"}),(0,dt.jsx)("span",{className:"text-gray-700 font-medium",children:"I understand and agree to follow these guidelines"})]})}),(0,dt.jsx)("div",{className:"mt-6 flex justify-center",children:(0,dt.jsx)("button",{onClick:a,disabled:!t,className:"px-8 py-3 bg-gradient-to-r from-tag-blue to-tag-purple text-white font-medium rounded-lg shadow-lg hover:from-tag-dark-blue hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-tag-blue disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105",children:o?"Proceed to Upload":"Continue to Login"})})]})},on=()=>{const[t,r]=(0,e.useState)(!1);return{guidelinesConfirmed:t,handleCheckboxChange:e=>{r(e.target.checked)},resetState:()=>{r(!1)}}},nn=t=>{let{guidelinesConfirmed:r,user:a}=t;const o=ee();return{handleConfirm:(0,e.useCallback)(()=>{r&&(localStorage.setItem("tag_guidelines_accepted","true"),o(a?"/upload/form":"/login"))},[r,a,o]),handleBackToHome:(0,e.useCallback)(()=>{o("/")},[o])}},sn=()=>{const{user:e}=ht(),{guidelinesConfirmed:t,handleCheckboxChange:r}=on(),{handleConfirm:a,handleBackToHome:o}=nn({guidelinesConfirmed:t,user:e});return(0,dt.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[(0,dt.jsx)(qo,{onBackClick:o}),(0,dt.jsx)("div",{className:"flex-1 flex items-center justify-center px-4 sm:px-6 lg:px-8 py-8",children:(0,dt.jsx)("div",{className:"max-w-4xl w-full space-y-8",children:(0,dt.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,dt.jsx)(Ho,{}),(0,dt.jsxs)("div",{className:"space-y-8",children:[(0,dt.jsx)(Xo,{}),(0,dt.jsx)(en,{}),(0,dt.jsx)(tn,{}),(0,dt.jsx)(rn,{})]}),(0,dt.jsx)(an,{guidelinesConfirmed:t,onCheckboxChange:r,onConfirm:a,user:e})]})})})]})},ln=e=>{let{children:t}=e;return"true"!==localStorage.getItem("tag_guidelines_accepted")?(0,dt.jsx)(fe,{to:"/upload/guidelines",replace:!0}):t},cn=e=>{let{module:t="Milestones",title:r="Your milestone has been shared successfully!",subtitle:a="The community can now see your achievement and celebrate with you.",icon:o="\ud83c\udfc1",bannerSubtitle:n="Celebrate achievements and track creative journeys"}=e;const s=ee(),i=(e=>{const t={Milestones:{icon:"\ud83c\udfc1",bannerTitle:"Milestones Feed",bannerSubtitle:"Celebrate achievements and track creative journeys",successTitle:"Your milestone has been shared successfully!",successSubtitle:"The community can now see your achievement and celebrate with you."},"Art Market":{icon:"\ud83c\udfea",bannerTitle:"Art Market Feed",bannerSubtitle:"Showcase your artwork to the world",successTitle:"Your artwork has been published successfully!",successSubtitle:"Art lovers can now discover and appreciate your creation."},Portfolio:{icon:"\ud83d\udcc1",bannerTitle:"Portfolio Feed",bannerSubtitle:"Build your professional portfolio",successTitle:"Your portfolio has been updated successfully!",successSubtitle:"Your professional showcase is now live for the community."},Collaboration:{icon:"\ud83e\udd1d",bannerTitle:"Collaboration Feed",bannerSubtitle:"Connect and collaborate with fellow artists",successTitle:"Your collaboration has been shared successfully!",successSubtitle:"Other artists can now discover and join your project."},Jobs:{icon:"\ud83d\udcbc",bannerTitle:"Jobs Feed",bannerSubtitle:"Find opportunities and grow your career",successTitle:"Your job post has been published successfully!",successSubtitle:"Talented artists can now discover and apply for your opportunity."}};return t[e]||t.Milestones})(t),l="Portfolio"===t||"Art Market"===t,c=l?"bg-gradient-to-r from-[#3B82F6] to-[#1D4ED8]":"bg-gradient-to-r from-[#9333EA] to-[#7e22ce]",d=l?"bg-tag-blue":"bg-tag-purple",u=l?"hover:bg-blue-700":"hover:bg-purple-700",h=l?"border-tag-blue":"border-tag-purple",m=l?"text-tag-blue":"text-tag-purple",p=l?"hover:bg-blue-50":"hover:bg-purple-50";return(0,dt.jsxs)("div",{className:"fixed inset-0 bg-gray-50 z-50 overflow-y-auto",children:[(0,dt.jsxs)("div",{className:`${c} h-48 flex flex-col items-center justify-center text-white`,children:[(0,dt.jsx)("div",{className:"text-4xl mb-4",children:i.icon}),(0,dt.jsx)("h1",{className:"text-2xl font-bold mb-2",children:i.bannerTitle}),(0,dt.jsx)("p",{className:"text-white/90 text-center max-w-md",children:i.bannerSubtitle})]}),(0,dt.jsx)("div",{className:"max-w-md mx-auto -mt-8 relative z-10",children:(0,dt.jsx)("div",{className:"bg-[#ECFDF5] rounded-lg shadow-lg p-6 border border-green-200",children:(0,dt.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,dt.jsx)("div",{className:"flex-shrink-0",children:(0,dt.jsx)("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center",children:(0,dt.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),(0,dt.jsxs)("div",{className:"flex-1",children:[(0,dt.jsx)("h2",{className:"text-lg font-bold text-green-800 mb-2",children:i.successTitle}),(0,dt.jsx)("p",{className:"text-green-700 text-sm leading-relaxed",children:i.successSubtitle})]})]})})}),(0,dt.jsxs)("div",{className:"max-w-md mx-auto mt-8 px-4 pb-8",children:[(0,dt.jsxs)("div",{className:"space-y-4",children:[(0,dt.jsxs)("button",{onClick:()=>{if(console.log("\ud83d\udd0d handleViewFeed called with module:",t),"Milestones"===t){console.log("\ud83c\udfaf Navigating to TAGMe with Milestones tab");const e={activeTab:"Milestones",from:"upload-success"};console.log("\ud83c\udfaf Navigation state being passed:",e),s("/tagme",{state:e})}else if("Collaboration"===t){console.log("\ud83c\udfaf Navigating to TAGMe with Collaborations tab");const e={activeTab:"Collaborations",from:"upload-success"};console.log("\ud83c\udfaf Navigation state being passed:",e),s("/tagme",{state:e})}else if("Jobs"===t){console.log("\ud83c\udfaf Navigating to TAGMe with Jobs tab");const e={activeTab:"Jobs",from:"upload-success"};console.log("\ud83c\udfaf Navigation state being passed:",e),s("/tagme",{state:e})}else if("Portfolio"===t){console.log("\ud83c\udfaf Navigating to Gallery with Works tab");const e={activeTab:"Works",from:"upload-success",scrollToGallery:!0};console.log("\ud83c\udfaf Navigation state being passed:",e),s("/",{state:e})}else if("Art Market"===t){console.log("\ud83c\udfaf Navigating to Gallery with Market tab");const e={activeTab:"Market",from:"upload-success",scrollToGallery:!0};console.log("\ud83c\udfaf Navigation state being passed:",e),s("/",{state:e})}else console.log("\ud83c\udfaf Navigating to home page"),s("/")},className:`w-full ${d} text-white font-semibold py-3 rounded-lg ${u} transition-colors duration-200 flex items-center justify-center`,children:[(0,dt.jsxs)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View ",t," Feed"]}),(0,dt.jsxs)("button",{onClick:()=>{console.log("\ud83d\udd0d handleUploadMore called with module:",t),console.log("\ud83d\udd0d Current module value:",t);try{"Milestones"===t?(console.log("\ud83c\udfaf Navigating back to upload page with Milestones tab"),window.location.href="/upload?tab=milestones"):"Collaboration"===t?(console.log("\ud83c\udfaf Navigating back to upload page with Collaboration tab"),window.location.href="/upload?tab=collaboration"):"Jobs"===t?(console.log("\ud83c\udfaf Navigating back to upload page with Jobs tab"),window.location.href="/upload?tab=jobs"):"Art Market"===t?(console.log("\ud83c\udfaf Navigating back to upload page with Art Market tab"),window.location.href="/upload?tab=art-market"):"Portfolio"===t?(console.log("\ud83c\udfaf Navigating back to upload page with Portfolio tab"),window.location.href="/upload?tab=portfolio"):(console.log("\ud83c\udfaf Navigating back to upload page with default tab"),console.log("\u26a0\ufe0f Unknown module type:",t),window.location.href="/upload")}catch(e){console.error("\u274c Error in handleUploadMore:",e),window.location.href="/upload"}},className:`w-full bg-white ${m} font-semibold py-3 rounded-lg border-2 ${h} ${p} transition-colors duration-200 flex items-center justify-center`,children:[(0,dt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Upload More Content"]})]}),(0,dt.jsx)("div",{className:"text-center mt-6",children:(0,dt.jsx)(rt,{to:"/",className:"text-gray-500 hover:text-gray-700 text-sm transition-colors duration-200",children:"\u2190 Back to Home"})})]})]})},dn=[{value:"1-3",label:"1-3 people"},{value:"4-6",label:"4-6 people"},{value:"7-10",label:"7-10 people"},{value:"10+",label:"10+ people"}],un=[{value:"1-2-weeks",label:"1-2 weeks"},{value:"1-month",label:"1 month"},{value:"2-3-months",label:"2-3 months"},{value:"3-6-months",label:"3-6 months"},{value:"6+months",label:"6+ months"}],hn=[{value:"weekly",label:"Weekly"},{value:"bi-weekly",label:"Bi-weekly"},{value:"monthly",label:"Monthly"},{value:"as-needed",label:"As needed"}],mn=[{value:"designer",label:"Designer"},{value:"illustrator",label:"Illustrator"},{value:"developer",label:"Developer"},{value:"animator",label:"Animator"},{value:"writer",label:"Writer"},{value:"photographer",label:"Photographer"}],pn=e=>{let{formData:t,onFormChange:r}=e;return(0,dt.jsxs)("div",{className:"space-y-4",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Title"}),(0,dt.jsx)("input",{type:"text",name:"title",value:t.title,onChange:r,placeholder:"What's your project about?",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Type"}),(0,dt.jsxs)("div",{className:"flex",children:[(0,dt.jsx)("input",{type:"text",name:"projectType",value:t.projectType,onChange:r,placeholder:"Tags",className:"flex-1 bg-gray-50 border border-gray-300 rounded-l px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"}),(0,dt.jsx)("button",{type:"button",className:"bg-tag-purple text-white px-3 py-2 rounded-r hover:bg-purple-700 transition-colors duration-200",children:"+"})]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Description"}),(0,dt.jsx)("textarea",{name:"description",value:t.description,onChange:r,placeholder:"Describe your project and what kind of help you need...",rows:4,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Team Size"}),(0,dt.jsx)(xr,{options:dn,value:t.teamSize,onChange:r,name:"teamSize",placeholder:"Select size"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration"}),(0,dt.jsx)(xr,{options:un,value:t.duration,onChange:r,name:"duration",placeholder:"Select duration"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meeting Schedule"}),(0,dt.jsx)(xr,{options:hn,value:t.meetingSchedule,onChange:r,name:"meetingSchedule",placeholder:"Select schedule"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Information"}),(0,dt.jsx)("input",{type:"text",name:"contactInfo",value:t.contactInfo,onChange:r,placeholder:"Discord, Slack, Email, etc.",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Application Deadline"}),(0,dt.jsxs)("div",{className:"relative",children:[(0,dt.jsx)("input",{type:"date",name:"applicationDeadline",value:t.applicationDeadline,onChange:r,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"}),(0,dt.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,dt.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})]})]})},gn=()=>(0,dt.jsxs)("div",{className:"text-center mb-6",children:[(0,dt.jsx)("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,dt.jsx)("svg",{className:"w-8 h-8 text-tag-purple",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,dt.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Create Collaboration Post"}),(0,dt.jsx)("p",{className:"text-gray-600",children:"Post a collaboration request to find teammates and partners for your projects"})]}),fn=e=>{let{roles:t,onAddRole:r,onRemoveRole:a,onRoleChange:o}=e;return(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Team Roles Needed"}),(0,dt.jsx)("button",{type:"button",onClick:r,className:"bg-tag-purple text-white px-3 py-1 rounded text-sm hover:bg-purple-700 transition-colors duration-200",children:"+ Add Role"})]}),(0,dt.jsx)("div",{className:"space-y-4",children:t.map((e,r)=>(0,dt.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,dt.jsxs)("h4",{className:"text-sm font-medium text-gray-700",children:["Role #",r+1]}),t.length>1&&(0,dt.jsx)("button",{type:"button",onClick:()=>a(e.id),className:"text-red-500 hover:text-red-700",children:(0,dt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),(0,dt.jsxs)("div",{className:"space-y-3",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Select Role"}),(0,dt.jsxs)("div",{className:"relative",children:[(0,dt.jsxs)("select",{value:e.roleType,onChange:t=>o(e.id,"roleType",t.target.value),className:"w-full bg-white border border-gray-300 rounded px-3 py-2 pr-10 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple appearance-none text-sm",children:[(0,dt.jsx)("option",{value:"",children:"Choose a creative role"}),mn.map((e,t)=>(0,dt.jsx)("option",{value:e.value,children:e.label},t))]}),(0,dt.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,dt.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Add custom role..."}),(0,dt.jsx)("input",{type:"text",value:e.customRole,onChange:t=>o(e.id,"customRole",t.target.value),placeholder:"Or specify custom role",className:"w-full bg-white border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple text-sm"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Role Description"}),(0,dt.jsx)("textarea",{value:e.roleDescription,onChange:t=>o(e.id,"roleDescription",t.target.value),placeholder:"Describe responsibilities and expectations for this role...",rows:3,className:"w-full bg-white border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple text-sm"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Required Skills"}),(0,dt.jsx)("input",{type:"text",value:e.requiredSkills,onChange:t=>o(e.id,"requiredSkills",t.target.value),placeholder:"e.g., Figma, Adobe Creative Suite, Sketch, Cinema 4D",className:"w-full bg-white border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple text-sm"})]})]})]},e.id))})]})},vn=e=>{let{onFileUpload:t}=e;return(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Recruitment Poster"}),(0,dt.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg bg-white py-6 px-4 text-center",children:[(0,dt.jsx)("svg",{className:"w-8 h-8 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,dt.jsx)("p",{className:"text-gray-600 mb-2",children:"Upload recruitment poster"}),(0,dt.jsx)("p",{className:"text-xs text-gray-400 mb-4",children:"JPG, PNG (Max 5MB)"}),(0,dt.jsx)("input",{type:"file",accept:".jpg,.jpeg,.png",onChange:t,className:"hidden",id:"recruitment-poster-upload"}),(0,dt.jsx)("label",{htmlFor:"recruitment-poster-upload",className:"bg-tag-purple text-white px-4 py-2 rounded cursor-pointer hover:bg-purple-700 transition-colors duration-200",children:"Choose Image"})]})]})},xn=t=>{let{state:r,setters:a}=t;const{setFormData:o}=a;return{handleFormChange:(0,e.useCallback)(e=>{const{name:t,value:r}=e.target;o(e=>({...e,[t]:r}))},[o]),handleFileUpload:(0,e.useCallback)(e=>{const t=e.target.files;console.log("Collaboration files selected:",t)},[]),handleSubmit:(0,e.useCallback)(e=>{e.preventDefault(),console.log("Collaboration form submitted:",r.formData),a.setShowSuccess(!0)},[r.formData,a]),handleAddRole:(0,e.useCallback)(()=>{const e={id:Date.now(),roleType:"",customRole:"",roleDescription:"",requiredSkills:""};o(t=>({...t,roles:[...t.roles,e]}))},[o]),handleRemoveRole:(0,e.useCallback)(e=>{o(t=>({...t,roles:t.roles.filter(t=>t.id!==e)}))},[o]),handleRoleChange:(0,e.useCallback)((e,t,r)=>{o(a=>({...a,roles:a.roles.map(a=>a.id===e?{...a,[t]:r}:a)}))},[o])}},bn=()=>{const[t,r]=(0,e.useState)(!1),[a,o]=(0,e.useState)({title:"",projectType:"",description:"",teamSize:"",duration:"",meetingSchedule:"",contactInfo:"",applicationDeadline:"",roles:[{id:1,roleType:"",customRole:"",roleDescription:"",requiredSkills:""}]});return(0,e.useMemo)(()=>({state:{showSuccess:t,formData:a},setters:{setShowSuccess:r,setFormData:o}}),[t,a])},yn=()=>{ee();const{state:e,setters:t}=bn(),r=xn({state:e,setters:t});return e.showSuccess?(0,dt.jsx)(cn,{module:"Collaboration"}):(0,dt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,dt.jsx)(gn,{}),(0,dt.jsxs)("form",{onSubmit:r.handleSubmit,className:"space-y-6",children:[(0,dt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,dt.jsxs)("div",{className:"space-y-4",children:[(0,dt.jsx)(vn,{onFileUpload:r.handleFileUpload}),(0,dt.jsx)(pn,{formData:e.formData,onFormChange:r.handleFormChange})]}),(0,dt.jsx)(fn,{roles:e.formData.roles,onAddRole:r.handleAddRole,onRemoveRole:r.handleRemoveRole,onRoleChange:r.handleRoleChange})]}),(0,dt.jsxs)("button",{type:"submit",className:"w-full bg-tag-purple text-white font-semibold py-3 rounded-md hover:bg-purple-700 transition-colors duration-200 flex items-center justify-center",children:[(0,dt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Post Collaboration TAGMe!"]})]})]})},wn=()=>{const t=ee(),[r,a]=(0,e.useState)({title:"",company:"",location:"",jobType:"",salary:"",description:"",requirements:"",contactEmail:""}),o=e=>{const{name:t,value:r}=e.target;a(e=>({...e,[t]:r}))};return(0,dt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,dt.jsxs)("div",{className:"text-center mb-6",children:[(0,dt.jsx)("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,dt.jsx)("svg",{className:"w-8 h-8 text-tag-purple",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7a2 2 0 012-2h12a2 2 0 012 2v2H4V7zM4 9h16v10a2 2 0 01-2 2H6a2 2 0 01-2-2V9z"})})}),(0,dt.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Post Job Opportunity"}),(0,dt.jsx)("p",{className:"text-gray-600",children:"Share creative job opportunities with the TAG community"})]}),(0,dt.jsxs)("form",{onSubmit:e=>{e.preventDefault(),console.log("Jobs form submitted:",r),alert("Job posting created successfully on TAGMe!"),t("/")},className:"space-y-6",children:[(0,dt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Job Title"}),(0,dt.jsx)("input",{type:"text",name:"title",value:r.title,onChange:o,placeholder:"e.g., Senior UI/UX Designer",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company"}),(0,dt.jsx)("input",{type:"text",name:"company",value:r.company,onChange:o,placeholder:"Company name",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]})]}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),(0,dt.jsx)("input",{type:"text",name:"location",value:r.location,onChange:o,placeholder:"City, Country or Remote",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Job Type"}),(0,dt.jsxs)("div",{className:"relative",children:[(0,dt.jsxs)("select",{name:"jobType",value:r.jobType,onChange:o,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 pr-10 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple appearance-none",children:[(0,dt.jsx)("option",{value:"",children:"Select type"}),(0,dt.jsx)("option",{value:"full-time",children:"Full-time"}),(0,dt.jsx)("option",{value:"part-time",children:"Part-time"}),(0,dt.jsx)("option",{value:"contract",children:"Contract"}),(0,dt.jsx)("option",{value:"freelance",children:"Freelance"}),(0,dt.jsx)("option",{value:"internship",children:"Internship"})]}),(0,dt.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,dt.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Salary Range"}),(0,dt.jsx)("input",{type:"text",name:"salary",value:r.salary,onChange:o,placeholder:"e.g., $50k-$80k",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Job Description"}),(0,dt.jsx)("textarea",{name:"description",value:r.description,onChange:o,placeholder:"Describe the role, responsibilities, and what you're looking for...",rows:6,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Requirements"}),(0,dt.jsx)("textarea",{name:"requirements",value:r.requirements,onChange:o,placeholder:"List required skills, experience, and qualifications...",rows:4,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Email"}),(0,dt.jsx)("input",{type:"email",name:"contactEmail",value:r.contactEmail,onChange:o,placeholder:"hr@company.com",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,dt.jsxs)("button",{type:"submit",className:"w-full bg-tag-purple text-white font-semibold py-3 rounded-md hover:bg-purple-700 transition-colors duration-200 flex items-center justify-center",children:[(0,dt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6.5M8 6V4a2 2 0 00-2-2H4a2 2 0 00-2 2v2m8 0V6a2 2 0 012 2v6.5"})}),"Post Job TAGMe!"]})]})]})},kn=()=>(0,dt.jsxs)("div",{className:"text-center mb-8",children:[(0,dt.jsx)("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,dt.jsx)("svg",{className:"w-8 h-8 text-tag-purple",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 3v18m0-16h12l-2 4 2 4H6"})})}),(0,dt.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Share Your Milestone Stages"}),(0,dt.jsx)("p",{className:"text-gray-600",children:"Track your creative journey through multiple stages"})]}),jn=e=>{let{stage:t,index:r,isLast:a,onStageNameChange:o,onProgressChange:n,onFileUpload:s,onFieldChange:i,onRemoveStage:l,onAddNewStage:c,onKeyDown:d}=e;return(0,dt.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,dt.jsxs)("h3",{className:"text-lg font-semibold text-gray-800",children:["Milestone Stage ",r+1]}),(0,dt.jsx)("button",{type:"button",onClick:()=>l(t.id),className:"text-red-500 hover:text-red-700 text-sm transition-colors",children:"Delete Stage"})]}),(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stage Name"}),(0,dt.jsx)("input",{type:"text",value:t.stageName,onChange:e=>o(t.id,e.target.value),onKeyDown:d,placeholder:"e.g., Initial Design, Production, Final Review",className:"w-full bg-white border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,dt.jsx)("span",{className:"text-sm text-gray-600",children:"Stage Progress"}),(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("input",{type:"number",min:"0",max:"100",value:t.progress,onChange:e=>n(t.id,e.target.value),onKeyDown:d,className:"w-16 bg-white border border-gray-300 rounded px-2 py-1 text-sm text-center focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"}),(0,dt.jsx)("span",{className:"text-sm text-gray-600",children:"%"})]})]}),(0,dt.jsx)(Ot,{progress:t.progress})]}),(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Milestone Poster"}),(0,dt.jsxs)(Ut,{onFileUpload:e=>s(t.id,e),id:`milestone-poster-upload-${t.id}`,children:[(0,dt.jsx)("p",{className:"text-gray-600 mb-2",children:"Upload WIP that visually summarizes this stage"}),(0,dt.jsx)("p",{className:"text-xs text-gray-400 mb-4",children:"Only JPG or PNG, max 5MB"})]}),t.posterFiles.length>0&&(0,dt.jsx)("div",{className:"mt-3",children:(0,dt.jsxs)("p",{className:"text-sm text-gray-600",children:[t.posterFiles.length," files selected"]})})]}),(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Achieved"}),(0,dt.jsx)("input",{type:"date",value:t.dateAchieved,onChange:e=>i(t.id,"dateAchieved",e.target.value),onKeyDown:d,className:"w-full bg-white border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Related Skills"}),(0,dt.jsx)("input",{type:"text",value:t.relatedSkills,onChange:e=>i(t.id,"relatedSkills",e.target.value),onKeyDown:d,placeholder:"Skills you developed or used in this stage",className:"w-full bg-white border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"What's Next?"}),(0,dt.jsx)("textarea",{value:t.whatsNext,onChange:e=>i(t.id,"whatsNext",e.target.value),onKeyDown:d,placeholder:"Share your goals for the next stage...",rows:4,className:"w-full bg-white border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),a&&(0,dt.jsx)("div",{className:"text-center",children:(0,dt.jsxs)("button",{type:"button",onClick:c,className:"bg-tag-purple text-white px-6 py-3 rounded-md hover:bg-purple-700 transition-colors duration-200 flex items-center justify-center mx-auto",children:[(0,dt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Next Stage"]})})]})},Nn=e=>{let{relatedProject:t}=e;return(0,dt.jsxs)("div",{className:"mb-8",children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Related Collaboration Project"}),(0,dt.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h4",{className:"font-medium text-gray-800",children:t.name}),(0,dt.jsx)("p",{className:"text-sm text-gray-600",children:t.description})]}),(0,dt.jsx)("button",{type:"button",className:"text-tag-purple text-sm hover:text-purple-700 transition-colors",children:"View Project"})]}),(0,dt.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-3",children:[(0,dt.jsxs)("span",{children:["Team: ",t.teamSize," members"]}),(0,dt.jsxs)("span",{children:["Deadline: ",t.deadline]})]}),(0,dt.jsx)("button",{type:"button",className:"text-tag-purple text-sm hover:text-purple-700 transition-colors",children:"Link Different Project"})]})]})},Cn=t=>{let{state:r,setters:a}=t;const{setMilestoneStages:o}=a;return{handleStageNameChange:(0,e.useCallback)((e,t)=>{o(r=>r.map(r=>r.id===e?{...r,stageName:t}:r))},[o]),handleProgressChange:(0,e.useCallback)((e,t)=>{o(r=>r.map(r=>r.id===e?{...r,progress:parseInt(t)}:r))},[o]),handleFileUpload:(0,e.useCallback)((e,t)=>{const r=Array.from(t.target.files);o(t=>t.map(t=>t.id===e?{...t,posterFiles:r}:t))},[o]),handleFieldChange:(0,e.useCallback)((e,t,r)=>{o(a=>a.map(a=>a.id===e?{...a,[t]:r}:a))},[o]),addNewStage:(0,e.useCallback)(()=>{const e={id:Date.now(),stageName:"",progress:20,posterFiles:[],dateAchieved:"",relatedSkills:"",whatsNext:""};o(t=>[...t,e])},[o]),removeStage:(0,e.useCallback)(e=>{r.milestoneStages.length>1&&o(t=>t.filter(t=>t.id!==e))},[r.milestoneStages.length,o]),handleKeyDown:(0,e.useCallback)(e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation())},[]),handleSubmit:(0,e.useCallback)(e=>{e.preventDefault(),console.log("Milestones stages submitted:",r.milestoneStages),a.setShowSuccess(!0)},[r.milestoneStages,a])}},Sn=()=>{const[t,r]=(0,e.useState)(!1),[a,o]=(0,e.useState)([{id:1,stageName:"",progress:20,posterFiles:[],dateAchieved:"",relatedSkills:"",whatsNext:""}]);return(0,e.useMemo)(()=>({state:{showSuccess:t,milestoneStages:a},setters:{setShowSuccess:r,setMilestoneStages:o}}),[t,a])},_n=()=>{ee();const{state:e,setters:t}=Sn(),r=Cn({state:e,setters:t}),a={name:"Mobile App Design Collaboration",description:"Fintech app needs UI/UX designer",teamSize:4,deadline:"Dec 15, 2024"};return e.showSuccess?(0,dt.jsx)(cn,{module:"Milestones"}):(0,dt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,dt.jsx)(kn,{}),(0,dt.jsx)(Nn,{relatedProject:a}),(0,dt.jsxs)("form",{onSubmit:r.handleSubmit,className:"space-y-8",children:[e.milestoneStages.map((t,a)=>(0,dt.jsx)(jn,{stage:t,index:a,isLast:a===e.milestoneStages.length-1,onStageNameChange:r.handleStageNameChange,onProgressChange:r.handleProgressChange,onFileUpload:r.handleFileUpload,onFieldChange:r.handleFieldChange,onRemoveStage:r.removeStage,onAddNewStage:r.addNewStage,onKeyDown:r.handleKeyDown},t.id)),(0,dt.jsxs)("button",{type:"submit",className:"w-full bg-tag-purple text-white font-semibold py-3 rounded-md hover:bg-purple-700 transition-colors duration-200 flex items-center justify-center",children:[(0,dt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Share All Milestone Stages TAGMe!"]})]})]})},In=e=>{if(!e||"string"!==typeof e)return[];const t=e.match(/#([a-zA-Z0-9_-]{1,50})/g);if(!t)return[];const r=new Set,a=[];return t.forEach(e=>{const t=e.slice(1),o=t.toLowerCase().trim();En(o)&&!r.has(o)&&(r.add(o),a.push({name:t,slug:o}))}),a},En=e=>e.length>=2&&!["the","and","or","but","in","on","at","to","for","of","with","by","from","up","about","into","through","during","before","after","above","below","between","among","within","without","this","that","these","those","is","are","was","were","be","been","being","have","has","had","do","does","did","will","would","could","should","may","might","can","must","shall"].includes(e),Pn=()=>{const t=ee(),r=(0,ct.HW)(),[a,o]=(0,e.useState)({title:"",software:[],description:"",tags:[]}),[n,s]=(0,e.useState)(""),[i,l]=(0,e.useState)(!1),[c,d]=(0,e.useState)(""),[u,h]=(0,e.useState)([]),[m,p]=(0,e.useState)(!1),[g,f]=(0,e.useState)({}),[v,x]=(0,e.useState)(0),[b,y]=(0,e.useState)(!1),[w,k]=(0,e.useState)(!1),[j,N]=(0,e.useState)(""),[C,S]=(0,e.useState)(!1),_=e=>{const{name:t,value:r}=e.target;if("software"===t){if("Other"===r)return void l(!0);r&&!a.software.includes(r)&&o(e=>({...e,software:[...e.software,r]}))}else o(e=>({...e,[t]:r}));g[t]&&f(e=>({...e,[t]:""}))},I=()=>{c.trim()&&!a.software.includes(c.trim())&&(o(e=>({...e,software:[...e.software,c.trim()]})),d(""),l(!1))},E=(0,e.useCallback)(e=>{const t=Array.from(e.target.files);console.log("Portfolio files selected:",t);const r=t.filter(e=>["image/jpeg","image/png","image/gif","application/pdf"].includes(e.type)?!(e.size>10485760)||(N(`File too large: ${e.name}. Maximum size is 10MB.`),k(!0),!1):(N(`Invalid file type: ${e.name}. Please upload JPG, PNG, GIF, or PDF files.`),k(!0),!1));h(r)},[]),P=(0,e.useCallback)(()=>{const e={};return a.title.trim()||(e.title="Title is required"),0===a.tags.length&&(e.tags="At least one tag is required"),0===u.length&&(e.files="Please select at least one file"),f(e),0===Object.keys(e).length},[a,u]),A=(0,e.useCallback)(async()=>{const e=[];for(let t=0;t<u.length;t++){const a=u[t];x(t/u.length*100);const o=await(0,Er.jp)(a,r.id);if(!o.success)throw new Error(`Failed to upload ${a.name}: ${o.error}`);e.push(o.data)}return x(100),e},[u,r.id]),T=(0,e.useCallback)(async e=>{if(e.preventDefault(),P())return r?void S(!0):(N("Please log in to upload artwork"),void k(!0))},[a,u,r,P]),L=(0,e.useCallback)(async()=>{S(!1),p(!0),f({});try{var e,o;const s=await A();console.log("[UploadPortfolio] Form data tags:",a.tags),console.log("[UploadPortfolio] Form data software:",a.software);const i={title:a.title.trim(),category:"design",description:a.description.trim(),tags:[...a.tags,...a.software],imagePaths:s.map(e=>e.path),thumbnailPath:(null===(e=s[0])||void 0===e?void 0:e.path)||"",imageKey:(null===(o=s[0])||void 0===o?void 0:o.path)||"",isPublic:!0};console.log("[UploadPortfolio] Final portfolio data tags:",i.tags);const l=await(0,Er.qo)(i);if(l.success){if(r&&r.id)try{await zt.$F.ensureArtistIndexed(r.id),console.log("[UploadPortfolio] Artist indexed successfully")}catch(n){console.warn("[UploadPortfolio] Failed to index artist:",n)}y(!0),setTimeout(()=>{t("/")},2e3)}else f({general:l.error||"Failed to save artwork"})}catch(s){console.error("Upload error:",s),f({general:"Upload failed. Please try again."})}finally{p(!1),x(0)}},[a,u,r,t,A]);return(0,dt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,dt.jsxs)("div",{className:"text-center mb-6",children:[(0,dt.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,dt.jsx)("svg",{className:"w-8 h-8 text-tag-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,dt.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Share Your Portfolio Work"}),(0,dt.jsx)("p",{className:"text-gray-600",children:"Upload your creative work to the gallery for everyone to see and get inspired"})]}),g.general&&(0,dt.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,dt.jsx)("p",{className:"text-red-600 text-sm",children:g.general})}),(0,dt.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg bg-white py-6 px-4 text-center mb-6",children:[(0,dt.jsx)("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,dt.jsx)("p",{className:"text-gray-600 mb-2",children:"Drag files here or click to browse"}),(0,dt.jsx)("p",{className:"text-xs text-gray-400 mb-4",children:"JPG, PNG, GIF, PDF (Max 10MB)"}),(0,dt.jsx)("input",{type:"file",multiple:!0,accept:".jpg,.jpeg,.png,.gif,.pdf",onChange:E,className:"hidden",id:"portfolio-file-upload",disabled:m}),(0,dt.jsx)("label",{htmlFor:"portfolio-file-upload",className:"bg-tag-blue text-white px-4 py-2 rounded cursor-pointer hover:bg-blue-700 transition-colors duration-200 "+(m?"opacity-50 cursor-not-allowed":""),children:u.length>0?`Selected ${u.length} files`:"Choose Files"})]}),u.length>0&&(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Selected Files:"}),(0,dt.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:u.map((e,t)=>(0,dt.jsxs)("div",{className:"relative group",children:[(0,dt.jsx)("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:e.type.startsWith("image/")?(0,dt.jsx)("img",{src:URL.createObjectURL(e),alt:e.name,className:"w-full h-full object-cover"}):(0,dt.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,dt.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})})}),(0,dt.jsx)("p",{className:"text-xs text-gray-600 mt-1 truncate",children:e.name}),(0,dt.jsx)("button",{type:"button",onClick:()=>h(e=>e.filter((e,r)=>r!==t)),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600 transition-colors",children:"\xd7"})]},t))}),g.files&&(0,dt.jsx)("p",{className:"text-red-600 text-sm mt-2",children:g.files})]}),m&&(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,dt.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Uploading..."}),(0,dt.jsxs)("span",{className:"text-sm text-gray-500",children:[Math.round(v),"%"]})]}),(0,dt.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,dt.jsx)("div",{className:"bg-tag-blue h-2 rounded-full transition-all duration-300",style:{width:`${v}%`}})})]}),(0,dt.jsxs)("form",{onSubmit:T,className:"space-y-4",children:[(0,dt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),(0,dt.jsx)("input",{type:"text",name:"title",value:a.title,onChange:_,placeholder:"Give your work a title...",disabled:m,className:`w-full bg-gray-50 border rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue ${g.title?"border-red-300":"border-gray-300"} ${m?"opacity-50 cursor-not-allowed":""}`}),g.title&&(0,dt.jsx)("p",{className:"text-red-600 text-sm mt-1",children:g.title})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Software Used"}),a.software.length>0&&(0,dt.jsx)("div",{className:"mb-3 flex flex-wrap gap-2",children:a.software.map((e,t)=>(0,dt.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[e,(0,dt.jsx)("button",{type:"button",onClick:()=>{return t=e,void o(e=>({...e,software:e.software.filter(e=>e!==t)}));var t},className:"ml-2 text-blue-600 hover:text-blue-800",children:"\xd7"})]},t))}),(0,dt.jsxs)("div",{className:"relative",children:[(0,dt.jsxs)("select",{name:"software",value:"",onChange:_,disabled:m,className:`w-full bg-gray-50 border rounded px-3 py-2 pr-10 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue appearance-none ${g.software?"border-red-300":"border-gray-300"} ${m?"opacity-50 cursor-not-allowed":""}`,children:[(0,dt.jsx)("option",{value:"",children:"Add software"}),(0,dt.jsx)("option",{value:"Photoshop",children:"Photoshop"}),(0,dt.jsx)("option",{value:"Illustrator",children:"Illustrator"}),(0,dt.jsx)("option",{value:"Blender",children:"Blender"}),(0,dt.jsx)("option",{value:"Maya",children:"Maya"}),(0,dt.jsx)("option",{value:"3ds Max",children:"3ds Max"}),(0,dt.jsx)("option",{value:"Cinema 4D",children:"Cinema 4D"}),(0,dt.jsx)("option",{value:"After Effects",children:"After Effects"}),(0,dt.jsx)("option",{value:"Premiere Pro",children:"Premiere Pro"}),(0,dt.jsx)("option",{value:"Figma",children:"Figma"}),(0,dt.jsx)("option",{value:"Sketch",children:"Sketch"}),(0,dt.jsx)("option",{value:"Procreate",children:"Procreate"}),(0,dt.jsx)("option",{value:"ZBrush",children:"ZBrush"}),(0,dt.jsx)("option",{value:"Substance Painter",children:"Substance Painter"}),(0,dt.jsx)("option",{value:"Unity",children:"Unity"}),(0,dt.jsx)("option",{value:"Unreal Engine",children:"Unreal Engine"}),(0,dt.jsx)("option",{value:"Other",children:"Other"})]}),(0,dt.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,dt.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),g.software&&(0,dt.jsx)("p",{className:"text-red-600 text-sm mt-1",children:g.software})]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,dt.jsx)("textarea",{name:"description",value:a.description,onChange:_,placeholder:"Describe your work...",rows:6,disabled:m,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue h-24 "+(m?"opacity-50 cursor-not-allowed":"")})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tags ",(0,dt.jsx)("span",{className:"text-red-500",children:"*"})]}),a.tags.length>0&&(0,dt.jsx)("div",{className:"mb-3 flex flex-wrap gap-2",children:a.tags.map((e,t)=>(0,dt.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-green-100 text-green-800",children:[e,(0,dt.jsx)("button",{type:"button",onClick:()=>{return t=e,void o(e=>({...e,tags:e.tags.filter(e=>e!==t)}));var t},className:"ml-2 text-green-600 hover:text-green-800",children:"\xd7"})]},t))}),(0,dt.jsx)("input",{type:"text",value:n,onChange:e=>{const t=e.target.value;if(s(t),!t.startsWith("#")&&t.length>0)return;if([" ",",","\n"].some(e=>t.includes(e))){if(a.tags.length>=10)return void s("");const e=t.split(/[\s,\n]/)[0].toLowerCase(),r=In(e);if(console.log("[UploadPortfolio] Extracted tags:",r,"from:",e),r.length>0){const e=`#${r[0].slug}`;console.log("[UploadPortfolio] Adding tag:",e),a.tags.includes(e)||o(t=>({...t,tags:[...t.tags,e]}))}else console.log("[UploadPortfolio] No tags extracted from:",e);s("")}},onKeyDown:e=>{if("Enter"===e.key||","===e.key){if(e.preventDefault(),a.tags.length>=10)return void s("");const t=n.trim();if(t.startsWith("#")){const e=In(t);if(e.length>0){const t=`#${e[0].slug}`;a.tags.includes(t)||o(e=>({...e,tags:[...e.tags,t]}))}}s("")}},placeholder:a.tags.length>=10?"Maximum 10 tags reached":"Type # to add tags (e.g., #design #illustration)",disabled:m||a.tags.length>=10,className:`w-full bg-gray-50 border rounded px-3 py-2 focus:outline-none focus:ring-1 ${a.tags.length>=10?"border-red-300 bg-red-50 text-gray-400":"border-gray-300 focus:ring-tag-blue focus:border-tag-blue"} ${m?"opacity-50 cursor-not-allowed":""}`}),(0,dt.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,dt.jsx)("p",{className:"text-xs text-gray-500",children:"Start with # and use lowercase letters only. Press space, comma, or enter to add tags."}),(0,dt.jsxs)("p",{className:"text-xs "+(a.tags.length>=10?"text-red-500":a.tags.length>=8?"text-yellow-600":"text-gray-400"),children:[a.tags.length,"/10 tags"]})]}),a.tags.length>=10&&(0,dt.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"\u26a0\ufe0f Maximum of 10 tags allowed. Remove some tags to add new ones."}),g.tags&&(0,dt.jsx)("p",{className:"text-red-600 text-sm mt-1",children:g.tags})]}),i&&(0,dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,dt.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Add Custom Software"}),(0,dt.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),placeholder:"Enter software name...",className:"w-full border border-gray-300 rounded px-3 py-2 mb-4 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue",onKeyPress:e=>{"Enter"===e.key&&I()}}),(0,dt.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,dt.jsx)("button",{type:"button",onClick:()=>{l(!1),d("")},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,dt.jsx)("button",{type:"button",onClick:I,disabled:!c.trim(),className:"px-4 py-2 bg-tag-blue text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"})]})]})}),(0,dt.jsx)("button",{type:"submit",disabled:m,className:"w-full font-semibold py-3 rounded-md transition-colors duration-200 flex items-center justify-center "+(m?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-tag-blue text-white hover:bg-blue-700"),children:m?(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-gray-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,dt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,dt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Publishing..."]}):(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Publish to TAG!"]})})]}),C&&(0,dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,dt.jsx)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,dt.jsx)("svg",{className:"w-8 h-8 text-tag-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Confirm Upload"}),(0,dt.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to publish this work to TAG? This action cannot be undone."}),(0,dt.jsxs)("div",{className:"flex space-x-3",children:[(0,dt.jsx)("button",{type:"button",onClick:()=>S(!1),className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,dt.jsx)("button",{type:"button",onClick:L,className:"flex-1 px-4 py-2 bg-tag-blue text-white rounded-md hover:bg-blue-700 transition-colors",children:"Confirm Upload"})]})]})})}),(0,dt.jsx)(It,{isOpen:b,title:"\ud83c\udf89 Success!",message:"Portfolio work published successfully to TAG!",onClose:()=>y(!1)}),(0,dt.jsx)(_t,{isOpen:w,title:"\u26a0\ufe0f Error",message:j,onClose:()=>k(!1)})]})},An=()=>(0,dt.jsxs)("div",{className:"text-center mb-6",children:[(0,dt.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,dt.jsx)("svg",{className:"w-8 h-8 text-tag-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,dt.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Sell Your Art Assets"}),(0,dt.jsx)("p",{className:"text-gray-600",children:"Upload digital assets to the marketplace and earn from your creative work"})]}),Tn=e=>{let{onFileUpload:t}=e;return(0,dt.jsxs)("div",{className:"space-y-6",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Files"}),(0,dt.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg bg-white py-6 px-4 text-center",children:[(0,dt.jsx)("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,dt.jsx)("p",{className:"text-gray-600 mb-2",children:"Drag files here or click to browse"}),(0,dt.jsx)("p",{className:"text-xs text-gray-400 mb-4",children:"JPG, PNG, AI, PSD, SVG, EPS (Max 25MB)"}),(0,dt.jsx)("input",{type:"file",multiple:!0,accept:".jpg,.jpeg,.png,.ai,.psd,.svg,.eps",onChange:t,className:"hidden",id:"art-market-file-upload"}),(0,dt.jsx)("label",{htmlFor:"art-market-file-upload",className:"bg-tag-blue text-white px-4 py-2 rounded cursor-pointer hover:bg-blue-700 transition-colors duration-200",children:"Choose Files"})]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preview Images"}),(0,dt.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg bg-white py-6 px-4 text-center",children:[(0,dt.jsx)("svg",{className:"w-8 h-8 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,dt.jsx)("p",{className:"text-gray-600 mb-2",children:"Upload preview images to showcase your asset"}),(0,dt.jsx)("p",{className:"text-xs text-gray-400 mb-4",children:"JPG, PNG (Max 5MB each)"}),(0,dt.jsx)("input",{type:"file",multiple:!0,accept:".jpg,.jpeg,.png",onChange:t,className:"hidden",id:"preview-images-upload"}),(0,dt.jsx)("label",{htmlFor:"preview-images-upload",className:"bg-blue-100 text-blue-800 font-semibold py-2 px-4 rounded cursor-pointer hover:bg-blue-200 transition-colors duration-200",children:"Add Previews"})]})]})]})},Ln=e=>{let{formData:t,onFormChange:r,errors:a=[]}=e;const o=[{value:"",label:"Select category"},{value:"graphics",label:"Graphics"},{value:"illustrations",label:"Illustrations"},{value:"templates",label:"Templates"},{value:"icons",label:"Icons"},{value:"fonts",label:"Fonts"},{value:"textures",label:"Textures"}],n=[{value:"Standard License",label:"Standard License"},{value:"Extended License",label:"Extended License"},{value:"Commercial License",label:"Commercial License"}];return(0,dt.jsxs)("div",{className:"space-y-4",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Asset Title"}),(0,dt.jsx)("input",{type:"text",name:"title",value:t.title,onChange:r,placeholder:"Name your digital asset...",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,dt.jsxs)("div",{className:"relative",children:[(0,dt.jsx)("select",{name:"category",value:t.category,onChange:r,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 pr-10 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue appearance-none",children:o.map(e=>(0,dt.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,dt.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,dt.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,dt.jsx)("textarea",{name:"description",value:t.description,onChange:r,placeholder:"Describe your asset, what's included, and how it can be used...",rows:4,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue"})]}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price"}),(0,dt.jsx)("input",{type:"number",name:"price",value:t.price,onChange:r,placeholder:"0.00",step:"0.01",min:"0",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"License Type"}),(0,dt.jsxs)("div",{className:"relative",children:[(0,dt.jsx)("select",{name:"licenseType",value:t.licenseType,onChange:r,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 pr-10 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue appearance-none",children:n.map(e=>(0,dt.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,dt.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,dt.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"File Format"}),(0,dt.jsx)("input",{type:"text",name:"fileFormat",value:t.fileFormat,onChange:r,placeholder:"e.g., AI, PSD, SVG",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue"})]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),(0,dt.jsx)("input",{type:"text",name:"tags",value:t.tags,onChange:r,placeholder:"Add relevant tags (e.g., minimal, vector, business)",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Software Used"}),(0,dt.jsx)("input",{type:"text",name:"softwareUsed",value:t.softwareUsed,onChange:r,placeholder:"e.g., Adobe Illustrator, Photoshop",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue"})]}),a.length>0&&(0,dt.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,dt.jsxs)("div",{className:"flex items-start",children:[(0,dt.jsx)("svg",{className:"w-5 h-5 text-red-600 mt-0.5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h4",{className:"text-sm font-semibold text-red-800 mb-1",children:"Please fix the following errors:"}),(0,dt.jsx)("ul",{className:"text-sm text-red-800 list-disc list-inside",children:a.map((e,t)=>(0,dt.jsx)("li",{children:e},t))})]})]})})]})},Mn=e=>{let{formData:t,onFormChange:r,onSubmit:a,isSubmitting:o=!1}=e;return(0,dt.jsxs)("div",{className:"space-y-4",children:[(0,dt.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,dt.jsxs)("div",{className:"flex items-start",children:[(0,dt.jsx)("svg",{className:"w-5 h-5 text-blue-600 mt-0.5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h4",{className:"text-sm font-semibold text-blue-800 mb-1",children:"Marketplace Guidelines"}),(0,dt.jsx)("p",{className:"text-sm text-blue-800",children:"All assets must be original work. We take 30% commission on sales. Assets are reviewed before going live."})]})]})}),(0,dt.jsxs)("div",{className:"flex items-start",children:[(0,dt.jsx)("input",{type:"checkbox",name:"agreeToTerms",checked:t.agreeToTerms,onChange:r,className:"mt-1 h-4 w-4 text-tag-blue focus:ring-tag-blue border-gray-300 rounded"}),(0,dt.jsx)("label",{className:"ml-2 text-sm text-gray-700",children:"I agree to the marketplace terms and confirm this is my original work"})]}),(0,dt.jsx)("button",{type:"submit",disabled:!t.agreeToTerms||o,onClick:a,className:"w-full font-semibold py-3 rounded-md transition-colors duration-200 flex items-center justify-center "+(t.agreeToTerms&&!o?"bg-tag-blue text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:o?(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,dt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,dt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Submitting..."]}):(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"List on TAG!"]})})]})},Dn=()=>{const[t,r]=(0,e.useState)({title:"",category:"",description:"",tags:"",price:"0.00",licenseType:"Standard License",fileFormat:"",softwareUsed:"",agreeToTerms:!1}),[a,o]=(0,e.useState)([]),[n,s]=(0,e.useState)(!1),i=(0,e.useCallback)(e=>{const{name:t,value:n,type:s,checked:i}=e.target,l="checkbox"===s?i:n;r(e=>({...e,[t]:l})),a.length>0&&o(e=>e.filter(e=>!e.includes(t)))},[a]),l=(0,e.useCallback)(e=>{const t=e.target.files;console.log("Art Market files selected:",t)},[]),c=(0,e.useCallback)(()=>{const e=(e=>{const t=[];return e.title.trim()||t.push("Title is required"),e.category||t.push("Category is required"),e.description.trim()||t.push("Description is required"),parseFloat(e.price)<0&&t.push("Price must be non-negative"),e.agreeToTerms||t.push("You must agree to the terms"),{isValid:0===t.length,errors:t}})(t);return o(e.errors),e.isValid},[t]),d=(0,e.useCallback)(()=>{r({title:"",category:"",description:"",tags:"",price:"0.00",licenseType:"Standard License",fileFormat:"",softwareUsed:"",agreeToTerms:!1}),o([]),s(!1)},[]),u=(0,e.useCallback)(e=>{s(e)},[]);return{formData:t,errors:a,isSubmitting:n,handleFormChange:i,handleFileUpload:l,validateForm:c,resetForm:d,setSubmitting:u}},Rn=t=>{let{formData:r,validateForm:a,setSubmitting:o,onSuccess:n}=t;const s=ee(),i=(0,e.useCallback)(async e=>{if(e.preventDefault(),a()){o(!0);try{const e=(e=>({...e,price:parseFloat(e.price)||0,tags:e.tags.split(",").map(e=>e.trim()).filter(e=>e),submittedAt:(new Date).toISOString()}))(r);console.log("Art Market form submitted:",e),await new Promise(e=>setTimeout(e,1e3)),n&&n()}catch(t){console.error("Error submitting form:",t)}finally{o(!1)}}},[r,a,o,n]);return{handleSubmit:i,handleCancel:(0,e.useCallback)(()=>{s("/upload/form")},[s])}},$n=()=>{const[t,r]=(0,e.useState)(!1),{formData:a,errors:o,isSubmitting:n,handleFormChange:s,handleFileUpload:i,validateForm:l,setSubmitting:c}=Dn(),d=Rn({formData:a,validateForm:l,setSubmitting:c,onSuccess:()=>{r(!0)}});return t?(0,dt.jsx)(cn,{module:"Art Market"}):(0,dt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,dt.jsx)(An,{}),(0,dt.jsxs)("form",{className:"space-y-6",children:[(0,dt.jsx)(Tn,{onFileUpload:i}),(0,dt.jsx)(Ln,{formData:a,onFormChange:s,errors:o}),(0,dt.jsx)(Mn,{formData:a,onFormChange:s,onSubmit:d.handleSubmit,isSubmitting:n})]})]})},Fn=()=>{const t=Z(),[r,a]=(0,e.useState)("portfolio");(0,e.useEffect)(()=>{var e,r;const o=new URLSearchParams(t.search).get("tab");if(o){a(o);const e=window.location.pathname;window.history.replaceState({},document.title,e)}else null!==(e=t.state)&&void 0!==e&&e.activeUploadType&&"upload-success"===(null===(r=t.state)||void 0===r?void 0:r.from)&&(a(t.state.activeUploadType),window.history.replaceState({},document.title))},[t.state,t.search]);const o=[{id:"art-market",name:"Art Market",theme:"blue",icon:(0,dt.jsx)("svg",{className:"w-6 h-6 text-current",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})},{id:"portfolio",name:"Portfolio",theme:"blue",icon:(0,dt.jsx)("svg",{className:"w-6 h-6 text-current",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})},{id:"collaboration",name:"Collaboration",theme:"purple",icon:(0,dt.jsx)("svg",{className:"w-6 h-6 text-current",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})},{id:"milestones",name:"Milestones",theme:"purple",icon:(0,dt.jsx)("svg",{className:"w-6 h-6 text-current",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 3v18m0-16h12l-2 4 2 4H6"})})},{id:"jobs",name:"Jobs",theme:"purple",icon:(0,dt.jsx)("svg",{className:"w-6 h-6 text-current",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7a2 2 0 012-2h12a2 2 0 012 2v2H4V7zM4 9h16v10a2 2 0 01-2 2H6a2 2 0 01-2-2V9z"})})}],n=e=>{const t=r===e.id,a="blue"===e.theme,o="purple"===e.theme;if(t){if(a)return"border-tag-blue bg-blue-50 text-tag-blue ring-2 ring-tag-blue/20";if(o)return"border-tag-purple bg-purple-50 text-tag-purple ring-2 ring-tag-purple/20"}return"text-gray-600 hover:text-gray-800"},s=e=>{const t=r===e.id,a="blue"===e.theme,o="purple"===e.theme;if(t){if(a)return"text-tag-blue";if(o)return"text-tag-purple"}return"text-gray-400"};return(0,dt.jsx)("div",{className:"min-h-screen bg-gray-50 pt-16",children:(0,dt.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-10",children:[(0,dt.jsxs)("div",{className:"text-center mb-8",children:[(0,dt.jsx)("h1",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"What would you like to upload?"}),(0,dt.jsx)("p",{className:"text-base text-gray-500",children:"Choose the type of content you want to share with the community"})]}),(0,dt.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 mb-8",children:o.map(e=>(0,dt.jsx)("button",{onClick:()=>a(e.id),className:`bg-white border border-gray-200 rounded-lg px-4 py-3 text-center transition-all duration-200 hover:shadow ${"blue"===e.theme?"hover:border-tag-blue":"hover:border-tag-purple"} ${n(e)}`,children:(0,dt.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,dt.jsx)("div",{className:s(e),children:e.icon}),(0,dt.jsx)("span",{className:"text-sm font-medium",children:e.name})]})},e.id))}),(0,dt.jsxs)("div",{className:"mt-8 rounded-lg p-6 "+("portfolio"===r||"art-market"===r?"bg-blue-50":"bg-purple-50"),children:[console.log("\ud83d\udd0d Rendering uploadType:",r),"portfolio"===r&&(0,dt.jsx)(Pn,{}),"art-market"===r&&(0,dt.jsx)($n,{}),"collaboration"===r&&(0,dt.jsx)(yn,{}),"jobs"===r&&(0,dt.jsx)(wn,{}),"milestones"===r&&(0,dt.jsx)(_n,{})]})]})})},On=t=>{let{imageUrl:r,imageAlt:a="Image",isOpen:o=!1,onClose:n,className:s=""}=t;const[i,l]=(0,e.useState)(1),[c,d]=(0,e.useState)(!1),[u,h]=(0,e.useState)({x:0,y:0}),[m,p]=(0,e.useState)({x:0,y:0}),g=(0,e.useCallback)(e=>{e.preventDefault();const t=e.deltaY>0?-.2:.2,r=Math.max(.5,Math.min(5,i+t));l(r)},[i]),f=(0,e.useCallback)(()=>{l(1),p({x:0,y:0})},[]),v=(0,e.useCallback)(e=>{i>1&&(d(!0),h({x:e.clientX-m.x,y:e.clientY-m.y}))},[i,m]),x=(0,e.useCallback)(e=>{c&&i>1&&p({x:e.clientX-u.x,y:e.clientY-u.y})},[c,i,u]),b=(0,e.useCallback)(()=>{d(!1)},[]);return(0,e.useEffect)(()=>{const e=e=>{"Escape"===e.key&&n()};return o&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[o,n]),(0,e.useEffect)(()=>{o&&(l(1),p({x:0,y:0}),d(!1))},[o]),o?(0,dt.jsxs)("div",{className:`fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm ${s}`,onClick:n,onWheel:g,onMouseMove:x,onMouseUp:b,onMouseLeave:b,children:[(0,dt.jsx)("button",{onClick:n,className:"absolute top-4 right-4 z-10 w-10 h-10 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white/30 transition-colors duration-200","aria-label":"Close image viewer",children:(0,dt.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),1!==i&&(0,dt.jsx)("button",{onClick:f,className:"absolute top-4 left-4 z-10 w-10 h-10 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white/30 transition-colors duration-200","aria-label":"Reset zoom",children:(0,dt.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}),(0,dt.jsx)("div",{className:"relative max-w-[90vw] max-h-[90vh] flex items-center justify-center",onClick:e=>e.stopPropagation(),onMouseDown:v,style:{cursor:i>1?c?"grabbing":"grab":"default"},children:(0,dt.jsx)("img",{src:r,alt:a,className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl transition-transform duration-200",loading:"eager",onDoubleClick:f,style:{transform:`scale(${i}) translate(${m.x/i}px, ${m.y/i}px)`,transformOrigin:"center"}})}),1!==i&&(0,dt.jsxs)("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-white/20 backdrop-blur-sm rounded-full px-3 py-1 text-white text-sm",children:[Math.round(100*i),"%"]}),(0,dt.jsx)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 text-white/70 text-sm",children:"Scroll to zoom \u2022 Double-click to reset \u2022 ESC to close"})]}):null},Un=t=>{let{images:r=[],workTitle:a="Work",className:o=""}=t;const[n,s]=(0,e.useState)(!1),[i,l]=(0,e.useState)(0),[c,d]=(0,e.useState)([]),[u,h]=(0,e.useState)(!0);(0,e.useEffect)(()=>{(async()=>{if(!r||0===r.length)return d([]),void h(!1);try{h(!0);const a=[];console.log("[WorkImageGallery] Processing images:",r);for(const o of r)if("string"===typeof o)if(o.startsWith("data:image/")||o.startsWith("blob:")||o.startsWith("http"))"/assets/placeholder.svg"!==o&&""!==o.trim()?(console.log("[WorkImageGallery] Using direct URL:",o.substring(0,50)+"..."),a.push(o)):console.log("[WorkImageGallery] Skipping placeholder path:",o);else{console.log("[WorkImageGallery] Converting file path to URL:",o);try{var e;const t=await(0,Er.Vp)(o);console.log("[WorkImageGallery] getPortfolioImageUrl result:",t),t.success&&null!==(e=t.data)&&void 0!==e&&e.url?(console.log("[WorkImageGallery] Successfully converted path to URL:",t.data.url.substring(0,50)+"..."),a.push(t.data.url)):(console.warn("[WorkImageGallery] Failed to convert path to URL:",o,t.error),console.log("[WorkImageGallery] Checking if image exists in IndexedDB..."))}catch(t){console.error("[WorkImageGallery] Error converting path to URL:",o,t)}}else console.log(`[WorkImageGallery] Skipping non-string: ${typeof o} - ${o}`);console.log(`[WorkImageGallery] Final URLs count: ${a.length}`,a.map(e=>(null===e||void 0===e?void 0:e.substring(0,30))+"...")),d(a)}catch(a){console.error("Error loading image URLs:",a),d([])}finally{h(!1)}})()},[r]);return u?(0,dt.jsx)("div",{className:`${o}`,children:(0,dt.jsx)("div",{className:"relative aspect-square bg-gray-100 rounded-lg flex items-center justify-center",children:(0,dt.jsxs)("div",{className:"text-center text-gray-500",children:[(0,dt.jsx)("svg",{className:"w-8 h-8 mx-auto mb-2 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,dt.jsx)("p",{children:"Loading images..."})]})})}):c&&0!==c.length?(0,dt.jsxs)("div",{className:`${o}`,children:[(0,dt.jsx)("div",{className:"space-y-4",children:c.map((e,t)=>(0,dt.jsx)("div",{className:"relative",children:(0,dt.jsxs)("div",{className:"relative aspect-square bg-white rounded-lg shadow-sm overflow-hidden",children:[e?(0,dt.jsx)("img",{src:e,alt:`${a} - ${t+1}`,className:"w-full h-full object-cover cursor-pointer hover:opacity-90 transition-opacity duration-200",onClick:()=>(e=>{l(e),s(!0)})(t)}):(0,dt.jsx)("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:(0,dt.jsxs)("div",{className:"text-center text-gray-500",children:[(0,dt.jsx)("svg",{className:"w-12 h-12 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,dt.jsx)("p",{className:"text-sm",children:"Image not found"})]})}),c.length>1&&(0,dt.jsxs)("div",{className:"absolute top-4 left-4 bg-black/50 text-white px-2 py-1 rounded text-sm",children:[t+1," / ",c.length]})]})},t))}),n&&c[i]&&(0,dt.jsx)(On,{imageUrl:c[i],imageAlt:`${a} - ${i+1}`,isOpen:n,onClose:()=>{s(!1)}})]}):(0,dt.jsx)("div",{className:`${o}`,children:(0,dt.jsx)("div",{className:"relative aspect-square bg-gray-100 rounded-lg flex items-center justify-center",children:(0,dt.jsxs)("div",{className:"text-center text-gray-500",children:[(0,dt.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,dt.jsx)("p",{children:"No images available"})]})})})},zn=e=>{let{workData:t,onBackClick:r,onImageNavigation:a,navigationState:o,className:n=""}=e;return(0,dt.jsxs)("div",{className:`${n}`,children:[(0,dt.jsxs)("button",{onClick:r,className:"flex items-center text-gray-600 hover:text-gray-900 mb-6 transition-colors duration-200 relative z-10 bg-white px-4 py-2 rounded-lg shadow-sm hover:shadow-md",children:[(0,dt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),(0,dt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,dt.jsxs)("button",{onClick:null===o||void 0===o?void 0:o.navigateToPrevious,disabled:!(null!==o&&void 0!==o&&o.hasPrevious)&&(null===o||void 0===o?void 0:o.totalWorks)<=1,className:"flex items-center px-4 py-2 bg-white rounded-lg shadow-sm hover:shadow-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous work (\u2190)",children:[(0,dt.jsx)("svg",{className:"w-5 h-5 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Previous Work"]}),(0,dt.jsxs)("button",{onClick:null===o||void 0===o?void 0:o.navigateToNext,disabled:!(null!==o&&void 0!==o&&o.hasNext)&&(null===o||void 0===o?void 0:o.totalWorks)<=1,className:"flex items-center px-4 py-2 bg-white rounded-lg shadow-sm hover:shadow-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Next work (\u2192)",children:["Next Work",(0,dt.jsx)("svg",{className:"w-5 h-5 ml-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),(0,dt.jsx)("div",{className:"mb-6",children:(0,dt.jsx)(Un,{images:t.allImages||[t.mainImage],workTitle:t.title})})]})},Wn=e=>{let{tag:t,onClick:r,children:a}=e;return(0,dt.jsx)("a",{href:`/t/${t.slug}`,onClick:e=>{r&&(e.preventDefault(),r(t))},target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline cursor-pointer",title:`View all content tagged with ${t.name}`,children:a})},Bn=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e&&0!==e.length?(0,dt.jsx)("div",{className:`flex flex-wrap gap-2 ${r}`,children:e.map((e,r)=>(0,dt.jsxs)(Wn,{tag:e,onClick:t,children:["#",e.name]},`${e.slug}-${r}`))}):null},qn=e=>{const t="flex items-center px-4 py-2 rounded-lg transition-colors duration-200";return e?`${t} bg-red-50 text-red-600`:`${t} bg-gray-100 text-gray-700 hover:bg-gray-200`},Hn=e=>{let{workData:t,isLiked:r,isSaved:a,onLikeClick:o,onSaveClick:n,className:s=""}=e;return(0,dt.jsxs)("div",{className:`bg-white rounded-lg p-6 mb-6 ${s}`,children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,dt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,dt.jsxs)("button",{onClick:o,className:qn(r),children:[(0,dt.jsx)("svg",{className:"w-5 h-5 mr-2 "+(r?"fill-current":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),t.likes]}),(0,dt.jsx)(Ct,{isFavorited:a,itemType:"work",itemId:t.id,onToggle:n,size:"md"})]}),(0,dt.jsxs)("div",{className:"flex items-center text-gray-500",children:[(0,dt.jsxs)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),(i=t.views,i.toLocaleString())]})]}),(0,dt.jsx)("div",{className:"flex flex-wrap gap-2",children:t.tags&&t.tags.length>0?t.tags.map((e,t)=>{if(e.startsWith("#")){const r=In(e);if(r.length>0)return(0,dt.jsx)("div",{className:"inline-block",children:Bn(r,null,"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium")},t)}return(0,dt.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:e},t)}):(0,dt.jsx)("span",{className:"text-gray-500 text-sm",children:"No tags"})})]});var i},Gn=e=>{let{parentId:t,parentAuthorName:r,draft:a,onChange:o,onSubmit:n,onCancel:s,className:i=""}=e;return(0,dt.jsx)("div",{className:`mt-2 pl-10 ${i}`,children:(0,dt.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,dt.jsx)("img",{src:(0,ct.ou)(),alt:"Your avatar",className:"w-8 h-8 rounded-full flex-shrink-0"}),(0,dt.jsxs)("div",{className:"flex-1",children:[(0,dt.jsx)("textarea",{value:a||"",onChange:e=>o(t,e.target.value),placeholder:`Reply to ${r}\u2026`,rows:2,className:"w-full p-2 border border-gray-300 rounded-md text-sm resize-none focus:outline-none focus:ring-2 focus:ring-tag-blue focus:border-transparent",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),n(t))}}),(0,dt.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,dt.jsx)("button",{className:"px-3 py-1 rounded bg-tag-blue text-white text-sm hover:bg-tag-dark-blue transition-colors duration-200",onClick:()=>n(t),children:"Post"}),(0,dt.jsx)("button",{className:"px-3 py-1 rounded border border-gray-300 text-sm hover:bg-gray-50 transition-colors duration-200",onClick:s,children:"Cancel"})]})]})]})})},Vn=t=>{var r,a;let{comment:o,comments:n,onUserClick:s,onLikeClick:i,onReplyClick:l,onDeleteClick:c,replyingTo:d,replyDrafts:u,onStartReply:h,onCancelReply:m,onSetReplyDraft:p,onSubmitReply:g,className:f=""}=t;const v=(0,ct.HW)(),x=v&&o.authorId===v.id,b=(null===d||void 0===d?void 0:d.parentId)===o.id,y=(0,e.useMemo)(()=>n.filter(e=>String(e.parentId)===String(o.id)).sort((e,t)=>e.createdAt-t.createdAt),[n,o.id]),[w,k]=(0,e.useState)(null),[j,N]=(0,e.useState)(!0);(0,e.useEffect)(()=>{(async()=>{if(o.authorId)try{N(!0);const e=await(0,Lr.Cs)(o.authorId);k(e)}catch(e){console.warn(`[CommentItem] Failed to get author info for ${o.authorId}:`,e),k(null)}finally{N(!1)}else N(!1)})()},[o.authorId]);const C=()=>j?o.authorName||"Loading...":null!==w&&void 0!==w&&w.name?w.name:o.authorName||"Unknown User",S=e=>{const t="string"===typeof e?new Date(e).getTime():e,r=new Date(t),a=new Date,o=Math.floor((a-r)/6e4);return o<1?"Just now":o<60?`${o}m ago`:o<1440?`${Math.floor(o/60)}h ago`:`${Math.floor(o/1440)}d ago`};return(0,dt.jsxs)("div",{className:`flex space-x-3 ${f}`,children:[(0,dt.jsx)("img",{src:j?(0,ct.ou)():null!==w&&void 0!==w&&w.avatar?w.avatar:(0,ct.ou)(),alt:C(),className:"w-10 h-10 rounded-full cursor-pointer hover:opacity-80 transition-opacity duration-200",onClick:()=>s(o.authorId)}),(0,dt.jsxs)("div",{className:"flex-1",children:[(0,dt.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,dt.jsx)("span",{className:"font-medium text-gray-900 cursor-pointer hover:text-tag-blue transition-colors duration-200",onClick:()=>s(o.authorId),children:C()}),(0,dt.jsx)("span",{className:"text-sm text-gray-500",children:S(o.createdAt)})]}),(0,dt.jsx)("p",{className:"text-gray-700",children:o.text||o.content||""})]}),(0,dt.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-sm",children:[(0,dt.jsxs)("button",{onClick:()=>i(o.id),className:"flex items-center gap-1 "+(null!==(r=o.likedBy)&&void 0!==r&&r.includes(null===v||void 0===v?void 0:v.id)?"text-red-500":"text-gray-500 hover:text-gray-700"),children:[(0,dt.jsx)("svg",{className:"w-4 h-4",fill:null!==(a=o.likedBy)&&void 0!==a&&a.includes(null===v||void 0===v?void 0:v.id)?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),(0,dt.jsx)("span",{children:o.likes||0})]}),!x&&(0,dt.jsx)("button",{onClick:()=>h(o),className:"text-gray-500 hover:text-gray-700",children:"Reply"}),x&&(0,dt.jsx)("button",{onClick:()=>c(o.id),className:"text-red-500 hover:text-red-700",children:"Delete"})]}),b&&(0,dt.jsx)(Gn,{parentId:o.id,parentAuthorName:C(),draft:(null===u||void 0===u?void 0:u[o.id])||"",onChange:p,onSubmit:g,onCancel:m}),y.length>0&&(0,dt.jsx)("div",{className:"mt-3 border-l-2 border-gray-200 pl-4 space-y-3",children:y.map(e=>{var t,r;return(0,dt.jsxs)("div",{className:"flex space-x-3",children:[(0,dt.jsx)("img",{src:(0,ct.ou)(),alt:"Reply author",className:"w-8 h-8 rounded-full cursor-pointer hover:opacity-80 transition-opacity duration-200",onClick:()=>s(e.authorId)}),(0,dt.jsxs)("div",{className:"flex-1",children:[(0,dt.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,dt.jsx)("span",{className:"font-medium text-gray-900 cursor-pointer hover:text-tag-blue transition-colors duration-200",onClick:()=>s(e.authorId),children:e.authorName}),(0,dt.jsx)("span",{className:"text-sm text-gray-500",children:S(e.createdAt)})]}),(0,dt.jsx)("p",{className:"text-gray-700",children:e.text||e.content})]}),(0,dt.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-sm",children:[(0,dt.jsxs)("button",{onClick:()=>i(e.id),className:"flex items-center gap-1 "+(null!==(t=e.likedBy)&&void 0!==t&&t.includes(null===v||void 0===v?void 0:v.id)?"text-red-500":"text-gray-500 hover:text-gray-700"),children:[(0,dt.jsx)("svg",{className:"w-4 h-4",fill:null!==(r=e.likedBy)&&void 0!==r&&r.includes(null===v||void 0===v?void 0:v.id)?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),(0,dt.jsx)("span",{children:e.likes||0})]}),v&&e.authorId===v.id&&(0,dt.jsx)("button",{onClick:()=>c(e.id),className:"text-red-500 hover:text-red-700",children:"Delete"})]})]})]},e.id)})})]})]})},Jn=e=>{let{comment:t,onCommentChange:r,onCommentSubmit:a,replyTo:o,onCancelReply:n,className:s=""}=e;return(0,dt.jsxs)("div",{className:`flex items-start space-x-3 mb-6 ${s}`,children:[(0,dt.jsx)("img",{src:(0,ct.ou)(),alt:"Your avatar",className:"w-10 h-10 rounded-full"}),(0,dt.jsxs)("div",{className:"flex-1",children:[o&&(0,dt.jsx)("div",{className:"mb-2 p-2 bg-blue-50 border border-blue-200 rounded-lg",children:(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsx)("span",{className:"text-sm text-blue-700",children:"Replying to a comment"}),(0,dt.jsx)("button",{onClick:n,className:"text-blue-500 hover:text-blue-700 text-sm",children:"Cancel"})]})}),(0,dt.jsx)("textarea",{value:t,onChange:r,placeholder:o?"Write your reply...":"Add a comment...",className:"w-full p-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-tag-blue focus:border-transparent",rows:"3"}),(0,dt.jsx)("div",{className:"flex justify-end mt-2",children:(0,dt.jsx)("button",{onClick:a,className:"px-4 py-2 bg-tag-blue text-white rounded-lg hover:bg-tag-dark-blue transition-colors duration-200",children:o?"Reply":"Post"})})]})]})},Kn=t=>{let{comments:r,comment:a,onCommentChange:o,onCommentSubmit:n,onCommentUserClick:s,onCommentLike:i,onCommentReply:l,onCommentDelete:c,replyingTo:d,replyDrafts:u,onStartReply:h,onCancelReply:m,onSetReplyDraft:p,onSubmitReply:g,replyTo:f,onCancelReplyOld:v,className:x=""}=t;const b=(0,e.useMemo)(()=>r.filter(e=>!e.parentId).sort((e,t)=>e.createdAt-t.createdAt),[r]);return(0,dt.jsxs)("div",{className:`bg-white rounded-lg p-6 ${x}`,children:[(0,dt.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Comments (",r.length,")"]}),(0,dt.jsx)(Jn,{comment:a,onCommentChange:o,onCommentSubmit:n,replyTo:f,onCancelReply:v}),(0,dt.jsx)("div",{className:"space-y-4",children:b.map(e=>(0,dt.jsx)(Vn,{comment:e,comments:r,onUserClick:s,onLikeClick:i,onReplyClick:l,onDeleteClick:c,replyingTo:d,replyDrafts:u,onStartReply:h,onCancelReply:m,onSetReplyDraft:p,onSubmitReply:g},e.id))})]})},Yn=e=>{let{author:t,isFollowing:r=!1,followersCount:a=0,onAuthorClick:o,onFollowClick:n,className:s=""}=e;return(0,dt.jsxs)("div",{className:`bg-white rounded-lg p-6 mb-6 ${s}`,children:[(0,dt.jsxs)(rt,{to:`/artist/${t.id}`,className:"flex items-center mb-4 cursor-pointer hover:bg-gray-50 p-2 rounded-lg transition-colors duration-200 block",children:[(0,dt.jsx)("img",{src:t.avatar,alt:t.name,className:"w-16 h-16 rounded-full mr-4"}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 hover:text-tag-blue transition-colors duration-200",children:t.name}),(0,dt.jsx)("p",{className:"text-sm text-gray-600",children:t.role})]})]}),(0,dt.jsxs)("div",{className:"flex justify-between mb-4 text-sm",children:[(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"font-semibold text-gray-900",children:t.works}),(0,dt.jsx)("div",{className:"text-gray-500",children:"Works"})]}),(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"font-semibold text-gray-900",children:a}),(0,dt.jsx)("div",{className:"text-gray-500",children:"Followers"})]}),(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"font-semibold text-gray-900",children:t.following}),(0,dt.jsx)("div",{className:"text-gray-500",children:"Following"})]})]}),(0,dt.jsx)("div",{className:"flex",children:(0,dt.jsx)("button",{onClick:n,className:"w-full px-4 py-2 rounded-lg transition-colors duration-200 "+(r?"bg-gray-500 text-white hover:bg-gray-600":"bg-tag-blue text-white hover:bg-tag-dark-blue"),children:r?"Following":"Follow"})})]})},Zn=e=>{let{workData:t,className:r=""}=e;return(0,dt.jsxs)("div",{className:`bg-white rounded-lg p-6 mb-6 ${r}`,children:[(0,dt.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:t.title}),(0,dt.jsx)("p",{className:"text-gray-600 mb-4",children:t.description}),(0,dt.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,dt.jsxs)("div",{className:"flex justify-between",children:[(0,dt.jsx)("span",{className:"text-gray-500",children:"Category:"}),(0,dt.jsx)("span",{className:"text-gray-900",children:t.category})]}),(0,dt.jsxs)("div",{className:"flex justify-between",children:[(0,dt.jsx)("span",{className:"text-gray-500",children:"Date:"}),(0,dt.jsx)("span",{className:"text-gray-900",children:t.date})]})]})]})},Qn=e=>{let{relatedWorks:t,authorName:r,onAuthorClick:a,onWorkClick:o,loading:n=!1,className:s=""}=e;return(0,dt.jsxs)("div",{className:`bg-white rounded-lg p-6 ${s}`,children:[(0,dt.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 cursor-pointer hover:text-tag-blue transition-colors duration-200",onClick:a,children:["More from ",r]}),n?(0,dt.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[1,2,3,4].map(e=>(0,dt.jsx)("div",{className:"aspect-square rounded-lg bg-gray-200 animate-pulse"},e))}):t.length>0?(0,dt.jsx)("div",{className:"grid grid-cols-2 gap-2",children:t.map(e=>(0,dt.jsx)("div",{className:"aspect-square rounded-lg overflow-hidden cursor-pointer hover:opacity-80 transition-opacity duration-200",onClick:()=>o(e.id),children:(0,dt.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-full object-cover",onError:e=>{e.target.src="https://images.unsplash.com/photo-1541961017774-22349e4a1262?w=200&h=200&fit=crop"}})},e.id))}):(0,dt.jsx)("div",{className:"text-center py-4",children:(0,dt.jsx)("p",{className:"text-gray-500 text-sm",children:"No other works available"})})]})},Xn=()=>{const[t,r]=(0,e.useState)(!1),[a,o]=(0,e.useState)(!1),[n,s]=(0,e.useState)(""),[i,l]=(0,e.useState)(!1),[c,d]=(0,e.useState)([]),[u,h]=(0,e.useState)(null),[m,p]=(0,e.useState)(null),[g,f]=(0,e.useState)({}),{id:v}=te(),[x,b]=(0,e.useState)(null),[y,w]=(0,e.useState)(!0),[k,j]=(0,e.useState)(null);return(0,e.useEffect)(()=>{(async()=>{if(!v)return j("No work ID provided"),void w(!1);try{w(!0),j(null);const e=await(async e=>{try{var t,r,a,o,n,s,i,l,c,d,u,h,m,p,g,f,v,x,b,y,w;console.log(`[WorkDetail] Loading work data for ID: ${e}`);const j=await zt.Jb.getWorkById(e);if(!j.success)return console.error("[WorkDetail] Failed to load work data:",j.error),null;const N=j.data;if(!N)return console.warn(`[WorkDetail] Work not found with ID: ${e}`),null;console.log("[WorkDetail] Found work:",N);const C=(null===(t=N.author)||void 0===t?void 0:t.id)||(null===(r=N.profiles)||void 0===r?void 0:r.id)||N.userId;let S=null,_=null,I=null;if(C)try{const e=await zt.Jb.getUserWorks(C);e.success&&(I=e.data,console.log(`[WorkDetail] Retrieved ${I.length} works for ${C}`));const t=await(0,Jr.getProfile)(C);t.success&&(_=t.data,console.log(`[WorkDetail] Retrieved profile data for ${C}`)),S=await(0,Lr.Cs)(C),console.log(`[WorkDetail] Retrieved author info for ${C}`)}catch(k){console.warn(`[WorkDetail] Failed to get author info for ${C}:`,k)}const E={id:N.id,title:N.title||"Untitled",description:N.description||"",category:N.category||"Design",date:N.createdAt?new Date(N.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Unknown",likes:124,views:1247,tags:N.tags||[],mainImage:N.thumbnailPath||N.imagePaths&&N.imagePaths[0]||"",allImages:N.imagePaths||[],author:{id:C||"unknown",name:(null===(a=S)||void 0===a?void 0:a.name)||(null===(o=N.author)||void 0===o?void 0:o.name)||(null===(n=N.profiles)||void 0===n?void 0:n.full_name)||"Unknown Artist",role:(null===(s=S)||void 0===s?void 0:s.title)||(null===(i=N.author)||void 0===i?void 0:i.role)||N.category||"Design",avatar:(null===(l=S)||void 0===l?void 0:l.avatar)||(null===(c=N.author)||void 0===c?void 0:c.avatar)||(null===(d=N.profiles)||void 0===d?void 0:d.avatar_url)||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face",works:(null===(u=I)||void 0===u?void 0:u.length)||(null===(h=_)||void 0===h||null===(m=h.portfolio)||void 0===m?void 0:m.length)||(null===(p=S)||void 0===p||null===(g=p.works)||void 0===g?void 0:g.length)||0,followers:(null===(f=S)||void 0===f||null===(v=f.stats)||void 0===v||null===(x=v.followers)||void 0===x?void 0:x.toString())||"0",following:(null===(b=S)||void 0===b||null===(y=b.stats)||void 0===y||null===(w=y.following)||void 0===w?void 0:w.toString())||"0"},relatedWorks:[]};return console.log("[WorkDetail] Transformed work data:",E),console.log("[WorkDetail] Tags data:",E.tags),E}catch(k){return console.error("[WorkDetail] Error loading work data:",k),null}})(v);e?b(e):j("Work not found")}catch(e){console.error("Error loading work data:",e),j("Failed to load work data")}finally{w(!1)}})()},[v]),(0,e.useEffect)(()=>{window.scrollTo({top:0,behavior:"auto"})},[]),(0,e.useEffect)(()=>{if(!x)return;(async()=>{const e=((e,t)=>{var r,a;const o=[null===e||void 0===e?void 0:e.mainImage,null===e||void 0===e||null===(r=e.author)||void 0===r?void 0:r.avatar,...(null===e||void 0===e||null===(a=e.relatedWorks)||void 0===a?void 0:a.map(e=>e.image))||[],...(null===t||void 0===t?void 0:t.map(e=>e.avatar))||[]].filter(e=>"string"===typeof e&&e.startsWith("data:image/"));return console.log(`[WorkDetail] Preloading ${o.length} images`),o})(x,c);await(async e=>{try{const t=e.filter(e=>e&&""!==e.trim()&&(e.startsWith("blob:")||e.startsWith("http")||e.startsWith("data:")));return 0===t.length?(console.log("[WorkDetail] No valid image URLs to preload"),!0):(console.log(`[WorkDetail] Preloading ${t.length} images:`,t),await Promise.all(t.map(e=>new Promise((t,r)=>{const a=new Image;a.onload=()=>{const r=e.split("/").pop()||e.substring(0,30);console.log(`[WorkDetail] Preloaded: ${r}`),t()},a.onerror=r=>{const a=e.split("/").pop()||e.substring(0,30);console.warn(`[WorkDetail] Failed to preload: ${a}`),t()},a.src=e}))),!0)}catch(k){return console.error("[WorkDetail] Failed to preload images:",k),!1}})(e);l(!0)})()},[c,x]),(0,e.useEffect)(()=>{if(!v)return;(async()=>{try{const e=await zt.fN.getWorkComments(v);e.success?d(e.data):console.error("[WorkDetail] Failed to load comments:",e.error)}catch(k){console.error("[WorkDetail] Error loading comments:",k)}})()},[v]),(0,e.useEffect)(()=>{if(null===x||void 0===x||!x.id)return;(async()=>{try{const e=await zt.zF.checkFavoriteStatus("work",x.id);e.success&&o(e.data.isFavorited)}catch(k){console.error("Failed to check favorite status:",k)}})()},[null===x||void 0===x?void 0:x.id]),{liked:t,saved:a,comment:n,imagesLoaded:i,comments:c,workData:x,loading:y,error:k,setLiked:r,setSaved:o,setComment:s,setImagesLoaded:l,setComments:d,setReplyTo:h,replyingTo:m,replyDrafts:g,setReplyingTo:p,setReplyDrafts:f,toggleLike:()=>{r(!t)},toggleSave:()=>{o(!a)},startReply:e=>{e&&p({parentId:e.id,parentAuthorId:e.authorId,parentAuthorName:e.authorName})},cancelReply:()=>{p(null)},setReplyDraft:(e,t)=>{f(r=>({...r,[e]:t}))},addCommentOptimistic:e=>{d(t=>[...t,e])},replaceTempComment:e=>{let{tempId:t,saved:r}=e;d(e=>e.map(e=>e.id===t?r:e))},removeTempComment:e=>{d(t=>t.filter(t=>t.id!==e))},loadComments:async()=>{if(v)try{const e=await zt.fN.getWorkComments(v);e.success?d(e.data):console.error("[WorkDetail] Failed to reload comments:",e.error)}catch(k){console.error("[WorkDetail] Error reloading comments:",k)}},clearComment:()=>{s("")}}},es=t=>{var r,a,o,n,s,i;let{state:l,setters:c}=t;const{goBack:d,navigateToArtist:u,navigateToWork:h}=kr(),m=(0,e.useCallback)(()=>{d()},[d]),p=(0,e.useCallback)(()=>{c.toggleLike()},[c]),g=(0,e.useCallback)(async(e,t,r)=>{console.log("[WorkDetail] Save toggle payload:",{itemType:e,itemId:t,shouldFavorite:r});try{const a=await zt.zF.toggleFavorite(e,t,r);console.log("[WorkDetail] Save toggle result:",a),c.toggleSave()}catch(a){console.error("Failed to toggle favorite:",a)}},[c]),f=(0,e.useCallback)(async()=>{if(!l.comment.trim())return void console.warn("[WorkDetail] Comment is empty");const e=(0,ct.HW)();if(e)try{const r=await(0,Lr.Cs)(e.id),a=(null===r||void 0===r?void 0:r.name)||e.name,o=await zt.fN.createComment(l.workData.id,e.id,a,l.comment.trim(),l.replyTo);if(o.success){if(console.log("[WorkDetail] Comment created successfully:",o.data),e.id!==l.workData.author.id)try{await zt.lY.createCommentNotification(e.id,a,l.workData.id,l.workData.title,l.workData.author.id,l.comment.trim()),console.log("[WorkDetail] Comment notification created successfully")}catch(t){console.warn("[WorkDetail] Failed to create comment notification:",t)}c.setComment(""),c.setReplyTo(null),c.loadComments()}else console.error("[WorkDetail] Failed to create comment:",o.error)}catch(r){console.error("[WorkDetail] Error creating comment:",r)}else console.warn("[WorkDetail] No current user found")},[c,l.comment,null===(r=l.workData)||void 0===r?void 0:r.id,l.replyTo,null===(a=l.workData)||void 0===a||null===(o=a.author)||void 0===o?void 0:o.id,null===(n=l.workData)||void 0===n?void 0:n.title]),v=(0,e.useCallback)(async e=>{const t=(l.replyDrafts[e]||"").trim();if(!t)return;const r=(0,ct.HW)();if(!r)return void console.warn("[WorkDetail] No current user found for reply");const a=l.comments.find(t=>t.id===e);if(!a)return void console.warn("[WorkDetail] Parent comment not found");const o=await(0,Lr.Cs)(r.id),n=(null===o||void 0===o?void 0:o.name)||r.name,s=`tmp_${Date.now()}`,i={id:s,workId:a.workId,authorId:r.id,authorName:n,text:t,parentId:a.id,rootId:a.rootId||a.id,likes:0,replies:[],isDeleted:!1,createdAt:Date.now(),updatedAt:Date.now()};c.addCommentOptimistic(i);try{const o=await zt.fN.createComment(a.workId,r.id,n,t,a.id);o.success?(c.replaceTempComment({tempId:s,saved:o.data}),c.setReplyDraft(e,""),c.cancelReply(),console.log("[WorkDetail] Reply submitted successfully")):(c.removeTempComment(s),console.error("[WorkDetail] Failed to submit reply:",o.error))}catch(d){c.removeTempComment(s),console.error("[WorkDetail] Error submitting reply:",d)}},[c,l.replyDrafts,l.comments]),x=(0,e.useCallback)(e=>{c.startReply(e)},[c]),b=(0,e.useCallback)(()=>{c.cancelReply()},[c]),y=(0,e.useCallback)((e,t)=>{c.setReplyDraft(e,t)},[c]),w=(0,e.useCallback)(e=>{c.setComment(e.target.value)},[c]),k=(0,e.useCallback)(()=>{var e,t;const r=null===(e=l.workData)||void 0===e||null===(t=e.author)||void 0===t?void 0:t.id;r?(console.log(`[WorkDetail] Navigating to artist: ${r}`),u(r,"gallery","Works")):console.warn("[WorkDetail] No author ID found for navigation")},[u,null===(s=l.workData)||void 0===s||null===(i=s.author)||void 0===i?void 0:i.id]),j=(0,e.useCallback)(e=>{u(e)},[u]),N=(0,e.useCallback)(e=>{e&&(console.log("[WorkDetail] Navigating to related work:",e),h(e))},[h]),C=(0,e.useCallback)(e=>{console.log("Image navigation:",e)},[]),S=(0,e.useCallback)(async e=>{const t=(0,ct.HW)();if(t)try{const r=await zt.fN.likeComment(e,t.id);r.success?(console.log("[WorkDetail] Comment like toggled:",r.data),c.loadComments()):console.error("[WorkDetail] Failed to like comment:",r.error)}catch(r){console.error("[WorkDetail] Error liking comment:",r)}else console.warn("[WorkDetail] No current user found for comment like")},[c]),_=(0,e.useCallback)(e=>{c.setReplyTo(e),console.log("[WorkDetail] Reply to comment:",e)},[c]),I=(0,e.useCallback)(async e=>{const t=(0,ct.HW)();if(t)try{const r=await zt.fN.deleteComment(e,t.id);r.success?(console.log("[WorkDetail] Comment deleted successfully"),c.loadComments()):console.error("[WorkDetail] Failed to delete comment:",r.error)}catch(r){console.error("[WorkDetail] Error deleting comment:",r)}else console.warn("[WorkDetail] No current user found for comment delete")},[c]);return{handleBackClick:m,handleAuthorClick:k,handleCommentUserClick:j,handleRelatedWorkClick:N,handleLikeClick:p,handleSaveClick:g,handleCommentSubmit:f,handleCommentChange:w,handleCommentLike:S,handleCommentReply:_,handleCommentDelete:I,handleCancelReply:b,handleImageNavigation:C,handleStartReply:x,handleSubmitReply:v,handleSetReplyDraft:y}},ts="tag_artwork_views",rs="tag_user_fingerprint",as=()=>{let e=0;const t=[navigator.userAgent,navigator.language,screen.width+"x"+screen.height,(new Date).getTimezoneOffset()].join("|");for(let r=0;r<t.length;r++){e=(e<<5)-e+t.charCodeAt(r),e&=e}return Math.abs(e).toString(36)},os=()=>{try{const e=localStorage.getItem(ts);return e?JSON.parse(e):{}}catch(e){return console.warn("Failed to get stored view data:",e),{}}},ns=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const{userId:r=null,visitorFingerprint:a=null}=t;r&&a&&console.warn("[MockViewCount] Warning: Both userId and visitorFingerprint provided, using userId only");const o=os();o[e]||(o[e]={totalViews:0,userViews:[],visitorViews:[]});const n=o[e];let s=!1;return r?n.userViews.includes(r)?console.log(`[MockViewCount] User already viewed: ${r}`):(n.userViews.push(r),n.totalViews++,s=!0,console.log(`[MockViewCount] New user view recorded for user: ${r}`)):a?n.visitorViews.includes(a)?console.log(`[MockViewCount] Visitor already viewed: ${a}`):(n.visitorViews.push(a),n.totalViews++,s=!0,console.log(`[MockViewCount] New visitor view recorded for fingerprint: ${a}`)):console.warn("[MockViewCount] No userId or visitorFingerprint provided"),(e=>{try{localStorage.setItem(ts,JSON.stringify(e))}catch(t){console.warn("Failed to save view data:",t)}})(o),console.log(`[MockViewCount] ${s?"New view recorded":"View already exists"} for artwork: ${e}`),{success:!0,viewCount:n.totalViews,isNewView:s}}catch(r){return console.error("[MockViewCount] Error recording view:",r),{success:!1,error:r.message}}},ss=()=>(()=>{try{let e=localStorage.getItem(rs);return e||(e=as(),localStorage.setItem(rs,e)),e}catch(e){return console.warn("Failed to access localStorage for fingerprint:",e),as()}})();var is=r(979),ls=r(32);const cs=()=>{try{const e=document.createElement("canvas"),t=e.getContext("2d"),r=[navigator.userAgent,navigator.language,screen.width+"x"+screen.height,screen.colorDepth,(new Date).getTimezoneOffset(),navigator.hardwareConcurrency||"",navigator.deviceMemory||"",navigator.platform,navigator.cookieEnabled,navigator.doNotTrack||"",window.devicePixelRatio||"",navigator.maxTouchPoints||""];t.textBaseline="top",t.font="14px Arial",t.fillText("User fingerprint",2,2);const a=e.toDataURL();r.push(a);const o=r.join("|");return ds(o)}catch(e){return console.warn("Failed to generate user fingerprint:",e),ds(Date.now().toString()+Math.random().toString())}},ds=e=>{let t=0;if(0===e.length)return t.toString();for(let r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t&=t}return Math.abs(t).toString(36)},us=()=>{const e="tag_user_fingerprint";try{let t=localStorage.getItem(e);return t||(t=cs(),localStorage.setItem(e,t)),t}catch(t){return console.warn("Failed to access localStorage:",t),cs()}},hs=function(t){const{user:r}=ht(),[a,o]=(0,e.useState)(0),[n,s]=(0,e.useState)(!1),[i,l]=(0,e.useState)(!1),c=!(null===r||void 0===r||!r.id),d=(0,e.useCallback)(async()=>{if(t)try{const e=await(0,ls.BO)(),r=e?await(0,is.Tw)(t):await(async e=>{try{const t=os()[e];return{success:!0,viewCount:t?t.totalViews:0}}catch(t){return console.error("[MockViewCount] Error getting view count:",t),{success:!1,error:t.message}}})(t);r.success?(o(r.viewCount),console.log("[ViewCount] Refreshed view count:",r.viewCount,`(Mode: ${e?"Supabase":"Mock"})`)):console.error("[ViewCount] Failed to refresh view count:",r.error)}catch(e){console.error("[ViewCount] Error refreshing view count:",e)}},[t]),u=(0,e.useCallback)(async()=>{if(!t||n)return;const e=c?null===r||void 0===r?void 0:r.id:"visitor",a=`hasRecorded_${t}_${e}`;let i=!1;try{i="true"===localStorage.getItem(a)}catch(u){console.warn("[ViewCount] Failed to check recorded status:",u)}if(i)console.log(`[ViewCount] Already recorded for user: ${e} on artwork: ${t}`);else try{s(!0);const n=await(0,ls.BO)(),i={userId:c?r.id:null,visitorFingerprint:c?null:n?us():ss(),userAgent:navigator.userAgent};c?i.visitorFingerprint=null:i.userId=null,console.log("[ViewCount] Recording view for artwork:",t,i,`(Mode: ${n?"Supabase":"Mock"})`),console.log("[ViewCount] Current user info:",{isLoggedIn:c,userId:null===r||void 0===r?void 0:r.id,userName:null===r||void 0===r?void 0:r.name});const h=n?await(0,is.H9)(t,i):await ns(t,i);if(h.success){o(h.viewCount),l(!0);try{localStorage.setItem(a,"true"),console.log(`[ViewCount] Saved recorded status for ${e} on ${t}`)}catch(u){console.warn("[ViewCount] Failed to save recorded status:",u)}console.log("[ViewCount] View recorded successfully, new count:",h.viewCount,`(Mode: ${n?"Supabase":"Mock"})`),n||(e=>{try{const t=os()[e];return t?(console.log(`[Debug] View stats for artwork: ${e}`),console.log(`  Total views: ${t.totalViews}`),console.log(`  User views: ${t.userViews.join(", ")}`),console.log(`  Visitor views: ${t.visitorViews.join(", ")}`),t):void console.log(`[Debug] No view data for artwork: ${e}`)}catch(u){console.error("[Debug] Error getting view stats:",u)}})(t),setTimeout(()=>{d()},100)}else console.error("[ViewCount] Failed to record view:",h.error)}catch(u){console.error("[ViewCount] Error recording view:",u)}finally{s(!1)}},[t,c,null===r||void 0===r?void 0:r.id,d,null===r||void 0===r?void 0:r.name,n]);return(0,e.useEffect)(()=>{t&&(d(),u())},[t,u,d]),(0,e.useEffect)(()=>{l(!1),s(!1)},[t,null===r||void 0===r?void 0:r.id]),{viewCount:a,isRecording:n,hasRecorded:i,recordView:u,refreshViewCount:d}},ms="tag_artwork_likes",ps=()=>{try{const e=localStorage.getItem(ms);return e?JSON.parse(e):{}}catch(e){return console.warn("Failed to get stored like data:",e),{}}},gs=async(e,t)=>{try{if(!e||!t)return{success:!1,error:"Missing artworkId or userId"};const r=ps();r[e]||(r[e]={totalLikes:0,userLikes:[]});const a=r[e],o=a.userLikes.indexOf(t);let n=!1;return-1===o?(a.userLikes.push(t),a.totalLikes++,n=!0,console.log(`[MockLike] User ${t} liked artwork ${e}`)):(a.userLikes.splice(o,1),a.totalLikes--,n=!1,console.log(`[MockLike] User ${t} unliked artwork ${e}`)),(e=>{try{localStorage.setItem(ms,JSON.stringify(e))}catch(t){console.warn("Failed to save like data:",t)}})(r),console.log(`[MockLike] Artwork ${e} total likes: ${a.totalLikes}`),{success:!0,data:{liked:n,likes:a.totalLikes}}}catch(r){return console.error("[MockLike] Error toggling like:",r),{success:!1,error:r.message}}},fs=function(t){var r;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const{user:n}=ht(),[s,i]=(0,e.useState)(a),[l,c]=(0,e.useState)(!1),[d,u]=(0,e.useState)(!1),h=!(null===n||void 0===n||!n.id),m=(0,e.useCallback)(async()=>{if(t&&h&&!d)try{u(!0),console.log("[LikeCount] Toggling like for artwork:",t,"User:",n.id);const a=await gs(t,n.id);if(a.success){if(i(a.data.likes),c(a.data.liked),console.log("[LikeCount] Like toggled successfully:",a.data.liked?"Liked":"Unliked","Total likes:",a.data.likes),a.data.liked&&o)try{var e;const r=await(0,Jr.getProfile)(n.id),a=r.success&&r.data.fullName?r.data.fullName:n.name||n.username||"Unknown User";await zt.lY.createLikeNotification(n.id,a,t,o.title||"Untitled",(null===(e=o.author)||void 0===e?void 0:e.id)||o.authorId),console.log("[LikeCount] Created like notification")}catch(r){console.error("[LikeCount] Failed to create like notification:",r)}(e=>{try{const t=ps()[e];return t?(console.log(`[Debug] Like stats for artwork: ${e}`),console.log(`  Total likes: ${t.totalLikes}`),console.log(`  User likes: ${t.userLikes.join(", ")}`),t):void console.log(`[Debug] No like data for artwork: ${e}`)}catch(r){console.error("[Debug] Error getting like stats:",r)}})(t)}else console.error("[LikeCount] Failed to toggle like:",a.error)}catch(r){console.error("[LikeCount] Error toggling like:",r)}finally{u(!1)}},[t,h,null===n||void 0===n?void 0:n.id,null===o||void 0===o?void 0:o.title,null===o||void 0===o||null===(r=o.author)||void 0===r?void 0:r.id,null===o||void 0===o?void 0:o.authorId,d,o]),p=(0,e.useCallback)(async()=>{if(t&&h)try{const e=await(async(e,t)=>{try{if(!e||!t)return{success:!1,error:"Missing artworkId or userId"};const r=ps()[e];return r?{success:!0,data:{liked:r.userLikes.includes(t),likes:r.totalLikes}}:{success:!0,data:{liked:!1,likes:0}}}catch(r){return console.error("[MockLike] Error checking like status:",r),{success:!1,error:r.message}}})(t,n.id);e.success?(i(e.data.likes),c(e.data.liked),console.log("[LikeCount] Refreshed like status:",e.data.liked?"Liked":"Not liked","Total likes:",e.data.likes)):console.error("[LikeCount] Failed to refresh like status:",e.error)}catch(e){console.error("[LikeCount] Error refreshing like status:",e)}},[t,h,null===n||void 0===n?void 0:n.id,null===n||void 0===n?void 0:n.name,null===n||void 0===n?void 0:n.username]),g=(0,e.useCallback)(async()=>{if(t)try{const e=await(async e=>{try{if(!e)return{success:!1,error:"Missing artworkId"};const t=ps()[e];return{success:!0,data:{likes:t?t.totalLikes:0}}}catch(t){return console.error("[MockLike] Error getting like count:",t),{success:!1,error:t.message}}})(t);e.success?(i(e.data.likes),console.log("[LikeCount] Refreshed like count:",e.data.likes)):console.error("[LikeCount] Failed to refresh like count:",e.error)}catch(e){console.error("[LikeCount] Error refreshing like count:",e)}},[t]);return(0,e.useEffect)(()=>{t&&h&&p()},[t,h,p]),(0,e.useEffect)(()=>{c(!1),u(!1)},[t,null===n||void 0===n?void 0:n.id]),{likeCount:s,isLiked:l,isToggling:d,toggleLike:m,refreshLikeStatus:p,refreshLikeCount:g}},vs=t=>{const r=ee(),[a,o]=(0,e.useState)([]),[n,s]=(0,e.useState)(-1),[i,l]=(0,e.useState)(!0),[c,d]=(0,e.useState)(null),u=(0,e.useCallback)(async()=>{try{l(!0),d(null);const e=await zt.Jb.getAllPublicWorks();if(e.success&&e.data){const r=e.data.sort((e,t)=>{const r=new Date(e.createdAt||e.date||0);return new Date(t.createdAt||t.date||0)-r});o(r);const a=r.findIndex(e=>e.id===t);s(a),console.log(`[WorkNavigation] Loaded ${r.length} works, current index: ${a}`)}else d("Failed to load works")}catch(e){console.error("[WorkNavigation] Error loading works:",e),d("Failed to load works")}finally{l(!1)}},[t]);(0,e.useEffect)(()=>{t&&u()},[t,u]);const h=(0,e.useCallback)(()=>{if(0===a.length||-1===n)return;let e;e=0===n?a.length-1:n-1;const t=a[e];t&&(console.log(`[WorkNavigation] Navigating to previous work: ${t.id}`),r(`/work/${t.id}`))},[a,n,r]),m=(0,e.useCallback)(()=>{if(0===a.length||-1===n)return;let e;e=n===a.length-1?0:n+1;const t=a[e];t&&(console.log(`[WorkNavigation] Navigating to next work: ${t.id}`),r(`/work/${t.id}`))},[a,n,r]);return(0,e.useEffect)(()=>{const e=e=>{"ArrowLeft"===e.key?(e.preventDefault(),h()):"ArrowRight"===e.key&&(e.preventDefault(),m())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[h,m]),{allWorks:a,currentIndex:n,loading:i,error:c,hasPrevious:a.length>0&&n>0,hasNext:a.length>0&&n<a.length-1,totalWorks:a.length,currentWorkNumber:n>=0?n+1:0,navigateToPrevious:h,navigateToNext:m,reloadWorks:u}},xs=function(t,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;const[o,n]=(0,e.useState)([]),[s,i]=(0,e.useState)(!0),[l,c]=(0,e.useState)(null),d=(0,e.useCallback)(async()=>{if(!t)return n([]),void i(!1);try{i(!0),c(null);const e=await zt.Jb.getUserWorks(t);if(e.success&&e.data){const o=e.data.filter(e=>e.id!==r);if(0===o.length)return void n([]);const s=[...o].sort(()=>.5-Math.random()),i=s.slice(0,Math.min(a,o.length)).map(e=>({id:e.id,title:e.title||"Untitled",image:e.thumbnailPath||e.imagePaths&&e.imagePaths[0]||"",category:e.category||"Design"}));n(i),console.log(`[RelatedWorks] Loaded ${i.length} related works for artist ${t}`)}else c("Failed to load related works"),n([])}catch(e){console.error("[RelatedWorks] Error loading related works:",e),c("Failed to load related works"),n([])}finally{i(!1)}},[t,r,a]);return(0,e.useEffect)(()=>{d()},[d]),{relatedWorks:o,loading:s,error:l,reloadWorks:d}},bs=()=>{var e,t,r,a,o,n,s,i,l,c,d,u;const{state:h}=pr(),m=Xn(),p=es({state:m,setters:{toggleLike:m.toggleLike,toggleSave:m.toggleSave,setComment:m.setComment,setReplyTo:m.setReplyTo,loadComments:m.loadComments,startReply:m.startReply,cancelReply:m.cancelReply,setReplyDraft:m.setReplyDraft,addCommentOptimistic:m.addCommentOptimistic,replaceTempComment:m.replaceTempComment,removeTempComment:m.removeTempComment}}),g=hs(null===(e=m.workData)||void 0===e?void 0:e.id,(null===(t=m.workData)||void 0===t?void 0:t.views)||0),f=fs(null===(r=m.workData)||void 0===r?void 0:r.id,(null===(a=m.workData)||void 0===a?void 0:a.likes)||0,m.workData),v=Kr(null===(o=m.workData)||void 0===o||null===(n=o.author)||void 0===n?void 0:n.id,(null===(s=m.workData)||void 0===s||null===(i=s.author)||void 0===i?void 0:i.followers)||0),x=vs(null===(l=m.workData)||void 0===l?void 0:l.id),b=xs(null===(c=m.workData)||void 0===c||null===(d=c.author)||void 0===d?void 0:d.id,null===(u=m.workData)||void 0===u?void 0:u.id,4);return m.loading?(0,dt.jsx)(Et,{}):m.error?(0,dt.jsx)("main",{className:"max-w-7xl mx-auto pt-4 px-4 bg-gray-50 min-h-screen",children:(0,dt.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Error"}),(0,dt.jsx)("p",{className:"text-gray-600 mb-4",children:m.error}),(0,dt.jsx)("button",{onClick:()=>window.history.back(),className:"px-4 py-2 bg-tag-blue text-white rounded-lg hover:bg-blue-600",children:"Go Back"})]})})}):m.workData?h.isLoading||!m.imagesLoaded?(0,dt.jsx)(Et,{}):(0,dt.jsx)("main",{className:"max-w-7xl mx-auto pt-4 px-4 bg-gray-50 min-h-screen",children:(0,dt.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8 py-0",children:[(0,dt.jsxs)("div",{className:"flex-1",children:[(0,dt.jsx)(zn,{workData:m.workData,onBackClick:p.handleBackClick,onImageNavigation:p.handleImageNavigation,navigationState:x}),(0,dt.jsx)(Hn,{workData:{...m.workData,views:g.viewCount,likes:f.likeCount},isLiked:f.isLiked,isSaved:m.saved,onLikeClick:f.toggleLike,onSaveClick:p.handleSaveClick}),(0,dt.jsx)(Kn,{comments:m.comments,comment:m.comment,onCommentChange:p.handleCommentChange,onCommentSubmit:p.handleCommentSubmit,onCommentUserClick:p.handleCommentUserClick,onCommentLike:p.handleCommentLike,onCommentReply:p.handleCommentReply,onCommentDelete:p.handleCommentDelete,replyingTo:m.replyingTo,replyDrafts:m.replyDrafts,onStartReply:p.handleStartReply,onCancelReply:p.handleCancelReply,onSetReplyDraft:p.handleSetReplyDraft,onSubmitReply:p.handleSubmitReply,replyTo:m.replyTo,onCancelReplyOld:p.handleCancelReply})]}),(0,dt.jsxs)("div",{className:"lg:w-80 flex-shrink-0",children:[(0,dt.jsx)(Yn,{author:m.workData.author,isFollowing:v.isFollowing,followersCount:v.followersCount,onAuthorClick:p.handleAuthorClick,onFollowClick:v.toggleFollow}),(0,dt.jsx)(Zn,{workData:m.workData}),(0,dt.jsx)(Qn,{relatedWorks:b.relatedWorks,authorName:m.workData.author.name,onAuthorClick:p.handleAuthorClick,onWorkClick:p.handleRelatedWorkClick,loading:b.loading})]})]})}):(0,dt.jsx)("main",{className:"max-w-7xl mx-auto pt-4 px-4 bg-gray-50 min-h-screen",children:(0,dt.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Work Not Found"}),(0,dt.jsx)("p",{className:"text-gray-600 mb-4",children:"The requested work could not be found."}),(0,dt.jsx)("button",{onClick:()=>window.history.back(),className:"px-4 py-2 bg-tag-blue text-white rounded-lg hover:bg-blue-600",children:"Go Back"})]})})})},ys=Ea("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),ws=Ea("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),ks=Ea("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),js=Ea("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),Ns=Ea("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),Cs=Ea("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]),Ss=Ea("rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]),_s=Ea("pen-tool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),Is=Ea("box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Es=Ea("gamepad",[["line",{x1:"6",x2:"10",y1:"12",y2:"12",key:"161bw2"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"15",x2:"15.01",y1:"13",y2:"13",key:"dqpgro"}],["line",{x1:"18",x2:"18.01",y1:"11",y2:"11",key:"meh2c"}],["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]]),Ps=Ea("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),As=Ea("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),Ts=Ea("handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),Ls=Ea("building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),Ms=Ea("hammer",[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]]),Ds=Ea("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Rs=Ea("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),$s={container:"CoFuture2025_container__ZK5Ze",hero:"CoFuture2025_hero__OU85u",heroContent:"CoFuture2025_heroContent__K38iO",title:"CoFuture2025_title__Ag7cX",titlePrefix:"CoFuture2025_titlePrefix__zCITE",gradientText:"CoFuture2025_gradientText__VpOpM",subtitle:"CoFuture2025_subtitle__SIZMK",primaryBtn:"CoFuture2025_primaryBtn__x4ztR",processStrip:"CoFuture2025_processStrip__6w4ED",step:"CoFuture2025_step__Bulkv",stepIcon:"CoFuture2025_stepIcon__cKdgR",stepText:"CoFuture2025_stepText__QeDUr",stepSeparator:"CoFuture2025_stepSeparator__3Vc4r",about:"CoFuture2025_about__tOwZV",aboutContent:"CoFuture2025_aboutContent__ix1Il",aboutTitle:"CoFuture2025_aboutTitle__6XfGp",aboutDescription:"CoFuture2025_aboutDescription__SfTCe",quote:"CoFuture2025_quote__0RS3l",features:"CoFuture2025_features__oE2az",feature:"CoFuture2025_feature__p9lyH",iconCircle:"CoFuture2025_iconCircle__9ooh7",iconBlue:"CoFuture2025_iconBlue__YtD2l",iconPurple:"CoFuture2025_iconPurple__VDYJy",iconBluePurple:"CoFuture2025_iconBluePurple__mhl+J",featureIcon:"CoFuture2025_featureIcon__lDobi",featureTitle:"CoFuture2025_featureTitle__7xMuY",featureDescription:"CoFuture2025_featureDescription__aaFJT",sectionTitle:"CoFuture2025_sectionTitle__fTNpT",tracks:"CoFuture2025_tracks__PyO0P",tracksContent:"CoFuture2025_tracksContent__iz1N0",tracksGrid:"CoFuture2025_tracksGrid__EfbsC",trackCard:"CoFuture2025_trackCard__Of4Cr",trackIcon:"CoFuture2025_trackIcon__Ay5dz",trackTitle:"CoFuture2025_trackTitle__Rvim7",trackDescription:"CoFuture2025_trackDescription__T3--3",trackButton:"CoFuture2025_trackButton__MZdfx",buttonBlue:"CoFuture2025_buttonBlue__3o30o",buttonPurple:"CoFuture2025_buttonPurple__2sr1U",buttonGreen:"CoFuture2025_buttonGreen__w8YvR",awards:"CoFuture2025_awards__82z4d",awardsContent:"CoFuture2025_awardsContent__hSWNC",awardsGrid:"CoFuture2025_awardsGrid__DpIMv",awardItem:"CoFuture2025_awardItem__C+hbd",awardIcon:"CoFuture2025_awardIcon__UcH+h",awardYellow:"CoFuture2025_awardYellow__hopvc",awardBlue:"CoFuture2025_awardBlue__ZDDyU",awardPurple:"CoFuture2025_awardPurple__AFTPo",awardGreen:"CoFuture2025_awardGreen__zmT2X",awardIconText:"CoFuture2025_awardIconText__ukZpZ",awardTitle:"CoFuture2025_awardTitle__zzPao",awardDescription:"CoFuture2025_awardDescription__4t7tg",howToJoin:"CoFuture2025_howToJoin__edHAM",howToJoinContent:"CoFuture2025_howToJoinContent__aOq0j",stepsGrid:"CoFuture2025_stepsGrid__gjajo",stepItem:"CoFuture2025_stepItem__KBZVQ",stepNumber:"CoFuture2025_stepNumber__NizGo",stepTitle:"CoFuture2025_stepTitle__yqtrb",stepDescription:"CoFuture2025_stepDescription__AyUIr",ctaContainer:"CoFuture2025_ctaContainer__XaGfV",ctaButton:"CoFuture2025_ctaButton__Ntg3q",timeline:"CoFuture2025_timeline__iqBiD",timelineContent:"CoFuture2025_timelineContent__lBrHt",timelineContainer:"CoFuture2025_timelineContainer__oU9V2",timelineEvent:"CoFuture2025_timelineEvent__MX89R",timelineIcon:"CoFuture2025_timelineIcon__e8uul",timelineDate:"CoFuture2025_timelineDate__QmZfI",timelineTitle:"CoFuture2025_timelineTitle__LpcpN",timelineLine:"CoFuture2025_timelineLine__Bxw3B",gallery:"CoFuture2025_gallery__cBNQg",galleryContent:"CoFuture2025_galleryContent__paSYN",galleryCard:"CoFuture2025_galleryCard__7nNio",galleryIcon:"CoFuture2025_galleryIcon__QY0Xa",galleryComingSoon:"CoFuture2025_galleryComingSoon__MYi6B",galleryDescription:"CoFuture2025_galleryDescription__XpeEq",faq:"CoFuture2025_faq__BjYt2",faqContent:"CoFuture2025_faqContent__geJNg",faqList:"CoFuture2025_faqList__SVbhC",faqItem:"CoFuture2025_faqItem__YPMrZ",faqQuestion:"CoFuture2025_faqQuestion__j4oT8",faqIcon:"CoFuture2025_faqIcon__pNQa5",faqIconRotated:"CoFuture2025_faqIconRotated__4QtS5",faqAnswer:"CoFuture2025_faqAnswer__y+MiQ"},Fs={title:{prefix:"TAGMe:",main:"Co-Future"},subtitle:"Student Competitions 2025",button:{text:"Join the Challenge",href:"/tagme/co-future-2025#apply"},steps:[{icon:ys,text:"Team Up"},{icon:ws,text:"Co-Create"},{icon:ks,text:"Submit"},{icon:js,text:"Celebrate"}],about:{title:"About Co-Future",description:"Co-Future is TAG's official global art competition, inviting creative students from all over the world to team up and design what the future could be \u2014 together.",quote:'"The future is designed together."',features:[{title:"Global Collaboration",description:"Connect with creative minds from around the world.",icon:Ns,gradientClass:"iconBlue"},{title:"Cross-Disciplinary",description:"Blend 2D, 3D, interactive media, and storytelling.",icon:Cs,gradientClass:"iconPurple"},{title:"Future-Focused",description:"Design innovative solutions for tomorrow's challenges.",icon:Ss,gradientClass:"iconBluePurple"}]},tracks:{title:"Competition Tracks",items:[{title:"2D Visual Design",description:"Create stunning illustrations, graphics, and visual narratives that bring the future to life.",icon:_s,buttonText:"Explore Track",buttonColor:"blue"},{title:"3D Visual Design",description:"Build immersive 3D environments, characters, and objects that define tomorrow's world.",icon:Is,buttonText:"Explore Track",buttonColor:"purple"},{title:"Game & Interactive Media",description:"Design interactive experiences, games, and digital media that engage and inspire.",icon:Es,buttonText:"Explore Track",buttonColor:"green"}]},awards:{title:"Awards & Recognition",items:[{title:"Best Visual Presentation",description:"Outstanding aesthetic quality",icon:js,gradientClass:"awardYellow"},{title:"Best Concept Development",description:"Innovative thinking and ideation",icon:ws,gradientClass:"awardBlue"},{title:"Best Technical Execution",description:"Superior craftsmanship and skill",icon:Ps,gradientClass:"awardPurple"},{title:"Rising Star Award",description:"Outstanding emerging talent",icon:As,gradientClass:"awardGreen"}]},howToJoin:{title:"How to Join",steps:[{number:"1",title:"Build or Join a Team",description:"Connect with collaborators via TAGMe platform",icon:ys},{number:"2",title:"Choose a Track",description:"Select your preferred competition category",icon:Cs},{number:"3",title:"Collaborate & Co-Create",description:"Work together to bring your vision to life",icon:Ts},{number:"4",title:"Submit Your Work",description:"Upload before February 10 deadline",icon:ks}],ctaButton:{text:"Start on TAGMe",href:"/tagme"}},timeline:{title:"Competition Timeline",events:[{date:"October",title:"Registration Opens",icon:Ls},{date:"November \u2013 January",title:"Creation Phase",icon:Ms},{date:"February 10",title:"Submission Deadline",icon:ks},{date:"February 20",title:"Awards & Showcase",icon:js}]},gallery:{title:"Submission Gallery",comingSoon:"Coming Soon",description:"This space will showcase the most inspiring submissions from each track. Check back during the creation phase to see amazing work from teams worldwide."},faq:{title:"Frequently Asked Questions",items:[{question:"Who can join?",answer:"Any student currently enrolled in an educational institution worldwide can participate."},{question:"Can I submit solo?",answer:"While we encourage collaboration, solo submissions are welcome in all tracks."},{question:"What file types are accepted?",answer:"We accept various formats including images, videos, interactive files, and project documentation."},{question:"Do I need specific software?",answer:"No, you can use any tools or software you prefer to create your submission."},{question:"How are awards judged?",answer:"Submissions are evaluated by industry professionals based on creativity, technical skill, and concept development."}]}},Os=()=>{const[t,r]=(0,e.useState)(null);return(0,dt.jsxs)("div",{className:$s.container,children:[(0,dt.jsx)("section",{className:$s.hero,children:(0,dt.jsxs)("div",{className:$s.heroContent,children:[(0,dt.jsxs)("h1",{className:$s.title,children:[(0,dt.jsx)("span",{className:$s.titlePrefix,children:Fs.title.prefix}),(0,dt.jsx)("span",{className:$s.gradientText,children:Fs.title.main})]}),(0,dt.jsx)("p",{className:$s.subtitle,children:Fs.subtitle}),(0,dt.jsx)("a",{href:Fs.button.href,className:$s.primaryBtn,"aria-label":"Join the Co-Future challenge",children:Fs.button.text}),(0,dt.jsx)("div",{className:$s.processStrip,"aria-label":"Competition process steps",children:Fs.steps.map((t,r)=>(0,dt.jsxs)(e.Fragment,{children:[(0,dt.jsxs)("span",{className:$s.step,children:[(0,dt.jsx)("span",{className:$s.stepIcon,children:(0,dt.jsx)(t.icon,{size:18})}),(0,dt.jsx)("span",{className:$s.stepText,children:t.text})]}),r<Fs.steps.length-1&&(0,dt.jsx)("span",{className:$s.stepSeparator,children:"\u2022"})]},t.text))})]})}),(0,dt.jsx)("section",{className:$s.about,children:(0,dt.jsxs)("div",{className:$s.aboutContent,children:[(0,dt.jsx)("h2",{className:$s.aboutTitle,children:Fs.about.title}),(0,dt.jsx)("p",{className:$s.aboutDescription,children:Fs.about.description}),(0,dt.jsx)("blockquote",{className:$s.quote,children:Fs.about.quote}),(0,dt.jsx)("div",{className:$s.features,children:Fs.about.features.map(e=>(0,dt.jsxs)("div",{className:$s.feature,children:[(0,dt.jsx)("div",{className:`${$s.iconCircle} ${$s[e.gradientClass]}`,children:(0,dt.jsx)("span",{className:$s.featureIcon,children:(0,dt.jsx)(e.icon,{size:32})})}),(0,dt.jsx)("h3",{className:$s.featureTitle,children:e.title}),(0,dt.jsx)("p",{className:$s.featureDescription,children:e.description})]},e.title))})]})}),(0,dt.jsx)("section",{className:$s.tracks,children:(0,dt.jsxs)("div",{className:$s.tracksContent,children:[(0,dt.jsx)("h2",{className:$s.sectionTitle,children:Fs.tracks.title}),(0,dt.jsx)("div",{className:$s.tracksGrid,children:Fs.tracks.items.map(e=>(0,dt.jsxs)("div",{className:$s.trackCard,children:[(0,dt.jsx)("div",{className:$s.trackIcon,children:(0,dt.jsx)(e.icon,{size:48})}),(0,dt.jsx)("h3",{className:$s.trackTitle,children:e.title}),(0,dt.jsx)("p",{className:$s.trackDescription,children:e.description}),(0,dt.jsx)("button",{className:`${$s.trackButton} ${$s[`button${e.buttonColor.charAt(0).toUpperCase()+e.buttonColor.slice(1)}`]}`,children:e.buttonText})]},e.title))})]})}),(0,dt.jsx)("section",{className:$s.awards,children:(0,dt.jsxs)("div",{className:$s.awardsContent,children:[(0,dt.jsx)("h2",{className:$s.sectionTitle,children:Fs.awards.title}),(0,dt.jsx)("div",{className:$s.awardsGrid,children:Fs.awards.items.map(e=>(0,dt.jsxs)("div",{className:$s.awardItem,children:[(0,dt.jsx)("div",{className:`${$s.awardIcon} ${$s[e.gradientClass]}`,children:(0,dt.jsx)("span",{className:$s.awardIconText,children:(0,dt.jsx)(e.icon,{size:24})})}),(0,dt.jsx)("h3",{className:$s.awardTitle,children:e.title}),(0,dt.jsx)("p",{className:$s.awardDescription,children:e.description})]},e.title))})]})}),(0,dt.jsx)("section",{className:$s.howToJoin,children:(0,dt.jsxs)("div",{className:$s.howToJoinContent,children:[(0,dt.jsx)("h2",{className:$s.sectionTitle,children:Fs.howToJoin.title}),(0,dt.jsx)("div",{className:$s.stepsGrid,children:Fs.howToJoin.steps.map(e=>(0,dt.jsxs)("div",{className:$s.stepItem,children:[(0,dt.jsx)("div",{className:$s.stepNumber,children:(0,dt.jsx)(e.icon,{size:20})}),(0,dt.jsx)("h3",{className:$s.stepTitle,children:e.title}),(0,dt.jsx)("p",{className:$s.stepDescription,children:e.description})]},e.number))}),(0,dt.jsx)("div",{className:$s.ctaContainer,children:(0,dt.jsx)("a",{href:Fs.howToJoin.ctaButton.href,className:$s.ctaButton,children:Fs.howToJoin.ctaButton.text})})]})}),(0,dt.jsx)("section",{className:$s.timeline,children:(0,dt.jsxs)("div",{className:$s.timelineContent,children:[(0,dt.jsx)("h2",{className:$s.sectionTitle,children:Fs.timeline.title}),(0,dt.jsx)("div",{className:$s.timelineContainer,children:Fs.timeline.events.map((e,t)=>(0,dt.jsxs)("div",{className:$s.timelineEvent,children:[(0,dt.jsx)("div",{className:$s.timelineIcon,children:(0,dt.jsx)(e.icon,{size:24})}),(0,dt.jsxs)("div",{className:$s.timelineContent,children:[(0,dt.jsx)("div",{className:$s.timelineDate,children:e.date}),(0,dt.jsx)("div",{className:$s.timelineTitle,children:e.title})]}),t<Fs.timeline.events.length-1&&(0,dt.jsx)("div",{className:$s.timelineLine})]},e.date))})]})}),(0,dt.jsx)("section",{className:$s.gallery,children:(0,dt.jsxs)("div",{className:$s.galleryContent,children:[(0,dt.jsx)("h2",{className:$s.sectionTitle,children:Fs.gallery.title}),(0,dt.jsxs)("div",{className:$s.galleryCard,children:[(0,dt.jsx)("div",{className:$s.galleryIcon,children:(0,dt.jsx)(Ds,{size:64})}),(0,dt.jsx)("h3",{className:$s.galleryComingSoon,children:Fs.gallery.comingSoon}),(0,dt.jsx)("p",{className:$s.galleryDescription,children:Fs.gallery.description})]})]})}),(0,dt.jsx)("section",{className:$s.faq,children:(0,dt.jsxs)("div",{className:$s.faqContent,children:[(0,dt.jsx)("h2",{className:$s.sectionTitle,children:Fs.faq.title}),(0,dt.jsx)("div",{className:$s.faqList,children:Fs.faq.items.map((e,a)=>(0,dt.jsxs)("div",{className:$s.faqItem,children:[(0,dt.jsxs)("button",{className:$s.faqQuestion,onClick:()=>(e=>{r(t===e?null:e)})(a),"aria-expanded":t===a,children:[(0,dt.jsx)("span",{children:e.question}),(0,dt.jsx)(Rs,{size:20,className:`${$s.faqIcon} ${t===a?$s.faqIconRotated:""}`})]}),t===a&&(0,dt.jsx)("div",{className:$s.faqAnswer,children:(0,dt.jsx)("p",{children:e.answer})})]},a))})]})})]})};var Us=r(915),zs=r(792);const Ws="EditProfile_container__IkubN",Bs="EditProfile_header__K3AJ7",qs="EditProfile_headerLeft__Cf4sl",Hs="EditProfile_backButton__mrj22",Gs="EditProfile_backIcon__CFjC9",Vs="EditProfile_pageTitle__C2f+e",Js="EditProfile_headerRight__RhuX-",Ks="EditProfile_cancelButton__2s1x1",Ys="EditProfile_saveButton__Wayap",Zs="EditProfile_successMessage__npX8G",Qs="EditProfile_successIcon__ezwUa",Xs="EditProfile_grid__mrd1a",ei="EditProfile_leftCol__iTTBq",ti="EditProfile_rightCol__Tgyti",ri="EditProfile_card__JLxMq",ai="EditProfile_cardTitle__gOJEN",oi="EditProfile_avatarSection__SBCYc",ni="EditProfile_avatarContainer__JGWTL",si="EditProfile_avatar__JfBVT",ii="EditProfile_avatarActions__fhG0j",li="EditProfile_changePhotoButton__Uvyeb",ci="EditProfile_cameraIcon__nPnd3",di="EditProfile_formField__-xQhQ",ui="EditProfile_basicInfoGrid__L8Uqd",hi="EditProfile_fullRow__gMTKI",mi="EditProfile_bioTextarea__26OTA",pi="EditProfile_inputError__h+bTv",gi="EditProfile_bioFooter__9rTtO",fi="EditProfile_label__Dt+aP",vi="EditProfile_input__rW7WI",xi="EditProfile_textarea__9NKl2",bi="EditProfile_errorMessage__jReZa",yi="EditProfile_charCount__uvzqh",wi="EditProfile_charCountWarning__HnCvV",ki="EditProfile_socialInputContainer__BgFPk",ji="EditProfile_socialIconContainer__hkUKi",Ni="EditProfile_socialIcon__Cq5Cj",Ci="EditProfile_socialInput__lAUZL",Si="EditProfile_socialLinksContainer__0h9be",_i="EditProfile_socialSection__zbU2v",Ii="EditProfile_sectionHeader__wX01L",Ei="EditProfile_sectionTitle__qY0N6",Pi="EditProfile_otherLinksList__cM-3T",Ai="EditProfile_otherLinkRow__IK+VN",Ti="EditProfile_otherLinkInfo__XvxYR",Li="EditProfile_otherLinkLabel__vKKtD",Mi="EditProfile_otherLinkUrl__eu-3g",Di="EditProfile_removeLinkButton__Ytti9",Ri="EditProfile_addLinkSection__GQNZW",$i="EditProfile_addLinkRow__okDDd",Fi="EditProfile_addLinkInputGroup__9pboc",Oi="EditProfile_addLinkInput__qcDkf",Ui="EditProfile_addLinkButton__+80nZ",zi="EditProfile_suggestions__6dQob",Wi="EditProfile_suggestionButton__4FsVN",Bi="EditProfile_maxLinksMessage__qadHX",qi="EditProfile_skillsContainer__zTdNo",Hi="EditProfile_skillsList__CqxMp",Gi="EditProfile_skillTag__BYLvV",Vi="EditProfile_skillText__KF2Mn",Ji="EditProfile_removeSkillButton__QgK83",Ki="EditProfile_removeIcon__0wB4r",Yi="EditProfile_addSkillContainer__TWSXM",Zi="EditProfile_addSkillInputGroup__GPOwF",Qi="EditProfile_addSkillInput__3vkFF",Xi="EditProfile_addSkillButton__Y-e-W",el="EditProfile_addIcon__LK-oP",tl="EditProfile_helpText__QLYpo",rl="EditProfile_majorsContainer__y+v-i",al="EditProfile_majorsList__nro4w",ol="EditProfile_majorTag__+62bm",nl="EditProfile_majorText__1NwOV",sl="EditProfile_removeMajorButton__-0lfq",il="EditProfile_addMajorContainer__7hcG6",ll="EditProfile_addMajorInputGroup__-Z7wS",cl="EditProfile_addMajorInput__S37eZ",dl="EditProfile_addMajorButton__cV+pX",ul="EditProfile_uploadArea__RBBIb",hl="EditProfile_uploadAreaClickable__UhlWL",ml="EditProfile_uploadIcon__Uu4Do",pl="EditProfile_uploadText__DyRAA",gl="EditProfile_uploadSubtext__Vv8hF",fl="EditProfile_chooseFilesButton__RdltH",vl="EditProfile_publicNotice__D7tuk",xl="EditProfile_publicIcon__KSjhS",bl="EditProfile_portfolioGrid__Nxc06",yl="EditProfile_portfolioItem__G9AjO",wl="EditProfile_portfolioImageContainer__Yc1la",kl="EditProfile_portfolioImage__EdMj7",jl="EditProfile_publicBadge__vDOWI",Nl="EditProfile_modalOverlay__zOlaL",Cl="EditProfile_modal__V5yfn",Sl="EditProfile_modalHeader__8WA4B",_l="EditProfile_modalTitle__8dRQl",Il="EditProfile_modalContent__wpgwQ",El="EditProfile_modalWarning__RRbh8",Pl="EditProfile_modalActions__0ErUX",Al="EditProfile_modalCancelButton__MY1ND",Tl="EditProfile_modalDeleteButton__NrN69",Ll="EditProfile_portfolioOverlay__wHCNS",Ml="EditProfile_visibilityButton__a-Mcb",Dl="EditProfile_removeButton__hTjYd",Rl="EditProfile_public__jweuU",$l="EditProfile_private__VNZqB",Fl="EditProfile_editButton__4V9ef",Ol="EditProfile_portfolioStatus__+zH7y",Ul="EditProfile_statusBadge__DdUpb",zl="EditProfile_privateBadge__a2mPn",Wl="EditProfile_portfolioInfo__Yzmbj",Bl="EditProfile_portfolioTitle__5mStV",ql="EditProfile_emptyState__BytyE",Hl="EditProfile_emptyIcon__cIyOv",Gl="EditProfile_emptyText__c+EDW",Vl="EditProfile_emptySubtext__n3em7",Jl="EditProfile_portfolioModalContent__xcTAE",Kl="EditProfile_portfolioModalHeader__LC6BZ",Yl="EditProfile_portfolioCloseButton__IXIC-",Zl="EditProfile_portfolioModalBody__w5jQ-",Ql="EditProfile_formGroup__Y521H",Xl="EditProfile_required__zObno",ec="EditProfile_error__VwHJg",tc="EditProfile_errorText__kwONd",rc="EditProfile_portfolioModalFooter__-6agc",ac=t=>{var r,a;let{data:o,onChange:n,onMajorsChange:s,onMinorsChange:i,errors:l}=t;const[c,d]=(0,e.useState)(""),[u,h]=(0,e.useState)(""),m=(e,t)=>{n(e,t)},p=(0,e.useCallback)(()=>{const e=c.trim();if(!e)return void h("Please enter a major or minor");if(e.length>30)return void h("Major/minor name must be 30 characters or less");if(e.length<2)return void h("Major/minor name must be at least 2 characters");const t=e.toLowerCase();if([...o.majors||[],...o.minors||[]].some(e=>e.toLowerCase()===t))return void h("This major/minor already exists");const r=o.majors||[],a=o.minors||[];if(r.length<3){const t=[...r,e];s(t)}else{if(!(a.length<3))return void h("Maximum 3 majors & minors allowed");{const t=[...a,e];i(t)}}d(""),h("")},[c,o.majors,o.minors,s,i]),g=(0,e.useCallback)(e=>{const t=(o.majors||[]).filter(t=>t!==e);s(t)},[o.majors,s]),f=(0,e.useCallback)(e=>{const t=(o.minors||[]).filter(t=>t!==e);i(t)},[o.minors,i]),v=(0,e.useCallback)(e=>{"Enter"===e.key&&(e.preventDefault(),p())},[p]),x=(0,e.useCallback)(e=>{d(e.target.value),u&&h("")},[u]);return(0,dt.jsxs)("div",{className:ri,children:[(0,dt.jsx)("h3",{className:ai,children:"Basic Information"}),(0,dt.jsxs)("div",{className:ui,children:[(0,dt.jsxs)("div",{className:di,children:[(0,dt.jsx)("label",{htmlFor:"fullName",className:fi,children:"Full Name *"}),(0,dt.jsx)("input",{id:"fullName",type:"text",value:o.fullName,onChange:e=>m("fullName",e.target.value),className:`${vi} ${l.fullName?pi:""}`,placeholder:"Enter your full name","aria-describedby":l.fullName?"fullName-error":void 0}),l.fullName&&(0,dt.jsx)("div",{id:"fullName-error",className:bi,children:l.fullName})]}),(0,dt.jsxs)("div",{className:di,children:[(0,dt.jsx)("label",{htmlFor:"title",className:fi,children:"Title"}),(0,dt.jsx)("input",{id:"title",type:"text",value:o.title,onChange:e=>m("title",e.target.value),className:vi,placeholder:"e.g., Visual Designer, UI/UX Designer"})]}),(0,dt.jsxs)("div",{className:di,children:[(0,dt.jsx)("label",{htmlFor:"school",className:fi,children:"School"}),(0,dt.jsx)("input",{id:"school",type:"text",value:o.school,onChange:e=>m("school",e.target.value),className:vi,placeholder:"e.g., Art Institute of Chicago, Parsons School of Design"})]}),(0,dt.jsxs)("div",{className:di,children:[(0,dt.jsx)("label",{htmlFor:"pronouns",className:fi,children:"Pronouns"}),(0,dt.jsx)("input",{id:"pronouns",type:"text",value:o.pronouns,onChange:e=>m("pronouns",e.target.value),className:vi,placeholder:"e.g., she/her, they/them, he/him"})]}),(0,dt.jsxs)("div",{className:hi,children:[(0,dt.jsx)("label",{className:fi,children:"Major & Minor"}),(0,dt.jsxs)("div",{className:rl,children:[(0,dt.jsxs)("div",{className:al,children:[null===(r=o.majors)||void 0===r?void 0:r.map((e,t)=>(0,dt.jsxs)("div",{className:ol,children:[(0,dt.jsx)("span",{className:nl,children:e}),(0,dt.jsx)("button",{type:"button",onClick:()=>g(e),className:sl,"aria-label":`Remove ${e} major`,children:(0,dt.jsx)("svg",{className:Ki,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},`major-${t}`)),null===(a=o.minors)||void 0===a?void 0:a.map((e,t)=>(0,dt.jsxs)("div",{className:ol,children:[(0,dt.jsx)("span",{className:nl,children:e}),(0,dt.jsx)("button",{type:"button",onClick:()=>f(e),className:sl,"aria-label":`Remove ${e} minor`,children:(0,dt.jsx)("svg",{className:Ki,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},`minor-${t}`))]}),(0,dt.jsxs)("div",{className:il,children:[(0,dt.jsxs)("div",{className:ll,children:[(0,dt.jsx)("input",{type:"text",value:c,onChange:x,onKeyPress:v,placeholder:"Add a major or minor...",className:`${vi} ${cl}`}),(0,dt.jsx)("button",{type:"button",onClick:p,className:dl,disabled:!c.trim(),children:(0,dt.jsx)("svg",{className:el,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]}),u&&(0,dt.jsx)("div",{className:bi,children:u}),(0,dt.jsx)("div",{className:tl,children:"Press Enter or click + to add. Maximum 3 majors & minors."})]})]})]}),(0,dt.jsxs)("div",{className:hi,children:[(0,dt.jsx)("label",{htmlFor:"bio",className:fi,children:"About"}),(0,dt.jsx)("textarea",{id:"bio",value:o.bio,onChange:e=>m("bio",e.target.value),className:`${mi} ${l.bio?pi:""}`,placeholder:"Tell us about yourself...",rows:4,maxLength:280,"aria-describedby":l.bio?"bio-error":"bio-counter"}),(0,dt.jsxs)("div",{className:gi,children:[(0,dt.jsxs)("div",{id:"bio-counter",className:`${yi} ${o.bio.length>250?wi:""}`,children:[o.bio.length,"/280"]}),l.bio&&(0,dt.jsx)("div",{id:"bio-error",className:bi,children:l.bio})]})]})]})]})},oc=t=>{let{isOpen:r,onClose:a,onSave:o,initialData:n={},fileName:s=""}=t;const[i,l]=(0,e.useState)({title:"",description:"",software:[],tags:[]}),[c,d]=(0,e.useState)({});(0,e.useEffect)(()=>{if(r){const e=s.replace(/\.[^/.]+$/,"")||"";l({title:n.title||e,description:n.description||"",software:Array.isArray(n.software)?n.software:[],tags:Array.isArray(n.tags)?n.tags:[]}),d({})}},[r,s,n]);const u=(e,t)=>{l(r=>({...r,[e]:t})),c[e]&&d(t=>({...t,[e]:""}))},h=()=>{a()};return r?(0,dt.jsx)("div",{className:Nl,children:(0,dt.jsxs)("div",{className:Jl,children:[(0,dt.jsxs)("div",{className:Kl,children:[(0,dt.jsx)("h2",{children:"Edit Portfolio Item"}),(0,dt.jsx)("button",{type:"button",className:Yl,onClick:h,children:"\xd7"})]}),(0,dt.jsxs)("div",{className:Zl,children:[(0,dt.jsxs)("div",{className:Ql,children:[(0,dt.jsxs)("label",{htmlFor:"title",className:fi,children:["Title ",(0,dt.jsx)("span",{className:Xl,children:"*"})]}),(0,dt.jsx)("input",{type:"text",id:"title",value:i.title,onChange:e=>u("title",e.target.value),className:`${vi} ${c.title?ec:""}`,placeholder:"Enter your artwork title"}),c.title&&(0,dt.jsx)("span",{className:tc,children:c.title})]}),(0,dt.jsxs)("div",{className:Ql,children:[(0,dt.jsx)("label",{htmlFor:"description",className:fi,children:"Description"}),(0,dt.jsx)("textarea",{id:"description",value:i.description,onChange:e=>u("description",e.target.value),className:xi,placeholder:"Describe your artwork, concept, or inspiration...",rows:4})]})]}),(0,dt.jsxs)("div",{className:rc,children:[(0,dt.jsx)("button",{type:"button",className:Ks,onClick:h,children:"Cancel"}),(0,dt.jsx)("button",{type:"button",className:Ys,onClick:()=>{(()=>{const e={};return i.title.trim()||(e.title="Title is required"),d(e),0===Object.keys(e).length})()&&(o(i),a())},children:"Save"})]})]})}):null},nc=t=>{let{items:a,onChange:o,onDelete:n,onToggleVisibility:s}=t;const[i,l]=(0,e.useState)({isOpen:!1,itemId:null,itemTitle:""}),[c,d]=(0,e.useState)({isOpen:!1,itemId:null,itemData:null}),u=()=>{l({isOpen:!1,itemId:null,itemTitle:""})},h=()=>{d({isOpen:!1,itemId:null,itemData:null})};return(0,dt.jsxs)("div",{className:ri,children:[(0,dt.jsx)("h3",{className:ai,children:"Portfolio"}),0===a.length?(0,dt.jsxs)("div",{className:ql,children:[(0,dt.jsx)("div",{className:Hl,children:(0,dt.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[(0,dt.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,dt.jsx)("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),(0,dt.jsx)("polyline",{points:"21,15 16,10 5,21"})]})}),(0,dt.jsx)("p",{className:Gl,children:"No works uploaded yet"}),(0,dt.jsx)("p",{className:Vl,children:"Upload your first work to start building your portfolio"})]}):(0,dt.jsx)("div",{className:bl,children:a.map(e=>(0,dt.jsxs)("div",{className:yl,children:[(0,dt.jsxs)("div",{className:wl,children:[(0,dt.jsx)("img",{src:e.image,alt:e.title,className:kl}),(0,dt.jsxs)("div",{className:Ll,children:[(0,dt.jsx)("button",{type:"button",onClick:()=>(e=>{let t=[],r=[];e.tags&&Array.isArray(e.tags)&&(t=e.tags.filter(e=>["Photoshop","Illustrator","Blender","Maya","3ds Max","Cinema 4D","After Effects","Premiere Pro","Figma","Sketch","Procreate","ZBrush","Substance Painter","Unity","Unreal Engine"].includes(e)),r=e.tags.filter(e=>e.startsWith("@"))),d({isOpen:!0,itemId:e.id,itemData:{title:e.title||"",description:e.description||"",software:t,tags:r}})})(e),className:Fl,title:"Edit work details",children:(0,dt.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,dt.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})}),(0,dt.jsx)("button",{type:"button",onClick:()=>(e=>{const t=a.find(t=>t.id===e);if(t&&s)s(e,t.isPublic);else{const t=a.map(t=>t.id===e?{...t,isPublic:!t.isPublic}:t);o(t)}})(e.id),className:`${Ml} ${e.isPublic?Rl:$l}`,title:e.isPublic?"Make Private":"Make Public",children:e.isPublic?(0,dt.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,dt.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})}):(0,dt.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,dt.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"})})}),(0,dt.jsx)("button",{type:"button",onClick:()=>{return t=e.id,r=e.title,void l({isOpen:!0,itemId:t,itemTitle:r});var t,r},className:Dl,title:"Remove from portfolio",children:(0,dt.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,dt.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})})]}),(0,dt.jsx)("div",{className:Ol,children:(0,dt.jsx)("span",{className:`${Ul} ${e.isPublic?jl:zl}`,children:e.isPublic?"Public":"Private"})})]}),(0,dt.jsx)("div",{className:Wl,children:(0,dt.jsx)("h4",{className:Bl,children:e.title})})]},e.id))}),i.isOpen&&(0,dt.jsx)("div",{className:Nl,onClick:u,children:(0,dt.jsxs)("div",{className:Cl,onClick:e=>e.stopPropagation(),children:[(0,dt.jsx)("div",{className:Sl,children:(0,dt.jsx)("h3",{className:_l,children:"Delete Work"})}),(0,dt.jsxs)("div",{className:Il,children:[(0,dt.jsxs)("p",{children:["Are you sure you want to delete"," ",(0,dt.jsxs)("strong",{children:['"',i.itemTitle,'"']})," from your portfolio?"]}),(0,dt.jsx)("p",{className:El,children:"This action cannot be undone."})]}),(0,dt.jsxs)("div",{className:Pl,children:[(0,dt.jsx)("button",{type:"button",onClick:u,className:Al,children:"Cancel"}),(0,dt.jsx)("button",{type:"button",onClick:()=>{if(i.itemId){if(n)n(i.itemId);else{const e=a.filter(e=>e.id!==i.itemId);o(e)}u()}},className:Tl,children:"Delete"})]})]})}),(0,dt.jsx)(oc,{isOpen:c.isOpen,onClose:h,onSave:async e=>{if(c.itemId)try{const{updatePortfolioItem:t}=await Promise.resolve().then(r.bind(r,200)),n=await t(c.itemId,{title:e.title,description:e.description,tags:[...e.software,...e.tags,"uploaded"]});if(n.success){const t=a.map(t=>t.id===c.itemId?{...t,title:e.title,description:e.description,software:e.software,tags:[...e.software,...e.tags,"uploaded"]}:t);o(t),h()}else console.error("Failed to update portfolio item:",n.error),alert("Failed to update work details. Please try again.")}catch(t){console.error("Error updating portfolio item:",t),alert("Failed to update work details. Please try again.")}},initialData:c.itemData||{}})]})},sc=1.375,ic=.5,lc=4,cc=.1,dc=1,uc=.1,hc="Update Profile Photo",mc="Choose Photo",pc="Upload Successful!",gc="Your profile photo has been updated.",fc="Done",vc="Cancel",xc="Save",bc="Uploading...",yc="Zoom",wc="Choose a new profile photo",kc="Current avatar",jc={CROPPER:{containerStyle:{width:"100%",height:"100%",backgroundColor:"#f3f4f6"},cropAreaStyle:{border:"2px solid #8b5cf6",borderRadius:"50%",boxShadow:"0 0 0 9999px rgba(0, 0, 0, 0.3)"},mediaStyle:{width:"100%",height:"100%",objectFit:"contain"}}},Nc=e=>{let{onCancel:t,error:r}=e;return(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:hc}),(0,dt.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:(0,dt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r&&(0,dt.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,dt.jsx)("p",{className:"text-red-600 text-sm",children:r})})]})},Cc=e=>{let{currentAvatar:t,onUploadClick:r,onFileChange:a,fileInputRef:o}=e;return(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"mb-4",children:(0,dt.jsx)("img",{src:t,alt:kc,className:"w-24 h-24 rounded-full mx-auto border-2 border-gray-200",onError:e=>{e.target.style.display="none",e.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiByeD0iNjQiIGZpbGw9IiNGM0Y0RjYiLz4KPHN2ZyB4PSIzMiIgeT0iMjQiIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSIjOEM5Q0E2Ij4KPHBhdGggZD0iTTEyIDEyYzIuMjEgMCA0LTEuNzkgNC00cy0xLjc5LTQtNC00LTQgMS43OS00IDQgMS43OSA0IDQgNHptMCAyYy0yLjY3IDAtOCAxLjM0LTggNHYyaDE2di0yYzAtMi42Ni01LjMzLTQtOC00eiIvPgo8L3N2Zz4KPC9zdmc+",e.target.style.display="block"}})}),(0,dt.jsx)("p",{className:"text-gray-600 mb-4",children:wc}),(0,dt.jsx)("button",{onClick:r,className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:mc}),(0,dt.jsx)("input",{ref:o,type:"file",accept:"image/jpeg,image/png,image/webp",onChange:a,className:"hidden"})]})};var Sc=function(e,t){return Sc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},Sc(e,t)};function _c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Sc(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var Ic=function(){return Ic=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ic.apply(this,arguments)};Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var Ec=r(185),Pc=r.n(Ec);function Ac(e,t,r,a,o){void 0===o&&(o=0);var n=Fc(t.width,t.height,o),s=n.width,i=n.height;return{x:Tc(e.x,s,r.width,a),y:Tc(e.y,i,r.height,a)}}function Tc(e,t,r,a){var o=t*a/2-r/2;return Oc(e,-o,o)}function Lc(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function Mc(e,t){return 180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI}function Dc(e,t){return Math.min(e,Math.max(0,t))}function Rc(e,t){return t}function $c(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function Fc(e,t,r){var a=r*Math.PI/180;return{width:Math.abs(Math.cos(a)*e)+Math.abs(Math.sin(a)*t),height:Math.abs(Math.sin(a)*e)+Math.abs(Math.cos(a)*t)}}function Oc(e,t,r){return Math.min(Math.max(e,t),r)}function Uc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(function(e){return"string"===typeof e&&e.length>0}).join(" ").trim()}var zc=function(t){function r(){var a=null!==t&&t.apply(this,arguments)||this;return a.cropperRef=e.createRef(),a.imageRef=e.createRef(),a.videoRef=e.createRef(),a.containerPosition={x:0,y:0},a.containerRef=null,a.styleRef=null,a.containerRect=null,a.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},a.dragStartPosition={x:0,y:0},a.dragStartCrop={x:0,y:0},a.gestureZoomStart=0,a.gestureRotationStart=0,a.isTouching=!1,a.lastPinchDistance=0,a.lastPinchRotation=0,a.rafDragTimeout=null,a.rafPinchTimeout=null,a.wheelTimer=null,a.currentDoc="undefined"!==typeof document?document:null,a.currentWindow="undefined"!==typeof window?window:null,a.resizeObserver=null,a.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},a.initResizeObserver=function(){if("undefined"!==typeof window.ResizeObserver&&a.containerRef){var e=!0;a.resizeObserver=new window.ResizeObserver(function(t){e?e=!1:a.computeSizes()}),a.resizeObserver.observe(a.containerRef)}},a.preventZoomSafari=function(e){return e.preventDefault()},a.cleanEvents=function(){a.currentDoc&&(a.currentDoc.removeEventListener("mousemove",a.onMouseMove),a.currentDoc.removeEventListener("mouseup",a.onDragStopped),a.currentDoc.removeEventListener("touchmove",a.onTouchMove),a.currentDoc.removeEventListener("touchend",a.onDragStopped),a.currentDoc.removeEventListener("gesturechange",a.onGestureChange),a.currentDoc.removeEventListener("gestureend",a.onGestureEnd),a.currentDoc.removeEventListener("scroll",a.onScroll))},a.clearScrollEvent=function(){a.containerRef&&a.containerRef.removeEventListener("wheel",a.onWheel),a.wheelTimer&&clearTimeout(a.wheelTimer)},a.onMediaLoad=function(){var e=a.computeSizes();e&&(a.emitCropData(),a.setInitialCrop(e)),a.props.onMediaLoaded&&a.props.onMediaLoaded(a.mediaSize)},a.setInitialCrop=function(e){if(a.props.initialCroppedAreaPercentages){var t=function(e,t,r,a,o,n){var s=Fc(t.width,t.height,r),i=Oc(a.width/s.width*(100/e.width),o,n);return{crop:{x:i*s.width/2-a.width/2-s.width*i*(e.x/100),y:i*s.height/2-a.height/2-s.height*i*(e.y/100)},zoom:i}}(a.props.initialCroppedAreaPercentages,a.mediaSize,a.props.rotation,e,a.props.minZoom,a.props.maxZoom),r=t.crop,o=t.zoom;a.props.onCropChange(r),a.props.onZoomChange&&a.props.onZoomChange(o)}else if(a.props.initialCroppedAreaPixels){var n=function(e,t,r,a,o,n){void 0===r&&(r=0);var s=Fc(t.naturalWidth,t.naturalHeight,r),i=Oc(function(e,t,r){var a=function(e){return e.width>e.height?e.width/e.naturalWidth:e.height/e.naturalHeight}(t);return r.height>r.width?r.height/(e.height*a):r.width/(e.width*a)}(e,t,a),o,n),l=a.height>a.width?a.height/e.height:a.width/e.width;return{crop:{x:((s.width-e.width)/2-e.x)*l,y:((s.height-e.height)/2-e.y)*l},zoom:i}}(a.props.initialCroppedAreaPixels,a.mediaSize,a.props.rotation,e,a.props.minZoom,a.props.maxZoom);r=n.crop,o=n.zoom;a.props.onCropChange(r),a.props.onZoomChange&&a.props.onZoomChange(o)}},a.computeSizes=function(){var e,t,r,o,n,s,i=a.imageRef.current||a.videoRef.current;if(i&&a.containerRef){a.containerRect=a.containerRef.getBoundingClientRect(),a.saveContainerPosition();var l=a.containerRect.width/a.containerRect.height,c=(null===(e=a.imageRef.current)||void 0===e?void 0:e.naturalWidth)||(null===(t=a.videoRef.current)||void 0===t?void 0:t.videoWidth)||0,d=(null===(r=a.imageRef.current)||void 0===r?void 0:r.naturalHeight)||(null===(o=a.videoRef.current)||void 0===o?void 0:o.videoHeight)||0,u=c/d,h=void 0;if(i.offsetWidth<c||i.offsetHeight<d)switch(a.state.mediaObjectFit){default:case"contain":h=l>u?{width:a.containerRect.height*u,height:a.containerRect.height}:{width:a.containerRect.width,height:a.containerRect.width/u};break;case"horizontal-cover":h={width:a.containerRect.width,height:a.containerRect.width/u};break;case"vertical-cover":h={width:a.containerRect.height*u,height:a.containerRect.height}}else h={width:i.offsetWidth,height:i.offsetHeight};a.mediaSize=Ic(Ic({},h),{naturalWidth:c,naturalHeight:d}),a.props.setMediaSize&&a.props.setMediaSize(a.mediaSize);var m=a.props.cropSize?a.props.cropSize:function(e,t,r,a,o,n){void 0===n&&(n=0);var s=Fc(e,t,n),i=s.width,l=s.height,c=Math.min(i,r),d=Math.min(l,a);return c>d*o?{width:d*o,height:d}:{width:c,height:c/o}}(a.mediaSize.width,a.mediaSize.height,a.containerRect.width,a.containerRect.height,a.props.aspect,a.props.rotation);return(null===(n=a.state.cropSize)||void 0===n?void 0:n.height)===m.height&&(null===(s=a.state.cropSize)||void 0===s?void 0:s.width)===m.width||a.props.onCropSizeChange&&a.props.onCropSizeChange(m),a.setState({cropSize:m},a.recomputeCropPosition),a.props.setCropSize&&a.props.setCropSize(m),m}},a.saveContainerPosition=function(){if(a.containerRef){var e=a.containerRef.getBoundingClientRect();a.containerPosition={x:e.left,y:e.top}}},a.onMouseDown=function(e){a.currentDoc&&(e.preventDefault(),a.currentDoc.addEventListener("mousemove",a.onMouseMove),a.currentDoc.addEventListener("mouseup",a.onDragStopped),a.saveContainerPosition(),a.onDragStart(r.getMousePoint(e)))},a.onMouseMove=function(e){return a.onDrag(r.getMousePoint(e))},a.onScroll=function(e){a.currentDoc&&(e.preventDefault(),a.saveContainerPosition())},a.onTouchStart=function(e){a.currentDoc&&(a.isTouching=!0,a.props.onTouchRequest&&!a.props.onTouchRequest(e)||(a.currentDoc.addEventListener("touchmove",a.onTouchMove,{passive:!1}),a.currentDoc.addEventListener("touchend",a.onDragStopped),a.saveContainerPosition(),2===e.touches.length?a.onPinchStart(e):1===e.touches.length&&a.onDragStart(r.getTouchPoint(e.touches[0]))))},a.onTouchMove=function(e){e.preventDefault(),2===e.touches.length?a.onPinchMove(e):1===e.touches.length&&a.onDrag(r.getTouchPoint(e.touches[0]))},a.onGestureStart=function(e){a.currentDoc&&(e.preventDefault(),a.currentDoc.addEventListener("gesturechange",a.onGestureChange),a.currentDoc.addEventListener("gestureend",a.onGestureEnd),a.gestureZoomStart=a.props.zoom,a.gestureRotationStart=a.props.rotation)},a.onGestureChange=function(e){if(e.preventDefault(),!a.isTouching){var t=r.getMousePoint(e),o=a.gestureZoomStart-1+e.scale;if(a.setNewZoom(o,t,{shouldUpdatePosition:!0}),a.props.onRotationChange){var n=a.gestureRotationStart+e.rotation;a.props.onRotationChange(n)}}},a.onGestureEnd=function(e){a.cleanEvents()},a.onDragStart=function(e){var t,r,o=e.x,n=e.y;a.dragStartPosition={x:o,y:n},a.dragStartCrop=Ic({},a.props.crop),null===(r=(t=a.props).onInteractionStart)||void 0===r||r.call(t)},a.onDrag=function(e){var t=e.x,r=e.y;a.currentWindow&&(a.rafDragTimeout&&a.currentWindow.cancelAnimationFrame(a.rafDragTimeout),a.rafDragTimeout=a.currentWindow.requestAnimationFrame(function(){if(a.state.cropSize&&void 0!==t&&void 0!==r){var e=t-a.dragStartPosition.x,o=r-a.dragStartPosition.y,n={x:a.dragStartCrop.x+e,y:a.dragStartCrop.y+o},s=a.props.restrictPosition?Ac(n,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):n;a.props.onCropChange(s)}}))},a.onDragStopped=function(){var e,t;a.isTouching=!1,a.cleanEvents(),a.emitCropData(),null===(t=(e=a.props).onInteractionEnd)||void 0===t||t.call(e)},a.onWheel=function(e){if(a.currentWindow&&(!a.props.onWheelRequest||a.props.onWheelRequest(e))){e.preventDefault();var t=r.getMousePoint(e),o=Pc()(e).pixelY,n=a.props.zoom-o*a.props.zoomSpeed/200;a.setNewZoom(n,t,{shouldUpdatePosition:!0}),a.state.hasWheelJustStarted||a.setState({hasWheelJustStarted:!0},function(){var e,t;return null===(t=(e=a.props).onInteractionStart)||void 0===t?void 0:t.call(e)}),a.wheelTimer&&clearTimeout(a.wheelTimer),a.wheelTimer=a.currentWindow.setTimeout(function(){return a.setState({hasWheelJustStarted:!1},function(){var e,t;return null===(t=(e=a.props).onInteractionEnd)||void 0===t?void 0:t.call(e)})},250)}},a.getPointOnContainer=function(e,t){var r=e.x,o=e.y;if(!a.containerRect)throw new Error("The Cropper is not mounted");return{x:a.containerRect.width/2-(r-t.x),y:a.containerRect.height/2-(o-t.y)}},a.getPointOnMedia=function(e){var t=e.x,r=e.y,o=a.props,n=o.crop,s=o.zoom;return{x:(t+n.x)/s,y:(r+n.y)/s}},a.setNewZoom=function(e,t,r){var o=(void 0===r?{}:r).shouldUpdatePosition,n=void 0===o||o;if(a.state.cropSize&&a.props.onZoomChange){var s=Oc(e,a.props.minZoom,a.props.maxZoom);if(n){var i=a.getPointOnContainer(t,a.containerPosition),l=a.getPointOnMedia(i),c={x:l.x*s-i.x,y:l.y*s-i.y},d=a.props.restrictPosition?Ac(c,a.mediaSize,a.state.cropSize,s,a.props.rotation):c;a.props.onCropChange(d)}a.props.onZoomChange(s)}},a.getCropData=function(){return a.state.cropSize?function(e,t,r,a,o,n,s){void 0===n&&(n=0),void 0===s&&(s=!0);var i=s?Dc:Rc,l=Fc(t.width,t.height,n),c=Fc(t.naturalWidth,t.naturalHeight,n),d={x:i(100,((l.width-r.width/o)/2-e.x/o)/l.width*100),y:i(100,((l.height-r.height/o)/2-e.y/o)/l.height*100),width:i(100,r.width/l.width*100/o),height:i(100,r.height/l.height*100/o)},u=Math.round(i(c.width,d.width*c.width/100)),h=Math.round(i(c.height,d.height*c.height/100)),m=c.width>=c.height*a?{width:Math.round(h*a),height:h}:{width:u,height:Math.round(u/a)};return{croppedAreaPercentages:d,croppedAreaPixels:Ic(Ic({},m),{x:Math.round(i(c.width-m.width,d.x*c.width/100)),y:Math.round(i(c.height-m.height,d.y*c.height/100))})}}(a.props.restrictPosition?Ac(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop,a.mediaSize,a.state.cropSize,a.getAspect(),a.props.zoom,a.props.rotation,a.props.restrictPosition):null},a.emitCropData=function(){var e=a.getCropData();if(e){var t=e.croppedAreaPercentages,r=e.croppedAreaPixels;a.props.onCropComplete&&a.props.onCropComplete(t,r),a.props.onCropAreaChange&&a.props.onCropAreaChange(t,r)}},a.emitCropAreaChange=function(){var e=a.getCropData();if(e){var t=e.croppedAreaPercentages,r=e.croppedAreaPixels;a.props.onCropAreaChange&&a.props.onCropAreaChange(t,r)}},a.recomputeCropPosition=function(){if(a.state.cropSize){var e=a.props.restrictPosition?Ac(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;a.props.onCropChange(e),a.emitCropData()}},a.onKeyDown=function(e){var t,r,o=a.props,n=o.crop,s=o.onCropChange,i=o.keyboardStep,l=o.zoom,c=o.rotation,d=i;if(a.state.cropSize){e.shiftKey&&(d*=.2);var u=Ic({},n);switch(e.key){case"ArrowUp":u.y-=d,e.preventDefault();break;case"ArrowDown":u.y+=d,e.preventDefault();break;case"ArrowLeft":u.x-=d,e.preventDefault();break;case"ArrowRight":u.x+=d,e.preventDefault();break;default:return}a.props.restrictPosition&&(u=Ac(u,a.mediaSize,a.state.cropSize,l,c)),e.repeat||null===(r=(t=a.props).onInteractionStart)||void 0===r||r.call(t),s(u)}},a.onKeyUp=function(e){var t,r;switch(e.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":e.preventDefault();break;default:return}a.emitCropData(),null===(r=(t=a.props).onInteractionEnd)||void 0===r||r.call(t)},a}return _c(r,t),r.prototype.componentDidMount=function(){this.currentDoc&&this.currentWindow&&(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),"undefined"===typeof window.ResizeObserver&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=".reactEasyCrop_Container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  user-select: none;\n  touch-action: none;\n  cursor: move;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.reactEasyCrop_Image,\n.reactEasyCrop_Video {\n  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */\n}\n\n.reactEasyCrop_Contain {\n  max-width: 100%;\n  max-height: 100%;\n  margin: auto;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.reactEasyCrop_Cover_Horizontal {\n  width: 100%;\n  height: auto;\n}\n.reactEasyCrop_Cover_Vertical {\n  width: auto;\n  height: 100%;\n}\n\n.reactEasyCrop_CropArea {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  box-sizing: border-box;\n  box-shadow: 0 0 0 9999em;\n  color: rgba(0, 0, 0, 0.5);\n  overflow: hidden;\n}\n\n.reactEasyCrop_CropAreaRound {\n  border-radius: 50%;\n}\n\n.reactEasyCrop_CropAreaGrid::before {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 0;\n  bottom: 0;\n  left: 33.33%;\n  right: 33.33%;\n  border-top: 0;\n  border-bottom: 0;\n}\n\n.reactEasyCrop_CropAreaGrid::after {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 33.33%;\n  bottom: 33.33%;\n  left: 0;\n  right: 0;\n  border-left: 0;\n  border-right: 0;\n}\n",this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},r.prototype.componentWillUnmount=function(){var e,t;this.currentDoc&&this.currentWindow&&("undefined"===typeof window.ResizeObserver&&this.currentWindow.removeEventListener("resize",this.computeSizes),null===(e=this.resizeObserver)||void 0===e||e.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&(null===(t=this.styleRef.parentNode)||void 0===t||t.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},r.prototype.componentDidUpdate=function(e){var t,r,a,o,n,s,i,l,c;e.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):e.aspect!==this.props.aspect||e.objectFit!==this.props.objectFit?this.computeSizes():e.zoom!==this.props.zoom?this.recomputeCropPosition():(null===(t=e.cropSize)||void 0===t?void 0:t.height)!==(null===(r=this.props.cropSize)||void 0===r?void 0:r.height)||(null===(a=e.cropSize)||void 0===a?void 0:a.width)!==(null===(o=this.props.cropSize)||void 0===o?void 0:o.width)?this.computeSizes():(null===(n=e.crop)||void 0===n?void 0:n.x)===(null===(s=this.props.crop)||void 0===s?void 0:s.x)&&(null===(i=e.crop)||void 0===i?void 0:i.y)===(null===(l=this.props.crop)||void 0===l?void 0:l.y)||this.emitCropAreaChange(),e.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),e.video!==this.props.video&&(null===(c=this.videoRef.current)||void 0===c||c.load());var d=this.getObjectFit();d!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:d},this.computeSizes)},r.prototype.getAspect=function(){var e=this.props,t=e.cropSize,r=e.aspect;return t?t.width/t.height:r},r.prototype.getObjectFit=function(){var e,t,r,a;if("cover"===this.props.objectFit){if((this.imageRef.current||this.videoRef.current)&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var o=this.containerRect.width/this.containerRect.height;return((null===(e=this.imageRef.current)||void 0===e?void 0:e.naturalWidth)||(null===(t=this.videoRef.current)||void 0===t?void 0:t.videoWidth)||0)/((null===(r=this.imageRef.current)||void 0===r?void 0:r.naturalHeight)||(null===(a=this.videoRef.current)||void 0===a?void 0:a.videoHeight)||0)<o?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},r.prototype.onPinchStart=function(e){var t=r.getTouchPoint(e.touches[0]),a=r.getTouchPoint(e.touches[1]);this.lastPinchDistance=Lc(t,a),this.lastPinchRotation=Mc(t,a),this.onDragStart($c(t,a))},r.prototype.onPinchMove=function(e){var t=this;if(this.currentDoc&&this.currentWindow){var a=r.getTouchPoint(e.touches[0]),o=r.getTouchPoint(e.touches[1]),n=$c(a,o);this.onDrag(n),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var e=Lc(a,o),r=t.props.zoom*(e/t.lastPinchDistance);t.setNewZoom(r,n,{shouldUpdatePosition:!1}),t.lastPinchDistance=e;var s=Mc(a,o),i=t.props.rotation+(s-t.lastPinchRotation);t.props.onRotationChange&&t.props.onRotationChange(i),t.lastPinchRotation=s})}},r.prototype.render=function(){var t,r=this,a=this.props,o=a.image,n=a.video,s=a.mediaProps,i=a.cropperProps,l=a.transform,c=a.crop,d=c.x,u=c.y,h=a.rotation,m=a.zoom,p=a.cropShape,g=a.showGrid,f=a.roundCropAreaPixels,v=a.style,x=v.containerStyle,b=v.cropAreaStyle,y=v.mediaStyle,w=a.classes,k=w.containerClassName,j=w.cropAreaClassName,N=w.mediaClassName,C=null!==(t=this.state.mediaObjectFit)&&void 0!==t?t:this.getObjectFit();return e.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(e){return r.containerRef=e},"data-testid":"container",style:x,className:Uc("reactEasyCrop_Container",k)},o?e.createElement("img",Ic({alt:"",className:Uc("reactEasyCrop_Image","contain"===C&&"reactEasyCrop_Contain","horizontal-cover"===C&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===C&&"reactEasyCrop_Cover_Vertical",N)},s,{src:o,ref:this.imageRef,style:Ic(Ic({},y),{transform:l||"translate(".concat(d,"px, ").concat(u,"px) rotate(").concat(h,"deg) scale(").concat(m,")")}),onLoad:this.onMediaLoad})):n&&e.createElement("video",Ic({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:Uc("reactEasyCrop_Video","contain"===C&&"reactEasyCrop_Contain","horizontal-cover"===C&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===C&&"reactEasyCrop_Cover_Vertical",N)},s,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:Ic(Ic({},y),{transform:l||"translate(".concat(d,"px, ").concat(u,"px) rotate(").concat(h,"deg) scale(").concat(m,")")}),controls:!1}),(Array.isArray(n)?n:[{src:n}]).map(function(t){return e.createElement("source",Ic({key:t.src},t))})),this.state.cropSize&&e.createElement("div",Ic({ref:this.cropperRef,style:Ic(Ic({},b),{width:f?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:f?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:Uc("reactEasyCrop_CropArea","round"===p&&"reactEasyCrop_CropAreaRound",g&&"reactEasyCrop_CropAreaGrid",j)},i)))},r.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:3,minZoom:1,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:1},r.getMousePoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},r.getTouchPoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},r}(e.Component);const Wc=e=>{let{previewUrl:t,crop:r,zoom:a,isUploading:o,uploadProgress:n,croppedAreaPixels:s,onCropChange:i,onZoomChange:l,onCropComplete:c,onCancel:d,onConfirmCrop:u}=e;return(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"mb-4",children:(0,dt.jsx)("div",{className:"relative w-full h-64 bg-gray-100 rounded-lg overflow-hidden",children:(0,dt.jsx)(zc,{image:t,crop:r,zoom:a,aspect:dc,onCropChange:i,onZoomChange:l,onCropComplete:c,showGrid:!1,objectFit:"contain",minZoom:ic,maxZoom:lc,wheelZoomRatio:uc,style:jc.CROPPER})})}),(0,dt.jsxs)("div",{className:"mb-4",children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:yc}),(0,dt.jsx)("input",{type:"range",min:ic,max:lc,step:cc,value:a,onChange:e=>l(Number(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),o&&(0,dt.jsxs)("div",{className:"mb-4",children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-1",children:[(0,dt.jsx)("span",{children:bc}),(0,dt.jsxs)("span",{children:[n,"%"]})]}),(0,dt.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,dt.jsx)("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${n}%`}})})]}),(0,dt.jsxs)("div",{className:"flex gap-3",children:[(0,dt.jsx)("button",{onClick:d,disabled:o,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:vc}),(0,dt.jsx)("button",{onClick:u,disabled:o||!s,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50",children:o?bc:xc})]})]})},Bc=e=>{let{onComplete:t}=e;return(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"mb-4",children:(0,dt.jsx)("div",{className:"w-24 h-24 rounded-full mx-auto border-2 border-green-200 bg-green-50 flex items-center justify-center",children:(0,dt.jsx)("svg",{className:"w-12 h-12 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),(0,dt.jsx)("p",{className:"text-green-600 font-medium mb-2",children:pc}),(0,dt.jsx)("p",{className:"text-gray-600 mb-4",children:gc}),(0,dt.jsx)("button",{onClick:t,className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors",children:fc})]})},qc=()=>{const[t,r]=(0,e.useState)(!1),[a,o]=(0,e.useState)(0),[n,s]=(0,e.useState)(null);return{isUploading:t,uploadProgress:a,error:n,handleFileSelect:(0,e.useCallback)(async e=>{try{s(null),(e=>{if(!["image/jpeg","image/png","image/webp"].includes(e.type))throw new Error("Please select a valid image file (JPG, PNG, WebP)");if(e.size>5242880)throw new Error("File size must be less than 5MB")})(e);const t=await new Promise((t,r)=>{const a=new FileReader;a.onload=()=>t(a.result),a.onerror=()=>r(new Error("Failed to read file")),a.readAsDataURL(e)});return console.log("[handleFileSelect] Generated preview URL:",null===t||void 0===t?void 0:t.substring(0,30)),{file:e,previewUrl:t}}catch(t){return s(t.message),null}},[]),handleCropComplete:(0,e.useCallback)(async(e,t,a)=>{try{r(!0),o(10),console.log("[handleCropComplete] Input parameters:",{imageNaturalWidth:e.naturalWidth,imageNaturalHeight:e.naturalHeight,crop:t,pixelCrop:a});const n=function(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:512;const o=document.createElement("canvas"),n=o.getContext("2d");return o.width=a,o.height=a,n.drawImage(e,r.x,r.y,r.width,r.height,0,0,a,a),console.log("[cropImageToCanvas] Image dimensions:",{naturalWidth:e.naturalWidth,naturalHeight:e.naturalHeight}),console.log("[cropImageToCanvas] Pixel crop:",r),console.log("[cropImageToCanvas] Output size:",a),o}(e,t,a,512);o(30);const s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.85;const r=e.toDataURL("image/webp",t);return console.log("[exportToDataURL] Canvas dimensions:",{width:e.width,height:e.height}),console.log("[exportToDataURL] Generated dataURL length:",null===r||void 0===r?void 0:r.length),console.log("[exportToDataURL] Generated dataURL preview:",null===r||void 0===r?void 0:r.substring(0,50)),r}(n,.85);o(50),console.log("[useAvatarUpload] Generated dataURL:",null===s||void 0===s?void 0:s.substring(0,30));const i=(0,ct.WR)();o(80);const l=await(0,zt.F4)(s,i);if(o(100),await new Promise(e=>setTimeout(e,500)),!l.success)throw new Error(l.error);return console.log("[useAvatarUpload] Upload successful, returning:",l.data),l.data}catch(n){throw console.error("[useAvatarUpload] Upload failed:",n),s(n.message),n}finally{r(!1),o(0)}},[]),cleanup:(0,e.useCallback)(e=>{console.log("[cleanup] Data URL cleanup completed")},[])}},Hc=t=>{let{isOpen:r,onClose:a,onAvatarUpdate:o,currentAvatar:n}=t;const s=(t=>{const[r,a]=(0,e.useState)({x:0,y:0}),[o,n]=(0,e.useState)(sc),[s,i]=(0,e.useState)(null),[l,c]=(0,e.useState)(null),[d,u]=(0,e.useState)(null),[h,m]=(0,e.useState)(!1);return(0,e.useEffect)(()=>{t&&(a({x:0,y:0}),n(sc),i(null),c(null),u(null),m(!1))},[t]),{crop:r,zoom:o,croppedAreaPixels:s,selectedImage:l,previewUrl:d,uploadCompleted:h,setCrop:a,setZoom:n,setCroppedAreaPixels:i,setSelectedImage:c,setPreviewUrl:u,setUploadCompleted:m,resetState:()=>{a({x:0,y:0}),n(sc),i(null),c(null),u(null),m(!1)}}})(r),{crop:i,zoom:l,croppedAreaPixels:c,selectedImage:d,previewUrl:u,uploadCompleted:h,setCrop:m,setZoom:p}=s,g=((t,r,a,o)=>{const{selectedImage:n,previewUrl:s,croppedAreaPixels:i,crop:l}=t,{setSelectedImage:c,setPreviewUrl:d,setCrop:u,setZoom:h,setCroppedAreaPixels:m,setUploadCompleted:p,resetState:g}=r,f=(0,e.useRef)(null),{isUploading:v,uploadProgress:x,error:b,handleFileSelect:y,handleCropComplete:w,cleanup:k}=qc(),j=(0,e.useCallback)(async e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!r)return;const a=await y(r);a&&(c(a.file),d(a.previewUrl),u({x:0,y:0}),h(sc))},[y,c,d,u,h]),N=(0,e.useCallback)((e,t)=>{m(t)},[m]),C=(0,e.useCallback)(async()=>{if(console.log("[AvatarCropModal] handleConfirmCrop called"),console.log("[AvatarCropModal] selectedImage:",!!n),console.log("[AvatarCropModal] croppedAreaPixels:",!!i),n&&i)try{var e;const t=new Image;t.src=s,await new Promise(e=>{t.onload=e}),console.log("[AvatarCropModal] Image loaded, calling handleCropComplete");const r=await w(t,l,i);if(console.log("[AvatarCropModal] Crop result:",r),!r.avatarUrl||!r.avatarUrl.startsWith("data:image/"))throw console.error("[AvatarCropModal] Invalid avatarUrl format:",r.avatarUrl),new Error("Invalid avatar URL format");console.log("[AvatarCropModal] Calling onAvatarUpdate with:",null===(e=r.avatarUrl)||void 0===e?void 0:e.substring(0,30)),o(r.avatarUrl,r.avatarUpdatedAt),k(s),p(!0)}catch(t){console.error("Crop failed:",t)}else console.error("[AvatarCropModal] Missing required data for crop")},[n,i,l,w,o,k,s,p]),S=(0,e.useCallback)(()=>{k(s),g(),a()},[k,s,g,a]),_=(0,e.useCallback)(()=>{p(!1),a()},[p,a]),I=(0,e.useCallback)(()=>{var e;null===(e=f.current)||void 0===e||e.click()},[]);return{fileInputRef:f,isUploading:v,uploadProgress:x,error:b,handleFileChange:j,onCropComplete:N,handleConfirmCrop:C,handleCancel:S,handleComplete:_,handleUploadClick:I}})(s,s,a,o),{fileInputRef:f,isUploading:v,uploadProgress:x,error:b,handleFileChange:y,onCropComplete:w,handleConfirmCrop:k,handleCancel:j,handleComplete:N,handleUploadClick:C}=g;return r?(0,dt.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,dt.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,dt.jsx)(Nc,{onCancel:j,error:b}),h?(0,dt.jsx)(Bc,{onComplete:N}):d?(0,dt.jsx)(Wc,{previewUrl:u,crop:i,zoom:l,isUploading:v,uploadProgress:x,croppedAreaPixels:c,onCropChange:m,onZoomChange:p,onCropComplete:w,onCancel:j,onConfirmCrop:k}):(0,dt.jsx)(Cc,{currentAvatar:n,onUploadClick:C,onFileChange:y,fileInputRef:f})]})}):null},Gc=t=>{let{avatar:r,onAvatarChange:a}=t;const[o,n]=(0,e.useState)(!1),[s,i]=(0,e.useState)(null),[l,c]=(0,e.useState)(r);(0,e.useEffect)(()=>{r&&r!==l&&(console.log("[ProfilePhotoCard] Avatar prop changed:",null===r||void 0===r?void 0:r.substring(0,30)),c(r))},[r,l]),(0,e.useEffect)(()=>{if(!l&&"undefined"!==typeof window)try{const t=window.localStorage.getItem("tag.avatars.alice");if(t){const r=JSON.parse(t);var e;if(r&&r.avatarUrl)console.log("[ProfilePhotoCard] Initialized from localStorage:",null===(e=r.avatarUrl)||void 0===e?void 0:e.substring(0,30)),c(r.avatarUrl)}}catch(t){console.warn("[ProfilePhotoCard] Failed to read avatar from localStorage:",t)}},[]);const d="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiByeD0iNjQiIGZpbGw9IiNGM0Y0RjYiLz4KPHN2ZyB4PSIzMiIgeT0iMjQiIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSIjOEM5Q0E2Ij4KPHBhdGggZD0iTTEyIDEyYzIuMjEgMCA0LTEuNzkgNC00cy0xLjc5LTQtNC00LTQgMS43OS00IDQgMS43OSA0IDQgNHptMCAyYy0yLjY3IDAtOCAxLjM0LTggNHYyaDE2di0yYzAtMi42Ni01LjMzLTQtOC00eiIvPgo8L3N2Zz4KPC9zdmc+",u=l?(0,zt.Bc)(l,s):null,h=(0,e.useCallback)((e,t)=>{if(console.log("[ProfilePhotoCard] Received new avatar URL:",null===e||void 0===e?void 0:e.substring(0,30)),console.log("[ProfilePhotoCard] Avatar URL type:",typeof e),console.log("[ProfilePhotoCard] Full avatar URL:",e),!e||!e.startsWith("data:image/"))return void console.error("[ProfilePhotoCard] Invalid avatar URL format:",e);c(e),i(t),a(e);const r="alice";"undefined"!==typeof window&&((0,Us.Bx)(r),window.dispatchEvent(new CustomEvent("avatar:updated",{detail:{userId:r,avatarUrl:e,avatarUpdatedAt:t}}))),console.log("[onAvatarUpdate] prefix:",null===e||void 0===e?void 0:e.substring(0,4)),console.log("[ProfilePhotoCard] Triggered immediate avatar update event for user:",r),n(!1)},[a]),m=(0,e.useCallback)(()=>{n(!0)},[]),p=(0,e.useCallback)(()=>{n(!1)},[]);return(0,dt.jsxs)("div",{className:ri,children:[(0,dt.jsx)("h3",{className:ai,children:"Profile Photo"}),(0,dt.jsxs)("div",{className:oi,children:[(0,dt.jsx)("div",{className:ni,children:u?(0,dt.jsx)("img",{src:u,alt:"Profile avatar",className:si,onError:e=>{let{currentTarget:t}=e;t.onerror=null,t.src=d}}):(0,dt.jsx)("img",{src:d,alt:"Default profile avatar",className:si})}),(0,dt.jsx)("div",{className:ii,children:(0,dt.jsxs)("button",{type:"button",onClick:m,className:li,"aria-label":"Change profile photo",children:[(0,dt.jsxs)("svg",{className:ci,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Change Photo"]})})]}),(0,dt.jsx)(Hc,{isOpen:o,onClose:p,onAvatarUpdate:h,currentAvatar:u||d})]})},Vc=t=>{let{skills:r,onChange:a}=t;const[o,n]=(0,e.useState)(""),[s,i]=(0,e.useState)(""),l=(0,e.useCallback)(()=>{const e=o.trim();if(!e)return void i("Please enter a skill");if(e.length>20)return void i("Skill name must be 20 characters or less");if(e.length<2)return void i("Skill name must be at least 2 characters");const t=e.toLowerCase();if(r.some(e=>e.toLowerCase()===t))return void i("This skill already exists");if(r.length>=12)return void i("Maximum 12 skills allowed");const s=[...r,e];a(s),n(""),i("")},[o,r,a]),c=(0,e.useCallback)(e=>{const t=r.filter(t=>t!==e);a(t)},[r,a]),d=(0,e.useCallback)(e=>{"Enter"===e.key&&(e.preventDefault(),l())},[l]),u=(0,e.useCallback)(e=>{n(e.target.value),s&&i("")},[s]);return(0,dt.jsxs)("div",{className:ri,children:[(0,dt.jsx)("h3",{className:ai,children:"Skills"}),(0,dt.jsxs)("div",{className:qi,children:[(0,dt.jsx)("div",{className:Hi,children:r.map((e,t)=>(0,dt.jsxs)("div",{className:Gi,children:[(0,dt.jsx)("span",{className:Vi,children:e}),(0,dt.jsx)("button",{type:"button",onClick:()=>c(e),className:Ji,"aria-label":`Remove ${e} skill`,children:(0,dt.jsx)("svg",{className:Ki,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t))}),(0,dt.jsxs)("div",{className:Yi,children:[(0,dt.jsxs)("div",{className:Zi,children:[(0,dt.jsx)("input",{type:"text",value:o,onChange:u,onKeyPress:d,className:`${Qi} ${s?pi:""}`,placeholder:"Add a skill...",maxLength:20,"aria-describedby":s?"skill-error":"skill-help"}),(0,dt.jsx)("button",{type:"button",onClick:l,className:Xi,disabled:!o.trim()||r.length>=12,"aria-label":"Add skill",children:(0,dt.jsx)("svg",{className:el,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]}),s&&(0,dt.jsx)("div",{id:"skill-error",className:bi,children:s}),(0,dt.jsx)("div",{id:"skill-help",className:tl,children:"Press Enter or click + to add. Maximum 12 skills."})]})]})]})},Jc=[{label:"ArtStation",placeholder:"https://www.artstation.com/yourname"},{label:"Behance",placeholder:"https://www.behance.net/yourname"}],Kc=t=>{let{links:r,onChange:a,onOtherLinksChange:o}=t;const[n,s]=(0,e.useState)(""),[i,l]=(0,e.useState)(""),[c,d]=(0,e.useState)(""),u=e=>{if(!e.trim())return!0;try{const t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch{return!1}},h=(0,e.useCallback)(()=>{const e=n.trim(),t=i.trim();if(!e)return void d("Please enter a website name");if(!t)return void d("Please enter a URL");if(!/^https?:\/\/.+/i.test(t))return void d("Please enter a valid URL starting with http:// or https://");try{const e=new URL(t).hostname.toLowerCase();if((r.otherLinks||[]).some(t=>{try{return new URL(t.url).hostname.toLowerCase()===e}catch{return!1}}))return void d("This website is already added")}catch{return void d("Please enter a valid URL")}if((r.otherLinks||[]).length>=5)return void d("Maximum of 5 links");const a={id:crypto.randomUUID(),label:e,url:t};o([...r.otherLinks||[],a]),s(""),l(""),d("")},[n,i,r,o]),m=(0,e.useCallback)(e=>{o((r.otherLinks||[]).filter(t=>t.id!==e))},[r,o]),p=(0,e.useCallback)(e=>{s(e.label),l(""),d("")},[]),g=e=>{const t=e.toLowerCase();return t.includes("artstation")?(0,dt.jsx)("svg",{className:Ni,viewBox:"0 0 24 24",fill:"currentColor",children:(0,dt.jsx)("path",{d:"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm0 2.25c5.385 0 9.75 4.365 9.75 9.75s-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12 6.615 2.25 12 2.25zm0 3.75c-3.314 0-6 2.686-6 6s2.686 6 6 6 6-2.686 6-6-2.686-6-6-6zm0 2.25c2.071 0 3.75 1.679 3.75 3.75s-1.679 3.75-3.75 3.75S8.25 14.821 8.25 12.75 9.929 9 12 9z"})}):t.includes("behance")?(0,dt.jsx)("svg",{className:Ni,viewBox:"0 0 24 24",fill:"currentColor",children:(0,dt.jsx)("path",{d:"M22 7h-7V5h7v2zm1.726 10c-.442 1.297-2.029 3-5.101 3-3.074 0-5.564-1.729-5.564-5.675 0-3.91 2.561-5.92 5.466-5.92 3.082 0 4.588 1.837 5.038 4.426l.332 1.906H17.19l-.23-1.518c-.245-1.332-1.104-1.804-2.13-1.804-1.245 0-2.916.988-2.916 3.368 0 2.507 1.688 3.716 3.111 3.716 1.149 0 1.955-.518 2.19-1.138h1.701zM11.649 9.413c0-1.288.875-2.013 1.857-2.013.983 0 1.857.725 1.857 2.013 0 1.287-.874 2.013-1.857 2.013-.982 0-1.857-.726-1.857-2.013zM8.14 12.213c0-1.634.893-2.6 2.072-2.6 1.179 0 2.072.966 2.072 2.6 0 1.635-.893 2.6-2.072 2.6-1.179 0-2.072-.965-2.072-2.6z"})}):(0,dt.jsx)("svg",{className:Ni,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9m0 9c-5 0-9-4-9-9s4-9 9-9"})})},f=[{key:"instagram",label:"Instagram URL",placeholder:"https://www.instagram.com/yourusername",icon:(0,dt.jsx)("svg",{className:Ni,viewBox:"0 0 24 24",fill:"currentColor",children:(0,dt.jsx)("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})},{key:"portfolio",label:"Portfolio URL",placeholder:"https://your-portfolio.com",icon:(0,dt.jsx)("svg",{className:Ni,fill:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})})},{key:"discord",label:"Discord URL",placeholder:"https://discord.gg/yourname",icon:(0,dt.jsx)("svg",{className:Ni,viewBox:"0 0 24 24",fill:"currentColor",children:(0,dt.jsx)("path",{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.019 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1568 2.4189Z"})})}];return(0,dt.jsxs)("div",{className:ri,children:[(0,dt.jsx)("h3",{className:ai,children:"Social Links"}),(0,dt.jsxs)("div",{className:Si,children:[(0,dt.jsx)("div",{className:_i,children:f.map(e=>{const t=r[e.key],o="string"===typeof t?t:"";return(0,dt.jsxs)("div",{className:di,children:[(0,dt.jsx)("label",{htmlFor:e.key,className:fi,children:e.label}),(0,dt.jsxs)("div",{className:ki,children:[(0,dt.jsx)("div",{className:ji,children:e.icon}),(0,dt.jsx)("input",{id:e.key,type:"url",value:o,onChange:t=>((e,t)=>{a(e,t)})(e.key,t.target.value),className:`${Ci} ${o&&!u(o)?pi:""}`,placeholder:e.placeholder,"aria-describedby":`${e.key}-error`})]}),o&&!u(o)&&(0,dt.jsx)("div",{id:`${e.key}-error`,className:bi,children:"Please enter a valid URL starting with http:// or https://"})]},e.key)})}),(0,dt.jsxs)("div",{className:_i,children:[(0,dt.jsx)("div",{className:Ii,children:(0,dt.jsx)("h4",{className:Ei,children:"Other Websites"})}),(0,dt.jsx)("div",{className:Pi,children:(r.otherLinks||[]).map(e=>(0,dt.jsxs)("div",{className:Ai,children:[(0,dt.jsx)("div",{className:ji,children:g(e.label)}),(0,dt.jsxs)("div",{className:Ti,children:[(0,dt.jsx)("div",{className:Li,children:e.label}),(0,dt.jsx)("div",{className:Mi,children:e.url})]}),(0,dt.jsx)("button",{type:"button",onClick:()=>m(e.id),className:Di,"aria-label":`Remove ${e.label} website`,children:(0,dt.jsx)("svg",{className:Ki,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},e.id))}),(r.otherLinks||[]).length<5&&(0,dt.jsxs)("div",{className:Ri,children:[(0,dt.jsx)("div",{className:$i,children:(0,dt.jsxs)("div",{className:Fi,children:[(0,dt.jsx)("input",{type:"text",value:n,onChange:e=>{s(e.target.value),d("")},placeholder:"Website name",className:Oi}),(0,dt.jsx)("input",{type:"url",value:i,onChange:e=>{l(e.target.value),d("")},placeholder:"https://example.com",className:Oi}),(0,dt.jsx)("button",{type:"button",onClick:h,className:Ui,disabled:!n.trim()||!i.trim(),children:"Add"})]})}),(0,dt.jsx)("div",{className:zi,children:Jc.map(e=>(0,dt.jsx)("button",{type:"button",onClick:()=>p(e),className:Wi,children:e.label},e.label))}),c&&(0,dt.jsx)("div",{className:bi,children:c})]}),(r.otherLinks||[]).length>=5&&(0,dt.jsx)("div",{className:Bi,children:"Maximum of 5 links reached."})]})]})]})},Yc=()=>{const e=ee(),t=()=>{e("/upload/guidelines")};return(0,dt.jsxs)("div",{className:ri,children:[(0,dt.jsx)("h3",{className:ai,children:"Upload New Work"}),(0,dt.jsxs)("div",{className:`${ul} ${hl}`,onClick:t,style:{cursor:"pointer"},children:[(0,dt.jsx)("svg",{className:ml,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,dt.jsx)("p",{className:pl,children:"Click to upload new work"}),(0,dt.jsx)("p",{className:gl,children:"You'll be redirected to the upload guidelines"}),(0,dt.jsx)("button",{type:"button",className:fl,onClick:t,children:"Upload New Work"})]}),(0,dt.jsxs)("div",{className:vl,children:[(0,dt.jsx)("svg",{className:xl,fill:"currentColor",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,dt.jsx)("span",{children:"Click to start the upload process"})]})]})};var Zc,Qc,Xc,ed;const td=(0,ct.HW)(),rd={fullName:(null===td||void 0===td?void 0:td.name)||"",title:(null===td||void 0===td?void 0:td.role)||"",school:(null===td||void 0===td?void 0:td.school)||"",pronouns:(null===td||void 0===td?void 0:td.pronouns)||"",majors:(null===td||void 0===td?void 0:td.majors)||[],minors:[],bio:(null===td||void 0===td?void 0:td.bio)||"",avatar:(null===td||void 0===td?void 0:td.avatar)||null,socialLinks:{instagram:(null===td||void 0===td||null===(Zc=td.socialLinks)||void 0===Zc?void 0:Zc.instagram)||"",portfolio:(null===td||void 0===td||null===(Qc=td.socialLinks)||void 0===Qc?void 0:Qc.portfolio)||"",discord:(null===td||void 0===td||null===(Xc=td.socialLinks)||void 0===Xc?void 0:Xc.discord)||"",otherLinks:(null===td||void 0===td||null===(ed=td.socialLinks)||void 0===ed?void 0:ed.otherLinks)||[]},skills:(null===td||void 0===td?void 0:td.skills)||[]},ad=()=>{const t=ee(),r={...rd},[a,o]=(0,e.useState)({...r,socialLinks:{...r.socialLinks,otherLinks:[]}});(0,e.useEffect)(()=>{td&&(async()=>{try{const e=(null===td||void 0===td?void 0:td.id)||"alice",t=await(0,zt.E$)(e);t.success&&t.data&&o(e=>({...e,fullName:t.data.fullName,title:t.data.title,school:t.data.school,pronouns:t.data.pronouns,majors:t.data.majors,minors:t.data.minors||[],skills:t.data.skills||[],bio:t.data.bio||"",avatar:t.data.avatar||e.avatar,socialLinks:t.data.socialLinks||e.socialLinks}))}catch(e){console.error("Error loading user profile:",e)}})()},[td]);const[n,s]=(0,e.useState)([]),[i,l]=(0,e.useState)(!1),[c,d]=(0,e.useState)(!1),[u,h]=(0,e.useState)({}),m=(0,e.useCallback)(async()=>{console.log("[EditProfile] Loading portfolio from Supabase...");try{const e=await(0,Er.BD)();if(console.log("[EditProfile] Portfolio load result:",e),e.success){const t=e.data.map(e=>({id:e.id,title:e.title,description:e.description||"",image:e.thumbnailPath||e.imagePaths&&e.imagePaths[0]||"",isPublic:e.isPublic,tags:e.tags||[]}));console.log("[EditProfile] Setting portfolio items:",t),s(t)}else console.log("[EditProfile] Failed to load portfolio, using empty array"),s([])}catch(e){console.error("Error loading portfolio:",e),s([])}},[]);(0,e.useEffect)(()=>{m()},[m]);const p=(0,e.useCallback)(async e=>{try{const t=await(0,Er.zB)(e);t.success?m():console.error("Failed to delete portfolio item:",t.error)}catch(t){console.error("Error deleting portfolio item:",t)}},[m]),g=(0,e.useCallback)(async(e,t)=>{try{const r=await(0,Er.updatePortfolioItem)(e,{isPublic:!t});r.success?m():console.error("Failed to update portfolio visibility:",r.error)}catch(r){console.error("Error updating portfolio visibility:",r)}},[m]),f=(0,e.useCallback)(()=>{const e={};return a.fullName.trim()||(e.fullName="Full name is required"),a.bio.length>280&&(e.bio="Bio must be 280 characters or less"),{isValid:0===Object.keys(e).length,errors:e}},[a]),v=(0,e.useCallback)((e,t)=>{o(r=>({...r,[e]:t})),l(!0)},[]),x=(0,e.useCallback)((e,t)=>{o(r=>({...r,socialLinks:{...r.socialLinks,[e]:t}})),l(!0)},[]),b=(0,e.useCallback)(e=>{o(t=>({...t,socialLinks:{...t.socialLinks,otherLinks:e}})),l(!0)},[]),y=(0,e.useCallback)(e=>{o(t=>({...t,skills:e})),l(!0)},[]),w=(0,e.useCallback)(e=>{o(t=>({...t,majors:e})),l(!0)},[]),k=(0,e.useCallback)(e=>{o(t=>({...t,minors:e})),l(!0)},[]),j=(0,e.useCallback)(e=>{s(e)},[]),N=(0,e.useCallback)(()=>{o(rd),m(),l(!1),h({})},[m]),C=(0,e.useCallback)(async()=>{const e=f();if(h(e.errors),e.isValid)try{const e=(null===td||void 0===td?void 0:td.id)||"alice",n=await(0,zt.Lt)(e,{fullName:a.fullName,title:a.title,school:a.school,pronouns:a.pronouns,majors:a.majors,minors:a.minors||[],skills:a.skills||[],bio:a.bio||"",avatar:a.avatar||null,socialLinks:a.socialLinks});if(n.success){if(console.log("Profile saved successfully:",n.data),(0,Lr.Y1)(["artist",e]),a.avatar&&a.avatar.startsWith("data:image/")){const n=(new Date).toISOString();if("undefined"!==typeof window){var t,r;(0,Us.Bx)(e);const s=(0,Us.fF)();console.log("[EditProfile] localStorage status:",s),console.log("[EditProfile] Debug - localStorage keys:",Object.keys(localStorage)),console.log("[EditProfile] Debug - avatar data saved:",{userId:e,avatarUrl:(null===(t=a.avatar)||void 0===t?void 0:t.substring(0,50))+"...",avatarUpdatedAt:n,avatarSize:(null===(r=a.avatar)||void 0===r?void 0:r.length)||0,browser:navigator.userAgent});try{localStorage.removeItem(`tag.avatars.${e}`),localStorage.removeItem(`tag.avatar.${e}`);const t=await zs.A.storeAvatar(e,a.avatar);console.log("[EditProfile] Re-stored avatar in IndexedDB:",t);const r={avatarUrl:a.avatar,timestamp:Date.now()};localStorage.setItem(`tag.avatars.${e}`,JSON.stringify(r)),console.log("[EditProfile] Re-stored avatar in localStorage for top-right display")}catch(o){console.error("[EditProfile] Error re-storing avatar:",o)}window.dispatchEvent(new CustomEvent("avatar:updated",{detail:{userId:e,avatarUrl:a.avatar,avatarUpdatedAt:n}}))}console.log("[EditProfile] Triggered avatar update event for user:",e)}l(!1),d(!0),setTimeout(()=>{d(!1)},3e3)}else console.error("Failed to save profile:",n.error)}catch(o){console.error("Error saving profile:",o)}},[a,n,f,td]),S=(0,e.useCallback)(()=>{t(-1)},[t]),_=(0,e.useCallback)(e=>{if(console.log("[EditProfile] handleAvatarChange called with:",typeof e),"string"===typeof e)console.log("[EditProfile] Setting new avatar:",null===e||void 0===e?void 0:e.substring(0,30)),console.log("[EditProfile] Avatar type:",typeof e),o(t=>({...t,avatar:e})),l(!0);else if(e instanceof File){const t=new FileReader;t.onload=e=>{var t;const r=null===(t=e.target)||void 0===t?void 0:t.result;console.log("[EditProfile] Converted File to data URL:",null===r||void 0===r?void 0:r.substring(0,30)),o(e=>({...e,avatar:r})),l(!0)},t.readAsDataURL(e)}},[]);return(0,dt.jsxs)("div",{className:Ws,children:[(0,dt.jsxs)("div",{className:Bs,children:[(0,dt.jsxs)("div",{className:qs,children:[(0,dt.jsxs)("button",{onClick:S,className:Hs,"aria-label":"Go back",children:[(0,dt.jsx)("svg",{className:Gs,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),(0,dt.jsx)("h1",{className:Vs,children:"Edit Profile"})]}),(0,dt.jsxs)("div",{className:Js,children:[(0,dt.jsx)("button",{onClick:N,className:Ks,disabled:!i,children:"Cancel"}),(0,dt.jsx)("button",{onClick:C,className:Ys,disabled:!i,children:"Save Changes"})]})]}),c&&(0,dt.jsxs)("div",{className:Zs,children:[(0,dt.jsx)("svg",{className:Qs,fill:"currentColor",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Saved successfully!"]}),(0,dt.jsxs)("div",{className:Xs,children:[(0,dt.jsxs)("div",{className:ei,children:[(0,dt.jsx)(Gc,{avatar:a.avatar,onAvatarChange:_}),(0,dt.jsx)(ac,{data:a,onChange:v,onMajorsChange:w,onMinorsChange:k,errors:u}),(0,dt.jsx)(Kc,{links:a.socialLinks,onChange:x,onOtherLinksChange:b})]}),(0,dt.jsxs)("div",{className:ti,children:[(0,dt.jsx)(Vc,{skills:a.skills,onChange:y}),(0,dt.jsx)(Yc,{}),(0,dt.jsx)(nc,{items:n,onChange:j,onDelete:p,onToggleVisibility:g})]})]})]})};var od=r(337);const nd="tag_service_data",sd=async e=>{try{const r=["alice","bryan","alex"];for(const a of r){const r=`portfolio_${a}`,o=await Ht.IG.getItem(r);if(o)try{const t=JSON.parse(o);if(Array.isArray(t)){const r=t.find(t=>t.id===e);if(r){const e=Kt.o1[a];return{...r,userId:a,authorName:(null===e||void 0===e?void 0:e.displayName)||a}}}}catch(t){console.warn(`Failed to parse portfolio data for ${a}:`,t)}}return null}catch(r){return console.error("Error getting portfolio data by ID:",r),null}},id=async()=>{await(async()=>{if(!await Ht.IG.getItem(nd)){const e={tagStats:{design:{works:15,users:8,projects:3},illustration:{works:12,users:6,projects:2},photography:{works:8,users:4,projects:1},"3d":{works:6,users:3,projects:2},animation:{works:4,users:2,projects:1},ui:{works:10,users:5,projects:4},ux:{works:7,users:4,projects:3},branding:{works:9,users:5,projects:2},typography:{works:5,users:3,projects:1},"digital-art":{works:11,users:6,projects:2},photo:{works:1,users:1,projects:0},landscape:{works:1,users:1,projects:0}},workTags:{work1:["design","ui","branding"],work2:["illustration","digital-art"],work3:["photography","design"],work4:["3d","animation"],work5:["ux","ui","design"],pf_alice_01:["photo","landscape"],pf_bryan_01:["illustration","digital-art"],pf_alex_01:["design","ui"]},userTags:{alex:["design","ui","ux"],bryan:["illustration","digital-art","typography"],alice:["photography","design","branding","photo","landscape"]},projectTags:{project1:["design","ui","branding"],project2:["illustration","digital-art"],project3:["3d","animation"]}};await Ht.IG.setItem(nd,JSON.stringify(e))}})();const e=await Ht.IG.getItem(nd);return e?JSON.parse(e):null},ld=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300;return new Promise(t=>setTimeout(t,e))},cd=()=>{const{slug:t}=te(),[r,a]=(ee(),(0,e.useState)(null)),[o,n]=(0,e.useState)([]),[s,i]=(0,e.useState)(!0),[l,c]=(0,e.useState)(null),[d,u]=(0,e.useState)(!0),h=async()=>{try{const e=await(async e=>{await ld();let t=0;const r=["alice","bryan","alex"];for(const n of r){const r=`portfolio_${n}`,a=await Ht.IG.getItem(r);if(a)try{const r=JSON.parse(a);if(Array.isArray(r))for(const a of r)a.tags&&a.tags.some(t=>t.toLowerCase()===e.toLowerCase()||t.toLowerCase().includes(e.toLowerCase()))&&t++}catch(o){console.warn(`Failed to parse portfolio data for ${n}:`,o)}}if(0===t){var a;const t=await id();return(null===t||void 0===t||null===(a=t.tagStats)||void 0===a?void 0:a[e])||{works:0,users:0,projects:0}}return{works:t,users:0,projects:0}})(t);a(e)}catch(e){console.error("Error loading tag stats:",e)}},m=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const r=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await ld();const{limit:r=10,cursor:a=null}=t,o=[],n=["alice","bryan","alex"];for(const u of n){const t=`portfolio_${u}`,r=await Ht.IG.getItem(t);if(r)try{const t=JSON.parse(r);if(Array.isArray(t)){const r=Kt.o1[u];for(const a of t)if(a.tags&&a.tags.some(t=>t.toLowerCase()===e.toLowerCase()||t.toLowerCase().includes(e.toLowerCase()))){let t="";a.imageKey?t=await od.default.getImageUrl(a.imageKey):a.thumbnailPath?t=await od.default.getImageUrl(a.thumbnailPath):a.imagePaths&&a.imagePaths[0]&&(t=await od.default.getImageUrl(a.imagePaths[0])),o.push({id:a.id,title:a.title,description:a.description||`Tagged with #${e}`,author:{id:u,name:(null===r||void 0===r?void 0:r.displayName)||u},image:t||""})}}}catch(d){console.warn(`Failed to parse portfolio data for ${u}:`,d)}}if(0===o.length){const t=await id(),r=Object.entries((null===t||void 0===t?void 0:t.workTags)||{}).filter(t=>{let[r,a]=t;return a.includes(e)}).map(e=>{let[t]=e;return t});for(const a of r){const t=await sd(a);if(t){let r="";t.imageKey?r=await od.default.getImageUrl(t.imageKey):t.thumbnailPath?r=await od.default.getImageUrl(t.thumbnailPath):t.imagePaths&&t.imagePaths[0]&&(r=await od.default.getImageUrl(t.imagePaths[0])),o.push({id:t.id,title:t.title,description:t.description||`Tagged with #${e}`,author:{id:t.userId,name:t.authorName},image:r||""})}}}const s=a?parseInt(a):0,i=s+r,l=o.slice(s,i),c=i<o.length;return{items:l,hasMore:c,cursor:c?i.toString():null}}(t,{limit:12,cursor:e});n(e?e=>[...e,...r.items]:r.items),c(r.cursor),u(r.hasMore)}catch(r){console.error("Error loading works:",r)}};return(0,e.useEffect)(()=>{(async()=>{i(!0),await Promise.all([h(),m()]),i(!1)})()},[t]),s?(0,dt.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,dt.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading tag content..."})]})}):(0,dt.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,dt.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,dt.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:["#",t]}),r&&(0,dt.jsxs)("p",{className:"text-gray-600 mt-2",children:[r.works," works"]})]})})}),(0,dt.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:o.map(e=>(0,dt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow cursor-pointer",onClick:()=>window.open(`/work/${e.id}`,"_blank"),children:[(0,dt.jsx)("div",{className:"aspect-w-16 aspect-h-9 bg-gray-200 rounded-t-lg",children:(0,dt.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-48 object-cover rounded-t-lg"})}),(0,dt.jsxs)("div",{className:"p-4",children:[(0,dt.jsx)("h3",{className:"font-medium text-gray-900 truncate",children:e.title}),(0,dt.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["by ",e.author.name]})]})]},e.id))}),d&&(0,dt.jsx)("div",{className:"text-center mt-8",children:(0,dt.jsx)("button",{onClick:()=>{d&&m(l)},className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700",children:"Load More Works"})})]})})]})},dd=()=>(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsx)(Ja,{}),(0,dt.jsx)(Qr,{}),(0,dt.jsx)(Ba,{}),(0,dt.jsx)(Va,{})]}),ud=()=>{const{navigateToCollaboration:e,navigateToMilestone:t}=kr();return(0,dt.jsxs)(be,{children:[(0,dt.jsx)(ve,{path:"/login",element:(0,dt.jsx)(Ka,{})}),(0,dt.jsx)(ve,{path:"/register",element:(0,dt.jsx)(So,{})}),(0,dt.jsx)(ve,{path:"/",element:(0,dt.jsx)(yo,{children:(0,dt.jsx)(dd,{})})}),(0,dt.jsx)(ve,{path:"/me",element:(0,dt.jsx)(yo,{children:(0,dt.jsx)(Zr,{})})}),(0,dt.jsx)(ve,{path:"/work/:id",element:(0,dt.jsx)(yo,{children:(0,dt.jsx)(bs,{})})}),(0,dt.jsx)(ve,{path:"/artist/:id",element:(0,dt.jsx)(yo,{children:(0,dt.jsx)(Zr,{})})}),(0,dt.jsx)(ve,{path:"/tagme",element:(0,dt.jsx)(yo,{children:(0,dt.jsx)(Uo,{onCollaborationClick:t=>{e(t)},onMilestoneClick:e=>{t(e)}})})}),(0,dt.jsx)(ve,{path:"/tagme/milestone/:id",element:(0,dt.jsx)(yo,{children:(0,dt.jsx)(oo,{})})}),(0,dt.jsx)(ve,{path:"/tagme/collaboration/:id",element:(0,dt.jsx)(yo,{children:(0,dt.jsx)(ja,{})})}),(0,dt.jsx)(ve,{path:"/tagme/co-future-2025",element:(0,dt.jsx)(Os,{})}),(0,dt.jsx)(ve,{path:"/upload/guidelines",element:(0,dt.jsx)(sn,{})}),(0,dt.jsx)(ve,{path:"/upload/form",element:(0,dt.jsx)(yo,{children:(0,dt.jsx)(ln,{children:(0,dt.jsx)(Fn,{})})})}),(0,dt.jsx)(ve,{path:"/upload",element:(0,dt.jsx)(sn,{})}),(0,dt.jsx)(ve,{path:"/notifications",element:(0,dt.jsx)(yo,{children:(0,dt.jsx)(bo,{})})}),(0,dt.jsx)(ve,{path:"/notification-test",element:(0,dt.jsx)(yo,{children:(0,dt.jsx)(Wo,{})})}),(0,dt.jsx)(ve,{path:"/settings/edit-profile",element:(0,dt.jsx)(yo,{children:(0,dt.jsx)(ad,{})})}),(0,dt.jsx)(ve,{path:"/test-mock-api",element:(0,dt.jsx)(yo,{children:(0,dt.jsx)(Bo,{})})}),(0,dt.jsx)(ve,{path:"/t/:slug",element:(0,dt.jsx)(yo,{children:(0,dt.jsx)(cd,{})})}),(0,dt.jsx)(ve,{path:"*",element:(0,dt.jsx)(fe,{to:"/",replace:!0})})]})};function hd(){const{state:e}=pr();return e.isInitialized?(0,dt.jsxs)(et,{children:[(0,dt.jsx)(fr,{}),(0,dt.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,dt.jsx)(Nr,{}),(0,dt.jsxs)("main",{className:"pt-16",children:[(0,dt.jsx)(gr,{}),(0,dt.jsx)(ud,{})]})]})]}):(0,dt.jsx)(br,{})}const md=function(){return(0,dt.jsx)(mt,{children:(0,dt.jsx)(mr,{children:(0,dt.jsx)(hd,{})})})};console.log("\ud83d\udd27 \u5f53\u524d\u4f7f\u7528 Mock API \u6a21\u5f0f"),console.log("\ud83d\udca1 \u4f7f\u7528 localStorage \u6a21\u62df\u540e\u7aef\u529f\u80fd"),console.log("\ud83d\udcdd \u4e0a\u4f20\u548c\u5c55\u793a\u6d41\u7a0b\u5df2\u5b8c\u5168\u8dd1\u901a");t.createRoot(document.getElementById("root")).render((0,dt.jsx)(e.StrictMode,{children:(0,dt.jsx)(md,{})}))})()})();
//# sourceMappingURL=main.5140d3b0.js.map