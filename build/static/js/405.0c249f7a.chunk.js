"use strict";(self.webpackChunktag_project=self.webpackChunktag_project||[]).push([[405],{405:(r,o,s)=>{s.d(o,{checkSupabaseConnection:()=>u,getProfile:()=>i,saveProfile:()=>t});var a=s(51),e=s(32);const i=async r=>{try{console.log("[Supabase Profile] Getting profile for user: ".concat(r));if(!f(r))return console.log("[Supabase Profile] Mock user ID detected: ".concat(r,", returning default profile")),{success:!0,data:c(r)};const{data:o,error:s}=await e.ND.from("profiles").select("*").eq("id",r).single();if(s){if("PGRST116"===s.code)return console.log("[Supabase Profile] Profile not found for user: ".concat(r,", returning default")),{success:!0,data:c(r)};throw s}const a=l(o);return console.log("[Supabase Profile] Successfully retrieved profile for user: ".concat(r)),{success:!0,data:a}}catch(o){return console.error("[Supabase Profile] Error getting profile for user ".concat(r,":"),o),{success:!1,error:o.message}}},t=async(r,o)=>{try{console.log("[Supabase Profile] Saving profile for user: ".concat(r));if(!f(r))return console.log("[Supabase Profile] Mock user ID detected: ".concat(r,", cannot save to Supabase")),{success:!1,error:"Mock user ID cannot be saved to Supabase"};const s=n(o),{data:i,error:t}=await e.ND.from("profiles").upsert((0,a.A)({id:r},s),{onConflict:"id"}).select().single();if(t)throw t;return console.log("[Supabase Profile] Successfully saved profile for user: ".concat(r)),{success:!0,data:l(i)}}catch(s){return console.error("[Supabase Profile] Error saving profile for user ".concat(r,":"),s),{success:!1,error:s.message}}},l=r=>{var o,s,a,e;return r?{id:r.id,fullName:r.full_name||"",title:r.title||"Artist",school:r.school||"",pronouns:r.pronouns||"",majors:Array.isArray(r.majors)?r.majors:[],minors:Array.isArray(r.minors)?r.minors:[],skills:Array.isArray(r.skills)?r.skills:[],bio:r.bio||"",socialLinks:{instagram:(null===(o=r.social_links)||void 0===o?void 0:o.instagram)||"",portfolio:(null===(s=r.social_links)||void 0===s?void 0:s.portfolio)||"",discord:(null===(a=r.social_links)||void 0===a?void 0:a.discord)||"",otherLinks:Array.isArray(null===(e=r.social_links)||void 0===e?void 0:e.otherLinks)?r.social_links.otherLinks:[]},avatar:r.avatar_url||"",createdAt:r.created_at,updatedAt:r.updated_at}:null},n=r=>{var o,s,a,e;return{full_name:r.fullName||"",title:r.title||"Artist",school:r.school||"",pronouns:r.pronouns||"",majors:Array.isArray(r.majors)?r.majors:[],minors:Array.isArray(r.minors)?r.minors:[],skills:Array.isArray(r.skills)?r.skills:[],bio:r.bio||"",social_links:{instagram:(null===(o=r.socialLinks)||void 0===o?void 0:o.instagram)||"",portfolio:(null===(s=r.socialLinks)||void 0===s?void 0:s.portfolio)||"",discord:(null===(a=r.socialLinks)||void 0===a?void 0:a.discord)||"",otherLinks:Array.isArray(null===(e=r.socialLinks)||void 0===e?void 0:e.otherLinks)?r.socialLinks.otherLinks:[]},avatar_url:r.avatar||""}},c=r=>({id:r,fullName:"",title:"Artist",school:"",pronouns:"",majors:[],minors:[],skills:[],bio:"",socialLinks:{instagram:"",portfolio:"",discord:"",otherLinks:[]},avatar:"",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}),u=async()=>{try{const{data:r,error:o}=await e.ND.from("profiles").select("id").limit(1);if(o)throw o;return!0}catch(r){return console.warn("[Supabase Profile] Connection check failed:",r.message),!1}},f=r=>/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r)}}]);
//# sourceMappingURL=405.0c249f7a.chunk.js.map