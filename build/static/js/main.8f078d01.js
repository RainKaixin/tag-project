/*! For license information please see main.8f078d01.js.LICENSE.txt */
(()=>{var e={8:(e,t,r)=>{"use strict";r.d(t,{Gr:()=>c,HW:()=>l,WR:()=>i,ou:()=>d});var a=r(179),o=r(915),s=r(420);const n="tag.currentUserId";const i=()=>{try{if("undefined"===typeof window)return"alice";let e=window.localStorage.getItem(n);if(!e){const t=["tag_current_user_id","currentUserId","user_id","tag.userId"];for(const r of t){const t=window.localStorage.getItem(r);if(t){console.log(`[currentUser] Migrating from old key: ${r} = ${t}`),e=t,window.localStorage.setItem(n,t),window.localStorage.removeItem(r);break}}}return e||(console.log("[currentUser] Setting default user ID: alice"),window.localStorage.setItem(n,"alice"),e="alice"),e}catch(e){return console.warn("Failed to get current user ID:",e),"alice"}},l=()=>{const e=i(),t=(0,s.ug)(e);if("undefined"!==typeof window)try{const r=window.localStorage.getItem(`tag.avatars.${e}`);if(r){const e=JSON.parse(r);if(e&&e.avatarUrl)return{...t,avatar:e.avatarUrl}}}catch(a){console.warn("[getCurrentUser] Failed to read avatar data:",a)}const r=(0,o.EP)(e);return r?{...t,avatar:r}:(t.avatar&&(0,o.Ih)(e,t.avatar),t)},c=async e=>{await async function(e){try{if("undefined"===typeof window)return;await a.storage.setItem(n,e)}catch(t){console.warn("Failed to write current user ID:",t)}}(e),"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent("user:changed",{detail:{userId:e}}))},d=()=>{const e=l();return(null===e||void 0===e?void 0:e.avatar)||null}},32:(e,t,r)=>{"use strict";r.d(t,{BO:()=>er,ND:()=>Xt});class a extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",r=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=r}}class o extends a{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class s extends a{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class n extends a{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var i;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(i||(i={}));var l=function(e,t,r,a){return new(r||(r=Promise))(function(o,s){function n(e){try{l(a.next(e))}catch(t){s(t)}}function i(e){try{l(a.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(n,i)}l((a=a.apply(e,t||[])).next())})};class c{constructor(e){let{headers:t={},customFetch:a,region:o=i.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=o,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Promise.resolve().then(r.bind(r,630)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}})(a)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;return l(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:l}=t;let c={},{region:d}=t;d||(d=this.region);const u=new URL(`${this.url}/${e}`);let h;d&&"any"!==d&&(c["x-region"]=d,u.searchParams.set("forceFunctionRegion",d)),l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&("undefined"!==typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=l):"string"===typeof l?(c["Content-Type"]="text/plain",h=l):"undefined"!==typeof FormData&&l instanceof FormData?h=l:(c["Content-Type"]="application/json",h=JSON.stringify(l)));const m=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),a),body:h}).catch(e=>{throw new o(e)}),p=m.headers.get("x-relay-error");if(p&&"true"===p)throw new s(m);if(!m.ok)throw new n(m);let g,f=(null!==(r=m.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return g="application/json"===f?yield m.json():"application/octet-stream"===f?yield m.blob():"text/event-stream"===f?m:"multipart/form-data"===f?yield m.formData():yield m.text(),{data:g,error:null,response:m}}catch(a){return{data:null,error:a,response:a instanceof n||a instanceof s?a.context:void 0}}})}}var d=r(980);const{PostgrestClient:u,PostgrestQueryBuilder:h,PostgrestFilterBuilder:m,PostgrestTransformBuilder:p,PostgrestBuilder:g,PostgrestError:f}=d;const v=class{static detectEnvironment(){var e;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof r.g&&"undefined"!==typeof r.g.WebSocket)return{type:"native",constructor:r.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!==typeof process&&process.versions&&process.versions.node){const e=parseInt(process.versions.node.split(".")[0]);return e>=22?"undefined"!==typeof globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${e} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${e} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},x=1e4;var b,y,w,j,k,N;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(b||(b={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(y||(y={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(w||(w={})),function(e){e.websocket="websocket"}(j||(j={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(k||(k={}));class C{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const a=t.getUint8(1),o=t.getUint8(2);let s=this.HEADER_LENGTH+2;const n=r.decode(e.slice(s,s+a));s+=a;const i=r.decode(e.slice(s,s+o));s+=o;return{ref:null,topic:n,event:i,payload:JSON.parse(r.decode(e.slice(s,e.byteLength)))}}}class S{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(N||(N={}));const _=function(e,t){var r;const a=null!==(r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce((r,o)=>(r[o]=E(o,e,t,a),r),{})},E=(e,t,r,a)=>{const o=t.find(t=>t.name===e),s=null===o||void 0===o?void 0:o.type,n=r[e];return s&&!a.includes(s)?P(s,n):I(n)},P=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return D(t,r)}switch(e){case N.bool:return A(t);case N.float4:case N.float8:case N.int2:case N.int4:case N.int8:case N.numeric:case N.oid:return T(t);case N.json:case N.jsonb:return L(t);case N.timestamp:return M(t);case N.abstime:case N.date:case N.daterange:case N.int4range:case N.int8range:case N.money:case N.reltime:case N.text:case N.time:case N.timestamptz:case N.timetz:case N.tsrange:case N.tstzrange:default:return I(t)}},I=e=>e,A=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},T=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},L=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},D=(e,t)=>{if("string"!==typeof e)return e;const r=e.length-1,a=e[r];if("{"===e[0]&&"}"===a){let a;const s=e.slice(1,r);try{a=JSON.parse("["+s+"]")}catch(o){a=s?s.split(","):[]}return a.map(e=>P(t,e))}return e},M=e=>"string"===typeof e?e.replace(" ","T"):e,R=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class ${constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;this.channel=e,this.event=t,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:r}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var F,O,U,z;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(F||(F={}));class W{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{const{onJoin:t,onLeave:r,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=W.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=W.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},e=>{const{onJoin:t,onLeave:r,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=W.syncDiff(this.state,e,t,r),a())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,a){const o=this.cloneDeep(e),s=this.transformState(t),n={},i={};return this.map(o,(e,t)=>{s[e]||(i[e]=t)}),this.map(s,(e,t)=>{const r=o[e];if(r){const a=t.map(e=>e.presence_ref),o=r.map(e=>e.presence_ref),s=t.filter(e=>o.indexOf(e.presence_ref)<0),l=r.filter(e=>a.indexOf(e.presence_ref)<0);s.length>0&&(n[e]=s),l.length>0&&(i[e]=l)}else n[e]=t}),this.syncDiff(o,{joins:n,leaves:i},r,a)}static syncDiff(e,t,r,a){const{joins:o,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(o,(t,a)=>{var o;const s=null!==(o=e[t])&&void 0!==o?o:[];if(e[t]=this.cloneDeep(a),s.length>0){const r=e[t].map(e=>e.presence_ref),a=s.filter(e=>r.indexOf(e.presence_ref)<0);e[t].unshift(...a)}r(t,s,a)}),this.map(s,(t,r)=>{let o=e[t];if(!o)return;const s=r.map(e=>e.presence_ref);o=o.filter(e=>s.indexOf(e.presence_ref)<0),e[t]=o,a(t,o,r),0===o.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const a=e[r];return t[r]="metas"in a?a.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(O||(O={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(U||(U={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(z||(z={}));class B{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},r=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=y.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new $(this,w.join,this.params,this.timeout),this.rejoinTimer=new S(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=y.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=y.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=y.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=y.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=y.errored,this.rejoinTimer.scheduleTimeout())}),this._on(w.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new W(this),this.broadcastEndpointURL=R(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var r,a;if(this.socket.isConnected()||this.socket.connect(),this.state==y.closed){const{config:{broadcast:o,presence:s,private:n}}=this.params,i=null!==(a=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map(e=>e.filter))&&void 0!==a?a:[],l=!!this.bindings[U.PRESENCE]&&this.bindings[U.PRESENCE].length>0,c={},d={broadcast:o,presence:Object.assign(Object.assign({},s),{enabled:l}),postgres_changes:i,private:n};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this._onError(t=>null===e||void 0===e?void 0:e(z.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(z.CLOSED)),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:r}=t;var a;if(this.socket.setAuth(),void 0!==r){const t=this.bindings.postgres_changes,o=null!==(a=null===t||void 0===t?void 0:t.length)&&void 0!==a?a:0,s=[];for(let a=0;a<o;a++){const o=t[a],{filter:{event:n,schema:i,table:l,filter:c}}=o,d=r&&r[a];if(!d||d.event!==n||d.schema!==i||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=y.errored,void(null===e||void 0===e||e(z.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));s.push(Object.assign(Object.assign({},o),{id:d.id}))}return this.bindings.postgres_changes=s,void(e&&e(z.SUBSCRIBED))}null===e||void 0===e||e(z.SUBSCRIBED)}).receive("error",t=>{this.state=y.errored,null===e||void 0===e||e(z.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(z.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===y.joined&&e===U.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r,a;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var a,o,s;const n=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(s=null===(o=null===(a=this.params)||void 0===a?void 0:a.config)||void 0===o?void 0:o.broadcast)||void 0===s?void 0:s.ack)||r("ok"),n.receive("ok",()=>r("ok")),n.receive("error",()=>r("error")),n.receive("timeout",()=>r("timed out"))});{const{event:s,payload:n}=e,i={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:n,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,i,null!==(r=t.timeout)&&void 0!==r?r:this.timeout);return await(null===(a=e.body)||void 0===a?void 0:a.cancel()),e.ok?"ok":"error"}catch(o){return"AbortError"===o.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=y.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(w.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new $(this,w.leave,{},e),r.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null===r||void 0===r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=y.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const a=new AbortController,o=setTimeout(()=>a.abort(),r),s=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(o),s}_push(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new $(this,e,t,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var a,o;const s=e.toLocaleLowerCase(),{close:n,error:i,leave:l,join:c}=w;if(r&&[n,i,l,c].indexOf(s)>=0&&r!==this._joinRef())return;let d=this._onMessage(s,t,r);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(a=this.bindings.postgres_changes)||void 0===a||a.filter(e=>{var t,r,a;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(a=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===a?void 0:a.toLocaleLowerCase())===s}).map(e=>e.callback(d,r)):null===(o=this.bindings[s])||void 0===o||o.filter(e=>{var r,a,o,n,i,l;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in e){const s=e.id,n=null===(r=e.filter)||void 0===r?void 0:r.event;return s&&(null===(a=t.ids)||void 0===a?void 0:a.includes(s))&&("*"===n||(null===n||void 0===n?void 0:n.toLocaleLowerCase())===(null===(o=t.data)||void 0===o?void 0:o.type.toLocaleLowerCase()))}{const r=null===(i=null===(n=null===e||void 0===e?void 0:e.filter)||void 0===n?void 0:n.event)||void 0===i?void 0:i.toLocaleLowerCase();return"*"===r||r===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===s}).map(e=>{if("object"===typeof d&&"ids"in d){const e=d.data,{schema:t,table:r,commit_timestamp:a,type:o,errors:s}=e,n={schema:t,table:r,commit_timestamp:a,eventType:o,new:{},old:{},errors:s};d=Object.assign(Object.assign({},n),this._getPayloadRecords(e))}e.callback(d,r)})}_isClosed(){return this.state===y.closed}_isJoined(){return this.state===y.joined}_isJoining(){return this.state===y.joining}_isLeaving(){return this.state===y.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const a=e.toLocaleLowerCase(),o={type:a,filter:t,callback:r};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(e=>{var a;return!((null===(a=e.type)||void 0===a?void 0:a.toLocaleLowerCase())===r&&B.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(w.close,{},e)}_onError(e){this._on(w.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=y.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=_(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=_(e.columns,e.old_record)),t}}const q=()=>{},H=25e3,V=10,G=100,J=[1e3,2e3,5e3,1e4];class K{constructor(e,t){var a;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=x,this.transport=null,this.heartbeatIntervalMs=H,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=q,this.ref=0,this.reconnectTimer=null,this.logger=q,this.conn=null,this.sendBuffer=[],this.serializer=new C,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Promise.resolve().then(r.bind(r,630)).then(e=>{let{default:r}=e;return r(...t)}).catch(e=>{throw new Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)})}:fetch),function(){return t(...arguments)}},!(null===(a=null===t||void 0===t?void 0:t.params)||void 0===a?void 0:a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${j.websocket}`,this.httpEndpoint=R(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=v.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case b.connecting:return k.Connecting;case b.open:return k.Open;case b.closing:return k.Closing;default:return k.Closed}}isConnected(){return this.connectionState()===k.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const r=`realtime:${e}`,a=this.getChannels().find(e=>e.topic===r);if(a)return a;{const r=new B(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:r,payload:a,ref:o}=e,s=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${r} (${o})`,a),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},G);this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{"phoenix"===e.topic&&"phx_reply"===e.event&&this.heartbeatCallback("ok"===e.payload.status?"ok":"error"),e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:r,payload:a,ref:o}=e,s=o?`(${o})`:"",n=a.status||"";this.log("receive",`${n} ${t} ${r} ${s}`.trim(),a),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,a,o)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(w.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?";return`${e}${r}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=t||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const r={access_token:e,version:"realtime-js/2.15.1"};e&&t.updateJoinPayload(r),t.joinedOnce&&t._isJoined()&&t._push(w.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new S(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},V)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,a,o,s,n,i,l;if(this.transport=null!==(t=null===e||void 0===e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(r=null===e||void 0===e?void 0:e.timeout)&&void 0!==r?r:x,this.heartbeatIntervalMs=null!==(a=null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&void 0!==a?a:H,this.worker=null!==(o=null===e||void 0===e?void 0:e.worker)&&void 0!==o&&o,this.accessToken=null!==(s=null===e||void 0===e?void 0:e.accessToken)&&void 0!==s?s:null,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),((null===e||void 0===e?void 0:e.logLevel)||(null===e||void 0===e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(n=null===e||void 0===e?void 0:e.reconnectAfterMs)&&void 0!==n?n:e=>J[e-1]||1e4,this.encode=null!==(i=null===e||void 0===e?void 0:e.encode)&&void 0!==i?i:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(l=null===e||void 0===e?void 0:e.decode)&&void 0!==l?l:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===e||void 0===e?void 0:e.workerUrl}}}class Y extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Z(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class Q extends Y{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class X extends Y{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var ee=function(e,t,r,a){return new(r||(r=Promise))(function(o,s){function n(e){try{l(a.next(e))}catch(t){s(t)}}function i(e){try{l(a.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(n,i)}l((a=a.apply(e,t||[])).next())})};const te=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Promise.resolve().then(r.bind(r,630)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}},re=e=>{if(Array.isArray(e))return e.map(e=>re(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[r,a]=e;const o=r.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[o]=re(a)}),t};var ae=function(e,t,r,a){return new(r||(r=Promise))(function(o,s){function n(e){try{l(a.next(e))}catch(t){s(t)}}function i(e){try{l(a.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(n,i)}l((a=a.apply(e,t||[])).next())})};const oe=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),se=(e,t,a)=>ae(void 0,void 0,void 0,function*(){const o=yield ee(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(r.bind(r,630))).Response:Response});e instanceof o&&!(null===a||void 0===a?void 0:a.noResolveJson)?e.json().then(r=>{const a=e.status||500,o=(null===r||void 0===r?void 0:r.statusCode)||a+"";t(new Q(oe(r),a,o))}).catch(e=>{t(new X(oe(e),e))}):t(new X(oe(e),e))}),ne=(e,t,r,a)=>{const o={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&a?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(a)?(o.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),o.body=JSON.stringify(a)):o.body=a,(null===t||void 0===t?void 0:t.duplex)&&(o.duplex=t.duplex),Object.assign(Object.assign({},o),r)):o};function ie(e,t,r,a,o,s){return ae(this,void 0,void 0,function*(){return new Promise((n,i)=>{e(r,ne(t,a,o,s)).then(e=>{if(!e.ok)throw e;return(null===a||void 0===a?void 0:a.noResolveJson)?e:e.json()}).then(e=>n(e)).catch(e=>se(e,i,a))})})}function le(e,t,r,a){return ae(this,void 0,void 0,function*(){return ie(e,"GET",t,r,a)})}function ce(e,t,r,a,o){return ae(this,void 0,void 0,function*(){return ie(e,"POST",t,a,o,r)})}function de(e,t,r,a,o){return ae(this,void 0,void 0,function*(){return ie(e,"PUT",t,a,o,r)})}function ue(e,t,r,a,o){return ae(this,void 0,void 0,function*(){return ie(e,"DELETE",t,a,o,r)})}var he=function(e,t,r,a){return new(r||(r=Promise))(function(o,s){function n(e){try{l(a.next(e))}catch(t){s(t)}}function i(e){try{l(a.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(n,i)}l((a=a.apply(e,t||[])).next())})};const me={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},pe={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ge{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;this.url=e,this.headers=t,this.bucketId=r,this.fetch=te(a)}uploadOrUpdate(e,t,r,a){return he(this,void 0,void 0,function*(){try{let o;const s=Object.assign(Object.assign({},pe),a);let n=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(s.upsert)});const i=s.metadata;"undefined"!==typeof Blob&&r instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),i&&o.append("metadata",this.encodeMetadata(i)),o.append("",r)):"undefined"!==typeof FormData&&r instanceof FormData?(o=r,o.append("cacheControl",s.cacheControl),i&&o.append("metadata",this.encodeMetadata(i))):(o=r,n["cache-control"]=`max-age=${s.cacheControl}`,n["content-type"]=s.contentType,i&&(n["x-metadata"]=this.toBase64(this.encodeMetadata(i)))),(null===a||void 0===a?void 0:a.headers)&&(n=Object.assign(Object.assign({},n),a.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield("PUT"==e?de:ce)(this.fetch,`${this.url}/object/${c}`,o,Object.assign({headers:n},(null===s||void 0===s?void 0:s.duplex)?{duplex:s.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(o){if(Z(o))return{data:null,error:o};throw o}})}upload(e,t,r){return he(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,a){return he(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),s=this._getFinalPath(o),n=new URL(this.url+`/object/upload/sign/${s}`);n.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:pe.upsert},a),s=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&r instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!==typeof FormData&&r instanceof FormData?(e=r,e.append("cacheControl",t.cacheControl)):(e=r,s["cache-control"]=`max-age=${t.cacheControl}`,s["content-type"]=t.contentType);return{data:{path:o,fullPath:(yield de(this.fetch,n.toString(),e,{headers:s})).Key},error:null}}catch(i){if(Z(i))return{data:null,error:i};throw i}})}createSignedUploadUrl(e,t){return he(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const a=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(a["x-upsert"]="true");const o=yield ce(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),s=new URL(this.url+o.url),n=s.searchParams.get("token");if(!n)throw new Y("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:n},error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}})}update(e,t,r){return he(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return he(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===r||void 0===r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(Z(a))return{data:null,error:a};throw a}})}copy(e,t,r){return he(this,void 0,void 0,function*(){try{return{data:{path:(yield ce(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===r||void 0===r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(Z(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,r){return he(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),o=yield ce(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},(null===r||void 0===r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});const s=(null===r||void 0===r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${s}`)},{data:o,error:null}}catch(a){if(Z(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,r){return he(this,void 0,void 0,function*(){try{const a=yield ce(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=(null===r||void 0===r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:a.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${o}`):null})),error:null}}catch(a){if(Z(a))return{data:null,error:a};throw a}})}download(e,t){return he(this,void 0,void 0,function*(){const r="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",a=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),o=a?`?${a}`:"";try{const t=this._getFinalPath(e),a=yield le(this.fetch,`${this.url}/${r}/${t}${o}`,{headers:this.headers,noResolveJson:!0});return{data:yield a.blob(),error:null}}catch(s){if(Z(s))return{data:null,error:s};throw s}})}info(e){return he(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield le(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:re(e),error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}})}exists(e){return he(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,r,a){return ae(this,void 0,void 0,function*(){return ie(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),a)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Z(r)&&r instanceof X){const e=r.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),a=[],o=(null===t||void 0===t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==o&&a.push(o);const s="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",n=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==n&&a.push(n);let i=a.join("&");return""!==i&&(i=`?${i}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${r}${i}`)}}}remove(e){return he(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Z(t))return{data:null,error:t};throw t}})}list(e,t,r){return he(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},me),t),{prefix:e||""});return{data:yield ce(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(Z(a))return{data:null,error:a};throw a}})}listV2(e,t){return he(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield ce(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const fe={"X-Client-Info":"storage-js/2.11.0"};var ve=function(e,t,r,a){return new(r||(r=Promise))(function(o,s){function n(e){try{l(a.next(e))}catch(t){s(t)}}function i(e){try{l(a.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(n,i)}l((a=a.apply(e,t||[])).next())})};class xe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;const o=new URL(e);if(null===a||void 0===a?void 0:a.useNewHostname){/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase."))}this.url=o.href,this.headers=Object.assign(Object.assign({},fe),t),this.fetch=te(r)}listBuckets(){return ve(this,void 0,void 0,function*(){try{return{data:yield le(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Z(e))return{data:null,error:e};throw e}})}getBucket(e){return ve(this,void 0,void 0,function*(){try{return{data:yield le(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Z(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return ve(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return ve(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ve(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Z(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ve(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Z(t))return{data:null,error:t};throw t}})}}class be extends xe{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new ge(this.url,this.headers,e,this.fetch)}}let ye="";ye="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const we={headers:{"X-Client-Info":`supabase-js-${ye}/2.55.0`}},je={schema:"public"},ke={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ne={};var Ce=r(630),Se=function(e,t,r,a){return new(r||(r=Promise))(function(o,s){function n(e){try{l(a.next(e))}catch(t){s(t)}}function i(e){try{l(a.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(n,i)}l((a=a.apply(e,t||[])).next())})};const _e=e=>{let t;return t=e||("undefined"===typeof fetch?Ce.default:fetch),function(){return t(...arguments)}},Ee=(e,t,r)=>{const a=_e(r),o="undefined"===typeof Headers?Ce.Headers:Headers;return(r,s)=>Se(void 0,void 0,void 0,function*(){var n;const i=null!==(n=yield t())&&void 0!==n?n:e;let l=new o(null===s||void 0===s?void 0:s.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${i}`),a(r,Object.assign(Object.assign({},s),{headers:l}))})};var Pe=function(e,t,r,a){return new(r||(r=Promise))(function(o,s){function n(e){try{l(a.next(e))}catch(t){s(t)}}function i(e){try{l(a.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(n,i)}l((a=a.apply(e,t||[])).next())})};const Ie="2.71.1",Ae=3e4,Te=9e4,Le={"X-Client-Info":`gotrue-js/${Ie}`},De="X-Supabase-Api-Version",Me={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Re=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class $e extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Fe(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class Oe extends $e{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class Ue extends $e{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ze extends $e{constructor(e,t,r,a){super(e,r,a),this.name=t,this.status=r}}class We extends ze{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Be extends ze{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class qe extends ze{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class He extends ze{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ve extends ze{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ge extends ze{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Je(e){return Fe(e)&&"AuthRetryableFetchError"===e.name}class Ke extends ze{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Ye extends ze{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ze="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Qe=" \t\n\r=".split(""),Xe=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Qe.length;t+=1)e[Qe[t].charCodeAt(0)]=-2;for(let t=0;t<Ze.length;t+=1)e[Ze[t].charCodeAt(0)]=t;return e})();function et(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Ze[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Ze[e]),t.queuedBits-=6}}function tt(e,t,r){const a=Xe[e];if(!(a>-1)){if(-2===a)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function rt(e){const t=[],r=e=>{t.push(String.fromCodePoint(e))},a={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},s=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return void r(e);for(let r=1;r<6;r+=1)if(0===(e>>7-r&1)){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,a,r)};for(let n=0;n<e.length;n+=1)tt(e.charCodeAt(n),o,s);return t.join("")}function at(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function ot(e,t){for(let r=0;r<e.length;r+=1){let a=e.charCodeAt(r);if(a>55295&&a<=56319){const t=1024*(a-55296)&65535;a=65536+(e.charCodeAt(r+1)-56320&65535|t),r+=1}at(a,t)}}function st(e){const t=[],r={queue:0,queuedBits:0},a=e=>{t.push(e)};for(let o=0;o<e.length;o+=1)tt(e.charCodeAt(o),r,a);return new Uint8Array(t)}function nt(e){const t=[],r={queue:0,queuedBits:0},a=e=>{t.push(e)};return e.forEach(e=>et(e,r,a)),et(null,r,a),t.join("")}const it=()=>"undefined"!==typeof window&&"undefined"!==typeof document,lt={tested:!1,writable:!1},ct=()=>{if(!it())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(lt.tested)return lt.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),lt.tested=!0,lt.writable=!0}catch(t){lt.tested=!0,lt.writable=!1}return lt.writable};const dt=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Promise.resolve().then(r.bind(r,630)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}},ut=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},ht=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(a){return r}},mt=async(e,t)=>{await e.removeItem(t)};class pt{constructor(){this.promise=new pt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function gt(e){const t=e.split(".");if(3!==t.length)throw new Ye("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Re.test(t[r]))throw new Ye("JWT not in base64url format");return{header:JSON.parse(rt(t[0])),payload:JSON.parse(rt(t[1])),signature:st(t[2]),raw:{header:t[0],payload:t[1]}}}function ft(e){return("0"+e.toString(16)).substr(-2)}async function vt(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(r);return Array.from(a).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xt(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let r="";for(let a=0;a<56;a++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,ft).join("")}();let o=a;r&&(o+="/PASSWORD_RECOVERY"),await ut(e,`${t}-code-verifier`,o);const s=await vt(a);return[s,a===s?"plain":"s256"]}pt.promiseConstructor=Promise;const bt=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const yt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wt(e){if(!yt.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function jt(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function kt(e){return JSON.parse(JSON.stringify(e))}var Nt=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(r[a[o]]=e[a[o]])}return r};const Ct=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),St=[502,503,504];async function _t(e){var t,r;if(!("object"===typeof(r=e)&&null!==r&&"status"in r&&"ok"in r&&"json"in r&&"function"===typeof r.json))throw new Ge(Ct(e),0);if(St.includes(e.status))throw new Ge(Ct(e),e.status);let a,o;try{a=await e.json()}catch(n){throw new Ue(Ct(n),n)}const s=function(e){const t=e.headers.get(De);if(!t)return null;if(!t.match(bt))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(n){return null}}(e);if(s&&s.getTime()>=Me.timestamp&&"object"===typeof a&&a&&"string"===typeof a.code?o=a.code:"object"===typeof a&&a&&"string"===typeof a.error_code&&(o=a.error_code),o){if("weak_password"===o)throw new Ke(Ct(a),e.status,(null===(t=a.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===o)throw new We}else if("object"===typeof a&&a&&"object"===typeof a.weak_password&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new Ke(Ct(a),e.status,a.weak_password.reasons);throw new Oe(Ct(a),e.status||500,o)}async function Et(e,t,r,a){var o;const s=Object.assign({},null===a||void 0===a?void 0:a.headers);s[De]||(s[De]=Me.name),(null===a||void 0===a?void 0:a.jwt)&&(s.Authorization=`Bearer ${a.jwt}`);const n=null!==(o=null===a||void 0===a?void 0:a.query)&&void 0!==o?o:{};(null===a||void 0===a?void 0:a.redirectTo)&&(n.redirect_to=a.redirectTo);const i=Object.keys(n).length?"?"+new URLSearchParams(n).toString():"",l=await async function(e,t,r,a,o,s){const n=((e,t,r,a)=>{const o={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),o.body=JSON.stringify(a),Object.assign(Object.assign({},o),r))})(t,a,o,s);let i;try{i=await e(r,Object.assign({},n))}catch(l){throw console.error(l),new Ge(Ct(l),0)}i.ok||await _t(i);if(null===a||void 0===a?void 0:a.noResolveJson)return i;try{return await i.json()}catch(l){await _t(l)}}(e,t,r+i,{headers:s,noResolveJson:null===a||void 0===a?void 0:a.noResolveJson},{},null===a||void 0===a?void 0:a.body);return(null===a||void 0===a?void 0:a.xform)?null===a||void 0===a?void 0:a.xform(l):{data:Object.assign({},l),error:null}}function Pt(e){var t;let r=null;var a;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=(a=e.expires_in,Math.round(Date.now()/1e3)+a)));return{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function It(e){const t=Pt(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function At(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Tt(e){return{data:e,error:null}}function Lt(e){const{action_link:t,email_otp:r,hashed_token:a,redirect_to:o,verification_type:s}=e,n=Nt(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:a,redirect_to:o,verification_type:s},user:Object.assign({},n)},error:null}}function Dt(e){return e}const Mt=["global","local","others"];var Rt=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(r[a[o]]=e[a[o]])}return r};class $t{constructor(e){let{url:t="",headers:r={},fetch:a}=e;this.url=t,this.headers=r,this.fetch=dt(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mt[0];if(Mt.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Mt.join(", ")}`);try{return await Et(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await Et(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:At})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Rt(e,["options"]),a=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(a.new_email=null===r||void 0===r?void 0:r.newEmail,delete a.newEmail),await Et(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Lt,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(Fe(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Et(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:At})}catch(t){if(Fe(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,a,o,s,n,i;try{const l={nextPage:null,lastPage:0,total:0},c=await Et(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(o=null===(a=null===e||void 0===e?void 0:e.perPage)||void 0===a?void 0:a.toString())&&void 0!==o?o:""},xform:Dt});if(c.error)throw c.error;const d=await c.json(),u=null!==(s=c.headers.get("x-total-count"))&&void 0!==s?s:0,h=null!==(i=null===(n=c.headers.get("link"))||void 0===n?void 0:n.split(","))&&void 0!==i?i:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(Fe(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){wt(e);try{return await Et(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:At})}catch(t){if(Fe(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){wt(e);try{return await Et(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:At})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];wt(e);try{return await Et(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:At})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){wt(e.userId);try{const{data:t,error:r}=await Et(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(t){if(Fe(t))return{data:null,error:t};throw t}}async _deleteFactor(e){wt(e.userId),wt(e.id);try{return{data:await Et(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Fe(t))return{data:null,error:t};throw t}}}function Ft(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Ot=!!(globalThis&&ct()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Ut extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class zt extends Ut{}async function Wt(e,t,r){Ot&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),Ot&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async a=>{if(!a){if(0===t)throw Ot&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new zt(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ot)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}Ot&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Ot&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const Bt={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Le,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function qt(e,t,r){return await r()}const Ht={};class Vt{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Vt.nextInstanceID,Vt.nextInstanceID+=1,this.instanceID>0&&it()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},Bt),e);if(this.logDebugMessages=!!a.debug,"function"===typeof a.debug&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new $t({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=dt(a.fetch),this.lock=a.lock||qt,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:it()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Wt:this.lock=qt,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:ct()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ft(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Ft(this.memoryStorage)),it()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=Ht[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Ht[this.storageKey]=Object.assign(Object.assign({},Ht[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Ht[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ht[this.storageKey]=Object.assign(Object.assign({},Ht[this.storageKey]),{cachedAt:e})}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger(`GoTrueClient@${this.instanceID} (${Ie}) ${(new Date).toISOString()}`,...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(a){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),it()&&this.detectSessionInUrl&&"none"!==r){const{data:a,error:o}=await this._getSessionFromURL(t,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),function(e){return Fe(e)&&"AuthImplicitGrantRedirectError"===e.name}(o)){const t=null===(e=o.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:o}}return await this._removeSession(),{error:o}}const{session:s,redirectType:n}=a;return this._debug("#_initialize()","detected session in URL",s,"redirect type",n),await this._saveSession(s),setTimeout(async()=>{"recovery"===n?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Fe(t)?{error:t}:{error:new Ue("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,a;try{const o=await Et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(r=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===(a=null===e||void 0===e?void 0:e.options)||void 0===a?void 0:a.captchaToken}},xform:Pt}),{data:s,error:n}=o;if(n||!s)return{data:{user:null,session:null},error:n};const i=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",i)),{data:{user:l,session:i},error:null}}catch(o){if(Fe(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var t,r,a;try{let o;if("email"in e){const{email:r,password:a,options:s}=e;let n=null,i=null;"pkce"===this.flowType&&([n,i]=await xt(this.storage,this.storageKey)),o=await Et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null===s||void 0===s?void 0:s.emailRedirectTo,body:{email:r,password:a,data:null!==(t=null===s||void 0===s?void 0:s.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken},code_challenge:n,code_challenge_method:i},xform:Pt})}else{if(!("phone"in e))throw new qe("You must provide either an email or phone number and a password");{const{phone:t,password:s,options:n}=e;o=await Et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:s,data:null!==(r=null===n||void 0===n?void 0:n.data)&&void 0!==r?r:{},channel:null!==(a=null===n||void 0===n?void 0:n.channel)&&void 0!==a?a:"sms",gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken}},xform:Pt})}}const{data:s,error:n}=o;if(n||!s)return{data:{user:null,session:null},error:n};const i=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",i)),{data:{user:l,session:i},error:null}}catch(o){if(Fe(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:a,options:o}=e;t=await Et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:a,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}},xform:It})}else{if(!("phone"in e))throw new qe("You must provide either an email or phone number and a password");{const{phone:r,password:a,options:o}=e;t=await Et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:a,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}},xform:It})}}const{data:r,error:a}=t;return a?{data:{user:null,session:null},error:a}:r&&r.session&&r.user?(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a}):{data:{user:null,session:null},error:new Be}}catch(t){if(Fe(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,a,o;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:null===(o=e.options)||void 0===o?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,a,o,s,n,i,l,c,d,u,h;let m,p;if("message"in e)m=e.message,p=e.signature;else{const{chain:u,wallet:h,statement:g,options:f}=e;let v;if(it())if("object"===typeof h)v=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");v=e.solana}else{if("object"!==typeof h||!(null===f||void 0===f?void 0:f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=h}const x=new URL(null!==(t=null===f||void 0===f?void 0:f.url)&&void 0!==t?t:window.location.href);if("signIn"in v&&v.signIn){const e=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===f||void 0===f?void 0:f.signInWithSolana),{version:"1",domain:x.host,uri:x.href}),g?{statement:g}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");m="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in v)||"function"!==typeof v.signMessage||!("publicKey"in v)||"object"!==typeof v||!v.publicKey||!("toBase58"in v.publicKey)||"function"!==typeof v.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${x.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${x.href}`,`Issued At: ${null!==(a=null===(r=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===r?void 0:r.issuedAt)&&void 0!==a?a:(new Date).toISOString()}`,...(null===(o=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===o?void 0:o.notBefore)?[`Not Before: ${f.signInWithSolana.notBefore}`]:[],...(null===(s=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===s?void 0:s.expirationTime)?[`Expiration Time: ${f.signInWithSolana.expirationTime}`]:[],...(null===(n=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===n?void 0:n.chainId)?[`Chain ID: ${f.signInWithSolana.chainId}`]:[],...(null===(i=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===i?void 0:i.nonce)?[`Nonce: ${f.signInWithSolana.nonce}`]:[],...(null===(l=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${f.signInWithSolana.requestId}`]:[],...(null===(d=null===(c=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...f.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await v.signMessage((new TextEncoder).encode(m),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:r}=await Et(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:nt(p)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:Pt});if(r)throw r;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:r}):{data:{user:null,session:null},error:new Be}}catch(g){if(Fe(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(e){const t=await ht(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:o}=await Et(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Pt});if(await mt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==a&&void 0!==a?a:null}),error:o}):{data:{user:null,session:null,redirectType:null},error:new Be}}catch(o){if(Fe(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:t,provider:r,token:a,access_token:o,nonce:s}=e,n=await Et(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:o,nonce:s,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:Pt}),{data:i,error:l}=n;return l?{data:{user:null,session:null},error:l}:i&&i.session&&i.user?(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:i,error:l}):{data:{user:null,session:null},error:new Be}}catch(t){if(Fe(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,a,o,s;try{if("email"in e){const{email:a,options:o}=e;let s=null,n=null;"pkce"===this.flowType&&([s,n]=await xt(this.storage,this.storageKey));const{error:i}=await Et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:null!==(t=null===o||void 0===o?void 0:o.data)&&void 0!==t?t:{},create_user:null===(r=null===o||void 0===o?void 0:o.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken},code_challenge:s,code_challenge_method:n},redirectTo:null===o||void 0===o?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:t,options:r}=e,{data:n,error:i}=await Et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(a=null===r||void 0===r?void 0:r.data)&&void 0!==a?a:{},create_user:null===(o=null===r||void 0===r?void 0:r.shouldCreateUser)||void 0===o||o,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken},channel:null!==(s=null===r||void 0===r?void 0:r.channel)&&void 0!==s?s:"sms"}});return{data:{user:null,session:null,messageId:null===n||void 0===n?void 0:n.message_id},error:i}}throw new qe("You must provide either an email or phone number.")}catch(n){if(Fe(n))return{data:{user:null,session:null},error:n};throw n}}async verifyOtp(e){var t,r;try{let a,o;"options"in e&&(a=null===(t=e.options)||void 0===t?void 0:t.redirectTo,o=null===(r=e.options)||void 0===r?void 0:r.captchaToken);const{data:s,error:n}=await Et(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:Pt});if(n)throw n;if(!s)throw new Error("An error occurred on token verification.");const i=s.session,l=s.user;return(null===i||void 0===i?void 0:i.access_token)&&(await this._saveSession(i),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",i)),{data:{user:l,session:i},error:null}}catch(a){if(Fe(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var t,r,a;try{let o=null,s=null;return"pkce"===this.flowType&&([o,s]=await xt(this.storage,this.storageKey)),await Et(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(a=null===e||void 0===e?void 0:e.options)||void 0===a?void 0:a.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:s}),headers:this.headers,xform:Tt})}catch(o){if(Fe(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new We;const{error:a}=await Et(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(Fe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:a,options:o}=e,{error:s}=await Et(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}},redirectTo:null===o||void 0===o?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:s}}if("phone"in e){const{phone:r,type:a,options:o}=e,{data:s,error:n}=await Et(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:null===s||void 0===s?void 0:s.message_id},error:n}}throw new qe("You must provide either an email or phone number and a type")}catch(t){if(Fe(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(e){}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await ht(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=!!e.expires_at&&1e3*e.expires_at-Date.now()<Te;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const t=await ht(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=jt()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,r,a)=>(t||"user"!==r||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,r,a))})}return{data:{session:e},error:null}}const{session:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await Et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:At}):await this._useSession(async e=>{var t,r,a;const{data:o,error:s}=e;if(s)throw s;return(null===(t=o.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(a=null===(r=o.session)||void 0===r?void 0:r.access_token)&&void 0!==a?a:void 0,xform:At}):{data:{user:null},error:new We}})}catch(t){if(Fe(t))return function(e){return Fe(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await mt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async r=>{const{data:a,error:o}=r;if(o)throw o;if(!a.session)throw new We;const s=a.session;let n=null,i=null;"pkce"===this.flowType&&null!=e.email&&([n,i]=await xt(this.storage,this.storageKey));const{data:l,error:c}=await Et(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:n,code_challenge_method:i}),jwt:s.access_token,xform:At});if(c)throw c;return s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new We;const t=Date.now()/1e3;let r=t,a=!0,o=null;const{payload:s}=gt(e.access_token);if(s.exp&&(r=s.exp,a=r<=t),a){const{session:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return{data:{user:null,session:null},error:r};if(!t)return{data:{user:null,session:null},error:null};o=t}else{const{data:a,error:s}=await this._getUser(e.access_token);if(s)throw s;o={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(Fe(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:a,error:o}=t;if(o)throw o;e=null!==(r=a.session)&&void 0!==r?r:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new We;const{session:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Fe(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!it())throw new He("No browser detected.");if(e.error||e.error_description||e.error_code)throw new He(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Ve("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new He("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ve("No code detected.");const{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;const a=new URL(window.location.href);return a.searchParams.delete("code"),window.history.replaceState(window.history.state,"",a.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:o,refresh_token:s,expires_in:n,expires_at:i,token_type:l}=e;if(!o||!n||!s||!l)throw new He("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(n);let u=c+d;i&&(u=parseInt(i));const h=u-c;1e3*h<=Ae&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const m=u-d;c-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,u,c):c-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,u,c);const{data:p,error:g}=await this._getUser(o);if(g)throw g;const f={provider_token:r,provider_refresh_token:a,access_token:o,expires_in:d,expires_at:u,refresh_token:s,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:f,redirectType:e.type},error:null}}catch(r){if(Fe(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ht(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var r;const{data:a,error:o}=t;if(o)return{error:o};const s=null===(r=a.session)||void 0===r?void 0:r.access_token;if(s){const{error:t}=await this.admin.signOut(s,e);if(t&&(!function(e){return Fe(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await mt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,a;try{const{data:{session:a},error:o}=t;if(o)throw o;await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(o){await(null===(a=this.stateChangeEmitters.get(e))||void 0===a?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,a=null;"pkce"===this.flowType&&([r,a]=await xt(this.storage,this.storageKey,!0));try{return await Et(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(Fe(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Fe(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:a}=await this._useSession(async t=>{var r,a,o,s,n;const{data:i,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,scopes:null===(a=e.options)||void 0===a?void 0:a.scopes,queryParams:null===(o=e.options)||void 0===o?void 0:o.queryParams,skipBrowserRedirect:!0});return await Et(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(n=null===(s=i.session)||void 0===s?void 0:s.access_token)&&void 0!==n?n:void 0})});if(a)throw a;return it()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===r||void 0===r?void 0:r.url),{data:{provider:e.provider,url:null===r||void 0===r?void 0:r.url},error:null}}catch(r){if(Fe(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,a;const{data:o,error:s}=t;if(s)throw s;return await Et(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(a=null===(r=o.session)||void 0===r?void 0:r.access_token)&&void 0!==a?a:void 0})})}catch(t){if(Fe(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const o=Date.now();return await(r=async r=>(r>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await Et(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Pt})),a=(e,t)=>{const r=200*Math.pow(2,e);return t&&Je(t)&&Date.now()+r-o<Ae},new Promise((e,t)=>{(async()=>{for(let s=0;s<1/0;s++)try{const t=await r(s);if(!a(s,null,t))return void e(t)}catch(o){if(!a(s,o))return void t(o)}})()}))}catch(o){if(this._debug(t,"error",o),Fe(o))return{data:{session:null,user:null},error:o};throw o}finally{this._debug(t,"end")}var r,a}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),it()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const o=await ht(this.storage,this.storageKey);if(o&&this.userStorage){let t=await ht(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:o.user},await ut(this.userStorage,this.storageKey+"-user",t)),o.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:jt()}else if(o&&!o.user&&!o.user){const e=await ht(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(o.user=e.user,await mt(this.storage,this.storageKey+"-user"),await ut(this.storage,this.storageKey,o)):o.user=jt()}if(this._debug(r,"session from storage",o),!this._isValidSession(o))return this._debug(r,"session is not valid"),void(null!==o&&await this._removeSession());const s=1e3*(null!==(t=o.expires_at)&&void 0!==t?t:1/0)-Date.now()<Te;if(this._debug(r,`session has${s?"":" not"} expired with margin of 90000s`),s){if(this.autoRefreshToken&&o.refresh_token){const{error:e}=await this._callRefreshToken(o.refresh_token);e&&(console.error(e),Je(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(o.user&&!0===o.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(o.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(o.user=e.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){return this._debug(r,"error",o),void console.error(o)}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new We;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new pt;const{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new We;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const a={session:t.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(a,"error",o),Fe(o)){const e={session:null,error:o};return Je(o)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(o){a.push(o)}});if(await Promise.all(o),a.length>0){for(let e=0;e<a.length;e+=1)console.error(a[e]);throw a[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await ut(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const a=kt(e);await ut(this.storage,this.storageKey,a)}else{const e=kt(t);await ut(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await mt(this.storage,this.storageKey),await mt(this.storage,this.storageKey+"-code-verifier"),await mt(this.storage,this.storageKey+"-user"),this.userStorage&&await mt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&it()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ae);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:r}}=e;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const a=Math.floor((1e3*r.expires_at-t)/Ae);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),a<=3&&await this._callRefreshToken(r.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof Ut))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!it()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const a=[`provider=${encodeURIComponent(t)}`];if((null===r||void 0===r?void 0:r.redirectTo)&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),(null===r||void 0===r?void 0:r.scopes)&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),"pkce"===this.flowType){const[e,t]=await xt(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});a.push(r.toString())}if(null===r||void 0===r?void 0:r.queryParams){const e=new URLSearchParams(r.queryParams);a.push(e.toString())}return(null===r||void 0===r?void 0:r.skipBrowserRedirect)&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:a,error:o}=t;return o?{data:null,error:o}:await Et(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(r=null===a||void 0===a?void 0:a.session)||void 0===r?void 0:r.access_token})})}catch(t){if(Fe(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,a;const{data:o,error:s}=t;if(s)return{data:null,error:s};const n=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:i,error:l}=await Et(this.fetch,"POST",`${this.url}/factors`,{body:n,headers:this.headers,jwt:null===(r=null===o||void 0===o?void 0:o.session)||void 0===r?void 0:r.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(a=null===i||void 0===i?void 0:i.totp)||void 0===a?void 0:a.qr_code)&&(i.totp.qr_code=`data:image/svg+xml;utf-8,${i.totp.qr_code}`),{data:i,error:null})})}catch(t){if(Fe(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:a,error:o}=t;if(o)return{data:null,error:o};const{data:s,error:n}=await Et(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(r=null===a||void 0===a?void 0:a.session)||void 0===r?void 0:r.access_token});return n?{data:null,error:n}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:n})})}catch(t){if(Fe(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:a,error:o}=t;return o?{data:null,error:o}:await Et(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(r=null===a||void 0===a?void 0:a.session)||void 0===r?void 0:r.access_token})})}catch(t){if(Fe(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(null===e||void 0===e?void 0:e.factors)||[],a=r.filter(e=>"totp"===e.factor_type&&"verified"===e.status),o=r.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:r,totp:a,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:a},error:o}=e;if(o)return{data:null,error:o};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=gt(a.access_token);let n=null;s.aal&&(n=s.aal);let i=n;(null!==(r=null===(t=a.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==r?r:[]).length>0&&(i="aal2");return{data:{currentLevel:n,nextLevel:i,currentAuthenticationMethods:s.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const r=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>r)return t;const{data:a,error:o}=await Et(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return a.keys&&0!==a.keys.length?(this.jwks=a,this.jwks_cached_at=r,t=a.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let r=e;if(!r){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};r=e.session.access_token}const{header:a,payload:o,signature:s,raw:{header:n,payload:i}}=gt(r);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(o.exp);const l=a.alg&&!a.alg.startsWith("HS")&&a.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(a.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(r);if(e)throw e;return{data:{claims:o,header:a,signature:s},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(a.alg),d=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,s,function(e){const t=[];return ot(e,e=>t.push(e)),new Uint8Array(t)}(`${n}.${i}`)))throw new Ye("Invalid JWT signature");return{data:{claims:o,header:a,signature:s},error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}}}Vt.nextInstanceID=0;const Gt=Vt;class Jt extends Gt{constructor(e){super(e)}}var Kt=function(e,t,r,a){return new(r||(r=Promise))(function(o,s){function n(e){try{l(a.next(e))}catch(t){s(t)}}function i(e){try{l(a.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(n,i)}l((a=a.apply(e,t||[])).next())})};class Yt{constructor(e,t,r){var a,o,s;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const n=(i=e).endsWith("/")?i:i+"/";var i;const l=new URL(n);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d=function(e,t){var r,a;const{db:o,auth:s,realtime:n,global:i}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),o),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},d),n),storage:{},global:Object.assign(Object.assign(Object.assign({},u),i),{headers:Object.assign(Object.assign({},null!==(r=null===u||void 0===u?void 0:u.headers)&&void 0!==r?r:{}),null!==(a=null===i||void 0===i?void 0:i.headers)&&void 0!==a?a:{})}),accessToken:()=>Pe(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==r&&void 0!==r?r:{},{db:je,realtime:Ne,auth:Object.assign(Object.assign({},ke),{storageKey:c}),global:we});this.storageKey=null!==(a=d.auth.storageKey)&&void 0!==a?a:"",this.headers=null!==(o=d.global.headers)&&void 0!==o?o:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(s=d.auth)&&void 0!==s?s:{},this.headers,d.global.fetch),this.fetch=Ee(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new u(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new be(this.storageUrl.href,this.headers,this.fetch,null===r||void 0===r?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new c(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,r)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Kt(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return null!==(t=null===(e=r.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient(e,t,r){let{autoRefreshToken:a,persistSession:o,detectSessionInUrl:s,storage:n,storageKey:i,flowType:l,lock:c,debug:d}=e;const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Jt({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),t),storageKey:i,autoRefreshToken:a,persistSession:o,detectSessionInUrl:s,storage:n,flowType:l,lock:c,debug:d,fetch:r,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new K(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=r}}(function(){if("undefined"!==typeof window)return!1;if("undefined"===typeof process)return!1;const e=process.version;if(void 0===e||null===e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Zt={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SUPABASE_URL,Qt={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SUPABASE_ANON_KEY;Zt&&Qt||(console.warn("\u26a0\ufe0f Supabase\u73af\u5883\u53d8\u91cf\u672a\u914d\u7f6e\uff0c\u5c06\u4f7f\u7528mock\u6570\u636e"),console.warn("\u8bf7\u8bbe\u7f6e REACT_APP_SUPABASE_URL \u548c REACT_APP_SUPABASE_ANON_KEY"));const Xt=((e,t,r)=>new Yt(e,t,r))(Zt||"https://placeholder.supabase.co",Qt||"placeholder-key"),er=async()=>{if(!Zt||!Qt)return console.log("\u2139\ufe0f Supabase\u73af\u5883\u53d8\u91cf\u672a\u914d\u7f6e\uff0c\u4f7f\u7528mock\u6570\u636e"),!1;try{const{data:e,error:t}=await Xt.from("users").select("count").limit(1);return t?(console.warn("\u26a0\ufe0f Supabase\u8fde\u63a5\u5931\u8d25\uff0c\u5c06\u4f7f\u7528mock\u6570\u636e:",t.message),!1):(console.log("\u2705 Supabase\u8fde\u63a5\u6210\u529f"),!0)}catch(e){return console.warn("\u26a0\ufe0f Supabase\u8fde\u63a5\u68c0\u67e5\u5931\u8d25\uff0c\u5c06\u4f7f\u7528mock\u6570\u636e:",e.message),!1}}},43:(e,t,r)=>{"use strict";e.exports=r(202)},121:(e,t,r)=>{"use strict";r.d(t,{Lt:()=>l,getProfile:()=>i});var a=r(792);const o=e=>`tag.userProfile.${e}`;function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return Array.isArray(e)?e.filter(e=>e&&e.trim()).map(e=>e.trim()).filter((e,t,r)=>r.indexOf(e)===t).slice(0,t):[]}function n(e){var t,r,a,o;return{id:e.id||"",fullName:(e.fullName||"").trim(),title:(e.title||"").trim(),school:(e.school||"").trim(),pronouns:(e.pronouns||"").trim(),majors:s(e.majors,3),minors:s(e.minors,3),skills:s(e.skills,12),bio:(e.bio||"").trim(),avatar:e.avatar||null,socialLinks:{instagram:((null===(t=e.socialLinks)||void 0===t?void 0:t.instagram)||"").trim(),portfolio:((null===(r=e.socialLinks)||void 0===r?void 0:r.portfolio)||"").trim(),discord:((null===(a=e.socialLinks)||void 0===a?void 0:a.discord)||"").trim(),otherLinks:Array.isArray(null===(o=e.socialLinks)||void 0===o?void 0:o.otherLinks)?e.socialLinks.otherLinks.filter(e=>e&&e.label&&e.url):[]},updatedAt:e.updatedAt||(new Date).toISOString()}}const i=async e=>{try{const r=function(e){try{if("undefined"===typeof window)return null;const t=window.localStorage.getItem(o(e));return t?JSON.parse(t):null}catch(t){return console.warn("Failed to read user profile data:",t),null}}(e),a=function(e){return{id:e,fullName:"",title:"",school:"",pronouns:"",majors:[],minors:[],skills:[],bio:"",avatar:null,socialLinks:{instagram:"",portfolio:"",discord:"",otherLinks:[]},updatedAt:(new Date).toISOString()}}(e);if(!r)return{success:!0,data:a};const s={...a,...r,socialLinks:{...a.socialLinks,...r.socialLinks||{}}};try{const t=window.localStorage.getItem(`tag.avatars.${e}`);if(t){const e=JSON.parse(t);e&&e.avatarUrl&&(s.avatar=e.avatarUrl,console.log("[userProfileService] Loaded avatar from tag.avatars storage"))}}catch(t){console.warn("[userProfileService] Failed to load avatar from tag.avatars storage:",t)}const i=n(s);return console.log("[userProfileService] Loading profile data:",{userId:e,socialLinks:i.socialLinks,fullProfile:i}),{success:!0,data:i}}catch(t){return console.error("Failed to get profile:",t),{success:!1,error:t.message}}},l=async(e,t)=>{try{const l=await i(e);if(!l.success)return l;const c=l.data,d=n({...c,...t,socialLinks:{...c.socialLinks,...t.socialLinks||{}},id:e,updatedAt:(new Date).toISOString()}),u=function(e){const t={};return e.fullName&&e.fullName.trim()||(t.fullName="Full name is required"),{isValid:0===Object.keys(t).length,errors:t}}(d);if(!u.isValid)return{success:!1,errors:u.errors};console.log("[userProfileService] Saving profile data:",{userId:e,socialLinks:d.socialLinks,fullProfile:d});const h=function(e,t){try{return"undefined"!==typeof window&&(window.localStorage.setItem(o(e),JSON.stringify(t)),!0)}catch(r){return console.warn("Failed to write user profile data:",r),!1}}(e,d);if(!h)return{success:!1,error:"Failed to save profile data"};if(console.log("[userProfileService] Profile data saved successfully"),d.avatar)try{(await a.A.storeAvatar(e,d.avatar)).success?console.log(`[userProfileService] Avatar stored in IndexedDB for user: ${e}`):console.warn(`[userProfileService] Failed to store avatar in IndexedDB for user: ${e}`);const t={avatarUrl:d.avatar,timestamp:Date.now()};localStorage.setItem(`tag.avatars.${e}`,JSON.stringify(t)),console.log(`[userProfileService] Avatar stored in localStorage for user: ${e}`)}catch(s){console.error(`[userProfileService] Error storing avatar: ${s}`)}return r=d,"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent("profile:updated",{detail:r})),{success:!0,data:d}}catch(s){return console.error("Failed to save profile:",s),{success:!1,error:s.message}}var r}},153:(e,t,r)=>{"use strict";var a=r(43),o=Symbol.for("react.element"),s=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var a,s={},c=null,d=null;for(a in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)n.call(t,a)&&!l.hasOwnProperty(a)&&(s[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===s[a]&&(s[a]=t[a]);return{$$typeof:o,type:e,key:c,ref:d,props:s,_owner:i.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},179:(e,t,r)=>{"use strict";r.d(t,{storage:()=>i});var a=r(337);class o{constructor(){this.storage=new Map}async getItem(e){return this.storage.get(e)||null}async setItem(e,t){try{return this.storage.set(e,t),!0}catch(r){return console.warn(`[MemoryStorageAdapter] Failed to set ${e}:`,r),!1}}async removeItem(e){try{return this.storage.delete(e)}catch(t){return console.warn(`[MemoryStorageAdapter] Failed to remove ${e}:`,t),!1}}async keys(){return Array.from(this.storage.keys())}async clear(){try{return this.storage.clear(),!0}catch(e){return console.warn("[MemoryStorageAdapter] Failed to clear:",e),!1}}async init(){return!0}}class s{static async getAdapter(){if(this.instance)return this.instance;return console.log("[StorageFactory] Using MemoryStorageAdapter"),this.instance=new o,this.instance}static reset(){this.instance=null}}s.instance=null;const n=s.getAdapter.bind(s),i={getItem:async e=>(await n()).getItem(e),setItem:async(e,t)=>(await n()).setItem(e,t),removeItem:async e=>(await n()).removeItem(e),keys:async()=>(await n()).keys(),clear:async()=>(await n()).clear(),init:async()=>(await n()).init()};a.default},185:(e,t,r)=>{e.exports=r(392)},200:(e,t,r)=>{"use strict";r.d(t,{BD:()=>l,S5:()=>d,Vp:()=>i,ep:()=>c,jp:()=>p,qo:()=>u,updatePortfolioItem:()=>h,zB:()=>m});var a=r(8),o=r(337),s=r(420),n=r(179);const i=async e=>{if(console.log(`[Portfolio] Mock API: Getting image URL for ${e}`),!e)return console.warn("[Portfolio] Mock API: filePath is empty or undefined"),{success:!1,error:"Invalid file path"};try{const t=await o.default.getImageUrl(e);return t?(console.log(`[Portfolio] Mock API: \u547d\u4e2d - queryKey: ${e}, url: ${t.substring(0,32)}...`),{success:!0,data:{url:t,path:e}}):(console.log(`[Portfolio] Mock API: \u672a\u547d\u4e2d - queryKey: ${e}`),{success:!1,error:"Image not found"})}catch(t){return console.error("[Portfolio] Mock API: Error getting image URL:",t),{success:!1,error:t.message}}},l=async()=>{console.log("[Portfolio] Mock API: Reading from localStorage");try{const t=(0,a.WR)(),r=`portfolio_${t}`,o=await n.storage.getItem(r);let s=[];try{s=o?JSON.parse(o):[]}catch(e){console.warn(`[Portfolio] Mock API: Failed to parse portfolio data for user ${t}:`,e),s=[]}Array.isArray(s)||(console.warn(`[Portfolio] Mock API: Portfolio data for user ${t} is not an array`),s=[]),console.log(`[Portfolio] Mock API: Found ${s.length} items for user ${t}`);return{success:!0,data:await Promise.all(s.map(async e=>{if(e.imagePaths&&e.imagePaths.length>0&&e.imagePaths[0]){const t=await i(e.imagePaths[0]);if(t.success)return{...e,thumbnailPath:t.data.url}}return e}))}}catch(t){return console.error("[Portfolio] Mock API: Error reading portfolio:",t),{success:!1,error:t.message}}},c=async e=>{console.log(`[Portfolio] Mock API: Reading public portfolio for user ${e}`);try{const r=`portfolio_${e}`,a=await n.storage.getItem(r);let o=[];try{o=a?JSON.parse(a):[]}catch(t){console.warn(`[Portfolio] Mock API: Failed to parse portfolio data for user ${e}:`,t),o=[]}Array.isArray(o)||(console.warn(`[Portfolio] Mock API: Portfolio data for user ${e} is not an array`),o=[]);const s=o.filter(e=>!1!==e.isPublic);console.log(`[Portfolio] Mock API: Found ${s.length} public items for user ${e}`);return{success:!0,data:await Promise.all(s.map(async e=>{if(e.imagePaths&&e.imagePaths.length>0&&e.imagePaths[0]){const t=await i(e.imagePaths[0]);if(t.success)return{...e,thumbnailPath:t.data.url}}return e}))}}catch(r){return console.error("[Portfolio] Mock API: Error reading public portfolio:",r),{success:!1,error:r.message}}},d=async()=>{console.log("[Portfolio] Mock API: Reading all public portfolios");try{const t=[],a=await n.storage.keys();for(const i of a)if(i&&i.startsWith("portfolio_")&&!i.includes("image_")){const a=i.replace("portfolio_",""),o=await n.storage.getItem(i);let l=[];try{l=o?JSON.parse(o):[]}catch(e){console.warn(`[Portfolio] Mock API: Failed to parse portfolio data for user ${a}:`,e);continue}if(!Array.isArray(l)){console.warn(`[Portfolio] Mock API: Portfolio data for user ${a} is not an array`);continue}const c=l.filter(e=>e&&e.id&&!1!==e.isPublic).map(async e=>{var t,o,n;const{getProfile:i}=await Promise.resolve().then(r.bind(r,121)),l=await i(a),c=l.success?l.data:null;return{...e,profiles:{id:a,full_name:(null===c||void 0===c?void 0:c.fullName)||(null===(t=(0,s.ug)(a))||void 0===t?void 0:t.name)||"Unknown Artist",avatar_url:(null===(o=(0,s.ug)(a))||void 0===o?void 0:o.avatar)||"",role:(null===c||void 0===c?void 0:c.title)||(null===(n=(0,s.ug)(a))||void 0===n?void 0:n.role)||"Design"}}}),d=await Promise.all(c);t.push(...d)}const o=await Promise.all(t.map(async e=>{if(e.imagePaths&&e.imagePaths.length>0){const t=await i(e.imagePaths[0]);if(t.success)return{...e,thumbnailPath:t.data.url}}return e}));return o.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)),console.log(`[Portfolio] Mock API: Found ${o.length} total public items`),{success:!0,data:o}}catch(t){return console.error("[Portfolio] Mock API: Error reading all public portfolios:",t),{success:!1,error:t.message}}},u=async e=>{console.log("[Portfolio] Mock API: Creating new portfolio item");try{var t;const o=(0,a.WR)(),s=`portfolio_${o}`,i=await n.storage.getItem(s);let l=[];try{l=i?JSON.parse(i):[]}catch(r){console.warn(`[Portfolio] Mock API: Failed to parse portfolio data for user ${o}:`,r),l=[]}Array.isArray(l)||(console.warn(`[Portfolio] Mock API: Portfolio data for user ${o} is not an array`),l=[]);const c={id:`mock_${Date.now()}_${Math.random().toString(36).substring(2)}`,title:e.title||"Untitled",description:e.description||"",category:e.category||"",tags:e.tags||[],imagePaths:e.imagePaths||[],thumbnailPath:e.thumbnailPath||"",imageKey:(null===(t=e.imagePaths)||void 0===t?void 0:t[0])||e.thumbnailPath||"",isPublic:!1!==e.isPublic,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};return console.log("[Portfolio] Creating item with tags:",e.tags),console.log("[Portfolio] New item tags:",c.tags),l.unshift(c),await n.storage.setItem(s,JSON.stringify(l)),console.log(`[Portfolio] Mock API: Created item ${c.id} for user ${o}`),{success:!0,data:c}}catch(o){return console.error("[Portfolio] Mock API: Error creating portfolio item:",o),{success:!1,error:o.message}}},h=async(e,t)=>{console.log(`[Portfolio] Mock API: Updating item ${e}`);try{const o=(0,a.WR)(),s=`portfolio_${o}`,i=await n.storage.getItem(s);let l=[];try{l=i?JSON.parse(i):[]}catch(r){console.warn(`[Portfolio] Mock API: Failed to parse portfolio data for user ${o}:`,r),l=[]}Array.isArray(l)||(console.warn(`[Portfolio] Mock API: Portfolio data for user ${o} is not an array`),l=[]);const c=l.findIndex(t=>t.id===e);if(-1===c)throw new Error("Portfolio item not found");return l[c]={...l[c],...t,updatedAt:(new Date).toISOString()},await n.storage.setItem(s,JSON.stringify(l)),console.log(`[Portfolio] Mock API: Updated item ${e} for user ${o}`),{success:!0,data:l[c]}}catch(o){return console.error("[Portfolio] Mock API: Error updating portfolio item:",o),{success:!1,error:o.message}}},m=async e=>{console.log(`[Portfolio] Mock API: Deleting item ${e}`);try{const r=(0,a.WR)(),o=`portfolio_${r}`,s=await n.storage.getItem(o);let i=[];try{i=s?JSON.parse(s):[]}catch(t){console.warn(`[Portfolio] Mock API: Failed to parse portfolio data for user ${r}:`,t),i=[]}Array.isArray(i)||(console.warn(`[Portfolio] Mock API: Portfolio data for user ${r} is not an array`),i=[]);const l=i.findIndex(t=>t.id===e);if(-1===l)throw new Error("Portfolio item not found");const c=i[l];if(c.imagePaths&&c.imagePaths.length>0)for(const e of c.imagePaths)await g(e);return i.splice(l,1),await n.storage.setItem(o,JSON.stringify(i)),console.log(`[Portfolio] Mock API: Deleted item ${e} for user ${r}`),{success:!0}}catch(r){return console.error("[Portfolio] Mock API: Error deleting portfolio item:",r),{success:!1,error:r.message}}},p=async(e,t)=>{console.log(`[Portfolio] Mock API: Uploading image ${e.name} for user ${t}`);try{const r=e.name.split(".").pop().toLowerCase(),a=`portfolio/${t}/${`${Date.now()}-${Math.random().toString(36).substring(2)}.${r}`}`,s=await new Promise((t,r)=>{const a=new FileReader;a.onload=()=>t(a.result),a.onerror=()=>r(a.error),a.readAsDataURL(e)});if("string"!==typeof s||!s.startsWith("data:image/"))throw new Error("Invalid Data URL format generated");return console.log(`[Portfolio] Mock API: \u5b58\u5132\u6642 - path: ${a}, dataUrl: ${s.substring(0,32)}...`),await o.default.storeImage(a,s),console.log(`[Portfolio] Mock API: Stored Data URL to IndexedDB for ${a}`),{success:!0,data:{path:a,url:s}}}catch(r){return console.error("[Portfolio] Mock API: Error uploading image:",r),{success:!1,error:r.message}}},g=async e=>{console.log(`[Portfolio] Mock API: Deleting image ${e}`);try{const t=await o.default.deleteImage(e);return t.success&&console.log(`[Portfolio] Mock API: Deleted image ${e}`),t}catch(t){return console.error("[Portfolio] Mock API: Error deleting image:",t),{success:!1,error:t.message}}}},202:(e,t)=>{"use strict";var r=Symbol.for("react.element"),a=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,f={};function v(e,t,r){this.props=e,this.context=t,this.refs=f,this.updater=r||p}function x(){}function b(e,t,r){this.props=e,this.context=t,this.refs=f,this.updater=r||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=v.prototype;var y=b.prototype=new x;y.constructor=b,g(y,v.prototype),y.isPureReactComponent=!0;var w=Array.isArray,j=Object.prototype.hasOwnProperty,k={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,a){var o,s={},n=null,i=null;if(null!=t)for(o in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(n=""+t.key),t)j.call(t,o)&&!N.hasOwnProperty(o)&&(s[o]=t[o]);var l=arguments.length-2;if(1===l)s.children=a;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===s[o]&&(s[o]=l[o]);return{$$typeof:r,type:e,key:n,ref:i,props:s,_owner:k.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var _=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,o,s,n){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var l=!1;if(null===e)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case a:l=!0}}if(l)return n=n(l=e),e=""===s?"."+E(l,0):s,w(n)?(o="",null!=e&&(o=e.replace(_,"$&/")+"/"),P(n,t,o,"",function(e){return e})):null!=n&&(S(n)&&(n=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(n,o+(!n.key||l&&l.key===n.key?"":(""+n.key).replace(_,"$&/")+"/")+e)),t.push(n)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var d=s+E(i=e[c],c);l+=P(i,t,o,d,n)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(i=e.next()).done;)l+=P(i=i.value,t,o,d=s+E(i,c++),n);else if("object"===i)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,r){if(null==e)return e;var a=[],o=0;return P(e,a,"","",function(e){return t.call(r,e,o++)}),a}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var T={current:null},L={transition:null},D={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:L,ReactCurrentOwner:k};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,r){I(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return I(e,function(){t++}),t},toArray:function(e){return I(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=o,t.Profiler=n,t.PureComponent=b,t.StrictMode=s,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=M,t.cloneElement=function(e,t,a){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=g({},e.props),s=e.key,n=e.ref,i=e._owner;if(null!=t){if(void 0!==t.ref&&(n=t.ref,i=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)j.call(t,c)&&!N.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=a;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];o.children=l}return{$$typeof:r,type:e.type,key:s,ref:n,props:o,_owner:i}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return T.current.useCallback(e,t)},t.useContext=function(e){return T.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return T.current.useDeferredValue(e)},t.useEffect=function(e,t){return T.current.useEffect(e,t)},t.useId=function(){return T.current.useId()},t.useImperativeHandle=function(e,t,r){return T.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return T.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return T.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return T.current.useMemo(e,t)},t.useReducer=function(e,t,r){return T.current.useReducer(e,t,r)},t.useRef=function(e){return T.current.useRef(e)},t.useState=function(e){return T.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return T.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return T.current.useTransition()},t.version="18.3.1"},210:function(e,t,r){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(r(829)),s=a(r(736)),n=r(745);class i{constructor(e){let{headers:t={},schema:r,fetch:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=Object.assign(Object.assign({},n.DEFAULT_HEADERS),t),this.schemaName=r,this.fetch=a}from(e){const t=new URL(`${this.url}/${e}`);return new o.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new i(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:a=!1,get:o=!1,count:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new URL(`${this.url}/rpc/${e}`);let l;a||o?(t=a?"HEAD":"GET",Object.entries(r).filter(e=>{let[t,r]=e;return void 0!==r}).map(e=>{let[t,r]=e;return[t,Array.isArray(r)?`{${r.join(",")}}`:`${r}`]}).forEach(e=>{let[t,r]=e;i.searchParams.append(t,r)})):(t="POST",l=r);const c=Object.assign({},this.headers);return n&&(c.Prefer=`count=${n}`),new s.default({method:t,url:i,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}}t.default=i},218:e=>{var t,r,a,o,s,n,i,l,c,d,u,h,m,p,g,f=!1;function v(){if(!f){f=!0;var e=navigator.userAgent,v=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),x=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(h=/\b(iPhone|iP[ao]d)/.exec(e),m=/\b(iP[ao]d)/.exec(e),d=/Android/i.exec(e),p=/FBAN\/\w+;/i.exec(e),g=/Mobile/i.exec(e),u=!!/Win64/.exec(e),v){(t=v[1]?parseFloat(v[1]):v[5]?parseFloat(v[5]):NaN)&&document&&document.documentMode&&(t=document.documentMode);var b=/(?:Trident\/(\d+.\d+))/.exec(e);n=b?parseFloat(b[1])+4:t,r=v[2]?parseFloat(v[2]):NaN,a=v[3]?parseFloat(v[3]):NaN,(o=v[4]?parseFloat(v[4]):NaN)?(v=/(?:Chrome\/(\d+\.\d+))/.exec(e),s=v&&v[1]?parseFloat(v[1]):NaN):s=NaN}else t=r=a=s=o=NaN;if(x){if(x[1]){var y=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);i=!y||parseFloat(y[1].replace("_","."))}else i=!1;l=!!x[2],c=!!x[3]}else i=l=c=!1}}var x={ie:function(){return v()||t},ieCompatibilityMode:function(){return v()||n>t},ie64:function(){return x.ie()&&u},firefox:function(){return v()||r},opera:function(){return v()||a},webkit:function(){return v()||o},safari:function(){return x.webkit()},chrome:function(){return v()||s},windows:function(){return v()||l},osx:function(){return v()||i},linux:function(){return v()||c},iphone:function(){return v()||h},mobile:function(){return v()||h||m||d||g},nativeApp:function(){return v()||p},android:function(){return v()||d},ipad:function(){return v()||m}};e.exports=x},234:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var a=r-1>>>1,o=e[a];if(!(0<s(o,t)))break e;e[a]=t,e[r]=o,r=a}}function a(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var a=0,o=e.length,n=o>>>1;a<n;){var i=2*(a+1)-1,l=e[i],c=i+1,d=e[c];if(0>s(l,r))c<o&&0>s(d,l)?(e[a]=d,e[c]=r,a=c):(e[a]=l,e[i]=r,a=i);else{if(!(c<o&&0>s(d,r)))break e;e[a]=d,e[c]=r,a=c}}}return t}function s(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var n=performance;t.unstable_now=function(){return n.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],d=[],u=1,h=null,m=3,p=!1,g=!1,f=!1,v="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function y(e){for(var t=a(d);null!==t;){if(null===t.callback)o(d);else{if(!(t.startTime<=e))break;o(d),t.sortIndex=t.expirationTime,r(c,t)}t=a(d)}}function w(e){if(f=!1,y(e),!g)if(null!==a(c))g=!0,L(j);else{var t=a(d);null!==t&&D(w,t.startTime-e)}}function j(e,r){g=!1,f&&(f=!1,x(S),S=-1),p=!0;var s=m;try{for(y(r),h=a(c);null!==h&&(!(h.expirationTime>r)||e&&!P());){var n=h.callback;if("function"===typeof n){h.callback=null,m=h.priorityLevel;var i=n(h.expirationTime<=r);r=t.unstable_now(),"function"===typeof i?h.callback=i:h===a(c)&&o(c),y(r)}else o(c);h=a(c)}if(null!==h)var l=!0;else{var u=a(d);null!==u&&D(w,u.startTime-r),l=!1}return l}finally{h=null,m=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,N=!1,C=null,S=-1,_=5,E=-1;function P(){return!(t.unstable_now()-E<_)}function I(){if(null!==C){var e=t.unstable_now();E=e;var r=!0;try{r=C(!0,e)}finally{r?k():(N=!1,C=null)}}else N=!1}if("function"===typeof b)k=function(){b(I)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,T=A.port2;A.port1.onmessage=I,k=function(){T.postMessage(null)}}else k=function(){v(I,0)};function L(e){C=e,N||(N=!0,k())}function D(e,r){S=v(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,L(j))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return a(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var r=m;m=t;try{return e()}finally{m=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=m;m=e;try{return t()}finally{m=r}},t.unstable_scheduleCallback=function(e,o,s){var n=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?n+s:n:s=n,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:u++,callback:o,priorityLevel:e,startTime:s,expirationTime:i=s+i,sortIndex:-1},s>n?(e.sortIndex=s,r(d,e),null===a(c)&&e===a(d)&&(f?(x(S),S=-1):f=!0,D(w,s-n))):(e.sortIndex=i,r(c,e),g||p||(g=!0,L(j))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=m;return function(){var r=m;m=t;try{return e.apply(this,arguments)}finally{m=r}}}},255:(e,t,r)=>{"use strict";r.d(t,{userService:()=>p});var a=r(179),o=r(915),s=r(8);const n={getCurrentUser:async()=>{try{const t=(0,s.WR)();if(!t)return console.warn("[localStorageAdapter] No current user ID found"),null;const r=await a.storage.getItem(`user_${t}`);if(!r)return console.log(`[localStorageAdapter] No user data found for ${t}`),null;const n=JSON.parse(r),i=(0,o.EP)(t);i&&(n.avatar=i);const l=await a.storage.getItem(`tag.avatars.${t}`);if(l)try{const e=JSON.parse(l);e&&e.avatarUrl&&((0,o.Ih)(t,e.avatarUrl),n.avatar=e.avatarUrl)}catch(e){console.warn("[localStorageAdapter] Failed to parse avatar data:",e)}return console.log(`[localStorageAdapter] Retrieved user data for ${t}`),n}catch(e){return console.error("[localStorageAdapter] Error getting current user:",e),null}},getUserById:async e=>{try{if(!e)return console.warn("[localStorageAdapter] No user ID provided"),null;const r=await a.storage.getItem(`user_${e}`);if(!r)return console.log(`[localStorageAdapter] No user data found for ${e}`),null;const s=JSON.parse(r),n=(0,o.EP)(e);n&&(s.avatar=n);const i=await a.storage.getItem(`tag.avatars.${e}`);if(i)try{const t=JSON.parse(i);t&&t.avatarUrl&&((0,o.Ih)(e,t.avatarUrl),s.avatar=t.avatarUrl)}catch(t){console.warn("[localStorageAdapter] Failed to parse avatar data:",t)}return console.log(`[localStorageAdapter] Retrieved user data for ${e}`),s}catch(t){return console.error(`[localStorageAdapter] Error getting user ${e}:`,t),null}},createUser:async(e,t)=>{try{if(!e||!t)return{success:!1,error:"Missing userId or userData"};const r=await n.getUserById(e);if(r)return console.log(`[localStorageAdapter] User ${e} already exists`),{success:!0,data:r};const o={id:e,...t,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};return await a.storage.setItem(`user_${e}`,JSON.stringify(o)),console.log(`[localStorageAdapter] Created user ${e}`),{success:!0,data:o}}catch(r){return console.error(`[localStorageAdapter] Error creating user ${e}:`,r),{success:!1,error:r.message}}},updateUser:async(e,t)=>{try{if(!e||!t)return{success:!1,error:"Missing userId or userData"};const r=await n.getUserById(e);if(!r)return console.warn(`[localStorageAdapter] User ${e} not found for update`),{success:!1,error:"User not found"};const o={...r,...t,updatedAt:(new Date).toISOString()};return await a.storage.setItem(`user_${e}`,JSON.stringify(o)),console.log(`[localStorageAdapter] Updated user ${e}`),{success:!0,data:o}}catch(r){return console.error(`[localStorageAdapter] Error updating user ${e}:`,r),{success:!1,error:r.message}}},getAllUsers:async()=>{try{const t=[],r=await a.storage.keys();for(const o of r)if(o&&o.startsWith("user_"))try{const e=await a.storage.getItem(o);if(e){const r=JSON.parse(e);t.push(r)}}catch(e){console.warn(`[localStorageAdapter] Failed to parse user data for key ${o}:`,e)}return console.log(`[localStorageAdapter] Retrieved ${t.length} users`),t}catch(e){return console.error("[localStorageAdapter] Error getting all users:",e),[]}},deleteUser:async e=>{try{return e?(await a.storage.removeItem(`user_${e}`),await a.storage.removeItem(`tag.avatars.${e}`),console.log(`[localStorageAdapter] Deleted user ${e}`),{success:!0}):{success:!1,error:"Missing userId"}}catch(t){return console.error(`[localStorageAdapter] Error deleting user ${e}:`,t),{success:!1,error:t.message}}}};var i=r(420);const l=async()=>{try{const e=(0,s.WR)();if(!e)return console.warn("[mockUsersAdapter] No current user ID found"),null;const t=(0,i.ug)(e);return console.log(`[mockUsersAdapter] Retrieved current user ${e} (fallback)`),t}catch(e){return console.error("[mockUsersAdapter] Error getting current user:",e),null}},c=async e=>{try{if(!e)return console.warn("[mockUsersAdapter] No user ID provided"),null;const t=(0,i.ug)(e);return console.log(`[mockUsersAdapter] Retrieved user ${e} (fallback)`),t}catch(t){return console.error(`[mockUsersAdapter] Error getting user ${e}:`,t),null}},d=async()=>{try{const e=(0,i.CF)();return console.log(`[mockUsersAdapter] Retrieved ${e.length} users (fallback)`),e}catch(e){return console.error("[mockUsersAdapter] Error getting all users:",e),[]}},u=async()=>(console.log("[supabaseAdapter] getCurrentUser not implemented yet"),null),h=async e=>(console.log(`[supabaseAdapter] getUserById not implemented yet for ${e}`),null),m=async(e,t)=>(console.log(`[supabaseAdapter] updateUser not implemented yet for ${e}`),{success:!1,error:"Supabase adapter not implemented yet"}),p={getCurrentUser:async()=>{try{const e=await n.getCurrentUser();if(e)return console.log("[userService] Using LocalStorage user data"),e;const t=await u();return t?(console.log("[userService] Using Supabase user data"),t):(console.log("[userService] Using MockUsers fallback"),await l())}catch(e){return console.error("[userService] Error getting current user:",e),await l()}},getUserById:async e=>{try{const t=await n.getUserById(e);if(t)return console.log(`[userService] Using LocalStorage user data for ${e}`),t;const r=await h(e);return r?(console.log(`[userService] Using Supabase user data for ${e}`),r):(console.log(`[userService] Using MockUsers fallback for ${e}`),await c(e))}catch(t){return console.error(`[userService] Error getting user ${e}:`,t),await c(e)}},updateUser:async(e,t)=>{try{const r=await n.updateUser(e,t);if(r.success)return console.log(`[userService] Updated user ${e} in LocalStorage`),r;const a=await m(e,t);return a.success?(console.log(`[userService] Updated user ${e} in Supabase`),a):(console.warn(`[userService] Failed to update user ${e}`),{success:!1,error:"Failed to update user"})}catch(r){return console.error(`[userService] Error updating user ${e}:`,r),{success:!1,error:r.message}}},ensureUserIndexed:async e=>{try{const t=await p.getUserById(e);if(t)return console.log(`[userService] User ${e} already indexed`),{success:!0,data:t};const r=await c(e);if(r){const t=await n.createUser(e,r);return console.log(`[userService] Created user index for ${e}`),t}return console.warn(`[userService] No base data found for user ${e}`),{success:!1,error:"No base data found"}}catch(t){return console.error(`[userService] Error ensuring user indexed ${e}:`,t),{success:!1,error:t.message}}},getAllUsers:async()=>{try{const e=await n.getAllUsers();return e&&e.length>0?(console.log("[userService] Using LocalStorage users list"),e):(console.log("[userService] Using MockUsers users list"),await d())}catch(e){return console.error("[userService] Error getting all users:",e),await d()}}}},266:(e,t,r)=>{"use strict";r.d(t,{CM:()=>b,KJ:()=>x,Mg:()=>v,OW:()=>h,Ys:()=>y,i8:()=>m,iA:()=>w,mY:()=>f,os:()=>p,vb:()=>g});const a="tag_review_requests",o="tag_final_comments",s="tag_notifications",n=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),i=()=>(new Date).toISOString(),l=()=>{localStorage.getItem(a)||localStorage.setItem(a,JSON.stringify([])),localStorage.getItem(o)||localStorage.setItem(o,JSON.stringify([])),localStorage.getItem(s)||localStorage.setItem(s,JSON.stringify([]))},c=e=>{try{const t=localStorage.getItem(e);return t?JSON.parse(t):[]}catch(t){return console.error(`Error reading ${e} from localStorage:`,t),[]}},d=(e,t)=>{try{return localStorage.setItem(e,JSON.stringify(t)),!0}catch(r){return console.error(`Error saving ${e} to localStorage:`,r),!1}},u=e=>{const t=c(s),r={id:n(),...e,createdAt:i(),isRead:!1};return t.unshift(r),d(s,t),r},h=async(e,t,r,o)=>{l();const s=c(a);if(s.find(r=>r.projectId===e&&r.userId===t))throw new Error("Review request already exists");const h={id:n(),projectId:e,userId:t,userName:o,projectName:r,status:"pending",createdAt:i(),updatedAt:i()};return s.push(h),d(a,s),u({type:"review_request",recipientId:"project_owner",title:"New Review Request",message:`${o} \u8bf7\u6c42\u4e3a\u9879\u76ee "${r}" \u5199\u6700\u7ec8\u8bc4\u8bba`,projectId:e,meta:{requestId:h.id,requesterId:t,requesterName:o}}),h},m=async(e,t)=>{l();const r=c(a).find(r=>r.projectId===e&&r.userId===t);return r?r.status:"none"},p=async e=>{l();return c(a).filter(t=>t.projectId===e)},g=async(e,t,r)=>{l();const o=c(a),s=o.findIndex(t=>t.id===e);if(-1===s)throw new Error("Review request not found");const n=o[s];return n.status=t,n.updatedAt=i(),o[s]=n,d(a,o),u({type:"review_response",recipientId:n.userId,title:"Review Request Response",message:`Your review request for "${n.projectName}" has been ${t}`,projectId:n.projectId,meta:{requestId:n.id,status:t,projectName:n.projectName}}),n},f=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;l();const h=c(o);if(h.find(r=>r.projectId===e&&r.authorId===t.authorId))throw new Error("Final comment already exists for this project");let m=!1;try{const{getCollaborationRequestStatus:a}=await Promise.resolve().then(r.bind(r,405));"approved"===await a(e,t.authorId)&&(m=!0)}catch(g){}if(!m){const r=c(a).find(r=>r.projectId===e&&r.userId===t.authorId);r&&"approved"===r.status&&(m=!0)}if(!m)throw new Error("Review request not approved");const p={id:n(),projectId:e,authorId:t.authorId,authorName:t.authorName,authorRole:t.authorRole,text:t.text,sentiment:t.sentiment||"neutral",createdAt:i()};if(h.push(p),d(o,h),s)try{const{createGeneralNotification:a}=await Promise.resolve().then(r.bind(r,784));await a({userId:s,type:"final_comment",title:"New Final Comment",message:`${t.authorName} has submitted a final comment for project "${e}"`,projectId:e,meta:{commentId:p.id,authorId:t.authorId,authorName:t.authorName,authorRole:t.authorRole,commentText:t.text,sentiment:t.sentiment||"neutral",projectName:u||e}})}catch(g){console.error("Error creating final comment notification:",g)}return p},v=async e=>{l();return c(o).filter(t=>t.projectId===e)},x=()=>{localStorage.removeItem(a),localStorage.removeItem(o),localStorage.removeItem(s)},b=async function(e,t,r,a){return f(e,{authorId:t,authorName:(arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)||"User",authorRole:(arguments.length>7&&void 0!==arguments[7]?arguments[7]:null)||"Member",text:r,sentiment:a},arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null)},y=async()=>{x()},w=async()=>(l(),c(a))},286:function(e,t,r){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(r(630)),s=a(r(611));t.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=o.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,r,a;let o=null,n=null,i=null,l=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(n="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const a=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),s=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");a&&s&&s.length>1&&(i=parseInt(s[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(n)&&(n.length>1?(o={code:"PGRST116",details:`Results contain ${n.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},n=null,i=null,l=406,c="Not Acceptable"):n=1===n.length?n[0]:null)}else{const t=await e.text();try{o=JSON.parse(t),Array.isArray(o)&&404===e.status&&(n=[],o=null,l=200,c="OK")}catch(d){404===e.status&&""===t?(l=204,c="No Content"):o={message:t}}if(o&&this.isMaybeSingle&&(null===(a=null===o||void 0===o?void 0:o.details)||void 0===a?void 0:a.includes("0 rows"))&&(o=null,l=200,c="OK"),o&&this.shouldThrowOnError)throw new s.default(o)}return{error:o,data:n,count:i,status:l,statusText:c}});return this.shouldThrowOnError||(r=r.catch(e=>{var t,r,a;return{error:{message:`${null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null===e||void 0===e?void 0:e.message}`,details:`${null!==(r=null===e||void 0===e?void 0:e.stack)&&void 0!==r?r:""}`,hint:"",code:`${null!==(a=null===e||void 0===e?void 0:e.code)&&void 0!==a?a:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}}},313:(e,t,r)=>{"use strict";r.d(t,{$u:()=>i,IA:()=>n});var a=r(915),o=r(792),s=r(8);const n=async e=>{if(!e)return console.warn("[avatarService] No userId provided"),null;try{if("undefined"!==typeof window){const r=window.localStorage.getItem(`tag.avatars.${e}`);if(r){const e=JSON.parse(r);var t;if(e&&e.avatarUrl)return console.log("[avatarService] Using avatar from localStorage:",null===(t=e.avatarUrl)||void 0===t?void 0:t.substring(0,30)),e.avatarUrl}}const r=await o.A.getAvatarUrl(e);return r?(console.log("[avatarService] Using avatar from IndexedDB:",null===r||void 0===r?void 0:r.substring(0,30)),r):(console.log("[avatarService] No avatar found, using default"),null)}catch(r){return console.error("[avatarService] Error getting unified avatar:",r),null}},i=async e=>{const t=(0,s.WR)();return await(async(e,t)=>{if(!e||!t)return console.warn("[avatarService] Invalid parameters for avatar update"),!1;try{if((0,a.Bx)(e),await o.A.storeAvatar(e,t),"undefined"!==typeof window){const r={avatarUrl:t,timestamp:Date.now()};window.localStorage.setItem(`tag.avatars.${e}`,JSON.stringify(r))}return"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent("avatar:updated",{detail:{userId:e,avatarUrl:t,avatarUpdatedAt:(new Date).toISOString()}})),console.log("[avatarService] Successfully updated unified avatar for user:",e),!0}catch(r){return console.error("[avatarService] Error updating unified avatar:",r),!1}})(t,e)}},337:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});const a=new class{constructor(){this.dbName="TAGPortfolioDB",this.dbVersion=1,this.storeName="images"}async initDB(){return new Promise((e,t)=>{const r=indexedDB.open(this.dbName,this.dbVersion);r.onerror=()=>t(r.error),r.onsuccess=()=>e(r.result),r.onupgradeneeded=e=>{const t=e.target.result;if(!t.objectStoreNames.contains(this.storeName)){t.createObjectStore(this.storeName,{keyPath:"path"}).createIndex("path","path",{unique:!0})}}})}async storeImage(e,t){const r=await this.initDB();let a;if(t instanceof Blob)a=t;else if(t instanceof File)a=t;else{if("string"!==typeof t||!t.startsWith("data:image/"))throw new Error("Unsupported data format");{const e=await fetch(t);a=await e.blob()}}return new Promise((t,o)=>{const s=r.transaction([this.storeName],"readwrite").objectStore(this.storeName).put({path:e,file:a,timestamp:Date.now()});s.onsuccess=()=>t({success:!0,path:e}),s.onerror=()=>o(s.error)})}async getImage(e){const t=await this.initDB();return new Promise((r,a)=>{const o=t.transaction([this.storeName],"readonly").objectStore(this.storeName).get(e);o.onsuccess=()=>{if(o.result){const t=o.result.file;t instanceof Blob?(console.log(`[ImageStorage] Found Blob for ${e}: ${t.size} bytes`),r({success:!0,file:t})):(console.warn(`[ImageStorage] Invalid Blob format for ${e}: ${typeof t}`),r({success:!1,error:"Invalid Blob format"}))}else r({success:!1,error:"Image not found"})},o.onerror=()=>a(o.error)})}async deleteImage(e){const t=await this.initDB();return new Promise((r,a)=>{const o=t.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(e);o.onsuccess=()=>r({success:!0}),o.onerror=()=>a(o.error)})}async deleteImages(e){return(await Promise.all(e.map(e=>this.deleteImage(e)))).every(e=>e.success)}async getImageUrl(e){if(!e||"string"!==typeof e)return console.log(`[ImageStorage] Invalid filePath type: ${typeof e}, returning null`),null;if(console.log(`[ImageStorage] Getting URL for: ${e}`),e.startsWith("data:image/"))try{const t=await fetch(e),r=await t.blob(),a=URL.createObjectURL(r);return console.log(`[ImageStorage] Created ObjectURL from Data URL: ${a}`),a}catch(t){return console.error(`[ImageStorage] Error converting Data URL to ObjectURL: ${t}`),null}if(e.startsWith("http"))return console.log(`[ImageStorage] Returning remote URL: ${e}`),e;if(e.startsWith("portfolio/")||e.startsWith("collaboration_"))try{console.log(`[ImageStorage] Looking up in IndexedDB: ${e}`);const t=await this.getImage(e);if(console.log("[ImageStorage] IndexedDB lookup result:",t),t.success&&t.file instanceof Blob){const e=URL.createObjectURL(t.file);return console.log(`[ImageStorage] Created ObjectURL from IndexedDB: ${e}`),e}return console.log(`[ImageStorage] Blob not found in IndexedDB for ${e}`),null}catch(t){return console.error(`[ImageStorage] Error reading from IndexedDB: ${t}`),null}return console.log(`[ImageStorage] No valid image found for ${e}`),null}revokeImageUrl(e){e&&e.startsWith("blob:")&&URL.revokeObjectURL(e)}}},358:(e,t)=>{"use strict";const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,a=/^[\u0021-\u003A\u003C-\u007E]*$/,o=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,n=Object.prototype.toString,i=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function l(e,t,r){do{const r=e.charCodeAt(t);if(32!==r&&9!==r)return t}while(++t<r);return r}function c(e,t,r){for(;t>r;){const r=e.charCodeAt(--t);if(32!==r&&9!==r)return t+1}return r}function d(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},374:function(e,t,r){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(r(286));class s extends o.default{select(e){let t=!1;const r=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e){let{ascending:t=!0,nullsFirst:r,foreignTable:a,referencedTable:o=a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=o?`${o}.order`:"order",n=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${n?`${n},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a="undefined"===typeof r?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,t){let{foreignTable:r,referencedTable:a=r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o="undefined"===typeof a?"offset":`${a}.offset`,s="undefined"===typeof a?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(s,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain(){let{analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:a=!1,wal:o=!1,format:s="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var n;const i=[e?"analyze":null,t?"verbose":null,r?"settings":null,a?"buffers":null,o?"wal":null].filter(Boolean).join("|"),l=null!==(n=this.headers.Accept)&&void 0!==n?n:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${s}; for="${l}"; options=${i};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}t.default=s},391:(e,t,r)=>{"use strict";var a=r(950);t.createRoot=a.createRoot,t.hydrateRoot=a.hydrateRoot},392:(e,t,r)=>{"use strict";var a=r(218),o=r(496);function s(e){var t=0,r=0,a=0,o=0;return"detail"in e&&(r=e.detail),"wheelDelta"in e&&(r=-e.wheelDelta/120),"wheelDeltaY"in e&&(r=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=r,r=0),a=10*t,o=10*r,"deltaY"in e&&(o=e.deltaY),"deltaX"in e&&(a=e.deltaX),(a||o)&&e.deltaMode&&(1==e.deltaMode?(a*=40,o*=40):(a*=800,o*=800)),a&&!t&&(t=a<1?-1:1),o&&!r&&(r=o<1?-1:1),{spinX:t,spinY:r,pixelX:a,pixelY:o}}s.getEventType=function(){return a.firefox()?"DOMMouseScroll":o("wheel")?"wheel":"mousewheel"},e.exports=s},400:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="0.0.0-automated"},405:(e,t,r)=>{"use strict";r.d(t,{BL:()=>i,RO:()=>c,g$:()=>l,getCollaborationRequestStatus:()=>d});const a="tag.collaboration_requests",o=()=>(new Date).toISOString(),s=()=>{try{if("undefined"===typeof window)return[];const e=window.localStorage.getItem(a);return e?JSON.parse(e):[]}catch(e){return console.error("Error reading collaboration requests:",e),[]}},n=e=>{try{if("undefined"===typeof window)return;window.localStorage.setItem(a,JSON.stringify(e))}catch(t){console.error("Error writing collaboration requests:",t)}},i=async e=>{const{projectId:t,projectName:r,requesterId:a,requesterName:i,requesterAvatar:l,ownerId:c,ownerName:d,message:u=""}=e,h={id:Date.now().toString(36)+Math.random().toString(36).slice(2),projectId:t,projectName:r,requesterId:a,requesterName:i,requesterAvatar:l,ownerId:c,ownerName:d,message:u,status:"pending",createdAt:o(),updatedAt:o()},m=s();return m.unshift(h),n(m),"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent("collaboration:requestCreated",{detail:{request:h}})),h},l=async(e,t)=>{const a=s(),i=a.findIndex(r=>r.id===e&&r.ownerId===t);if(-1===i)throw new Error("Request not found");const l=a[i];l.status="approved",l.updatedAt=o(),n(a);try{const{createGeneralNotification:e}=await Promise.resolve().then(r.bind(r,784));await e({userId:l.requesterId,type:"collaboration",title:"Collaboration Request Approved",message:`Your collaboration request for project "${l.projectName}" has been approved by ${l.ownerName}. You can now submit your final review.`,projectId:l.projectId,meta:{requestId:l.id,status:"approved",projectName:l.projectName,ownerName:l.ownerName}})}catch(c){console.error("Error creating approval notification:",c)}return"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent("collaboration:requestStatusChanged",{detail:{requestId:e,status:"approved",request:l}})),l},c=async(e,t)=>{const a=s(),i=a.findIndex(r=>r.id===e&&r.ownerId===t);if(-1===i)throw new Error("Request not found");const l=a[i];l.status="denied",l.updatedAt=o(),n(a);try{const{createGeneralNotification:e}=await Promise.resolve().then(r.bind(r,784));await e({userId:l.requesterId,type:"collaboration",title:"Collaboration Request Denied",message:`Your collaboration request for project "${l.projectName}" has been denied by ${l.ownerName}.`,projectId:l.projectId,meta:{requestId:l.id,status:"denied",projectName:l.projectName,ownerName:l.ownerName}})}catch(c){console.error("Error creating denial notification:",c)}return"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent("collaboration:requestStatusChanged",{detail:{requestId:e,status:"denied",request:l}})),l},d=async(e,t)=>{const r=s().find(r=>r.projectId===e&&r.requesterId===t);return r?r.status:"none"}},420:(e,t,r)=>{"use strict";r.d(t,{CF:()=>s,o1:()=>a,ug:()=>o});const a={alice:{id:"alice",name:"Alice",displayName:"Alice",avatar:null,role:"Photographer",roleIcon:"\ud83d\udcf7",bio:"Professional photographer specializing in portrait and street photography. Passionate about capturing authentic moments and telling stories through images.",school:"MICA",pronouns:"She/Her",majors:["Photography","Fine Art"],skills:["Photography","Digital Art","Creative Design"],socialLinks:{instagram:"https://www.instagram.com/alice",portfolio:"https://alice.com",discord:"https://discord.gg/alice"},portfolio:[{id:"pf_alice_01",title:"Traditional Japanese Temple",thumb:null,tags:["Architecture","Traditional"],category:"Digital Art"}]},bryan:{id:"bryan",name:"Bryan Rodriguez",displayName:"Bryan",avatar:null,role:"Illustrator",roleIcon:"\ud83c\udfa8",bio:"Digital illustrator and concept artist. Creating vibrant characters and imaginative worlds through digital art and traditional techniques.",school:"Parsons School of Design",pronouns:"he/him",majors:["Illustration","Graphic Design"],skills:["Illustration","Digital Art","Creative Design"],socialLinks:{instagram:"https://www.instagram.com/bryanrodriguez",portfolio:"https://bryanrodriguez.com",discord:"https://discord.gg/bryanrodriguez"},portfolio:[{id:"pf_bryan_01",title:"Fantasy Character",thumb:null,tags:["Character","Fantasy"],category:"Illustration"},{id:"pf_bryan_02",title:"Sci-Fi Concept",thumb:null,tags:["Concept","Sci-Fi"],category:"Illustration"},{id:"pf_bryan_03",title:"Digital Painting",thumb:null,tags:["Digital","Painting"],category:"Illustration"}]},alex:{id:"alex",name:"Alex Chen",displayName:"Alex",avatar:null,role:"Concept Artist",roleIcon:"\ud83c\udfad",bio:"Experienced concept artist and 3D modeler. Specializing in environment design and character development for games and films.",school:"California Institute of the Arts",pronouns:"they/them",majors:["Animation","Game Design"],skills:["Concept Art","Digital Art","Creative Design"],socialLinks:{instagram:"https://www.instagram.com/alexchen",portfolio:"https://alexchen.com",discord:"https://discord.gg/alexchen"},portfolio:[{id:"pf_alex_01",title:"Mountain Landscape",thumb:null,tags:["Environment","Landscape"],category:"Concept Art"},{id:"pf_alex_02",title:"Character Design",thumb:null,tags:["Character","Design"],category:"Concept Art"},{id:"pf_alex_03",title:"3D Environment",thumb:null,tags:["3D","Environment"],category:"Concept Art"}]}},o=e=>{const t=a[e];return t||(console.warn(`[getUserInfo] User not found: ${e}, falling back to alice`),a.alice)},s=()=>Object.values(a)},450:(e,t,r)=>{"use strict";r.d(t,{$F:()=>_,fN:()=>X,BL:()=>ae.BL,Gw:()=>te.Gw,zF:()=>E.A,Bc:()=>ie,getCollaborationRequestStatus:()=>ae.getCollaborationRequestStatus,E$:()=>ee.getProfile,i8:()=>re.i8,lY:()=>O,Lt:()=>ee.Lt,CM:()=>re.CM,F4:()=>ne,Jb:()=>y});r(255);var a=r(420),o=r(200);const s=async e=>{try{if(!e)return{success:!1,error:"Missing userId"};const t=await(0,o.ep)(e);return console.log(`[localStorageAdapter] Retrieved works for user ${e}`),t}catch(t){return console.error(`[localStorageAdapter] Error getting works for user ${e}:`,t),{success:!1,error:t.message}}},n=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{if(!e)return{success:!1,error:"Missing workId"};if(t){const n=await(0,o.ep)(t);if(n.success){const o=n.data.find(t=>t.id===e);if(o){var r,s;const n={...o,author:{id:t,name:(null===(r=(0,a.ug)(t))||void 0===r?void 0:r.name)||"Unknown Artist",role:o.category||"Design",avatar:(null===(s=(0,a.ug)(t))||void 0===s?void 0:s.avatar)||null}};return console.log(`[localStorageAdapter] Found work ${e} for user ${t}`),{success:!0,data:n}}}}else{const t=await(0,o.S5)();if(t.success){const r=t.data.find(t=>t.id===e);if(r){var n,i,l,c;const t={...r,author:{id:(null===(n=r.profiles)||void 0===n?void 0:n.id)||r.userId||"unknown",name:(null===(i=r.profiles)||void 0===i?void 0:i.full_name)||"Unknown Artist",role:(null===(l=r.profiles)||void 0===l?void 0:l.role)||r.category||"Design",avatar:(null===(c=r.profiles)||void 0===c?void 0:c.avatar_url)||""}};return console.log(`[localStorageAdapter] Found work ${e}`),{success:!0,data:t}}}}return console.log(`[localStorageAdapter] Work ${e} not found`),{success:!1,error:"Work not found"}}catch(d){return console.error(`[localStorageAdapter] Error getting work ${e}:`,d),{success:!1,error:d.message}}},i=async e=>{try{if(!e)return{success:!1,error:"Missing workData"};const t=await(0,o.qo)(e);return console.log("[localStorageAdapter] Created work"),t}catch(t){return console.error("[localStorageAdapter] Error creating work:",t),{success:!1,error:t.message}}},l=async(e,t)=>{try{if(!e||!t)return{success:!1,error:"Missing workId or workData"};const r=await(0,o.updatePortfolioItem)(e,t);return console.log(`[localStorageAdapter] Updated work ${e}`),r}catch(r){return console.error(`[localStorageAdapter] Error updating work ${e}:`,r),{success:!1,error:r.message}}},c=async e=>{try{if(!e)return{success:!1,error:"Missing workId"};const t=await(0,o.zB)(e);return console.log(`[localStorageAdapter] Deleted work ${e}`),t}catch(t){return console.error(`[localStorageAdapter] Error deleting work ${e}:`,t),{success:!1,error:t.message}}},d=async()=>{try{const e=await(0,o.S5)();if(e.success&&e.data){const t=e.data.map(e=>{var t,r,a;return{...e,author:{id:(null===(t=e.profiles)||void 0===t?void 0:t.id)||e.userId||"unknown",name:(null===(r=e.profiles)||void 0===r?void 0:r.full_name)||"Unknown Artist",role:e.category||"Design",avatar:(null===(a=e.profiles)||void 0===a?void 0:a.avatar_url)||""}}});return console.log("[localStorageAdapter] Retrieved all public works with unified author format"),{success:!0,data:t}}return e}catch(e){return console.error("[localStorageAdapter] Error getting all public works:",e),{success:!1,error:e.message}}},u=async e=>{try{if(!e)return{success:!1,error:"Missing userId"};const t=a.o1[e];if(!t||!t.portfolio)return console.log(`[mockUsersAdapter] No portfolio found for user ${e}`),{success:!0,data:[]};const r=t.portfolio.map(r=>({id:r.id,title:r.title,description:"",category:r.category,tags:r.tags,imagePaths:[r.thumb],thumbnailPath:r.thumb,isPublic:!0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),author:{id:e,name:t.name,avatar:t.avatar,role:t.role}}));return console.log(`[mockUsersAdapter] Retrieved ${r.length} works for user ${e} (fallback)`),{success:!0,data:r}}catch(t){return console.error(`[mockUsersAdapter] Error getting works for user ${e}:`,t),{success:!1,error:t.message}}},h=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{if(!e)return{success:!1,error:"Missing workId"};if(t){const r=a.o1[t];if(r&&r.portfolio){const a=r.portfolio.find(t=>t.id===e);if(a){const o={id:a.id,title:a.title,description:"",category:a.category,tags:a.tags,imagePaths:[a.thumb],thumbnailPath:a.thumb,isPublic:!0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),author:{id:t,name:r.name,avatar:r.avatar,role:r.role}};return console.log(`[mockUsersAdapter] Found work ${e} for user ${t} (fallback)`),{success:!0,data:o}}}}else for(const[t,r]of Object.entries(a.o1))if(r.portfolio){const a=r.portfolio.find(t=>t.id===e);if(a){const o={id:a.id,title:a.title,description:"",category:a.category,tags:a.tags,imagePaths:[a.thumb],thumbnailPath:a.thumb,isPublic:!0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),author:{id:t,name:r.name,avatar:r.avatar,role:r.role}};return console.log(`[mockUsersAdapter] Found work ${e} for user ${t} (fallback)`),{success:!0,data:o}}}return console.log(`[mockUsersAdapter] Work ${e} not found (fallback)`),{success:!1,error:"Work not found"}}catch(r){return console.error(`[mockUsersAdapter] Error getting work ${e}:`,r),{success:!1,error:r.message}}},m=async()=>{try{const e=[];for(const[t,r]of Object.entries(a.o1))if(r.portfolio){const a=r.portfolio.map(e=>({id:e.id,title:e.title,description:"",category:e.category,tags:e.tags,imagePaths:[e.thumb],thumbnailPath:e.thumb,isPublic:!0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),author:{id:t,name:r.name,avatar:r.avatar,role:r.role}}));e.push(...a)}return console.log(`[mockUsersAdapter] Retrieved ${e.length} public works (fallback)`),{success:!0,data:e}}catch(e){return console.error("[mockUsersAdapter] Error getting all public works:",e),{success:!1,error:e.message}}},p=async e=>(console.log(`[supabaseAdapter] getUserWorks not implemented yet for ${e}`),{success:!1,data:[]}),g=async function(e){return console.log(`[supabaseAdapter] getWorkById not implemented yet for ${e}`),{success:!1,data:null}},f=async e=>(console.log("[supabaseAdapter] createWork not implemented yet"),{success:!1,error:"Supabase adapter not implemented yet"}),v=async(e,t)=>(console.log(`[supabaseAdapter] updateWork not implemented yet for ${e}`),{success:!1,error:"Supabase adapter not implemented yet"}),x=async e=>(console.log(`[supabaseAdapter] deleteWork not implemented yet for ${e}`),{success:!1,error:"Supabase adapter not implemented yet"}),b=async()=>(console.log("[supabaseAdapter] getAllPublicWorks not implemented yet"),{success:!1,data:[]}),y={getUserWorks:async e=>{try{const t=await s(e);if(t&&t.data&&t.data.length>0)return console.log(`[workService] Using LocalStorage works for user ${e}`),t;const r=await p(e);return r&&r.data&&r.data.length>0?(console.log(`[workService] Using Supabase works for user ${e}`),r):(console.log(`[workService] Using MockUsers fallback for user ${e}`),await u(e))}catch(t){return console.error(`[workService] Error getting works for user ${e}:`,t),await u(e)}},getWorkById:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const r=await n(e,t);if(r&&r.data)return console.log(`[workService] Using LocalStorage work data for ${e}`),r;const a=await g(e,t);return a&&a.data?(console.log(`[workService] Using Supabase work data for ${e}`),a):(console.log(`[workService] Using MockUsers fallback for work ${e}`),await h(e,t))}catch(r){return console.error(`[workService] Error getting work ${e}:`,r),await h(e,t)}},createWork:async e=>{try{const t=await i(e);if(t.success)return console.log("[workService] Created work in LocalStorage"),t;const r=await f(e);return r.success?(console.log("[workService] Created work in Supabase"),r):(console.warn("[workService] Failed to create work"),{success:!1,error:"Failed to create work"})}catch(t){return console.error("[workService] Error creating work:",t),{success:!1,error:t.message}}},updateWork:async(e,t)=>{try{const r=await l(e,t);if(r.success)return console.log(`[workService] Updated work ${e} in LocalStorage`),r;const a=await v(e,t);return a.success?(console.log(`[workService] Updated work ${e} in Supabase`),a):(console.warn(`[workService] Failed to update work ${e}`),{success:!1,error:"Failed to update work"})}catch(r){return console.error(`[workService] Error updating work ${e}:`,r),{success:!1,error:r.message}}},deleteWork:async e=>{try{const t=await c(e);if(t.success)return console.log(`[workService] Deleted work ${e} from LocalStorage`),t;const r=await x(e);return r.success?(console.log(`[workService] Deleted work ${e} from Supabase`),r):(console.warn(`[workService] Failed to delete work ${e}`),{success:!1,error:"Failed to delete work"})}catch(t){return console.error(`[workService] Error deleting work ${e}:`,t),{success:!1,error:t.message}}},getAllPublicWorks:async()=>{try{const e=await d();if(e&&e.data&&e.data.length>0)return console.log("[workService] Using LocalStorage public works"),e;const t=await b();return t&&t.data&&t.data.length>0?(console.log("[workService] Using Supabase public works"),t):(console.log("[workService] Using MockUsers fallback for public works"),await m())}catch(e){return console.error("[workService] Error getting all public works:",e),await m()}}};var w=r(179);const j={getPublicArtists:async()=>{try{const t=[],r=await w.storage.keys();for(const a of r)if(a&&a.startsWith("artist_"))try{const e=await w.storage.getItem(a);if(e){const r=JSON.parse(e);t.push(r)}}catch(e){console.warn(`[localStorageAdapter] Failed to parse artist data for key ${a}:`,e)}return console.log(`[localStorageAdapter] Retrieved ${t.length} artists`),{success:!0,data:t}}catch(e){return console.error("[localStorageAdapter] Error getting public artists:",e),{success:!1,error:e.message}}},getArtistProfile:async e=>{try{if(!e)return{success:!1,error:"Missing artistId"};const t=await w.storage.getItem(`artist_${e}`);if(!t)return console.log(`[localStorageAdapter] No artist data found for ${e}`),{success:!1,error:"Artist not found"};const r=JSON.parse(t);return console.log(`[localStorageAdapter] Retrieved artist profile for ${e}`),{success:!0,data:r}}catch(t){return console.error(`[localStorageAdapter] Error getting artist profile ${e}:`,t),{success:!1,error:t.message}}},createArtist:async(e,t)=>{try{if(!e||!t)return{success:!1,error:"Missing artistId or artistData"};const r=await j.getArtistProfile(e);if(r.success)return console.log(`[localStorageAdapter] Artist ${e} already exists`),{success:!0,data:r.data};const a={id:e,...t,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};return await w.storage.setItem(`artist_${e}`,JSON.stringify(a)),console.log(`[localStorageAdapter] Created artist ${e}`),{success:!0,data:a}}catch(r){return console.error(`[localStorageAdapter] Error creating artist ${e}:`,r),{success:!1,error:r.message}}},updateArtist:async(e,t)=>{try{if(!e||!t)return{success:!1,error:"Missing artistId or artistData"};const r=await j.getArtistProfile(e);if(!r.success)return console.warn(`[localStorageAdapter] Artist ${e} not found for update`),{success:!1,error:"Artist not found"};const a={...r.data,...t,updatedAt:(new Date).toISOString()};return await w.storage.setItem(`artist_${e}`,JSON.stringify(a)),console.log(`[localStorageAdapter] Updated artist ${e}`),{success:!0,data:a}}catch(r){return console.error(`[localStorageAdapter] Error updating artist ${e}:`,r),{success:!1,error:r.message}}},saveArtistIndex:async e=>{try{if(!Array.isArray(e))return{success:!1,error:"Artists must be an array"};for(const t of e)t.id&&await w.storage.setItem(`artist_${t.id}`,JSON.stringify(t));return console.log(`[localStorageAdapter] Saved ${e.length} artists to index`),{success:!0,data:e}}catch(t){return console.error("[localStorageAdapter] Error saving artist index:",t),{success:!1,error:t.message}}},deleteArtist:async e=>{try{return e?(await w.storage.removeItem(`artist_${e}`),console.log(`[localStorageAdapter] Deleted artist ${e}`),{success:!0}):{success:!1,error:"Missing artistId"}}catch(t){return console.error(`[localStorageAdapter] Error deleting artist ${e}:`,t),{success:!1,error:t.message}}}},k=async()=>{try{const e=(0,a.CF)().map(e=>({id:e.id,name:e.name,displayName:e.displayName,avatar:e.avatar,role:e.role,roleIcon:e.roleIcon,bio:e.bio,school:e.school,pronouns:e.pronouns,majors:e.majors,skills:e.skills,socialLinks:e.socialLinks,works:e.portfolio?e.portfolio.map(e=>({id:e.id,title:e.title,thumbnailPath:e.thumb,category:e.category})):[],followers:0,following:0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}));return console.log(`[mockUsersAdapter] Retrieved ${e.length} artists (fallback)`),{success:!0,data:e}}catch(e){return console.error("[mockUsersAdapter] Error getting public artists:",e),{success:!1,error:e.message}}},N=async e=>{try{if(!e)return{success:!1,error:"Missing artistId"};let t=a.o1[e];if(!t){if(t=a.o1[e.toLowerCase()],!t){t=Object.values(a.o1).find(t=>{var r,a;return(null===(r=t.displayName)||void 0===r?void 0:r.toLowerCase())===e.toLowerCase()||(null===(a=t.name)||void 0===a?void 0:a.toLowerCase())===e.toLowerCase()})}t||(console.warn(`[mockUsersAdapter] No artist found for ${e}, using alice as fallback`),t=a.o1.alice)}const r={id:t.id,name:t.name,displayName:t.displayName,avatar:t.avatar,role:t.role,roleIcon:t.roleIcon,bio:t.bio,school:t.school,pronouns:t.pronouns,majors:t.majors,skills:t.skills,socialLinks:t.socialLinks,works:t.portfolio?t.portfolio.map(e=>({id:e.id,title:e.title,thumbnailPath:e.thumb,category:e.category})):[],followers:0,following:0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};return console.log(`[mockUsersAdapter] Retrieved artist profile for ${e} (fallback)`),{success:!0,data:r}}catch(t){return console.error(`[mockUsersAdapter] Error getting artist profile ${e}:`,t),{success:!1,error:t.message}}},C=async e=>(console.log(`[supabaseAdapter] getArtistProfile not implemented yet for ${e}`),{success:!1,data:null}),S=async(e,t)=>(console.log(`[supabaseAdapter] updateArtist not implemented yet for ${e}`),{success:!1,error:"Supabase adapter not implemented yet"}),_={getPublicArtists:async()=>{try{console.log("[artistService] Getting all registered artists");const{getProfile:o}=await Promise.resolve().then(r.bind(r,121)),{storage:s}=await Promise.resolve().then(r.bind(r,179)),n=(await s.keys()).filter(e=>e&&e.startsWith("tag.userProfile.")),i=[];for(const l of n)try{const a=l.replace("tag.userProfile.",""),n=await o(a);if(!n.success||!n.data){console.warn(`[artistService] Failed to get profile for ${a}`);continue}const c=n.data;if(!c.fullName||!c.fullName.trim()){console.log(`[artistService] Skipping user ${a} - no fullName`);continue}const d=`portfolio_${a}`,u=await s.getItem(d);let h=0;if(u)try{const e=JSON.parse(u);Array.isArray(e)&&(h=e.filter(e=>!1!==e.isPublic).length)}catch(e){console.warn(`[artistService] Failed to parse portfolio for ${a}:`,e)}const{getFollowersCount:m,getFollowingList:p}=await Promise.resolve().then(r.bind(r,860));let g=0,f=0;try{const e=await m(a);e.success&&(g=e.data.followersCount);const t=await p(a);t.success&&(f=t.data.followingCount)}catch(t){console.warn(`[artistService] Failed to get follow stats for ${a}:`,t)}const v={id:a,name:c.fullName,title:c.title||"Artist",school:c.school||"",majors:c.majors||[],minors:c.minors||[],avatar:c.avatar||null,worksCount:h,followers:g,following:f,createdAt:c.updatedAt||(new Date).toISOString(),updatedAt:c.updatedAt||(new Date).toISOString()};i.push(v)}catch(a){console.warn(`[artistService] Error processing user profile ${l}:`,a)}return i.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)),console.log(`[artistService] Found ${i.length} registered artists`),{success:!0,data:i}}catch(a){return console.error("[artistService] Error getting public artists:",a),console.log("[artistService] Falling back to MockUsers"),await k()}},getArtistProfile:async e=>{try{const t=await j.getArtistProfile(e);if(t&&t.data)return console.log(`[artistService] Using LocalStorage artist profile for ${e}`),t;const r=await C(e);return r&&r.data?(console.log(`[artistService] Using Supabase artist profile for ${e}`),r):(console.log(`[artistService] Using MockUsers fallback for artist ${e}`),await N(e))}catch(t){return console.error(`[artistService] Error getting artist profile ${e}:`,t),await N(e)}},bootstrapFromPortfolios:async()=>{try{console.log("[artistService] Starting bootstrap from portfolios");const e=await y.getAllPublicWorks();if(!e.success)return console.warn("[artistService] Failed to get all works for bootstrap"),{success:!1,error:"Failed to get works"};const t=new Map;for(const o of e.data)if(o.author&&o.author.id){const e=o.author.id;if(!t.has(e)){const r={id:e,name:o.author.name||"Unknown Artist",avatar:o.author.avatar||"",role:o.author.role||"Artist",bio:"",school:"",pronouns:"",majors:[],skills:[],socialLinks:{},works:[],followers:0,following:0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};t.set(e,r)}const r=t.get(e);r.works.find(e=>e.id===o.id)||r.works.push({id:o.id,title:o.title,thumbnailPath:o.thumbnailPath,category:o.category})}const r=Array.from(t.values()),a=await j.saveArtistIndex(r);return console.log(`[artistService] Bootstraped ${r.length} artists from portfolios`),a}catch(e){return console.error("[artistService] Error bootstrapping from portfolios:",e),{success:!1,error:e.message}}},ensureArtistIndexed:async e=>{try{if(!e)return{success:!1,error:"Missing userId"};const a=await _.getArtistProfile(e);if(a&&a.success)return console.log(`[artistService] Artist ${e} already indexed`),{success:!0,data:a.data};const{userService:o}=await Promise.resolve().then(r.bind(r,255)),s=await o.getUserById(e);if(s){const r=`portfolio_${e}`,a=await j.getItem(r);let o=0,n=[];if(a)try{const e=JSON.parse(a);if(Array.isArray(e)){const t=e.filter(e=>!1!==e.isPublic);o=t.length,n=t}}catch(t){console.warn(`[artistService] Failed to parse portfolio for ${e}:`,t)}const i={id:e,name:s.name||s.displayName||"Unknown Artist",avatar:s.avatar||"",role:s.role||"Artist",bio:s.bio||"",school:s.school||"",pronouns:s.pronouns||"",majors:s.majors||[],skills:s.skills||[],socialLinks:s.socialLinks||{},works:n,worksCount:o,followers:0,following:0,createdAt:s.updatedAt||(new Date).toISOString(),updatedAt:s.updatedAt||(new Date).toISOString()},l=await j.createArtist(e,i);return console.log(`[artistService] Created artist index for ${e}`),l}return console.warn(`[artistService] No user data found for ${e}`),{success:!1,error:"No user data found"}}catch(a){return console.error(`[artistService] Error ensuring artist indexed ${e}:`,a),{success:!1,error:a.message}}},updateArtist:async(e,t)=>{try{const r=await j.updateArtist(e,t);if(r.success)return console.log(`[artistService] Updated artist ${e} in LocalStorage`),r;const a=await S(e,t);return a.success?(console.log(`[artistService] Updated artist ${e} in Supabase`),a):(console.warn(`[artistService] Failed to update artist ${e}`),{success:!1,error:"Failed to update artist"})}catch(r){return console.error(`[artistService] Error updating artist ${e}:`,r),{success:!1,error:r.message}}}};r(32);r(979);var E=r(945);r(506);const P=async e=>{try{const t=`notifications_${e.receiverId}`,r=JSON.parse(localStorage.getItem(t)||"[]");r.unshift(e);const a=r.slice(0,100);return localStorage.setItem(t,JSON.stringify(a)),window.dispatchEvent(new CustomEvent("notif:unreadChanged",{detail:{userId:e.receiverId}})),console.log(`[localStorageAdapter] Created notification for user ${e.receiverId}`),{success:!0,data:e}}catch(t){return console.error("[localStorageAdapter] Error creating notification:",t),{success:!1,error:t.message}}},I=async e=>{try{const t=`notifications_${e}`,r=JSON.parse(localStorage.getItem(t)||"[]");return console.log(`[localStorageAdapter] Retrieved ${r.length} notifications for user ${e}`),{success:!0,data:r}}catch(t){return console.error(`[localStorageAdapter] Error getting notifications for user ${e}:`,t),{success:!1,error:t.message}}},A=async e=>{try{const t=Object.keys(localStorage).filter(e=>e.startsWith("notifications_"));for(const r of t){const t=JSON.parse(localStorage.getItem(r)||"[]"),a=t.findIndex(t=>t.id===e);if(-1!==a){t[a].isRead=!0,localStorage.setItem(r,JSON.stringify(t));const o=r.replace("notifications_","");return window.dispatchEvent(new CustomEvent("notif:unreadChanged",{detail:{userId:o}})),console.log(`[localStorageAdapter] Marked notification ${e} as read`),{success:!0,data:t[a]}}}return console.warn(`[localStorageAdapter] Notification ${e} not found`),{success:!1,error:"Notification not found"}}catch(t){return console.error("[localStorageAdapter] Error marking notification as read:",t),{success:!1,error:t.message}}},T=async e=>{try{const t=`notifications_${e}`,r=JSON.parse(localStorage.getItem(t)||"[]").map(e=>({...e,isRead:!0}));return localStorage.setItem(t,JSON.stringify(r)),window.dispatchEvent(new CustomEvent("notif:unreadChanged",{detail:{userId:e}})),console.log(`[localStorageAdapter] Marked all notifications as read for user ${e}`),{success:!0,data:r}}catch(t){return console.error("[localStorageAdapter] Error marking all notifications as read:",t),{success:!1,error:t.message}}},L=async e=>{try{const t=Object.keys(localStorage).filter(e=>e.startsWith("notifications_"));for(const r of t){const t=JSON.parse(localStorage.getItem(r)||"[]"),a=t.findIndex(t=>t.id===e);if(-1!==a){t.splice(a,1),localStorage.setItem(r,JSON.stringify(t));const o=r.replace("notifications_","");return window.dispatchEvent(new CustomEvent("notif:unreadChanged",{detail:{userId:o}})),console.log(`[localStorageAdapter] Deleted notification ${e}`),{success:!0}}}return console.warn(`[localStorageAdapter] Notification ${e} not found`),{success:!1,error:"Notification not found"}}catch(t){return console.error("[localStorageAdapter] Error deleting notification:",t),{success:!1,error:t.message}}},D=async e=>(console.log("[supabaseAdapter] Would create notification in Supabase:",e),{success:!1,error:"Supabase adapter not implemented yet"}),M=async e=>(console.log(`[supabaseAdapter] Would get notifications from Supabase for user: ${e}`),{success:!1,error:"Supabase adapter not implemented yet"}),R=async e=>(console.log(`[supabaseAdapter] Would mark notification as read in Supabase: ${e}`),{success:!1,error:"Supabase adapter not implemented yet"}),$=async e=>(console.log(`[supabaseAdapter] Would mark all notifications as read in Supabase for user: ${e}`),{success:!1,error:"Supabase adapter not implemented yet"}),F=async e=>(console.log(`[supabaseAdapter] Would delete notification in Supabase: ${e}`),{success:!1,error:"Supabase adapter not implemented yet"}),O={createFollowNotification:async(e,t,r)=>{try{const a={id:`follow_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"follow",senderId:e,senderName:t,receiverId:r,title:"New Follower",content:`${t} followed you`,message:`${t} followed you`,isRead:!1,createdAt:(new Date).toISOString(),meta:{action:"follow",followerId:e,followerName:t}},o=await P(a);if(o.success)return console.log("[notificationService] Created follow notification in LocalStorage"),o;const s=await D(a);return s.success?(console.log("[notificationService] Created follow notification in Supabase"),s):(console.warn("[notificationService] Failed to create follow notification"),{success:!1,error:"Failed to create follow notification"})}catch(a){return console.error("[notificationService] Error creating follow notification:",a),{success:!1,error:a.message}}},createLikeNotification:async(e,t,r,a,o)=>{try{const s={id:`like_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"like",senderId:e,senderName:t,receiverId:o,title:"Work Liked",content:`${t} liked your work "${a}"`,message:`${t} liked your work "${a}"`,isRead:!1,createdAt:(new Date).toISOString(),meta:{action:"like",workId:r,workTitle:a,likerId:e,likerName:t}},n=await P(s);if(n.success)return console.log("[notificationService] Created like notification in LocalStorage"),n;const i=await D(s);return i.success?(console.log("[notificationService] Created like notification in Supabase"),i):(console.warn("[notificationService] Failed to create like notification"),{success:!1,error:"Failed to create like notification"})}catch(s){return console.error("[notificationService] Error creating like notification:",s),{success:!1,error:s.message}}},createCommentNotification:async(e,t,r,a,o,s)=>{try{const n={id:`comment_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"comment",senderId:e,senderName:t,receiverId:o,title:"New Comment",content:`${t} commented on your work "${a}"`,message:`${t} commented on your work "${a}": "${s}"`,isRead:!1,createdAt:(new Date).toISOString(),meta:{action:"comment",workId:r,workTitle:a,commenterId:e,commenterName:t,commentContent:s}},i=await P(n);if(i.success)return console.log("[notificationService] Created comment notification in LocalStorage"),i;const l=await D(n);return l.success?(console.log("[notificationService] Created comment notification in Supabase"),l):(console.warn("[notificationService] Failed to create comment notification"),{success:!1,error:"Failed to create comment notification"})}catch(n){return console.error("[notificationService] Error creating comment notification:",n),{success:!1,error:n.message}}},getUserNotifications:async e=>{try{const t=await I(e);if(t&&t.success)return console.log(`[notificationService] Using LocalStorage notifications for user ${e}`),t;const r=await M(e);return r&&r.success?(console.log(`[notificationService] Using Supabase notifications for user ${e}`),r):(console.log(`[notificationService] No notifications found for user ${e}`),{success:!0,data:[]})}catch(t){return console.error(`[notificationService] Error getting notifications for user ${e}:`,t),{success:!1,error:t.message}}},markAsRead:async e=>{try{const t=await A(e);if(t.success)return console.log(`[notificationService] Marked notification ${e} as read in LocalStorage`),t;const r=await R(e);return r.success?(console.log(`[notificationService] Marked notification ${e} as read in Supabase`),r):(console.warn(`[notificationService] Failed to mark notification ${e} as read`),{success:!1,error:"Failed to mark notification as read"})}catch(t){return console.error("[notificationService] Error marking notification as read:",t),{success:!1,error:t.message}}},markAllAsRead:async e=>{try{const t=await T(e);if(t.success)return console.log(`[notificationService] Marked all notifications as read in LocalStorage for user ${e}`),t;const r=await $(e);return r.success?(console.log(`[notificationService] Marked all notifications as read in Supabase for user ${e}`),r):(console.warn(`[notificationService] Failed to mark all notifications as read for user ${e}`),{success:!1,error:"Failed to mark all notifications as read"})}catch(t){return console.error("[notificationService] Error marking all notifications as read:",t),{success:!1,error:t.message}}},deleteNotification:async e=>{try{const t=await L(e);if(t.success)return console.log(`[notificationService] Deleted notification ${e} in LocalStorage`),t;const r=await F(e);return r.success?(console.log(`[notificationService] Deleted notification ${e} in Supabase`),r):(console.warn(`[notificationService] Failed to delete notification ${e}`),{success:!1,error:"Failed to delete notification"})}catch(t){return console.error("[notificationService] Error deleting notification:",t),{success:!1,error:t.message}}}},U=async e=>{try{const t=`comments_${e.workId}`,r=JSON.parse(localStorage.getItem(t)||"[]"),a={...e,parentId:e.parentId||null,rootId:e.rootId||null,text:e.text||e.content||"",createdAt:e.createdAt||Date.now(),updatedAt:e.updatedAt||Date.now()};r.unshift(a);const o=r.slice(0,100);return localStorage.setItem(t,JSON.stringify(o)),console.log(`[localStorageAdapter] Created comment for work ${e.workId}`),{success:!0,data:a}}catch(t){return console.error("[localStorageAdapter] Error creating comment:",t),{success:!1,error:t.message}}},z=async e=>{try{const t=`comments_${e}`,r=JSON.parse(localStorage.getItem(t)||"[]").filter(e=>!e.isDeleted).map(e=>({...e,parentId:e.parentId||null,rootId:e.rootId||null,text:e.text||e.content||"",createdAt:e.createdAt||(e.createdAt?new Date(e.createdAt).getTime():Date.now()),updatedAt:e.updatedAt||(e.updatedAt?new Date(e.updatedAt).getTime():Date.now())}));return console.log(`[localStorageAdapter] Retrieved ${r.length} comments for work ${e}`),{success:!0,data:r}}catch(t){return console.error(`[localStorageAdapter] Error getting comments for work ${e}:`,t),{success:!1,error:t.message}}},W=async()=>{try{const e=[],t=Object.keys(localStorage).filter(e=>e.startsWith("comments_"));for(const r of t){const t=JSON.parse(localStorage.getItem(r)||"[]");e.push(...t)}return e}catch(e){return console.error("[localStorageAdapter] Error getting all comments:",e),[]}},B=async(e,t)=>{try{const r=Object.keys(localStorage).filter(e=>e.startsWith("comments_"));for(const a of r){const r=JSON.parse(localStorage.getItem(a)||"[]"),o=r.findIndex(t=>t.id===e);if(-1!==o){const s=r[o];s.likedBy||(s.likedBy=[]);const n=s.likedBy.indexOf(t);return-1!==n?(s.likedBy.splice(n,1),s.likes=Math.max(0,s.likes-1)):(s.likedBy.push(t),s.likes++),s.updatedAt=(new Date).toISOString(),localStorage.setItem(a,JSON.stringify(r)),console.log(`[localStorageAdapter] ${-1!==n?"Unliked":"Liked"} comment ${e}`),{success:!0,data:s,isLiked:-1===n}}}return console.warn(`[localStorageAdapter] Comment ${e} not found`),{success:!1,error:"Comment not found"}}catch(r){return console.error("[localStorageAdapter] Error liking comment:",r),{success:!1,error:r.message}}},q=async(e,t)=>{try{const r=Object.keys(localStorage).filter(e=>e.startsWith("comments_"));for(const a of r){const r=JSON.parse(localStorage.getItem(a)||"[]"),o=r.findIndex(t=>t.id===e);if(-1!==o){const s=r[o];s.likedBy||(s.likedBy=[]);const n=s.likedBy.indexOf(t);if(-1!==n)return s.likedBy.splice(n,1),s.likes=Math.max(0,s.likes-1),s.updatedAt=(new Date).toISOString(),localStorage.setItem(a,JSON.stringify(r)),console.log(`[localStorageAdapter] Unliked comment ${e}`),{success:!0,data:s,isLiked:!1}}}return console.warn(`[localStorageAdapter] Comment ${e} not found or not liked`),{success:!1,error:"Comment not found or not liked"}}catch(r){return console.error("[localStorageAdapter] Error unliking comment:",r),{success:!1,error:r.message}}},H=async(e,t)=>{try{const r=Object.keys(localStorage).filter(e=>e.startsWith("comments_"));for(const a of r){const r=JSON.parse(localStorage.getItem(a)||"[]"),o=r.findIndex(t=>t.id===e);if(-1!==o){const s=r[o];return s.authorId!==t?(console.warn(`[localStorageAdapter] User ${t} not authorized to delete comment ${e}`),{success:!1,error:"Not authorized to delete comment"}):(s.isDeleted=!0,s.updatedAt=(new Date).toISOString(),localStorage.setItem(a,JSON.stringify(r)),console.log(`[localStorageAdapter] Deleted comment ${e}`),{success:!0})}}return console.warn(`[localStorageAdapter] Comment ${e} not found`),{success:!1,error:"Comment not found"}}catch(r){return console.error("[localStorageAdapter] Error deleting comment:",r),{success:!1,error:r.message}}},V=async(e,t,r)=>{try{const a=Object.keys(localStorage).filter(e=>e.startsWith("comments_"));for(const o of a){const a=JSON.parse(localStorage.getItem(o)||"[]"),s=a.findIndex(t=>t.id===e);if(-1!==s){const n=a[s];return n.authorId!==t?(console.warn(`[localStorageAdapter] User ${t} not authorized to update comment ${e}`),{success:!1,error:"Not authorized to update comment"}):(n.content=r,n.updatedAt=(new Date).toISOString(),localStorage.setItem(o,JSON.stringify(a)),console.log(`[localStorageAdapter] Updated comment ${e}`),{success:!0,data:n})}}return console.warn(`[localStorageAdapter] Comment ${e} not found`),{success:!1,error:"Comment not found"}}catch(a){return console.error("[localStorageAdapter] Error updating comment:",a),{success:!1,error:a.message}}},G=async e=>(console.log("[supabaseAdapter] createComment - Placeholder implementation"),{success:!1,error:"Supabase adapter not implemented yet"}),J=async e=>(console.log("[supabaseAdapter] getWorkComments - Placeholder implementation"),{success:!1,error:"Supabase adapter not implemented yet"}),K=async(e,t)=>(console.log("[supabaseAdapter] likeComment - Placeholder implementation"),{success:!1,error:"Supabase adapter not implemented yet"}),Y=async(e,t)=>(console.log("[supabaseAdapter] unlikeComment - Placeholder implementation"),{success:!1,error:"Supabase adapter not implemented yet"}),Z=async(e,t)=>(console.log("[supabaseAdapter] deleteComment - Placeholder implementation"),{success:!1,error:"Supabase adapter not implemented yet"}),Q=async(e,t,r)=>(console.log("[supabaseAdapter] updateComment - Placeholder implementation"),{success:!1,error:"Supabase adapter not implemented yet"}),X={createComment:async function(e,t,r,a){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{let s=null;if(o){s=(await W()).find(e=>e.id===o)}const n={id:`comment_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,workId:e,authorId:t,authorName:r,text:a,parentId:o,rootId:s?s.rootId||s.id:null,likes:0,replies:[],isDeleted:!1,createdAt:Date.now(),updatedAt:Date.now()};o&&console.log("[reply:optimistic]",n);const i=await U(n);if(i.success)return console.log("[commentService] Created comment in LocalStorage"),o&&console.log("[reply:saved]",i.data),i;const l=await G(n);return l.success?(console.log("[commentService] Created comment in Supabase"),o&&console.log("[reply:saved]",l.data),l):(console.warn("[commentService] Failed to create comment"),{success:!1,error:"Failed to create comment"})}catch(s){return console.error("[commentService] Error creating comment:",s),{success:!1,error:s.message}}},getWorkComments:async e=>{try{const t=await z(e);if(t&&t.success)return console.log(`[commentService] Using LocalStorage comments for work ${e}`),t;const r=await J(e);return r&&r.success?(console.log(`[commentService] Using Supabase comments for work ${e}`),r):(console.log(`[commentService] No comments found for work ${e}`),{success:!0,data:[]})}catch(t){return console.error(`[commentService] Error getting comments for work ${e}:`,t),{success:!1,error:t.message}}},likeComment:async(e,t)=>{try{const r=await B(e,t);if(r.success)return console.log(`[commentService] Liked comment ${e} in LocalStorage`),r;const a=await K(e,t);return a.success?(console.log(`[commentService] Liked comment ${e} in Supabase`),a):(console.warn(`[commentService] Failed to like comment ${e}`),{success:!1,error:"Failed to like comment"})}catch(r){return console.error("[commentService] Error liking comment:",r),{success:!1,error:r.message}}},unlikeComment:async(e,t)=>{try{const r=await q(e,t);if(r.success)return console.log(`[commentService] Unliked comment ${e} in LocalStorage`),r;const a=await Y(e,t);return a.success?(console.log(`[commentService] Unliked comment ${e} in Supabase`),a):(console.warn(`[commentService] Failed to unlike comment ${e}`),{success:!1,error:"Failed to unlike comment"})}catch(r){return console.error("[commentService] Error unliking comment:",r),{success:!1,error:r.message}}},deleteComment:async(e,t)=>{try{const r=await H(e,t);if(r.success)return console.log(`[commentService] Deleted comment ${e} in LocalStorage`),r;const a=await Z(e,t);return a.success?(console.log(`[commentService] Deleted comment ${e} in Supabase`),a):(console.warn(`[commentService] Failed to delete comment ${e}`),{success:!1,error:"Failed to delete comment"})}catch(r){return console.error("[commentService] Error deleting comment:",r),{success:!1,error:r.message}}},updateComment:async(e,t,r)=>{try{const a=await V(e,t,r);if(a.success)return console.log(`[commentService] Updated comment ${e} in LocalStorage`),a;const o=await Q(e,t,r);return o.success?(console.log(`[commentService] Updated comment ${e} in Supabase`),o):(console.warn(`[commentService] Failed to update comment ${e}`),{success:!1,error:"Failed to update comment"})}catch(a){return console.error("[commentService] Error updating comment:",a),{success:!1,error:a.message}}}};var ee=r(121),te=r(784),re=r(266),ae=r(405);const oe=e=>`tag.avatars.${e}`;function se(e,t){try{"undefined"!==typeof window&&window.localStorage.setItem(oe(e),JSON.stringify(t))}catch(r){console.warn("Failed to write avatar data:",r)}}const ne=async(e,t)=>{try{await new Promise(e=>setTimeout(e,1e3));const r=(e=>`avatars/${e}/${Date.now()}.webp`)(t),a=e,o=(new Date).toISOString();console.log("[avatarService] Received dataURL:",null===e||void 0===e?void 0:e.substring(0,30)),console.log("[avatarService] Storing avatarUrl:",null===a||void 0===a?void 0:a.substring(0,30));return se(t,{avatarUrl:a,avatarUpdatedAt:o,fileName:r,userId:t}),"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent("avatar:updated",{detail:{userId:t,avatarUrl:a,avatarUpdatedAt:o}})),{success:!0,data:{avatarUrl:a,avatarUpdatedAt:o,fileName:r}}}catch(r){return{success:!1,error:r.message}}},ie=(e,t)=>{if(!e)return null;if(e.startsWith("blob:")||e.startsWith("data:"))return e;const r=t?new Date(t).getTime():Date.now(),a=e.includes("?")?"&":"?";return`${e}${a}v=${r}`}},496:(e,t,r)=>{"use strict";var a,o=r(989);o.canUseDOM&&(a=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),e.exports=function(e,t){if(!o.canUseDOM||t&&!("addEventListener"in document))return!1;var r="on"+e,s=r in document;if(!s){var n=document.createElement("div");n.setAttribute(r,"return;"),s="function"===typeof n[r]}return!s&&a&&"wheel"===e&&(s=document.implementation.hasFeature("Events.wheel","3.0")),s}},506:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(8),o=r(179);const s={STORAGE_KEY:"tag_collaboration_drafts",async _getStorage(){try{const e=await o.storage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):{}}catch(e){return console.error("Failed to get drafts from storage:",e),{}}},async _setStorage(e){try{await o.storage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Failed to save drafts to storage:",t)}},_generateId:()=>"draft_"+Date.now().toString(36)+Math.random().toString(36).substr(2),async getDrafts(e){var t;const{userId:r,type:a="all",cursor:o,limit:s=20}=e,n=(await this._getStorage())[r]||[];let i=n;"all"!==a&&(i=n.filter(e=>e.draftType===a)),i.sort((e,t)=>new Date(t.updatedAt)-new Date(e.updatedAt));let l=0;if(o){l=i.findIndex(e=>e.id===o)+1}const c=l+s,d=i.slice(l,c),u=c<i.length,h=u?null===(t=d[d.length-1])||void 0===t?void 0:t.id:null;return await new Promise(e=>setTimeout(e,100)),{success:!0,data:{items:d,pagination:{cursor:h,hasMore:u,total:i.length}}}},async saveDraft(e){const{userId:t,draftType:r,draftData:a}=e,o=await this._getStorage(),s=o[t]||[],n={id:this._generateId(),userId:t,draftType:r,...a,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};return s.push(n),o[t]=s,await this._setStorage(o),await new Promise(e=>setTimeout(e,200)),{success:!0,data:n}},async updateDraft(e){const{userId:t,draftId:r,draftData:a}=e,o=await this._getStorage(),s=o[t]||[],n=s.findIndex(e=>e.id===r);if(-1===n)throw new Error("Draft not found");const i={...s[n],...a,updatedAt:(new Date).toISOString()};return s[n]=i,o[t]=s,await this._setStorage(o),await new Promise(e=>setTimeout(e,200)),{success:!0,data:i}},async deleteDraft(e){const{userId:t,draftId:r}=e,a=await this._getStorage(),o=a[t]||[],s=o.findIndex(e=>e.id===r);if(-1===s)throw new Error("Draft not found");const n=o.splice(s,1)[0];return a[t]=o,await this._setStorage(a),await new Promise(e=>setTimeout(e,200)),{success:!0,data:n}},async getDraftById(e){const{userId:t,draftId:r}=e,a=((await this._getStorage())[t]||[]).find(e=>e.id===r);if(!a)throw new Error("Draft not found");return await new Promise(e=>setTimeout(e,100)),{success:!0,data:a}},async publishDraft(e){const{userId:t,draftId:r}=e,a=await this._getStorage(),o=a[t]||[],s=o.findIndex(e=>e.id===r);if(-1===s)throw new Error("Draft not found");o[s];const n=o.splice(s,1)[0];return a[t]=o,await this._setStorage(a),await new Promise(e=>setTimeout(e,300)),{success:!0,data:{...n,publishedAt:(new Date).toISOString()}}},async clearUserDrafts(e){const t=await this._getStorage();delete t[e],await this._setStorage(t)},async getAllDrafts(){return await this._getStorage()}};const n=new class{constructor(){this.adapter=s}async getDrafts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,a.HW)(),r=e.userId||(null===t||void 0===t?void 0:t.id);if(!r)throw new Error("User not authenticated");return this.adapter.getDrafts({userId:r,type:e.type||"all",cursor:e.cursor,limit:e.limit||20})}async saveDraft(e,t){const r=(0,a.HW)();if(null===r||void 0===r||!r.id)throw new Error("User not authenticated");if(!e||!t)throw new Error("Draft type and data are required");return this.adapter.saveDraft({userId:r.id,draftType:e,draftData:t})}async updateDraft(e,t){const r=(0,a.HW)();if(null===r||void 0===r||!r.id)throw new Error("User not authenticated");if(!e||!t)throw new Error("Draft ID and data are required");return this.adapter.updateDraft({userId:r.id,draftId:e,draftData:t})}async deleteDraft(e){const t=(0,a.HW)();if(null===t||void 0===t||!t.id)throw new Error("User not authenticated");if(!e)throw new Error("Draft ID is required");return this.adapter.deleteDraft({userId:t.id,draftId:e})}async getDraftById(e){const t=(0,a.HW)();if(null===t||void 0===t||!t.id)throw new Error("User not authenticated");if(!e)throw new Error("Draft ID is required");return this.adapter.getDraftById({userId:t.id,draftId:e})}async publishDraft(e){const t=(0,a.HW)();if(null===t||void 0===t||!t.id)throw new Error("User not authenticated");if(!e)throw new Error("Draft ID is required");return this.adapter.publishDraft({userId:t.id,draftId:e})}}},560:(e,t,r)=>{"use strict";r.d(t,{Cs:()=>c,Y1:()=>i,fO:()=>m,lx:()=>h,o2:()=>u,zx:()=>d});var a=r(313),o=r(121),s=(r(792),r(8),r(420));const n=new Map,i=e=>{if(!Array.isArray(e)||0===e.length)return void console.warn("[invalidate] Invalid keys provided:",e);const[t,r]=e;if("artist"===t&&r){const e=`artist_${r}`;n.has(e)&&(n.delete(e),console.log(`[invalidate] Cleared cache for artist: ${r}`))}else if("artist"===t){for(const[e]of n)e.startsWith("artist_")&&n.delete(e);console.log("[invalidate] Cleared all artist cache")}},l=e=>{const t={Photographer:"\ud83d\udcf7","Visual Designer":"\ud83c\udfa8",Illustrator:"\ud83c\udfa8","Concept Artist":"\ud83c\udfad","Graphic Designer":"\ud83c\udfa8","Digital Artist":"\ud83c\udfa8","3D Artist":"\ud83c\udfad",Animator:"\ud83c\udfac",default:"\ud83c\udfa8"};return t[e]||t.default},c=async e=>{try{if(!e)return console.warn("[getArtistById] No userId provided"),null;const r={1:"alex",2:"alice",3:"bryan"}[e]||e,i=`artist_${r}`;if(n.has(i))return console.log(`[getArtistById] Using cached data for: ${r}`),n.get(i);const c=s.o1[r];if(!c)return console.warn(`[getArtistById] User not found for ID: ${e}`),null;const d=await(0,o.getProfile)(r),u=d.success?d.data:null;let h=null;try{h=await(0,a.IA)(r),console.log("[getArtistById] Using unified avatar service for:",r,h?"found":"not found")}catch(t){console.warn("[getArtistById] Failed to get unified avatar:",t),h=c.avatar}const m=u?{...u,avatar:h}:null,p=function(e){var t,r,a,o;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return console.warn("[selectArtistView] No profile provided"),null;const n=null!==s&&void 0!==s&&s.portfolio?s.portfolio.map((e,t)=>({id:e.id,title:e.title,image:e.thumb,category:e.category})):[];return{id:e.id||"",name:e.fullName||e.name||"Unknown Artist",title:e.title||e.role||"Artist",discipline:e.title||e.role||"Artist",roleIcon:l(e.title||e.role),avatar:e.avatar||(null===s||void 0===s?void 0:s.avatar)||"",bio:e.bio||(null===s||void 0===s?void 0:s.bio)||"",school:e.school||(null===s||void 0===s?void 0:s.school)||"",pronouns:e.pronouns||(null===s||void 0===s?void 0:s.pronouns)||"",majors:Array.isArray(e.majors)?e.majors:[],minors:Array.isArray(e.minors)?e.minors:[],skills:Array.isArray(e.skills)?e.skills:[],works:n,stats:{following:0,followers:0,collaborations:12},socialLinks:{instagram:(null===(t=e.socialLinks)||void 0===t?void 0:t.instagram)||"",portfolio:(null===(r=e.socialLinks)||void 0===r?void 0:r.portfolio)||"",discord:(null===(a=e.socialLinks)||void 0===a?void 0:a.discord)||"",otherLinks:(null===(o=e.socialLinks)||void 0===o?void 0:o.otherLinks)||[]},updatedAt:e.updatedAt||(new Date).toISOString()}}(m,c);return p?(console.log("[getArtistById] Artist view socialLinks:",{userId:r,profileSocialLinks:null===m||void 0===m?void 0:m.socialLinks,mockUserSocialLinks:null===c||void 0===c?void 0:c.socialLinks,finalSocialLinks:p.socialLinks}),n.set(i,p),console.log(`[getArtistById] Cached data for: ${r}`),p):(console.warn(`[getArtistById] Failed to create artist view for ${e}`),null)}catch(t){return console.error(`[getArtistById] Error getting artist data for ${e}:`,t),null}},d=async e=>[{id:1,title:"Animation Project with Jason K.",description:"Collaborated on character design and background illustrations for a short animated film project.",image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop",partner:"Jason K.",partnerAvatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face",completionDate:"Completed May 2023",category:"Animation",isInitiator:!1,role:"Character Designer",dateRange:"March 2023 - May 2023",responsibility:"Responsible for visual design and facial animation of main characters, created complete design schemes for 5 core characters, and participated in unifying the background art style.",teamFeedback:{feedbacker:"Jason K.",feedbackerRole:"Project Director",content:"Alex demonstrated excellent creativity and technical skills in character design. His designs are not only beautiful but also serve the narrative well. He has a positive team collaboration attitude and is an important contributor to the project."}},{id:2,title:"Brand Identity with Studio X",description:"Worked together on a complete brand identity system for a tech startup.",image:"https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400&h=300&fit=crop",partner:"Studio X",partnerAvatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=40&h=40&fit=crop&crop=face",completionDate:"Completed March 2023",category:"Branding",isInitiator:!0,role:"Project Owner",dateRange:"January 2023 - March 2023",responsibility:"As project initiator, responsible for overall brand strategy development, leading the design team to complete the full visual identity system from logo design to brand guidelines.",teamFeedback:{feedbacker:"Studio X Team",feedbackerRole:"Creative Director",content:"Alex demonstrated excellent project leadership and design professionalism, accurately understanding client needs and transforming them into outstanding design solutions. The entire brand system received high recognition from clients."}},{id:3,title:"UI Design with Mobile Team",description:"Collaborated on user interface design for a mobile application.",image:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=300&fit=crop",partner:"Mobile Team",partnerAvatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=40&h=40&fit=crop&crop=face",completionDate:"Completed January 2023",category:"UI/UX",isInitiator:!1,role:"UI Designer",dateRange:"November 2022 - January 2023",responsibility:"Responsible for main interface design of mobile applications, including user flow optimization, component library establishment, and interactive prototype creation, ensuring excellent user experience.",teamFeedback:{feedbacker:"Sarah Chen",feedbackerRole:"Product Manager",content:"Alex's UI design is both beautiful and practical, balancing visual effects and functional requirements well. His design thinking and technical implementation capabilities left a deep impression on the team."}}],u=e=>e&&e.id&&e.name,h=e=>{const t="px-2 py-1 text-xs font-medium rounded-full";return e?`${t} bg-purple-100 text-purple-800 border border-purple-200`:`${t} bg-blue-100 text-blue-700 border border-blue-200`},m=e=>{const t="px-4 py-2 rounded-md font-medium transition-colors duration-200";return e?`${t} bg-gray-200 text-gray-700 hover:bg-gray-300`:`${t} bg-blue-500 text-white hover:bg-blue-600`}},579:(e,t,r)=>{"use strict";e.exports=r(153)},611:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=r},630:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Headers:()=>n,Request:()=>i,Response:()=>l,default:()=>s,fetch:()=>o});var a=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof r.g)return r.g;throw new Error("unable to locate global object")}();const o=a.fetch,s=a.fetch.bind(a),n=a.Headers,i=a.Request,l=a.Response},730:(e,t,r)=>{"use strict";var a=r(43),o=r(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(i[e]=t,e=0;e<t.length;e++)n.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},p={};function g(e,t,r,a,o,s,n){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=a,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=n}var f={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){f[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];f[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){f[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){f[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){f[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){f[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){f[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){f[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){f[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}function b(e,t,r,a){var o=f.hasOwnProperty(t)?f[t]:null;(null!==o?0!==o.type:a||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,a){if(null===t||"undefined"===typeof t||function(e,t,r,a){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!a&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,a))return!0;if(a)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,o,a)&&(r=null),a||null===o?function(e){return!!u.call(p,e)||!u.call(m,e)&&(h.test(e)?p[e]=!0:(m[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=null===r?3!==o.type&&"":r:(t=o.attributeName,a=o.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(o=o.type)||4===o&&!0===r?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,x);f[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,x);f[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,x);f[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){f[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),f.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){f[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var y=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),j=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),_=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var R,$=Object.assign;function F(e){if(void 0===R)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var O=!1;function U(e,t){if(!e||O)return"";O=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var a=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){a=c}e.call(t.prototype)}else{try{throw Error()}catch(c){a=c}e()}}catch(c){if(c&&a&&"string"===typeof c.stack){for(var o=c.stack.split("\n"),s=a.stack.split("\n"),n=o.length-1,i=s.length-1;1<=n&&0<=i&&o[n]!==s[i];)i--;for(;1<=n&&0<=i;n--,i--)if(o[n]!==s[i]){if(1!==n||1!==i)do{if(n--,0>--i||o[n]!==s[i]){var l="\n"+o[n].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=n&&0<=i);break}}}finally{O=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case j:return"Portal";case C:return"Profiler";case N:return"StrictMode";case P:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case _:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return W(e(t))}catch(r){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function V(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var o=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){a=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=H(e)?e.checked?"true":"false":e.value),(e=a)!==r&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var r=t.checked;return $({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Y(e,t){var r=null==t.defaultValue?"":t.defaultValue,a=null!=t.checked?t.checked:t.defaultChecked;r=q(null!=t.value?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Q(e,t){Z(e,t);var r=q(t.value),a=t.type;if(null!=r)"number"===a?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===a||"reset"===a)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function X(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!("submit"!==a&&"reset"!==a||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&J(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,a){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&a&&(e[r].defaultSelected=!0)}else{for(r=""+q(r),t=null,o=0;o<e.length;o++){if(e[o].value===r)return e[o].selected=!0,void(a&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return $({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(s(92));if(te(r)){if(1<r.length)throw Error(s(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:q(r)}}function se(e,t){var r=q(t.value),a=q(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=a&&(e.defaultValue=""+a)}function ne(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ie(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ie(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,a){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function fe(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var a=0===r.indexOf("--"),o=ge(r,t[r],a);"float"===r&&(r="cssFloat"),a?e.setProperty(r,o):e[r]=o}}Object.keys(me).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]})});var ve=$({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ye=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var je=null,ke=null,Ne=null;function Ce(e){if(e=bo(e)){if("function"!==typeof je)throw Error(s(280));var t=e.stateNode;t&&(t=wo(t),je(e.stateNode,e.type,t))}}function Se(e){ke?Ne?Ne.push(e):Ne=[e]:ke=e}function _e(){if(ke){var e=ke,t=Ne;if(Ne=ke=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ee(e,t){return e(t)}function Pe(){}var Ie=!1;function Ae(e,t,r){if(Ie)return e(t,r);Ie=!0;try{return Ee(e,t,r)}finally{Ie=!1,(null!==ke||null!==Ne)&&(Pe(),_e())}}function Te(e,t){var r=e.stateNode;if(null===r)return null;var a=wo(r);if(null===a)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(s(231,t,typeof r));return r}var Le=!1;if(d)try{var De={};Object.defineProperty(De,"passive",{get:function(){Le=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(de){Le=!1}function Me(e,t,r,a,o,s,n,i,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var Re=!1,$e=null,Fe=!1,Oe=null,Ue={onError:function(e){Re=!0,$e=e}};function ze(e,t,r,a,o,s,n,i,l){Re=!1,$e=null,Me.apply(Ue,arguments)}function We(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(We(e)!==e)throw Error(s(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(s(188));return t!==e?null:e}for(var r=e,a=t;;){var o=r.return;if(null===o)break;var n=o.alternate;if(null===n){if(null!==(a=o.return)){r=a;continue}break}if(o.child===n.child){for(n=o.child;n;){if(n===r)return qe(o),e;if(n===a)return qe(o),t;n=n.sibling}throw Error(s(188))}if(r.return!==a.return)r=o,a=n;else{for(var i=!1,l=o.child;l;){if(l===r){i=!0,r=o,a=n;break}if(l===a){i=!0,a=o,r=n;break}l=l.sibling}if(!i){for(l=n.child;l;){if(l===r){i=!0,r=n,a=o;break}if(l===a){i=!0,a=n,r=o;break}l=l.sibling}if(!i)throw Error(s(189))}}if(r.alternate!==a)throw Error(s(190))}if(3!==r.tag)throw Error(s(188));return r.stateNode.current===r?e:t}(e))?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var Ge=o.unstable_scheduleCallback,Je=o.unstable_cancelCallback,Ke=o.unstable_shouldYield,Ye=o.unstable_requestPaint,Ze=o.unstable_now,Qe=o.unstable_getCurrentPriorityLevel,Xe=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,rt=o.unstable_LowPriority,at=o.unstable_IdlePriority,ot=null,st=null;var nt=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(it(e)/lt|0)|0},it=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var r=e.pendingLanes;if(0===r)return 0;var a=0,o=e.suspendedLanes,s=e.pingedLanes,n=268435455&r;if(0!==n){var i=n&~o;0!==i?a=ut(i):0!==(s&=n)&&(a=ut(s))}else 0!==(n=r&~o)?a=ut(n):0!==s&&(a=ut(s));if(0===a)return 0;if(0!==t&&t!==a&&0===(t&o)&&((o=a&-a)>=(s=t&-t)||16===o&&0!==(4194240&s)))return t;if(0!==(4&a)&&(a|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=a;0<t;)o=1<<(r=31-nt(t)),a|=e[r],t&=~o;return a}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function ft(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function vt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-nt(t)]=r}function xt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-nt(r),o=1<<a;o&t|e[a]&t&&(e[a]|=t),r&=~o}}var bt=0;function yt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,jt,kt,Nt,Ct,St=!1,_t=[],Et=null,Pt=null,It=null,At=new Map,Tt=new Map,Lt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tt.delete(t.pointerId)}}function Rt(e,t,r,a,o,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:s,targetContainers:[o]},null!==t&&(null!==(t=bo(t))&&jt(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function $t(e){var t=xo(e.target);if(null!==t){var r=We(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Be(r)))return e.blockedOn=t,void Ct(e.priority,function(){kt(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=bo(r))&&jt(t),e.blockedOn=r,!1;var a=new(r=e.nativeEvent).constructor(r.type,r);ye=a,r.target.dispatchEvent(a),ye=null,t.shift()}return!0}function Ot(e,t,r){Ft(e)&&r.delete(t)}function Ut(){St=!1,null!==Et&&Ft(Et)&&(Et=null),null!==Pt&&Ft(Pt)&&(Pt=null),null!==It&&Ft(It)&&(It=null),At.forEach(Ot),Tt.forEach(Ot)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ut)))}function Wt(e){function t(t){return zt(t,e)}if(0<_t.length){zt(_t[0],e);for(var r=1;r<_t.length;r++){var a=_t[r];a.blockedOn===e&&(a.blockedOn=null)}}for(null!==Et&&zt(Et,e),null!==Pt&&zt(Pt,e),null!==It&&zt(It,e),At.forEach(t),Tt.forEach(t),r=0;r<Lt.length;r++)(a=Lt[r]).blockedOn===e&&(a.blockedOn=null);for(;0<Lt.length&&null===(r=Lt[0]).blockedOn;)$t(r),null===r.blockedOn&&Lt.shift()}var Bt=y.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,r,a){var o=bt,s=Bt.transition;Bt.transition=null;try{bt=1,Gt(e,t,r,a)}finally{bt=o,Bt.transition=s}}function Vt(e,t,r,a){var o=bt,s=Bt.transition;Bt.transition=null;try{bt=4,Gt(e,t,r,a)}finally{bt=o,Bt.transition=s}}function Gt(e,t,r,a){if(qt){var o=Kt(e,t,r,a);if(null===o)Ba(e,t,a,Jt,r),Mt(e,a);else if(function(e,t,r,a,o){switch(t){case"focusin":return Et=Rt(Et,e,t,r,a,o),!0;case"dragenter":return Pt=Rt(Pt,e,t,r,a,o),!0;case"mouseover":return It=Rt(It,e,t,r,a,o),!0;case"pointerover":var s=o.pointerId;return At.set(s,Rt(At.get(s)||null,e,t,r,a,o)),!0;case"gotpointercapture":return s=o.pointerId,Tt.set(s,Rt(Tt.get(s)||null,e,t,r,a,o)),!0}return!1}(o,e,t,r,a))a.stopPropagation();else if(Mt(e,a),4&t&&-1<Dt.indexOf(e)){for(;null!==o;){var s=bo(o);if(null!==s&&wt(s),null===(s=Kt(e,t,r,a))&&Ba(e,t,a,Jt,r),s===o)break;o=s}null!==o&&a.stopPropagation()}else Ba(e,t,a,null,r)}}var Jt=null;function Kt(e,t,r,a){if(Jt=null,null!==(e=xo(e=we(a))))if(null===(t=We(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Xe:return 1;case et:return 4;case tt:case rt:return 16;case at:return 536870912;default:return 16}default:return 16}}var Zt=null,Qt=null,Xt=null;function er(){if(Xt)return Xt;var e,t,r=Qt,a=r.length,o="value"in Zt?Zt.value:Zt.textContent,s=o.length;for(e=0;e<a&&r[e]===o[e];e++);var n=a-e;for(t=1;t<=n&&r[a-t]===o[s-t];t++);return Xt=o.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function ar(){return!1}function or(e){function t(t,r,a,o,s){for(var n in this._reactName=t,this._targetInst=a,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(n)&&(t=e[n],this[n]=t?t(o):o[n]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?rr:ar,this.isPropagationStopped=ar,this}return $(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var sr,nr,ir,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=or(lr),dr=$({},lr,{view:0,detail:0}),ur=or(dr),hr=$({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ir&&(ir&&"mousemove"===e.type?(sr=e.screenX-ir.screenX,nr=e.screenY-ir.screenY):nr=sr=0,ir=e),sr)},movementY:function(e){return"movementY"in e?e.movementY:nr}}),mr=or(hr),pr=or($({},hr,{dataTransfer:0})),gr=or($({},dr,{relatedTarget:0})),fr=or($({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),vr=$({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xr=or(vr),br=or($({},lr,{data:0})),yr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=jr[e])&&!!t[e]}function Nr(){return kr}var Cr=$({},dr,{key:function(e){if(e.key){var t=yr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sr=or(Cr),_r=or($({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Er=or($({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nr})),Pr=or($({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ir=$({},hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ar=or(Ir),Tr=[9,13,27,32],Lr=d&&"CompositionEvent"in window,Dr=null;d&&"documentMode"in document&&(Dr=document.documentMode);var Mr=d&&"TextEvent"in window&&!Dr,Rr=d&&(!Lr||Dr&&8<Dr&&11>=Dr),$r=String.fromCharCode(32),Fr=!1;function Or(e,t){switch(e){case"keyup":return-1!==Tr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ur(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zr=!1;var Wr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Br(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wr[e.type]:"textarea"===t}function qr(e,t,r,a){Se(a),0<(t=Ha(t,"onChange")).length&&(r=new cr("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var Hr=null,Vr=null;function Gr(e){$a(e,0)}function Jr(e){if(G(yo(e)))return e}function Kr(e,t){if("change"===e)return t}var Yr=!1;if(d){var Zr;if(d){var Qr="oninput"in document;if(!Qr){var Xr=document.createElement("div");Xr.setAttribute("oninput","return;"),Qr="function"===typeof Xr.oninput}Zr=Qr}else Zr=!1;Yr=Zr&&(!document.documentMode||9<document.documentMode)}function ea(){Hr&&(Hr.detachEvent("onpropertychange",ta),Vr=Hr=null)}function ta(e){if("value"===e.propertyName&&Jr(Vr)){var t=[];qr(t,Vr,e,we(e)),Ae(Gr,t)}}function ra(e,t,r){"focusin"===e?(ea(),Vr=r,(Hr=t).attachEvent("onpropertychange",ta)):"focusout"===e&&ea()}function aa(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jr(Vr)}function oa(e,t){if("click"===e)return Jr(t)}function sa(e,t){if("input"===e||"change"===e)return Jr(t)}var na="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ia(e,t){if(na(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var o=r[a];if(!u.call(t,o)||!na(e[o],t[o]))return!1}return!0}function la(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ca(e,t){var r,a=la(e);for(e=0;a;){if(3===a.nodeType){if(r=e+a.textContent.length,e<=t&&r>=t)return{node:a,offset:t-e};e=r}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=la(a)}}function da(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?da(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ua(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(a){r=!1}if(!r)break;t=J((e=t.contentWindow).document)}return t}function ha(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ma(e){var t=ua(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&da(r.ownerDocument.documentElement,r)){if(null!==a&&ha(r))if(t=a.start,void 0===(e=a.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=r.textContent.length,s=Math.min(a.start,o);a=void 0===a.end?s:Math.min(a.end,o),!e.extend&&s>a&&(o=a,a=s,s=o),o=ca(r,s);var n=ca(r,a);o&&n&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==n.node||e.focusOffset!==n.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),s>a?(e.addRange(t),e.extend(n.node,n.offset)):(t.setEnd(n.node,n.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pa=d&&"documentMode"in document&&11>=document.documentMode,ga=null,fa=null,va=null,xa=!1;function ba(e,t,r){var a=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;xa||null==ga||ga!==J(a)||("selectionStart"in(a=ga)&&ha(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},va&&ia(va,a)||(va=a,0<(a=Ha(fa,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=ga)))}function ya(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var wa={animationend:ya("Animation","AnimationEnd"),animationiteration:ya("Animation","AnimationIteration"),animationstart:ya("Animation","AnimationStart"),transitionend:ya("Transition","TransitionEnd")},ja={},ka={};function Na(e){if(ja[e])return ja[e];if(!wa[e])return e;var t,r=wa[e];for(t in r)if(r.hasOwnProperty(t)&&t in ka)return ja[e]=r[t];return e}d&&(ka=document.createElement("div").style,"AnimationEvent"in window||(delete wa.animationend.animation,delete wa.animationiteration.animation,delete wa.animationstart.animation),"TransitionEvent"in window||delete wa.transitionend.transition);var Ca=Na("animationend"),Sa=Na("animationiteration"),_a=Na("animationstart"),Ea=Na("transitionend"),Pa=new Map,Ia="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Aa(e,t){Pa.set(e,t),l(t,[e])}for(var Ta=0;Ta<Ia.length;Ta++){var La=Ia[Ta];Aa(La.toLowerCase(),"on"+(La[0].toUpperCase()+La.slice(1)))}Aa(Ca,"onAnimationEnd"),Aa(Sa,"onAnimationIteration"),Aa(_a,"onAnimationStart"),Aa("dblclick","onDoubleClick"),Aa("focusin","onFocus"),Aa("focusout","onBlur"),Aa(Ea,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Da="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ma=new Set("cancel close invalid load scroll toggle".split(" ").concat(Da));function Ra(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,a,o,n,i,l,c){if(ze.apply(this,arguments),Re){if(!Re)throw Error(s(198));var d=$e;Re=!1,$e=null,Fe||(Fe=!0,Oe=d)}}(a,t,void 0,e),e.currentTarget=null}function $a(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var a=e[r],o=a.event;a=a.listeners;e:{var s=void 0;if(t)for(var n=a.length-1;0<=n;n--){var i=a[n],l=i.instance,c=i.currentTarget;if(i=i.listener,l!==s&&o.isPropagationStopped())break e;Ra(o,i,c),s=l}else for(n=0;n<a.length;n++){if(l=(i=a[n]).instance,c=i.currentTarget,i=i.listener,l!==s&&o.isPropagationStopped())break e;Ra(o,i,c),s=l}}}if(Fe)throw e=Oe,Fe=!1,Oe=null,e}function Fa(e,t){var r=t[go];void 0===r&&(r=t[go]=new Set);var a=e+"__bubble";r.has(a)||(Wa(t,e,2,!1),r.add(a))}function Oa(e,t,r){var a=0;t&&(a|=4),Wa(r,e,a,t)}var Ua="_reactListening"+Math.random().toString(36).slice(2);function za(e){if(!e[Ua]){e[Ua]=!0,n.forEach(function(t){"selectionchange"!==t&&(Ma.has(t)||Oa(t,!1,e),Oa(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ua]||(t[Ua]=!0,Oa("selectionchange",!1,t))}}function Wa(e,t,r,a){switch(Yt(t)){case 1:var o=Ht;break;case 4:o=Vt;break;default:o=Gt}r=o.bind(null,t,r,e),o=void 0,!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),a?void 0!==o?e.addEventListener(t,r,{capture:!0,passive:o}):e.addEventListener(t,r,!0):void 0!==o?e.addEventListener(t,r,{passive:o}):e.addEventListener(t,r,!1)}function Ba(e,t,r,a,o){var s=a;if(0===(1&t)&&0===(2&t)&&null!==a)e:for(;;){if(null===a)return;var n=a.tag;if(3===n||4===n){var i=a.stateNode.containerInfo;if(i===o||8===i.nodeType&&i.parentNode===o)break;if(4===n)for(n=a.return;null!==n;){var l=n.tag;if((3===l||4===l)&&((l=n.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;n=n.return}for(;null!==i;){if(null===(n=xo(i)))return;if(5===(l=n.tag)||6===l){a=s=n;continue e}i=i.parentNode}}a=a.return}Ae(function(){var a=s,o=we(r),n=[];e:{var i=Pa.get(e);if(void 0!==i){var l=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":l=Sr;break;case"focusin":c="focus",l=gr;break;case"focusout":c="blur",l=gr;break;case"beforeblur":case"afterblur":l=gr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Er;break;case Ca:case Sa:case _a:l=fr;break;case Ea:l=Pr;break;case"scroll":l=ur;break;case"wheel":l=Ar;break;case"copy":case"cut":case"paste":l=xr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=_r}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==i?i+"Capture":null:i;d=[];for(var m,p=a;null!==p;){var g=(m=p).stateNode;if(5===m.tag&&null!==g&&(m=g,null!==h&&(null!=(g=Te(p,h))&&d.push(qa(p,g,m)))),u)break;p=p.return}0<d.length&&(i=new l(i,c,null,r,o),n.push({event:i,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(i="mouseover"===e||"pointerover"===e)||r===ye||!(c=r.relatedTarget||r.fromElement)||!xo(c)&&!c[po])&&(l||i)&&(i=o.window===o?o:(i=o.ownerDocument)?i.defaultView||i.parentWindow:window,l?(l=a,null!==(c=(c=r.relatedTarget||r.toElement)?xo(c):null)&&(c!==(u=We(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=a),l!==c)){if(d=mr,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=_r,g="onPointerLeave",h="onPointerEnter",p="pointer"),u=null==l?i:yo(l),m=null==c?i:yo(c),(i=new d(g,p+"leave",l,r,o)).target=u,i.relatedTarget=m,g=null,xo(o)===a&&((d=new d(h,p+"enter",c,r,o)).target=m,d.relatedTarget=u,g=d),u=g,l&&c)e:{for(h=c,p=0,m=d=l;m;m=Va(m))p++;for(m=0,g=h;g;g=Va(g))m++;for(;0<p-m;)d=Va(d),p--;for(;0<m-p;)h=Va(h),m--;for(;p--;){if(d===h||null!==h&&d===h.alternate)break e;d=Va(d),h=Va(h)}d=null}else d=null;null!==l&&Ga(n,i,l,d,!1),null!==c&&null!==u&&Ga(n,u,c,d,!0)}if("select"===(l=(i=a?yo(a):window).nodeName&&i.nodeName.toLowerCase())||"input"===l&&"file"===i.type)var f=Kr;else if(Br(i))if(Yr)f=sa;else{f=aa;var v=ra}else(l=i.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(f=oa);switch(f&&(f=f(e,a))?qr(n,f,r,o):(v&&v(e,i,a),"focusout"===e&&(v=i._wrapperState)&&v.controlled&&"number"===i.type&&ee(i,"number",i.value)),v=a?yo(a):window,e){case"focusin":(Br(v)||"true"===v.contentEditable)&&(ga=v,fa=a,va=null);break;case"focusout":va=fa=ga=null;break;case"mousedown":xa=!0;break;case"contextmenu":case"mouseup":case"dragend":xa=!1,ba(n,r,o);break;case"selectionchange":if(pa)break;case"keydown":case"keyup":ba(n,r,o)}var x;if(Lr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zr?Or(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(Rr&&"ko"!==r.locale&&(zr||"onCompositionStart"!==b?"onCompositionEnd"===b&&zr&&(x=er()):(Qt="value"in(Zt=o)?Zt.value:Zt.textContent,zr=!0)),0<(v=Ha(a,b)).length&&(b=new br(b,e,null,r,o),n.push({event:b,listeners:v}),x?b.data=x:null!==(x=Ur(r))&&(b.data=x))),(x=Mr?function(e,t){switch(e){case"compositionend":return Ur(t);case"keypress":return 32!==t.which?null:(Fr=!0,$r);case"textInput":return(e=t.data)===$r&&Fr?null:e;default:return null}}(e,r):function(e,t){if(zr)return"compositionend"===e||!Lr&&Or(e,t)?(e=er(),Xt=Qt=Zt=null,zr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(a=Ha(a,"onBeforeInput")).length&&(o=new br("onBeforeInput","beforeinput",null,r,o),n.push({event:o,listeners:a}),o.data=x))}$a(n,t)})}function qa(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ha(e,t){for(var r=t+"Capture",a=[];null!==e;){var o=e,s=o.stateNode;5===o.tag&&null!==s&&(o=s,null!=(s=Te(e,r))&&a.unshift(qa(e,s,o)),null!=(s=Te(e,t))&&a.push(qa(e,s,o))),e=e.return}return a}function Va(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ga(e,t,r,a,o){for(var s=t._reactName,n=[];null!==r&&r!==a;){var i=r,l=i.alternate,c=i.stateNode;if(null!==l&&l===a)break;5===i.tag&&null!==c&&(i=c,o?null!=(l=Te(r,s))&&n.unshift(qa(r,l,i)):o||null!=(l=Te(r,s))&&n.push(qa(r,l,i))),r=r.return}0!==n.length&&e.push({event:t,listeners:n})}var Ja=/\r\n?/g,Ka=/\u0000|\uFFFD/g;function Ya(e){return("string"===typeof e?e:""+e).replace(Ja,"\n").replace(Ka,"")}function Za(e,t,r){if(t=Ya(t),Ya(e)!==t&&r)throw Error(s(425))}function Qa(){}var Xa=null,eo=null;function to(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"===typeof setTimeout?setTimeout:void 0,ao="function"===typeof clearTimeout?clearTimeout:void 0,oo="function"===typeof Promise?Promise:void 0,so="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oo?function(e){return oo.resolve(null).then(e).catch(no)}:ro;function no(e){setTimeout(function(){throw e})}function io(e,t){var r=t,a=0;do{var o=r.nextSibling;if(e.removeChild(r),o&&8===o.nodeType)if("/$"===(r=o.data)){if(0===a)return e.removeChild(o),void Wt(t);a--}else"$"!==r&&"$?"!==r&&"$!"!==r||a++;r=o}while(r);Wt(t)}function lo(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function co(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var uo=Math.random().toString(36).slice(2),ho="__reactFiber$"+uo,mo="__reactProps$"+uo,po="__reactContainer$"+uo,go="__reactEvents$"+uo,fo="__reactListeners$"+uo,vo="__reactHandles$"+uo;function xo(e){var t=e[ho];if(t)return t;for(var r=e.parentNode;r;){if(t=r[po]||r[ho]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=co(e);null!==e;){if(r=e[ho])return r;e=co(e)}return t}r=(e=r).parentNode}return null}function bo(e){return!(e=e[ho]||e[po])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function yo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wo(e){return e[mo]||null}var jo=[],ko=-1;function No(e){return{current:e}}function Co(e){0>ko||(e.current=jo[ko],jo[ko]=null,ko--)}function So(e,t){ko++,jo[ko]=e.current,e.current=t}var _o={},Eo=No(_o),Po=No(!1),Io=_o;function Ao(e,t){var r=e.type.contextTypes;if(!r)return _o;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var o,s={};for(o in r)s[o]=t[o];return a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function To(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Lo(){Co(Po),Co(Eo)}function Do(e,t,r){if(Eo.current!==_o)throw Error(s(168));So(Eo,t),So(Po,r)}function Mo(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,"function"!==typeof a.getChildContext)return r;for(var o in a=a.getChildContext())if(!(o in t))throw Error(s(108,B(e)||"Unknown",o));return $({},r,a)}function Ro(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_o,Io=Eo.current,So(Eo,e),So(Po,Po.current),!0}function $o(e,t,r){var a=e.stateNode;if(!a)throw Error(s(169));r?(e=Mo(e,t,Io),a.__reactInternalMemoizedMergedChildContext=e,Co(Po),Co(Eo),So(Eo,e)):Co(Po),So(Po,r)}var Fo=null,Oo=!1,Uo=!1;function zo(e){null===Fo?Fo=[e]:Fo.push(e)}function Wo(){if(!Uo&&null!==Fo){Uo=!0;var e=0,t=bt;try{var r=Fo;for(bt=1;e<r.length;e++){var a=r[e];do{a=a(!0)}while(null!==a)}Fo=null,Oo=!1}catch(o){throw null!==Fo&&(Fo=Fo.slice(e+1)),Ge(Xe,Wo),o}finally{bt=t,Uo=!1}}return null}var Bo=[],qo=0,Ho=null,Vo=0,Go=[],Jo=0,Ko=null,Yo=1,Zo="";function Qo(e,t){Bo[qo++]=Vo,Bo[qo++]=Ho,Ho=e,Vo=t}function Xo(e,t,r){Go[Jo++]=Yo,Go[Jo++]=Zo,Go[Jo++]=Ko,Ko=e;var a=Yo;e=Zo;var o=32-nt(a)-1;a&=~(1<<o),r+=1;var s=32-nt(t)+o;if(30<s){var n=o-o%5;s=(a&(1<<n)-1).toString(32),a>>=n,o-=n,Yo=1<<32-nt(t)+o|r<<o|a,Zo=s+e}else Yo=1<<s|r<<o|a,Zo=e}function es(e){null!==e.return&&(Qo(e,1),Xo(e,1,0))}function ts(e){for(;e===Ho;)Ho=Bo[--qo],Bo[qo]=null,Vo=Bo[--qo],Bo[qo]=null;for(;e===Ko;)Ko=Go[--Jo],Go[Jo]=null,Zo=Go[--Jo],Go[Jo]=null,Yo=Go[--Jo],Go[Jo]=null}var rs=null,as=null,os=!1,ss=null;function ns(e,t){var r=Ac(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function is(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rs=e,as=lo(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rs=e,as=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Ko?{id:Yo,overflow:Zo}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Ac(18,null,null,0)).stateNode=t,r.return=e,e.child=r,rs=e,as=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(os){var t=as;if(t){var r=t;if(!is(e,t)){if(ls(e))throw Error(s(418));t=lo(r.nextSibling);var a=rs;t&&is(e,t)?ns(a,r):(e.flags=-4097&e.flags|2,os=!1,rs=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,os=!1,rs=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rs=e}function us(e){if(e!==rs)return!1;if(!os)return ds(e),os=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!to(e.type,e.memoizedProps)),t&&(t=as)){if(ls(e))throw hs(),Error(s(418));for(;t;)ns(e,t),t=lo(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){as=lo(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}as=null}}else as=rs?lo(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=as;e;)e=lo(e.nextSibling)}function ms(){as=rs=null,os=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var gs=y.ReactCurrentBatchConfig;function fs(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(s(309));var a=r.stateNode}if(!a)throw Error(s(147,e));var o=a,n=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===n?t.ref:(t=function(e){var t=o.refs;null===e?delete t[n]:t[n]=e},t._stringRef=n,t)}if("string"!==typeof e)throw Error(s(284));if(!r._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xs(e){return(0,e._init)(e._payload)}function bs(e){function t(t,r){if(e){var a=t.deletions;null===a?(t.deletions=[r],t.flags|=16):a.push(r)}}function r(r,a){if(!e)return null;for(;null!==a;)t(r,a),a=a.sibling;return null}function a(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Lc(e,t)).index=0,e.sibling=null,e}function n(t,r,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<r?(t.flags|=2,r):a:(t.flags|=2,r):(t.flags|=1048576,r)}function i(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,a){return null===t||6!==t.tag?((t=$c(r,e.mode,a)).return=e,t):((t=o(t,r)).return=e,t)}function c(e,t,r,a){var s=r.type;return s===k?u(e,t,r.props.children,a,r.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===T&&xs(s)===t.type)?((a=o(t,r.props)).ref=fs(e,t,r),a.return=e,a):((a=Dc(r.type,r.key,r.props,null,e.mode,a)).ref=fs(e,t,r),a.return=e,a)}function d(e,t,r,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Fc(r,e.mode,a)).return=e,t):((t=o(t,r.children||[])).return=e,t)}function u(e,t,r,a,s){return null===t||7!==t.tag?((t=Mc(r,e.mode,a,s)).return=e,t):((t=o(t,r)).return=e,t)}function h(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=$c(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(r=Dc(t.type,t.key,t.props,null,e.mode,r)).ref=fs(e,null,t),r.return=e,r;case j:return(t=Fc(t,e.mode,r)).return=e,t;case T:return h(e,(0,t._init)(t._payload),r)}if(te(t)||M(t))return(t=Mc(t,e.mode,r,null)).return=e,t;vs(e,t)}return null}function m(e,t,r,a){var o=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==o?null:l(e,t,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return r.key===o?c(e,t,r,a):null;case j:return r.key===o?d(e,t,r,a):null;case T:return m(e,t,(o=r._init)(r._payload),a)}if(te(r)||M(r))return null!==o?null:u(e,t,r,a,null);vs(e,r)}return null}function p(e,t,r,a,o){if("string"===typeof a&&""!==a||"number"===typeof a)return l(t,e=e.get(r)||null,""+a,o);if("object"===typeof a&&null!==a){switch(a.$$typeof){case w:return c(t,e=e.get(null===a.key?r:a.key)||null,a,o);case j:return d(t,e=e.get(null===a.key?r:a.key)||null,a,o);case T:return p(e,t,r,(0,a._init)(a._payload),o)}if(te(a)||M(a))return u(t,e=e.get(r)||null,a,o,null);vs(t,a)}return null}function g(o,s,i,l){for(var c=null,d=null,u=s,g=s=0,f=null;null!==u&&g<i.length;g++){u.index>g?(f=u,u=null):f=u.sibling;var v=m(o,u,i[g],l);if(null===v){null===u&&(u=f);break}e&&u&&null===v.alternate&&t(o,u),s=n(v,s,g),null===d?c=v:d.sibling=v,d=v,u=f}if(g===i.length)return r(o,u),os&&Qo(o,g),c;if(null===u){for(;g<i.length;g++)null!==(u=h(o,i[g],l))&&(s=n(u,s,g),null===d?c=u:d.sibling=u,d=u);return os&&Qo(o,g),c}for(u=a(o,u);g<i.length;g++)null!==(f=p(u,o,g,i[g],l))&&(e&&null!==f.alternate&&u.delete(null===f.key?g:f.key),s=n(f,s,g),null===d?c=f:d.sibling=f,d=f);return e&&u.forEach(function(e){return t(o,e)}),os&&Qo(o,g),c}function f(o,i,l,c){var d=M(l);if("function"!==typeof d)throw Error(s(150));if(null==(l=d.call(l)))throw Error(s(151));for(var u=d=null,g=i,f=i=0,v=null,x=l.next();null!==g&&!x.done;f++,x=l.next()){g.index>f?(v=g,g=null):v=g.sibling;var b=m(o,g,x.value,c);if(null===b){null===g&&(g=v);break}e&&g&&null===b.alternate&&t(o,g),i=n(b,i,f),null===u?d=b:u.sibling=b,u=b,g=v}if(x.done)return r(o,g),os&&Qo(o,f),d;if(null===g){for(;!x.done;f++,x=l.next())null!==(x=h(o,x.value,c))&&(i=n(x,i,f),null===u?d=x:u.sibling=x,u=x);return os&&Qo(o,f),d}for(g=a(o,g);!x.done;f++,x=l.next())null!==(x=p(g,o,f,x.value,c))&&(e&&null!==x.alternate&&g.delete(null===x.key?f:x.key),i=n(x,i,f),null===u?d=x:u.sibling=x,u=x);return e&&g.forEach(function(e){return t(o,e)}),os&&Qo(o,f),d}return function e(a,s,n,l){if("object"===typeof n&&null!==n&&n.type===k&&null===n.key&&(n=n.props.children),"object"===typeof n&&null!==n){switch(n.$$typeof){case w:e:{for(var c=n.key,d=s;null!==d;){if(d.key===c){if((c=n.type)===k){if(7===d.tag){r(a,d.sibling),(s=o(d,n.props.children)).return=a,a=s;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===T&&xs(c)===d.type){r(a,d.sibling),(s=o(d,n.props)).ref=fs(a,d,n),s.return=a,a=s;break e}r(a,d);break}t(a,d),d=d.sibling}n.type===k?((s=Mc(n.props.children,a.mode,l,n.key)).return=a,a=s):((l=Dc(n.type,n.key,n.props,null,a.mode,l)).ref=fs(a,s,n),l.return=a,a=l)}return i(a);case j:e:{for(d=n.key;null!==s;){if(s.key===d){if(4===s.tag&&s.stateNode.containerInfo===n.containerInfo&&s.stateNode.implementation===n.implementation){r(a,s.sibling),(s=o(s,n.children||[])).return=a,a=s;break e}r(a,s);break}t(a,s),s=s.sibling}(s=Fc(n,a.mode,l)).return=a,a=s}return i(a);case T:return e(a,s,(d=n._init)(n._payload),l)}if(te(n))return g(a,s,n,l);if(M(n))return f(a,s,n,l);vs(a,n)}return"string"===typeof n&&""!==n||"number"===typeof n?(n=""+n,null!==s&&6===s.tag?(r(a,s.sibling),(s=o(s,n)).return=a,a=s):(r(a,s),(s=$c(n,a.mode,l)).return=a,a=s),i(a)):r(a,s)}}var ys=bs(!0),ws=bs(!1),js=No(null),ks=null,Ns=null,Cs=null;function Ss(){Cs=Ns=ks=null}function _s(e){var t=js.current;Co(js),e._currentValue=t}function Es(e,t,r){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function Ps(e,t){ks=e,Cs=Ns=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bi=!0),e.firstContext=null)}function Is(e){var t=e._currentValue;if(Cs!==e)if(e={context:e,memoizedValue:t,next:null},null===Ns){if(null===ks)throw Error(s(308));Ns=e,ks.dependencies={lanes:0,firstContext:e}}else Ns=Ns.next=e;return t}var As=null;function Ts(e){null===As?As=[e]:As.push(e)}function Ls(e,t,r,a){var o=t.interleaved;return null===o?(r.next=r,Ts(t)):(r.next=o.next,o.next=r),t.interleaved=r,Ds(e,a)}function Ds(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Ms=!1;function Rs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $s(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Os(e,t,r){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,0!==(2&El)){var o=a.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),a.pending=t,Ds(e,r)}return null===(o=a.interleaved)?(t.next=t,Ts(a)):(t.next=o.next,o.next=t),a.interleaved=t,Ds(e,r)}function Us(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var a=t.lanes;r|=a&=e.pendingLanes,t.lanes=r,xt(e,r)}}function zs(e,t){var r=e.updateQueue,a=e.alternate;if(null!==a&&r===(a=a.updateQueue)){var o=null,s=null;if(null!==(r=r.firstBaseUpdate)){do{var n={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===s?o=s=n:s=s.next=n,r=r.next}while(null!==r);null===s?o=s=t:s=s.next=t}else o=s=t;return r={baseState:a.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:a.shared,effects:a.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ws(e,t,r,a){var o=e.updateQueue;Ms=!1;var s=o.firstBaseUpdate,n=o.lastBaseUpdate,i=o.shared.pending;if(null!==i){o.shared.pending=null;var l=i,c=l.next;l.next=null,null===n?s=c:n.next=c,n=l;var d=e.alternate;null!==d&&((i=(d=d.updateQueue).lastBaseUpdate)!==n&&(null===i?d.firstBaseUpdate=c:i.next=c,d.lastBaseUpdate=l))}if(null!==s){var u=o.baseState;for(n=0,d=c=l=null,i=s;;){var h=i.lane,m=i.eventTime;if((a&h)===h){null!==d&&(d=d.next={eventTime:m,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var p=e,g=i;switch(h=t,m=r,g.tag){case 1:if("function"===typeof(p=g.payload)){u=p.call(m,u,h);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(m,u,h):p)||void 0===h)break e;u=$({},u,h);break e;case 2:Ms=!0}}null!==i.callback&&0!==i.lane&&(e.flags|=64,null===(h=o.effects)?o.effects=[i]:h.push(i))}else m={eventTime:m,lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===d?(c=d=m,l=u):d=d.next=m,n|=h;if(null===(i=i.next)){if(null===(i=o.shared.pending))break;i=(h=i).next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}if(null===d&&(l=u),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=d,null!==(t=o.shared.interleaved)){o=t;do{n|=o.lane,o=o.next}while(o!==t)}else null===s&&(o.shared.lanes=0);Rl|=n,e.lanes=n,e.memoizedState=u}}function Bs(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var a=e[t],o=a.callback;if(null!==o){if(a.callback=null,a=r,"function"!==typeof o)throw Error(s(191,o));o.call(a)}}}var qs={},Hs=No(qs),Vs=No(qs),Gs=No(qs);function Js(e){if(e===qs)throw Error(s(174));return e}function Ks(e,t){switch(So(Gs,t),So(Vs,e),So(Hs,qs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Co(Hs),So(Hs,t)}function Ys(){Co(Hs),Co(Vs),Co(Gs)}function Zs(e){Js(Gs.current);var t=Js(Hs.current),r=le(t,e.type);t!==r&&(So(Vs,e),So(Hs,r))}function Qs(e){Vs.current===e&&(Co(Hs),Co(Vs))}var Xs=No(0);function en(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var tn=[];function rn(){for(var e=0;e<tn.length;e++)tn[e]._workInProgressVersionPrimary=null;tn.length=0}var an=y.ReactCurrentDispatcher,on=y.ReactCurrentBatchConfig,sn=0,nn=null,ln=null,cn=null,dn=!1,un=!1,hn=0,mn=0;function pn(){throw Error(s(321))}function gn(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!na(e[r],t[r]))return!1;return!0}function fn(e,t,r,a,o,n){if(sn=n,nn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,an.current=null===e||null===e.memoizedState?Xn:ei,e=r(a,o),un){n=0;do{if(un=!1,hn=0,25<=n)throw Error(s(301));n+=1,cn=ln=null,t.updateQueue=null,an.current=ti,e=r(a,o)}while(un)}if(an.current=Qn,t=null!==ln&&null!==ln.next,sn=0,cn=ln=nn=null,dn=!1,t)throw Error(s(300));return e}function vn(){var e=0!==hn;return hn=0,e}function xn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===cn?nn.memoizedState=cn=e:cn=cn.next=e,cn}function bn(){if(null===ln){var e=nn.alternate;e=null!==e?e.memoizedState:null}else e=ln.next;var t=null===cn?nn.memoizedState:cn.next;if(null!==t)cn=t,ln=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ln=e).memoizedState,baseState:ln.baseState,baseQueue:ln.baseQueue,queue:ln.queue,next:null},null===cn?nn.memoizedState=cn=e:cn=cn.next=e}return cn}function yn(e,t){return"function"===typeof t?t(e):t}function wn(e){var t=bn(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var a=ln,o=a.baseQueue,n=r.pending;if(null!==n){if(null!==o){var i=o.next;o.next=n.next,n.next=i}a.baseQueue=o=n,r.pending=null}if(null!==o){n=o.next,a=a.baseState;var l=i=null,c=null,d=n;do{var u=d.lane;if((sn&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:e(a,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,i=a):c=c.next=h,nn.lanes|=u,Rl|=u}d=d.next}while(null!==d&&d!==n);null===c?i=a:c.next=l,na(a,t.memoizedState)||(bi=!0),t.memoizedState=a,t.baseState=i,t.baseQueue=c,r.lastRenderedState=a}if(null!==(e=r.interleaved)){o=e;do{n=o.lane,nn.lanes|=n,Rl|=n,o=o.next}while(o!==e)}else null===o&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function jn(e){var t=bn(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var a=r.dispatch,o=r.pending,n=t.memoizedState;if(null!==o){r.pending=null;var i=o=o.next;do{n=e(n,i.action),i=i.next}while(i!==o);na(n,t.memoizedState)||(bi=!0),t.memoizedState=n,null===t.baseQueue&&(t.baseState=n),r.lastRenderedState=n}return[n,a]}function kn(){}function Nn(e,t){var r=nn,a=bn(),o=t(),n=!na(a.memoizedState,o);if(n&&(a.memoizedState=o,bi=!0),a=a.queue,Rn(_n.bind(null,r,a,e),[e]),a.getSnapshot!==t||n||null!==cn&&1&cn.memoizedState.tag){if(r.flags|=2048,An(9,Sn.bind(null,r,a,o,t),void 0,null),null===Pl)throw Error(s(349));0!==(30&sn)||Cn(r,t,o)}return o}function Cn(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=nn.updateQueue)?(t={lastEffect:null,stores:null},nn.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Sn(e,t,r,a){t.value=r,t.getSnapshot=a,En(t)&&Pn(e)}function _n(e,t,r){return r(function(){En(t)&&Pn(e)})}function En(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!na(e,r)}catch(a){return!0}}function Pn(e){var t=Ds(e,1);null!==t&&rc(t,e,1,-1)}function In(e){var t=xn();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yn,lastRenderedState:e},t.queue=e,e=e.dispatch=Jn.bind(null,nn,e),[t.memoizedState,e]}function An(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},null===(t=nn.updateQueue)?(t={lastEffect:null,stores:null},nn.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e),e}function Tn(){return bn().memoizedState}function Ln(e,t,r,a){var o=xn();nn.flags|=e,o.memoizedState=An(1|t,r,void 0,void 0===a?null:a)}function Dn(e,t,r,a){var o=bn();a=void 0===a?null:a;var s=void 0;if(null!==ln){var n=ln.memoizedState;if(s=n.destroy,null!==a&&gn(a,n.deps))return void(o.memoizedState=An(t,r,s,a))}nn.flags|=e,o.memoizedState=An(1|t,r,s,a)}function Mn(e,t){return Ln(8390656,8,e,t)}function Rn(e,t){return Dn(2048,8,e,t)}function $n(e,t){return Dn(4,2,e,t)}function Fn(e,t){return Dn(4,4,e,t)}function On(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Un(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Dn(4,4,On.bind(null,t,e),r)}function zn(){}function Wn(e,t){var r=bn();t=void 0===t?null:t;var a=r.memoizedState;return null!==a&&null!==t&&gn(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function Bn(e,t){var r=bn();t=void 0===t?null:t;var a=r.memoizedState;return null!==a&&null!==t&&gn(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function qn(e,t,r){return 0===(21&sn)?(e.baseState&&(e.baseState=!1,bi=!0),e.memoizedState=r):(na(r,t)||(r=gt(),nn.lanes|=r,Rl|=r,e.baseState=!0),t)}function Hn(e,t){var r=bt;bt=0!==r&&4>r?r:4,e(!0);var a=on.transition;on.transition={};try{e(!1),t()}finally{bt=r,on.transition=a}}function Vn(){return bn().memoizedState}function Gn(e,t,r){var a=tc(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},Kn(e))Yn(t,r);else if(null!==(r=Ls(e,t,r,a))){rc(r,e,a,ec()),Zn(r,t,a)}}function Jn(e,t,r){var a=tc(e),o={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(Kn(e))Yn(t,o);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var n=t.lastRenderedState,i=s(n,r);if(o.hasEagerState=!0,o.eagerState=i,na(i,n)){var l=t.interleaved;return null===l?(o.next=o,Ts(t)):(o.next=l.next,l.next=o),void(t.interleaved=o)}}catch(c){}null!==(r=Ls(e,t,o,a))&&(rc(r,e,a,o=ec()),Zn(r,t,a))}}function Kn(e){var t=e.alternate;return e===nn||null!==t&&t===nn}function Yn(e,t){un=dn=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Zn(e,t,r){if(0!==(4194240&r)){var a=t.lanes;r|=a&=e.pendingLanes,t.lanes=r,xt(e,r)}}var Qn={readContext:Is,useCallback:pn,useContext:pn,useEffect:pn,useImperativeHandle:pn,useInsertionEffect:pn,useLayoutEffect:pn,useMemo:pn,useReducer:pn,useRef:pn,useState:pn,useDebugValue:pn,useDeferredValue:pn,useTransition:pn,useMutableSource:pn,useSyncExternalStore:pn,useId:pn,unstable_isNewReconciler:!1},Xn={readContext:Is,useCallback:function(e,t){return xn().memoizedState=[e,void 0===t?null:t],e},useContext:Is,useEffect:Mn,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ln(4194308,4,On.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ln(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ln(4,2,e,t)},useMemo:function(e,t){var r=xn();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=xn();return t=void 0!==r?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Gn.bind(null,nn,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},xn().memoizedState=e},useState:In,useDebugValue:zn,useDeferredValue:function(e){return xn().memoizedState=e},useTransition:function(){var e=In(!1),t=e[0];return e=Hn.bind(null,e[1]),xn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=nn,o=xn();if(os){if(void 0===r)throw Error(s(407));r=r()}else{if(r=t(),null===Pl)throw Error(s(349));0!==(30&sn)||Cn(a,t,r)}o.memoizedState=r;var n={value:r,getSnapshot:t};return o.queue=n,Mn(_n.bind(null,a,n,e),[e]),a.flags|=2048,An(9,Sn.bind(null,a,n,r,t),void 0,null),r},useId:function(){var e=xn(),t=Pl.identifierPrefix;if(os){var r=Zo;t=":"+t+"R"+(r=(Yo&~(1<<32-nt(Yo)-1)).toString(32)+r),0<(r=hn++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=mn++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ei={readContext:Is,useCallback:Wn,useContext:Is,useEffect:Rn,useImperativeHandle:Un,useInsertionEffect:$n,useLayoutEffect:Fn,useMemo:Bn,useReducer:wn,useRef:Tn,useState:function(){return wn(yn)},useDebugValue:zn,useDeferredValue:function(e){return qn(bn(),ln.memoizedState,e)},useTransition:function(){return[wn(yn)[0],bn().memoizedState]},useMutableSource:kn,useSyncExternalStore:Nn,useId:Vn,unstable_isNewReconciler:!1},ti={readContext:Is,useCallback:Wn,useContext:Is,useEffect:Rn,useImperativeHandle:Un,useInsertionEffect:$n,useLayoutEffect:Fn,useMemo:Bn,useReducer:jn,useRef:Tn,useState:function(){return jn(yn)},useDebugValue:zn,useDeferredValue:function(e){var t=bn();return null===ln?t.memoizedState=e:qn(t,ln.memoizedState,e)},useTransition:function(){return[jn(yn)[0],bn().memoizedState]},useMutableSource:kn,useSyncExternalStore:Nn,useId:Vn,unstable_isNewReconciler:!1};function ri(e,t){if(e&&e.defaultProps){for(var r in t=$({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function ai(e,t,r,a){r=null===(r=r(a,t=e.memoizedState))||void 0===r?t:$({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var oi={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=ec(),o=tc(e),s=Fs(a,o);s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=Os(e,s,o))&&(rc(t,e,o,a),Us(t,e,o))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=ec(),o=tc(e),s=Fs(a,o);s.tag=1,s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=Os(e,s,o))&&(rc(t,e,o,a),Us(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),a=tc(e),o=Fs(r,a);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=Os(e,o,a))&&(rc(t,e,a,r),Us(t,e,a))}};function si(e,t,r,a,o,s,n){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,s,n):!t.prototype||!t.prototype.isPureReactComponent||(!ia(r,a)||!ia(o,s))}function ni(e,t,r){var a=!1,o=_o,s=t.contextType;return"object"===typeof s&&null!==s?s=Is(s):(o=To(t)?Io:Eo.current,s=(a=null!==(a=t.contextTypes)&&void 0!==a)?Ao(e,o):_o),t=new t(r,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=oi,e.stateNode=t,t._reactInternals=e,a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=s),t}function ii(e,t,r,a){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,a),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&oi.enqueueReplaceState(t,t.state,null)}function li(e,t,r,a){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs={},Rs(e);var s=t.contextType;"object"===typeof s&&null!==s?o.context=Is(s):(s=To(t)?Io:Eo.current,o.context=Ao(e,s)),o.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ai(e,t,s,r),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&oi.enqueueReplaceState(o,o.state,null),Ws(e,r,o,a),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function ci(e,t){try{var r="",a=t;do{r+=z(a),a=a.return}while(a);var o=r}catch(s){o="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:o,digest:null}}function di(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function ui(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var hi="function"===typeof WeakMap?WeakMap:Map;function mi(e,t,r){(r=Fs(-1,r)).tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){ql||(ql=!0,Hl=a),ui(0,t)},r}function pi(e,t,r){(r=Fs(-1,r)).tag=3;var a=e.type.getDerivedStateFromError;if("function"===typeof a){var o=t.value;r.payload=function(){return a(o)},r.callback=function(){ui(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(r.callback=function(){ui(0,t),"function"!==typeof a&&(null===Vl?Vl=new Set([this]):Vl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function gi(e,t,r){var a=e.pingCache;if(null===a){a=e.pingCache=new hi;var o=new Set;a.set(t,o)}else void 0===(o=a.get(t))&&(o=new Set,a.set(t,o));o.has(r)||(o.add(r),e=Cc.bind(null,e,t,r),t.then(e,e))}function fi(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vi(e,t,r,a,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Fs(-1,1)).tag=2,Os(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var xi=y.ReactCurrentOwner,bi=!1;function yi(e,t,r,a){t.child=null===e?ws(t,null,r,a):ys(t,e.child,r,a)}function wi(e,t,r,a,o){r=r.render;var s=t.ref;return Ps(t,o),a=fn(e,t,r,a,s,o),r=vn(),null===e||bi?(os&&r&&es(t),t.flags|=1,yi(e,t,a,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,qi(e,t,o))}function ji(e,t,r,a,o){if(null===e){var s=r.type;return"function"!==typeof s||Tc(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Dc(r.type,null,a,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,ki(e,t,s,a,o))}if(s=e.child,0===(e.lanes&o)){var n=s.memoizedProps;if((r=null!==(r=r.compare)?r:ia)(n,a)&&e.ref===t.ref)return qi(e,t,o)}return t.flags|=1,(e=Lc(s,a)).ref=t.ref,e.return=t,t.child=e}function ki(e,t,r,a,o){if(null!==e){var s=e.memoizedProps;if(ia(s,a)&&e.ref===t.ref){if(bi=!1,t.pendingProps=a=s,0===(e.lanes&o))return t.lanes=e.lanes,qi(e,t,o);0!==(131072&e.flags)&&(bi=!0)}}return Si(e,t,r,a,o)}function Ni(e,t,r){var a=t.pendingProps,o=a.children,s=null!==e?e.memoizedState:null;if("hidden"===a.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},So(Ll,Tl),Tl|=r;else{if(0===(1073741824&r))return e=null!==s?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,So(Ll,Tl),Tl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=null!==s?s.baseLanes:r,So(Ll,Tl),Tl|=a}else null!==s?(a=s.baseLanes|r,t.memoizedState=null):a=r,So(Ll,Tl),Tl|=a;return yi(e,t,o,r),t.child}function Ci(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Si(e,t,r,a,o){var s=To(r)?Io:Eo.current;return s=Ao(t,s),Ps(t,o),r=fn(e,t,r,a,s,o),a=vn(),null===e||bi?(os&&a&&es(t),t.flags|=1,yi(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,qi(e,t,o))}function _i(e,t,r,a,o){if(To(r)){var s=!0;Ro(t)}else s=!1;if(Ps(t,o),null===t.stateNode)Bi(e,t),ni(t,r,a),li(t,r,a,o),a=!0;else if(null===e){var n=t.stateNode,i=t.memoizedProps;n.props=i;var l=n.context,c=r.contextType;"object"===typeof c&&null!==c?c=Is(c):c=Ao(t,c=To(r)?Io:Eo.current);var d=r.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof n.getSnapshotBeforeUpdate;u||"function"!==typeof n.UNSAFE_componentWillReceiveProps&&"function"!==typeof n.componentWillReceiveProps||(i!==a||l!==c)&&ii(t,n,a,c),Ms=!1;var h=t.memoizedState;n.state=h,Ws(t,a,n,o),l=t.memoizedState,i!==a||h!==l||Po.current||Ms?("function"===typeof d&&(ai(t,r,d,a),l=t.memoizedState),(i=Ms||si(t,r,i,a,h,l,c))?(u||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||("function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount()),"function"===typeof n.componentDidMount&&(t.flags|=4194308)):("function"===typeof n.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=l),n.props=a,n.state=l,n.context=c,a=i):("function"===typeof n.componentDidMount&&(t.flags|=4194308),a=!1)}else{n=t.stateNode,$s(e,t),i=t.memoizedProps,c=t.type===t.elementType?i:ri(t.type,i),n.props=c,u=t.pendingProps,h=n.context,"object"===typeof(l=r.contextType)&&null!==l?l=Is(l):l=Ao(t,l=To(r)?Io:Eo.current);var m=r.getDerivedStateFromProps;(d="function"===typeof m||"function"===typeof n.getSnapshotBeforeUpdate)||"function"!==typeof n.UNSAFE_componentWillReceiveProps&&"function"!==typeof n.componentWillReceiveProps||(i!==u||h!==l)&&ii(t,n,a,l),Ms=!1,h=t.memoizedState,n.state=h,Ws(t,a,n,o);var p=t.memoizedState;i!==u||h!==p||Po.current||Ms?("function"===typeof m&&(ai(t,r,m,a),p=t.memoizedState),(c=Ms||si(t,r,c,a,h,p,l)||!1)?(d||"function"!==typeof n.UNSAFE_componentWillUpdate&&"function"!==typeof n.componentWillUpdate||("function"===typeof n.componentWillUpdate&&n.componentWillUpdate(a,p,l),"function"===typeof n.UNSAFE_componentWillUpdate&&n.UNSAFE_componentWillUpdate(a,p,l)),"function"===typeof n.componentDidUpdate&&(t.flags|=4),"function"===typeof n.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof n.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof n.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=p),n.props=a,n.state=p,n.context=l,a=c):("function"!==typeof n.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof n.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),a=!1)}return Ei(e,t,r,a,s,o)}function Ei(e,t,r,a,o,s){Ci(e,t);var n=0!==(128&t.flags);if(!a&&!n)return o&&$o(t,r,!1),qi(e,t,s);a=t.stateNode,xi.current=t;var i=n&&"function"!==typeof r.getDerivedStateFromError?null:a.render();return t.flags|=1,null!==e&&n?(t.child=ys(t,e.child,null,s),t.child=ys(t,null,i,s)):yi(e,t,i,s),t.memoizedState=a.state,o&&$o(t,r,!0),t.child}function Pi(e){var t=e.stateNode;t.pendingContext?Do(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Do(0,t.context,!1),Ks(e,t.containerInfo)}function Ii(e,t,r,a,o){return ms(),ps(o),t.flags|=256,yi(e,t,r,a),t.child}var Ai,Ti,Li,Di,Mi={dehydrated:null,treeContext:null,retryLane:0};function Ri(e){return{baseLanes:e,cachePool:null,transitions:null}}function $i(e,t,r){var a,o=t.pendingProps,n=Xs.current,i=!1,l=0!==(128&t.flags);if((a=l)||(a=(null===e||null!==e.memoizedState)&&0!==(2&n)),a?(i=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(n|=1),So(Xs,1&n),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=o.children,e=o.fallback,i?(o=t.mode,i=t.child,l={mode:"hidden",children:l},0===(1&o)&&null!==i?(i.childLanes=0,i.pendingProps=l):i=Rc(l,o,0,null),e=Mc(e,o,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Ri(r),t.memoizedState=Mi,e):Fi(t,l));if(null!==(n=e.memoizedState)&&null!==(a=n.dehydrated))return function(e,t,r,a,o,n,i){if(r)return 256&t.flags?(t.flags&=-257,Oi(e,t,i,a=di(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(n=a.fallback,o=t.mode,a=Rc({mode:"visible",children:a.children},o,0,null),(n=Mc(n,o,i,null)).flags|=2,a.return=t,n.return=t,a.sibling=n,t.child=a,0!==(1&t.mode)&&ys(t,e.child,null,i),t.child.memoizedState=Ri(i),t.memoizedState=Mi,n);if(0===(1&t.mode))return Oi(e,t,i,null);if("$!"===o.data){if(a=o.nextSibling&&o.nextSibling.dataset)var l=a.dgst;return a=l,Oi(e,t,i,a=di(n=Error(s(419)),a,void 0))}if(l=0!==(i&e.childLanes),bi||l){if(null!==(a=Pl)){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(a.suspendedLanes|i))?0:o)&&o!==n.retryLane&&(n.retryLane=o,Ds(e,o),rc(a,e,o,-1))}return gc(),Oi(e,t,i,a=di(Error(s(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=_c.bind(null,e),o._reactRetry=t,null):(e=n.treeContext,as=lo(o.nextSibling),rs=t,os=!0,ss=null,null!==e&&(Go[Jo++]=Yo,Go[Jo++]=Zo,Go[Jo++]=Ko,Yo=e.id,Zo=e.overflow,Ko=t),t=Fi(t,a.children),t.flags|=4096,t)}(e,t,l,o,a,n,r);if(i){i=o.fallback,l=t.mode,a=(n=e.child).sibling;var c={mode:"hidden",children:o.children};return 0===(1&l)&&t.child!==n?((o=t.child).childLanes=0,o.pendingProps=c,t.deletions=null):(o=Lc(n,c)).subtreeFlags=14680064&n.subtreeFlags,null!==a?i=Lc(a,i):(i=Mc(i,l,r,null)).flags|=2,i.return=t,o.return=t,o.sibling=i,t.child=o,o=i,i=t.child,l=null===(l=e.child.memoizedState)?Ri(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~r,t.memoizedState=Mi,o}return e=(i=e.child).sibling,o=Lc(i,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=r),o.return=t,o.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=o,t.memoizedState=null,o}function Fi(e,t){return(t=Rc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Oi(e,t,r,a){return null!==a&&ps(a),ys(t,e.child,null,r),(e=Fi(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ui(e,t,r){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),Es(e.return,t,r)}function zi(e,t,r,a,o){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=a,s.tail=r,s.tailMode=o)}function Wi(e,t,r){var a=t.pendingProps,o=a.revealOrder,s=a.tail;if(yi(e,t,a.children,r),0!==(2&(a=Xs.current)))a=1&a|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ui(e,r,t);else if(19===e.tag)Ui(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(So(Xs,a),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;null!==r;)null!==(e=r.alternate)&&null===en(e)&&(o=r),r=r.sibling;null===(r=o)?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),zi(t,!1,o,r,s);break;case"backwards":for(r=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===en(e)){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}zi(t,!0,r,null,s);break;case"together":zi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bi(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qi(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Rl|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(r=Lc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Lc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Hi(e,t){if(!os)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;null!==r;)null!==r.alternate&&(a=r),r=r.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Vi(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,a=0;if(t)for(var o=e.child;null!==o;)r|=o.lanes|o.childLanes,a|=14680064&o.subtreeFlags,a|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)r|=o.lanes|o.childLanes,a|=o.subtreeFlags,a|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function Gi(e,t,r){var a=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vi(t),null;case 1:case 17:return To(t.type)&&Lo(),Vi(t),null;case 3:return a=t.stateNode,Ys(),Co(Po),Co(Eo),rn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(us(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(nc(ss),ss=null))),Ti(e,t),Vi(t),null;case 5:Qs(t);var o=Js(Gs.current);if(r=t.type,null!==e&&null!=t.stateNode)Li(e,t,r,a,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(null===t.stateNode)throw Error(s(166));return Vi(t),null}if(e=Js(Hs.current),us(t)){a=t.stateNode,r=t.type;var n=t.memoizedProps;switch(a[ho]=t,a[mo]=n,e=0!==(1&t.mode),r){case"dialog":Fa("cancel",a),Fa("close",a);break;case"iframe":case"object":case"embed":Fa("load",a);break;case"video":case"audio":for(o=0;o<Da.length;o++)Fa(Da[o],a);break;case"source":Fa("error",a);break;case"img":case"image":case"link":Fa("error",a),Fa("load",a);break;case"details":Fa("toggle",a);break;case"input":Y(a,n),Fa("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!n.multiple},Fa("invalid",a);break;case"textarea":oe(a,n),Fa("invalid",a)}for(var l in xe(r,n),o=null,n)if(n.hasOwnProperty(l)){var c=n[l];"children"===l?"string"===typeof c?a.textContent!==c&&(!0!==n.suppressHydrationWarning&&Za(a.textContent,c,e),o=["children",c]):"number"===typeof c&&a.textContent!==""+c&&(!0!==n.suppressHydrationWarning&&Za(a.textContent,c,e),o=["children",""+c]):i.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fa("scroll",a)}switch(r){case"input":V(a),X(a,n,!0);break;case"textarea":V(a),ne(a);break;case"select":case"option":break;default:"function"===typeof n.onClick&&(a.onclick=Qa)}a=o,t.updateQueue=a,null!==a&&(t.flags|=4)}else{l=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ie(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof a.is?e=l.createElement(r,{is:a.is}):(e=l.createElement(r),"select"===r&&(l=e,a.multiple?l.multiple=!0:a.size&&(l.size=a.size))):e=l.createElementNS(e,r),e[ho]=t,e[mo]=a,Ai(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(r,a),r){case"dialog":Fa("cancel",e),Fa("close",e),o=a;break;case"iframe":case"object":case"embed":Fa("load",e),o=a;break;case"video":case"audio":for(o=0;o<Da.length;o++)Fa(Da[o],e);o=a;break;case"source":Fa("error",e),o=a;break;case"img":case"image":case"link":Fa("error",e),Fa("load",e),o=a;break;case"details":Fa("toggle",e),o=a;break;case"input":Y(e,a),o=K(e,a),Fa("invalid",e);break;case"option":default:o=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},o=$({},a,{value:void 0}),Fa("invalid",e);break;case"textarea":oe(e,a),o=ae(e,a),Fa("invalid",e)}for(n in xe(r,o),c=o)if(c.hasOwnProperty(n)){var d=c[n];"style"===n?fe(e,d):"dangerouslySetInnerHTML"===n?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===n?"string"===typeof d?("textarea"!==r||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(i.hasOwnProperty(n)?null!=d&&"onScroll"===n&&Fa("scroll",e):null!=d&&b(e,n,d,l))}switch(r){case"input":V(e),X(e,a,!1);break;case"textarea":V(e),ne(e);break;case"option":null!=a.value&&e.setAttribute("value",""+q(a.value));break;case"select":e.multiple=!!a.multiple,null!=(n=a.value)?re(e,!!a.multiple,n,!1):null!=a.defaultValue&&re(e,!!a.multiple,a.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Qa)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Vi(t),null;case 6:if(e&&null!=t.stateNode)Di(e,t,e.memoizedProps,a);else{if("string"!==typeof a&&null===t.stateNode)throw Error(s(166));if(r=Js(Gs.current),Js(Hs.current),us(t)){if(a=t.stateNode,r=t.memoizedProps,a[ho]=t,(n=a.nodeValue!==r)&&null!==(e=rs))switch(e.tag){case 3:Za(a.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Za(a.nodeValue,r,0!==(1&e.mode))}n&&(t.flags|=4)}else(a=(9===r.nodeType?r:r.ownerDocument).createTextNode(a))[ho]=t,t.stateNode=a}return Vi(t),null;case 13:if(Co(Xs),a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(os&&null!==as&&0!==(1&t.mode)&&0===(128&t.flags))hs(),ms(),t.flags|=98560,n=!1;else if(n=us(t),null!==a&&null!==a.dehydrated){if(null===e){if(!n)throw Error(s(318));if(!(n=null!==(n=t.memoizedState)?n.dehydrated:null))throw Error(s(317));n[ho]=t}else ms(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Vi(t),n=!1}else null!==ss&&(nc(ss),ss=null),n=!0;if(!n)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((a=null!==a)!==(null!==e&&null!==e.memoizedState)&&a&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Xs.current)?0===Dl&&(Dl=3):gc())),null!==t.updateQueue&&(t.flags|=4),Vi(t),null);case 4:return Ys(),Ti(e,t),null===e&&za(t.stateNode.containerInfo),Vi(t),null;case 10:return _s(t.type._context),Vi(t),null;case 19:if(Co(Xs),null===(n=t.memoizedState))return Vi(t),null;if(a=0!==(128&t.flags),null===(l=n.rendering))if(a)Hi(n,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=en(e))){for(t.flags|=128,Hi(n,!1),null!==(a=l.updateQueue)&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;null!==r;)e=a,(n=r).flags&=14680066,null===(l=n.alternate)?(n.childLanes=0,n.lanes=e,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,e=l.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return So(Xs,1&Xs.current|2),t.child}e=e.sibling}null!==n.tail&&Ze()>Wl&&(t.flags|=128,a=!0,Hi(n,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=en(l))){if(t.flags|=128,a=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Hi(n,!0),null===n.tail&&"hidden"===n.tailMode&&!l.alternate&&!os)return Vi(t),null}else 2*Ze()-n.renderingStartTime>Wl&&1073741824!==r&&(t.flags|=128,a=!0,Hi(n,!1),t.lanes=4194304);n.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=n.last)?r.sibling=l:t.child=l,n.last=l)}return null!==n.tail?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=Ze(),t.sibling=null,r=Xs.current,So(Xs,a?1&r|2:1&r),t):(Vi(t),null);case 22:case 23:return uc(),a=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==a&&(t.flags|=8192),a&&0!==(1&t.mode)?0!==(1073741824&Tl)&&(Vi(t),6&t.subtreeFlags&&(t.flags|=8192)):Vi(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ji(e,t){switch(ts(t),t.tag){case 1:return To(t.type)&&Lo(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ys(),Co(Po),Co(Eo),rn(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Qs(t),null;case 13:if(Co(Xs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ms()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Co(Xs),null;case 4:return Ys(),null;case 10:return _s(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Ai=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Ti=function(){},Li=function(e,t,r,a){var o=e.memoizedProps;if(o!==a){e=t.stateNode,Js(Hs.current);var s,n=null;switch(r){case"input":o=K(e,o),a=K(e,a),n=[];break;case"select":o=$({},o,{value:void 0}),a=$({},a,{value:void 0}),n=[];break;case"textarea":o=ae(e,o),a=ae(e,a),n=[];break;default:"function"!==typeof o.onClick&&"function"===typeof a.onClick&&(e.onclick=Qa)}for(d in xe(r,a),r=null,o)if(!a.hasOwnProperty(d)&&o.hasOwnProperty(d)&&null!=o[d])if("style"===d){var l=o[d];for(s in l)l.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(i.hasOwnProperty(d)?n||(n=[]):(n=n||[]).push(d,null));for(d in a){var c=a[d];if(l=null!=o?o[d]:void 0,a.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(n||(n=[]),n.push(d,r)),r=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(n=n||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(n=n||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(i.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Fa("scroll",e),n||l===c||(n=[])):(n=n||[]).push(d,c))}r&&(n=n||[]).push("style",r);var d=n;(t.updateQueue=d)&&(t.flags|=4)}},Di=function(e,t,r,a){r!==a&&(t.flags|=4)};var Ki=!1,Yi=!1,Zi="function"===typeof WeakSet?WeakSet:Set,Qi=null;function Xi(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(a){Nc(e,t,a)}else r.current=null}function el(e,t,r){try{r()}catch(a){Nc(e,t,a)}}var tl=!1;function rl(e,t,r){var a=t.updateQueue;if(null!==(a=null!==a?a.lastEffect:null)){var o=a=a.next;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,void 0!==s&&el(t,r,s)}o=o.next}while(o!==a)}}function al(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function ol(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ho],delete t[mo],delete t[go],delete t[fo],delete t[vo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function nl(e){return 5===e.tag||3===e.tag||4===e.tag}function il(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||nl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,r){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Qa));else if(4!==a&&null!==(e=e.child))for(ll(e,t,r),e=e.sibling;null!==e;)ll(e,t,r),e=e.sibling}function cl(e,t,r){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==a&&null!==(e=e.child))for(cl(e,t,r),e=e.sibling;null!==e;)cl(e,t,r),e=e.sibling}var dl=null,ul=!1;function hl(e,t,r){for(r=r.child;null!==r;)ml(e,t,r),r=r.sibling}function ml(e,t,r){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(ot,r)}catch(i){}switch(r.tag){case 5:Yi||Xi(r,t);case 6:var a=dl,o=ul;dl=null,hl(e,t,r),ul=o,null!==(dl=a)&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):dl.removeChild(r.stateNode));break;case 18:null!==dl&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?io(e.parentNode,r):1===e.nodeType&&io(e,r),Wt(e)):io(dl,r.stateNode));break;case 4:a=dl,o=ul,dl=r.stateNode.containerInfo,ul=!0,hl(e,t,r),dl=a,ul=o;break;case 0:case 11:case 14:case 15:if(!Yi&&(null!==(a=r.updateQueue)&&null!==(a=a.lastEffect))){o=a=a.next;do{var s=o,n=s.destroy;s=s.tag,void 0!==n&&(0!==(2&s)||0!==(4&s))&&el(r,t,n),o=o.next}while(o!==a)}hl(e,t,r);break;case 1:if(!Yi&&(Xi(r,t),"function"===typeof(a=r.stateNode).componentWillUnmount))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(i){Nc(r,t,i)}hl(e,t,r);break;case 21:hl(e,t,r);break;case 22:1&r.mode?(Yi=(a=Yi)||null!==r.memoizedState,hl(e,t,r),Yi=a):hl(e,t,r);break;default:hl(e,t,r)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Zi),t.forEach(function(t){var a=Ec.bind(null,e,t);r.has(t)||(r.add(t),t.then(a,a))})}}function gl(e,t){var r=t.deletions;if(null!==r)for(var a=0;a<r.length;a++){var o=r[a];try{var n=e,i=t,l=i;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(s(160));ml(n,i,o),dl=null,ul=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(d){Nc(o,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)fl(t,e),t=t.sibling}function fl(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&a){try{rl(3,e,e.return),al(3,e)}catch(f){Nc(e,e.return,f)}try{rl(5,e,e.return)}catch(f){Nc(e,e.return,f)}}break;case 1:gl(t,e),vl(e),512&a&&null!==r&&Xi(r,r.return);break;case 5:if(gl(t,e),vl(e),512&a&&null!==r&&Xi(r,r.return),32&e.flags){var o=e.stateNode;try{he(o,"")}catch(f){Nc(e,e.return,f)}}if(4&a&&null!=(o=e.stateNode)){var n=e.memoizedProps,i=null!==r?r.memoizedProps:n,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===n.type&&null!=n.name&&Z(o,n),be(l,i);var d=be(l,n);for(i=0;i<c.length;i+=2){var u=c[i],h=c[i+1];"style"===u?fe(o,h):"dangerouslySetInnerHTML"===u?ue(o,h):"children"===u?he(o,h):b(o,u,h,d)}switch(l){case"input":Q(o,n);break;case"textarea":se(o,n);break;case"select":var m=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!n.multiple;var p=n.value;null!=p?re(o,!!n.multiple,p,!1):m!==!!n.multiple&&(null!=n.defaultValue?re(o,!!n.multiple,n.defaultValue,!0):re(o,!!n.multiple,n.multiple?[]:"",!1))}o[mo]=n}catch(f){Nc(e,e.return,f)}}break;case 6:if(gl(t,e),vl(e),4&a){if(null===e.stateNode)throw Error(s(162));o=e.stateNode,n=e.memoizedProps;try{o.nodeValue=n}catch(f){Nc(e,e.return,f)}}break;case 3:if(gl(t,e),vl(e),4&a&&null!==r&&r.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(f){Nc(e,e.return,f)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(o=e.child).flags&&(n=null!==o.memoizedState,o.stateNode.isHidden=n,!n||null!==o.alternate&&null!==o.alternate.memoizedState||(zl=Ze())),4&a&&pl(e);break;case 22:if(u=null!==r&&null!==r.memoizedState,1&e.mode?(Yi=(d=Yi)||u,gl(t,e),Yi=d):gl(t,e),vl(e),8192&a){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Qi=e,u=e.child;null!==u;){for(h=Qi=u;null!==Qi;){switch(p=(m=Qi).child,m.tag){case 0:case 11:case 14:case 15:rl(4,m,m.return);break;case 1:Xi(m,m.return);var g=m.stateNode;if("function"===typeof g.componentWillUnmount){a=m,r=m.return;try{t=a,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(f){Nc(a,r,f)}}break;case 5:Xi(m,m.return);break;case 22:if(null!==m.memoizedState){wl(h);continue}}null!==p?(p.return=m,Qi=p):wl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{o=h.stateNode,d?"function"===typeof(n=o.style).setProperty?n.setProperty("display","none","important"):n.display="none":(l=h.stateNode,i=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",i))}catch(f){Nc(e,e.return,f)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(f){Nc(e,e.return,f)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),vl(e),4&a&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(nl(r)){var a=r;break e}r=r.return}throw Error(s(160))}switch(a.tag){case 5:var o=a.stateNode;32&a.flags&&(he(o,""),a.flags&=-33),cl(e,il(e),o);break;case 3:case 4:var n=a.stateNode.containerInfo;ll(e,il(e),n);break;default:throw Error(s(161))}}catch(i){Nc(e,e.return,i)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xl(e,t,r){Qi=e,bl(e,t,r)}function bl(e,t,r){for(var a=0!==(1&e.mode);null!==Qi;){var o=Qi,s=o.child;if(22===o.tag&&a){var n=null!==o.memoizedState||Ki;if(!n){var i=o.alternate,l=null!==i&&null!==i.memoizedState||Yi;i=Ki;var c=Yi;if(Ki=n,(Yi=l)&&!c)for(Qi=o;null!==Qi;)l=(n=Qi).child,22===n.tag&&null!==n.memoizedState?jl(o):null!==l?(l.return=n,Qi=l):jl(o);for(;null!==s;)Qi=s,bl(s,t,r),s=s.sibling;Qi=o,Ki=i,Yi=c}yl(e)}else 0!==(8772&o.subtreeFlags)&&null!==s?(s.return=o,Qi=s):yl(e)}}function yl(e){for(;null!==Qi;){var t=Qi;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yi||al(5,t);break;case 1:var a=t.stateNode;if(4&t.flags&&!Yi)if(null===r)a.componentDidMount();else{var o=t.elementType===t.type?r.memoizedProps:ri(t.type,r.memoizedProps);a.componentDidUpdate(o,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var n=t.updateQueue;null!==n&&Bs(t,n,a);break;case 3:var i=t.updateQueue;if(null!==i){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Bs(t,i,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Wt(h)}}}break;default:throw Error(s(163))}Yi||512&t.flags&&ol(t)}catch(m){Nc(t,t.return,m)}}if(t===e){Qi=null;break}if(null!==(r=t.sibling)){r.return=t.return,Qi=r;break}Qi=t.return}}function wl(e){for(;null!==Qi;){var t=Qi;if(t===e){Qi=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Qi=r;break}Qi=t.return}}function jl(e){for(;null!==Qi;){var t=Qi;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{al(4,t)}catch(l){Nc(t,r,l)}break;case 1:var a=t.stateNode;if("function"===typeof a.componentDidMount){var o=t.return;try{a.componentDidMount()}catch(l){Nc(t,o,l)}}var s=t.return;try{ol(t)}catch(l){Nc(t,s,l)}break;case 5:var n=t.return;try{ol(t)}catch(l){Nc(t,n,l)}}}catch(l){Nc(t,t.return,l)}if(t===e){Qi=null;break}var i=t.sibling;if(null!==i){i.return=t.return,Qi=i;break}Qi=t.return}}var kl,Nl=Math.ceil,Cl=y.ReactCurrentDispatcher,Sl=y.ReactCurrentOwner,_l=y.ReactCurrentBatchConfig,El=0,Pl=null,Il=null,Al=0,Tl=0,Ll=No(0),Dl=0,Ml=null,Rl=0,$l=0,Fl=0,Ol=null,Ul=null,zl=0,Wl=1/0,Bl=null,ql=!1,Hl=null,Vl=null,Gl=!1,Jl=null,Kl=0,Yl=0,Zl=null,Ql=-1,Xl=0;function ec(){return 0!==(6&El)?Ze():-1!==Ql?Ql:Ql=Ze()}function tc(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==Al?Al&-Al:null!==gs.transition?(0===Xl&&(Xl=gt()),Xl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,r,a){if(50<Yl)throw Yl=0,Zl=null,Error(s(185));vt(e,r,a),0!==(2&El)&&e===Pl||(e===Pl&&(0===(2&El)&&($l|=r),4===Dl&&ic(e,Al)),ac(e,a),1===r&&0===El&&0===(1&t.mode)&&(Wl=Ze()+500,Oo&&Wo()))}function ac(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var n=31-nt(s),i=1<<n,l=o[n];-1===l?0!==(i&r)&&0===(i&a)||(o[n]=mt(i,t)):l<=t&&(e.expiredLanes|=i),s&=~i}}(e,t);var a=ht(e,e===Pl?Al:0);if(0===a)null!==r&&Je(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(null!=r&&Je(r),1===t)0===e.tag?function(e){Oo=!0,zo(e)}(lc.bind(null,e)):zo(lc.bind(null,e)),so(function(){0===(6&El)&&Wo()}),r=null;else{switch(yt(a)){case 1:r=Xe;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=at}r=Pc(r,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function oc(e,t){if(Ql=-1,Xl=0,0!==(6&El))throw Error(s(327));var r=e.callbackNode;if(jc()&&e.callbackNode!==r)return null;var a=ht(e,e===Pl?Al:0);if(0===a)return null;if(0!==(30&a)||0!==(a&e.expiredLanes)||t)t=fc(e,a);else{t=a;var o=El;El|=2;var n=pc();for(Pl===e&&Al===t||(Bl=null,Wl=Ze()+500,hc(e,t));;)try{xc();break}catch(l){mc(e,l)}Ss(),Cl.current=n,El=o,null!==Il?t=0:(Pl=null,Al=0,t=Dl)}if(0!==t){if(2===t&&(0!==(o=pt(e))&&(a=o,t=sc(e,o))),1===t)throw r=Ml,hc(e,0),ic(e,a),ac(e,Ze()),r;if(6===t)ic(e,a);else{if(o=e.current.alternate,0===(30&a)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var a=0;a<r.length;a++){var o=r[a],s=o.getSnapshot;o=o.value;try{if(!na(s(),o))return!1}catch(i){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=fc(e,a))&&(0!==(n=pt(e))&&(a=n,t=sc(e,n))),1===t))throw r=Ml,hc(e,0),ic(e,a),ac(e,Ze()),r;switch(e.finishedWork=o,e.finishedLanes=a,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,Ul,Bl);break;case 3:if(ic(e,a),(130023424&a)===a&&10<(t=zl+500-Ze())){if(0!==ht(e,0))break;if(((o=e.suspendedLanes)&a)!==a){ec(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(wc.bind(null,e,Ul,Bl),t);break}wc(e,Ul,Bl);break;case 4:if(ic(e,a),(4194240&a)===a)break;for(t=e.eventTimes,o=-1;0<a;){var i=31-nt(a);n=1<<i,(i=t[i])>o&&(o=i),a&=~n}if(a=o,10<(a=(120>(a=Ze()-a)?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Nl(a/1960))-a)){e.timeoutHandle=ro(wc.bind(null,e,Ul,Bl),a);break}wc(e,Ul,Bl);break;default:throw Error(s(329))}}}return ac(e,Ze()),e.callbackNode===r?oc.bind(null,e):null}function sc(e,t){var r=Ol;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=fc(e,t))&&(t=Ul,Ul=r,null!==t&&nc(t)),e}function nc(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function ic(e,t){for(t&=~Fl,t&=~$l,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-nt(t),a=1<<r;e[r]=-1,t&=~a}}function lc(e){if(0!==(6&El))throw Error(s(327));jc();var t=ht(e,0);if(0===(1&t))return ac(e,Ze()),null;var r=fc(e,t);if(0!==e.tag&&2===r){var a=pt(e);0!==a&&(t=a,r=sc(e,a))}if(1===r)throw r=Ml,hc(e,0),ic(e,t),ac(e,Ze()),r;if(6===r)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Ul,Bl),ac(e,Ze()),null}function cc(e,t){var r=El;El|=1;try{return e(t)}finally{0===(El=r)&&(Wl=Ze()+500,Oo&&Wo())}}function dc(e){null!==Jl&&0===Jl.tag&&0===(6&El)&&jc();var t=El;El|=1;var r=_l.transition,a=bt;try{if(_l.transition=null,bt=1,e)return e()}finally{bt=a,_l.transition=r,0===(6&(El=t))&&Wo()}}function uc(){Tl=Ll.current,Co(Ll)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,ao(r)),null!==Il)for(r=Il.return;null!==r;){var a=r;switch(ts(a),a.tag){case 1:null!==(a=a.type.childContextTypes)&&void 0!==a&&Lo();break;case 3:Ys(),Co(Po),Co(Eo),rn();break;case 5:Qs(a);break;case 4:Ys();break;case 13:case 19:Co(Xs);break;case 10:_s(a.type._context);break;case 22:case 23:uc()}r=r.return}if(Pl=e,Il=e=Lc(e.current,null),Al=Tl=t,Dl=0,Ml=null,Fl=$l=Rl=0,Ul=Ol=null,null!==As){for(t=0;t<As.length;t++)if(null!==(a=(r=As[t]).interleaved)){r.interleaved=null;var o=a.next,s=r.pending;if(null!==s){var n=s.next;s.next=o,a.next=n}r.pending=a}As=null}return e}function mc(e,t){for(;;){var r=Il;try{if(Ss(),an.current=Qn,dn){for(var a=nn.memoizedState;null!==a;){var o=a.queue;null!==o&&(o.pending=null),a=a.next}dn=!1}if(sn=0,cn=ln=nn=null,un=!1,hn=0,Sl.current=null,null===r||null===r.return){Dl=1,Ml=t,Il=null;break}e:{var n=e,i=r.return,l=r,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=fi(i);if(null!==p){p.flags&=-257,vi(p,i,l,0,t),1&p.mode&&gi(n,d,t),c=d;var g=(t=p).updateQueue;if(null===g){var f=new Set;f.add(c),t.updateQueue=f}else g.add(c);break e}if(0===(1&t)){gi(n,d,t),gc();break e}c=Error(s(426))}else if(os&&1&l.mode){var v=fi(i);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vi(v,i,l,0,t),ps(ci(c,l));break e}}n=c=ci(c,l),4!==Dl&&(Dl=2),null===Ol?Ol=[n]:Ol.push(n),n=i;do{switch(n.tag){case 3:n.flags|=65536,t&=-t,n.lanes|=t,zs(n,mi(0,c,t));break e;case 1:l=c;var x=n.type,b=n.stateNode;if(0===(128&n.flags)&&("function"===typeof x.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Vl||!Vl.has(b)))){n.flags|=65536,t&=-t,n.lanes|=t,zs(n,pi(n,l,t));break e}}n=n.return}while(null!==n)}yc(r)}catch(y){t=y,Il===r&&null!==r&&(Il=r=r.return);continue}break}}function pc(){var e=Cl.current;return Cl.current=Qn,null===e?Qn:e}function gc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Pl||0===(268435455&Rl)&&0===(268435455&$l)||ic(Pl,Al)}function fc(e,t){var r=El;El|=2;var a=pc();for(Pl===e&&Al===t||(Bl=null,hc(e,t));;)try{vc();break}catch(o){mc(e,o)}if(Ss(),El=r,Cl.current=a,null!==Il)throw Error(s(261));return Pl=null,Al=0,Dl}function vc(){for(;null!==Il;)bc(Il)}function xc(){for(;null!==Il&&!Ke();)bc(Il)}function bc(e){var t=kl(e.alternate,e,Tl);e.memoizedProps=e.pendingProps,null===t?yc(e):Il=t,Sl.current=null}function yc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Gi(r,t,Tl)))return void(Il=r)}else{if(null!==(r=Ji(r,t)))return r.flags&=32767,void(Il=r);if(null===e)return Dl=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Dl&&(Dl=5)}function wc(e,t,r){var a=bt,o=_l.transition;try{_l.transition=null,bt=1,function(e,t,r,a){do{jc()}while(null!==Jl);if(0!==(6&El))throw Error(s(327));r=e.finishedWork;var o=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var n=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var o=31-nt(r),s=1<<o;t[o]=0,a[o]=-1,e[o]=-1,r&=~s}}(e,n),e===Pl&&(Il=Pl=null,Al=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Gl||(Gl=!0,Pc(tt,function(){return jc(),null})),n=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||n){n=_l.transition,_l.transition=null;var i=bt;bt=1;var l=El;El|=4,Sl.current=null,function(e,t){if(Xa=qt,ha(e=ua())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(a&&0!==a.rangeCount){r=a.anchorNode;var o=a.anchorOffset,n=a.focusNode;a=a.focusOffset;try{r.nodeType,n.nodeType}catch(w){r=null;break e}var i=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==r||0!==o&&3!==h.nodeType||(l=i+o),h!==n||0!==a&&3!==h.nodeType||(c=i+a),3===h.nodeType&&(i+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===r&&++d===o&&(l=i),m===n&&++u===a&&(c=i),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(eo={focusedElem:e,selectionRange:r},qt=!1,Qi=t;null!==Qi;)if(e=(t=Qi).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qi=e;else for(;null!==Qi;){t=Qi;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var f=g.memoizedProps,v=g.memoizedState,x=t.stateNode,b=x.getSnapshotBeforeUpdate(t.elementType===t.type?f:ri(t.type,f),v);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var y=t.stateNode.containerInfo;1===y.nodeType?y.textContent="":9===y.nodeType&&y.documentElement&&y.removeChild(y.documentElement);break;default:throw Error(s(163))}}catch(w){Nc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Qi=e;break}Qi=t.return}g=tl,tl=!1}(e,r),fl(r,e),ma(eo),qt=!!Xa,eo=Xa=null,e.current=r,xl(r,e,o),Ye(),El=l,bt=i,_l.transition=n}else e.current=r;if(Gl&&(Gl=!1,Jl=e,Kl=o),n=e.pendingLanes,0===n&&(Vl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),ac(e,Ze()),null!==t)for(a=e.onRecoverableError,r=0;r<t.length;r++)o=t[r],a(o.value,{componentStack:o.stack,digest:o.digest});if(ql)throw ql=!1,e=Hl,Hl=null,e;0!==(1&Kl)&&0!==e.tag&&jc(),n=e.pendingLanes,0!==(1&n)?e===Zl?Yl++:(Yl=0,Zl=e):Yl=0,Wo()}(e,t,r,a)}finally{_l.transition=o,bt=a}return null}function jc(){if(null!==Jl){var e=yt(Kl),t=_l.transition,r=bt;try{if(_l.transition=null,bt=16>e?16:e,null===Jl)var a=!1;else{if(e=Jl,Jl=null,Kl=0,0!==(6&El))throw Error(s(331));var o=El;for(El|=4,Qi=e.current;null!==Qi;){var n=Qi,i=n.child;if(0!==(16&Qi.flags)){var l=n.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Qi=d;null!==Qi;){var u=Qi;switch(u.tag){case 0:case 11:case 15:rl(8,u,n)}var h=u.child;if(null!==h)h.return=u,Qi=h;else for(;null!==Qi;){var m=(u=Qi).sibling,p=u.return;if(sl(u),u===d){Qi=null;break}if(null!==m){m.return=p,Qi=m;break}Qi=p}}}var g=n.alternate;if(null!==g){var f=g.child;if(null!==f){g.child=null;do{var v=f.sibling;f.sibling=null,f=v}while(null!==f)}}Qi=n}}if(0!==(2064&n.subtreeFlags)&&null!==i)i.return=n,Qi=i;else e:for(;null!==Qi;){if(0!==(2048&(n=Qi).flags))switch(n.tag){case 0:case 11:case 15:rl(9,n,n.return)}var x=n.sibling;if(null!==x){x.return=n.return,Qi=x;break e}Qi=n.return}}var b=e.current;for(Qi=b;null!==Qi;){var y=(i=Qi).child;if(0!==(2064&i.subtreeFlags)&&null!==y)y.return=i,Qi=y;else e:for(i=b;null!==Qi;){if(0!==(2048&(l=Qi).flags))try{switch(l.tag){case 0:case 11:case 15:al(9,l)}}catch(j){Nc(l,l.return,j)}if(l===i){Qi=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Qi=w;break e}Qi=l.return}}if(El=o,Wo(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(ot,e)}catch(j){}a=!0}return a}finally{bt=r,_l.transition=t}}return!1}function kc(e,t,r){e=Os(e,t=mi(0,t=ci(r,t),1),1),t=ec(),null!==e&&(vt(e,1,t),ac(e,t))}function Nc(e,t,r){if(3===e.tag)kc(e,e,r);else for(;null!==t;){if(3===t.tag){kc(t,e,r);break}if(1===t.tag){var a=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof a.componentDidCatch&&(null===Vl||!Vl.has(a))){t=Os(t,e=pi(t,e=ci(r,e),1),1),e=ec(),null!==t&&(vt(t,1,e),ac(t,e));break}}t=t.return}}function Cc(e,t,r){var a=e.pingCache;null!==a&&a.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,Pl===e&&(Al&r)===r&&(4===Dl||3===Dl&&(130023424&Al)===Al&&500>Ze()-zl?hc(e,0):Fl|=r),ac(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var r=ec();null!==(e=Ds(e,t))&&(vt(e,t,r),ac(e,r))}function _c(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Sc(e,r)}function Ec(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,o=e.memoizedState;null!==o&&(r=o.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(s(314))}null!==a&&a.delete(t),Sc(e,r)}function Pc(e,t){return Ge(e,t)}function Ic(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,r,a){return new Ic(e,t,r,a)}function Tc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lc(e,t){var r=e.alternate;return null===r?((r=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Dc(e,t,r,a,o,n){var i=2;if(a=e,"function"===typeof e)Tc(e)&&(i=1);else if("string"===typeof e)i=5;else e:switch(e){case k:return Mc(r.children,o,n,t);case N:i=8,o|=8;break;case C:return(e=Ac(12,r,t,2|o)).elementType=C,e.lanes=n,e;case P:return(e=Ac(13,r,t,o)).elementType=P,e.lanes=n,e;case I:return(e=Ac(19,r,t,o)).elementType=I,e.lanes=n,e;case L:return Rc(r,o,n,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:i=10;break e;case _:i=9;break e;case E:i=11;break e;case A:i=14;break e;case T:i=16,a=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ac(i,r,t,o)).elementType=e,t.type=a,t.lanes=n,t}function Mc(e,t,r,a){return(e=Ac(7,e,a,t)).lanes=r,e}function Rc(e,t,r,a){return(e=Ac(22,e,a,t)).elementType=L,e.lanes=r,e.stateNode={isHidden:!1},e}function $c(e,t,r){return(e=Ac(6,e,null,t)).lanes=r,e}function Fc(e,t,r){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Oc(e,t,r,a,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ft(0),this.expirationTimes=ft(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ft(0),this.identifierPrefix=a,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Uc(e,t,r,a,o,s,n,i,l){return e=new Oc(e,t,r,i,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ac(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rs(s),e}function zc(e){if(!e)return _o;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(To(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var r=e.type;if(To(r))return Mo(e,r,t)}return t}function Wc(e,t,r,a,o,s,n,i,l){return(e=Uc(r,a,!0,e,0,s,0,i,l)).context=zc(null),r=e.current,(s=Fs(a=ec(),o=tc(r))).callback=void 0!==t&&null!==t?t:null,Os(r,s,o),e.current.lanes=o,vt(e,o,a),ac(e,a),e}function Bc(e,t,r,a){var o=t.current,s=ec(),n=tc(o);return r=zc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Fs(s,n)).payload={element:e},null!==(a=void 0===a?null:a)&&(t.callback=a),null!==(e=Os(o,t,n))&&(rc(e,o,n,s),Us(e,o,n)),n}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Vc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}kl=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Po.current)bi=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return bi=!1,function(e,t,r){switch(t.tag){case 3:Pi(t),ms();break;case 5:Zs(t);break;case 1:To(t.type)&&Ro(t);break;case 4:Ks(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,o=t.memoizedProps.value;So(js,a._currentValue),a._currentValue=o;break;case 13:if(null!==(a=t.memoizedState))return null!==a.dehydrated?(So(Xs,1&Xs.current),t.flags|=128,null):0!==(r&t.child.childLanes)?$i(e,t,r):(So(Xs,1&Xs.current),null!==(e=qi(e,t,r))?e.sibling:null);So(Xs,1&Xs.current);break;case 19:if(a=0!==(r&t.childLanes),0!==(128&e.flags)){if(a)return Wi(e,t,r);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),So(Xs,Xs.current),a)break;return null;case 22:case 23:return t.lanes=0,Ni(e,t,r)}return qi(e,t,r)}(e,t,r);bi=0!==(131072&e.flags)}else bi=!1,os&&0!==(1048576&t.flags)&&Xo(t,Vo,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Bi(e,t),e=t.pendingProps;var o=Ao(t,Eo.current);Ps(t,r),o=fn(null,t,a,e,o,r);var n=vn();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,To(a)?(n=!0,Ro(t)):n=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Rs(t),o.updater=oi,t.stateNode=o,o._reactInternals=t,li(t,a,e,r),t=Ei(null,t,a,!0,n,r)):(t.tag=0,os&&n&&es(t),yi(null,t,o,r),t=t.child),t;case 16:a=t.elementType;e:{switch(Bi(e,t),e=t.pendingProps,a=(o=a._init)(a._payload),t.type=a,o=t.tag=function(e){if("function"===typeof e)return Tc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===A)return 14}return 2}(a),e=ri(a,e),o){case 0:t=Si(null,t,a,e,r);break e;case 1:t=_i(null,t,a,e,r);break e;case 11:t=wi(null,t,a,e,r);break e;case 14:t=ji(null,t,a,ri(a.type,e),r);break e}throw Error(s(306,a,""))}return t;case 0:return a=t.type,o=t.pendingProps,Si(e,t,a,o=t.elementType===a?o:ri(a,o),r);case 1:return a=t.type,o=t.pendingProps,_i(e,t,a,o=t.elementType===a?o:ri(a,o),r);case 3:e:{if(Pi(t),null===e)throw Error(s(387));a=t.pendingProps,o=(n=t.memoizedState).element,$s(e,t),Ws(t,a,null,r);var i=t.memoizedState;if(a=i.element,n.isDehydrated){if(n={element:a,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=n,t.memoizedState=n,256&t.flags){t=Ii(e,t,a,r,o=ci(Error(s(423)),t));break e}if(a!==o){t=Ii(e,t,a,r,o=ci(Error(s(424)),t));break e}for(as=lo(t.stateNode.containerInfo.firstChild),rs=t,os=!0,ss=null,r=ws(t,null,a,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(ms(),a===o){t=qi(e,t,r);break e}yi(e,t,a,r)}t=t.child}return t;case 5:return Zs(t),null===e&&cs(t),a=t.type,o=t.pendingProps,n=null!==e?e.memoizedProps:null,i=o.children,to(a,o)?i=null:null!==n&&to(a,n)&&(t.flags|=32),Ci(e,t),yi(e,t,i,r),t.child;case 6:return null===e&&cs(t),null;case 13:return $i(e,t,r);case 4:return Ks(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=ys(t,null,a,r):yi(e,t,a,r),t.child;case 11:return a=t.type,o=t.pendingProps,wi(e,t,a,o=t.elementType===a?o:ri(a,o),r);case 7:return yi(e,t,t.pendingProps,r),t.child;case 8:case 12:return yi(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,o=t.pendingProps,n=t.memoizedProps,i=o.value,So(js,a._currentValue),a._currentValue=i,null!==n)if(na(n.value,i)){if(n.children===o.children&&!Po.current){t=qi(e,t,r);break e}}else for(null!==(n=t.child)&&(n.return=t);null!==n;){var l=n.dependencies;if(null!==l){i=n.child;for(var c=l.firstContext;null!==c;){if(c.context===a){if(1===n.tag){(c=Fs(-1,r&-r)).tag=2;var d=n.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}n.lanes|=r,null!==(c=n.alternate)&&(c.lanes|=r),Es(n.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===n.tag)i=n.type===t.type?null:n.child;else if(18===n.tag){if(null===(i=n.return))throw Error(s(341));i.lanes|=r,null!==(l=i.alternate)&&(l.lanes|=r),Es(i,r,t),i=n.sibling}else i=n.child;if(null!==i)i.return=n;else for(i=n;null!==i;){if(i===t){i=null;break}if(null!==(n=i.sibling)){n.return=i.return,i=n;break}i=i.return}n=i}yi(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,a=t.pendingProps.children,Ps(t,r),a=a(o=Is(o)),t.flags|=1,yi(e,t,a,r),t.child;case 14:return o=ri(a=t.type,t.pendingProps),ji(e,t,a,o=ri(a.type,o),r);case 15:return ki(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,o=t.pendingProps,o=t.elementType===a?o:ri(a,o),Bi(e,t),t.tag=1,To(a)?(e=!0,Ro(t)):e=!1,Ps(t,r),ni(t,a,o),li(t,a,o,r),Ei(null,t,a,!0,e,r);case 19:return Wi(e,t,r);case 22:return Ni(e,t,r)}throw Error(s(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Xc(e,t,r,a,o){var s=r._reactRootContainer;if(s){var n=s;if("function"===typeof o){var i=o;o=function(){var e=qc(n);i.call(e)}}Bc(t,n,e,o)}else n=function(e,t,r,a,o){if(o){if("function"===typeof a){var s=a;a=function(){var e=qc(n);s.call(e)}}var n=Wc(t,a,e,0,null,!1,0,"",Qc);return e._reactRootContainer=n,e[po]=n.current,za(8===e.nodeType?e.parentNode:e),dc(),n}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof a){var i=a;a=function(){var e=qc(l);i.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[po]=l.current,za(8===e.nodeType?e.parentNode:e),dc(function(){Bc(t,l,r,a)}),l}(r,t,e,o,a);return qc(n)}Kc.prototype.render=Jc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Bc(e,t,null,null)},Kc.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Bc(null,e,null,null)}),t[po]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Lt.length&&0!==t&&t<Lt[r].priority;r++);Lt.splice(r,0,e),0===r&&$t(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ut(t.pendingLanes);0!==r&&(xt(t,1|r),ac(t,Ze()),0===(6&El)&&(Wl=Ze()+500,Wo()))}break;case 13:dc(function(){var t=Ds(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}}),Vc(e,1)}},jt=function(e){if(13===e.tag){var t=Ds(e,134217728);if(null!==t)rc(t,e,134217728,ec());Vc(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),r=Ds(e,t);if(null!==r)rc(r,e,t,ec());Vc(e,t)}},Nt=function(){return bt},Ct=function(e,t){var r=bt;try{return bt=e,t()}finally{bt=r}},je=function(e,t,r){switch(t){case"input":if(Q(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var o=wo(a);if(!o)throw Error(s(90));G(a),Q(a,o)}}}break;case"textarea":se(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ee=cc,Pe=dc;var ed={usingClientEntryPoint:!1,Events:[bo,yo,wo,Se,_e,cc]},td={findFiberByHostInstance:xo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ad.isDisabled&&ad.supportsFiber)try{ot=ad.inject(rd),st=ad}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(s(200));return function(e,t,r){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:j,key:null==a?null:""+a,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Yc(e))throw Error(s(299));var r=!1,a="",o=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Uc(e,1,!1,null,0,r,0,a,o),e[po]=t.current,za(8===e.nodeType?e.parentNode:e),new Jc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,r){if(!Zc(t))throw Error(s(200));return Xc(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Yc(e))throw Error(s(405));var a=null!=r&&r.hydratedSources||null,o=!1,n="",i=Gc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(o=!0),void 0!==r.identifierPrefix&&(n=r.identifierPrefix),void 0!==r.onRecoverableError&&(i=r.onRecoverableError)),t=Wc(t,null,e,1,null!=r?r:null,o,0,n,i),e[po]=t.current,za(e),a)for(e=0;e<a.length;e++)o=(o=(r=a[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,o]:t.mutableSourceEagerHydrationData.push(r,o);return new Kc(t)},t.render=function(e,t,r){if(!Zc(t))throw Error(s(200));return Xc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(s(40));return!!e._reactRootContainer&&(dc(function(){Xc(null,null,e,!1,function(){e._reactRootContainer=null,e[po]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!Zc(r))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Xc(e,t,r,!1,a)},t.version="18.3.1-next-f1338f8080-20240426"},736:function(e,t,r){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(r(374));class s extends o.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t){let{config:r,type:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o="";"plain"===a?o="pl":"phrase"===a?o="ph":"websearch"===a&&(o="w");const s=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${o}fts${s}.${t}`),this}match(e){return Object.entries(e).forEach(e=>{let[t,r]=e;this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}t.default=s},745:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_HEADERS=void 0;const a=r(400);t.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${a.version}`}},784:(e,t,r)=>{"use strict";r.d(t,{Gw:()=>d,createGeneralNotification:()=>u,fp:()=>c});const a="notif:unreadChanged",o=e=>`tag.notifications.${e}`;function s(e){try{if("undefined"===typeof window)return[];const t=window.localStorage.getItem(o(e));return t?JSON.parse(t):[]}catch{return[]}}function n(e,t){try{"undefined"!==typeof window&&window.localStorage.setItem(o(e),JSON.stringify(t))}catch(r){console.warn("Failed to write notifications:",r)}}const i=()=>Date.now().toString(36)+Math.random().toString(36).slice(2),l=()=>(new Date).toISOString(),c=async e=>{const t={id:i(),userId:e.userId,type:"collaboration",title:e.title,message:e.message,projectId:e.projectId,meta:e.meta||{},isRead:!1,createdAt:l()},r=s(e.userId);return r.unshift(t),n(e.userId,r),"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent(a,{detail:{userId:e.userId}})),t},d=async e=>{const t={id:i(),userId:e.userId,type:"collaboration",title:"Collaboration Request",message:`New collaboration request for project "${e.projectName}" from ${e.requesterName}`,projectId:e.projectId,meta:{requestId:e.requestId,requesterId:e.requesterId,requesterName:e.requesterName,requesterAvatar:e.requesterAvatar,projectName:e.projectName,status:"pending"},isRead:!1,createdAt:l()},r=s(e.userId);return r.unshift(t),n(e.userId,r),"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent(a,{detail:{userId:e.userId}})),t},u=async e=>{const t={id:i(),userId:e.userId,type:e.type||"general",title:e.title,message:e.message,projectId:e.projectId,meta:e.meta||{},isRead:!1,createdAt:l()},r=s(e.userId);return r.unshift(t),n(e.userId,r),"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent(a,{detail:{userId:e.userId}})),t}},792:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});const a=new class{constructor(){this.dbName="TAGAvatarDB",this.dbVersion=1,this.storeName="avatars"}async initDB(){return new Promise((e,t)=>{const r=indexedDB.open(this.dbName,this.dbVersion);r.onerror=()=>t(r.error),r.onsuccess=()=>e(r.result),r.onupgradeneeded=e=>{const t=e.target.result;if(!t.objectStoreNames.contains(this.storeName)){t.createObjectStore(this.storeName,{keyPath:"userId"}).createIndex("userId","userId",{unique:!0})}}})}async storeAvatar(e,t){const r=await this.initDB();try{let a;if(t instanceof Blob)a=t;else if(t instanceof File)a=t;else{if("string"!==typeof t||!t.startsWith("data:image/"))throw new Error("Unsupported avatar data format");{const e=await fetch(t);a=await e.blob()}}return new Promise((t,o)=>{const s=r.transaction([this.storeName],"readwrite").objectStore(this.storeName).put({userId:e,avatar:a,timestamp:Date.now()});s.onsuccess=()=>{console.log(`[AvatarStorage] Stored avatar for user: ${e}, size: ${a.size} bytes`),t({success:!0,userId:e})},s.onerror=()=>o(s.error)})}catch(a){throw console.error(`[AvatarStorage] Error storing avatar: ${a}`),a}}async getAvatar(e){const t=await this.initDB();return new Promise((r,a)=>{const o=t.transaction([this.storeName],"readonly").objectStore(this.storeName).get(e);o.onsuccess=()=>{o.result&&o.result.avatar instanceof Blob?(console.log(`[AvatarStorage] Found avatar for user: ${e}, size: ${o.result.avatar.size} bytes`),r({success:!0,avatar:o.result.avatar})):(console.log(`[AvatarStorage] No avatar found for user: ${e}`),r({success:!1,error:"Avatar not found"}))},o.onerror=()=>a(o.error)})}async getAvatarUrl(e){try{const t=await this.getAvatar(e);if(t.success&&t.avatar instanceof Blob){const r=URL.createObjectURL(t.avatar);return console.log(`[AvatarStorage] Created ObjectURL for user: ${e}: ${r}`),r}return console.log(`[AvatarStorage] No avatar URL for user: ${e}`),null}catch(t){return console.error(`[AvatarStorage] Error getting avatar URL: ${t}`),null}}async deleteAvatar(e){const t=await this.initDB();return new Promise((r,a)=>{const o=t.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(e);o.onsuccess=()=>{console.log(`[AvatarStorage] Deleted avatar for user: ${e}`),r({success:!0})},o.onerror=()=>a(o.error)})}revokeAvatarUrl(e){e&&e.startsWith("blob:")&&(URL.revokeObjectURL(e),console.log(`[AvatarStorage] Revoked ObjectURL: ${e}`))}async hasAvatar(e){return(await this.getAvatar(e)).success}}},829:function(e,t,r){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(r(736));t.default=class{constructor(e,t){let{headers:r={},schema:a,fetch:o}=t;this.url=e,this.headers=r,this.schema=a,this.fetch=o}select(e){let{head:t=!1,count:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=t?"HEAD":"GET";let s=!1;const n=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!s?"":('"'===e&&(s=!s),e)).join("");return this.url.searchParams.set("select",n),r&&(this.headers.Prefer=`count=${r}`),new o.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e){let{count:t,defaultToNull:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),t&&a.push(`count=${t}`),r||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new o.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e){let{onConflict:t,ignoreDuplicates:r=!1,count:a,defaultToNull:s=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[`resolution=${r?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&n.push(this.headers.Prefer),a&&n.push(`count=${a}`),s||n.push("missing=default"),this.headers.Prefer=n.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new o.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new o.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new o.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}},853:(e,t,r)=>{"use strict";e.exports=r(234)},860:(e,t,r)=>{"use strict";r.d(t,{So:()=>c,_i:()=>m,follow:()=>b,getFollowersCount:()=>u,getFollowersList:()=>v,getFollowingList:()=>h,getFollowingListPaginated:()=>x,kt:()=>d,unfollow:()=>y});var a=r(560),o=r(420);const s="tag_artist_follows",n=()=>{try{const e=localStorage.getItem(s);return e?JSON.parse(e):{}}catch(e){return console.warn("Failed to get stored follow data:",e),{}}},i=e=>{try{localStorage.setItem(s,JSON.stringify(e))}catch(t){console.warn("Failed to save follow data:",t)}},l=()=>{const e=n();if(Object.keys(e).length>0)return;i({bryan:{followers:["alice","alex"],followersCount:2},alice:{followers:["bryan"],followersCount:1},alex:{followers:[],followersCount:0}}),console.log("[MockFollow] Initialized follow baseline data")},c=async(e,t)=>{try{if(!e||!t)return{success:!1,error:"Missing followerId or artistId"};if(e===t)return{success:!1,error:"Cannot follow yourself"};if(!o.o1[e]||!o.o1[t])return{success:!1,error:"User not found"};const r=n();r[t]||(r[t]={followers:[],followersCount:0});const a=r[t],s=a.followers.indexOf(e);let l=!1;return-1===s?(a.followers.push(e),a.followersCount++,l=!0,console.log(`[MockFollow] User ${e} followed artist ${t}`)):(a.followers.splice(s,1),a.followersCount--,l=!1,console.log(`[MockFollow] User ${e} unfollowed artist ${t}`)),i(r),console.log(`[MockFollow] Artist ${t} followers count: ${a.followersCount}`),{success:!0,data:{isFollowing:l,followersCount:a.followersCount}}}catch(r){return console.error("[MockFollow] Error toggling follow:",r),{success:!1,error:r.message}}},d=async(e,t)=>{try{if(!e||!t)return{success:!1,error:"Missing followerId or artistId"};const r=n()[t];if(!r)return{success:!0,data:{isFollowing:!1,followersCount:0}};return{success:!0,data:{isFollowing:r.followers.includes(e),followersCount:r.followersCount}}}catch(r){return console.error("[MockFollow] Error checking follow status:",r),{success:!1,error:r.message}}},u=async e=>{try{if(!e)return{success:!1,error:"Missing artistId"};const t=n()[e];return{success:!0,data:{followersCount:t?t.followersCount:0}}}catch(t){return console.error("[MockFollow] Error getting followers count:",t),{success:!1,error:t.message}}},h=async e=>{try{if(!e)return{success:!1,error:"Missing userId"};const t=n(),r=[];return Object.keys(t).forEach(a=>{t[a].followers.includes(e)&&r.push(a)}),{success:!0,data:{following:r,followingCount:r.length}}}catch(t){return console.error("[MockFollow] Error getting following list:",t),{success:!1,error:t.message}}},m=e=>{try{const t=n()[e];return t?(console.log(`[Debug] Follow stats for artist: ${e}`),console.log(`  Followers count: ${t.followersCount}`),console.log(`  Followers: ${t.followers.join(", ")}`),t):void console.log(`[Debug] No follow data for artist: ${e}`)}catch(t){console.error("[Debug] Error getting follow stats:",t)}},p=e=>btoa(`cursor_${e}`).replace(/=/g,""),g=e=>{try{const t=atob(e).match(/cursor_(\d+)/);return t?parseInt(t[1]):0}catch{return 0}},f=(e,t)=>{if(!t.trim())return e;const r=t.toLowerCase();return e.filter(e=>{const t=o.o1[e];if(!t)return!1;return[t.displayName,t.name,t.school,...t.skills||[],...t.majors||[]].join(" ").toLowerCase().includes(r)})},v=async function(e){let{limit:t=20,cursor:r=null,q:o="",currentUserId:s="alice"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{if(!e)return{success:!1,error:"Missing artistId"};l();const i=n(),c=i[e];if(!c||!c.followers.length)return{success:!0,data:{items:[],hasMore:!1,cursor:null}};let d=[...c.followers];o.trim()&&(d=f(d,o));const u=r?g(r):0,h=u+t,m=d.slice(u,h),v=(await Promise.all(m.map(async e=>{var t;const r=await(0,a.Cs)(e);if(!r)return console.warn(`[MockFollow] Artist data not found: ${e}`),null;const o=(null===(t=i[e])||void 0===t?void 0:t.followers.includes(s))||!1;return{id:r.id,displayName:r.name,avatar:r.avatar,role:r.title||r.discipline,school:r.school,skills:r.skills||[],isFollowedByMe:o,isMutual:!1}}))).filter(Boolean),x=h<d.length;return{success:!0,data:{items:v,hasMore:x,cursor:x?p(h):null}}}catch(i){return console.error("[MockFollow] Error getting followers list:",i),{success:!1,error:i.message}}},x=async function(e){let{limit:t=20,cursor:r=null,q:o=""}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{if(!e)return{success:!1,error:"Missing userId"};l();const s=n(),i=[];if(Object.keys(s).forEach(t=>{s[t].followers.includes(e)&&i.push(t)}),!i.length)return{success:!0,data:{items:[],hasMore:!1,cursor:null}};let c=i;o.trim()&&(c=f(i,o));const d=r?g(r):0,u=d+t,h=c.slice(d,u),m=(await Promise.all(h.map(async e=>{const t=await(0,a.Cs)(e);return t?{id:t.id,displayName:t.name,avatar:t.avatar,role:t.title||t.discipline,school:t.school,skills:t.skills||[],isFollowedByMe:!0,isMutual:!1}:(console.warn(`[MockFollow] Artist data not found: ${e}`),null)}))).filter(Boolean),v=u<c.length;return{success:!0,data:{items:m,hasMore:v,cursor:v?p(u):null}}}catch(s){return console.error("[MockFollow] Error getting following list:",s),{success:!1,error:s.message}}},b=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"alice";const r=await c(t,e);return r.success&&window.dispatchEvent(new CustomEvent("follow:changed",{detail:{followerId:t,artistId:e,isFollowing:!0,operation:"follow"}})),r},y=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"alice";const r=await c(t,e);return r.success&&window.dispatchEvent(new CustomEvent("follow:changed",{detail:{followerId:t,artistId:e,isFollowing:!1,operation:"unfollow"}})),r}},915:(e,t,r)=>{"use strict";r.d(t,{Bx:()=>n,EP:()=>o,Ih:()=>s});const a="tag.avatarCache",o=e=>{try{if("undefined"===typeof window)return null;const t=JSON.parse(localStorage.getItem(a)||"{}")[e];return t&&Date.now()-t.timestamp<864e5?t.url:null}catch(t){return console.warn("Error reading avatar cache:",t),null}},s=(e,t)=>{try{if("undefined"===typeof window)return;const r=JSON.parse(localStorage.getItem(a)||"{}");r[e]={url:t,timestamp:Date.now()},localStorage.setItem(a,JSON.stringify(r))}catch(r){console.warn("Error caching avatar:",r)}},n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{if("undefined"===typeof window)return;if(e){const t=JSON.parse(localStorage.getItem(a)||"{}");delete t[e],localStorage.setItem(a,JSON.stringify(t)),localStorage.removeItem(`tag.avatars.${e}`),console.log(`[clearAvatarCache] Cleared avatar data for user: ${e}`)}else{localStorage.removeItem(a);Object.keys(localStorage).forEach(e=>{e.startsWith("tag.avatars.")&&localStorage.removeItem(e)}),console.log("[clearAvatarCache] Cleared all avatar data")}}catch(t){console.warn("Error clearing avatar cache:",t)}}},945:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(8);const o={WORK:"work",COLLABORATION:"collaboration"};var s=r(179);const n={STORAGE_KEY:"tag_favorites",COUNTERS_KEY:"tag_favorite_counters",async _getStorage(){try{const e=await s.storage.getItem(this.STORAGE_KEY),t=e?JSON.parse(e):{};if(0===Object.keys(t).length){const e=this._getDefaultFavorites();return await this._setStorage(e),e}return t}catch(e){return console.error("Failed to get favorites from storage:",e),{}}},_getDefaultFavorites:()=>({}),async _setStorage(e){try{await s.storage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Failed to save favorites to storage:",t)}},async _getCounters(){try{const e=await s.storage.getItem(this.COUNTERS_KEY);return e?JSON.parse(e):{}}catch(e){return console.error("Failed to get favorite counters from storage:",e),{}}},async _setCounters(e){try{await s.storage.setItem(this.COUNTERS_KEY,JSON.stringify(e))}catch(t){console.error("Failed to save favorite counters to storage:",t)}},_generateId:()=>Date.now().toString(36)+Math.random().toString(36).substr(2),async getFavorites(e){var t;const{userId:r,type:a="all",cursor:o,limit:s=20}=e,n=(await this._getStorage())[r]||[];let i=n;"all"!==a&&(i=n.filter(e=>e.itemType===a)),i.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt));let l=0;if(o){l=i.findIndex(e=>e.id===o)+1}const c=l+s,d=i.slice(l,c),u=c<i.length,h=u?null===(t=d[d.length-1])||void 0===t?void 0:t.id:null;return await new Promise(e=>setTimeout(e,30)),{success:!0,data:{items:d,pagination:{cursor:h,hasMore:u,total:i.length}}}},async addFavorite(e){const{userId:t,itemType:r,itemId:a}=e,o=await this._getStorage(),s=await this._getCounters(),n=o[t]||[],i=n.findIndex(e=>e.itemType===r&&e.itemId===a);if(-1!==i)return{success:!0,data:n[i]};const l={id:this._generateId(),userId:t,itemType:r,itemId:a,createdAt:(new Date).toISOString()};n.push(l),o[t]=n,await this._setStorage(o);const c=`${r}_${a}`;return s[c]=(s[c]||0)+1,await this._setCounters(s),await new Promise(e=>setTimeout(e,200)),{success:!0,data:l}},async removeFavorite(e){const{userId:t,itemType:r,itemId:a}=e,o=await this._getStorage(),s=await this._getCounters(),n=o[t]||[],i=n.findIndex(e=>e.itemType===r&&e.itemId===a);if(-1===i)return{success:!0,data:null};const l=n.splice(i,1)[0];o[t]=n,await this._setStorage(o);const c=`${r}_${a}`;return s[c]=Math.max(0,(s[c]||1)-1),await this._setCounters(s),await new Promise(e=>setTimeout(e,200)),{success:!0,data:l}},async checkFavoriteStatus(e){const{userId:t,itemType:r,itemId:a}=e,o=((await this._getStorage())[t]||[]).find(e=>e.itemType===r&&e.itemId===a);return await new Promise(e=>setTimeout(e,50)),{success:!0,data:{isFavorited:!!o,favoriteId:(null===o||void 0===o?void 0:o.id)||null}}},async getFavoriteCount(e){const{itemType:t,itemId:r}=e,a=await this._getCounters(),o=`${t}_${r}`;return await new Promise(e=>setTimeout(e,50)),{success:!0,data:{count:a[o]||0}}},async batchCheckFavoriteStatus(e){const{userId:t,items:r}=e,a=(await this._getStorage())[t]||[],o={};return r.forEach(e=>{const t=`${e.itemType}_${e.itemId}`,r=a.find(t=>t.itemType===e.itemType&&t.itemId===e.itemId);o[t]=!!r}),await new Promise(e=>setTimeout(e,100)),{success:!0,data:o}},async clearUserFavorites(e){const t=await this._getStorage();delete t[e],await this._setStorage(t)},async getAllFavorites(){return await this._getStorage()}};const i=new class{constructor(){this.adapter=n}async getFavorites(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,a.HW)(),r=e.userId||(null===t||void 0===t?void 0:t.id);if(!r)throw new Error("User not authenticated");return this.adapter.getFavorites({userId:r,type:e.type||"all",cursor:e.cursor,limit:e.limit||20})}async addFavorite(e,t){const r=(0,a.HW)();if(null===r||void 0===r||!r.id)throw new Error("User not authenticated");if(!e||!t)throw new Error("Item type and ID are required");if(!(e=>Object.values(o).includes(e))(e))throw new Error(`Invalid item type. Must be "${o.WORK}" or "${o.COLLABORATION}"`);return this.adapter.addFavorite({userId:r.id,itemType:e,itemId:t})}async removeFavorite(e,t){const r=(0,a.HW)();if(null===r||void 0===r||!r.id)throw new Error("User not authenticated");if(!e||!t)throw new Error("Item type and ID are required");return this.adapter.removeFavorite({userId:r.id,itemType:e,itemId:t})}async removeFavoriteById(e){const t=(0,a.HW)();if(null===t||void 0===t||!t.id)throw new Error("User not authenticated");if(!e)throw new Error("Favorite ID is required");const r=await this.getFavorites({userId:t.id});if(!r.success)throw new Error("Failed to get favorites");const o=r.data.items.find(t=>t.id===e);if(!o)throw new Error("Favorite not found");return this.adapter.removeFavorite({userId:t.id,itemType:o.itemType,itemId:o.itemId})}async toggleFavorite(e,t,r){return r?this.addFavorite(e,t):this.removeFavorite(e,t)}async checkFavoriteStatus(e,t){const r=(0,a.HW)();if(null===r||void 0===r||!r.id)return{isFavorited:!1,favoriteId:null};if(!e||!t)throw new Error("Item type and ID are required");return this.adapter.checkFavoriteStatus({userId:r.id,itemType:e,itemId:t})}async getFavoriteCount(e,t){if(!e||!t)throw new Error("Item type and ID are required");return this.adapter.getFavoriteCount({itemType:e,itemId:t})}async batchCheckFavoriteStatus(e){const t=(0,a.HW)();return null!==t&&void 0!==t&&t.id?this.adapter.batchCheckFavoriteStatus({userId:t.id,items:e}):e.reduce((e,t)=>(e[`${t.itemType}_${t.itemId}`]=!1,e),{})}}},950:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(730)},979:(e,t,r)=>{"use strict";r.d(t,{H9:()=>o,Tw:()=>s});var a=r(32);const o=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const{userId:r=null,visitorFingerprint:o=null,ipAddress:s=null,userAgent:n=null}=t,{data:i,error:l}=await a.ND.rpc("increment_artwork_views",{p_artwork_id:e,p_user_id:r,p_visitor_fingerprint:o,p_ip_address:s,p_user_agent:n});if(l)return console.error("Failed to record artwork view:",l),{success:!1,error:l.message};if(i&&i.length>0){const e=i[0];return{success:e.success,viewCount:e.view_count,error:e.error_message}}return{success:!1,error:"No data returned from database function"}}catch(r){return console.error("Error recording artwork view:",r),{success:!1,error:r.message}}},s=async e=>{try{const{data:t,error:r}=await a.ND.rpc("get_artwork_view_count",{p_artwork_id:e});return r?(console.error("Failed to get artwork view count:",r),{success:!1,error:r.message}):{success:!0,viewCount:t||0}}catch(t){return console.error("Error getting artwork view count:",t),{success:!1,error:t.message}}}},980:function(e,t,r){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const o=a(r(210));t.PostgrestClient=o.default;const s=a(r(829));t.PostgrestQueryBuilder=s.default;const n=a(r(736));t.PostgrestFilterBuilder=n.default;const i=a(r(374));t.PostgrestTransformBuilder=i.default;const l=a(r(286));t.PostgrestBuilder=l.default;const c=a(r(611));t.PostgrestError=c.default,t.default={PostgrestClient:o.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:l.default,PostgrestError:c.default}},989:e=>{"use strict";var t=!("undefined"===typeof window||!window.document||!window.document.createElement),r={canUseDOM:t,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:t&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:t&&!!window.screen,isInWorker:!t};e.exports=r}},t={};function r(a){var o=t[a];if(void 0!==o)return o.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,r),s.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e=r(43),t=r(391),a=(r(358),"popstate");function o(){return u(function(e,t){let{pathname:r,search:a,hash:o}=e.location;return l("",{pathname:r,search:a,hash:o},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:c(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function s(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function n(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function i(e,t){return{usr:e.state,key:e.key,idx:t}}function l(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3?arguments[3]:void 0;return{pathname:"string"===typeof e?e:e.pathname,search:"",hash:"",..."string"===typeof t?d(t):t,state:r,key:t&&t.key||a||Math.random().toString(36).substring(2,10)}}function c(e){let{pathname:t="/",search:r="",hash:a=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),a&&"#"!==a&&(t+="#"===a.charAt(0)?a:"#"+a),t}function d(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function u(e,t,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:s=document.defaultView,v5Compat:n=!1}=o,c=s.history,d="POP",u=null,m=p();function p(){return(c.state||{idx:null}).idx}function g(){d="POP";let e=p(),t=null==e?null:e-m;m=e,u&&u({action:d,location:v.location,delta:t})}function f(e){return h(e)}null==m&&(m=0,c.replaceState({...c.state,idx:m},""));let v={get action(){return d},get location(){return e(s,c)},listen(e){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(a,g),u=e,()=>{s.removeEventListener(a,g),u=null}},createHref:e=>t(s,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){d="PUSH";let a=l(v.location,e,t);r&&r(a,e),m=p()+1;let o=i(a,m),h=v.createHref(a);try{c.pushState(o,"",h)}catch(g){if(g instanceof DOMException&&"DataCloneError"===g.name)throw g;s.location.assign(h)}n&&u&&u({action:d,location:v.location,delta:1})},replace:function(e,t){d="REPLACE";let a=l(v.location,e,t);r&&r(a,e),m=p();let o=i(a,m),s=v.createHref(a);c.replaceState(o,"",s),n&&u&&u({action:d,location:v.location,delta:0})},go:e=>c.go(e)};return v}function h(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r="http://localhost";"undefined"!==typeof window&&(r="null"!==window.location.origin?window.location.origin:window.location.href),s(r,"No window.location.(origin|href) available to create URL");let a="string"===typeof e?e:c(e);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=r+a),new URL(a,r)}new WeakMap;function m(e,t){return p(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function p(e,t,r,a){let o=P(("string"===typeof t?d(t):t).pathname||"/",r);if(null==o)return null;let s=g(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let n=null;for(let i=0;null==n&&i<s.length;++i){let e=E(o);n=C(s[i],e,a)}return n}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=(e,o,n)=>{let i={relativePath:void 0===n?e.path||"":n,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};i.relativePath.startsWith("/")&&(s(i.relativePath.startsWith(a),`Absolute route path "${i.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),i.relativePath=i.relativePath.slice(a.length));let l=D([a,i.relativePath]),c=r.concat(i);e.children&&e.children.length>0&&(s(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),g(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:N(l,e.index),routesMeta:c})};return e.forEach((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let r of f(e.path))o(e,t,r);else o(e,t)}),t}function f(e){let t=e.split("/");if(0===t.length)return[];let[r,...a]=t,o=r.endsWith("?"),s=r.replace(/\?$/,"");if(0===a.length)return o?[s,""]:[s];let n=f(a.join("/")),i=[];return i.push(...n.map(e=>""===e?s:[s,e].join("/"))),o&&i.push(...n),i.map(t=>e.startsWith("/")&&""===t?"/":t)}var v=/^:[\w-]+$/,x=3,b=2,y=1,w=10,j=-2,k=e=>"*"===e;function N(e,t){let r=e.split("/"),a=r.length;return r.some(k)&&(a+=j),t&&(a+=b),r.filter(e=>!k(e)).reduce((e,t)=>e+(v.test(t)?x:""===t?y:w),a)}function C(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:a}=e,o={},s="/",n=[];for(let i=0;i<a.length;++i){let e=a[i],l=i===a.length-1,c="/"===s?t:t.slice(s.length)||"/",d=S({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&r&&!a[a.length-1].route.index&&(d=S({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(o,d.params),n.push({params:o,pathname:D([s,d.pathname]),pathnameBase:M(D([s,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(s=D([s,d.pathnameBase]))}return n}function S(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,a]=_(e.path,e.caseSensitive,e.end),o=t.match(r);if(!o)return null;let s=o[0],n=s.replace(/(.)\/+$/,"$1"),i=o.slice(1);return{params:a.reduce((e,t,r)=>{let{paramName:a,isOptional:o}=t;if("*"===a){let e=i[r]||"";n=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=i[r];return e[a]=o&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:n,pattern:e}}function _(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];n("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(a.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),a]}function E(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return n(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=e.charAt(r);return a&&"/"!==a?null:e.slice(r)||"/"}function I(e,t,r,a){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function A(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function T(e){let t=A(e);return t.map((e,r)=>r===t.length-1?e.pathname:e.pathnameBase)}function L(e,t,r){let a,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?a=d(e):(a={...e},s(!a.pathname||!a.pathname.includes("?"),I("?","pathname","search",a)),s(!a.pathname||!a.pathname.includes("#"),I("#","pathname","hash",a)),s(!a.search||!a.search.includes("#"),I("#","search","hash",a)));let n,i=""===e||""===a.pathname,l=i?"/":a.pathname;if(null==l)n=r;else{let e=t.length-1;if(!o&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}n=e>=0?t[e]:"/"}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:r,search:a="",hash:o=""}="string"===typeof e?d(e):e,s=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:s,search:R(a),hash:$(o)}}(a,n),u=l&&"/"!==l&&l.endsWith("/"),h=(i||"."===l)&&r.endsWith("/");return c.pathname.endsWith("/")||!u&&!h||(c.pathname+="/"),c}var D=e=>e.join("/").replace(/\/\/+/g,"/"),M=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),R=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",$=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function F(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var O=["POST","PUT","PATCH","DELETE"],U=(new Set(O),["GET",...O]);new Set(U),Symbol("ResetLoaderData");var z=e.createContext(null);z.displayName="DataRouter";var W=e.createContext(null);W.displayName="DataRouterState";var B=e.createContext({isTransitioning:!1});B.displayName="ViewTransition";var q=e.createContext(new Map);q.displayName="Fetchers";var H=e.createContext(null);H.displayName="Await";var V=e.createContext(null);V.displayName="Navigation";var G=e.createContext(null);G.displayName="Location";var J=e.createContext({outlet:null,matches:[],isDataRoute:!1});J.displayName="Route";var K=e.createContext(null);K.displayName="RouteError";function Y(){return null!=e.useContext(G)}function Z(){return s(Y(),"useLocation() may be used only in the context of a <Router> component."),e.useContext(G).location}var Q="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function X(t){e.useContext(V).static||e.useLayoutEffect(t)}function ee(){let{isDataRoute:t}=e.useContext(J);return t?function(){let{router:t}=de("useNavigate"),r=he("useNavigate"),a=e.useRef(!1);X(()=>{a.current=!0});let o=e.useCallback(async function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(a.current,Q),a.current&&("number"===typeof e?t.navigate(e):await t.navigate(e,{fromRouteId:r,...o}))},[t,r]);return o}():function(){s(Y(),"useNavigate() may be used only in the context of a <Router> component.");let t=e.useContext(z),{basename:r,navigator:a}=e.useContext(V),{matches:o}=e.useContext(J),{pathname:i}=Z(),l=JSON.stringify(T(o)),c=e.useRef(!1);X(()=>{c.current=!0});let d=e.useCallback(function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n(c.current,Q),!c.current)return;if("number"===typeof e)return void a.go(e);let s=L(e,JSON.parse(l),i,"path"===o.relative);null==t&&"/"!==r&&(s.pathname="/"===s.pathname?r:D([r,s.pathname])),(o.replace?a.replace:a.push)(s,o.state,o)},[r,a,l,i,t]);return d}()}e.createContext(null);function te(){let{matches:t}=e.useContext(J),r=t[t.length-1];return r?r.params:{}}function re(t){let{relative:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:a}=e.useContext(J),{pathname:o}=Z(),s=JSON.stringify(T(a));return e.useMemo(()=>L(t,JSON.parse(s),o,"path"===r),[t,s,o,r])}function ae(t,r,a,o){s(Y(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=e.useContext(V),{matches:l}=e.useContext(J),c=l[l.length-1],u=c?c.params:{},h=c?c.pathname:"/",p=c?c.pathnameBase:"/",g=c&&c.route;{let e=g&&g.path||"";ge(h,!g||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let f,v=Z();if(r){let e="string"===typeof r?d(r):r;s("/"===p||e.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${e.pathname}" was given in the \`location\` prop.`),f=e}else f=v;let x=f.pathname||"/",b=x;if("/"!==p){let e=p.replace(/^\//,"").split("/");b="/"+x.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=m(t,{pathname:b});n(g||null!=y,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),n(null==y||void 0!==y[y.length-1].route.element||void 0!==y[y.length-1].route.Component||void 0!==y[y.length-1].route.lazy,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=le(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:D([p,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?p:D([p,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,a,o);return r&&w?e.createElement(G.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},w):w}function oe(){let t=me(),r=F(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,o="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:o},n={padding:"2px 4px",backgroundColor:o},i=null;return console.error("Error handled by React Router default ErrorBoundary:",t),i=e.createElement(e.Fragment,null,e.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),e.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",e.createElement("code",{style:n},"ErrorBoundary")," or"," ",e.createElement("code",{style:n},"errorElement")," prop on your route.")),e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},r),a?e.createElement("pre",{style:s},a):null,i)}var se=e.createElement(oe,null),ne=class extends e.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?e.createElement(J.Provider,{value:this.props.routeContext},e.createElement(K.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ie(t){let{routeContext:r,match:a,children:o}=t,s=e.useContext(z);return s&&s.static&&s.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=a.route.id),e.createElement(J.Provider,{value:r},o)}function le(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==t){if(!a)return null;if(a.errors)t=a.matches;else{if(0!==r.length||a.initialized||!(a.matches.length>0))return null;t=a.matches}}let o=t,n=a?.errors;if(null!=n){let e=o.findIndex(e=>e.route.id&&void 0!==n?.[e.route.id]);s(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(n).join(",")}`),o=o.slice(0,Math.min(o.length,e+1))}let i=!1,l=-1;if(a)for(let e=0;e<o.length;e++){let t=o[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(l=e),t.route.id){let{loaderData:e,errors:r}=a,s=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!r||void 0===r[t.route.id]);if(t.route.lazy||s){i=!0,o=l>=0?o.slice(0,l+1):[o[0]];break}}}return o.reduceRight((t,s,c)=>{let d,u=!1,h=null,m=null;a&&(d=n&&s.route.id?n[s.route.id]:void 0,h=s.route.errorElement||se,i&&(l<0&&0===c?(ge("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),u=!0,m=null):l===c&&(u=!0,m=s.route.hydrateFallbackElement||null)));let p=r.concat(o.slice(0,c+1)),g=()=>{let r;return r=d?h:u?m:s.route.Component?e.createElement(s.route.Component,null):s.route.element?s.route.element:t,e.createElement(ie,{match:s,routeContext:{outlet:t,matches:p,isDataRoute:null!=a},children:r})};return a&&(s.route.ErrorBoundary||s.route.errorElement||0===c)?e.createElement(ne,{location:a.location,revalidation:a.revalidation,component:h,error:d,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}function ce(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function de(t){let r=e.useContext(z);return s(r,ce(t)),r}function ue(t){let r=e.useContext(W);return s(r,ce(t)),r}function he(t){let r=function(t){let r=e.useContext(J);return s(r,ce(t)),r}(t),a=r.matches[r.matches.length-1];return s(a.route.id,`${t} can only be used on routes that contain a unique "id"`),a.route.id}function me(){let t=e.useContext(K),r=ue("useRouteError"),a=he("useRouteError");return void 0!==t?t:r.errors?.[a]}var pe={};function ge(e,t,r){t||pe[e]||(pe[e]=!0,n(!1,r))}e.memo(function(e){let{routes:t,future:r,state:a}=e;return ae(t,void 0,a,r)});function fe(t){let{to:r,replace:a,state:o,relative:i}=t;s(Y(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=e.useContext(V);n(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=e.useContext(J),{pathname:d}=Z(),u=ee(),h=L(r,T(c),d,"path"===i),m=JSON.stringify(h);return e.useEffect(()=>{u(JSON.parse(m),{replace:a,state:o,relative:i})},[u,m,i,a,o]),null}function ve(e){s(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function xe(t){let{basename:r="/",children:a=null,location:o,navigationType:i="POP",navigator:l,static:c=!1}=t;s(!Y(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=r.replace(/^\/*/,"/"),h=e.useMemo(()=>({basename:u,navigator:l,static:c,future:{}}),[u,l,c]);"string"===typeof o&&(o=d(o));let{pathname:m="/",search:p="",hash:g="",state:f=null,key:v="default"}=o,x=e.useMemo(()=>{let e=P(m,u);return null==e?null:{location:{pathname:e,search:p,hash:g,state:f,key:v},navigationType:i}},[u,m,p,g,f,v,i]);return n(null!=x,`<Router basename="${u}"> is not able to match the URL "${m}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),null==x?null:e.createElement(V.Provider,{value:h},e.createElement(G.Provider,{children:a,value:x}))}function be(e){let{children:t,location:r}=e;return ae(ye(t),r)}e.Component;function ye(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[];return e.Children.forEach(t,(t,o)=>{if(!e.isValidElement(t))return;let n=[...r,o];if(t.type===e.Fragment)return void a.push.apply(a,ye(t.props.children,n));s(t.type===ve,`[${"string"===typeof t.type?t.type:t.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),s(!t.props.index||!t.props.children,"An index route cannot have child routes.");let i={id:t.props.id||n.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,hydrateFallbackElement:t.props.hydrateFallbackElement,HydrateFallback:t.props.HydrateFallback,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:!0===t.props.hasErrorBoundary||null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(i.children=ye(t.props.children,n)),a.push(i)}),a}var we="get",je="application/x-www-form-urlencoded";function ke(e){return null!=e&&"string"===typeof e.tagName}function Ne(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let a=e[r];return t.concat(Array.isArray(a)?a.map(e=>[r,e]):[[r,a]])},[]))}var Ce=null;var Se=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function _e(e){return null==e||Se.has(e)?e:(n(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${je}"`),null)}function Ee(e,t){let r,a,o,s,n;if(ke(i=e)&&"form"===i.tagName.toLowerCase()){let n=e.getAttribute("action");a=n?P(n,t):null,r=e.getAttribute("method")||we,o=_e(e.getAttribute("enctype"))||je,s=new FormData(e)}else if(function(e){return ke(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return ke(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let n=e.form;if(null==n)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let i=e.getAttribute("formaction")||n.getAttribute("action");if(a=i?P(i,t):null,r=e.getAttribute("formmethod")||n.getAttribute("method")||we,o=_e(e.getAttribute("formenctype"))||_e(n.getAttribute("enctype"))||je,s=new FormData(n,e),!function(){if(null===Ce)try{new FormData(document.createElement("form"),0),Ce=!1}catch(e){Ce=!0}return Ce}()){let{name:t,type:r,value:a}=e;if("image"===r){let e=t?`${t}.`:"";s.append(`${e}x`,"0"),s.append(`${e}y`,"0")}else t&&s.append(t,a)}}else{if(ke(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=we,a=null,o=je,n=e}var i;return s&&"text/plain"===o&&(n=s,s=void 0),{action:a,method:r.toLowerCase(),encType:o,formData:s,body:n}}function Pe(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}async function Ie(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ae(e){return null!=e&&"string"===typeof e.page}function Te(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Le(e,t,r,a,o,s){let n=(e,t)=>!r[t]||e.route.id!==r[t].route.id,i=(e,t)=>r[t].pathname!==e.pathname||r[t].route.path?.endsWith("*")&&r[t].params["*"]!==e.params["*"];return"assets"===s?t.filter((e,t)=>n(e,t)||i(e,t)):"data"===s?t.filter((t,s)=>{let l=a.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(n(t,s)||i(t,s))return!0;if(t.route.shouldRevalidate){let a=t.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof a)return a}return!0}):[]}function De(e,t){let{includeHydrateFallback:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a=e.map(e=>{let a=t.routes[e.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1),[...new Set(a)];var a}function Me(e,t){let r=new Set,a=new Set(t);return e.reduce((e,o)=>{if(t&&!Ae(o)&&"script"===o.as&&o.href&&a.has(o.href))return e;let s=JSON.stringify(function(e){let t={},r=Object.keys(e).sort();for(let a of r)t[a]=e[a];return t}(o));return r.has(s)||(r.add(s),e.push({key:s,link:o})),e},[])}function Re(e){return{__html:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;Symbol("SingleFetchRedirect");var $e=new Set([100,101,204,205]);function Fe(e,t){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname="_root.data":t&&"/"===P(r.pathname,t)?r.pathname=`${t.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}e.Component;function Oe(t){let{error:r,isOutsideRemixApp:a}=t;console.error(r);let o,s=e.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(F(r))return e.createElement(Ue,{title:"Unhandled Thrown Response!"},e.createElement("h1",{style:{fontSize:"24px"}},r.status," ",r.statusText),s);if(r instanceof Error)0;else{let e=null==r?"Unknown Error":"object"===typeof r&&"toString"in r?r.toString():JSON.stringify(r);new Error(e)}return e.createElement(Ue,{title:"Application Error!",isOutsideRemixApp:a},e.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),e.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},o.stack),s)}function Ue(t){let{title:r,renderScripts:a,isOutsideRemixApp:o,children:s}=t,{routeModules:n}=He();return n.root?.Layout&&!o?s:e.createElement("html",{lang:"en"},e.createElement("head",null,e.createElement("meta",{charSet:"utf-8"}),e.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),e.createElement("title",null,r)),e.createElement("body",null,e.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},s,a?e.createElement(Qe,null):null)))}function ze(e,t){return"lazy"===e.mode&&!0===t}function We(){let t=e.useContext(z);return Pe(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Be(){let t=e.useContext(W);return Pe(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var qe=e.createContext(void 0);function He(){let t=e.useContext(qe);return Pe(t,"You must render this element inside a <HydratedRouter> element"),t}function Ve(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function Ge(e,t,r){if(r&&!Ze)return[e[0]];if(t){let r=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,r+1)}return e}function Je(t){let{page:r,...a}=t,{router:o}=We(),s=e.useMemo(()=>m(o.routes,r,o.basename),[o.routes,r,o.basename]);return s?e.createElement(Ye,{page:r,matches:s,...a}):null}function Ke(t){let{manifest:r,routeModules:a}=He(),[o,s]=e.useState([]);return e.useEffect(()=>{let e=!1;return async function(e,t,r){return Me((await Promise.all(e.map(async e=>{let a=t.routes[e.route.id];if(a){let e=await Ie(a,r);return e.links?e.links():[]}return[]}))).flat(1).filter(Te).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}(t,r,a).then(t=>{e||s(t)}),()=>{e=!0}},[t,r,a]),o}function Ye(t){let{page:r,matches:a,...o}=t,s=Z(),{manifest:n,routeModules:i}=He(),{basename:l}=We(),{loaderData:c,matches:d}=Be(),u=e.useMemo(()=>Le(r,a,d,n,s,"data"),[r,a,d,n,s]),h=e.useMemo(()=>Le(r,a,d,n,s,"assets"),[r,a,d,n,s]),m=e.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let e=new Set,t=!1;if(a.forEach(r=>{let a=n.routes[r.route.id];a&&a.hasLoader&&(!u.some(e=>e.route.id===r.route.id)&&r.route.id in c&&i[r.route.id]?.shouldRevalidate||a.hasClientLoader?t=!0:e.add(r.route.id))}),0===e.size)return[];let o=Fe(r,l);return t&&e.size>0&&o.searchParams.set("_routes",a.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[o.pathname+o.search]},[l,c,s,n,u,a,r,i]),p=e.useMemo(()=>De(h,n),[h,n]),g=Ke(h);return e.createElement(e.Fragment,null,m.map(t=>e.createElement("link",{key:t,rel:"prefetch",as:"fetch",href:t,...o})),p.map(t=>e.createElement("link",{key:t,rel:"modulepreload",href:t,...o})),g.map(t=>{let{key:r,link:a}=t;return e.createElement("link",{key:r,...a})}))}qe.displayName="FrameworkContext";var Ze=!1;function Qe(t){let{manifest:r,serverHandoffString:a,isSpaMode:o,renderMeta:s,routeDiscovery:n,ssr:i}=He(),{router:l,static:c,staticContext:d}=We(),{matches:u}=Be(),h=ze(n,i);s&&(s.didRenderScripts=!0);let p=Ge(u,null,o);e.useEffect(()=>{0},[]);let g=e.useMemo(()=>{let o=d?`window.__reactRouterContext = ${a};window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());`:" ",s=c?`${r.hmr?.runtime?`import ${JSON.stringify(r.hmr.runtime)};`:""}${h?"":`import ${JSON.stringify(r.url)}`};\n${p.map((e,t)=>{let a=`route${t}`,o=r.routes[e.route.id];Pe(o,`Route ${e.route.id} not found in manifest`);let{clientActionModule:s,clientLoaderModule:n,clientMiddlewareModule:i,hydrateFallbackModule:l,module:c}=o,d=[...s?[{module:s,varName:`${a}_clientAction`}]:[],...n?[{module:n,varName:`${a}_clientLoader`}]:[],...i?[{module:i,varName:`${a}_clientMiddleware`}]:[],...l?[{module:l,varName:`${a}_HydrateFallback`}]:[],{module:c,varName:`${a}_main`}];return 1===d.length?`import * as ${a} from ${JSON.stringify(c)};`:[d.map(e=>`import * as ${e.varName} from "${e.module}";`).join("\n"),`const ${a} = {${d.map(e=>`...${e.varName}`).join(",")}};`].join("\n")}).join("\n")}\n  ${h?`window.__reactRouterManifest = ${JSON.stringify(function(e,t){let{sri:r,...a}=e,o=new Set(t.state.matches.map(e=>e.route.id)),s=t.state.location.pathname.split("/").filter(Boolean),n=["/"];for(s.pop();s.length>0;)n.push(`/${s.join("/")}`),s.pop();n.forEach(e=>{let r=m(t.routes,e,t.basename);r&&r.forEach(e=>o.add(e.route.id))});let i=[...o].reduce((e,t)=>Object.assign(e,{[t]:a.routes[t]}),{});return{...a,routes:i,sri:!!r||void 0}}(r,l),null,2)};`:""}\n  window.__reactRouterRouteModules = {${p.map((e,t)=>`${JSON.stringify(e.route.id)}:route${t}`).join(",")}};\n\nimport(${JSON.stringify(r.entry.module)});`:" ";return e.createElement(e.Fragment,null,e.createElement("script",{...t,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Re(o),type:void 0}),e.createElement("script",{...t,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Re(s),type:"module",async:!0}))},[]),f=Ze?[]:(r.entry.imports.concat(De(p,r,{includeHydrateFallback:!0})),[...new Set(v)]);var v;let x="object"===typeof r.sri?r.sri:{};return Ze?null:e.createElement(e.Fragment,null,"object"===typeof r.sri?e.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:x})}}):null,h?null:e.createElement("link",{rel:"modulepreload",href:r.url,crossOrigin:t.crossOrigin,integrity:x[r.url],suppressHydrationWarning:!0}),e.createElement("link",{rel:"modulepreload",href:r.entry.module,crossOrigin:t.crossOrigin,integrity:x[r.entry.module],suppressHydrationWarning:!0}),f.map(r=>e.createElement("link",{key:r,rel:"modulepreload",href:r,crossOrigin:t.crossOrigin,integrity:x[r],suppressHydrationWarning:!0})),g)}function Xe(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}var et="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{et&&(window.__reactRouterVersion="7.6.3")}catch(eu){}function tt(t){let{basename:r,children:a,window:s}=t,n=e.useRef();null==n.current&&(n.current=o({window:s,v5Compat:!0}));let i=n.current,[l,c]=e.useState({action:i.action,location:i.location}),d=e.useCallback(t=>{e.startTransition(()=>c(t))},[c]);return e.useLayoutEffect(()=>i.listen(d),[i,d]),e.createElement(xe,{basename:r,children:a,location:l.location,navigationType:l.action,navigator:i})}var rt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,at=e.forwardRef(function(t,r){let a,{onClick:o,discover:i="render",prefetch:l="none",relative:d,reloadDocument:u,replace:h,state:m,target:p,to:g,preventScrollReset:f,viewTransition:v,...x}=t,{basename:b}=e.useContext(V),y="string"===typeof g&&rt.test(g),w=!1;if("string"===typeof g&&y&&(a=g,et))try{let e=new URL(window.location.href),t=g.startsWith("//")?new URL(e.protocol+g):new URL(g),r=P(t.pathname,b);t.origin===e.origin&&null!=r?g=r+t.search+t.hash:w=!0}catch(eu){n(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let j=function(t){let{relative:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(Y(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:o}=e.useContext(V),{hash:n,pathname:i,search:l}=re(t,{relative:r}),c=i;return"/"!==a&&(c="/"===i?a:D([a,i])),o.createHref({pathname:c,search:l,hash:n})}(g,{relative:d}),[k,N,C]=function(t,r){let a=e.useContext(qe),[o,s]=e.useState(!1),[n,i]=e.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=r,m=e.useRef(null);e.useEffect(()=>{if("render"===t&&i(!0),"viewport"===t){let e=new IntersectionObserver(e=>{e.forEach(e=>{i(e.isIntersecting)})},{threshold:.5});return m.current&&e.observe(m.current),()=>{e.disconnect()}}},[t]),e.useEffect(()=>{if(o){let e=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(e)}}},[o]);let p=()=>{s(!0)},g=()=>{s(!1),i(!1)};return a?"intent"!==t?[n,m,{}]:[n,m,{onFocus:Ve(l,p),onBlur:Ve(c,g),onMouseEnter:Ve(d,p),onMouseLeave:Ve(u,g),onTouchStart:Ve(h,p)}]:[!1,m,{}]}(l,x),S=function(t){let{target:r,replace:a,state:o,preventScrollReset:s,relative:n,viewTransition:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=ee(),d=Z(),u=re(t,{relative:n});return e.useCallback(e=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,r)){e.preventDefault();let r=void 0!==a?a:c(d)===c(u);l(t,{replace:r,state:o,preventScrollReset:s,relative:n,viewTransition:i})}},[d,l,u,a,o,r,t,s,n,i])}(g,{replace:h,state:m,target:p,preventScrollReset:f,relative:d,viewTransition:v});let _=e.createElement("a",{...x,...C,href:a||j,onClick:w||u?o:function(e){o&&o(e),e.defaultPrevented||S(e)},ref:Xe(r,N),target:p,"data-discover":y||"render"!==i?void 0:"true"});return k&&!y?e.createElement(e.Fragment,null,_,e.createElement(Je,{page:j})):_});at.displayName="Link",e.forwardRef(function(t,r){let{"aria-current":a="page",caseSensitive:o=!1,className:n="",end:i=!1,style:l,to:c,viewTransition:d,children:u,...h}=t,m=re(c,{relative:h.relative}),p=Z(),g=e.useContext(W),{navigator:f,basename:v}=e.useContext(V),x=null!=g&&function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.useContext(B);s(null!=a,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=nt("useViewTransitionState"),n=re(t,{relative:r.relative});if(!a.isTransitioning)return!1;let i=P(a.currentLocation.pathname,o)||a.currentLocation.pathname,l=P(a.nextLocation.pathname,o)||a.nextLocation.pathname;return null!=S(n.pathname,l)||null!=S(n.pathname,i)}(m)&&!0===d,b=f.encodeLocation?f.encodeLocation(m).pathname:m.pathname,y=p.pathname,w=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;o||(y=y.toLowerCase(),w=w?w.toLowerCase():null,b=b.toLowerCase()),w&&v&&(w=P(w,v)||w);const j="/"!==b&&b.endsWith("/")?b.length-1:b.length;let k,N=y===b||!i&&y.startsWith(b)&&"/"===y.charAt(j),C=null!=w&&(w===b||!i&&w.startsWith(b)&&"/"===w.charAt(b.length)),_={isActive:N,isPending:C,isTransitioning:x},E=N?a:void 0;k="function"===typeof n?n(_):[n,N?"active":null,C?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let I="function"===typeof l?l(_):l;return e.createElement(at,{...h,"aria-current":E,className:k,ref:r,style:I,to:c,viewTransition:d},"function"===typeof u?u(_):u)}).displayName="NavLink";var ot=e.forwardRef((t,r)=>{let{discover:a="render",fetcherKey:o,navigate:n,reloadDocument:i,replace:l,state:d,method:u=we,action:h,onSubmit:m,relative:p,preventScrollReset:g,viewTransition:f,...v}=t,x=dt(),b=function(t){let{relative:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:a}=e.useContext(V),o=e.useContext(J);s(o,"useFormAction must be used inside a RouteContext");let[n]=o.matches.slice(-1),i={...re(t||".",{relative:r})},l=Z();if(null==t){i.search=l.search;let e=new URLSearchParams(i.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let r=e.toString();i.search=r?`?${r}`:""}}t&&"."!==t||!n.route.index||(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index");"/"!==a&&(i.pathname="/"===i.pathname?a:D([a,i.pathname]));return c(i)}(h,{relative:p}),y="get"===u.toLowerCase()?"get":"post",w="string"===typeof h&&rt.test(h);return e.createElement("form",{ref:r,method:y,action:b,onSubmit:i?m:e=>{if(m&&m(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,r=t?.getAttribute("formmethod")||u;x(t||e.currentTarget,{fetcherKey:o,method:r,navigate:n,replace:l,state:d,relative:p,preventScrollReset:g,viewTransition:f})},...v,"data-discover":w||"render"!==a?void 0:"true"})});function st(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nt(t){let r=e.useContext(z);return s(r,st(t)),r}function it(t){n("undefined"!==typeof URLSearchParams,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let r=e.useRef(Ne(t)),a=e.useRef(!1),o=Z(),s=e.useMemo(()=>function(e,t){let r=Ne(e);return t&&t.forEach((e,a)=>{r.has(a)||t.getAll(a).forEach(e=>{r.append(a,e)})}),r}(o.search,a.current?null:r.current),[o.search]),i=ee(),l=e.useCallback((e,t)=>{const r=Ne("function"===typeof e?e(s):e);a.current=!0,i("?"+r,t)},[i,s]);return[s,l]}ot.displayName="Form";var lt=0,ct=()=>`__${String(++lt)}__`;function dt(){let{router:t}=nt("useSubmit"),{basename:r}=e.useContext(V),a=he("useRouteId");return e.useCallback(async function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:n,encType:i,formData:l,body:c}=Ee(e,r);if(!1===o.navigate){let e=o.fetcherKey||ct();await t.fetch(e,a,o.action||s,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||n,formEncType:o.encType||i,flushSync:o.flushSync})}else await t.navigate(o.action||s,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||n,formEncType:o.encType||i,replace:o.replace,state:o.state,fromRouteId:a,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,r,a])}var ut=r(8),ht=r(579);const mt=(0,e.createContext)(),pt=()=>{const t=(0,e.useContext)(mt);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},gt=t=>{let{children:r}=t;const[a,o]=(0,e.useState)(null),[s,n]=(0,e.useState)(!0);(0,e.useEffect)(()=>{(async()=>{try{const e=(0,ut.HW)();o(e)}catch(e){console.error("[AuthContext] Error loading user:",e),o(null)}finally{n(!1)}})();const e=setTimeout(()=>{n(!1)},3e3);return()=>clearTimeout(e)},[]),(0,e.useEffect)(()=>{const e=()=>{try{const e=(0,ut.HW)();o(e)}catch(e){console.error("Error handling user change:",e),o(null)}};return window.addEventListener("user:changed",e),()=>window.removeEventListener("user:changed",e)},[]);const i={user:a,loading:s,login:async(e,t)=>{try{const e=(0,ut.HW)();return o(e),{success:!0}}catch(r){return console.error("Login error:",r),{success:!1,error:r.message}}},logout:()=>{o(null),localStorage.removeItem("tag_user"),sessionStorage.removeItem("tag_user"),localStorage.removeItem("tag.currentUserId")},isAuthenticated:()=>null!==a};return(0,ht.jsx)(mt.Provider,{value:i,children:r})},ft=e=>{let{onClick:t,className:r=""}=e;return(0,ht.jsx)(at,{to:"/",className:`flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity duration-200 ${r}`,onClick:t,children:(0,ht.jsx)("img",{src:"/TAG_Logo.png",alt:"TAG Logo",className:"h-12 w-auto"})})},vt=e=>{let{onInputChange:t,placeholder:r="Search for art, artists, or collections...",className:a=""}=e;return(0,ht.jsx)("div",{className:`${a}`,children:(0,ht.jsxs)("div",{className:"relative",children:[(0,ht.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,ht.jsx)("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,ht.jsx)("input",{type:"text",placeholder:r,onChange:t,className:"block w-full pl-9 pr-3 py-2 border border-gray-200 rounded-md leading-5 bg-white placeholder-gray-400 focus:outline-none focus:placeholder-gray-300 focus:ring-1 focus:ring-gray-300 focus:border-gray-300 text-sm shadow-sm"})]})})};var xt=r(313);const bt=e=>e&&e.id&&"guest"!==e.id,yt=(e,t)=>{if(bt(e)){const a=(null===t||void 0===t?void 0:t.id)||(null===e||void 0===e?void 0:e.id);if(a&&"undefined"!==typeof window)try{const e=window.localStorage.getItem(`tag.avatars.${a}`);if(e){const t=JSON.parse(e);if(t&&t.avatarUrl)return t.avatarUrl}}catch(r){console.warn("[getUserAvatar] Failed to read avatar data:",r)}return(null===t||void 0===t?void 0:t.avatar)||e.avatar||null}return null},wt=t=>{let{user:r,currentMockUser:a,onClick:o,className:s=""}=t;const[n,i]=(0,e.useState)(yt(r,a)),l=bt(r);return(0,e.useEffect)(()=>{const e=e=>{const{userId:t,avatarUrl:o}=e.detail,s=(null===a||void 0===a?void 0:a.id)||(null===r||void 0===r?void 0:r.id);console.log("[UserAvatar] Avatar update event received:",{eventUserId:t,currentUserId:s,newAvatarUrl:null===o||void 0===o?void 0:o.substring(0,30)}),t===s&&(console.log("[UserAvatar] Avatar updated, setting new URL:",null===o||void 0===o?void 0:o.substring(0,30)),i(o))},t=e=>{const{userId:t}=e.detail;t===((null===a||void 0===a?void 0:a.id)||(null===r||void 0===r?void 0:r.id))&&(console.log("[UserAvatar] Avatar deleted, resetting to default"),i((null===a||void 0===a?void 0:a.avatar)||(null===r||void 0===r?void 0:r.avatar)||null))};return window.addEventListener("avatar:updated",e),window.addEventListener("avatar:deleted",t),()=>{window.removeEventListener("avatar:updated",e),window.removeEventListener("avatar:deleted",t)}},[null===a||void 0===a?void 0:a.id,null===r||void 0===r?void 0:r.id]),(0,e.useEffect)(()=>{(async()=>{const e=(null===a||void 0===a?void 0:a.id)||(null===r||void 0===r?void 0:r.id);if(e){const t=await(0,xt.IA)(e);i(t||yt(r,a))}else i(yt(r,a))})()},[null===r||void 0===r?void 0:r.id,null===a||void 0===a?void 0:a.id]),l&&n?(0,ht.jsx)("img",{src:n,alt:(null===a||void 0===a?void 0:a.name)||(null===r||void 0===r?void 0:r.name)||"User",className:`w-8 h-8 rounded-full object-cover hover:opacity-80 transition-opacity duration-200 ${s}`,onClick:o}):(0,ht.jsx)("div",{className:`w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center cursor-pointer hover:opacity-80 transition-opacity duration-200 ${s}`,onClick:o,children:(0,ht.jsx)("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})},jt=e=>{let{children:t,onClick:r,disabled:a=!1,className:o="",size:s="md",fullWidth:n=!1}=e;const i=n?"w-full":"";return(0,ht.jsx)("button",{onClick:r,disabled:a,className:`\n        bg-purple-600 text-white font-medium hover:bg-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl\n        ${{sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-3 text-lg"}[s]}\n        ${i}\n        ${o}\n        ${a?"opacity-50 cursor-not-allowed":""}\n        rounded-lg\n      `,children:t})},kt=e=>{let{children:t,onClick:r,disabled:a=!1,className:o="",size:s="md",fullWidth:n=!1,active:i=!1}=e;const l=i?"bg-purple-100 text-purple-700 border-2 border-purple-300":"bg-white text-gray-700 border-2 border-gray-300 hover:bg-gray-50",c=n?"w-full":"";return(0,ht.jsx)("button",{onClick:r,disabled:a,className:`\n        ${l}\n        ${{sm:"px-3 py-2 text-sm",md:"px-4 py-3 text-base",lg:"px-6 py-3 text-lg"}[s]}\n        ${c}\n        ${o}\n        ${a?"opacity-50 cursor-not-allowed":""}\n        rounded-lg font-medium transition-all duration-200\n      `,children:t})};function Nt(e){let{title:t,subtitle:r,children:a}=e;return(0,ht.jsxs)("div",{className:"rounded-2xl border border-gray-200 p-4",children:[(t||r)&&(0,ht.jsxs)("div",{className:"mb-2",children:[t&&(0,ht.jsx)("h3",{className:"text-base font-semibold",children:t}),r&&(0,ht.jsx)("p",{className:"text-sm text-gray-500",children:r})]}),(0,ht.jsx)("div",{children:a})]})}function Ct(e){const{isOpen:t,onClose:r,title:a,children:o,maxWidth:s="max-w-md"}=e;return t?(0,ht.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ht.jsxs)("div",{className:`bg-white rounded-lg p-6 w-full mx-4 ${s}`,children:[(0,ht.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ht.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:a}),(0,ht.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:(0,ht.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o]})}):null}const St={saveButton:"SaveButton_saveButton__yEdmI",unfavorited:"SaveButton_unfavorited__X4yK2",disabled:"SaveButton_disabled__Z+CE2",favoritedWork:"SaveButton_favoritedWork__HJCeZ",favoritedCollab:"SaveButton_favoritedCollab__Dsgfs",icon:"SaveButton_icon__XjoP-",outlined:"SaveButton_outlined__7aOlI",filled:"SaveButton_filled__ZTBib",text:"SaveButton_text__Z-r6l",sm:"SaveButton_sm__3QuNk",md:"SaveButton_md__Ui0eR",lg:"SaveButton_lg__7C186",savePulse:"SaveButton_savePulse__Ll8kD"};function _t(t){const{isFavorited:r=!1,itemType:a,itemId:o,onToggle:s,className:n="",disabled:i=!1,size:l="md"}=t,[c,d]=(0,e.useState)(!1),[u,h]=(0,e.useState)(null),m=c?u:r,p=(0,e.useCallback)(async()=>{if(!i){d(!0),h(!m);try{await s(a,o,!m),d(!1),h(null)}catch(e){d(!1),h(null),console.error("Save toggle failed:",e)}}},[i,m,s,a,o]),g=(0,e.useCallback)(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),p())},[p]),f=`\n    ${St.saveButton}\n    ${St[l]}\n    ${m?"work"===a?St.favoritedWork:St.favoritedCollab:St.unfavorited}\n    ${i?St.disabled:""}\n    ${n}\n  `.trim(),v=`\n    ${St.icon}\n    ${m?St.filled:St.outlined}\n  `.trim();return(0,ht.jsxs)("button",{type:"button",className:f,onClick:p,onKeyDown:g,disabled:i,"aria-pressed":m,"aria-label":m?"Remove from favorites":"Add to favorites",title:m?"Remove from favorites":"Add to favorites",children:[(0,ht.jsx)("svg",{className:v,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}),(0,ht.jsx)("span",{className:St.text,children:m?"Saved":"Save"})]})}function Et(e){const{onClick:t,text:r="Back",className:a="",showIcon:o=!0}=e;return(0,ht.jsxs)("button",{onClick:t,className:`flex items-center text-gray-600 hover:text-gray-900 transition-colors duration-200 ${a}`,children:[o&&(0,ht.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),r]})}function Pt(e){const{isOpen:t,title:r="Error",message:a="An error occurred.",onClose:o,className:s=""}=e;return t?(0,ht.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,ht.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity duration-300",onClick:o}),(0,ht.jsxs)("div",{className:`relative bg-white rounded-xl shadow-2xl p-8 max-w-md w-full mx-4 transform transition-all duration-300 scale-100 ${s}`,children:[(0,ht.jsx)("div",{className:"flex justify-center mb-6",children:(0,ht.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:(0,ht.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})})}),(0,ht.jsx)("h3",{className:"text-xl font-semibold text-gray-900 text-center mb-3",children:r}),(0,ht.jsx)("p",{className:"text-gray-600 text-center mb-6 leading-relaxed",children:a}),(0,ht.jsx)("div",{className:"flex justify-center",children:(0,ht.jsx)("button",{onClick:o,className:"bg-red-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-red-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:"OK"})}),(0,ht.jsx)("button",{onClick:o,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors duration-200",children:(0,ht.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}):null}function It(e){const{isOpen:t,title:r="Success!",message:a="Operation completed successfully.",onClose:o,className:s=""}=e;return t?(0,ht.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,ht.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity duration-300",onClick:o}),(0,ht.jsxs)("div",{className:`relative bg-white rounded-xl shadow-2xl p-8 max-w-md w-full mx-4 transform transition-all duration-300 scale-100 ${s}`,children:[(0,ht.jsx)("div",{className:"flex justify-center mb-6",children:(0,ht.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:(0,ht.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),(0,ht.jsx)("h3",{className:"text-xl font-semibold text-gray-900 text-center mb-3",children:r}),(0,ht.jsx)("p",{className:"text-gray-600 text-center mb-6 leading-relaxed",children:a}),(0,ht.jsx)("div",{className:"flex justify-center",children:(0,ht.jsx)("button",{onClick:o,className:"bg-tag-blue text-white px-6 py-3 rounded-lg font-medium hover:bg-tag-dark-blue transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-tag-blue focus:ring-offset-2",children:"Got it!"})}),(0,ht.jsx)("button",{onClick:o,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors duration-200",children:(0,ht.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}):null}function At(e){const{message:t="Loading...",className:r="",size:a="md",color:o="blue",fullScreen:s=!1,variant:n="default"}=e,i={sm:"h-6 w-6",md:"h-12 w-12",lg:"h-16 w-16"},l={blue:"border-tag-blue",gray:"border-gray-600",green:"border-green-600",red:"border-red-600"};if("simple"===n)return(0,ht.jsx)("div",{className:`animate-spin rounded-full ${i[a]} border-b-2 ${l[o]} mx-auto ${r}`});const c=s?`flex items-center justify-center h-screen ${r}`:`flex items-center justify-center ${r}`;return(0,ht.jsx)("div",{className:c,children:(0,ht.jsxs)("div",{className:"text-center",children:[(0,ht.jsx)("div",{className:`animate-spin rounded-full ${i[a]} border-b-2 ${l[o]} mx-auto mb-4`}),t&&(0,ht.jsx)("p",{className:"text-gray-600",children:t})]})})}function Tt(e){const{error:t,className:r="",variant:a="default"}=e;if(!t)return null;return(0,ht.jsx)("div",{className:`${{default:"p-3 bg-red-50 border border-red-200 rounded-lg",compact:"p-2 bg-red-50 border border-red-200 rounded text-sm",full:"p-4 bg-red-50 border border-red-200 rounded-lg shadow-sm"}[a]} ${r}`,children:(0,ht.jsx)("p",{className:{default:"text-sm text-red-600",compact:"text-xs text-red-600",full:"text-base text-red-600 font-medium"}[a],children:t})})}class Lt extends e.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?(0,ht.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,ht.jsxs)("div",{className:"max-w-md mx-auto text-center p-6",children:[(0,ht.jsx)("div",{className:"mb-4",children:(0,ht.jsx)("svg",{className:"mx-auto h-12 w-12 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,ht.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),(0,ht.jsx)("p",{className:"text-gray-600 mb-4",children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),(0,ht.jsxs)("div",{className:"space-y-2",children:[(0,ht.jsx)("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-tag-blue text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Refresh Page"}),(0,ht.jsx)("button",{onClick:()=>window.history.back(),className:"w-full px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Go Back"})]}),!1]})}):this.props.children}}const Dt=Lt,Mt={NETWORK:"NETWORK",VALIDATION:"VALIDATION",AUTHENTICATION:"AUTHENTICATION",AUTHORIZATION:"AUTHORIZATION",NOT_FOUND:"NOT_FOUND",SERVER:"SERVER",CLIENT:"CLIENT",UNKNOWN:"UNKNOWN"},Rt="LOW",$t="MEDIUM",Ft="HIGH",Ot="CRITICAL",Ut={[Mt.NETWORK]:{title:"Network Error",message:"Unable to connect to the server. Please check your internet connection and try again.",userMessage:"Connection failed. Please try again."},[Mt.VALIDATION]:{title:"Validation Error",message:"The provided data is invalid.",userMessage:"Please check your input and try again."},[Mt.AUTHENTICATION]:{title:"Authentication Error",message:"You are not authenticated. Please log in.",userMessage:"Please log in to continue."},[Mt.AUTHORIZATION]:{title:"Authorization Error",message:"You do not have permission to perform this action.",userMessage:"You do not have permission for this action."},[Mt.NOT_FOUND]:{title:"Not Found",message:"The requested resource was not found.",userMessage:"The requested item was not found."},[Mt.SERVER]:{title:"Server Error",message:"An internal server error occurred.",userMessage:"Something went wrong. Please try again later."},[Mt.CLIENT]:{title:"Client Error",message:"An error occurred in the application.",userMessage:"Something went wrong. Please refresh the page."},[Mt.UNKNOWN]:{title:"Unknown Error",message:"An unexpected error occurred.",userMessage:"Something went wrong. Please try again."}};new class{constructor(){this.errorLog=[],this.maxLogSize=100}analyzeErrorType(e){var t,r,a,o,s,n,i,l,c,d;return e?"NetworkError"===e.name||null!==(t=e.message)&&void 0!==t&&t.includes("network")||null!==(r=e.message)&&void 0!==r&&r.includes("fetch")||null!==(a=e.message)&&void 0!==a&&a.includes("connection")?Mt.NETWORK:"ValidationError"===e.name||null!==(o=e.message)&&void 0!==o&&o.includes("validation")||null!==(s=e.message)&&void 0!==s&&s.includes("invalid")?Mt.VALIDATION:null!==(n=e.message)&&void 0!==n&&n.includes("unauthorized")||null!==(i=e.message)&&void 0!==i&&i.includes("authentication")||401===e.status?Mt.AUTHENTICATION:null!==(l=e.message)&&void 0!==l&&l.includes("forbidden")||null!==(c=e.message)&&void 0!==c&&c.includes("permission")||403===e.status?Mt.AUTHORIZATION:null!==(d=e.message)&&void 0!==d&&d.includes("not found")||404===e.status?Mt.NOT_FOUND:e.status>=500?Mt.SERVER:e.status>=400&&e.status<500?Mt.CLIENT:Mt.UNKNOWN:Mt.UNKNOWN}determineSeverity(e,t){switch(e){case Mt.CRITICAL:case Mt.SERVER:return Ot;case Mt.AUTHENTICATION:case Mt.AUTHORIZATION:return Ft;case Mt.NETWORK:case Mt.VALIDATION:return $t;default:return Rt}}logError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=this.analyzeErrorType(e),o=this.determineSeverity(a,e),s={timestamp:(new Date).toISOString(),type:a,severity:o,context:t,message:e.message||"Unknown error",stack:e.stack,additionalData:r};this.errorLog.push(s),this.errorLog.length>this.maxLogSize&&this.errorLog.shift();console[o===Ot?"error":"warn"](`[${a}] ${t}:`,e.message,r),o===Ot&&console.error("Full error stack:",e.stack)}getUserMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r=this.analyzeErrorType(e),a=Ut[r];return{title:a.title,message:t||a.message,userMessage:a.userMessage,type:r}}handleError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{log:a=!0,customMessage:o=null,additionalData:s={},rethrow:n=!1}=r;a&&this.logError(e,t,s);const i=this.getUserMessage(e,o),l={success:!1,error:i.userMessage,errorType:i.type,errorTitle:i.title,errorDetails:i.message,context:t,timestamp:(new Date).toISOString()};if(n)throw l;return l}getErrorLog(){return[...this.errorLog]}clearErrorLog(){this.errorLog=[]}isRecoverable(e){const t=this.analyzeErrorType(e);return[Mt.NETWORK,Mt.VALIDATION,Mt.AUTHENTICATION].includes(t)}};function zt(e){const{count:t,color:r="gray",size:a="md",variant:o="default",className:s="",...n}=e,i={gray:"bg-gray-100 text-gray-600 border-gray-200",blue:"bg-blue-100 text-blue-600 border-blue-200",green:"bg-green-100 text-green-600 border-green-200",red:"bg-red-100 text-red-600 border-red-200",yellow:"bg-yellow-100 text-yellow-600 border-yellow-200",purple:"bg-purple-100 text-purple-600 border-purple-200"},l={default:"rounded-full",outline:"rounded-full border",dot:"rounded-full w-2 h-2"};if("dot"===o)return(0,ht.jsx)("span",{className:`inline-block ${i[r]} ${l[o]} ${s}`,...n});if(!t||0===t)return null;const c=`${i[r]} ${{sm:"text-xs px-1.5 py-0.5",md:"text-xs px-2 py-1",lg:"text-sm px-2.5 py-1.5"}[a]} ${l[o]} ${s}`;return(0,ht.jsx)("span",{className:`inline-flex items-center justify-center font-medium ${c}`,...n,children:t})}function Wt(e){const{unreadCount:t=0,className:r="",size:a="md",color:o="red"}=e;if(t<=0)return null;const s=`${{sm:"w-4 h-4 text-xs",md:"w-5 h-5 text-xs",lg:"w-6 h-6 text-sm"}[a]} ${{red:"bg-red-500 text-white",blue:"bg-blue-500 text-white",green:"bg-green-500 text-white",orange:"bg-orange-500 text-white"}[o]} rounded-full flex items-center justify-center font-medium ${r}`;return(0,ht.jsx)("div",{className:s,children:(0,ht.jsx)("span",{children:(n=t,n>99?"99+":n.toString())})});var n}function Bt(e){const{progress:t=0,color:r="blue",size:a="md",className:o="",showLabel:s=!1,label:n,...i}=e,l=Math.max(0,Math.min(100,t)),c={sm:"h-1",md:"h-2",lg:"h-3"},d=`w-full bg-gray-200 rounded-full ${c[a]} ${o}`,u=`${{blue:"bg-blue-600",green:"bg-green-600",purple:"bg-purple-600",red:"bg-red-600",orange:"bg-orange-600"}[r]} ${c[a]} rounded-full transition-all duration-500`;return(0,ht.jsxs)("div",{className:"w-full",children:[s&&(0,ht.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,ht.jsx)("span",{className:"text-sm text-gray-600",children:n||"Progress"}),(0,ht.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[l,"%"]})]}),(0,ht.jsx)("div",{className:d,role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":l,"aria-label":`Progress: ${l}%`,...i,children:(0,ht.jsx)("div",{className:u,style:{width:`${l}%`}})})]})}function qt(e){const{onFileUpload:t,id:r,children:a,className:o="",variant:s="default",accept:n=".jpg,.jpeg,.png,.gif,.pdf",multiple:i=!0,buttonText:l="Choose Files",placeholder:c="Drag and drop files here, or click to select",...d}=e,u=`${{default:"border-2 border-dashed border-gray-300 rounded-lg bg-white py-8 px-4",compact:"border-2 border-dashed border-gray-300 rounded-lg bg-white py-4 px-3",large:"border-2 border-dashed border-gray-300 rounded-lg bg-white py-12 px-6"}[s]} text-center ${o}`;return(0,ht.jsxs)("div",{className:u,...d,children:[(0,ht.jsx)("svg",{className:`${{default:"w-8 h-8",compact:"w-6 h-6",large:"w-12 h-12"}[s]} text-gray-400 mx-auto mb-3`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),a||(0,ht.jsx)("p",{className:"text-gray-600 mb-4",children:c}),(0,ht.jsx)("input",{type:"file",multiple:i,accept:n,onChange:t,className:"hidden",id:r}),(0,ht.jsx)("label",{htmlFor:r,className:`bg-tag-blue text-white ${{default:"px-4 py-2",compact:"px-3 py-1 text-sm",large:"px-6 py-3 text-lg"}[s]} rounded cursor-pointer hover:bg-tag-dark-blue transition-colors duration-200 inline-block`,children:l})]})}var Ht=r(450);class Vt{constructor(){this.capabilities=this.detectCapabilities()}detectCapabilities(){const e={localStorage:this.testLocalStorage(),indexedDB:this.testIndexedDB(),fetch:this.testFetch(),cors:this.testCORS(),privateMode:this.detectPrivateMode()};return console.log("[BrowserCompatibility] Detected capabilities:",e),e}testLocalStorage(){try{const e="__test_localStorage__";localStorage.setItem(e,"test");const t="test"===localStorage.getItem(e);return localStorage.removeItem(e),t}catch(e){return console.warn("[BrowserCompatibility] localStorage not available:",e),!1}}testIndexedDB(){try{return"indexedDB"in window&&null!==indexedDB}catch(e){return console.warn("[BrowserCompatibility] IndexedDB not available:",e),!1}}testFetch(){try{return"fetch"in window&&"function"===typeof fetch}catch(e){return console.warn("[BrowserCompatibility] fetch not available:",e),!1}}testCORS(){try{return"cors"in new Request("https://example.com")}catch(e){return console.warn("[BrowserCompatibility] CORS test failed:",e),!1}}detectPrivateMode(){try{const e="__private_mode_test__";localStorage.setItem(e,"test");const t="test"===localStorage.getItem(e);return localStorage.removeItem(e),!t}catch(e){return!0}}getCompatibilityStatus(){const{localStorage:e,indexedDB:t,fetch:r,cors:a,privateMode:o}=this.capabilities;return o?{level:"warning",message:"Private browsing mode detected. Some features may be limited.",recommendations:["Use normal browsing mode for full functionality"]}:e&&t?r&&a?{level:"success",message:"All features supported.",recommendations:[]}:{level:"warning",message:"Limited network capabilities. Some images may not load.",recommendations:["Check network settings","Disable strict CORS policies"]}:{level:"error",message:"Storage not available. Core features will not work.",recommendations:["Enable cookies and storage","Use a supported browser"]}}}class Gt{constructor(){this.checker=new Vt}getStorageInterface(){const{localStorage:e,indexedDB:t}=this.checker.capabilities;return e&&t?{type:"full",localStorage:this.createSafeLocalStorage(),indexedDB:this.createSafeIndexedDB()}:e?{type:"localStorage_only",localStorage:this.createSafeLocalStorage(),indexedDB:this.createMockIndexedDB()}:{type:"memory_only",localStorage:this.createMemoryStorage(),indexedDB:this.createMockIndexedDB()}}createSafeLocalStorage(){return{getItem:e=>{try{return localStorage.getItem(e)}catch(t){return console.warn(`[SafeStorage] Failed to get ${e}:`,t),null}},setItem:(e,t)=>{try{return localStorage.setItem(e,t),!0}catch(r){return console.warn(`[SafeStorage] Failed to set ${e}:`,r),!1}},removeItem:e=>{try{return localStorage.removeItem(e),!0}catch(t){return console.warn(`[SafeStorage] Failed to remove ${e}:`,t),!1}}}}createSafeIndexedDB(){return{getImageUrl:async e=>{try{const t=await Promise.resolve().then(r.bind(r,337));return await t.default.getImageUrl(e)}catch(t){return console.warn(`[SafeStorage] Failed to get image ${e}:`,t),null}}}}createMemoryStorage(){const e=new Map;return{getItem:t=>e.get(t)||null,setItem:(t,r)=>(e.set(t,r),!0),removeItem:t=>(e.delete(t),!0)}}createMockIndexedDB(){return{getImageUrl:async e=>"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlIG5vdCBhdmFpbGFibGU8L3RleHQ+PC9zdmc+"}}}class Jt{constructor(){this.checker=new Vt}async getSafeImageUrl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return this.getDefaultPlaceholder();if(e.startsWith("data:"))return e;if(!e.startsWith("http"))try{const t=await Promise.resolve().then(r.bind(r,337)),a=await t.default.getImageUrl(e);if(a)return a}catch(a){console.warn("[ImageFallback] Failed to get image from IndexedDB:",a)}if(e.startsWith("http")&&this.checker.capabilities.cors)try{if((await fetch(e,{method:"HEAD"})).ok)return e}catch(a){console.warn("[ImageFallback] CORS check failed:",a)}return t||this.getDefaultPlaceholder()}getDefaultPlaceholder(){return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlIG5vdCBhdmFpbGFibGU8L3RleHQ+PC9zdmc+"}}new Vt,new Gt,new Jt;var Kt=r(179);const Yt=async()=>{try{console.log("[ResetData] Starting data reset...");const e=await Kt.storage.keys();console.log("[ResetData] Found keys:",e);const t=e.filter(e=>e.startsWith("tag.")||e.startsWith("user_")||e.startsWith("artist_")||e.startsWith("portfolio_")||e.startsWith("tag_favorites")||e.startsWith("tag_follows")||e.startsWith("tag_service_data")||e.includes("comment")||e.includes("notification")||e.includes("view")||e.includes("like")||e.includes("review")||e.includes("collaboration")||e.includes("avatar"));console.log("[ResetData] Clearing TAG keys:",t);for(const r of t)await Kt.storage.removeItem(r),console.log(`[ResetData] Removed key: ${r}`);if("undefined"!==typeof window){const e=Object.keys(localStorage).filter(e=>e.startsWith("tag.")||e.startsWith("user_")||e.startsWith("artist_")||e.startsWith("portfolio_")||e.startsWith("tag_favorites")||e.startsWith("tag_follows")||e.startsWith("tag_service_data")||e.includes("comment")||e.includes("notification")||e.includes("view")||e.includes("like")||e.includes("review")||e.includes("collaboration")||e.includes("avatar"));console.log("[ResetData] Clearing localStorage TAG keys:",e);for(const t of e)localStorage.removeItem(t),console.log(`[ResetData] Removed localStorage key: ${t}`)}return console.log("[ResetData] Data reset completed successfully"),{success:!0,message:"Data reset completed"}}catch(e){return console.error("[ResetData] Error during data reset:",e),{success:!1,error:e.message}}},Zt=()=>{try{"undefined"!==typeof window&&(localStorage.setItem("tag.currentUserId","alice"),console.log("[ResetData] Reset current user to alice"))}catch(e){console.error("[ResetData] Error resetting current user:",e)}},Qt=async()=>{try{return console.log("[ResetData] Force reinitializing all data..."),await Yt(),Zt(),"undefined"!==typeof window&&(console.log("[ResetData] Reloading page to reinitialize..."),window.location.reload()),{success:!0,message:"Reinitialization triggered"}}catch(e){return console.error("[ResetData] Error during reinitialization:",e),{success:!1,error:e.message}}};"undefined"!==typeof window&&(window.resetTAGData=Yt,window.resetTAGUser=Zt,window.forceTAGReinit=Qt,console.log("[ResetData] Reset functions added to console:"),console.log("- window.resetTAGData() - \u6e05\u9664\u6240\u6709TAG\u6570\u636e"),console.log("- window.resetTAGUser() - \u91cd\u7f6e\u5f53\u524d\u7528\u6237"),console.log("- window.forceTAGReinit() - \u5f3a\u5236\u91cd\u65b0\u521d\u59cb\u5316"));var Xt=r(420);const er={selectedArtist:null,selectedCollaboration:null,selectedMilestone:null,isLoading:!1,showDetail:!1,navigationHistory:[],scrollPositions:{},isInitialized:!1,comments:[{id:1,user:"Alex Chen",avatar:null,role:"Character Designer",comment:"The character sketches are looking great! I think we should focus more on the facial expressions for the next iteration.",timestamp:"2 hours ago",likes:3},{id:2,user:"Maya Rodriguez",avatar:null,role:"Art Director",comment:"Love the color palette choices. The purple hair really makes the character stand out.",timestamp:"4 hours ago",likes:5},{id:3,user:"Jordan Kim",avatar:null,role:"3D Modeler",comment:"The 3D models are coming along nicely. Can't wait to see the final renders!",timestamp:"1 day ago",likes:2}]},tr="SET_SELECTED_ARTIST",rr="SET_SELECTED_COLLABORATION",ar="SET_SELECTED_MILESTONE",or="SET_LOADING",sr="SET_SHOW_DETAIL",nr="ADD_TO_HISTORY",ir="CLEAR_HISTORY",lr="RESET_STATE",cr="SAVE_SCROLL_POSITION",dr="CLEAR_SCROLL_POSITION",ur="ADD_COMMENT",hr="UPDATE_COMMENT",mr="DELETE_COMMENT",pr="SET_INITIALIZED",gr=(e,t)=>{switch(t.type){case tr:return{...e,selectedArtist:t.payload};case rr:return{...e,selectedCollaboration:t.payload};case ar:return{...e,selectedMilestone:t.payload};case or:return{...e,isLoading:t.payload};case sr:return{...e,showDetail:t.payload};case nr:return{...e,navigationHistory:[...e.navigationHistory,t.payload]};case ir:return{...e,navigationHistory:[]};case lr:return{...er,isInitialized:e.isInitialized,navigationHistory:e.navigationHistory,scrollPositions:e.scrollPositions};case cr:return{...e,scrollPositions:{...e.scrollPositions,[t.payload.path]:{scrollY:t.payload.position,elementInfo:t.payload.elementInfo||null,timestamp:Date.now()}}};case dr:{const{[t.payload]:r,...a}=e.scrollPositions;return{...e,scrollPositions:a}}case ur:return{...e,comments:[t.payload,...e.comments]};case hr:return{...e,comments:e.comments.map(e=>e.id===t.payload.id?t.payload:e)};case mr:return{...e,comments:e.comments.filter(e=>e.id!==t.payload)};case pr:return{...e,isInitialized:t.payload};default:return e}},fr=(0,e.createContext)(),vr=t=>{let{children:r}=t;const[a,o]=(0,e.useReducer)(gr,er),s={setSelectedArtist:(0,e.useCallback)(e=>o({type:tr,payload:e}),[o]),setSelectedCollaboration:(0,e.useCallback)(e=>o({type:rr,payload:e}),[o]),setSelectedMilestone:(0,e.useCallback)(e=>o({type:ar,payload:e}),[o]),setLoading:(0,e.useCallback)(e=>o({type:or,payload:e}),[o]),setShowDetail:(0,e.useCallback)(e=>o({type:sr,payload:e}),[o]),addToHistory:(0,e.useCallback)(e=>o({type:nr,payload:e}),[o]),clearHistory:(0,e.useCallback)(()=>o({type:ir}),[o]),resetState:(0,e.useCallback)(()=>o({type:lr}),[o]),saveScrollPosition:(0,e.useCallback)(function(e,t){return o({type:cr,payload:{path:e,position:t,elementInfo:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null}})},[o]),clearScrollPosition:(0,e.useCallback)(e=>o({type:dr,payload:e}),[o]),addComment:(0,e.useCallback)(e=>o({type:ur,payload:e}),[o]),updateComment:(0,e.useCallback)(e=>o({type:hr,payload:e}),[o]),deleteComment:(0,e.useCallback)(e=>o({type:mr,payload:e}),[o]),setInitialized:(0,e.useCallback)(e=>o({type:pr,payload:e}),[o])};(0,e.useEffect)(()=>{o({type:pr,payload:!0});const e=setTimeout(()=>{a.isInitialized||o({type:pr,payload:!0})},1e3);return()=>clearTimeout(e)},[]);const n=e.useMemo(()=>({state:a,actions:s}),[a,s]);return(0,ht.jsx)(fr.Provider,{value:n,children:r})},xr=()=>{const t=(0,e.useContext)(fr);if(!t)throw new Error("useAppContext must be used within an AppProvider");return t};function br(){const{state:e}=xr();return e.isLoading?(0,ht.jsx)("div",{className:"fixed inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50",children:(0,ht.jsxs)("div",{className:"text-center",children:[(0,ht.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-tag-blue mx-auto mb-4"}),(0,ht.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):null}function yr(){const{pathname:t}=Z(),r=(0,e.useRef)(t);return(0,e.useEffect)(()=>{r.current!==t&&("/"!==t&&window.scrollTo(0,0),r.current=t)},[t]),null}function wr(){const[t,r]=(0,e.useState)("Latest"),[a,o]=(0,e.useState)([]),[s,n]=(0,e.useState)([]);return(0,ht.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,ht.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filters"}),(0,ht.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,ht.jsx)("button",{onClick:()=>{const e=new URLSearchParams;e.append("sort",t.toLowerCase()),a.length>0&&e.append("categories",a.join(",")),s.length>0&&e.append("software",s.join(","));const r=`/major-aggregation?${e.toString()}`;window.open(r,"_blank")},disabled:0===a.length&&0===s.length,className:"flex-1 px-3 py-1.5 text-sm rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-1 "+(0===a.length&&0===s.length?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-tag-blue text-white hover:bg-blue-600 focus:ring-tag-blue"),children:"Apply"}),(0,ht.jsx)("button",{onClick:()=>{r("Latest"),o([]),n([]),console.log("Clear all filters - Reset to default state")},className:"flex-1 px-3 py-1.5 bg-gray-100 text-gray-600 text-sm rounded-md hover:bg-gray-200 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-1",children:"Clear"})]}),(0,ht.jsxs)("div",{className:"mb-6",children:[(0,ht.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Sort By"}),(0,ht.jsxs)("select",{value:t,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue",children:[(0,ht.jsx)("option",{value:"Latest",children:"Latest"}),(0,ht.jsx)("option",{value:"Popular",children:"Popular"})]})]}),(0,ht.jsxs)("div",{className:"mb-6",children:[(0,ht.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Major"}),(0,ht.jsx)("div",{className:"space-y-2",children:["Accessory Design","Acting","Advertising","Animation","Architecture","Art History","Creative Business Leadership","Fashion Design","Fibers","Film","Film/Television","Fine Art","Game/ITGM","Graphic Design","Industrial Design","Illustration","Interior Design","Jewelry","Motion Design","Painting","Photography","Service Design","Sequential Art","UI/UX","Visual Effects"].map(e=>(0,ht.jsxs)("label",{className:"flex items-center",children:[(0,ht.jsx)("input",{type:"checkbox",checked:a.includes(e),onChange:()=>(e=>{o(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(e),className:"h-4 w-4 text-tag-blue focus:ring-tag-blue border-gray-300 rounded"}),(0,ht.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:e})]},e))})]}),(0,ht.jsxs)("div",{className:"mb-6",children:[(0,ht.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Software"}),(0,ht.jsx)("div",{className:"space-y-2",children:["3D-Coat","3ds Max","After Effects","Blender","Cinema 4D","DaVinci Resolve","Figma","Gaea","Houdini","Illustrator","InDesign","JavaScript","Maya","Nuke","Photoshop","Python","Substance Designer","Substance Painter","Unity","Unreal Engine","ZBrush"].map(e=>(0,ht.jsxs)("label",{className:"flex items-center",children:[(0,ht.jsx)("input",{type:"checkbox",checked:s.includes(e),onChange:()=>(e=>{n(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(e),className:"h-4 w-4 text-tag-blue focus:ring-tag-blue border-gray-300 rounded"}),(0,ht.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:e})]},e))})]})]})}function jr(e){let{options:t,value:r,onChange:a,placeholder:o,name:s,...n}=e;return(0,ht.jsxs)("div",{className:"relative",children:[(0,ht.jsxs)("select",{value:r,onChange:a,name:s,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 pr-10 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple appearance-none",...n,children:[o&&(0,ht.jsx)("option",{value:"",children:o}),t.map((e,t)=>(0,ht.jsx)("option",{value:e.value,children:e.label},t))]}),(0,ht.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,ht.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})}function kr(){return(0,ht.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center",children:(0,ht.jsxs)("div",{className:"text-center",children:[(0,ht.jsxs)("div",{className:"mb-8",children:[(0,ht.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"TAG"}),(0,ht.jsx)("p",{className:"text-gray-600 mt-2",children:"Loading your creative world..."})]}),(0,ht.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,ht.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full animate-bounce"}),(0,ht.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,ht.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),(0,ht.jsx)("p",{className:"text-sm text-gray-500 mt-6",children:"Initializing application..."})]})})}const Nr=e=>{let{isOpen:t,onClose:r,errors:a,title:o="Please Complete Required Fields"}=e;return t?(0,ht.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,ht.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),(0,ht.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden",children:[(0,ht.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 px-6 py-4",children:(0,ht.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ht.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ht.jsx)("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:(0,ht.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,ht.jsx)("h3",{className:"text-lg font-semibold text-white",children:o})]}),(0,ht.jsx)("button",{onClick:r,className:"text-white/80 hover:text-white transition-colors",children:(0,ht.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,ht.jsx)("div",{className:"px-6 py-6",children:(0,ht.jsxs)("div",{className:"space-y-4",children:[(0,ht.jsx)("p",{className:"text-gray-700 text-sm leading-relaxed",children:"Please complete the following required fields to continue:"}),(0,ht.jsx)("div",{className:"space-y-2",children:Array.isArray(a)?a.map((e,t)=>(0,ht.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:[(0,ht.jsx)("div",{className:"flex-shrink-0 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center mt-0.5",children:(0,ht.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ht.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),(0,ht.jsx)("span",{className:"text-sm text-red-700 font-medium",children:e})]},t)):(0,ht.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:[(0,ht.jsx)("div",{className:"flex-shrink-0 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center mt-0.5",children:(0,ht.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ht.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),(0,ht.jsx)("span",{className:"text-sm text-red-700 font-medium",children:a})]})})]})}),(0,ht.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:(0,ht.jsx)("button",{onClick:r,className:"w-full bg-gradient-to-r from-purple-600 to-purple-700 text-white font-semibold py-3 px-6 rounded-lg hover:from-purple-700 hover:to-purple-800 transition-all duration-200 transform hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2",children:"Got it, I'll fix these"})})]})]}):null},Cr=e=>{let{user:t,currentMockUser:r,showDropdown:a,onToggle:o,onLogoutClick:s,unreadCount:n=0,dropdownRef:i,className:l=""}=e;const c=bt(t),d=ee();return(0,ht.jsxs)("div",{className:`relative ${l}`,ref:i,"data-navbar-dropdown":!0,children:[(0,ht.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,ht.jsx)(wt,{user:t,currentMockUser:r,className:"hover:opacity-80 transition-opacity duration-200 cursor-pointer",onClick:()=>{c&&d("/artist/me")}}),c&&(0,ht.jsx)("button",{onClick:o,className:"flex items-center text-gray-700 hover:text-gray-900 transition-colors duration-200 cursor-pointer",children:(0,ht.jsx)("svg",{className:"w-4 h-4 self-center transition-transform duration-200 "+(a?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),c&&a&&(0,ht.jsxs)("div",{className:"absolute right-0 mt-2 w-40 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200",children:[(0,ht.jsxs)(at,{to:"/settings/edit-profile",className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200",children:[(0,ht.jsxs)("svg",{className:"w-4 h-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Settings"]}),(0,ht.jsxs)(at,{to:"/notifications",className:"flex items-center justify-between w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200",children:[(0,ht.jsxs)("div",{className:"flex items-center",children:[(0,ht.jsx)("svg",{className:"w-4 h-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),(0,ht.jsx)("span",{children:"Notifications"})]}),(0,ht.jsx)(Wt,{unreadCount:n})]}),(0,ht.jsxs)("button",{onClick:s,className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 border-t border-gray-100",children:[(0,ht.jsx)("svg",{className:"w-4 h-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})]})]})},Sr=t=>{const[r,a]=(0,e.useState)(0),[o,s]=(0,e.useState)(null);(0,e.useEffect)(()=>{s((0,ut.HW)())},[]);const[n,i]=(0,e.useState)(!1),l=async()=>{try{const e=await Ht.lY.getUserNotifications((0,ut.WR)());if(e.success){const t=(e.data||[]).filter(e=>!e.isRead).length;a(t)}else console.error("Error loading unread notifications:",e.error),a(0)}catch(e){console.error("Error loading unread notifications:",e),a(0)}};return(0,e.useEffect)(()=>{let e=!0;(async()=>{e&&await l()})();const t=t=>{var r;const a=null===t||void 0===t||null===(r=t.detail)||void 0===r?void 0:r.userId;a&&a!==(0,ut.WR)()||e&&setTimeout(()=>{e&&l()},100)},r=t=>{var r;(null===t||void 0===t||null===(r=t.detail)||void 0===r?void 0:r.userId)&&e&&(s((0,ut.HW)()),setTimeout(()=>{e&&l()},100))};return window.addEventListener("notif:unreadChanged",t),window.addEventListener("user:changed",r),()=>{e=!1,window.removeEventListener("notif:unreadChanged",t),window.removeEventListener("user:changed",r)}},[]),(0,e.useEffect)(()=>{const e=e=>{if(n){e.target.closest("[data-navbar-dropdown]")||i(!1)}};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[n]),{unreadCount:r,currentMockUser:o,showDropdown:n,setUnreadCount:a,setCurrentMockUser:s,setShowDropdown:i,loadUnreadCount:l,toggleDropdown:()=>i(!n),closeDropdown:()=>i(!1)}},_r=()=>{const e=ee(),t=Z(),{actions:r,state:a}=xr(),o=e=>{const t=a.scrollPositions[e];void 0!==t&&setTimeout(()=>{window.scrollTo({top:t,behavior:"instant"})},100)};return{navigateToWork:function(a){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"gallery";r.setLoading(!0),r.addToHistory({path:t.pathname,from:o}),"/"===t.pathname&&r.saveScrollPosition("/",window.scrollY),setTimeout(()=>{r.setShowDetail(!0),r.setLoading(!1),e(`/work/${a}`,{state:{from:o}}),window.scrollTo(0,0)},300)},navigateToArtist:function(a){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"gallery",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Artists";if(r.setLoading(!0),r.setSelectedArtist(a),r.addToHistory({path:t.pathname,from:o,activeTab:s}),"/"===t.pathname){var n;const e=window.scrollY,t=document.querySelector(`[data-artist-id="${a}"]`),o=t?{id:a,type:"artist",scrollY:e,elementRect:t.getBoundingClientRect?t.getBoundingClientRect():null,elementIndex:(null===(n=t.dataset)||void 0===n?void 0:n.index)||null}:null;console.log("[Navigation] Saving scroll position:",e),console.log("[Navigation] Saving element info:",o),r.saveScrollPosition("/",e,o)}setTimeout(()=>{r.setLoading(!1);e(`/artist/${a}`),window.scrollTo(0,0)},300)},navigateToTAGMe:()=>{r.saveScrollPosition("/tag",window.scrollY),r.addToHistory({from:"tagme",path:"/tagme",activeTab:"Collaborations"}),e("/tagme"),setTimeout(()=>{o("/tagme")},100)},navigateToMilestone:function(a){"/tagme"===t.pathname&&r.saveScrollPosition("/tagme-Milestones",window.scrollY),r.setLoading(!0),r.setSelectedMilestone(a),r.addToHistory({path:t.pathname,from:"tagme",activeTab:"Milestones"}),setTimeout(()=>{r.setShowDetail(!0),r.setLoading(!1);const t=`/tagme/milestone/${a.id}`;e(t,{state:{milestone:a}}),window.scrollTo(0,0)},300)},navigateToCollaboration:a=>{"/tagme"===t.pathname&&r.saveScrollPosition("/tagme-Collaborations",window.scrollY),r.setLoading(!0),r.setSelectedCollaboration(a),r.addToHistory({path:t.pathname,from:"tagme",activeTab:"Collaborations"});const o=`/tagme/collaboration/${a.id}`;e(o,{state:{project:a}}),setTimeout(()=>{r.setLoading(!1)},100)},goBack:()=>{const t=a.navigationHistory.length>0?a.navigationHistory[a.navigationHistory.length-1]:{path:"/",from:"home"};if(console.log("[Navigation] goBack - previousHistory:",t),"artists"===t.from)return console.log("[Navigation] Returning from artists section"),r.setLoading(!0),e("/",{state:{from:"artist-profile",activeTab:"Artists",scrollToGallery:!0}}),void setTimeout(()=>{r.setLoading(!1)},100);"/tagme"===t.path||"/"===t.path?(r.setLoading(!0),e(-1),setTimeout(()=>{r.setLoading(!1)},100)):e(-1)},goHome:()=>{r.resetState(),e("/"),window.scrollTo(0,0)},navigateToGallery:()=>{if(r.addToHistory({path:t.pathname,from:"gallery",fromNavbar:!0,activeTab:"Works"}),"/"===t.pathname){console.log("[Navigation] Already on homepage, scrolling to gallery section");const e=document.querySelectorAll("section");console.log("[Navigation] All sections found:",e.length),e.forEach((e,t)=>{var r;console.log(`[Navigation] Section ${t}:`,{className:e.className,dataSection:e.getAttribute("data-section"),textContent:(null===(r=e.textContent)||void 0===r?void 0:r.substring(0,50))+"..."})});const t=document.querySelector('[data-section="gallery"]');if(console.log("[Navigation] Gallery section found:",!!t),t){const e=t.getBoundingClientRect();console.log("[Navigation] Gallery section position:",{top:e.top,bottom:e.bottom,height:e.height});const r=window.pageYOffset+e.top-80;console.log("[Navigation] Scrolling to position:",r),window.scrollTo({top:r,behavior:"smooth"}),console.log("[Navigation] Scrolled to gallery section")}else console.warn("[Navigation] Gallery section not found, scrolling to top"),window.scrollTo(0,0)}else console.log("[Navigation] Navigating to homepage first, then scrolling to gallery"),r.resetState(),e("/"),setTimeout(()=>{const e=document.querySelector('[data-section="gallery"]');if(e){const t=e.getBoundingClientRect(),r=window.pageYOffset+t.top-80;window.scrollTo({top:r,behavior:"smooth"}),console.log("[Navigation] Scrolled to gallery section after navigation")}else console.warn("[Navigation] Gallery section not found after navigation"),window.scrollTo(0,0)},300)},scrollToElement:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64;setTimeout(()=>{const r=document.querySelector(e);if(r){const e=r.getBoundingClientRect(),a=window.pageYOffset+e.top-t;window.scrollTo({top:a,behavior:"instant"})}else window.scrollTo(0,0)},100)},saveCurrentScrollPosition:()=>{const e=window.pageYOffset;r.saveScrollPosition(t.pathname,e)},restoreScrollPosition:o}},Er=t=>{let{state:r,setters:a,user:o}=t;const s=ee(),{navigateToTAGMe:n,goHome:i,navigateToGallery:l,navigateToArtist:c}=_r(),{logout:d}=pt(),u=(0,e.useCallback)(e=>{if(e.stopPropagation(),!bt(o))return void s("/login");const t=e.target,n="IMG"===t.tagName||t.closest("img");"svg"===t.tagName||t.closest("svg");n?(console.log("\ud83d\udd0d [handleDropdownToggle] Avatar clicked, navigating to /me"),s("/me")):a.setShowDropdown(!r.showDropdown)},[o,r.showDropdown,a,s,c]),h=(0,e.useCallback)(()=>{a.setShowDropdown(!1),s("/settings/edit-profile")},[a,s]),m=(0,e.useCallback)(()=>{a.setShowDropdown(!1),s("/notifications")},[a,s]),p=(0,e.useCallback)(()=>{a.setShowDropdown(!1),d(),s("/login")},[a,d,s]),g=(0,e.useCallback)(()=>{s("/upload/guidelines")},[s]),f=(0,e.useCallback)(()=>{n()},[n]),v=(0,e.useCallback)(()=>{l()},[l]);return{handleLogoClick:(0,e.useCallback)(()=>{i()},[i]),handleUploadClick:g,handleTAGMeClick:f,handleGalleryClick:v,handleSearchInput:(0,e.useCallback)(e=>{const t=e.target.value;console.log("Search input:",t)},[]),handleDropdownToggle:u,handleSettingsClick:h,handleNotificationsClick:m,handleLogoutClick:p}},Pr=()=>{const{user:t,loading:r}=pt(),a=(0,e.useRef)(null),o=Sr(t),s=Er({state:o,setters:{setShowDropdown:o.setShowDropdown,setUnreadCount:o.setUnreadCount,setCurrentMockUser:o.setCurrentMockUser},user:t}),n=t||{id:"guest",name:"Guest",avatar:null};return(0,ht.jsx)("nav",{className:"fixed top-0 left-0 right-0 bg-white shadow-sm z-50",children:(0,ht.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,ht.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,ht.jsx)(ft,{onClick:s.handleLogoClick}),(0,ht.jsx)("div",{className:"absolute left-1/2 transform -translate-x-1/2",children:(0,ht.jsxs)("button",{onClick:s.handleUploadClick,className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-full text-sm font-semibold hover:from-blue-600 hover:to-purple-600 transition-all duration-200 flex items-center shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","aria-label":"Upload Work",children:[(0,ht.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Upload Work"]})}),(0,ht.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ht.jsx)("button",{onClick:s.handleGalleryClick,onMouseDown:e=>{1===e.button&&(e.preventDefault(),window.open("/","_blank"))},className:"bg-tag-blue text-white px-4 py-2 rounded-md text-sm font-semibold hover:bg-blue-700 transition-colors duration-200 min-w-[80px] text-center",children:"Gallery"}),(0,ht.jsx)(at,{to:"/tagme",className:"bg-tag-purple text-white px-4 py-2 rounded-md text-sm font-semibold hover:bg-purple-700 transition-colors duration-200 min-w-[80px] text-center",children:"TAGMe"}),!r&&(0,ht.jsx)(Cr,{user:n,currentMockUser:o.currentMockUser,showDropdown:o.showDropdown,onToggle:s.handleDropdownToggle,onSettingsClick:s.handleSettingsClick,onNotificationsClick:s.handleNotificationsClick,onLogoutClick:s.handleLogoutClick,unreadCount:o.unreadCount,dropdownRef:a}),r&&(0,ht.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-200 animate-pulse"})]})]})})})},Ir=e=>[{id:1,title:"Brand Identity with Studio X",image:null},{id:2,title:"Interactive Web Experience",image:null},{id:3,title:"3D Character Animation",image:null}].find(t=>t.id.toString()===e),Ar=e=>{let{favorite:t,isOwnProfile:a=!1,onRemove:o}=e;ee();return(0,ht.jsxs)("div",{className:"relative aspect-[4/3] bg-tag-purple rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 overflow-hidden",children:[(0,ht.jsx)(at,{to:`/collab/${t.itemId}`,className:"block w-full h-full",children:(0,ht.jsx)("img",{src:(e=>{console.log("[FavoriteCollabCard] Getting image for itemId:",e,"type:",typeof e);const t=Ir(e),a=(async e=>{const t=Ir(e);if(!t)return null;if(t.heroImage)try{const e=await Promise.resolve().then(r.bind(r,337));return await e.default.getImageUrl(t.heroImage)}catch(a){console.warn(`[Favorites] Failed to get collaboration image: ${t.heroImage}`,a)}return t.image?t.image:null})(e);return console.log("[FavoriteCollabCard] Selected collaboration:",t),console.log("[FavoriteCollabCard] Selected image URL:",a),a})(t.itemId),alt:"Collaboration",className:"w-full h-full object-cover"})}),(0,ht.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-2 bg-tag-purple"}),a&&(0,ht.jsx)("button",{onClick:e=>{e.stopPropagation(),o()},className:"absolute top-2 right-2 w-8 h-8 bg-white/80 hover:bg-white rounded-full flex items-center justify-center transition-colors duration-200",title:"Remove from favorites",children:(0,ht.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},Tr=()=>{ee();const e="No favorites yet",t="Start Exploring";return(0,ht.jsxs)("div",{className:"text-center py-12",children:[(0,ht.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,ht.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})}),(0,ht.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-6",children:e}),(0,ht.jsx)(at,{to:"/",className:"inline-block px-6 py-3 bg-tag-blue text-white rounded-lg hover:bg-blue-700 transition-colors duration-200",children:t})]})},Lr=()=>(0,ht.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,t)=>(0,ht.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden animate-pulse",children:[(0,ht.jsx)("div",{className:"w-full h-48 bg-gray-200"}),(0,ht.jsxs)("div",{className:"p-4",children:[(0,ht.jsx)("div",{className:"h-5 bg-gray-200 rounded mb-2"}),(0,ht.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-3"}),(0,ht.jsxs)("div",{className:"flex items-center mb-3",children:[(0,ht.jsx)("div",{className:"w-6 h-6 bg-gray-200 rounded-full mr-2"}),(0,ht.jsx)("div",{className:"h-4 bg-gray-200 rounded w-24"})]}),(0,ht.jsxs)("div",{className:"space-y-2 mb-3",children:[(0,ht.jsx)("div",{className:"h-3 bg-gray-200 rounded"}),(0,ht.jsx)("div",{className:"h-3 bg-gray-200 rounded w-5/6"})]}),(0,ht.jsxs)("div",{className:"flex gap-1 mb-3",children:[(0,ht.jsx)("div",{className:"w-12 h-6 bg-gray-200 rounded-full"}),(0,ht.jsx)("div",{className:"w-16 h-6 bg-gray-200 rounded-full"}),(0,ht.jsx)("div",{className:"w-14 h-6 bg-gray-200 rounded-full"})]}),(0,ht.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ht.jsxs)("div",{className:"flex space-x-4",children:[(0,ht.jsx)("div",{className:"w-12 h-4 bg-gray-200 rounded"}),(0,ht.jsx)("div",{className:"w-16 h-4 bg-gray-200 rounded"})]}),(0,ht.jsx)("div",{className:"w-16 h-8 bg-gray-200 rounded"})]})]})]},t))});var Dr=r(200);const Mr=()=>{const[t,r]=(0,e.useState)({}),[a,o]=(0,e.useState)(!0),[s,n]=(0,e.useState)(null);(0,e.useEffect)(()=>{(async()=>{try{o(!0),n(null);const e=await(0,Dr.S5)();if(e.success){const t={};e.data.forEach(e=>{var r;e&&e.id&&(t[e.id]={id:e.id,title:e.title||"Untitled",artist:(null===(r=e.profiles)||void 0===r?void 0:r.full_name)||"Unknown Artist",image:e.thumbnailPath||e.imagePaths&&e.imagePaths[0]||"",category:e.category||"design",tags:e.tags||[],description:e.description||"",createdAt:e.createdAt||(new Date).toISOString()})}),r(t),console.log("[useWorkData] Loaded works data:",t)}else n(e.error||"Failed to load works data"),console.error("[useWorkData] Failed to load works:",e.error)}catch(s){console.error("[useWorkData] Error loading works:",s),n(s.message||"Failed to load works data")}finally{o(!1)}})()},[]);return{worksData:t,loading:a,error:s,getWorkById:e=>{if(!e)return null;const r=t[e];if(r)return console.log("[useWorkData] Found real work data for:",e,r),r;const a=[{id:1,title:"Explosive Energy",artist:"Alex Chen",image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=400&fit=crop",category:"Visual Effects"},{id:2,title:"Dark Knight",artist:"Sarah Kim",image:"https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400&h=400&fit=crop",category:"Game Design"},{id:3,title:"Mobile UI Design",artist:"Mike Johnson",image:"https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=400&h=400&fit=crop",category:"UI/UX"},{id:4,title:"Enchanted Forest",artist:"Emma Wilson",image:"https://images.unsplash.com/photo-1489599435384-d5f1a131c7dc?w=400&h=400&fit=crop",category:"Illustration"},{id:5,title:"Digital Sculpture",artist:"David Lee",image:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=400&fit=crop",category:"Fine Art"},{id:6,title:"Brand Identity",artist:"Lisa Wang",image:"https://images.unsplash.com/photo-1541961017774-22349e4a1262?w=400&h=400&fit=crop",category:"Graphic Design"}],o=a.find(t=>t.id.toString()===e);if(o)return console.log("[useWorkData] Found default work for simple ID:",e,o),o;if(e&&e.startsWith("mock_")){const t=a[Math.abs(e.split("_")[1]?parseInt(e.split("_")[1]):0)%a.length],r={id:e,title:t.title,artist:t.artist,image:t.image,category:t.category};return console.log("[useWorkData] Created mock work for complex ID:",e,r),r}return console.warn("[useWorkData] No work found for itemId:",e),null}}},Rr=e=>{let{favorite:t,isOwnProfile:r=!1,onRemove:a}=e;ee();const{getWorkById:o,loading:s}=Mr(),n=o(t.itemId);return(0,ht.jsxs)("div",{className:"relative aspect-[4/3] bg-tag-blue rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 overflow-hidden",children:[(0,ht.jsx)(at,{to:`/work/${t.itemId}`,className:"block w-full h-full",children:(0,ht.jsx)("img",{src:(null===n||void 0===n?void 0:n.image)||"/assets/placeholder.svg",alt:(null===n||void 0===n?void 0:n.title)||"Work",className:"w-full h-full object-cover",onError:e=>{console.error("[FavoriteWorkCard] Image failed to load:",e.target.src),e.target.src="/assets/placeholder.svg"},onLoad:()=>console.log("[FavoriteWorkCard] Image loaded successfully:",null===n||void 0===n?void 0:n.image)})}),(0,ht.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-2 bg-tag-blue"}),r&&(0,ht.jsx)("button",{onClick:e=>{e.stopPropagation(),a()},className:"absolute top-2 right-2 w-8 h-8 bg-white/80 hover:bg-white rounded-full flex items-center justify-center transition-colors duration-200",title:"Remove from favorites",children:(0,ht.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})};r(945);const $r=t=>{let{isOwnProfile:r=!1}=t;const{favorites:a,loading:o,error:s,pagination:n,handleLoadMore:i,handleRemoveFavorite:l}=(()=>{const[t,r]=(0,e.useState)([]),[a,o]=(0,e.useState)(!0),[s,n]=(0,e.useState)(null),[i,l]=(0,e.useState)({cursor:null,hasMore:!1,total:0}),c=(0,e.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{o(!0),n(null);const t={type:"all",cursor:e?null:i.cursor,limit:12};console.log("[Favorites] Loading favorites with params:",t);const a=await Ht.zF.getFavorites(t);if(a.success){const t=a.data.items;console.log("[Favorites] Loaded favorites:",t),r(e?t:e=>[...e,...t]),l({cursor:a.data.pagination.cursor,hasMore:a.data.pagination.hasMore,total:a.data.pagination.total})}else n("Failed to load favorites")}catch(t){console.error("Error loading favorites:",t),n(t.message||"Failed to load favorites")}finally{o(!1)}},[]);(0,e.useEffect)(()=>{c(!0)},[c]);const d=(0,e.useCallback)(()=>{!a&&i.hasMore&&c(!1)},[a,i.hasMore,c]),u=(0,e.useCallback)(e=>{r(t=>t.filter(t=>t.id!==e)),l(e=>({...e,total:Math.max(0,e.total-1)}))},[]);return{favorites:t,loading:a,error:s,pagination:i,handleLoadMore:d,handleRemoveFavorite:u,refresh:()=>c(!0)}})(),{handleRemoveFavorite:c}={handleRemoveFavorite:(0,e.useCallback)(async e=>{try{const t=await Ht.zF.removeFavoriteById(e);return t.success?(console.log("Favorite removed successfully"),!0):(console.error("Failed to remove favorite:",t.error),!1)}catch(s){return console.error("Error removing favorite:",s),!1}},[]),batchCheckFavoriteStatus:(0,e.useCallback)(async e=>{try{const t=e.map(e=>({itemType:e.type,itemId:e.id})),r=await Ht.zF.batchCheckFavoriteStatus(t);return r.success?r.data:(console.error("Failed to check favorite status:",r.error),{})}catch(s){return console.error("Error checking favorite status:",s),{}}},[])},{loading:d}=Mr(),u=e=>"work"===e.itemType?(0,ht.jsx)(Rr,{favorite:e,isOwnProfile:r,onRemove:async()=>{await c(e.id)&&l(e.id)}},e.id):"collaboration"===e.itemType?(0,ht.jsx)(Ar,{favorite:e,isOwnProfile:r,onRemove:async()=>{await c(e.id)&&l(e.id)}},e.id):null;return(0,ht.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,ht.jsx)("div",{className:"mb-6",children:(0,ht.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Favorites"})}),o||d?(0,ht.jsx)(Lr,{}):s?(0,ht.jsxs)("div",{className:"text-center py-8",children:[(0,ht.jsxs)("p",{className:"text-red-600",children:["Failed to load favorites: ",s]}),(0,ht.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-tag-blue text-white rounded-lg hover:bg-blue-700",children:"Retry"})]}):0===a.length?(0,ht.jsx)(Tr,{}):(0,ht.jsxs)(ht.Fragment,{children:[(0,ht.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(u)}),n.hasMore&&(0,ht.jsx)("div",{className:"text-center mt-8",children:(0,ht.jsx)("button",{onClick:i,disabled:o,className:"px-6 py-3 bg-tag-blue text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Loading...":"Load More"})})]})]})};var Fr=r(560);const Or=e=>{let{artist:t,artworks:r=[],isFollowing:a,followersCount:o,followingCount:s,isOwnProfile:n,onBackClick:i,onEditProfileClick:l,onPreviewAsVisitorClick:c,onBackToOwnerViewClick:d,toggleFollow:u,onFollowersClick:h,onFollowingClick:m,from:p="gallery",className:g=""}=e;return(0,ht.jsxs)("div",{className:`${g}`,children:[(0,ht.jsx)("div",{className:"border-b border-gray-200",children:(0,ht.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,ht.jsxs)("button",{onClick:i,className:"flex items-center py-4 text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[(0,ht.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),(()=>{switch(p){case"artists":return"Back to Artists";case"gallery":default:return"Back to Gallery";case"tagme":return"Back to TAGMe";case"search":return"Back to Search"}})()]})})}),(0,ht.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-8",children:(0,ht.jsx)("div",{className:"pb-8 border-b border-gray-200",children:(0,ht.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-start",children:[(0,ht.jsxs)("div",{className:"flex items-center mb-6 lg:mb-0",children:[(0,ht.jsx)("img",{src:t.avatar,alt:t.name,className:"w-20 h-20 rounded-full mr-6"}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:t.name}),(0,ht.jsx)("div",{className:"flex items-center gap-3",children:(0,ht.jsx)("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:t.title})})]})]}),(0,ht.jsxs)("div",{className:"flex items-center gap-8 mb-6 lg:mb-0 lg:ml-16",children:[(0,ht.jsxs)("div",{className:"text-left",children:[(0,ht.jsx)("div",{className:"text-xl font-bold text-gray-900",children:r.length}),(0,ht.jsx)("div",{className:"text-sm text-gray-600",children:"Works"})]}),(0,ht.jsxs)("div",{className:"text-left cursor-pointer hover:opacity-80 transition-opacity duration-200",onClick:m,role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),m())},children:[(0,ht.jsx)("div",{className:"text-xl font-bold text-gray-900",children:s||0}),(0,ht.jsx)("div",{className:"text-sm text-gray-600",children:"Following"})]}),(0,ht.jsxs)("div",{className:"text-left cursor-pointer hover:opacity-80 transition-opacity duration-200",onClick:h,role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),h())},children:[(0,ht.jsx)("div",{className:"text-xl font-bold text-gray-900",children:o}),(0,ht.jsx)("div",{className:"text-sm text-gray-600",children:"Followers"})]})]}),(0,ht.jsx)("div",{className:"flex items-center gap-3 lg:ml-auto",children:n?(0,ht.jsxs)(ht.Fragment,{children:[(0,ht.jsxs)("button",{onClick:c,className:"px-4 py-2 rounded-md font-medium transition-colors duration-200 bg-blue-500 text-white hover:bg-blue-600 flex items-center gap-2",children:[(0,ht.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Preview as Visitor"]}),(0,ht.jsxs)("button",{onClick:l,className:"px-4 py-2 rounded-md font-medium transition-colors duration-200 bg-purple-500 text-white hover:bg-purple-600 flex items-center gap-2",children:[(0,ht.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit Profile"]})]}):(0,ht.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),u()},className:(0,Fr.fO)(a),children:a?"Following":"Follow"})})]})})})]})},Ur=e=>{if(!e||!e.trim())return!1;if("#"===e||"http://#"===e||"https://#"===e)return!1;try{const t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch{return!1}},zr=(e,t)=>{Ur(t)?window.open(t,"_blank","noopener,noreferrer"):console.warn(`Invalid ${e} URL:`,t)},Wr=e=>{var t,r,a,o,s;let{artist:n,className:i=""}=e;return console.log("[ArtistSidebar] Artist data:",{artistId:null===n||void 0===n?void 0:n.id,artistName:null===n||void 0===n?void 0:n.name,socialLinks:null===n||void 0===n?void 0:n.socialLinks}),(0,ht.jsx)("div",{className:`lg:w-80 flex-shrink-0 ${i}`,children:(0,ht.jsxs)("div",{className:"pb-8",children:[(0,ht.jsxs)("div",{className:"mb-6",children:[n.school&&(0,ht.jsxs)("div",{className:"mb-3",children:[(0,ht.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"School:"}),(0,ht.jsx)("p",{className:"text-gray-600 mt-1",children:n.school})]}),n.pronouns&&(0,ht.jsxs)("div",{className:"mb-3",children:[(0,ht.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Pronouns:"}),(0,ht.jsx)("p",{className:"text-gray-600 mt-1",children:n.pronouns})]}),(n.majors&&n.majors.length>0||n.minors&&n.minors.length>0)&&(0,ht.jsxs)("div",{className:"mb-3",children:[(0,ht.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Major & Minor:"}),(0,ht.jsxs)("div",{className:"flex flex-wrap gap-1 mt-1",children:[null===(t=n.majors)||void 0===t?void 0:t.map((e,t)=>(0,ht.jsx)("span",{className:"bg-purple-100 text-purple-700 text-xs px-2 py-1 rounded-full",children:e},`major-${t}`)),null===(r=n.minors)||void 0===r?void 0:r.map((e,t)=>(0,ht.jsx)("span",{className:"bg-purple-100 text-purple-700 text-xs px-2 py-1 rounded-full",children:e},`minor-${t}`))]})]})]}),(0,ht.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"About"}),(0,ht.jsx)("p",{className:"text-gray-600 mb-4",children:n.bio}),(0,ht.jsx)("h4",{className:"font-bold text-gray-900 mb-2",children:"Skills"}),(0,ht.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:n.skills.map((e,t)=>(0,ht.jsx)("span",{className:"bg-gray-100 text-gray-700 text-sm px-3 py-1 rounded-full",children:e},t))}),(0,ht.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"Connect"}),(0,ht.jsxs)("div",{className:"flex gap-3",children:[(null===(a=n.socialLinks)||void 0===a?void 0:a.discord)&&Ur(n.socialLinks.discord)&&(0,ht.jsx)("button",{onClick:()=>zr("discord",n.socialLinks.discord),className:"text-gray-600 hover:text-gray-900 transition-colors duration-200",title:"Discord",children:(0,ht.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.019 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1568 2.4189Z"})})}),(null===(o=n.socialLinks)||void 0===o?void 0:o.instagram)&&Ur(n.socialLinks.instagram)&&(0,ht.jsx)("button",{onClick:()=>zr("instagram",n.socialLinks.instagram),className:"text-gray-600 hover:text-gray-900 transition-colors duration-200",title:"Instagram",children:(0,ht.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),(null===(s=n.socialLinks)||void 0===s?void 0:s.portfolio)&&Ur(n.socialLinks.portfolio)&&(0,ht.jsx)("button",{onClick:()=>zr("portfolio",n.socialLinks.portfolio),className:"text-gray-600 hover:text-gray-900 transition-colors duration-200",title:"Portfolio",children:(0,ht.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})})})]}),n.socialLinks.otherLinks&&n.socialLinks.otherLinks.length>0&&n.socialLinks.otherLinks.some(e=>Ur(e.url))&&(0,ht.jsxs)("div",{className:"mt-4",children:[(0,ht.jsx)("h4",{className:"font-bold text-gray-900 mb-2",children:"Other Websites"}),(0,ht.jsx)("div",{className:"space-y-2",children:n.socialLinks.otherLinks.filter(e=>Ur(e.url)).map(e=>(0,ht.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ht.jsx)("div",{className:"flex-shrink-0",children:(0,ht.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})})}),(0,ht.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ht.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.label}),(0,ht.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-800 transition-colors duration-200",children:e.url})]})]},e.id))})]})]})})},Br=t=>{let{artworks:r,onArtworkClick:a,className:o="",isOwnProfile:s=!1}=t;const n=ee(),[i,l]=(0,e.useState)(null);return(0,ht.jsxs)("div",{className:`pb-8 border-b border-gray-200 bg-blue-50 rounded-lg p-6 ${o}`,children:[(0,ht.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-6",children:"Portfolio"}),(0,ht.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(e=>(0,ht.jsx)("div",{onClick:()=>a(e),className:"group cursor-pointer relative",onMouseEnter:()=>l(e.id),onMouseLeave:()=>l(null),children:(0,ht.jsxs)("div",{className:"relative overflow-hidden rounded-lg",children:[(0,ht.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),s&&i===e.id&&(0,ht.jsx)("button",{onClick:t=>(e=>{e.stopPropagation(),n("/settings/edit-profile")})(t,e.id),className:"absolute top-2 right-2 p-2 bg-white bg-opacity-90 hover:bg-opacity-100 text-gray-600 hover:text-blue-600 rounded-full transition-all duration-200 shadow-md z-10",title:"Edit Profile",children:(0,ht.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,ht.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-300 flex items-end",children:(0,ht.jsxs)("div",{className:"p-3 w-full transform translate-y-full group-hover:translate-y-0 transition-transform duration-300",children:[(0,ht.jsx)("h4",{className:"text-white font-medium text-sm",children:e.title}),(0,ht.jsx)("p",{className:"text-gray-200 text-xs",children:e.category})]})})]})},e.id))})]})},qr=t=>{let{collaboration:r,isExpanded:a,onToggle:o,className:s=""}=t;const[n,i]=(0,e.useState)(!1),[l,c]=(0,e.useState)(r.responsibility);return(0,ht.jsxs)("div",{className:`bg-white rounded-lg overflow-hidden shadow-sm ${s}`,children:[(0,ht.jsx)("div",{onClick:()=>o(r.id),className:"p-4 cursor-pointer hover:bg-gray-50 transition-colors duration-200",children:(0,ht.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ht.jsx)("div",{className:"flex-shrink-0",children:(0,ht.jsx)("img",{src:r.image,alt:r.title,className:"w-16 h-16 object-cover rounded-lg"})}),(0,ht.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ht.jsx)("h4",{className:"font-medium text-gray-900 mb-1",children:r.title}),(0,ht.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:r.dateRange}),(0,ht.jsx)("div",{className:"flex items-center gap-2",children:(0,ht.jsxs)("span",{className:(0,Fr.lx)(r.isInitiator),children:[r.role,r.isInitiator&&(0,ht.jsx)("span",{className:"ml-1 text-purple-600",children:"\u2022 Initiator"})]})})]}),(0,ht.jsx)("div",{className:"flex-shrink-0",children:(0,ht.jsx)("svg",{className:"w-5 h-5 text-gray-400 transition-transform duration-200 "+(a?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})}),a&&(0,ht.jsx)("div",{className:"border-t border-gray-200 bg-gray-50",children:(0,ht.jsxs)("div",{className:"p-6 space-y-6",children:[(0,ht.jsxs)("div",{className:"bg-gray-100 rounded-lg p-4 relative",children:[(0,ht.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,ht.jsx)("h5",{className:"text-lg font-semibold text-gray-900",children:"Responsibilities"}),(0,ht.jsx)("button",{onClick:()=>{i(!0)},className:"p-1 text-gray-500 hover:text-gray-700 transition-colors duration-200",title:"Edit responsibilities",children:(0,ht.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]}),n?(0,ht.jsxs)("div",{className:"space-y-3",children:[(0,ht.jsx)("textarea",{value:l,onChange:e=>c(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg text-base text-gray-800 leading-relaxed resize-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:4,placeholder:"Describe your responsibilities in this project..."}),(0,ht.jsxs)("div",{className:"flex gap-2",children:[(0,ht.jsx)("button",{onClick:()=>{console.log("Saving responsibility:",l),i(!1)},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors duration-200 text-sm font-medium",children:"Save"}),(0,ht.jsx)("button",{onClick:()=>{c(r.responsibility),i(!1)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors duration-200 text-sm font-medium",children:"Cancel"})]})]}):(0,ht.jsx)("p",{className:"text-base text-gray-800 leading-relaxed font-normal",children:l})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("h5",{className:"text-base font-semibold text-gray-900 mb-3",children:"Team Feedback"}),(0,ht.jsx)("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm",children:(0,ht.jsxs)("div",{className:"flex items-start gap-4",children:[(0,ht.jsx)("div",{className:"flex-shrink-0",children:(0,ht.jsx)("img",{src:r.partnerAvatar,alt:r.teamFeedback.feedbacker,className:"w-10 h-10 rounded-full"})}),(0,ht.jsxs)("div",{className:"flex-1",children:[(0,ht.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,ht.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:r.teamFeedback.feedbacker}),(0,ht.jsx)("span",{className:"text-xs text-gray-500 font-normal",children:r.teamFeedback.feedbackerRole})]}),(0,ht.jsx)("p",{className:"text-sm text-gray-700 leading-relaxed font-medium",children:r.teamFeedback.content})]})]})})]})]})})]})};var Hr=r(506);const Vr=t=>{let{post:r,className:a="",onDelete:o}=t;const[s,n]=(0,e.useState)(!1),i=r.isDraft;return(0,ht.jsxs)("div",{className:`bg-white rounded-lg shadow-sm overflow-hidden ${a}`,children:[(0,ht.jsxs)("div",{className:"relative",children:[(0,ht.jsx)("img",{src:r.image||"/assets/placeholder.svg",alt:r.title,className:"w-full h-48 object-cover"}),i&&o&&(0,ht.jsx)("button",{onClick:e=>{e.stopPropagation(),n(!0)},className:"absolute top-3 right-3 p-2 bg-white bg-opacity-90 hover:bg-opacity-100 rounded-full shadow-sm transition-all duration-200 hover:scale-110",title:"Delete draft",children:(0,ht.jsx)("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,ht.jsxs)("div",{className:"p-4",children:[(0,ht.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,ht.jsx)("h4",{className:"font-medium text-gray-900",children:r.title}),i&&(0,ht.jsx)("span",{className:"px-2 py-1 text-xs bg-orange-100 text-orange-600 rounded-full",children:"Draft"})]}),(0,ht.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,ht.jsx)("div",{className:"w-6 h-6 bg-gray-300 rounded-full flex-shrink-0"}),(0,ht.jsx)("span",{className:"text-sm text-gray-700",children:r.author}),(0,ht.jsx)("span",{className:"text-sm text-gray-500",children:"\u2022"}),(0,ht.jsx)("span",{className:"text-sm text-gray-500",children:r.date})]}),r.tags&&r.tags.length>0&&(0,ht.jsxs)("div",{className:"flex flex-wrap gap-1",children:[r.tags.slice(0,3).map((e,t)=>(0,ht.jsxs)("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded-full",children:["#",e]},t)),r.tags.length>3&&(0,ht.jsxs)("span",{className:"px-2 py-1 text-xs text-gray-500",children:["+",r.tags.length-3," more"]})]})]}),s&&(0,ht.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e=>{e.stopPropagation()},children:(0,ht.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-sm mx-4",children:[(0,ht.jsxs)("div",{className:"flex items-center mb-4",children:[(0,ht.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center mr-3",children:(0,ht.jsx)("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,ht.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Draft"})]}),(0,ht.jsxs)("p",{className:"text-gray-600 mb-6",children:['Are you sure you want to delete "',r.title,'"? This action cannot be undone.']}),(0,ht.jsxs)("div",{className:"flex gap-3",children:[(0,ht.jsx)("button",{onClick:e=>{e.stopPropagation(),n(!1)},className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors duration-200",children:"Cancel"}),(0,ht.jsx)("button",{onClick:e=>{e.stopPropagation(),o&&o(r.id),n(!1)},className:"flex-1 px-4 py-2 text-white bg-red-500 hover:bg-red-600 rounded-md transition-colors duration-200",children:"Delete"})]})]})})]})},Gr=e=>{let{activeTab:t,onTabChange:r,className:a=""}=e;return(0,ht.jsx)("div",{className:`bg-gray-100 rounded-lg p-1 ${a}`,children:(0,ht.jsxs)("div",{className:"flex bg-white rounded-md",children:[(0,ht.jsx)("button",{onClick:()=>r("published"),className:"flex-1 py-2 px-4 text-sm font-bold rounded-md transition-colors duration-200 "+("published"===t?"bg-tag-purple text-white":"text-gray-700 hover:text-gray-900"),children:"Published"}),(0,ht.jsx)("button",{onClick:()=>r("drafts"),className:"flex-1 py-2 px-4 text-sm font-bold rounded-md transition-colors duration-200 "+("drafts"===t?"bg-tag-purple text-white":"text-gray-700 hover:text-gray-900"),children:"Drafts"})]})})},Jr=t=>{let{collaborations:r,expandedCardId:a,onCollaborationToggle:o,className:s=""}=t;const n=ee(),[i,l]=(0,e.useState)("published"),[c,d]=(0,e.useState)([]),[u,h]=(0,e.useState)(!1),[m,p]=(0,e.useState)(!1),g=[{id:1,title:"Mobile App Design Collaboration",author:"Bryan",date:"Dec 15, 2024",image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop",tags:["UI/UX","Mobile","Design"]},{id:2,title:"Brand Identity Project",author:"Bryan",date:"Dec 10, 2024",image:"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=300&fit=crop",tags:["Branding","Logo","Identity"]}],f=async()=>{try{h(!0);const e=await Hr.A.getDrafts({type:"collaboration"});if(e.success){const t=e.data.items.map(e=>({id:e.id,title:e.title||"Untitled Draft",author:"Bryan",date:new Date(e.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),image:e.image||"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop",tags:e.tags||[],isDraft:!0,draftData:e}));d(t)}}catch(e){console.error("Failed to load drafts:",e)}finally{h(!1)}};(0,e.useEffect)(()=>{f()},[]),(0,e.useEffect)(()=>{const e=()=>{console.log("Draft saved event received, refreshing drafts list"),f()};return window.addEventListener("draft:saved",e),()=>{window.removeEventListener("draft:saved",e)}},[]);const v=async e=>{try{console.log("Deleting draft:",e);const t=await Hr.A.deleteDraft(e);if(t.success){console.log("Draft deleted successfully");const e=async()=>{try{h(!0);const e=await Hr.A.getDrafts({type:"collaboration"});if(e.success){const t=e.data.items.map(e=>({id:e.id,title:e.title||"Untitled Draft",author:"Bryan",date:new Date(e.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),image:e.image||"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop",tags:e.tags||[],isDraft:!0,draftData:e}));d(t)}}catch(e){console.error("Failed to reload drafts:",e)}finally{h(!1)}};e()}else console.error("Failed to delete draft:",t.error),alert("Failed to delete draft. Please try again.")}catch(t){console.error("Error deleting draft:",t),alert("Failed to delete draft. Please try again.")}};return(0,ht.jsxs)("div",{className:`pt-8 mt-8 bg-purple-50 rounded-lg p-6 ${s}`,children:[(0,ht.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ht.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Collaborations"}),(0,ht.jsx)("button",{onClick:()=>p(!0),className:"p-2 text-purple-600 hover:text-purple-700 hover:bg-purple-100 rounded-full transition-colors duration-200",title:"Learn about Collaborations",children:(0,ht.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),(0,ht.jsxs)("div",{className:"mb-8",children:[(0,ht.jsx)("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"Collaboration History"}),(0,ht.jsx)("div",{className:"space-y-4",children:r.map(e=>(0,ht.jsx)(qr,{collaboration:e,isExpanded:a===e.id,onToggle:o},e.id))})]}),(0,ht.jsx)("div",{className:"mb-6",children:(0,ht.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ht.jsx)(Gr,{activeTab:i,onTabChange:e=>{l(e)}}),"drafts"===i&&(0,ht.jsxs)("div",{className:"text-sm text-gray-500",children:[c.length,"/3 drafts"]})]})}),(0,ht.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:["published"===i&&g.map(e=>(0,ht.jsx)(Vr,{post:e},e.id)),"drafts"===i&&(u?(0,ht.jsxs)("div",{className:"col-span-full text-center py-8",children:[(0,ht.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-tag-purple mx-auto mb-4"}),(0,ht.jsx)("p",{className:"text-gray-500",children:"Loading drafts..."})]}):c.map(e=>(0,ht.jsx)("div",{onClick:()=>{return t=e,console.log("Opening draft for editing:",t),void n("/upload/form",{state:{activeUploadType:"collaboration",draftId:t.id,draftData:t.draftData,from:"draft-edit"}});var t},className:"cursor-pointer",children:(0,ht.jsx)(Vr,{post:e,onDelete:v})},e.id)))]}),"published"===i&&0===g.length&&(0,ht.jsx)("div",{className:"text-center py-8",children:(0,ht.jsx)("p",{className:"text-gray-500",children:"No published collaborations yet."})}),"drafts"===i&&0===c.length&&(0,ht.jsx)("div",{className:"text-center py-8",children:(0,ht.jsx)("p",{className:"text-gray-500",children:"No draft collaborations yet."})}),"drafts"===i&&c.length>=3&&(0,ht.jsx)("div",{className:"col-span-full text-center py-4",children:(0,ht.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[(0,ht.jsx)("div",{className:"text-orange-600 mb-2",children:(0,ht.jsx)("svg",{className:"w-6 h-6 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,ht.jsx)("p",{className:"text-orange-700 text-sm font-medium",children:"Draft limit reached (3/3)"}),(0,ht.jsx)("p",{className:"text-orange-600 text-xs mt-1",children:"Delete an existing draft to save a new one"})]})}),m&&(0,ht.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ht.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-4xl mx-4 shadow-xl",children:[(0,ht.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ht.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"What is Collaboration?"}),(0,ht.jsx)("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:(0,ht.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,ht.jsxs)("div",{className:"space-y-8 text-base text-gray-700",children:[(0,ht.jsxs)("div",{className:"flex items-start gap-5",children:[(0,ht.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center mt-0.5",children:(0,ht.jsx)("span",{className:"text-purple-600 text-base font-bold",children:"1"})}),(0,ht.jsxs)("div",{className:"flex-1",children:[(0,ht.jsx)("h4",{className:"font-bold text-gray-900 mb-3 text-lg",children:"Project Records"}),(0,ht.jsx)("p",{className:"text-gray-700 leading-relaxed",children:"Collaborations are shared project records that belong to all participants. Once published, they stay visible to ensure everyone's contributions are preserved."}),(0,ht.jsx)("p",{className:"text-gray-600 leading-relaxed mt-2 text-sm",children:"(You can always edit and update details, but the project itself remains as part of the team's history.)"})]})]}),(0,ht.jsxs)("div",{className:"flex items-start gap-5",children:[(0,ht.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center mt-0.5",children:(0,ht.jsx)("span",{className:"text-purple-600 text-base font-bold",children:"2"})}),(0,ht.jsxs)("div",{className:"flex-1",children:[(0,ht.jsx)("h4",{className:"font-bold text-gray-900 mb-3 text-lg",children:"Responsibilities"}),(0,ht.jsx)("p",{className:"text-gray-700 leading-relaxed",children:"Each member can describe their own responsibilities within a project. These should be written based on the team's discussion, so that everyone's role is represented fairly and clearly."})]})]}),(0,ht.jsxs)("div",{className:"flex items-start gap-5",children:[(0,ht.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center mt-0.5",children:(0,ht.jsx)("span",{className:"text-purple-600 text-base font-bold",children:"3"})}),(0,ht.jsxs)("div",{className:"flex-1",children:[(0,ht.jsx)("h4",{className:"font-bold text-gray-900 mb-3 text-lg",children:"Reviews"}),(0,ht.jsx)("p",{className:"text-gray-700 leading-relaxed",children:"After a project is completed, each Initiator or Collaborator will receive a review under their Responsibilities. Reviews from your teammates or project lead highlight your strengths, teamwork, and impact on the project."})]})]})]}),(0,ht.jsx)("div",{className:"mt-8 border-t border-gray-200 pt-6",children:(0,ht.jsxs)("div",{className:"flex justify-between items-end",children:[(0,ht.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,ht.jsx)("p",{className:"mb-2",children:"If you have other questions, feel free to reach out:"}),(0,ht.jsxs)("div",{className:"space-y-1",children:[(0,ht.jsx)("div",{className:"font-medium",children:"Email: tag@rainwang.art"}),(0,ht.jsxs)("div",{className:"text-gray-500",children:["Founder of TAG:"," ",(0,ht.jsx)("span",{className:"font-bold",children:"Rain Wang"})]})]})]}),(0,ht.jsx)("div",{className:"text-right",children:(0,ht.jsx)("button",{onClick:()=>p(!1),className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors duration-200 text-base font-medium",children:"Got it"})})]})})]})})]})},Kr=e=>{let{id:t,onBackClick:r,className:a=""}=e;return(0,ht.jsx)("div",{className:`bg-white min-h-screen flex items-center justify-center ${a}`,children:(0,ht.jsxs)("div",{className:"text-center",children:[(0,ht.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"\u827a\u672f\u5bb6\u672a\u627e\u5230"}),(0,ht.jsxs)("p",{className:"text-gray-600 mb-6",children:["\u62b1\u6b49\uff0c\u627e\u4e0d\u5230ID\u4e3a ",t," \u7684\u827a\u672f\u5bb6\u3002"]}),(0,ht.jsx)("button",{onClick:r,className:"bg-blue-500 text-white px-6 py-2 rounded-md hover:bg-blue-600 transition-colors duration-200",children:"\u8fd4\u56de\u753b\u5eca"})]})})},Yr=t=>{let{type:a,targetId:o,onClose:s,currentUserId:n="alice"}=t;const i=ee(),[l,c]=(0,e.useState)([]),[d,u]=(0,e.useState)(!0),[h,m]=(0,e.useState)(null),[p,g]=(0,e.useState)(!1),[f,v]=(0,e.useState)(null),[x,b]=(0,e.useState)(""),[y,w]=(0,e.useState)(null),[j,k]=(0,e.useState)({}),N=(0,e.useRef)(),C=(0,e.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{u(!0),m(null);const{getFollowersList:t,getFollowingListPaginated:s}=await Promise.resolve().then(r.bind(r,860)),i={limit:20,cursor:e?null:f,q:x,currentUserId:n};let l;if(l="followers"===a?await t(o,i):await s(o,i),l.success){const t=l.data.items;c(r=>e?t:[...r,...t]),g(l.data.hasMore),v(l.data.cursor)}else m(l.error)}catch(t){m(t.message)}finally{u(!1)}},[a,o,f,x]);(0,e.useEffect)(()=>{y&&clearTimeout(y);const e=setTimeout(()=>{C(!0)},250);return w(e),()=>{e&&clearTimeout(e)}},[x]),(0,e.useEffect)(()=>{C(!0)},[a,o]);const S=(0,e.useCallback)(e=>{d||(N.current&&N.current.disconnect(),N.current=new IntersectionObserver(e=>{e[0].isIntersecting&&p&&C()}),e&&N.current.observe(e))},[d,p,C]),_=(e,t)=>{const o=t===l.length-1?S:null;return(0,ht.jsx)("div",{ref:o,className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow duration-200 cursor-pointer",onClick:()=>{return t=e.id,i(`/artist/${t}`),void s();var t},children:(0,ht.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ht.jsx)("img",{src:e.avatar,alt:e.displayName,className:"w-12 h-12 rounded-full object-cover"}),(0,ht.jsx)("div",{className:"flex-1 min-w-0",children:(0,ht.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate",children:e.displayName})}),(0,ht.jsx)("button",{onClick:t=>{t.stopPropagation(),(async(e,t)=>{try{k(t=>({...t,[e]:!0}));const{follow:o,unfollow:s}=await Promise.resolve().then(r.bind(r,860)),i=n;let l;l=t?await s(e,i):await o(e,i),l.success?c("following"===a&&t?t=>t.filter(t=>t.id!==e):r=>r.map(r=>r.id===e?{...r,isFollowedByMe:!t}:r)):console.error("Follow toggle failed:",l.error)}catch(o){console.error("Follow toggle error:",o)}finally{k(t=>({...t,[e]:!1}))}})(e.id,e.isFollowedByMe)},disabled:j[e.id],className:(0,Fr.fO)(e.isFollowedByMe),children:j[e.id]?(0,ht.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.isFollowedByMe?"Following":"Follow"})]})},e.id)};return(0,ht.jsxs)("div",{className:"h-full flex flex-col",children:[(0,ht.jsx)("div",{className:"mb-4",children:(0,ht.jsx)("input",{type:"text",placeholder:`Search ${a}...`,value:x,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),(0,ht.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[h?(0,ht.jsxs)("div",{className:"text-center py-8",children:[(0,ht.jsxs)("p",{className:"text-red-500",children:["Error: ",h]}),(0,ht.jsx)("button",{onClick:()=>C(!0),className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Retry"})]}):0!==l.length||d?(0,ht.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:l.map((e,t)=>_(e,t))}):(0,ht.jsx)("div",{className:"text-center py-8",children:(0,ht.jsxs)("p",{className:"text-gray-500",children:["No ",a," found"]})}),d&&(0,ht.jsx)("div",{className:"text-center py-4",children:(0,ht.jsx)("div",{className:"inline-block w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})})]})]})},Zr=t=>{let{isOpen:r,onClose:a,artistId:o,isOwnProfile:s=!1,currentUserId:n="alice"}=t;return(0,e.useEffect)(()=>{const e=e=>{"Escape"===e.key&&r&&a()};return r&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[r,a]),(0,ht.jsx)(Ct,{isOpen:r,onClose:a,title:"Followers",maxWidth:"max-w-3xl",children:(0,ht.jsx)("div",{className:"h-96",children:(0,ht.jsx)(Yr,{type:"followers",targetId:o,onClose:a,isOwnProfile:s,currentUserId:n})})})},Qr=t=>{let{isOpen:r,onClose:a,userId:o,isOwnProfile:s=!1,currentUserId:n="alice"}=t;return(0,e.useEffect)(()=>{const e=e=>{"Escape"===e.key&&r&&a()};return r&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[r,a]),(0,ht.jsx)(Ct,{isOpen:r,onClose:a,title:"Following",maxWidth:"max-w-3xl",children:(0,ht.jsx)("div",{className:"h-96",children:(0,ht.jsx)(Yr,{type:"following",targetId:o,onClose:a,isOwnProfile:s,currentUserId:n})})})},Xr=()=>{var t,r,a;const{id:o}=te(),s=Z(),{state:n}=xr(),i="/me"===s.pathname||"/artist/me"===s.pathname,[l,c]=(0,e.useState)((0,ut.HW)()),d=null!==(t=null===l||void 0===l||null===(r=l.id)||void 0===r||null===(a=r.toString)||void 0===a?void 0:a.call(r))&&void 0!==t?t:null,[u,h]=(0,e.useState)(null),[m,p]=(0,e.useState)([]),[g,f]=(0,e.useState)([]),[v,x]=(0,e.useState)(!0),[b,y]=(0,e.useState)(!1),[w,j]=(0,e.useState)(156),[k,N]=(0,e.useState)(null),C=(0,e.useMemo)(()=>{if(n.navigationHistory.length>0){const e=n.navigationHistory[n.navigationHistory.length-1];return{from:e.from||"gallery",activeTab:e.activeTab||"Works"}}return{from:"gallery",activeTab:"Works"}},[n.navigationHistory]);(0,e.useEffect)(()=>{const e=()=>c((0,ut.HW)());return window.addEventListener("user:changed",e),()=>window.removeEventListener("user:changed",e)},[]),(0,e.useEffect)(()=>{const e=async e=>{const{userId:t,avatarUrl:r}=e.detail;if(t&&(console.log("[ArtistProfile] Avatar updated, clearing cache for user:",t),(0,Fr.Y1)(["artist",t]),t===d&&i)){h(e=>({...e,avatar:r})),console.log("[ArtistProfile] Updated avatar for current user:",null===r||void 0===r?void 0:r.substring(0,30));const e=await(0,Fr.Cs)(d);e&&(h(e),console.log("[ArtistProfile] Refreshed artist data after avatar update"))}};return window.addEventListener("avatar:updated",e),()=>window.removeEventListener("avatar:updated",e)},[d,i]),(0,e.useEffect)(()=>{const e=e=>{const t=e.detail;t&&t.id&&(console.log("[ArtistProfile] Profile updated, clearing cache for user:",t.id),(0,Fr.Y1)(["artist",t.id]))};return window.addEventListener("profile:updated",e),()=>window.removeEventListener("profile:updated",e)},[]),(0,e.useEffect)(()=>{const e=async e=>{const t=e.detail;(null===t||void 0===t?void 0:t.id)===d&&i&&h(e=>({...e,title:t.title||(null===e||void 0===e?void 0:e.title),school:t.school||(null===e||void 0===e?void 0:e.school),pronouns:t.pronouns||(null===e||void 0===e?void 0:e.pronouns),majors:t.majors||(null===e||void 0===e?void 0:e.majors),minors:t.minors||(null===e||void 0===e?void 0:e.minors),skills:t.skills||(null===e||void 0===e?void 0:e.skills),bio:t.bio||(null===e||void 0===e?void 0:e.bio)}))};return window.addEventListener("profile:updated",e),()=>window.removeEventListener("profile:updated",e)},[d,i]),(0,e.useEffect)(()=>{window.scrollTo({top:0,behavior:"auto"})},[]),(0,e.useEffect)(()=>{let e=!0;return(i||o)&&(async()=>{if(x(!0),y(!1),j(0),N(null),i){if(l){const e=await(0,Fr.Cs)(l.id);e?h(e):(console.error("[ArtistProfile] Failed to get artist data for current user"),h(null)),console.log("[ArtistProfile] Loading portfolio for user:",l.id);const t=await(0,Dr.ep)(l.id);if(console.log("[ArtistProfile] Portfolio load result:",t),t.success){const e=t.data.map(e=>({id:e.id,title:e.title,image:e.thumbnailPath||e.imagePaths&&e.imagePaths[0]||"",category:e.category,tags:e.tags,description:e.description}));console.log("[ArtistProfile] Setting portfolio artworks:",e),p(e)}else console.log("[ArtistProfile] Failed to load portfolio, using default portfolio"),p(l.portfolio||[]);const r=await(0,Fr.zx)(l.id);f(r),e&&j(e.stats.followers)}x(!1)}else try{var t;let a=null===o||void 0===o||null===(t=o.toString)||void 0===t?void 0:t.call(o);"me"===a&&(a=d,console.log('[ArtistProfile] ID is "me", using current user ID:',a));const s=await(0,Fr.Cs)(a),n=await(0,Dr.ep)(a);let i=[];n.success&&(i=n.data.map(e=>({id:e.id,title:e.title,image:e.thumbnailPath||e.imagePaths&&e.imagePaths[0]||"",category:e.category,tags:e.tags,description:e.description})));const l=await(0,Fr.zx)(a);if(!e)return;var r;s?(h(s),p(i),f(l),void 0!==(null===s||void 0===s||null===(r=s.stats)||void 0===r?void 0:r.followers)&&j(s.stats.followers)):(h(null),p([]),f([]))}finally{e&&x(!1)}})(),()=>{e=!1}},[o,i,d,l]);const S=(0,e.useMemo)(()=>!!i||"me"===o,[i,o]),_=(0,e.useMemo)(()=>!1,[]),E=(0,e.useCallback)(()=>{y(e=>!e),j(e=>b?e-1:e+1)},[b]);return{loading:v,currentUser:l,artist:u,artworks:m,collaborations:g,isFollowing:b,followersCount:w,expandedCardId:k,isOwnProfile:S,shouldShowBackToOwnerView:_,sourceInfo:C,setCurrentUser:c,setIsFollowing:y,setFollowersCount:j,setExpandedCardId:N,toggleFollow:E,toggleExpandedCard:e=>{N(t=>t===e?null:e)}}},ea=t=>{var r;let{state:a,setters:o}=t;const s=ee(),{goBack:n,navigateToWork:i}=_r();return{handleBackClick:(0,e.useCallback)(()=>{n()},[n]),handleEditProfileClick:(0,e.useCallback)(()=>{s("/settings/edit-profile")},[s]),handlePreviewAsVisitorClick:(0,e.useCallback)(()=>{var e;const t=null===(e=a.currentUser)||void 0===e?void 0:e.id;t&&s(`/artist/${t}`)},[s,null===(r=a.currentUser)||void 0===r?void 0:r.id]),handleBackToOwnerViewClick:(0,e.useCallback)(()=>{s("/artist/me")},[s]),handleArtworkClick:(0,e.useCallback)(e=>{e&&e.id&&i(e.id)},[i]),handleCollaborationToggle:(0,e.useCallback)(e=>{o.toggleExpandedCard(e)},[o]),handleSocialLinkClick:(0,e.useCallback)(()=>{},[])}};var ta=r(860),ra=r(121);const aa=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{user:a}=pt(),[o,s]=(0,e.useState)(r),[n,i]=(0,e.useState)(!1),[l,c]=(0,e.useState)(!1),d=!(null===a||void 0===a||!a.id),u=(0,e.useCallback)(async()=>{if(t&&d&&!l)if(a.id!==t)try{c(!0),console.log("[FollowCount] Toggling follow for artist:",t,"User:",a.id);const r=await(0,ta.So)(a.id,t);if(r.success){if(s(r.data.followersCount),i(r.data.isFollowing),console.log("[FollowCount] Follow toggled successfully:",r.data.isFollowing?"Following":"Unfollowing","Followers count:",r.data.followersCount),r.data.isFollowing)try{const e=await(0,ra.getProfile)(a.id),r=e.success&&e.data.fullName?e.data.fullName:a.name||a.username||"Unknown User";await Ht.lY.createFollowNotification(a.id,r,t),console.log("[FollowCount] Created follow notification")}catch(e){console.error("[FollowCount] Failed to create follow notification:",e)}window.dispatchEvent(new CustomEvent("follow:changed",{detail:{followerId:a.id,artistId:t,isFollowing:r.data.isFollowing}})),(0,ta._i)(t)}else console.error("[FollowCount] Failed to toggle follow:",r.error)}catch(e){console.error("[FollowCount] Error toggling follow:",e)}finally{c(!1)}else console.warn("[FollowCount] Cannot follow yourself")},[t,d,null===a||void 0===a?void 0:a.id,null===a||void 0===a?void 0:a.name,null===a||void 0===a?void 0:a.username,l]),h=(0,e.useCallback)(async()=>{if(t&&d)try{const e=await(0,ta.kt)(a.id,t);e.success?(s(e.data.followersCount),i(e.data.isFollowing),console.log("[FollowCount] Refreshed follow status:",e.data.isFollowing?"Following":"Not following","Followers count:",e.data.followersCount)):console.error("[FollowCount] Failed to refresh follow status:",e.error)}catch(e){console.error("[FollowCount] Error refreshing follow status:",e)}},[t,d,null===a||void 0===a?void 0:a.id]),m=(0,e.useCallback)(async()=>{if(t)try{const e=await(0,ta.getFollowersCount)(t);e.success?(s(e.data.followersCount),console.log("[FollowCount] Refreshed followers count:",e.data.followersCount)):console.error("[FollowCount] Failed to refresh followers count:",e.error)}catch(e){console.error("[FollowCount] Error refreshing followers count:",e)}},[t]);return(0,e.useEffect)(()=>{const e=e=>{const{followerId:r,artistId:o,isFollowing:s}=e.detail;o===t&&(r===(null===a||void 0===a?void 0:a.id)&&i(s),m())};return window.addEventListener("follow:changed",e),()=>{window.removeEventListener("follow:changed",e)}},[t,null===a||void 0===a?void 0:a.id,m]),(0,e.useEffect)(()=>{t&&d&&h()},[t,d,h]),(0,e.useEffect)(()=>{i(!1),c(!1)},[t,null===a||void 0===a?void 0:a.id]),{followersCount:o,isFollowing:n,isToggling:l,toggleFollow:u,refreshFollowStatus:h,refreshFollowersCount:m}},oa=t=>{const[r,a]=(0,e.useState)(0),[o,s]=(0,e.useState)(!1),n=(0,e.useCallback)(async()=>{if(t)try{s(!0);const e=await(0,ta.getFollowingList)(t);e.success?(a(e.data.followingCount),console.log("[FollowingCount] Refreshed following count:",e.data.followingCount)):console.error("[FollowingCount] Failed to refresh following count:",e.error)}catch(e){console.error("[FollowingCount] Error refreshing following count:",e)}finally{s(!1)}},[t]);return(0,e.useEffect)(()=>{const e=e=>{const{followerId:r,operation:a}=e.detail;r===t&&n()};return window.addEventListener("follow:changed",e),()=>{window.removeEventListener("follow:changed",e)}},[t,n]),(0,e.useEffect)(()=>{t&&n()},[t,n]),{followingCount:r,isLoading:o,refreshFollowingCount:n}},sa=()=>{var t,r,a,o,s,n,i,l,c,d,u;const{id:h}=te(),m=Xr(),p=(0,e.useMemo)(()=>({toggleFollow:m.toggleFollow,toggleExpandedCard:m.toggleExpandedCard}),[m.toggleFollow,m.toggleExpandedCard]),g=ea({state:m,setters:p}),f=aa(null===(t=m.artist)||void 0===t?void 0:t.id,m.followersCount),v=oa(m.isOwnProfile?null===(r=m.currentUser)||void 0===r?void 0:r.id:null===(a=m.artist)||void 0===a?void 0:a.id),[x,b]=e.useState(!1),[y,w]=e.useState(!1);if(m.loading)return(0,ht.jsx)(At,{});return(0,Fr.o2)(m.artist)?(0,ht.jsxs)("div",{className:"bg-white min-h-screen",children:[(0,ht.jsx)(Or,{artist:m.artist,artworks:m.artworks,isFollowing:f.isFollowing,followersCount:f.followersCount,followingCount:v.followingCount,isOwnProfile:m.isOwnProfile,onBackClick:g.handleBackClick,onEditProfileClick:g.handleEditProfileClick,onPreviewAsVisitorClick:g.handlePreviewAsVisitorClick,onBackToOwnerViewClick:null,toggleFollow:f.toggleFollow,onFollowersClick:()=>{b(!0)},onFollowingClick:()=>{w(!0)},from:(null===(n=m.sourceInfo)||void 0===n?void 0:n.from)||"gallery"}),(0,ht.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,ht.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8 pt-8",children:[(0,ht.jsx)(Wr,{artist:m.artist,onSocialLinkClick:g.handleSocialLinkClick}),(0,ht.jsxs)("div",{className:"flex-1",children:[(0,ht.jsx)(Br,{artworks:m.artworks,onArtworkClick:g.handleArtworkClick,isOwnProfile:m.isOwnProfile}),(0,ht.jsx)(Jr,{collaborations:m.collaborations,expandedCardId:m.expandedCardId,onCollaborationToggle:g.handleCollaborationToggle}),(0,ht.jsx)("div",{className:"mt-8",children:(0,ht.jsx)($r,{isOwnProfile:m.isOwnProfile})})]})]})}),(0,ht.jsx)(Zr,{isOpen:x,onClose:()=>{b(!1)},artistId:null===(i=m.artist)||void 0===i?void 0:i.id,isOwnProfile:m.isOwnProfile,currentUserId:null===(l=m.currentUser)||void 0===l?void 0:l.id}),(0,ht.jsx)(Qr,{isOpen:y,onClose:()=>{w(!1)},userId:m.isOwnProfile?null===(c=m.currentUser)||void 0===c?void 0:c.id:null===(d=m.artist)||void 0===d?void 0:d.id,isOwnProfile:m.isOwnProfile,currentUserId:null===(u=m.currentUser)||void 0===u?void 0:u.id})]},m.isOwnProfile?null===(o=m.currentUser)||void 0===o?void 0:o.id:null===(s=m.artist)||void 0===s?void 0:s.id):(0,ht.jsx)(Kr,{id:h,onBackClick:g.handleBackClick})},na=()=>{ee();const[t,r]=(0,e.useState)(null),a=()=>{const e=document.querySelector('[data-section="gallery"]');if(e){const t=e.getBoundingClientRect(),r=window.pageYOffset+t.top-40;window.scrollTo({top:r,behavior:"smooth"})}};return(0,ht.jsx)("section",{className:"relative min-h-[560px] lg:min-h-[640px] overflow-hidden",children:(0,ht.jsxs)("div",{className:"flex flex-col lg:flex-row",children:[(0,ht.jsx)("div",{className:"relative w-full lg:w-1/2 bg-gradient-to-b from-blue-600 to-blue-700 min-h-[560px] lg:min-h-[640px] flex items-start justify-center px-8 lg:px-8 pt-20 lg:pt-24 pb-16 lg:pb-20 cursor-pointer transition-all duration-500 ease-out",style:{width:window.innerWidth>=1024?"blue"===t?"80%":"purple"===t?"20%":"50%":"100%",transitionTimingFunction:"cubic-bezier(.22,.61,.36,1)"},onClick:a,onKeyDown:e=>((e,t)=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t())})(e,a),onMouseEnter:()=>r("blue"),onMouseLeave:()=>r(null),role:"link",tabIndex:0,children:(0,ht.jsxs)("div",{className:"flex flex-col items-end max-w-md gap-6 lg:pr-0",children:[(0,ht.jsxs)("div",{className:"leading-[0.8]",children:[(0,ht.jsx)("h1",{className:"text-white font-black uppercase tracking-[-0.03em]",style:{fontSize:"clamp(56px, 7vw, 96px)",fontFamily:"Poppins, Inter, system-ui, sans-serif",textRendering:"optimizeLegibility"},children:"TAG"}),(0,ht.jsx)("h1",{className:"text-blue-200 font-black tracking-[-0.03em]",style:{fontSize:"clamp(32px, 4vw, 56px)",fontFamily:"Poppins, Inter, system-ui, sans-serif",textRendering:"optimizeLegibility"},children:"Gallery"})]}),(0,ht.jsxs)("div",{className:"space-y-2 mt-6 md:mt-8 text-right",children:[(0,ht.jsx)("p",{className:"text-white/95 font-semibold leading-tight",style:{fontSize:"clamp(20px, 2.2vw, 28px)"},children:"Show your work"}),(0,ht.jsx)("p",{className:"text-white/95 font-semibold leading-tight",style:{fontSize:"clamp(20px, 2.2vw, 28px)"},children:"Get hired!"})]}),(0,ht.jsx)("p",{className:"text-white text-lg opacity-80 leading-relaxed text-right",children:"Explore TAG Gallery"})]})}),(0,ht.jsx)(at,{to:"/tagme",className:"relative w-full lg:w-1/2 bg-gradient-to-b from-purple-600 to-purple-700 min-h-[560px] lg:min-h-[640px] flex items-start justify-center px-8 lg:px-8 pt-20 lg:pt-24 pb-16 lg:pb-20 cursor-pointer transition-all duration-500 ease-out",style:{width:window.innerWidth>=1024?"blue"===t?"20%":"purple"===t?"80%":"50%":"100%",transitionTimingFunction:"cubic-bezier(.22,.61,.36,1)"},onMouseEnter:()=>r("purple"),onMouseLeave:()=>r(null),children:(0,ht.jsxs)("div",{className:"flex flex-col items-start max-w-md gap-6 lg:pl-0",children:[(0,ht.jsxs)("div",{className:"leading-[0.8]",children:[(0,ht.jsx)("h1",{className:"text-white font-black uppercase tracking-[-0.03em]",style:{fontSize:"clamp(56px, 7vw, 96px)",fontFamily:"Poppins, Inter, system-ui, sans-serif",textRendering:"optimizeLegibility"},children:"TAG"}),(0,ht.jsx)("h1",{className:"text-purple-200 font-black tracking-[-0.03em]",style:{fontSize:"clamp(48px, 6vw, 80px)",fontFamily:"Poppins, Inter, system-ui, sans-serif",textRendering:"optimizeLegibility"},children:"Me"})]}),(0,ht.jsxs)("div",{className:"space-y-2 mt-6 md:mt-8",children:[(0,ht.jsx)("p",{className:"text-white/95 font-semibold leading-tight",style:{fontSize:"clamp(20px, 2.2vw, 28px)"},children:"Find your team"}),(0,ht.jsx)("p",{className:"text-white/95 font-semibold leading-tight",style:{fontSize:"clamp(20px, 2.2vw, 28px)"},children:"Build experience!"})]}),(0,ht.jsx)("p",{className:"text-white text-lg opacity-80 leading-relaxed",children:"Explore TAGMe"})]})})]})})},ia=e=>{let{title:t="After-Finished Review",description:r="Final, qualitative comments after project completion only.",className:a=""}=e;return(0,ht.jsxs)("div",{className:`${a}`,children:[(0,ht.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:t}),(0,ht.jsx)("p",{className:"text-sm text-gray-600 mb-8",children:r})]})},la=e=>{let{state:t="none",onClick:r,disabled:a=!1,className:o="",ariaLabel:s,children:n}=e;const i=e=>{switch(e){case"loading":return"Loading...";case"submitted":return"Final Comment Submitted";case"pending":return"Pending Approval";case"approved":return"Submit Final Comment";case"none":return"Send Request";default:return"Unknown State"}};return(0,ht.jsx)("button",{onClick:r,disabled:a||"loading"===t||"submitted"===t||"pending"===t,className:`${(e=>{const t="px-4 py-2 rounded-lg font-medium transition-colors duration-200";switch(e){case"loading":case"pending":default:return`${t} bg-gray-300 text-gray-500 cursor-not-allowed`;case"submitted":return`${t} bg-green-100 text-green-800 cursor-not-allowed`;case"approved":case"none":return`${t} bg-purple-600 text-white hover:bg-purple-700`}})(t)} ${o}`,"aria-label":s||i(t),children:n||i(t)})},ca=e=>{switch(e){case"positive":return"bg-green-100 text-green-800";case"neutral":default:return"bg-gray-100 text-gray-800";case"constructive":return"bg-blue-100 text-blue-800"}},da=e=>{let{isLoggedIn:t=!0,isProjectMember:r=!0,hasCompletedTasks:a=!1,requestStatus:o="none",hasSubmitted:s=!1,commentText:n="",onCommentChange:i=()=>{},className:l=""}=e;const c=(e=>e.length)(n),d=!t||!r||!a||"none"===o||"pending"===o||s;return s?(0,ht.jsx)("div",{className:`mt-4 ${l}`,children:(0,ht.jsx)("blockquote",{className:"w-full p-3 bg-gray-50 border-l-4 border-purple-500 rounded-r-lg min-h-[120px]",children:(0,ht.jsxs)("p",{className:"text-gray-700 italic",children:['"',n,'"']})})}):(0,ht.jsxs)("div",{className:`mt-4 ${l}`,children:[(0,ht.jsx)("textarea",{value:n,onChange:e=>i(e.target.value),placeholder:t?r&&a?"none"===o?"Send a request to the Project Lead to write a final comment.":"pending"===o?"Your request is being reviewed by the Project Lead.":"approved"!==o||s?"Comment input":"Share your final thoughts about the project collaboration...":"You need approval from the Project Lead to write a final comment.":"Please log in to write a final comment.",disabled:d,className:`w-full p-3 border rounded-lg resize-none min-h-[120px] focus:ring-2 focus:ring-purple-500 focus:border-transparent ${c>600?"border-red-300":"border-gray-300"} ${d?"opacity-50 pointer-events-none":""}`,"aria-label":"Final comment input",maxLength:600}),(0,ht.jsxs)("div",{className:"flex justify-between items-center mt-2 text-sm",children:[(0,ht.jsx)("span",{className:"text-gray-500",children:"Share your thoughts"}),(0,ht.jsxs)("span",{className:""+(c>600?"text-red-500":"text-gray-500"),children:[c,"/600"]})]}),c>600&&(0,ht.jsx)("div",{className:"mt-1 text-sm text-red-500",role:"alert",children:"Comment exceeds maximum length"})]})},ua=e=>{let{comments:t=[],maxDisplay:r=3,className:a=""}=e;return 0===t.length?null:(0,ht.jsxs)("div",{className:`mt-6 ${a}`,children:[(0,ht.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Final Comments"}),(0,ht.jsxs)("div",{className:"space-y-3",children:[t.slice(0,r).map((e,t)=>{return(0,ht.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,ht.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,ht.jsxs)("div",{className:"text-xs text-gray-500",children:[e.userName," \xb7 ",e.userRole," \xb7"," ",(r=e.createdAt,new Date(r).toLocaleDateString())]}),e.sentiment&&(0,ht.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${ca(e.sentiment)}`,children:e.sentiment.charAt(0).toUpperCase()+e.sentiment.slice(1)})]}),(0,ht.jsx)("p",{className:"text-sm text-gray-700",children:e.comment})]},t);var r}),t.length>r&&(0,ht.jsx)("div",{className:"text-center py-2",children:(0,ht.jsxs)("span",{className:"text-xs text-gray-500",children:["+",t.length-r," more comments"]})})]})]})},ha=t=>{let{isOpen:r=!1,onClose:a=()=>{},onConfirm:o=()=>{},title:s="Participation Verification",className:n=""}=t;const[i,l]=(0,e.useState)({hasApplied:!1,hasCompleted:!1});if(!r)return null;const c=i.hasApplied&&i.hasCompleted;return(0,ht.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ht.jsxs)("div",{className:`bg-white rounded-lg p-8 max-w-lg w-full mx-4 ${n}`,children:[(0,ht.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:s}),(0,ht.jsxs)("div",{className:"space-y-6 mb-8",children:[(0,ht.jsxs)("div",{className:"flex items-center",children:[(0,ht.jsx)("input",{type:"checkbox",checked:i.hasApplied,onChange:e=>l(t=>({...t,hasApplied:e.target.checked})),className:"w-5 h-5 rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),(0,ht.jsx)("label",{className:"ml-4 text-base text-gray-700",children:"I have applied to participate in this project"})]}),(0,ht.jsxs)("div",{className:"flex items-center",children:[(0,ht.jsx)("input",{type:"checkbox",checked:i.hasCompleted,onChange:e=>l(t=>({...t,hasCompleted:e.target.checked})),className:"w-5 h-5 rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),(0,ht.jsx)("label",{className:"ml-4 text-base text-gray-700",children:"I have completed my tasks in this project"})]})]}),(0,ht.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,ht.jsx)("button",{onClick:()=>{a(),l({hasApplied:!1,hasCompleted:!1})},className:"px-6 py-3 text-base text-gray-600 hover:text-gray-800 transition-colors duration-200",children:"Cancel"}),(0,ht.jsx)("button",{onClick:()=>{c&&(o(),a(),l({hasApplied:!1,hasCompleted:!1}))},disabled:!c,className:"px-6 py-3 text-base rounded-lg font-medium transition-colors duration-200 "+(c?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"Send Request"})]})]})})},ma=e=>{let{isOpen:t=!1,onClose:r=()=>{},onConfirm:a=()=>{},commentText:o="",isLoading:s=!1,className:n=""}=e;return t?(0,ht.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ht.jsxs)("div",{className:`bg-white rounded-lg p-8 max-w-lg w-full mx-4 ${n}`,children:[(0,ht.jsxs)("div",{className:"flex items-center mb-6",children:[(0,ht.jsx)("div",{className:"flex-shrink-0",children:(0,ht.jsx)("svg",{className:"w-8 h-8 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,ht.jsxs)("div",{className:"ml-4",children:[(0,ht.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Final Comment Confirmation"}),(0,ht.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Please read this important notice"})]})]}),(0,ht.jsxs)("div",{className:"mb-8",children:[(0,ht.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:(0,ht.jsxs)("div",{className:"flex",children:[(0,ht.jsx)("div",{className:"flex-shrink-0",children:(0,ht.jsx)("svg",{className:"w-5 h-5 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,ht.jsxs)("div",{className:"ml-3",children:[(0,ht.jsx)("h4",{className:"text-sm font-medium text-yellow-800",children:"Important Notice"}),(0,ht.jsxs)("div",{className:"mt-2 text-sm text-yellow-700",children:[(0,ht.jsxs)("p",{className:"mb-2",children:["Once you submit your final comment, it"," ",(0,ht.jsx)("strong",{children:"cannot be changed or deleted"}),"."]}),(0,ht.jsx)("p",{children:"This comment will be permanently associated with your participation in this project."})]})]})]})}),(0,ht.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,ht.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Your Comment Preview:"}),(0,ht.jsxs)("div",{className:"text-sm text-gray-700 italic",children:['"',o,'"']})]})]}),(0,ht.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,ht.jsx)("button",{onClick:r,disabled:s,className:"px-6 py-3 text-base text-gray-600 hover:text-gray-800 transition-colors duration-200 disabled:opacity-50",children:"Cancel"}),(0,ht.jsx)("button",{onClick:a,disabled:s,className:"px-6 py-3 text-base rounded-lg font-medium transition-colors duration-200 "+(s?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-purple-600 text-white hover:bg-purple-700"),children:s?"Submitting...":"Confirm & Submit"})]})]})}):null},pa=t=>{let{projectId:a,userId:o,isLoggedIn:s=!0,isProjectMember:n=!0,hasCompletedTasks:i=!1,initialRequestStatus:l="none",initialFinalComments:c=[],initialHasSubmitted:d=!1}=t;const[u,h]=(0,e.useState)(l),[m,p]=(0,e.useState)(!1),[g,f]=(0,e.useState)(null),[v,x]=(0,e.useState)(c),[b,y]=(0,e.useState)(d),[w,j]=(0,e.useState)("");(0,e.useEffect)(()=>{h(l)},[l]),(0,e.useEffect)(()=>{s&&n&&i&&(async()=>{try{p(!0),f(null);const{getCollaborationRequestStatus:e}=await Promise.resolve().then(r.bind(r,450)),t=await e(a,o);if("none"!==t)return void h(t);const s=await(0,Ht.i8)(a,o);h(s)}catch(g){console.error("Error loading request state:",g),h("none")}finally{p(!1)}})()},[a,o,s,n,i]),(0,e.useEffect)(()=>{const e=e=>{const{projectId:t,requesterId:r,status:s}=e.detail;t===a&&r===o&&(h(s),"approved"===s&&f(null))};return window.addEventListener("review:requestStatusChanged",e),()=>{window.removeEventListener("review:requestStatusChanged",e)}},[a,o]),(0,e.useEffect)(()=>{const e=e=>{const{requestId:t,status:r,request:s}=e.detail;s.requesterId===o&&s.projectId===a&&(h(r),"approved"===r&&f(null))};return window.addEventListener("collaboration:requestStatusChanged",e),()=>{window.removeEventListener("collaboration:requestStatusChanged",e)}},[a,o]),(0,e.useEffect)(()=>{"approved"===u&&f(null)},[u]),(0,e.useEffect)(()=>{x([])},[a]);return{state:{localRequestStatus:u,isLoading:m,error:g,localFinalComments:v,hasSubmittedLocal:b,commentText:w},setters:{setLocalRequestStatus:h,setIsLoading:p,setError:f,setLocalFinalComments:x,setHasSubmittedLocal:y,setCommentText:j}}},ga=t=>{let{state:a,setters:o,projectId:s,userId:n,userName:i,userRole:l,projectName:c,onSendRequest:d=()=>{},onSubmitComment:u=()=>{}}=t;const{setLocalRequestStatus:h,setIsLoading:m,setError:p,setHasSubmittedLocal:g,setCommentText:f}=o,{commentText:v}=a,x=(0,e.useCallback)(async()=>{m(!0),p(null);try{const e=(0,ut.HW)(),t=await(0,Ht.BL)({projectId:s,projectName:c,requesterId:n,requesterName:i,requesterAvatar:(null===e||void 0===e?void 0:e.avatar)||"",ownerId:"alice",ownerName:"Alice Chen",message:"I would like to join this collaboration project."});return await(0,Ht.Gw)({userId:"alice",projectId:s,projectName:c,requestId:t.id,requesterId:n,requesterName:i,requesterAvatar:(null===e||void 0===e?void 0:e.avatar)||""}),h("pending"),d(),t}catch(e){throw p(e.message),console.error("Error sending collaboration request:",e),e}finally{m(!1)}},[s,n,i,c,d,h,m,p]),b=(0,e.useCallback)(async()=>{m(!0),p(null);try{const e=await(0,Ht.CM)(s,n,v,"positive","alice",c,i,l);if(e)return g(!0),f(""),u(v),e;throw new Error("Failed to create comment")}catch(e){throw p(e.message),console.error("Error submitting final comment:",e),e}finally{m(!1)}},[s,n,v,u,g,f,m,p,c,i,l]),y=(0,e.useCallback)(async()=>{try{const e=await(0,Ht.i8)(s,n);h(e)}catch(e){console.error("Error refreshing review status:",e),p("Failed to refresh status")}},[s,n,h,p]);return{handleSendRequest:x,handleSubmitFinalComment:b,handleRefreshStatus:y,handleResetRequests:(0,e.useCallback)(async()=>{try{const{resetReviewRequests:e}=await Promise.resolve().then(r.bind(r,450));await e(),h("none")}catch(e){console.error("Error resetting review requests:",e),p("Failed to reset requests")}},[h,p]),handleCommentTextChange:(0,e.useCallback)(e=>{f(e)},[f]),handleClearError:(0,e.useCallback)(()=>{p(null)},[p])}},fa=t=>{let{isLoggedIn:r=!0,isProjectMember:a=!0,hasCompletedTasks:o=!1,requestStatus:s="none",hasSubmittedFinalComment:n=!1,finalComments:i=[],projectId:l="1",userId:c="current_user",userName:d="Current User",userRole:u="Member",projectName:h="Project Name",onSendRequest:m=()=>{},onSubmitComment:p=()=>{}}=t;const{state:g,setters:f}=pa({projectId:l,userId:c,isLoggedIn:r,isProjectMember:a,hasCompletedTasks:o,initialRequestStatus:s,initialFinalComments:i,initialHasSubmitted:n}),v=ga({state:g,setters:f,projectId:l,userId:c,userName:d,userRole:u,projectName:h,onSendRequest:m,onSubmitComment:p}),[x,b]=(0,e.useState)(!1),[y,w]=(0,e.useState)(!1),[j,k]=(0,e.useState)(!1),N=()=>{r?a&&o&&(g.hasSubmittedLocal||("none"===g.localRequestStatus&&b(!0),"approved"!==g.localRequestStatus||g.hasSubmittedLocal||w(!0))):console.log("Sign in to request review")};return(0,ht.jsxs)("div",{className:"mt-6",children:[(0,ht.jsx)(ia,{}),(0,ht.jsx)(Tt,{error:g.error}),(0,ht.jsxs)("div",{className:"flex justify-start items-center space-x-3",children:[(()=>{if(!r)return(0,ht.jsx)(la,{state:"none",onClick:()=>{},ariaLabel:"Sign in to request review",children:"Sign in to request review"});if(!a||!o)return(0,ht.jsxs)("div",{className:"relative",children:[(0,ht.jsx)(la,{state:"disabled",disabled:!0,ariaLabel:"Send a Request (disabled)",title:"Only completed project members can request to comment.",onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1),children:"Send a Request"}),j&&(0,ht.jsxs)("div",{className:"absolute bottom-full left-0 mb-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg whitespace-nowrap z-10",children:["Only completed project members can request to comment.",(0,ht.jsx)("div",{className:"absolute top-full left-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]});let e=g.localRequestStatus;return g.hasSubmittedLocal&&(e="submitted"),(0,ht.jsx)(la,{state:e,onClick:N,disabled:g.isLoading})})(),"pending"===g.localRequestStatus&&(0,ht.jsx)("button",{onClick:v.handleRefreshStatus,className:"px-3 py-2 text-sm bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition-colors duration-200",title:"Check for status updates",children:(0,ht.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),!1]}),(0,ht.jsx)(da,{isLoggedIn:r,isProjectMember:a,hasCompletedTasks:o,requestStatus:g.localRequestStatus,hasSubmitted:g.hasSubmittedLocal,commentText:g.commentText,onCommentChange:v.handleCommentTextChange}),(0,ht.jsx)(ua,{comments:g.localFinalComments}),(0,ht.jsx)(ha,{isOpen:x,onClose:()=>b(!1),onConfirm:async()=>{try{await v.handleSendRequest(),b(!1)}catch(e){console.error("Failed to send request:",e)}}}),(0,ht.jsx)(ma,{isOpen:y,onClose:()=>w(!1),onConfirm:async()=>{try{await v.handleSubmitFinalComment(),w(!1)}catch(e){console.error("Failed to submit final comment:",e)}},commentText:g.commentText,isLoading:g.isLoading})]})};var va=r(266);const xa=t=>{let{projectId:r,isOwner:a=!1}=t;const[o,s]=(0,e.useState)([]),[n,i]=(0,e.useState)(!1),[l,c]=(0,e.useState)(null),d=async()=>{try{i(!0);const e=await va.os(r);s(e)}catch(l){c("Failed to load review requests"),console.error("Error loading requests:",l)}finally{i(!1)}},u=async(e,t)=>{try{i(!0),await va.vb(e,t),await d()}catch(l){c(`Failed to ${t} request`),console.error("Error updating request:",l)}finally{i(!1)}},h=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"denied":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return(0,e.useEffect)(()=>{a&&d()},[r,a]),a?(0,ht.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 relative",children:[(0,ht.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ht.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Review Requests"}),(0,ht.jsx)("button",{onClick:d,disabled:n,className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200 transition-colors duration-200",children:n?"Loading...":"Refresh"})]}),l&&(0,ht.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,ht.jsx)("p",{className:"text-sm text-red-600",children:l})}),0===o.length?(0,ht.jsx)("div",{className:"text-center py-8",children:(0,ht.jsx)("p",{className:"text-gray-500",children:"No review requests yet"})}):(0,ht.jsx)("div",{className:"space-y-4",children:o.map(e=>{return(0,ht.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,ht.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,ht.jsxs)("div",{children:[(0,ht.jsx)("h4",{className:"font-medium text-gray-900",children:e.userName}),(0,ht.jsx)("p",{className:"text-sm text-gray-600",children:e.projectName}),(0,ht.jsxs)("p",{className:"text-xs text-gray-500",children:["Requested: ",(t=e.createdAt,new Date(t).toLocaleString())]})]}),(0,ht.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${h(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),"pending"===e.status&&(0,ht.jsxs)("div",{className:"flex gap-2",children:[(0,ht.jsx)("button",{onClick:()=>u(e.id,"approved"),disabled:n,className:"px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700 transition-colors duration-200 disabled:opacity-50",children:"Approve"}),(0,ht.jsx)("button",{onClick:()=>u(e.id,"denied"),disabled:n,className:"px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700 transition-colors duration-200 disabled:opacity-50",children:"Deny"})]})]},e.id);var t})}),(0,ht.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[(0,ht.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Development Tools"}),(0,ht.jsx)("div",{className:"flex gap-2",children:(0,ht.jsx)("button",{onClick:()=>va.KJ(),className:"px-3 py-1 text-xs bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors duration-200",children:"Clear Test Data"})})]})]}):null},ba=e=>{let{isOpen:t,onClose:r,applyForm:a,onFormChange:o,onSubmit:s}=e;return(0,ht.jsx)(Ct,{isOpen:t,onClose:r,title:"Apply for Project",maxWidth:"max-w-md",children:(0,ht.jsxs)("form",{onSubmit:s,className:"space-y-4",children:[(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),(0,ht.jsx)("input",{id:"name",type:"text",name:"name",value:a.name,onChange:o,required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Your full name"})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,ht.jsx)("input",{id:"email",type:"email",name:"email",value:a.email,onChange:o,required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"your.email@example.com"})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{htmlFor:"portfolio",className:"block text-sm font-medium text-gray-700 mb-1",children:"Portfolio Link"}),(0,ht.jsx)("input",{id:"portfolio",type:"url",name:"portfolio",value:a.portfolio,onChange:o,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"https://your-portfolio.com"})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-1",children:"Message"}),(0,ht.jsx)("textarea",{id:"message",name:"message",value:a.message,onChange:o,rows:"3",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none",placeholder:"Tell us why you'd like to join this project..."})]}),(0,ht.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,ht.jsx)(kt,{type:"button",onClick:r,fullWidth:!0,className:"flex-1",children:"Cancel"}),(0,ht.jsx)(jt,{type:"submit",fullWidth:!0,className:"flex-1",children:"Submit Application"})]})]})})};var ya=r(337);const wa=e=>{let{projectId:t,milestones:r=[],dueDate:a,onViewMilestones:o,isMilestonePage:s=!1,isInitiator:n=!1}=e;const i=r.length,l=r.filter(e=>["done","completed"].includes(e.status)).length,c=Math.round(l/Math.max(i,1)*100),d=i>0,u=d?`Completed ${l} / ${i} milestones`:"No milestones created yet",h=d?"View Milestones":"Create Milestones",m=()=>{d&&o&&!s&&o(t)};return(0,ht.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8 w-full",children:[(0,ht.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ht.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Project Progress"}),a&&(0,ht.jsxs)("span",{className:"text-sm text-gray-600 mr-4",children:["Deadline: ",a]})]}),d?(0,ht.jsxs)("div",{className:"flex items-center gap-4 "+(s?"":"cursor-pointer hover:bg-gray-50 p-3 rounded-lg transition-colors duration-200"),onClick:s?void 0:m,role:s?void 0:"button",tabIndex:s?void 0:0,onKeyDown:s?void 0:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),m())},"aria-label":s?void 0:`${u} \xb7 Click to view milestone details`,children:[(0,ht.jsxs)("div",{className:"flex-1",children:[(0,ht.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,ht.jsx)("span",{className:"text-sm font-medium text-gray-700",children:u}),(0,ht.jsxs)("span",{className:"text-sm text-gray-600",children:[c,"%"]})]}),(0,ht.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":c,"aria-label":`Project progress: ${c}%`,children:(0,ht.jsx)("div",{className:"h-full bg-purple-600 transition-all duration-300 ease-in-out",style:{width:`${c}%`}})})]}),!s&&(0,ht.jsx)("button",{onClick:e=>{e.stopPropagation(),m()},className:"px-4 py-2 rounded-lg font-medium transition-all duration-200 bg-purple-600 text-white hover:bg-purple-700 shadow-lg hover:shadow-xl transform hover:-translate-y-1","aria-label":"View milestone details",children:h})]}):(0,ht.jsxs)("div",{className:"flex items-center gap-4 opacity-60",children:[(0,ht.jsxs)("div",{className:"flex-1",children:[(0,ht.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,ht.jsx)("span",{className:"text-sm font-medium text-gray-400",children:u}),(0,ht.jsx)("span",{className:"text-sm text-gray-400",children:"0%"})]}),(0,ht.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":"0","aria-label":"Project progress: 0% (disabled - no milestones)",children:(0,ht.jsx)("div",{className:"h-full bg-gray-400 transition-all duration-300 ease-in-out",style:{width:"0%"}})})]}),!s&&(0,ht.jsx)("button",{disabled:!0,className:"px-4 py-2 rounded-lg font-medium transition-all duration-200 bg-gray-100 text-gray-400 cursor-not-allowed","aria-label":"No milestones available",children:h})]}),!d&&(0,ht.jsx)("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,ht.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ht.jsx)("svg",{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("p",{className:"text-yellow-800 text-sm font-medium mb-1",children:"Set up Milestones now to unlock Project Progress and open the Discussion Board!"}),(0,ht.jsx)("p",{className:"text-yellow-700 text-xs",children:"Milestones are the core switch for your project. Without milestones, project progress tracking and team discussions are disabled."})]})]})})]})},ja=t=>{let{imageKey:r,alt:a="Collaboration hero image",className:o="w-full h-full object-cover"}=t;const[s,n]=(0,e.useState)(null),[i,l]=(0,e.useState)(!1),[c,d]=(0,e.useState)(!1);return(0,e.useEffect)(()=>((async()=>{if(!r)return n(null),void d(!1);l(!0),d(!1);try{console.log(`[CollaborationHeaderImage] Loading image for key: ${r}`);const e=await ya.default.getImageUrl(r);e?(console.log(`[CollaborationHeaderImage] Successfully loaded image: ${e.substring(0,50)}...`),n(e)):(console.warn(`[CollaborationHeaderImage] No image URL returned for key: ${r}`),d(!0))}catch(e){console.warn(`[CollaborationHeaderImage] Failed to load image: ${r}`,e),d(!0)}finally{l(!1)}})(),()=>{s&&s.startsWith("blob:")&&(console.log(`[CollaborationHeaderImage] Cleaning up blob URL: ${s.substring(0,50)}...`),URL.revokeObjectURL(s))}),[r]),i?(0,ht.jsx)("div",{className:"w-full h-full bg-gradient-to-r from-purple-600 to-purple-700 flex items-center justify-center",children:(0,ht.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}):c||!s?(0,ht.jsx)("div",{className:"w-full h-full bg-gradient-to-r from-purple-600 to-purple-700"}):(0,ht.jsx)("img",{src:s,alt:a,className:o,onError:e=>{console.warn(`[CollaborationHeaderImage] Image failed to load: ${s.substring(0,50)}...`),e.target.style.display="none"}})},ka=e=>{var t;let{project:r,isSaved:a,onBack:o,onSaveToggle:s,onApplyNow:n,onViewMilestones:i,enableProjectProgressBar:l=!0}=e;return(0,ht.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,ht.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,ht.jsx)(Et,{onClick:o,text:"Back to TAGMe",className:"mb-6"}),(0,ht.jsxs)("div",{className:"flex items-center text-sm text-gray-500 mb-4",children:[(0,ht.jsx)("button",{onClick:o,className:"hover:text-tag-blue transition-colors duration-200",children:"Collaborations"}),(0,ht.jsx)("span",{className:"mx-2",children:"/"}),(0,ht.jsx)("span",{className:"text-gray-900 font-medium",children:r.title})]}),(0,ht.jsx)("div",{className:"relative mb-6",children:(0,ht.jsx)("div",{className:"w-full h-48 bg-gradient-to-r from-purple-600 to-purple-700 rounded-lg overflow-hidden relative",children:r.heroImage?(0,ht.jsxs)(ht.Fragment,{children:[(0,ht.jsx)(ja,{imageKey:r.heroImage,alt:r.title}),(0,ht.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600/30 to-purple-700/30"})]}):(0,ht.jsx)("div",{className:"w-full h-full bg-gradient-to-r from-purple-600 to-purple-700"})})}),(0,ht.jsxs)("div",{className:"mb-6",children:[(0,ht.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:r.title}),(0,ht.jsxs)("div",{className:"flex flex-wrap items-center gap-6 mb-4 text-sm text-gray-600",children:[(0,ht.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ht.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,ht.jsxs)("span",{children:["Posted ",r.postedTime]})]}),(null===(t=r.vision)||void 0===t?void 0:t.contact)&&(0,ht.jsxs)(ht.Fragment,{children:[r.vision.contact.discord&&(0,ht.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ht.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"})}),(0,ht.jsx)("span",{className:"text-gray-600",children:r.vision.contact.discord})]}),r.vision.contact.email&&(0,ht.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ht.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),(0,ht.jsx)("span",{className:"text-gray-600",children:r.vision.contact.email})]})]})]}),(0,ht.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,ht.jsx)("div",{className:"flex flex-wrap gap-2",children:r.tags.map((e,t)=>(0,ht.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 text-sm font-medium rounded-full",children:e},t))}),(0,ht.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,ht.jsx)(_t,{isFavorited:a,itemType:"collaboration",itemId:r.id,onToggle:s,size:"md"}),(0,ht.jsx)(jt,{onClick:n,size:"lg",className:"w-full sm:w-auto",children:"Apply Now"})]})]})]}),l&&(0,ht.jsx)("div",{className:"w-full",children:(0,ht.jsx)(wa,{projectId:r.id,milestones:r.milestones||[],dueDate:r.deadline,onViewMilestones:i})})]})})},Na=e=>{var t;let{comment:r,onCommentChange:a,onSubmitComment:o,positionComments:s,positionId:n}=e;return(0,ht.jsxs)("div",{className:"space-y-6",children:[(0,ht.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,ht.jsxs)("form",{onSubmit:o,className:"space-y-4",children:[(0,ht.jsx)("textarea",{value:r,onChange:a,placeholder:"Share your thoughts, questions, or feedback about this position...",className:"w-full p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:"3"}),(0,ht.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ht.jsxs)("button",{type:"button",className:"flex items-center gap-2 text-sm text-gray-600 hover:text-gray-800 transition-colors duration-200",children:[(0,ht.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),"Attach Image"]}),(0,ht.jsx)(jt,{type:"submit",disabled:!r.trim(),size:"sm",className:"disabled:opacity-50 disabled:cursor-not-allowed",children:"Comment"})]})]})}),(0,ht.jsx)("div",{className:"space-y-4",children:null===(t=s[n])||void 0===t?void 0:t.map(e=>(0,ht.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,ht.jsxs)("div",{className:"flex items-start gap-4",children:[(0,ht.jsx)(at,{to:`/artist/${e.user}`,className:"w-10 h-10 rounded-full flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity duration-200",children:(0,ht.jsx)("img",{src:e.avatar,alt:e.user,className:"w-10 h-10 rounded-full"})}),(0,ht.jsxs)("div",{className:"flex-1",children:[(0,ht.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,ht.jsx)(at,{to:`/artist/${e.user}`,className:"font-medium text-gray-900 cursor-pointer hover:text-tag-blue transition-colors duration-200",children:e.user}),(0,ht.jsx)("span",{className:"text-xs text-gray-500",children:"\u2022"}),(0,ht.jsx)("span",{className:"text-xs text-gray-500",children:e.role}),(0,ht.jsx)("span",{className:"text-xs text-gray-500",children:"\u2022"}),(0,ht.jsx)("span",{className:"text-xs text-gray-500",children:e.timestamp})]}),(0,ht.jsx)("p",{className:"text-gray-700 mb-3",children:e.comment}),(0,ht.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ht.jsxs)("button",{className:"flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700 transition-colors duration-200",children:[(0,ht.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),e.likes]}),(0,ht.jsx)("button",{className:"text-sm text-gray-500 hover:text-gray-700 transition-colors duration-200",children:"Reply"})]})]})]})},e.id))})]})},Ca=e=>{let{applications:t=[]}=e;return 0===t.length?(0,ht.jsxs)("div",{className:"text-center py-8",children:[(0,ht.jsx)("div",{className:"text-gray-400 mb-2",children:(0,ht.jsx)("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,ht.jsx)("p",{className:"text-gray-500 text-sm",children:"No applications yet"}),(0,ht.jsx)("p",{className:"text-gray-400 text-xs mt-1",children:"Be the first to apply!"})]}):(0,ht.jsxs)("div",{className:"space-y-4",children:[(0,ht.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ht.jsxs)("h4",{className:"font-semibold text-gray-900",children:["Applications (",t.length,")"]}),(0,ht.jsxs)("span",{className:"text-sm text-gray-500",children:[t.length," ",1===t.length?"person":"people"," applied"]})]}),(0,ht.jsx)("div",{className:"grid grid-cols-6 gap-3",children:t.map((e,t)=>(0,ht.jsxs)("div",{className:"text-center",children:[(0,ht.jsxs)("div",{className:"relative group",children:[(0,ht.jsx)("img",{src:e.avatar||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",alt:e.name,className:"w-12 h-12 rounded-full object-cover border-2 border-gray-200 group-hover:border-purple-300 transition-colors duration-200"}),"approved"===e.status&&(0,ht.jsx)("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white flex items-center justify-center",children:(0,ht.jsx)("svg",{className:"w-2 h-2 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ht.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),(0,ht.jsx)("p",{className:"text-xs text-gray-600 mt-1 truncate",title:e.name,children:e.name})]},t))}),t.length>6&&(0,ht.jsx)("div",{className:"text-center",children:(0,ht.jsxs)("button",{className:"text-sm text-purple-600 hover:text-purple-700 font-medium",children:["View all ",t.length," applications"]})})]})},Sa=e=>{let{project:t,positions:r,hasSubmittedApplication:a,showWarning:o,appliedPositions:s,selectedPosition:n,activePositionTab:i,comment:l,positionComments:c,onApply:d,onCancelApplication:u,onPositionTabClick:h,onCommentChange:m,onSubmitComment:p,navigateToArtist:g,getStatusColor:f,getStatusText:v}=e;return(0,ht.jsx)("div",{className:"lg:col-span-2",children:(0,ht.jsxs)(Nt,{className:"mb-8",children:[(0,ht.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Project Description"}),(0,ht.jsx)("p",{className:"text-gray-700 leading-relaxed mb-6",children:t.description}),(0,ht.jsxs)("div",{className:"flex flex-wrap gap-6 mt-6 pt-6 border-t border-gray-200",children:[(0,ht.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ht.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),(0,ht.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,ht.jsx)("span",{className:"font-medium",children:"Expected Team Size:"})," ",t.teamSize||"Not specified"]})]}),(0,ht.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ht.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,ht.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,ht.jsx)("span",{className:"font-medium",children:"Duration:"})," ",t.duration||"Not specified"]})]}),(0,ht.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ht.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,ht.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,ht.jsx)("span",{className:"font-medium",children:"Meeting Schedule:"})," ",t.meetingSchedule||"Not specified"]})]})]}),(0,ht.jsxs)("div",{className:"mt-24",children:[(0,ht.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Open Positions"}),!a&&(0,ht.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:(0,ht.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ht.jsx)("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,ht.jsx)("span",{className:"text-yellow-800 text-sm font-medium",children:"Please 'Apply now' above to activate position applications"})]})}),a&&(0,ht.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:(0,ht.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ht.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,ht.jsx)("span",{className:"text-green-800 text-sm font-medium",children:"Application submitted! You can now apply for specific positions."})]})}),(0,ht.jsx)("div",{className:"space-y-4",children:null===r||void 0===r?void 0:r.map((e,t)=>{var r;return(0,ht.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow duration-200",children:[(0,ht.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,ht.jsxs)("div",{children:[(0,ht.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.title}),(0,ht.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${f(e.status)}`,children:v(e.status)})]}),(0,ht.jsxs)("div",{className:"flex gap-2",children:[(0,ht.jsx)("button",{onClick:()=>d(e.id),disabled:!a||s.has(e.id),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 "+(s.has(e.id)?"bg-green-100 text-green-800 cursor-not-allowed":a?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:s.has(e.id)?"Applied":"Apply"}),s.has(e.id)&&(0,ht.jsx)("button",{onClick:()=>u(e.id),className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg text-sm font-medium hover:bg-red-200 transition-colors duration-200",children:"Cancel"})]})]}),(0,ht.jsx)("p",{className:"text-gray-700 text-sm mb-4",children:e.description}),(0,ht.jsxs)("div",{className:"mb-4",children:[(0,ht.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Required Skills:"}),(0,ht.jsx)("div",{className:"flex flex-wrap gap-2",children:null===(r=e.requiredSkills)||void 0===r?void 0:r.map((e,t)=>(0,ht.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full",children:e},t))})]}),(0,ht.jsxs)("div",{className:"flex border-b border-gray-200",children:[(0,ht.jsx)("button",{onClick:()=>h(e.id,"applications"),className:"px-4 py-2 text-sm font-medium border-b-2 transition-colors duration-200 "+(n===e.id&&"applications"===i?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Applications"}),(0,ht.jsx)("button",{onClick:()=>h(e.id,"comments"),className:"px-4 py-2 text-sm font-medium border-b-2 transition-colors duration-200 "+(n===e.id&&"comments"===i?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Discussion Board"})]}),(0,ht.jsxs)("div",{className:"p-6",children:[n===e.id&&"applications"===i&&(0,ht.jsx)(Ca,{applications:e.applications||[]}),n===e.id&&"comments"===i&&(0,ht.jsx)(Na,{comment:l,onCommentChange:m,onSubmitComment:p,positionComments:c,positionId:e.id,navigateToArtist:g})]})]},t)})})]})]})})},_a=e=>{switch(e){case"available":return"bg-green-100 text-green-800";case"filled":default:return"bg-gray-100 text-gray-800";case"in_progress":return"bg-blue-100 text-blue-800"}},Ea=e=>{switch(e){case"available":return"Available";case"filled":return"Position Filled";case"in_progress":return"In Progress";default:return"Unknown"}},Pa=t=>{let{isOpen:r,onClose:a,onSubmit:o,isLoading:s}=t;const[n,i]=(0,e.useState)(""),[l,c]=(0,e.useState)(""),d=()=>{i(""),c(""),a()};return r?(0,ht.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ht.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,ht.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ht.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Write Final Comment"}),(0,ht.jsx)("button",{onClick:d,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200","aria-label":"Close modal",children:(0,ht.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,ht.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n.trim()?n.length<100?c("Comment must be at least 100 characters"):n.length>600?c("Comment must be less than 600 characters"):(c(""),o(n)):c("Please enter your comment")},className:"space-y-4",children:[(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Final Comment *"}),(0,ht.jsx)("textarea",{value:n,onChange:e=>i(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:"4",placeholder:"Share your final thoughts about this project collaboration (100-600 characters)...","aria-describedby":"comment-help comment-error"}),(0,ht.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,ht.jsxs)("p",{id:"comment-help",className:"text-xs text-gray-500",children:[n.length,"/600 characters"]}),l&&(0,ht.jsx)("p",{id:"comment-error",className:"text-xs text-red-500",children:l})]})]}),(0,ht.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,ht.jsx)("button",{type:"button",onClick:d,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors duration-200",disabled:s,children:"Cancel"}),(0,ht.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:s,children:s?"Submitting...":"Submit Comment"})]})]})]})}):null},Ia=e=>{let{comments:t=[]}=e;const r=e=>{switch(e){case"positive":return"bg-green-100 text-green-800";case"constructive":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return 0===t.length?(0,ht.jsxs)("div",{className:"text-center py-8",children:[(0,ht.jsx)("p",{className:"text-gray-500",children:"No final comments yet"}),(0,ht.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"Final, qualitative comments from teammates after project completion."})]}):(0,ht.jsxs)("div",{className:"space-y-6",children:[(0,ht.jsxs)("div",{children:[(0,ht.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Final Comments"}),(0,ht.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Final, qualitative comments from teammates after project completion."})]}),(0,ht.jsx)("div",{className:"space-y-4",children:t.map(e=>{return(0,ht.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,ht.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,ht.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ht.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:(0,ht.jsx)("span",{className:"text-sm font-medium text-purple-700",children:e.authorName.charAt(0)})}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("div",{className:"font-medium text-gray-900",children:e.authorName}),(0,ht.jsx)("div",{className:"text-sm text-gray-500",children:e.authorRole})]})]}),e.sentiment&&(0,ht.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${r(e.sentiment)}`,children:e.sentiment.charAt(0).toUpperCase()+e.sentiment.slice(1)})]}),(0,ht.jsx)("div",{className:"text-gray-700 leading-relaxed mb-3",children:e.text}),(0,ht.jsx)("div",{className:"text-xs text-gray-500",children:(t=e.createdAt,new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]},e.id);var t})})]})},Aa=e=>{var t,r;let{vision:a,owner:o}=e;return a?(0,ht.jsxs)("div",{className:"space-y-6",children:[(0,ht.jsxs)("div",{className:"flex items-center gap-4 pb-4 border-b border-gray-200",children:[o.artistAvatar?(0,ht.jsx)("img",{src:o.artistAvatar,alt:o.artist,className:"w-12 h-12 rounded-full object-cover",onError:e=>{e.target.style.display="none"}}):(0,ht.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-300 flex items-center justify-center",children:(0,ht.jsx)("span",{className:"text-lg text-gray-600 font-medium",children:(null===(t=o.artist)||void 0===t||null===(r=t.charAt(0))||void 0===r?void 0:r.toUpperCase())||"U"})}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("div",{className:"font-medium text-gray-900",children:o.artist}),(0,ht.jsx)("div",{className:"text-sm text-gray-500",children:"Initiator"===o.role?(0,ht.jsx)("span",{className:"inline-flex items-center px-2 py-1 bg-purple-100 text-purple-800 text-xs font-medium rounded-full",children:"Initiator"}):o.role})]})]}),a.tagline&&(0,ht.jsxs)("div",{children:[(0,ht.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Project Vision"}),(0,ht.jsxs)("p",{className:"text-gray-700 italic",children:['"',a.tagline,'"']})]}),a.narrative&&(0,ht.jsxs)("div",{children:[(0,ht.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Why This Matters"}),(0,ht.jsx)("div",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:a.narrative})]}),a.hiringTargets&&a.hiringTargets.length>0&&(0,ht.jsxs)("div",{children:[(0,ht.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Looking For"}),(0,ht.jsx)("div",{className:"flex flex-wrap gap-2",children:a.hiringTargets.map((e,t)=>(0,ht.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 text-sm font-medium rounded-full",children:e},t))})]})]}):(0,ht.jsx)("div",{className:"text-center py-8",children:(0,ht.jsx)("p",{className:"text-gray-500",children:"No project vision available"})})},Ta=t=>{let{project:r,owner:a,currentUser:o,eligibility:s}=t;const[n,i]=(0,e.useState)([]),[l,c]=(0,e.useState)([]),[d,u]=(0,e.useState)(!1),[h,m]=(0,e.useState)(!1),[p,g]=(0,e.useState)("SIGN_IN"),f=o||{id:"user-1",name:"Current User"},v=s||{isMemberCompleted:!0};(0,e.useEffect)(()=>{x()},[r.id]);const x=async()=>{try{const[e,t]=await Promise.all([(0,va.os)(r.id),(0,va.Mg)(r.id)]);i(e),c(t),b(e,t)}catch(e){console.error("Error loading data:",e)}},b=(e,t)=>{if(!f)return void g("SIGN_IN");if(!v.isMemberCompleted)return void g("DISABLED");const r=e.find(e=>e.requesterId===f.id);t.find(e=>e.authorId===f.id)?g("SUBMITTED"):"approved"===(null===r||void 0===r?void 0:r.status)?g("WRITE_COMMENT"):"pending"===(null===r||void 0===r?void 0:r.status)?g("PENDING"):g("SEND_REQUEST")},y=async()=>{m(!0);try{await(0,va.OW)(r.id,f.id),await x()}catch(e){console.error("Error sending request:",e)}finally{m(!1)}},w="completed"===r.status;return(0,ht.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 h-full overflow-auto",children:[w?(0,ht.jsx)(Ia,{comments:l}):(0,ht.jsx)(Aa,{vision:r.vision,owner:a}),w&&(0,ht.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(()=>{const e="w-full py-2 px-4 rounded-lg font-medium transition-all duration-200";switch(p){case"SIGN_IN":return(0,ht.jsx)("button",{className:`${e} bg-purple-600 text-white hover:bg-purple-700`,onClick:()=>window.location.href="/login",children:"Sign in to request review"});case"DISABLED":return(0,ht.jsx)("button",{className:`${e} bg-gray-300 text-gray-500 cursor-not-allowed`,disabled:!0,title:"Only completed members can request to comment.",children:"Request Review"});case"SEND_REQUEST":return(0,ht.jsx)("button",{className:`${e} bg-purple-600 text-white hover:bg-purple-700`,onClick:y,disabled:h,children:h?"Sending...":"Send a Request"});case"PENDING":return(0,ht.jsx)("button",{className:`${e} bg-gray-300 text-gray-500 cursor-not-allowed`,disabled:!0,title:"Waiting for owner approval",children:"Pending Approval"});case"WRITE_COMMENT":return(0,ht.jsx)("button",{className:`${e} bg-purple-600 text-white hover:bg-purple-700`,onClick:()=>u(!0),children:"Write Final Comment"});case"SUBMITTED":return(0,ht.jsx)("button",{className:`${e} bg-green-100 text-green-800 cursor-not-allowed`,disabled:!0,children:"Submitted"});default:return null}})()}),(0,ht.jsx)(Pa,{isOpen:d,onClose:()=>u(!1),onSubmit:async e=>{m(!0);try{await(0,va.mY)(r.id,{authorId:f.id,authorName:f.name,authorRole:"Member",text:e,sentiment:"positive"}),await x(),u(!1)}catch(t){console.error("Error submitting comment:",t)}finally{m(!1)}},isLoading:h})]})},La=e=>{let{isOpen:t,onClose:r,onConfirm:a,positionTitle:o}=e;return t?(0,ht.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ht.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-xl",children:[(0,ht.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,ht.jsx)("div",{className:"flex-shrink-0",children:(0,ht.jsx)("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,ht.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Cancel Application"})]}),(0,ht.jsxs)("div",{className:"mb-6",children:[(0,ht.jsx)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-4",children:(0,ht.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ht.jsx)("svg",{className:"w-5 h-5 text-orange-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("p",{className:"text-orange-800 text-sm font-medium mb-2",children:"Important: Cancellation Consequences"}),(0,ht.jsxs)("ul",{className:"text-orange-700 text-sm space-y-1",children:[(0,ht.jsxs)("li",{children:["\u2022 Your application for ",(0,ht.jsx)("strong",{children:o})," will be withdrawn"]}),(0,ht.jsx)("li",{children:"\u2022 If you reapply later, you'll need to get the project initiator's approval again"}),(0,ht.jsx)("li",{children:"\u2022 Your previous application data will be cleared"})]})]})]})}),(0,ht.jsx)("p",{className:"text-gray-700 text-sm",children:"Are you sure you want to cancel your application? This action cannot be undone."})]}),(0,ht.jsxs)("div",{className:"flex gap-3",children:[(0,ht.jsx)("button",{onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors duration-200",children:"Keep Application"}),(0,ht.jsx)("button",{onClick:a,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors duration-200",children:"Cancel Application"})]})]})}):null},Da=t=>{let{isVisible:r,message:a,onClose:o,duration:s=4e3}=t;const[n,i]=(0,e.useState)(100);return(0,e.useEffect)(()=>{if(r){i(100);const e=setTimeout(()=>{o()},s),t=setInterval(()=>{i(e=>e<=0?(clearInterval(t),0):e-100/(s/50))},50);return()=>{clearTimeout(e),clearInterval(t)}}},[r,s,o]),r?(0,ht.jsx)("div",{className:"fixed top-4 right-4 z-50 transform transition-all duration-300 ease-out translate-x-0 opacity-100",children:(0,ht.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 shadow-lg max-w-sm",children:[(0,ht.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ht.jsx)("div",{className:"flex-shrink-0",children:(0,ht.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,ht.jsx)("div",{className:"flex-1",children:(0,ht.jsx)("p",{className:"text-green-800 text-sm font-medium leading-relaxed",children:a})}),(0,ht.jsx)("button",{onClick:o,className:"flex-shrink-0 text-green-400 hover:text-green-600 transition-colors duration-200",children:(0,ht.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,ht.jsx)("div",{className:"mt-3 h-1 bg-green-200 rounded-full overflow-hidden",children:(0,ht.jsx)("div",{className:"h-full bg-green-500 rounded-full transition-all duration-50 ease-linear",style:{width:`${n}%`}})})]})}):null},Ma=()=>{var t,r,a,o,s,n,i;const{state:l}=xr(),c=Z(),d=(()=>{var t;const{state:r}=xr(),a=Z(),o=r.selectedCollaboration||(null===(t=a.state)||void 0===t?void 0:t.project),[s,n]=(0,e.useState)(new Set),[i,l]=(0,e.useState)(!1),[c,d]=(0,e.useState)("applications"),[u,h]=(0,e.useState)(null),[m,p]=(0,e.useState)(""),[g,f]=(0,e.useState)(!1),[v,x]=(0,e.useState)({name:"",email:"",portfolio:"",message:""}),[b,y]=(0,e.useState)(!1),[w,j]=(0,e.useState)(!1),[k,N]=(0,e.useState)(!1),[C,S]=(0,e.useState)(!1),[_,E]=(0,e.useState)(null),[P,I]=(0,e.useState)((0,ut.HW)()),[A,T]=(0,e.useState)({1:[{id:1,user:"Alex Chen",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",role:"UI/UX Designer",comment:"This position looks perfect for my skill set! I have 3 years of experience with Figma and user research. Would love to discuss the project details.",timestamp:"2 hours ago",likes:2},{id:2,user:"Maya Rodriguez",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",role:"Product Designer",comment:"Great opportunity! I'm particularly interested in the AR try-on feature. Have you considered accessibility considerations for the interface?",timestamp:"4 hours ago",likes:1}],2:[{id:1,user:"David Lee",avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=100&h=100&fit=crop&crop=face",role:"Graphic Designer",comment:"I specialize in branding and have worked on several fashion projects. Would love to contribute to the visual identity!",timestamp:"1 day ago",likes:3}],3:[{id:1,user:"Sophie Wilson",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop&crop=face",role:"Motion Designer",comment:"Position filled! Looking forward to working with the team on the animations.",timestamp:"3 days ago",likes:5}]}),L=(e=>{var t,r,a,o,s;return e?{id:e.id,title:e.title,author:{id:(null===(t=e.author)||void 0===t?void 0:t.id)||e.id,title:e.title,artist:(null===(r=e.author)||void 0===r?void 0:r.name)||"Unknown",artistAvatar:(null===(a=e.author)||void 0===a?void 0:a.avatar)||null,description:e.subtitle,image:e.posterPreview||e.image,category:(null===(o=e.categories)||void 0===o?void 0:o[0])||"Project",likes:e.likes,views:e.views,timeAgo:"2 hours ago",role:(null===(s=e.author)||void 0===s?void 0:s.role)||"Initiator"},duration:"3-4 months",teamSize:"5-6 people",postedTime:"2 hours ago",tags:e.categories||["Project"],heroImage:e.posterPreview||e.image,description:e.subtitle+". We're looking for passionate designers and developers to join our team and create something amazing together.",meetingFrequency:"2-3 times/week",deadline:"Dec 15, 2024",contactInfo:{discord:"project_lead#1234",email:"project.lead@email.com"},status:"in_progress",vision:{tagline:"Building the future of creative collaboration",narrative:"We're creating a platform that connects talented designers and developers to build amazing digital experiences together. Our vision is to make collaboration seamless, inspiring, and productive.\n\nThis project will showcase the power of interdisciplinary teamwork and innovative design thinking. We're looking for passionate individuals who share our vision and want to make a real impact.",hiringTargets:["UI/UX Designer","Frontend Developer","Motion Designer"],contact:{discord:"project_lead#1234",email:"project.lead@email.com"}},milestones:2===e.id?[]:[{id:1,title:"Project Planning",status:"completed",dueDate:"Week 1"},{id:2,title:"Design Phase",status:"completed",dueDate:"Week 3"},{id:3,title:"Development Phase",status:"in-progress",dueDate:"Week 6"},{id:4,title:"Testing & QA",status:"pending",dueDate:"Week 8"},{id:5,title:"Launch Preparation",status:"pending",dueDate:"Week 10"}]}:{id:1,title:"Modern E-commerce Mobile App",author:{id:1,title:"Modern E-commerce Mobile App",artist:"Sarah Chen",artistAvatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",description:"A cutting-edge mobile shopping experience",image:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=800&h=600&fit=crop",category:"Mobile App",likes:128,views:2048,timeAgo:"2 hours ago",role:"Initiator"},duration:"3-4 months",teamSize:"5-6 people",postedTime:"2 hours ago",tags:["Mobile App","E-commerce","React Native"],heroImage:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=800&h=600&fit=crop",description:"We're building a modern e-commerce mobile app that will revolutionize the shopping experience. Our vision is to create a seamless, intuitive, and engaging platform that connects customers with amazing products.\n\nWe're looking for passionate designers and developers to join our team and create something amazing together.",meetingFrequency:"2-3 times/week",deadline:"Dec 15, 2024",contactInfo:{discord:"project_lead#1234",email:"project.lead@email.com"},status:"in_progress",vision:{tagline:"Building the future of creative collaboration",narrative:"We're creating a platform that connects talented designers and developers to build amazing digital experiences together. Our vision is to make collaboration seamless, inspiring, and productive.\n\nThis project will showcase the power of interdisciplinary teamwork and innovative design thinking. We're looking for passionate individuals who share our vision and want to make a real impact.",hiringTargets:["UI/UX Designer","Frontend Developer","Motion Designer"],contact:{discord:"project_lead#1234",email:"project.lead@email.com"}},milestones:[{id:1,title:"Project Planning",status:"completed",dueDate:"Week 1"},{id:2,title:"Design Phase",status:"completed",dueDate:"Week 3"},{id:3,title:"Development Phase",status:"in-progress",dueDate:"Week 6"},{id:4,title:"Testing & QA",status:"pending",dueDate:"Week 8"},{id:5,title:"Launch Preparation",status:"pending",dueDate:"Week 10"}]}})(o),D=[{id:1,title:"UI/UX Designer",description:"We're looking for a talented UI/UX designer to create beautiful, intuitive user interfaces and engaging user experiences. You'll work closely with our development team to bring designs to life.",status:"available",skills:["Figma","Adobe Creative Suite","User Research","Prototyping","Design Systems"],applications:[{id:1,name:"Alex Chen",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"2 hours ago"},{id:2,name:"Maya Rodriguez",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",status:"approved",appliedAt:"4 hours ago"},{id:3,name:"David Kim",avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"6 hours ago"},{id:4,name:"Sarah Wilson",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"1 day ago"},{id:5,name:"James Lee",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"1 day ago"},{id:6,name:"Emma Davis",avatar:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"2 days ago"},{id:7,name:"Michael Brown",avatar:"https://images.unsplash.com/photo-1519345182560-3f2917c472ef?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"2 days ago"},{id:8,name:"Lisa Zhang",avatar:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"3 days ago"},{id:9,name:"Tom Anderson",avatar:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"3 days ago"},{id:10,name:"Rachel Green",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"4 days ago"},{id:11,name:"Chris Johnson",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"4 days ago"},{id:12,name:"Anna White",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"5 days ago"}]},{id:2,title:"Frontend Developer",description:"Join our frontend team to build responsive, performant web applications using modern technologies. You'll collaborate with designers and backend developers to create seamless user experiences.",status:"available",skills:["React","TypeScript","CSS/SCSS","JavaScript","Responsive Design"],applications:[{id:1,name:"Daniel Park",avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=100&h=100&fit=crop&crop=face",status:"approved",appliedAt:"1 hour ago"},{id:2,name:"Sophie Turner",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"3 hours ago"},{id:3,name:"Kevin Chen",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"5 hours ago"},{id:4,name:"Maria Garcia",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"1 day ago"},{id:5,name:"Ryan Miller",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"1 day ago"},{id:6,name:"Jessica Wang",avatar:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"2 days ago"},{id:7,name:"Andrew Smith",avatar:"https://images.unsplash.com/photo-1519345182560-3f2917c472ef?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"2 days ago"},{id:8,name:"Nina Patel",avatar:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"3 days ago"}]},{id:3,title:"Motion Designer",description:"Create stunning animations and motion graphics that enhance user engagement and bring our digital experiences to life. You'll work on micro-interactions, loading states, and brand animations.",status:"filled",skills:["After Effects","Lottie","Principle","Animation","Storyboarding"],applications:[{id:1,name:"Sophie Wilson",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop&crop=face",status:"approved",appliedAt:"3 days ago"},{id:2,name:"Carlos Rodriguez",avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"4 days ago"},{id:3,name:"Amanda Foster",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"5 days ago"},{id:4,name:"Marcus Johnson",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"1 week ago"},{id:5,name:"Elena Silva",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"1 week ago"},{id:6,name:"Brian Thompson",avatar:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"1 week ago"},{id:7,name:"Yuki Tanaka",avatar:"https://images.unsplash.com/photo-1519345182560-3f2917c472ef?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"1 week ago"},{id:8,name:"Isabella Martinez",avatar:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"1 week ago"},{id:9,name:"Robert Davis",avatar:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"1 week ago"},{id:10,name:"Grace Lee",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"1 week ago"},{id:11,name:"Thomas Anderson",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"1 week ago"},{id:12,name:"Olivia White",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"1 week ago"},{id:13,name:"Lucas Brown",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"1 week ago"},{id:14,name:"Zoe Clark",avatar:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"1 week ago"},{id:15,name:"Nathan Taylor",avatar:"https://images.unsplash.com/photo-1519345182560-3f2917c472ef?w=100&h=100&fit=crop&crop=face",status:"pending",appliedAt:"1 week ago"}]}];return(0,e.useEffect)(()=>{const e=()=>{I((0,ut.HW)())};return window.addEventListener("user:changed",e),()=>{window.removeEventListener("user:changed",e)}},[]),(0,e.useEffect)(()=>{null!==L&&void 0!==L&&L.id&&(async()=>{try{const e=await Ht.zF.checkFavoriteStatus("collaboration",L.id);e.success&&l(e.data.isFavorited)}catch(e){console.error("Failed to check favorite status:",e)}})()},[null===L||void 0===L?void 0:L.id]),{project:L,projectData:o,positions:D,appliedPositions:s,isSaved:i,activePositionTab:c,selectedPosition:u,comment:m,showApplyModal:g,applyForm:v,hasSubmittedApplication:b,showWarning:w,showSuccessToast:k,showCancelModal:C,cancelPositionId:_,currentUser:P,positionComments:A,enableProjectProgressBar:!0,enableAfterFinishedReview:!0,enableReviewApprovalPanel:!1,setAppliedPositions:n,setIsSaved:l,setActivePositionTab:d,setSelectedPosition:h,setComment:p,setShowApplyModal:f,setApplyForm:x,setHasSubmittedApplication:y,setShowWarning:j,setShowSuccessToast:N,setShowCancelModal:S,setCancelPositionId:E,setCurrentUser:I,setPositionComments:T}})(),u=((e,t)=>{const{goBack:r,navigateToMilestone:a,navigateToArtist:o}=_r(),{appliedPositions:s,selectedPosition:n,comment:i,positionComments:l,hasSubmittedApplication:c,showWarning:d,showSuccessToast:u,showCancelModal:h,cancelPositionId:m}=e,{setAppliedPositions:p,setSelectedPosition:g,setComment:f,setPositionComments:v,setHasSubmittedApplication:x,setShowWarning:b,setShowSuccessToast:y,setShowCancelModal:w,setCancelPositionId:j,setShowApplyModal:k,setApplyForm:N,setIsSaved:C,setActivePositionTab:S}=t;return{goBack:r,navigateToMilestone:a,navigateToArtist:o,handleApply:e=>{if(!c)return b(!0),void setTimeout(()=>b(!1),3e3);p(t=>{const r=new Set(t);return r.add(e),r})},handleApplyNowClick:()=>{k(!0)},handleApplySubmit:e=>{e.preventDefault(),x(!0),k(!1),N({name:"",email:"",portfolio:"",message:""}),y(!0)},handleApplyFormChange:e=>{const{name:t,value:r}=e.target;N(e=>({...e,[t]:r}))},handleCancelApplication:e=>{j(e),w(!0)},handleConfirmCancelApplication:()=>{m&&p(e=>{const t=new Set(e);return t.delete(m),t}),w(!1),j(null)},handleCloseCancelModal:()=>{w(!1),j(null)},handleViewMilestones:()=>{a(e.project)},handleSaveToggle:async(e,t,r)=>{try{await Ht.zF.toggleFavorite(e,t,r),C(r)}catch(a){console.error("Failed to toggle favorite:",a)}},handleCommentSubmit:t=>{var r,a,o;if(t.preventDefault(),!i.trim()||!n)return;const s={id:Date.now(),user:(null===(r=e.currentUser)||void 0===r?void 0:r.name)||"Anonymous",avatar:(null===(a=e.currentUser)||void 0===a?void 0:a.avatar)||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",role:(null===(o=e.currentUser)||void 0===o?void 0:o.role)||"User",comment:i,timestamp:"Just now",likes:0};v(e=>({...e,[n]:[s,...e[n]]})),f("")},handlePositionTabClick:(e,t)=>{g(e),S(t)},getStatusColor:_a,getStatusText:Ea}})(d,{setAppliedPositions:d.setAppliedPositions,setSelectedPosition:d.setSelectedPosition,setComment:d.setComment,setPositionComments:d.setPositionComments,setHasSubmittedApplication:d.setHasSubmittedApplication,setShowWarning:d.setShowWarning,setShowSuccessToast:d.setShowSuccessToast,setShowCancelModal:d.setShowCancelModal,setCancelPositionId:d.setCancelPositionId,setShowApplyModal:d.setShowApplyModal,setApplyForm:d.setApplyForm,setIsSaved:d.setIsSaved,setActivePositionTab:d.setActivePositionTab});return(0,e.useEffect)(()=>{var e;"tagme"===(null===(e=c.state)||void 0===e?void 0:e.from)||l.navigationHistory.length>0&&"/tagme"===l.navigationHistory[l.navigationHistory.length-1].path||"/tagme"===c.pathname||window.scrollTo({top:0,behavior:"auto"})},[c.pathname]),(0,ht.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ht.jsx)(ka,{project:d.project,isSaved:d.isSaved,onBack:u.goBack,onSaveToggle:u.handleSaveToggle,onApplyNow:u.handleApplyNowClick,onViewMilestones:u.handleViewMilestones,enableProjectProgressBar:d.enableProjectProgressBar}),(0,ht.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,ht.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,ht.jsx)(Sa,{project:d.project,positions:d.positions,hasSubmittedApplication:d.hasSubmittedApplication,showWarning:d.showWarning,appliedPositions:d.appliedPositions,selectedPosition:d.selectedPosition,activePositionTab:d.activePositionTab,comment:d.comment,positionComments:d.positionComments,onApply:u.handleApply,onCancelApplication:u.handleCancelApplication,onPositionTabClick:u.handlePositionTabClick,onCommentChange:e=>d.setComment(e.target.value),onSubmitComment:u.handleCommentSubmit,navigateToArtist:u.navigateToArtist,getStatusColor:u.getStatusColor,getStatusText:u.getStatusText}),(0,ht.jsxs)("div",{className:"lg:col-span-1",children:[(0,ht.jsx)(Ta,{project:d.project,owner:d.project.author,currentUser:null,eligibility:{isMemberCompleted:!0}}),d.enableReviewApprovalPanel&&(0,ht.jsx)("div",{className:"mt-6",children:(0,ht.jsx)(xa,{projectId:d.project.id,isOwner:!0})})]})]}),(0,ht.jsx)("div",{className:"mt-8",children:(0,ht.jsx)(fa,{isLoggedIn:!0,isProjectMember:!0,hasCompletedTasks:!0,requestStatus:"none",hasSubmittedFinalComment:!1,finalComments:[],projectId:(null===(t=d.projectData)||void 0===t?void 0:t.id)||"proj_01",userId:(null===(r=d.currentUser)||void 0===r?void 0:r.id)||"bryan",userName:(null===(a=d.currentUser)||void 0===a?void 0:a.name)||"Bryan",userRole:(null===(o=d.currentUser)||void 0===o?void 0:o.role)||"Collaborator",projectName:(null===(s=d.projectData)||void 0===s?void 0:s.title)||"Interactive Web Experience",onSendRequest:()=>{},onSubmitComment:e=>{}})})]}),(0,ht.jsx)(ba,{isOpen:d.showApplyModal,onClose:()=>d.setShowApplyModal(!1),applyForm:d.applyForm,onFormChange:u.handleApplyFormChange,onSubmit:u.handleApplySubmit}),(0,ht.jsx)(Da,{isVisible:d.showSuccessToast,message:"Application submitted successfully! You can now apply for specific positions.",onClose:()=>d.setShowSuccessToast(!1),duration:5e3}),(0,ht.jsx)(La,{isOpen:d.showCancelModal,onClose:u.handleCloseCancelModal,onConfirm:u.handleConfirmCancelApplication,positionTitle:(null===(n=d.positions)||void 0===n||null===(i=n.find(e=>e.id===d.cancelPositionId))||void 0===i?void 0:i.title)||"this position"})]})},Ra=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},$a=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>Boolean(e)&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},Fa=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var Oa={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ua=(0,e.forwardRef)((t,r)=>{let{color:a="currentColor",size:o=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:i="",children:l,iconNode:c,...d}=t;return(0,e.createElement)("svg",{ref:r,...Oa,width:o,height:o,stroke:a,strokeWidth:n?24*Number(s)/Number(o):s,className:$a("lucide",i),...!l&&!Fa(d)&&{"aria-hidden":"true"},...d},[...c.map(t=>{let[r,a]=t;return(0,e.createElement)(r,a)}),...Array.isArray(l)?l:[l]])}),za=(t,r)=>{const a=(0,e.forwardRef)((a,o)=>{let{className:s,...n}=a;return(0,e.createElement)(Ua,{ref:o,iconNode:r,className:$a(`lucide-${i=Ra(t),i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${t}`,s),...n});var i});return a.displayName=Ra(t),a},Wa=za("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ba="Modal_overlay__P+H2T",qa="Modal_modal__rilJw",Ha="Modal_closeButton__9bf7g",Va="Modal_content__pgGBX",Ga="Modal_title__Wb1XE",Ja="Modal_body__UvKYn",Ka="Modal_emailLink__FjN3V",Ya="Modal_divider__RvwIc",Za="Modal_signature__g8MvT",Qa="Modal_actions__o32Lt",Xa="Modal_primaryButton__lttlk",eo=e=>{let{isOpen:t,onClose:r,onGoToCompetition:a}=e;if(!t)return null;return(0,ht.jsx)("div",{className:Ba,onClick:e=>{e.target===e.currentTarget&&r()},children:(0,ht.jsxs)("div",{className:qa,children:[(0,ht.jsx)("button",{className:Ha,onClick:r,children:(0,ht.jsx)(Wa,{size:20})}),(0,ht.jsxs)("div",{className:Va,children:[(0,ht.jsx)("h2",{className:Ga,children:"Student Competitions 2025 \u2014 Notice"}),(0,ht.jsxs)("div",{className:Ja,children:[(0,ht.jsx)("p",{children:"This competition is currently in testing (beta)."}),(0,ht.jsx)("p",{children:"Some website features are still under development and will be released gradually."}),(0,ht.jsxs)("p",{children:["If you have any questions, please email:"," ",(0,ht.jsx)("a",{href:"mailto:tag@rainwang.art",className:Ka,children:"tag@rainwang.art"})]})]}),(0,ht.jsx)("div",{className:Ya}),(0,ht.jsx)("div",{className:Za,children:(0,ht.jsx)("p",{children:"Founder of TAG \u2014 Rain Wang"})}),(0,ht.jsx)("div",{className:Qa,children:(0,ht.jsx)("button",{className:Xa,onClick:()=>{a(),r()},children:"I Understand"})})]})]})})},to=()=>{const[t,r]=(0,e.useState)(!1);return(0,ht.jsxs)(ht.Fragment,{children:[(0,ht.jsx)("section",{className:"py-16 bg-white",children:(0,ht.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[(0,ht.jsx)("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-tag-blue mb-6",children:"Student Competitions 2025"}),(0,ht.jsx)("p",{className:"text-lg md:text-xl text-tag-blue mb-8 max-w-2xl mx-auto leading-relaxed opacity-90",children:"Participate in exciting design challenges and win recognition from industry professionals."}),(0,ht.jsxs)("button",{onClick:e=>{e.preventDefault(),r(!0)},className:"bg-tag-blue text-white px-8 py-3 rounded-md text-lg font-medium hover:bg-tag-dark-blue transition-colors duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1 inline-flex items-center",children:[(0,ht.jsx)("svg",{className:"w-6 h-6 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ht.jsx)("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Join Now"]})]})}),(0,ht.jsx)(eo,{isOpen:t,onClose:()=>{r(!1)},onGoToCompetition:()=>{window.location.href="/tagme/co-future-2025"}})]})},ro={listStyle:"none",listStyleType:"none",listStyleImage:"none",listStylePosition:"outside"},ao=t=>{let{onArtistClick:r}=t;const[a,o]=(0,e.useState)([]),[s,n]=(0,e.useState)(!0),[i,l]=(0,e.useState)(null),{navigateToArtist:c}=_r();(0,e.useEffect)(()=>{const e=document.createElement("style");return e.textContent="\n      .no-markers::before,\n      .no-markers::after,\n      .no-markers *::before,\n      .no-markers *::after {\n        content: none !important;\n        display: none !important;\n      }\n      .no-markers {\n        list-style: none !important;\n        list-style-type: none !important;\n        list-style-image: none !important;\n      }\n    ",document.head.appendChild(e),()=>{document.head.removeChild(e)}},[]),(0,e.useEffect)(()=>{d()},[]);const d=async()=>{try{n(!0);const e=await Ht.$F.getPublicArtists();e&&e.success?(console.log("[ArtistsList] Loaded artists:",e.data.length),o(e.data)):(console.error("[ArtistsList] Failed to load artists:",null===e||void 0===e?void 0:e.error),l("Failed to load artists"))}catch(i){console.error("[ArtistsList] Error loading artists:",i),l("Error loading artists")}finally{n(!1)}};return s?(0,ht.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,ht.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-tag-blue"}),(0,ht.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading artists..."})]}):i?(0,ht.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,ht.jsxs)("div",{className:"text-red-500 text-center",children:[(0,ht.jsx)("p",{className:"text-lg font-medium",children:"Error loading artists"}),(0,ht.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:i}),(0,ht.jsx)("button",{onClick:d,className:"mt-4 px-4 py-2 bg-tag-blue text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Try Again"})]})}):0===a.length?(0,ht.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,ht.jsxs)("div",{className:"text-center",children:[(0,ht.jsx)("p",{className:"text-lg font-medium text-gray-900",children:"No artists found"}),(0,ht.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Check back later for new artists"})]})}):(0,ht.jsx)("div",{className:"space-y-0 list-none no-markers",style:ro,children:a.map(e=>{return(0,ht.jsx)("div",{className:"group cursor-pointer bg-white border-b border-gray-200 p-6 hover:bg-gray-50 transition-all duration-300 block",style:ro,onClick:t=>((e,t)=>{c(e.id,"artists","Artists",t.currentTarget)})(e,t),"data-artist-id":e.id,children:(0,ht.jsxs)("div",{className:"flex gap-4",children:[(0,ht.jsx)("div",{className:"flex-shrink-0",children:(0,ht.jsx)("img",{src:e.avatar||"/assets/placeholder.svg",alt:e.name,className:"w-40 h-32 object-cover rounded-lg group-hover:scale-105 transition-transform duration-300"})}),(0,ht.jsxs)("div",{className:"flex-1 flex flex-col justify-center",children:[(0,ht.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2 group-hover:text-tag-blue transition-colors duration-200",children:e.name}),(0,ht.jsx)("span",{className:"text-sm text-gray-500 mb-2",children:e.role}),(0,ht.jsx)("div",{className:"mb-4",children:e.bio?(0,ht.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:e.bio}):(0,ht.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,ht.jsx)("span",{className:"bg-blue-100 text-blue-700 text-xs px-2 py-1 rounded-full",children:e.title||"Artist"}),e.school&&(0,ht.jsx)("span",{className:"bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full",children:e.school}),e.majors&&e.majors.length>0&&e.majors.map((e,t)=>(0,ht.jsx)("span",{className:"bg-purple-100 text-purple-700 text-xs px-2 py-1 rounded-full",children:e},t))]})}),(0,ht.jsxs)("div",{className:"flex items-center gap-6 text-sm text-gray-500",children:[(0,ht.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ht.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),(0,ht.jsxs)("span",{children:[e.worksCount||0," works"]})]}),(0,ht.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ht.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),(0,ht.jsxs)("span",{children:[e.followers||0," followers"]})]}),(0,ht.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ht.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(0,ht.jsxs)("span",{children:[e.following||0," following"]})]}),(0,ht.jsx)("span",{className:`px-2 py-1 text-xs font-medium text-white rounded-full ${t=e.role,{"Visual Effects":"bg-blue-500","Game Design":"bg-purple-500","UI/UX":"bg-green-500",Illustration:"bg-pink-500","Fine Art":"bg-yellow-500","3D Model":"bg-indigo-500",Animation:"bg-red-500",Photography:"bg-gray-500"}[t]||"bg-gray-500"}`,children:e.role}),e.school&&(0,ht.jsx)("span",{className:"text-gray-400",children:e.school})]})]})]})},e.id);var t})})},oo=t=>{let{currentUser:r}=t;const{navigateToWork:a,navigateToArtist:o}=_r(),[s,n]=(0,e.useState)([]),[i,l]=(0,e.useState)(!0),[c,d]=(0,e.useState)(null),u=(0,e.useCallback)(async()=>{try{l(!0),d(null);const e=await(0,Dr.S5)();if(e.success){const t=e.data.filter(e=>e&&e.id).map(e=>{var t;const r=e.thumbnailPath||e.imagePaths&&e.imagePaths[0]||"/assets/placeholder.svg";return console.log(`[GalleryGrid] Item ${e.id}:`,{title:e.title,thumbnailPath:e.thumbnailPath,imagePaths:e.imagePaths,finalImage:"string"===typeof r?r.substring(0,50)+"...":"Invalid image type"}),{id:e.id||"unknown",title:e.title||"Untitled",artist:(null===(t=e.profiles)||void 0===t?void 0:t.full_name)||"Unknown Artist",image:r,category:e.category||"design",tags:e.tags||[],description:e.description||"",createdAt:e.createdAt||(new Date).toISOString()}});n(t)}else d(e.error||"Failed to load artworks"),n([])}catch(c){console.error("Error loading artworks:",c),d("Failed to load artworks"),n([])}finally{l(!1)}},[]);(0,e.useEffect)(()=>{u()},[u]);const h=s;return i?(0,ht.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-0",children:[...Array(6)].map((e,t)=>(0,ht.jsx)("div",{className:"aspect-square bg-gray-200 animate-pulse"},t))}):c?(0,ht.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,ht.jsx)("div",{className:"text-gray-400 mb-4",children:(0,ht.jsx)("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,ht.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Failed to load artworks"}),(0,ht.jsx)("p",{className:"text-gray-600 mb-4",children:c}),(0,ht.jsx)("button",{onClick:u,className:"px-4 py-2 bg-tag-blue text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Try Again"})]}):0===h.length?(0,ht.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,ht.jsx)("div",{className:"text-gray-400 mb-4",children:(0,ht.jsx)("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,ht.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No artworks found"}),(0,ht.jsx)("p",{className:"text-gray-600 mb-4",children:"Be the first to upload your work and share it with the community!"}),(0,ht.jsx)(at,{to:"/upload",className:"px-4 py-2 bg-tag-blue text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Upload Your Work"})]}):(0,ht.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-0",children:h.map(e=>(0,ht.jsxs)(at,{to:`/work/${e.id}`,className:"group cursor-pointer relative overflow-hidden aspect-square w-full h-full",children:[(0,ht.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",style:{display:"block"}}),(0,ht.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:(0,ht.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-4 text-white",children:[(0,ht.jsx)("h3",{className:"text-lg font-bold mb-1 leading-tight",children:e.title}),(0,ht.jsx)("p",{className:"text-sm text-gray-200",children:e.artist})]})})]},e.id))})},so=()=>{const[t,r]=(0,e.useState)(new Set),a=e=>{let{rating:t,reviews:r}=e;const a=[];for(let o=0;o<5;o++)o<t?a.push((0,ht.jsx)("svg",{className:"h-4 w-4 text-yellow-400 fill-current",viewBox:"0 0 20 20",children:(0,ht.jsx)("path",{d:"M10 15.27L16.18 19l-1.64-7.03L20 7.24l-7.19-.61L10 0 7.19 6.63 0 7.24l5.46 4.73L3.82 19z"})},o)):a.push((0,ht.jsx)("svg",{className:"h-4 w-4 text-gray-300 fill-current",viewBox:"0 0 20 20",children:(0,ht.jsx)("path",{d:"M10 15.27L16.18 19l-1.64-7.03L20 7.24l-7.19-.61L10 0 7.19 6.63 0 7.24l5.46 4.73L3.82 19z"})},o));return(0,ht.jsxs)("div",{className:"flex items-center",children:[(0,ht.jsx)("div",{className:"flex mr-1",children:a}),(0,ht.jsxs)("span",{className:"text-sm text-gray-500",children:["(",r,")"]})]})};return(0,ht.jsxs)("div",{className:"py-8",children:[(0,ht.jsx)("div",{className:"text-center py-8 mb-8",children:(0,ht.jsx)("p",{className:"text-red-500 text-lg font-medium",children:"Market feature coming soon..."})}),(0,ht.jsxs)("div",{className:"mb-8",children:[(0,ht.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-2 text-center",children:"Marketplace Preview"}),(0,ht.jsx)("p",{className:"text-gray-600 text-center mb-8",children:"Discover student-created assets, tools, and resources"})]}),(0,ht.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{id:1,image:"/assets/placeholder.svg",title:"Auto Retopology Tool",description:"Advanced mesh optimization plugin for Blender",price:"$15",originalPrice:"$25",author:"Alex Chen",authorAvatar:"/assets/placeholder.svg",rating:5,reviews:24,downloads:"1.2k"},{id:2,image:"/assets/placeholder.svg",title:"Sci-Fi Character Pack",description:"High-poly character models with PBR textures",price:"$45",originalPrice:null,author:"Maya Rodriguez",authorAvatar:"/assets/placeholder.svg",rating:4,reviews:856,downloads:"856"},{id:3,image:"/assets/placeholder.svg",title:"Procedural Building Generator",description:"Generate realistic buildings with customizable parameters",price:"$79",originalPrice:"$99",author:"John Doe",authorAvatar:"/assets/placeholder.svg",rating:4,reviews:120,downloads:"3.5k"},{id:4,image:"/assets/placeholder.svg",title:"Ocean Shader Pack",description:"Realistic ocean shaders for various rendering engines",price:"$29",originalPrice:null,author:"Oceanic Arts",authorAvatar:"/assets/placeholder.svg",rating:5,reviews:78,downloads:"900"},{id:5,image:"/assets/placeholder.svg",title:"UI Kit - Modern Dashboard",description:"Complete UI kit for modern web applications",price:"$35",originalPrice:"$50",author:"Design Studio",authorAvatar:"/assets/placeholder.svg",rating:5,reviews:156,downloads:"2.1k"},{id:6,image:"/assets/placeholder.svg",title:"Animation Rigging System",description:"Professional character rigging for Maya and Blender",price:"$89",originalPrice:null,author:"Animation Pro",authorAvatar:"/assets/placeholder.svg",rating:4,reviews:203,downloads:"1.8k"}].map(e=>(0,ht.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-4 hover:shadow-md transition-all duration-300 cursor-pointer group",children:[(0,ht.jsxs)("div",{className:"relative mb-4",children:[(0,ht.jsx)("img",{src:e.image,alt:e.title,className:"w-full aspect-[4/3] object-cover rounded-lg"}),(0,ht.jsx)("button",{onClick:t=>{var a;t.stopPropagation(),a=e.id,r(e=>{const t=new Set(e);return t.has(a)?t.delete(a):t.add(a),t})},className:"absolute top-2 right-2 p-2 bg-white/80 backdrop-blur-sm rounded-full hover:bg-white transition-colors duration-200",children:(0,ht.jsx)("svg",{className:"w-5 h-5 "+(t.has(e.id)?"text-red-500 fill-current":"text-gray-400 hover:text-red-500"),fill:t.has(e.id)?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]}),(0,ht.jsxs)("div",{className:"space-y-3",children:[(0,ht.jsx)("h4",{className:"text-lg font-bold text-gray-900 group-hover:text-tag-blue transition-colors duration-200",children:e.title}),(0,ht.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.description}),(0,ht.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,ht.jsx)("span",{className:"text-xl font-bold text-tag-blue",children:e.price}),e.originalPrice&&(0,ht.jsx)("span",{className:"text-sm text-gray-400 line-through",children:e.originalPrice})]}),(0,ht.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,ht.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ht.jsx)("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),(0,ht.jsxs)("span",{children:[e.downloads," downloads"]})]}),(0,ht.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[(0,ht.jsxs)("div",{className:"flex items-center",children:[(0,ht.jsx)("img",{src:e.authorAvatar,alt:e.author,className:"w-6 h-6 rounded-full mr-2"}),(0,ht.jsx)("span",{className:"text-sm text-gray-700",children:e.author})]}),(0,ht.jsx)(a,{rating:e.rating,reviews:e.reviews})]})]})]},e.id))})]})},no=()=>{const[t,r]=(0,e.useState)("Works"),[a,o]=(0,e.useState)(!0),[s,n]=(0,e.useState)((0,ut.HW)()),{navigateToArtist:i}=_r(),{state:l}=xr(),c=Z();(0,e.useEffect)(()=>{var e,t;if(l.navigationHistory.length>0){const e=l.navigationHistory[l.navigationHistory.length-1];if(console.log("[GallerySection] Navigation history:",e),e.fromNavbar&&"gallery"===e.from)return console.log("[GallerySection] From navbar Gallery button, setting Works tab"),r("Works"),void o(!1)}if("upload-success"===(null===(e=c.state)||void 0===e?void 0:e.from))r(c.state.activeTab||"Works"),c.state.scrollToGallery?requestAnimationFrame(()=>{const e=document.querySelector('[data-section="gallery"]');if(e){const t=e.getBoundingClientRect(),r=window.pageYOffset+t.top-80;window.scrollTo({top:r,behavior:"auto"})}o(!1)}):o(!1),window.history.replaceState({},document.title);else if("artist-profile"===(null===(t=c.state)||void 0===t?void 0:t.from)){console.log("[GallerySection] Returning from artist-profile, setting activeTab:",c.state.activeTab),r(c.state.activeTab||"Works");const e=l.scrollPositions["/"];if(e){const t="object"===typeof e?e.scrollY:e,r="object"===typeof e?e.elementInfo:null;console.log("[GallerySection] Restoring saved position:",t),console.log("[GallerySection] Element info:",r),requestAnimationFrame(()=>{window.scrollTo({top:t,behavior:"auto"}),r&&"artist"===r.type&&setTimeout(()=>{const e=document.querySelector(`[data-artist-id="${r.id}"]`);console.log("[GallerySection] Target element found:",!!e),e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),e.classList.add("bg-blue-50","border-2","border-blue-300"),setTimeout(()=>{e.classList.remove("bg-blue-50","border-2","border-blue-300")},2e3))},100)})}else c.state.scrollToGallery&&requestAnimationFrame(()=>{const e=document.querySelector('[data-section="gallery"]');if(e){const t=e.getBoundingClientRect(),r=window.pageYOffset+t.top-80;window.scrollTo({top:r,behavior:"auto"})}});o(!1),window.history.replaceState({},document.title)}else{const e=l.scrollPositions["/"];if(void 0!==e&&requestAnimationFrame(()=>{window.scrollTo({top:e,behavior:"auto"})}),l.navigationHistory.length>0){const e=l.navigationHistory[l.navigationHistory.length-1];e.activeTab&&"gallery"===e.from&&!e.fromNavbar?r(e.activeTab):r("Works")}else r("Works");o(!1)}},[c.state,l.scrollPositions,l.navigationHistory]),(0,e.useEffect)(()=>{const e=()=>{n((0,ut.HW)())};return window.addEventListener("user:changed",e),()=>{window.removeEventListener("user:changed",e)}},[]);const d=["Works","Artists","Market"];return a?(0,ht.jsx)("section",{className:"py-16 bg-gray-50","data-section":"gallery",children:(0,ht.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,ht.jsxs)("div",{className:"flex flex-col mb-8",children:[(0,ht.jsx)("h2",{className:"text-3xl font-bold text-gray-400 mb-6",children:"TAG Gallery"}),(0,ht.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,ht.jsx)("div",{className:"w-7/12",children:(0,ht.jsx)("div",{className:"h-10 bg-gray-200 rounded-md animate-pulse"})}),(0,ht.jsx)("div",{className:"inline-flex rounded-full border border-gray-300 bg-white p-1",children:d.map(e=>(0,ht.jsxs)("button",{className:"relative px-12 py-3 text-base font-semibold tracking-wide "+(t===e?"text-white":"text-gray-700"),children:[t===e&&(0,ht.jsx)("div",{className:"absolute inset-0 bg-tag-blue rounded-full"}),(0,ht.jsx)("span",{className:"relative z-10",children:e})]},e))})]})]}),(0,ht.jsx)("div",{className:"flex-1",children:(0,ht.jsx)("div",{className:"animate-pulse",children:(0,ht.jsx)("div",{className:"h-64 bg-gray-200 rounded-lg"})})})]})}):(0,ht.jsx)("section",{className:"py-16 bg-gray-50","data-section":"gallery",children:(0,ht.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,ht.jsxs)("div",{className:"flex flex-col mb-8",children:[(0,ht.jsx)("h2",{className:"text-3xl font-bold text-gray-400 mb-6",children:"TAG Gallery"}),(0,ht.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,ht.jsx)("div",{className:"w-7/12",children:(0,ht.jsx)(vt,{onInputChange:e=>console.log("Search:",e.target.value),placeholder:"Search for Works or Artists",className:"w-full"})}),(0,ht.jsx)("div",{className:"inline-flex rounded-full border border-gray-300 bg-white p-1",children:d.map((e,a)=>(0,ht.jsxs)("button",{onClick:()=>r(e),className:"relative px-12 py-3 text-base font-semibold tracking-wide transition-all duration-300 ease-in-out "+(t===e?"text-white":"text-gray-700 hover:text-gray-900"),children:[t===e&&(0,ht.jsx)("div",{className:"absolute inset-0 bg-tag-blue rounded-full transition-all duration-300 ease-in-out"}),(0,ht.jsx)("span",{className:"relative z-10",children:e})]},e))})]})]}),(0,ht.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,ht.jsx)("div",{className:"hidden lg:block lg:w-64 flex-shrink-0",children:(0,ht.jsx)(wr,{})}),(0,ht.jsxs)("div",{className:"flex-1",children:["Works"===t&&(0,ht.jsx)(oo,{currentUser:s}),"Artists"===t&&(0,ht.jsx)(ao,{onArtistClick:e=>{i(e.id,"gallery",t)}}),"Market"===t&&(0,ht.jsx)(so,{})]})]})]})})},io=()=>(0,ht.jsx)("section",{className:"pt-20 pb-16 bg-white",children:(0,ht.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[(0,ht.jsx)("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 mb-6",children:"Discover Amazing Student Creative Work"}),(0,ht.jsx)("p",{className:"text-lg md:text-xl text-gray-600 mb-8 max-w-3xl mx-auto leading-relaxed",children:"Explore thousands of inspiring projects from talented students across the globe. From 3D art to concept design, find your next creative inspiration."}),(0,ht.jsx)("button",{onClick:()=>{},className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-md text-lg font-medium hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:"About TAG"})]})}),lo=()=>{const t=ee(),{login:r}=pt(),[a,o]=(0,e.useState)({email:"",password:"",rememberMe:!1}),[s,n]=(0,e.useState)(!1),i=e=>{const{name:t,value:r,type:a,checked:s}=e.target;o(e=>({...e,[t]:"checkbox"===a?s:r}))};return(0,ht.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[(0,ht.jsx)("div",{className:"flex-1 flex items-center justify-center px-4 sm:px-6 lg:px-8",children:(0,ht.jsx)("div",{className:"max-w-md w-full space-y-8",children:(0,ht.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,ht.jsx)("div",{className:"text-center mb-8",children:(0,ht.jsx)("img",{src:"/TAG_Logo.png",alt:"TAG Logo",className:"h-12 w-auto mx-auto mb-6"})}),(0,ht.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),n(!0);try{const e=await r(a.email,a.password);e.success?t("/"):console.error("Login failed:",e.error)}catch(o){console.error("Login error:",o)}finally{n(!1)}},className:"space-y-6",children:[(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Student Email"}),(0,ht.jsxs)("div",{className:"relative",children:[(0,ht.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,ht.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,ht.jsx)("input",{id:"email",name:"email",type:"email",required:!0,value:a.email,onChange:i,placeholder:"your.name@university.edu",className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-tag-blue focus:border-tag-blue sm:text-sm"})]})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,ht.jsxs)("div",{className:"relative",children:[(0,ht.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,ht.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,ht.jsx)("input",{id:"password",name:"password",type:"password",required:!0,value:a.password,onChange:i,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-tag-blue focus:border-tag-blue sm:text-sm"})]})]}),(0,ht.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ht.jsxs)("div",{className:"flex items-center",children:[(0,ht.jsx)("input",{id:"rememberMe",name:"rememberMe",type:"checkbox",checked:a.rememberMe,onChange:i,className:"h-4 w-4 text-tag-blue focus:ring-tag-blue border-gray-300 rounded"}),(0,ht.jsx)("label",{htmlFor:"rememberMe",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),(0,ht.jsx)("div",{className:"text-sm",children:(0,ht.jsx)("a",{href:"#",className:"font-medium text-tag-blue hover:text-tag-dark-blue",children:"Forgot password?"})})]}),(0,ht.jsxs)("button",{type:"submit",disabled:s,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-tag-blue hover:bg-tag-dark-blue focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-tag-blue disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[s?(0,ht.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,ht.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,ht.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,s?"Signing in...":"Sign in"]})]}),(0,ht.jsx)("div",{className:"mt-6 flex justify-center",children:(0,ht.jsx)(at,{to:"/register",className:"w-full flex justify-center py-3 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-tag-blue transition-colors duration-200",children:"Register"})})]})})}),(0,ht.jsx)("footer",{className:"bg-white border-t border-gray-200",children:(0,ht.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,ht.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ht.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,ht.jsx)("span",{className:"font-bold",children:"Tech Art Guide"}),(0,ht.jsx)("span",{className:"ml-2",children:"\xa9 2025 TAG. All rights reserved."})]}),(0,ht.jsxs)("div",{className:"flex space-x-6 text-sm text-gray-500",children:[(0,ht.jsx)("a",{href:"#",className:"hover:text-gray-700",children:"Privacy Policy"}),(0,ht.jsx)("a",{href:"#",className:"hover:text-gray-700",children:"Terms of Service"}),(0,ht.jsx)("a",{href:"#",className:"hover:text-gray-700",children:"Help Center"})]})]})})})]})},co=e=>{let{comment:t,onCommentChange:r,onCommentSubmit:a,comments:o,onNavigateToArtist:s}=e;return(0,ht.jsxs)("div",{className:"space-y-6",children:[(0,ht.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,ht.jsxs)("form",{onSubmit:a,className:"space-y-4",children:[(0,ht.jsx)("textarea",{value:t,onChange:r,placeholder:"Share your thoughts, feedback, or questions...",className:"w-full p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:"3"}),(0,ht.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ht.jsxs)("button",{type:"button",className:"flex items-center gap-2 text-sm text-gray-600 hover:text-gray-800 transition-colors duration-200",children:[(0,ht.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),"Attach Image"]}),(0,ht.jsx)("button",{type:"submit",disabled:!t.trim(),className:"bg-purple-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-purple-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Comment"})]})]})}),(0,ht.jsx)("div",{className:"space-y-4",children:o.map(e=>(0,ht.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,ht.jsxs)("div",{className:"flex items-start gap-4",children:[(0,ht.jsx)(at,{to:`/artist/${e.user}`,className:"w-10 h-10 rounded-full flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity duration-200",children:(0,ht.jsx)("img",{src:e.avatar,alt:e.user,className:"w-10 h-10 rounded-full"})}),(0,ht.jsxs)("div",{className:"flex-1",children:[(0,ht.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,ht.jsx)(at,{to:`/artist/${e.user}`,className:"font-medium text-gray-900 cursor-pointer hover:text-tag-blue transition-colors duration-200",children:e.user}),(0,ht.jsx)("span",{className:"text-xs text-gray-500",children:"\u2022"}),(0,ht.jsx)("span",{className:"text-xs text-gray-500",children:e.role}),(0,ht.jsx)("span",{className:"text-xs text-gray-500",children:"\u2022"}),(0,ht.jsx)("span",{className:"text-xs text-gray-500",children:e.timestamp})]}),(0,ht.jsx)("p",{className:"text-gray-700 mb-3",children:e.comment}),(0,ht.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ht.jsxs)("button",{className:"flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700 transition-colors duration-200",children:[(0,ht.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),e.likes]}),(0,ht.jsx)("button",{className:"text-sm text-gray-500 hover:text-gray-700 transition-colors duration-200",children:"Reply"})]})]})]})},e.id))})]})},uo=e=>{let{goBack:t,project:r}=e;return(0,ht.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,ht.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,ht.jsxs)("button",{onClick:t,className:"flex items-center text-gray-600 hover:text-gray-900 mb-6 transition-colors duration-200",children:[(0,ht.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to TAGMe"]}),(0,ht.jsxs)("div",{className:"flex items-center text-sm text-gray-500 mb-4",children:[(0,ht.jsx)("button",{onClick:t,className:"hover:text-tag-blue transition-colors duration-200",children:"TAGMe"}),(0,ht.jsx)("span",{className:"mx-2",children:"/"}),(0,ht.jsx)("span",{children:"Milestones"}),(0,ht.jsx)("span",{className:"mx-2",children:"/"}),(0,ht.jsx)("span",{className:"text-gray-900 font-medium",children:r.title})]})]})})},ho=e=>{var t,r,a,o,s,n,i,l,c,d;let{project:u,onNavigateToArtist:h}=e;return(0,ht.jsxs)("div",{className:"space-y-6",children:[(0,ht.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,ht.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Project Details"}),(0,ht.jsxs)("div",{className:"space-y-3",children:[(0,ht.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ht.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),(0,ht.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,ht.jsx)("span",{className:"font-medium",children:"Expected Team Size:"})," ",u.teamSize||"Not specified"]})]}),(0,ht.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ht.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,ht.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,ht.jsx)("span",{className:"font-medium",children:"Duration:"})," ",u.duration||"Not specified"]})]}),(0,ht.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ht.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,ht.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,ht.jsx)("span",{className:"font-medium",children:"Meeting Schedule:"})," ",u.meetingSchedule||"Not specified"]})]})]})]}),(0,ht.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,ht.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Team Lead"}),(0,ht.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ht.jsx)("img",{src:(null===(t=u.teamLead)||void 0===t?void 0:t.artistAvatar)||(null===(r=u.teamMembers[0])||void 0===r?void 0:r.artistAvatar)||"/assets/placeholder.svg",alt:(null===(a=u.teamLead)||void 0===a?void 0:a.artist)||(null===(o=u.teamMembers[0])||void 0===o?void 0:o.artist)||"Team Lead",className:"w-12 h-12 rounded-full"}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("div",{className:"font-medium text-gray-900",children:(null===(s=u.teamLead)||void 0===s?void 0:s.artist)||(null===(n=u.teamMembers[0])||void 0===n?void 0:n.artist)||"Initiator"}),(0,ht.jsx)("div",{className:"text-sm text-gray-500",children:"Initiator"===((null===(i=u.teamLead)||void 0===i?void 0:i.role)||(null===(l=u.teamMembers[0])||void 0===l?void 0:l.role)||"Initiator")?(0,ht.jsx)("span",{className:"inline-flex items-center px-2 py-1 bg-purple-100 text-purple-800 text-xs font-medium rounded-full",children:"Initiator"}):(null===(c=u.teamLead)||void 0===c?void 0:c.role)||(null===(d=u.teamMembers[0])||void 0===d?void 0:d.role)||"Initiator"})]})]})]}),(0,ht.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,ht.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Team Members"}),(0,ht.jsx)("div",{className:"space-y-3",children:u.teamMembers.map((e,t)=>(0,ht.jsxs)(at,{to:`/artist/${e.id}`,className:"flex items-center gap-3 cursor-pointer hover:bg-gray-100 p-2 rounded-lg transition-colors duration-200",children:[(0,ht.jsx)("img",{src:e.artistAvatar,alt:e.artist,className:"w-8 h-8 rounded-full"}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("div",{className:"text-sm font-medium text-gray-900 hover:text-tag-blue transition-colors duration-200",children:e.artist}),(0,ht.jsx)("div",{className:"text-xs text-gray-500",children:"Initiator"===e.role?(0,ht.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 bg-purple-100 text-purple-800 text-xs font-medium rounded-full",children:"Initiator"}):e.role})]})]},t))})]})]})},mo=e=>{let{project:t,onViewProject:r,milestones:a=[]}=e;return(0,ht.jsxs)("div",{className:"lg:col-span-2",children:[(0,ht.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:t.title}),(0,ht.jsx)(wa,{projectId:t.id,milestones:a,dueDate:t.dueDate,isMilestonePage:!0,onViewMilestones:()=>{console.log("View milestones for project:",t.id)}}),(0,ht.jsxs)("div",{className:"mt-12 mb-4",children:[(0,ht.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Looking For"}),(0,ht.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,ht.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 text-sm font-medium rounded-full",children:"UI/UX Designer"}),(0,ht.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 text-sm font-medium rounded-full",children:"Frontend Developer"}),(0,ht.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 text-sm font-medium rounded-full",children:"Motion Designer"}),(0,ht.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 text-sm font-medium rounded-full",children:"Product Manager"})]})]}),(0,ht.jsx)("div",{className:"flex justify-end",children:(0,ht.jsx)("button",{onClick:r,className:"bg-purple-600 text-white py-3 px-8 rounded-lg font-medium hover:bg-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:"View & Apply"})}),(0,ht.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,ht.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Project Vision"}),(0,ht.jsx)("div",{className:"mb-4",children:(0,ht.jsx)("p",{className:"text-gray-700 italic text-lg",children:'"Building the future of creative collaboration"'})}),(0,ht.jsxs)("div",{className:"mb-4",children:[(0,ht.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-2",children:"Why This Matters"}),(0,ht.jsx)("div",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap text-sm",children:"We're creating a platform that connects talented designers and developers to build amazing digital experiences together. Our vision is to make collaboration seamless, inspiring, and productive. This project will showcase the power of interdisciplinary teamwork and innovative design thinking. We're looking for passionate individuals who share our vision and want to make a real impact. Join us in building something extraordinary that will revolutionize how creative teams work together."})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-2",children:"Contact"}),(0,ht.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,ht.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ht.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"})}),(0,ht.jsx)("span",{children:"project_lead#1234"})]}),(0,ht.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ht.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),(0,ht.jsx)("span",{children:"project.lead@email.com"})]})]})]})]})]})},po=e=>({completed:"Completed","in-progress":"In Progress",upcoming:"Upcoming"}[e]||"Unknown"),go=e=>{let{milestones:t}=e;return(0,ht.jsx)("div",{className:"space-y-6",children:t.map((e,t)=>{return(0,ht.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 relative overflow-hidden",children:[e.images.length>0&&(0,ht.jsx)("div",{className:"absolute inset-0 opacity-10 pointer-events-none",children:(0,ht.jsx)("img",{src:e.images[0],alt:`${e.title} background`,className:"w-full h-full object-cover"})}),(0,ht.jsxs)("div",{className:"relative z-10",children:[(0,ht.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,ht.jsxs)("div",{children:[(0,ht.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,ht.jsxs)("span",{className:"text-sm font-medium text-purple-600 bg-purple-100 px-2 py-1 rounded-full",children:["Stage ",e.id]}),(0,ht.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title})]}),(0,ht.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,ht.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,ht.jsxs)("span",{children:["Stage Due Date: ",e.dueDate]}),e.progress>0&&(0,ht.jsxs)("span",{children:[e.progress,"% complete"]})]})]}),(0,ht.jsx)("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${r=e.status,{completed:"bg-green-100 text-green-800","in-progress":"bg-blue-100 text-blue-800",upcoming:"bg-gray-100 text-gray-800"}[r]||"bg-gray-100 text-gray-800"}`,children:po(e.status)})]}),e.progress>0&&(0,ht.jsx)("div",{className:"mb-4",children:(0,ht.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,ht.jsx)("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-500",style:{width:`${e.progress}%`}})})})]})]},e.id);var r})})},fo=t=>{let{state:r,setters:a,actions:o,navigateToCollaboration:s,project:n,comments:i}=t;const{setComment:l}=a;return{handleCommentSubmit:(0,e.useCallback)(e=>{if(e.preventDefault(),r.comment.trim()){const e={id:((null===i||void 0===i?void 0:i.length)||0)+1,user:"You",avatar:"/assets/placeholder.svg",role:"Team Member",comment:r.comment,timestamp:"Just now",likes:0};o.addComment(e),l("")}},[r.comment,i,o,l]),handleApplyToCollaboration:(0,e.useCallback)(()=>{var e,t;console.log("\ud83d\udd0d [DEBUG] handleApplyToCollaboration - project:",n),console.log("\ud83d\udd0d [DEBUG] handleApplyToCollaboration - project.id:",n.id);const r={id:n.id,title:n.title,subtitle:n.description,image:n.images[0]||"/assets/placeholder.svg",categories:n.tags,author:{name:(null===(e=n.teamMembers[0])||void 0===e?void 0:e.artist)||"Initiator",avatar:(null===(t=n.teamMembers[0])||void 0===t?void 0:t.artistAvatar)||"/assets/placeholder.svg"},likes:"1.2k",views:"8.4k"};console.log("\ud83d\udd0d [DEBUG] handleApplyToCollaboration - collaborationProject:",r),console.log("\ud83d\udd0d [DEBUG] handleApplyToCollaboration - collaborationProject.id:",r.id),s(r)},[n,s])}},vo=()=>{const[t,r]=(0,e.useState)("timeline"),[a,o]=(0,e.useState)("");return(0,e.useMemo)(()=>({state:{activeTab:t,comment:a},setters:{setActiveTab:r,setComment:o}}),[t,a])},xo=()=>{var t;const{goBack:r,navigateToArtist:a,navigateToCollaboration:o}=_r(),{state:s,actions:n}=xr(),i=Z(),{id:l}=te(),c=s.selectedMilestone||(null===(t=i.state)||void 0===t?void 0:t.milestone),d=l||(null===c||void 0===c?void 0:c.id)||1,u=((e,t)=>e?{id:t,title:e.title,description:e.description,progress:e.progress||75,dueDate:e.dueDate||"March 15, 2024",projectType:e.projectType||"Project",teamSize:e.teamSize||2,duration:e.duration||"3-4 months",meetingSchedule:e.meetingSchedule||"2-3 times/week",tags:e.tags||["Project"],teamLead:e.teamLead||{artist:"Alex Chen",artistAvatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",role:"Initiator"},teamMembers:e.teamMembers||[{id:1,title:"Cyberpunk Street Scene",artist:"Alex Chen",artistAvatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",description:"A futuristic city street with vibrant neon signs and cyberpunk aesthetics",image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop",category:"Visual Effects",likes:"1.2k",views:"8.4k",timeAgo:"2 days ago",role:"Character Designer"},{id:2,title:"Dragon Knight Concept",artist:"Maya Rodriguez",artistAvatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",description:"Detailed illustration of a knight in dark, ornate armor",image:"https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400&h=300&fit=crop",category:"Game Design",likes:"2.1k",views:"12k",timeAgo:"5 days ago",role:"Art Director"}],images:["https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=300&fit=crop","https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400&h=300&fit=crop","https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop","https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=400&h=300&fit=crop"]}:{id:t,title:"Fantasy Character Series",description:"Digital illustration project exploring mythical creatures and fantasy character design. This collaborative project focuses on creating a series of unique characters with distinct personalities and visual styles.",progress:75,dueDate:"March 15, 2024",projectType:"Illustration Project",teamSize:2,duration:"3-4 months",meetingSchedule:"2-3 times/week",tags:["Illustration","Character Design","Digital Art"],teamLead:{artist:"Alex Chen",artistAvatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",role:"Initiator"},teamMembers:[{id:1,title:"Cyberpunk Street Scene",artist:"Alex Chen",artistAvatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",description:"A futuristic city street with vibrant neon signs and cyberpunk aesthetics",image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop",category:"Visual Effects",likes:"1.2k",views:"8.4k",timeAgo:"2 days ago",role:"Character Designer"},{id:2,title:"Dragon Knight Concept",artist:"Maya Rodriguez",artistAvatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",description:"Detailed illustration of a knight in dark, ornate armor",image:"https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400&h=300&fit=crop",category:"Game Design",likes:"2.1k",views:"12k",timeAgo:"5 days ago",role:"Art Director"}],images:["https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=300&fit=crop","https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400&h=300&fit=crop","https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop","https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=400&h=300&fit=crop"]})(c,d),h="Artist Collaborations"===u.projectType?[{id:1,title:"Character Design Collaboration",description:"Collaborated with game studio on character design for fantasy RPG",introduction:"This stage focused on creating unique character designs that would resonate with players while maintaining the fantasy RPG aesthetic. We explored various visual styles and personality traits.",status:"completed",progress:100,dueDate:"Feb 15, 2024",images:["https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=200&h=150&fit=crop","https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=200&h=150&fit=crop"]},{id:2,title:"UI/UX Design Project",description:"Led design team for mobile app interface redesign",introduction:"Redesigned the mobile app interface to improve user experience and accessibility. Focused on intuitive navigation and modern design principles.",status:"completed",progress:100,dueDate:"Feb 28, 2024",images:["https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=200&h=150&fit=crop"]},{id:3,title:"Animation Short Film",description:"Directed and animated short film for film festival",introduction:"Created a compelling short film that showcases storytelling through animation. This project pushed creative boundaries and technical skills.",status:"in-progress",progress:75,dueDate:"March 15, 2024",images:["https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=200&h=150&fit=crop","https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=200&h=150&fit=crop"]}]:[{id:1,title:"Character Concept Sketches",description:"Initial character design exploration and concept development",introduction:"Explored various character concepts through sketching and ideation. This stage established the foundation for all character designs in the series.",status:"completed",progress:100,dueDate:"Feb 15, 2024",images:["https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=200&h=150&fit=crop","https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=200&h=150&fit=crop"]},{id:2,title:"Color Palette Development",description:"Establishing the visual color scheme and mood for the series",introduction:"Developed a cohesive color palette that sets the mood and atmosphere for the entire character series. Focused on harmony and visual appeal.",status:"completed",progress:100,dueDate:"Feb 28, 2024",images:["https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=200&h=150&fit=crop"]},{id:3,title:"Final Character Illustrations",description:"Complete detailed illustrations of all main characters",introduction:"Creating the final detailed illustrations of all main characters. This stage brings together all previous work into polished, finished pieces.",status:"in-progress",progress:75,dueDate:"March 15, 2024",images:["https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=200&h=150&fit=crop","https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=200&h=150&fit=crop"]}];const{comments:m}=s,{state:p,setters:g}=vo(),f=fo({state:p,setters:g,actions:n,navigateToCollaboration:o,project:u,comments:m});return(0,e.useLayoutEffect)(()=>{window.scrollTo({top:0,left:0,behavior:"auto"})},[d]),(0,ht.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ht.jsx)(uo,{goBack:r,project:u}),(0,ht.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,ht.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,ht.jsx)(mo,{project:u,milestones:h,onViewProject:f.handleApplyToCollaboration}),(0,ht.jsx)(ho,{project:u,onNavigateToArtist:a})]})}),(0,ht.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,ht.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,ht.jsxs)("div",{className:"lg:col-span-1",children:[(0,ht.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Project Preview"}),(0,ht.jsx)("div",{className:"grid grid-cols-2 gap-3",children:u.images.map((e,t)=>(0,ht.jsx)("div",{className:"aspect-square overflow-hidden rounded-lg",children:(0,ht.jsx)("img",{src:e,alt:`Project preview ${t+1}`,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"})},t))})]}),(0,ht.jsxs)("div",{className:"lg:col-span-2",children:[(0,ht.jsxs)("div",{className:"flex border-b border-gray-200 mb-6",children:[(0,ht.jsx)("button",{onClick:()=>g.setActiveTab("timeline"),className:"px-6 py-3 text-xl font-bold border-b-2 transition-colors duration-200 "+("timeline"===p.activeTab?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Timeline"}),(0,ht.jsx)("button",{onClick:()=>g.setActiveTab("comments"),className:"px-6 py-3 text-xl font-bold border-b-2 transition-colors duration-200 "+("comments"===p.activeTab?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Discussion Board"})]}),"timeline"===p.activeTab&&(0,ht.jsx)(go,{milestones:h}),"comments"===p.activeTab&&(0,ht.jsx)(co,{comment:p.comment,onCommentChange:e=>g.setComment(e.target.value),onCommentSubmit:f.handleCommentSubmit,comments:m,onNavigateToArtist:a})]})]})})]})},bo={System:"system",Comments:"comments",Comment:"comment",Collaboration:"collaboration",Follow:"follow",Like:"like"},yo=["All","System","Comments","Collaboration"],wo=["Last 7 days","Today","Last 30 days"],jo=(e,t)=>{if("All"===t)return e.length;const r=bo[t];return e.filter(e=>e.type===r).length},ko=(e,t)=>{switch(e){case"system":return(0,ht.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,ht.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ht.jsx)("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"})})});case"comments":return(0,ht.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,ht.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ht.jsx)("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})})});case"comment":case"final_comment":return(0,ht.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,ht.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ht.jsx)("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})})});case"collaboration":return(0,ht.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:(0,ht.jsx)("svg",{className:"w-4 h-4 text-purple-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ht.jsx)("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"})})});case"review_request":return(0,ht.jsx)("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:(0,ht.jsx)("svg",{className:"w-4 h-4 text-orange-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ht.jsx)("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})});case"follow":return(0,ht.jsx)("div",{className:"w-8 h-8 bg-pink-100 rounded-full flex items-center justify-center",children:(0,ht.jsxs)("svg",{className:"w-4 h-4 text-pink-600",fill:"currentColor",viewBox:"0 0 20 20",children:[(0,ht.jsx)("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),(0,ht.jsx)("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]})});case"like":return(0,ht.jsx)("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:(0,ht.jsx)("svg",{className:"w-4 h-4 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ht.jsx)("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})})});default:return(0,ht.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:(0,ht.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ht.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})})}},No=e=>{let{activeTab:t,timeFilter:r,items:a,onTabChange:o,onTimeFilterChange:s,onMarkAllAsRead:n}=e;return(0,ht.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,ht.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,ht.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Notification Center"}),(0,ht.jsx)("div",{className:"flex space-x-8 border-b border-gray-200",children:yo.map(e=>(0,ht.jsxs)("button",{onClick:()=>o(e),className:"py-3 px-1 border-b-2 font-medium text-sm transition-colors duration-200 "+(t===e?"Collaboration"===e?"border-purple-500 text-purple-600":"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e,(0,ht.jsx)(zt,{count:jo(a,e),color:t===e?"Collaboration"===e?"purple":"blue":"gray"})]},e))}),(0,ht.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,ht.jsx)("div",{className:"flex items-center space-x-4",children:(0,ht.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ht.jsx)("span",{className:"text-sm text-gray-600",children:"Filter by:"}),(0,ht.jsx)("select",{value:r,onChange:e=>s(e.target.value),className:"text-sm border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:wo.map(e=>(0,ht.jsx)("option",{children:e},e))})]})}),(0,ht.jsxs)("button",{onClick:n,className:"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center space-x-1 transition-colors duration-200",children:[(0,ht.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ht.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,ht.jsx)("span",{children:"Mark all as read"})]})]})]})})},Co=e=>{let{isOpen:t,onClose:r,onConfirm:a,onDeny:o,notification:s,actionType:n="collaboration"}=e;if(!t)return null;const i=(()=>{var e;return"collaboration"===n?{title:"Collaboration Request",confirmText:"Approve",denyText:"Deny",message:`Are you sure you want to approve the collaboration request from "${(null===s||void 0===s||null===(e=s.meta)||void 0===e?void 0:e.requesterName)||"Unknown"}"?`}:{title:"Review Request",confirmText:"Approve",denyText:"Deny",message:"Are you sure you want to approve the review request?"}})();return(0,ht.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ht.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-xl",children:[(0,ht.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ht.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:i.title}),(0,ht.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:(0,ht.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,ht.jsxs)("div",{className:"mb-6",children:[(0,ht.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:i.message}),s&&(0,ht.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,ht.jsx)("p",{className:"text-sm font-medium text-gray-900 mb-1",children:s.title}),s.message&&(0,ht.jsx)("p",{className:"text-xs text-gray-600",children:s.message})]})]}),(0,ht.jsxs)("div",{className:"flex space-x-3",children:[(0,ht.jsx)("button",{onClick:r,className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors duration-200",children:"Cancel"}),(0,ht.jsx)("button",{onClick:o,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 transition-colors duration-200",children:i.denyText}),(0,ht.jsx)("button",{onClick:a,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 transition-colors duration-200",children:i.confirmText})]})]})})},So=e=>{let{isOpen:t=!1,onClose:r=()=>{},notification:a=null,className:o=""}=e;if(!t||!a)return null;const s=a.meta||{},n=s.commentText||"No comment content available",i=s.authorName||"Unknown User",l=s.authorRole||"Member",c=s.projectName||a.projectId||"Unknown Project",d=s.sentiment||"positive";return(0,ht.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ht.jsxs)("div",{className:`bg-white rounded-lg p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto ${o}`,children:[(0,ht.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ht.jsxs)("div",{className:"flex items-center",children:[(0,ht.jsx)("div",{className:"flex-shrink-0",children:(0,ht.jsx)("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),(0,ht.jsxs)("div",{className:"ml-4",children:[(0,ht.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Final Comment Details"}),(0,ht.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Review the submitted final comment"})]})]}),(0,ht.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:(0,ht.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,ht.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,ht.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Project Information"}),(0,ht.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,ht.jsxs)("p",{children:[(0,ht.jsx)("strong",{children:"Project:"})," ",c]}),(0,ht.jsxs)("p",{children:[(0,ht.jsx)("strong",{children:"Notification:"})," ",a.title]}),(0,ht.jsxs)("p",{children:[(0,ht.jsx)("strong",{children:"Received:"})," ",new Date(a.createdAt).toLocaleString()]})]})]}),(0,ht.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:[(0,ht.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Comment Author"}),(0,ht.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ht.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,ht.jsxs)("p",{children:[(0,ht.jsx)("strong",{children:"Name:"})," ",i]}),(0,ht.jsxs)("p",{children:[(0,ht.jsx)("strong",{children:"Role:"})," ",l]})]}),(0,ht.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${(e=>{switch(e){case"positive":default:return"bg-green-100 text-green-800";case"neutral":return"bg-gray-100 text-gray-800";case"negative":return"bg-red-100 text-red-800"}})(d)}`,children:(e=>{switch(e){case"positive":default:return"Positive";case"neutral":return"Neutral";case"negative":return"Negative"}})(d)})]})]}),(0,ht.jsxs)("div",{className:"mb-6",children:[(0,ht.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Comment Content"}),(0,ht.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 border-l-4 border-blue-500",children:(0,ht.jsxs)("blockquote",{className:"text-gray-700 italic leading-relaxed",children:['"',n,'"']})})]}),(0,ht.jsx)("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200",children:(0,ht.jsx)("button",{onClick:r,className:"px-6 py-3 text-base text-gray-600 hover:text-gray-800 transition-colors duration-200",children:"Close"})})]})})},_o=t=>{var r,a;let{notification:o,onNotificationClick:s,onReviewRequest:n,onCollaborationRequest:i,onMarkAsRead:l}=t;const[c,d]=(0,e.useState)(!1),[u,h]=(0,e.useState)(!1),[m,p]=(0,e.useState)(null);return e.useEffect(()=>{"review_request"===o.type?p("review"):"collaboration"===o.type&&p("collaboration")},[o.type]),(0,ht.jsxs)("div",{onClick:e=>{e.target.closest("button")||(()=>{var e,t;"final_comment"!==o.type?"review_request"===o.type&&!o.isRead||"collaboration"===o.type&&null!==(e=o.meta)&&void 0!==e&&e.requestId&&"pending"===(null===(t=o.meta)||void 0===t?void 0:t.status)&&!o.isRead?d(!0):(!o.isRead&&l&&l(o.id),s(o)):h(!0)})()},className:"rounded-lg border p-6 hover:shadow-md transition-all duration-200 cursor-pointer "+(o.isRead?"bg-white border-gray-200":"collaboration"===o.type?"bg-purple-50 border-l-4 border-l-purple-500":"bg-blue-50 border-l-4 border-l-blue-500"),children:[(0,ht.jsxs)("div",{className:"flex items-start space-x-4",children:[!o.isRead&&(0,ht.jsx)("div",{className:"w-2 h-2 rounded-full mt-3 flex-shrink-0 "+("collaboration"===o.type?"bg-purple-500":"bg-blue-500")}),(0,ht.jsx)("div",{className:"flex-shrink-0",children:ko(o.type)}),(0,ht.jsx)("div",{className:"flex-1 min-w-0",children:(0,ht.jsxs)("div",{className:"flex items-start justify-between",children:[(0,ht.jsxs)("div",{className:"flex-1",children:[(0,ht.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:o.title||o.content}),o.message&&(0,ht.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:o.message}),("review_request"===o.type&&!o.isRead||"collaboration"===o.type&&(null===(r=o.meta)||void 0===r?void 0:r.requestId)&&"pending"===(null===(a=o.meta)||void 0===a?void 0:a.status)&&!o.isRead)&&(0,ht.jsx)("div",{className:"mt-3",children:(0,ht.jsx)("p",{className:"text-xs text-gray-500 italic",children:"Click to approve or deny this request"})})]}),(0,ht.jsx)("span",{className:"text-xs text-gray-500 ml-4 flex-shrink-0",children:new Date(o.createdAt).toLocaleDateString()})]})})]}),(0,ht.jsx)(Co,{isOpen:c,onClose:()=>{d(!1),p(null)},onConfirm:()=>{"review"===m?n(o,"approved"):"collaboration"===m&&i(o,"approve"),d(!1),p(null)},onDeny:()=>{"review"===m?n(o,"denied"):"collaboration"===m&&i(o,"deny"),d(!1),p(null)},notification:o,actionType:m}),(0,ht.jsx)(So,{isOpen:u,onClose:()=>{h(!1),!o.isRead&&l&&l(o.id)},notification:o})]})},Eo=e=>{let{isLoading:t,filteredNotifications:r,hasMore:a,onNotificationClick:o,onReviewRequest:s,onCollaborationRequest:n,onMarkAsRead:i,onLoadMore:l}=e;return t?(0,ht.jsxs)("div",{className:"text-center py-12",children:[(0,ht.jsx)(At,{}),(0,ht.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading notifications..."})]}):(0,ht.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,ht.jsx)("div",{className:"space-y-4",children:r.map(e=>(0,ht.jsx)(_o,{notification:e,onNotificationClick:o,onReviewRequest:s,onCollaborationRequest:n,onMarkAsRead:i},e.id))}),a&&!t&&(0,ht.jsx)("div",{className:"text-center mt-8",children:(0,ht.jsxs)("button",{onClick:l,className:"text-blue-600 hover:text-blue-700 font-medium flex items-center space-x-1 mx-auto transition-colors duration-200",children:[(0,ht.jsx)("span",{children:"Load more notifications"}),(0,ht.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ht.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})};var Po=r(405);const Io=t=>{let{state:r,setters:a}=t;const{setItems:o,setFilteredNotifications:s,setIsLoading:n}=a,i=(0,e.useCallback)(async()=>{try{n(!0);const e=await Ht.lY.getUserNotifications((0,ut.WR)());if(e.success){const t=e.data||[];console.log("NotificationCenter: Loaded notifications:",t.length),o(t),console.log("NotificationCenter: Updated items state")}else console.error("Failed to load notifications:",e.error),o([])}catch(e){console.error("Error loading notifications:",e),o([])}finally{n(!1)}},[o,n]);(0,e.useEffect)(()=>{let e=!0;const t=async()=>{e&&await i()};t();const r=r=>{var a;const o=null===r||void 0===r||null===(a=r.detail)||void 0===a?void 0:a.userId;console.log("NotificationCenter: Received event:",r.type,"for user:",o,"current user:",(0,ut.WR)()),o&&o!==(0,ut.WR)()||(console.log("NotificationCenter: Reloading notifications due to change"),setTimeout(()=>{e&&t()},100))};return window.addEventListener("notif:unreadChanged",r),window.addEventListener("user:changed",t),()=>{e=!1,window.removeEventListener("notif:unreadChanged",r),window.removeEventListener("user:changed",t)}},[i]),(0,e.useEffect)(()=>{const e=((e,t)=>{let r=[...e];if("All"!==t){const e=bo[t];r=r.filter(t=>t.type===e)}return r})(r.items,r.activeTab,r.timeFilter);s(e)},[r.items,r.activeTab,r.timeFilter,s]);const l=(0,e.useCallback)(async e=>{e.projectId,console.log("Navigate to notification detail:",e)},[]),c=(0,e.useCallback)(async e=>{try{await Ht.lY.markAsRead(e),console.log("NotificationCenter: Marked notification as read:",e);const t=await Ht.lY.getUserNotifications((0,ut.WR)());t.success&&o(t.data||[])}catch(t){console.error("Error marking notification as read:",t)}},[o]),d=(0,e.useCallback)(async()=>{try{await Ht.lY.markAllAsRead((0,ut.WR)()),console.log("NotificationCenter: Marked all as read")}catch(e){console.error("Error marking notifications as read:",e)}},[]),u=(0,e.useCallback)(async(e,t)=>{try{const{requestId:r}=e.meta,a=(0,va.vb)(r,t);a&&(console.log(`Review request ${t}:`,a),await Ht.lY.markAsRead(e.id))}catch(r){console.error("Error handling review request:",r)}},[]),h=(0,e.useCallback)(async(e,t)=>{try{const{requestId:r}=e.meta,a=(0,ut.WR)();let s;if(console.log("Handling collaboration request:",{requestId:r,action:t,currentUserId:a}),"approve"===t?s=await(0,Po.g$)(r,a):"deny"===t&&(s=await(0,Po.RO)(r,a)),s){console.log(`Collaboration request ${t}:`,s),await Ht.lY.markAsRead(e.id);const r=await Ht.lY.getUserNotifications(a);r.success&&o(r.data||[])}}catch(r){console.error("Error handling collaboration request:",r)}},[o]);return{loadNotifications:i,handleNotificationClick:l,handleMarkAsRead:c,handleMarkAllAsRead:d,handleReviewRequest:u,handleCollaborationRequest:h}},Ao=()=>{const[t,r]=(0,e.useState)([]),[a,o]=(0,e.useState)([]),[s,n]=(0,e.useState)("All"),[i,l]=(0,e.useState)("Last 7 days"),[c,d]=(0,e.useState)(!1),[u,h]=(0,e.useState)(!0);return(0,e.useMemo)(()=>({state:{items:t,filteredNotifications:a,activeTab:s,timeFilter:i,isLoading:c,hasMore:u},setters:{setItems:r,setFilteredNotifications:o,setActiveTab:n,setTimeFilter:l,setIsLoading:d,setHasMore:h}}),[t,a,s,i,c,u])},To=()=>{const{state:e,setters:t}=Ao(),r=Io({state:e,setters:t});return(0,ht.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ht.jsx)(No,{activeTab:e.activeTab,timeFilter:e.timeFilter,items:e.items,onTabChange:t.setActiveTab,onTimeFilterChange:t.setTimeFilter,onMarkAllAsRead:r.handleMarkAllAsRead}),(0,ht.jsx)(Eo,{isLoading:e.isLoading,filteredNotifications:e.filteredNotifications,hasMore:e.hasMore,onNotificationClick:r.handleNotificationClick,onReviewRequest:r.handleReviewRequest,onCollaborationRequest:r.handleCollaborationRequest,onMarkAsRead:r.handleMarkAsRead,onLoadMore:()=>{}})]})},Lo=e=>{let{children:t}=e;const{user:r,loading:a}=pt();return a?(0,ht.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,ht.jsxs)("div",{className:"text-center",children:[(0,ht.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-tag-blue mx-auto"}),(0,ht.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):r?t:(0,ht.jsx)(fe,{to:"/login",replace:!0})},Do=()=>(0,ht.jsxs)("div",{className:"text-center mb-8",children:[(0,ht.jsx)("img",{src:"/TAG_Logo.png",alt:"TAG Logo",className:"h-12 w-auto mx-auto mb-6"}),(0,ht.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create your account"})]}),Mo=e=>{let{formData:t,errors:r,onInputChange:a,onSendCode:o,onSubmit:s,isLoading:n,isSendingCode:i}=e;return(0,ht.jsxs)("form",{onSubmit:s,className:"space-y-6",children:[(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Student Email"}),(0,ht.jsxs)("div",{className:"flex space-x-2",children:[(0,ht.jsxs)("div",{className:"relative flex-1",children:[(0,ht.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,ht.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,ht.jsx)("input",{id:"email",name:"email",type:"email",required:!0,value:t.email,onChange:a,placeholder:"your.name@university.edu",className:"block w-full pl-10 pr-3 py-3 border rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-tag-blue focus:border-tag-blue sm:text-sm "+(r.email?"border-red-300":"border-gray-300")})]}),(0,ht.jsx)("button",{type:"button",onClick:()=>o(t.email),disabled:i,className:"px-4 py-3 text-sm font-medium text-white bg-tag-blue hover:bg-tag-dark-blue focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-tag-blue disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 rounded-md whitespace-nowrap",children:i?"Sending...":"Send Code"})]}),r.email&&(0,ht.jsx)("p",{className:"mt-1 text-sm text-red-600",children:r.email})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{htmlFor:"verificationCode",className:"block text-sm font-medium text-gray-700 mb-2",children:"Verification Code"}),(0,ht.jsxs)("div",{className:"relative",children:[(0,ht.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,ht.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,ht.jsx)("input",{id:"verificationCode",name:"verificationCode",type:"text",required:!0,value:t.verificationCode,onChange:a,placeholder:"Enter 6-digit code",maxLength:"6",className:"block w-full pl-10 pr-3 py-3 border rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-tag-blue focus:border-tag-blue sm:text-sm "+(r.verificationCode?"border-red-300":"border-gray-300")})]}),r.verificationCode&&(0,ht.jsx)("p",{className:"mt-1 text-sm text-red-600",children:r.verificationCode})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,ht.jsxs)("div",{className:"relative",children:[(0,ht.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,ht.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,ht.jsx)("input",{id:"password",name:"password",type:"password",required:!0,value:t.password,onChange:a,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",className:"block w-full pl-10 pr-3 py-3 border rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-tag-blue focus:border-tag-blue sm:text-sm "+(r.password?"border-red-300":"border-gray-300")})]}),r.password&&(0,ht.jsx)("p",{className:"mt-1 text-sm text-red-600",children:r.password})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),(0,ht.jsxs)("div",{className:"relative",children:[(0,ht.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,ht.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,ht.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:t.confirmPassword,onChange:a,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",className:"block w-full pl-10 pr-3 py-3 border rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-tag-blue focus:border-tag-blue sm:text-sm "+(r.confirmPassword?"border-red-300":"border-gray-300")})]}),r.confirmPassword&&(0,ht.jsx)("p",{className:"mt-1 text-sm text-red-600",children:r.confirmPassword})]}),r.general&&(0,ht.jsx)("div",{className:"text-sm text-red-600 text-center",children:r.general}),(0,ht.jsxs)("button",{type:"submit",disabled:n,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-tag-blue hover:bg-tag-dark-blue focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-tag-blue disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[n?(0,ht.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,ht.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,ht.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,n?"Creating account...":"Register"]})]})},Ro=e=>{let{onLoginClick:t}=e;return(0,ht.jsxs)(ht.Fragment,{children:[(0,ht.jsx)("div",{className:"mt-6 flex justify-center",children:(0,ht.jsx)("button",{onClick:t,className:"w-full flex justify-center py-3 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-tag-blue transition-colors duration-200",children:"Login"})}),(0,ht.jsx)("footer",{className:"bg-white border-t border-gray-200",children:(0,ht.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,ht.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ht.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,ht.jsx)("span",{className:"font-bold",children:"Tech Art Guide"}),(0,ht.jsx)("span",{className:"ml-2",children:"\xa9 2025 TAG. All rights reserved."})]}),(0,ht.jsxs)("div",{className:"flex space-x-6 text-sm text-gray-500",children:[(0,ht.jsx)("a",{href:"#",className:"hover:text-gray-700",children:"Privacy Policy"}),(0,ht.jsx)("a",{href:"#",className:"hover:text-gray-700",children:"Terms of Service"}),(0,ht.jsx)("a",{href:"#",className:"hover:text-gray-700",children:"Help Center"})]})]})})})]})},$o=()=>{const[t,r]=(0,e.useState)({email:"",verificationCode:"",password:"",confirmPassword:""}),[a,o]=(0,e.useState)({}),[s,n]=(0,e.useState)(!1),[i,l]=(0,e.useState)(!1),c=(0,e.useCallback)(e=>{const{name:t,value:s}=e.target;r(e=>({...e,[t]:s})),a[t]&&o(e=>((e,t)=>{if(e[t]){const r={...e};return delete r[t],r}return e})(e,t))},[a]),d=(0,e.useCallback)(()=>{const e=(e=>{const t={};var r,a;return e.email?(r=e.email,/\S+@\S+\.\S+/.test(r)||(t.email="Please enter a valid email address")):t.email="Please enter your email address",e.verificationCode?(a=e.verificationCode,/^\d{6}$/.test(a)||(t.verificationCode="Verification code should be 6 digits")):t.verificationCode="Please enter verification code",e.password?e.password.length>=6||(t.password="Password must be at least 6 characters"):t.password="Please enter password",e.confirmPassword?(o=e.password,s=e.confirmPassword,o===s||(t.confirmPassword="Passwords do not match")):t.confirmPassword="Please confirm password",{isValid:0===Object.keys(t).length,errors:t};var o,s})(t);return o(e.errors),e.isValid},[t]),u=(0,e.useCallback)(()=>{r({email:"",verificationCode:"",password:"",confirmPassword:""}),o({}),n(!1),l(!1)},[]),h=(0,e.useCallback)(e=>{n(e)},[]),m=(0,e.useCallback)(e=>{l(e)},[]),p=(0,e.useCallback)((e,t)=>{o(r=>({...r,[e]:t}))},[]),g=(0,e.useCallback)(e=>{o(t=>({...t,general:e}))},[]);return{formData:t,errors:a,isLoading:s,isSendingCode:i,handleInputChange:c,validateForm:d,resetForm:u,setLoading:h,setSendingCode:m,setError:p,setGeneralError:g}},Fo=t=>{let{formData:r,validateForm:a,setLoading:o,setSendingCode:s,setError:n,setGeneralError:i}=t;const l=ee();return{sendVerificationCode:(0,e.useCallback)(async e=>{if(e){s(!0);try{console.log("Sending verification code to:",e),setTimeout(()=>{s(!1),alert("Verification code has been sent to your email")},1e3)}catch(t){console.error("Failed to send verification code:",t),s(!1),n("email","Failed to send verification code, please try again")}}else n("email","Please enter your email address")},[s,n]),handleSubmit:(0,e.useCallback)(async e=>{if(e.preventDefault(),a()){o(!0);try{console.log("Registration info:",r),setTimeout(()=>{o(!1),alert("Registration successful! Please go to login page"),l("/login")},1e3)}catch(t){console.error("Registration failed:",t),o(!1),i("Registration failed, please try again")}}},[r,a,o,i,l]),handleLoginClick:(0,e.useCallback)(()=>{l("/login")},[l])}},Oo=()=>{const{formData:e,errors:t,isLoading:r,isSendingCode:a,handleInputChange:o,validateForm:s,setLoading:n,setSendingCode:i,setError:l,setGeneralError:c}=$o(),d=Fo({formData:e,validateForm:s,setLoading:n,setSendingCode:i,setError:l,setGeneralError:c});return(0,ht.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,ht.jsx)("div",{className:"flex-1 flex items-center justify-center px-4 sm:px-6 lg:px-8",children:(0,ht.jsx)("div",{className:"max-w-md w-full space-y-8",children:(0,ht.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,ht.jsx)(Do,{}),(0,ht.jsx)(Mo,{formData:e,errors:t,onInputChange:o,onSendCode:d.sendVerificationCode,onSubmit:d.handleSubmit,isLoading:r,isSendingCode:a}),(0,ht.jsx)(Ro,{onLoginClick:d.handleLoginClick})]})})})})},Uo=async(e,t)=>{if(!e)return null;try{if(e.startsWith("data:")){const a=`collaboration_${t}_${Date.now()}`,{imageStorage:o}=await Promise.resolve().then(r.bind(r,337));return await o.storeImage(a,e),console.log(`[Collaboration] Stored Data URL to IndexedDB with key: ${a}`),a}if(e.startsWith("blob:")){const a=await fetch(e),o=await a.blob(),s=await new Promise((e,t)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=()=>t(r.error),r.readAsDataURL(o)}),n=`collaboration_${t}_${Date.now()}`,{imageStorage:i}=await Promise.resolve().then(r.bind(r,337));return await i.storeImage(n,s),console.log(`[Collaboration] Stored Data URL to IndexedDB with key: ${n}`),n}return e}catch(a){return console.warn("[Collaboration] Failed to store Data URL to IndexedDB:",a),null}},zo=e=>{if(!e)return"Unknown time";const t=new Date,r=new Date(e),a=Math.floor((t-r)/1e3);if(a<60)return"Just now";if(a<3600){const e=Math.floor(a/60);return`${e} minute${e>1?"s":""} ago`}if(a<86400){const e=Math.floor(a/3600);return`${e} hour${e>1?"s":""} ago`}if(a<2592e3){const e=Math.floor(a/86400);return`${e} day${e>1?"s":""} ago`}{const e=Math.floor(a/2592e3);return`${e} month${e>1?"s":""} ago`}},Wo=e=>{var t,r,a,o,s,n;const i={};null!==(t=e.title)&&void 0!==t&&t.trim()||(i.title="Project title is required"),null!==(r=e.description)&&void 0!==r&&r.trim()?e.description.length>1e3&&(i.description="Project description must be 1000 characters or less"):i.description="Project description is required",null!==(a=e.projectVision)&&void 0!==a&&a.trim()?e.projectVision.length>200&&(i.projectVision="Project vision must be 200 characters or less"):i.projectVision="Project vision is required",e.whyThisMatters&&e.whyThisMatters.length>1e3&&(i.whyThisMatters="Why This Matters must be 1000 characters or less"),e.teamSize||(i.teamSize="Team size is required"),e.duration||(i.duration="Duration is required"),e.meetingSchedule||(i.meetingSchedule="Meeting schedule is required"),e.applicationDeadline||(i.applicationDeadline="Application deadline is required");const l=(null===(o=e.contactInfo)||void 0===o||null===(s=o.email)||void 0===s?void 0:s.trim())||(null===(n=e.contactEmail)||void 0===n?void 0:n.trim());return l?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l)||(i.contactEmail="Please enter a valid email address"):i.contactEmail="Email is required",e.roles&&0!==e.roles.length?e.roles.forEach((e,t)=>{var r,a,o,s;const n=(null===(r=e.title)||void 0===r?void 0:r.trim())||(null===(a=e.customRole)||void 0===a?void 0:a.trim()),l=(null===(o=e.description)||void 0===o?void 0:o.trim())||(null===(s=e.roleDescription)||void 0===s?void 0:s.trim());n||(i[`role${t}`]="Role name is required"),l||(i[`roleDescription${t}`]="Role description is required")}):i.roles="At least one role is required",{isValid:0===Object.keys(i).length,errors:i}},Bo=()=>`collab_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,qo=[{id:Bo(),title:"Game Concept Design Collaboration",description:"Creating an innovative mobile game concept that combines puzzle mechanics with narrative storytelling. We're looking for talented artists and designers to help bring this vision to life.",projectVision:"Revolutionizing mobile gaming through innovative concept design and storytelling",whyThisMatters:"This project aims to push the boundaries of mobile game design by creating an experience that's both visually stunning and intellectually engaging. We believe in the power of games to tell meaningful stories and connect people.",teamSize:"4-5",duration:"3-4 months",meetingSchedule:"2-3 times/week",applicationDeadline:"2024-12-15",projectType:"Game Design, Concept Art",contactInfo:{email:"alex.chen@example.com",discord:"alexchen#1234",other:""},roles:[{id:"role_1",title:"Character Designer",description:"Create unique and memorable character designs that fit the game's aesthetic and narrative. Experience with character development and concept art required.",requiredSkills:"Character Design, Concept Art, Adobe Photoshop, Procreate",status:"available"},{id:"role_2",title:"Environment Artist",description:"Design immersive game environments that enhance the storytelling experience. Strong understanding of lighting, composition, and atmospheric design.",requiredSkills:"Environment Design, Digital Painting, 3D Modeling, Unity",status:"available"},{id:"role_3",title:"UI/UX Designer",description:"Design intuitive and visually appealing user interfaces that enhance the gaming experience. Focus on accessibility and user engagement.",requiredSkills:"UI Design, UX Research, Figma, Adobe XD",status:"filled"}],author:{id:"alex",name:"Alex Chen",avatar:null,role:"Concept Artist"},status:"active",createdAt:"2024-11-01T10:00:00Z",updatedAt:"2024-11-01T10:00:00Z",likes:24,views:156,applications:[]}],Ho=[{id:Bo(),title:"Digital Illustration Project",description:"Collaborative digital art project focused on creating a series of illustrations for a children's book. We're seeking artists who can bring warmth and imagination to storytelling through art.",projectVision:"Creating magical illustrations that inspire and delight young readers",whyThisMatters:"Children's books have the power to shape imaginations and create lasting memories. This project aims to create illustrations that not only tell a story but also inspire creativity and wonder in young minds.",teamSize:"2-3",duration:"1-2 months",meetingSchedule:"1-2 times/week",applicationDeadline:"2024-11-30",projectType:"Illustration, Children's Book",contactInfo:{email:"bryan.rodriguez@example.com",discord:"bryanrodriguez#5678",other:""},roles:[{id:"role_1",title:"Character Illustrator",description:"Create charming and expressive character illustrations that appeal to children. Ability to maintain consistent character designs across multiple scenes.",requiredSkills:"Character Illustration, Digital Art, Adobe Illustrator, Procreate",status:"available"},{id:"role_2",title:"Background Artist",description:"Design whimsical and engaging backgrounds that complement the story and characters. Strong sense of color and composition.",requiredSkills:"Background Art, Digital Painting, Color Theory, Adobe Photoshop",status:"available"}],author:{id:"bryan",name:"Bryan Rodriguez",avatar:null,role:"Illustrator"},status:"active",createdAt:"2024-10-25T14:30:00Z",updatedAt:"2024-10-25T14:30:00Z",likes:18,views:89,applications:[]},{id:Bo(),title:"Sci-Fi Concept Art Collection",description:"Creating a collection of sci-fi concept art pieces for a digital art portfolio. Looking for artists who can bring futuristic visions to life with attention to detail and technical accuracy.",projectVision:"Pushing the boundaries of sci-fi concept art through innovative design and storytelling",whyThisMatters:"Sci-fi art has the power to inspire technological innovation and explore the possibilities of the future. This collection aims to showcase the intersection of art and technology.",teamSize:"3-4",duration:"2-3 months",meetingSchedule:"2-3 times/week",applicationDeadline:"2024-12-20",projectType:"Concept Art, Sci-Fi",contactInfo:{email:"bryan.rodriguez@example.com",discord:"bryanrodriguez#5678",other:""},roles:[{id:"role_1",title:"Vehicle Designer",description:"Design futuristic vehicles and spacecraft with realistic engineering principles. Strong understanding of form, function, and aerodynamics.",requiredSkills:"Vehicle Design, Industrial Design, 3D Modeling, Blender",status:"available"},{id:"role_2",title:"Character Designer",description:"Create unique alien and humanoid character designs that fit the sci-fi aesthetic. Focus on diversity and creative anatomy.",requiredSkills:"Character Design, Anatomy, Digital Painting, ZBrush",status:"available"},{id:"role_3",title:"Environment Designer",description:"Design otherworldly environments and space stations with attention to scale and atmosphere. Strong lighting and composition skills.",requiredSkills:"Environment Design, Digital Painting, Lighting, Adobe Photoshop",status:"filled"}],author:{id:"bryan",name:"Bryan Rodriguez",avatar:null,role:"Illustrator"},status:"active",createdAt:"2024-10-20T09:15:00Z",updatedAt:"2024-10-20T09:15:00Z",likes:31,views:203,applications:[]}],Vo=[{id:Bo(),title:"Photography Portfolio Collaboration",description:"Creating a stunning photography portfolio that showcases urban life and human stories. We're looking for photographers who can capture authentic moments and tell compelling visual narratives.",projectVision:"Documenting the beauty and complexity of urban life through authentic photography",whyThisMatters:"Photography has the power to preserve moments, tell stories, and connect people across cultures and time. This project aims to create a visual record of urban life that resonates with viewers and preserves important cultural moments.",teamSize:"3-4",duration:"2-3 months",meetingSchedule:"1-2 times/week",applicationDeadline:"2024-11-15",projectType:"Photography, Street Photography",contactInfo:{email:"alice@example.com",discord:"alice_photo#9012",other:""},roles:[{id:"role_1",title:"Street Photographer",description:"Capture candid moments of urban life and human interaction. Strong understanding of composition, lighting, and timing.",requiredSkills:"Street Photography, Composition, Lighting, Adobe Lightroom",status:"available"},{id:"role_2",title:"Portrait Photographer",description:"Create compelling portraits that tell individual stories. Ability to work with diverse subjects and create comfortable shooting environments.",requiredSkills:"Portrait Photography, Lighting, Photoshop, Communication",status:"available"},{id:"role_3",title:"Photo Editor",description:"Edit and enhance photographs while maintaining authenticity. Strong post-processing skills and attention to detail.",requiredSkills:"Photo Editing, Adobe Photoshop, Color Grading, Attention to Detail",status:"filled"}],author:{id:"alice",name:"Alice",avatar:null,role:"Photographer"},status:"active",createdAt:"2024-10-28T16:45:00Z",updatedAt:"2024-10-28T16:45:00Z",likes:42,views:267,applications:[]}],Go=[...qo,...Ho,...Vo],Jo={page:1,limit:12,status:"active",authorId:null,searchTerm:"",sortBy:"createdAt",sortOrder:"desc"},Ko={success:!0,data:null,error:null,message:"",pagination:{page:1,limit:12,total:0,totalPages:0,hasNext:!1,hasPrev:!1}},Yo="mock_collaborations",Zo=()=>{try{const e=localStorage.getItem(Yo);return e?JSON.parse(e):Go}catch(e){return console.error("Error reading collaborations from storage:",e),Go}},Qo=e=>{try{localStorage.setItem(Yo,JSON.stringify(e))}catch(t){console.error("Error saving collaborations to storage:",t)}},Xo=async e=>{try{const a=Wo(e);if(!a.isValid)return{...Ko,success:!1,error:"Validation failed",data:a.errors};const o=await(async e=>{var t,r,a,o,s,n,i,l,c,d,u,h,m,p,g;const f=(0,ut.WR)(),v=(0,ut.HW)(),x=`temp_${Date.now()}`;return{title:(null===(t=e.title)||void 0===t?void 0:t.trim())||"",description:(null===(r=e.description)||void 0===r?void 0:r.trim())||"",projectVision:(null===(a=e.projectVision)||void 0===a?void 0:a.trim())||"",whyThisMatters:(null===(o=e.whyThisMatters)||void 0===o?void 0:o.trim())||"",teamSize:e.teamSize||"",duration:e.duration||"",meetingSchedule:e.meetingSchedule||"",applicationDeadline:e.applicationDeadline||"",projectType:(null===(s=e.projectType)||void 0===s?void 0:s.trim())||"",posterPreview:await Uo(e.posterPreview,x),heroImage:await Uo(e.posterPreview,x),contactInfo:{email:(null===(n=e.contactEmail)||void 0===n?void 0:n.trim())||(null===(i=e.contactInfo)||void 0===i||null===(l=i.email)||void 0===l?void 0:l.trim())||"",discord:(null===(c=e.contactDiscord)||void 0===c?void 0:c.trim())||(null===(d=e.contactInfo)||void 0===d||null===(u=d.discord)||void 0===u?void 0:u.trim())||"",other:(null===(h=e.contactOther)||void 0===h?void 0:h.trim())||(null===(m=e.contactInfo)||void 0===m||null===(p=m.other)||void 0===p?void 0:p.trim())||""},roles:(null===(g=e.roles)||void 0===g?void 0:g.map(e=>{var t,r,a,o,s;return{id:e.id||Date.now().toString(),title:(null===(t=e.customRole)||void 0===t?void 0:t.trim())||(null===(r=e.title)||void 0===r?void 0:r.trim())||"",description:(null===(a=e.roleDescription)||void 0===a?void 0:a.trim())||(null===(o=e.description)||void 0===o?void 0:o.trim())||"",requiredSkills:(null===(s=e.requiredSkills)||void 0===s?void 0:s.trim())||"",status:"available"}}).filter(e=>e.title&&e.description))||[],author:{id:f,name:(null===v||void 0===v?void 0:v.displayName)||(null===v||void 0===v?void 0:v.name)||"Unknown",avatar:(null===v||void 0===v?void 0:v.avatar)||null,role:(null===v||void 0===v?void 0:v.role)||"Initiator"},status:"active",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),likes:0,views:0,applications:[]}})(e);if(o.id=Bo(),e.poster&&e.poster instanceof File){const a=`collaboration_${o.id}_poster`;try{const t=await Promise.resolve().then(r.bind(r,337));await t.default.storeImage(a,e.poster),o.heroImage=a,o.posterPreview=a,o.posterKey=a,console.log(`[Collaboration] Stored image with key: ${a}`)}catch(t){console.error("[Collaboration] Failed to store image:",t)}}const s=[o,...Zo()];return Qo(s),{...Ko,success:!0,data:o,message:"Collaboration created successfully"}}catch(t){return console.error("Error creating collaboration:",t),{...Ko,success:!1,error:t.message||"Failed to create collaboration"}}},es=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t={...Jo,...e};let r=Zo();if(t.authorId&&(r=r.filter(e=>e.author.id===t.authorId)),t.status&&(r=r.filter(e=>e.status===t.status)),t.searchTerm){const e=t.searchTerm.toLowerCase();r=r.filter(t=>t.title.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)||t.projectVision.toLowerCase().includes(e))}r.sort((e,r)=>{const a=e[t.sortBy],o=r[t.sortBy];return"desc"===t.sortOrder?new Date(o)-new Date(a):new Date(a)-new Date(o)});const a=r.length,o=Math.ceil(a/t.limit),s=(t.page-1)*t.limit,n=s+t.limit,i=r.slice(s,n),l=i.map(e=>{var t,r,a,o;return{id:e.id,title:e.title,subtitle:e.description,image:e.heroImage||null,posterPreview:e.posterPreview||e.heroImage||null,categories:e.projectType?[e.projectType]:[],author:{name:(null===(t=e.author)||void 0===t?void 0:t.name)||"Unknown",avatar:(null===(r=e.author)||void 0===r?void 0:r.avatar)||null},likes:e.likes||0,views:e.views||0,isLiked:!1,isBookmarked:!1,isInitiator:!1,role:(null===(a=e.author)||void 0===a?void 0:a.role)||"Initiator",dateRange:e.duration||"",status:"active"===e.status?"Open for Collaboration":"Closed",skills:(null===(o=e.roles)||void 0===o?void 0:o.map(e=>e.title))||[],teamSize:e.teamSize||"",currentMembers:0}});return{...Ko,success:!0,data:l,pagination:{page:t.page,limit:t.limit,total:a,totalPages:o,hasNext:t.page<o,hasPrev:t.page>1}}}catch(t){return console.error("Error fetching collaborations:",t),{...Ko,success:!1,error:t.message||"Failed to fetch collaborations"}}},ts=async e=>{try{const t=Zo(),r=t.find(t=>t.id===e);if(!r)return{...Ko,success:!1,error:"Collaboration not found"};r.views=(r.views||0)+1,Qo(t);const a=(e=>{var t,r,a,o,s;return{id:e.id,title:e.title,author:{id:null===(t=e.author)||void 0===t?void 0:t.id,title:e.title,artist:(null===(r=e.author)||void 0===r?void 0:r.name)||"Unknown",artistAvatar:(null===(a=e.author)||void 0===a?void 0:a.avatar)||null,description:e.description,image:e.heroImage||null,category:e.projectType||"Project",likes:e.likes||0,views:e.views||0,timeAgo:zo(e.createdAt),role:(null===(o=e.author)||void 0===o?void 0:o.role)||"Initiator"},duration:e.duration,teamSize:e.teamSize,postedTime:zo(e.createdAt),tags:e.projectType?[e.projectType]:[],heroImage:e.heroImage||e.posterPreview||null,description:e.description,meetingFrequency:e.meetingSchedule,deadline:e.applicationDeadline,contactInfo:e.contactInfo,status:e.status,vision:{tagline:e.projectVision,narrative:e.description,hiringTargets:(null===(s=e.roles)||void 0===s?void 0:s.map(e=>e.title))||[],contact:e.contactInfo},milestones:[]}})(r);return{...Ko,success:!0,data:a}}catch(t){return console.error("Error fetching collaboration details:",t),{...Ko,success:!1,error:t.message||"Failed to fetch collaboration details"}}},rs=async(e,t)=>{try{const r=Zo(),a=r.findIndex(t=>t.id===e);if(-1===a)return{...Ko,success:!1,error:"Collaboration not found"};const o=Wo(t);if(!o.isValid)return{...Ko,success:!1,error:"Validation failed",data:o.errors};const s=(e=>{var t,r,a,o,s,n,i,l,c,d,u,h;return{...e,title:(null===(t=e.title)||void 0===t?void 0:t.trim())||"",description:(null===(r=e.description)||void 0===r?void 0:r.trim())||"",projectVision:(null===(a=e.projectVision)||void 0===a?void 0:a.trim())||"",whyThisMatters:(null===(o=e.whyThisMatters)||void 0===o?void 0:o.trim())||"",projectType:(null===(s=e.projectType)||void 0===s?void 0:s.trim())||"",contactInfo:{email:(null===(n=e.contactInfo)||void 0===n||null===(i=n.email)||void 0===i?void 0:i.trim())||"",discord:(null===(l=e.contactInfo)||void 0===l||null===(c=l.discord)||void 0===c?void 0:c.trim())||"",other:(null===(d=e.contactInfo)||void 0===d||null===(u=d.other)||void 0===u?void 0:u.trim())||""},roles:(null===(h=e.roles)||void 0===h?void 0:h.map(e=>{var t,r,a;return{...e,title:(null===(t=e.title)||void 0===t?void 0:t.trim())||"",description:(null===(r=e.description)||void 0===r?void 0:r.trim())||"",requiredSkills:(null===(a=e.requiredSkills)||void 0===a?void 0:a.trim())||""}}))||[]}})(t);return r[a]={...r[a],...s,updatedAt:(new Date).toISOString()},Qo(r),{...Ko,success:!0,data:r[a],message:"Collaboration updated successfully"}}catch(r){return console.error("Error updating collaboration:",r),{...Ko,success:!1,error:r.message||"Failed to update collaboration"}}},as=async e=>{try{const t=Zo(),r=t.filter(t=>t.id!==e);return r.length===t.length?{...Ko,success:!1,error:"Collaboration not found"}:(Qo(r),{...Ko,success:!0,message:"Collaboration deleted successfully"})}catch(t){return console.error("Error deleting collaboration:",t),{...Ko,success:!1,error:t.message||"Failed to delete collaboration"}}},os=async e=>{try{const t=Zo(),r=t.find(t=>t.id===e);return r?(r.likes=(r.likes||0)+1,Qo(t),{...Ko,success:!0,data:{likes:r.likes},message:"Collaboration liked successfully"}):{...Ko,success:!1,error:"Collaboration not found"}}catch(t){return console.error("Error liking collaboration:",t),{...Ko,success:!1,error:t.message||"Failed to like collaboration"}}},ss=async()=>{try{const e={total:Go.length,byUser:{alex:qo.length,bryan:Ho.length,alice:Vo.length},byStatus:{active:Go.filter(e=>"active"===e.status).length,completed:Go.filter(e=>"completed"===e.status).length,paused:Go.filter(e=>"paused"===e.status).length}};return{...Ko,success:!0,data:e}}catch(e){return console.error("Error fetching collaboration stats:",e),{...Ko,success:!1,error:e.message||"Failed to fetch collaboration stats"}}},ns=async()=>{try{return Qo(Go),{...Ko,success:!0,message:"Mock data reset successfully"}}catch(e){return console.error("Error resetting mock data:",e),{...Ko,success:!1,error:e.message||"Failed to reset mock data"}}},is=t=>{let{imageKey:r,alt:a="Collaboration image",className:o="w-full h-56 object-cover",fallbackClassName:s="w-full h-56 bg-gray-200 flex items-center justify-center"}=t;const[n,i]=(0,e.useState)(null),[l,c]=(0,e.useState)(!1),[d,u]=(0,e.useState)(!1);return(0,e.useEffect)(()=>{(async()=>{if(r){if(r.startsWith("blob:")||r.startsWith("data:")||r.startsWith("http"))return r.startsWith("blob:"),void i(r);if(r.startsWith("collaboration_")){c(!0),u(!1);try{const e=await ya.default.getImageUrl(r);i(e)}catch(e){console.warn(`[CollaborationImage] Failed to load image: ${r}`,e),u(!0)}finally{c(!1)}}else i(r)}else i(null)})()},[r]),l?(0,ht.jsx)("div",{className:s,children:(0,ht.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):d||!n?(0,ht.jsx)("div",{className:s,children:(0,ht.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}):(0,ht.jsx)("img",{src:n,alt:a,className:o,onError:e=>{console.warn(`[CollaborationImage] Image failed to load: ${n}`),e.target.style.display="none",d||u(!0)}})},ls=t=>{let{onCollaborationClick:r,onBookmarkToggle:a}=t;const[o,s]=(0,e.useState)([]),[n,i]=(0,e.useState)(!0),[l,c]=(0,e.useState)(null);return(0,e.useEffect)(()=>{const e=async()=>{try{i(!0);const e=await es();e.success?s(e.data):c(e.error)}catch(e){c(e.message)}finally{i(!1)}};e();const t=()=>{e()};return window.addEventListener("collaboration:created",t),()=>{window.removeEventListener("collaboration:created",t)}},[]),n?(0,ht.jsx)("div",{className:"flex-1 flex items-center justify-center py-12",children:(0,ht.jsx)("div",{className:"text-gray-500",children:"Loading collaborations..."})}):l?(0,ht.jsx)("div",{className:"flex-1 flex items-center justify-center py-12",children:(0,ht.jsxs)("div",{className:"text-red-500",children:["Error loading collaborations: ",l]})}):0===o.length?(0,ht.jsx)("div",{className:"flex-1 flex items-center justify-center py-12",children:(0,ht.jsx)("div",{className:"text-gray-500",children:"No collaborations found."})}):(0,ht.jsx)("div",{className:"flex-1",children:(0,ht.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(e=>(0,ht.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md hover:scale-105 transition-all duration-300",children:[(0,ht.jsxs)("div",{className:"relative",children:[(0,ht.jsx)("div",{onClick:()=>r&&r(e),className:"block cursor-pointer",children:(0,ht.jsx)(is,{imageKey:e.posterPreview,alt:e.title})}),(0,ht.jsx)("button",{onClick:t=>{t.stopPropagation(),a&&a(e.id)},className:"absolute top-3 right-3 p-2 bg-white bg-opacity-90 rounded-full hover:bg-opacity-100 transition-all duration-200",children:(0,ht.jsx)("svg",{className:"w-5 h-5 "+(e.isBookmarked?"text-purple-500 fill-current":"text-gray-400"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})})]}),(0,ht.jsxs)("div",{className:"p-3",children:[(0,ht.jsxs)("div",{onClick:()=>r&&r(e),className:"block cursor-pointer",children:[(0,ht.jsx)("h3",{className:"font-bold text-gray-900 mb-1 text-sm hover:text-purple-600 transition-colors duration-200",children:e.title}),(0,ht.jsx)("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:e.description})]}),(0,ht.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ht.jsxs)("div",{className:"flex items-center",children:[e.author.avatar?(0,ht.jsx)("img",{src:e.author.avatar,alt:e.author.name,className:"w-6 h-6 rounded-full mr-2 object-cover",onError:e=>{e.target.style.display="none"}}):(0,ht.jsx)("div",{className:"w-6 h-6 rounded-full mr-2 bg-gray-300 flex items-center justify-center",children:(0,ht.jsx)("span",{className:"text-xs text-gray-600 font-medium",children:e.author.name.charAt(0).toUpperCase()})}),(0,ht.jsx)("span",{className:"text-xs font-medium text-gray-900",children:e.author.name})]}),(0,ht.jsx)("span",{className:"text-xs text-gray-500",children:"Dec 15, 2024"})]})]})]},e.id))})})},cs={categories:[{id:"thesis-project",name:"Thesis Project"},{id:"course-project",name:"Course Project"},{id:"studio-class",name:"Studio Class"},{id:"research-collaboration",name:"Research Collaboration"},{id:"internship-project",name:"Internship Project"},{id:"startup",name:"Startup"},{id:"student-club",name:"Student Club"},{id:"interdisciplinary-teamwork",name:"Interdisciplinary Teamwork"},{id:"international-exchange",name:"International Exchange"},{id:"others",name:"Others"}],majors:[{id:"accessory-design",name:"Accessory Design"},{id:"acting",name:"Acting"},{id:"advertising",name:"Advertising"},{id:"animation",name:"Animation"},{id:"architecture",name:"Architecture"},{id:"art-history",name:"Art History"},{id:"creative-business-leadership",name:"Creative Business Leadership"},{id:"fashion-design",name:"Fashion Design"},{id:"fibers",name:"Fibers"},{id:"film",name:"Film"},{id:"film-television",name:"Film/Television"},{id:"fine-art",name:"Fine Art"},{id:"game-design",name:"Game/ITGM"},{id:"graphic-design",name:"Graphic Design"},{id:"industrial-design",name:"Industrial Design"},{id:"illustration",name:"Illustration"},{id:"interior-design",name:"Interior Design"},{id:"jewelry",name:"Jewelry"},{id:"motion-design",name:"Motion Design"},{id:"painting",name:"Painting"},{id:"photography",name:"Photography"},{id:"service-design",name:"Service Design"},{id:"sequential-art",name:"Sequential Art"},{id:"ui-ux",name:"UI/UX"},{id:"visual-effects",name:"Visual Effects"}],tags:[{id:"typography",name:"Typography"},{id:"branding",name:"Branding"},{id:"editorial",name:"Editorial"},{id:"minimalist",name:"Minimalist"},{id:"experimental",name:"Experimental"},{id:"sustainable",name:"Sustainable"},{id:"interactive",name:"Interactive"},{id:"motion",name:"Motion"}]},ds=[{id:1,title:"Fantasy Character Series",description:"Digital illustration project exploring mythical creatures",image:null,progress:75,tags:["Illustration","Character Design"],teamMembers:[{name:"Sarah Chen",avatar:null},{name:"Alex Kim",avatar:null}],timestamp:"3 hours ago"},{id:2,title:"Cyberpunk Game Environment",description:"3D environment design for indie game project",image:null,progress:60,tags:["Game Design","3D Modeling"],teamMembers:[{name:"Maya Rodriguez",avatar:null},{name:"David Lee",avatar:null},{name:"Emma Wilson",avatar:null}],timestamp:"5 hours ago"},{id:3,title:"Short Film Storyboard",description:"Pre-production planning for student film festival",image:null,progress:25,tags:["Film","Storyboard"],teamMembers:[{name:"Jordan Park",avatar:null},{name:"Sophie Davis",avatar:null}],timestamp:"1 day ago"},{id:4,title:"Music Festival Branding",description:"Complete visual identity for campus music festival",image:null,progress:80,tags:["Graphic Design","Branding"],teamMembers:[{name:"Mike Johnson",avatar:null},{name:"Lisa Chen",avatar:null},{name:"Tom Wilson",avatar:null}],timestamp:"6 hours ago"},{id:5,title:"Magic VFX Sequence",description:"Visual effects compositing for fantasy short film",image:null,progress:40,tags:["VFX","Compositing"],teamMembers:[{name:"Anna Smith",avatar:null},{name:"Chris Brown",avatar:null}],timestamp:"2 days ago"},{id:6,title:"2D Character Animation",description:"Walk cycle and expressions for animated short",image:null,progress:90,tags:["Animation","2D Art"],teamMembers:[{name:"Rachel Green",avatar:null},{name:"Kevin Lee",avatar:null},{name:"Maria Garcia",avatar:null},{name:"James Miller",avatar:null}],timestamp:"4 hours ago"}],us=[{id:1,title:"Indie Horror Game",description:"Seeking talented artists for an atmospheric horror game project with unique visual style and immersive storytelling.",status:"Open",timePosted:"2 days ago",skills:["3D Artist","Concept Artist"],tools:["Unity","Blender"],recruiter:{name:"Alex Chen",avatar:null},applicants:5,dueDate:"March 15"},{id:2,title:"Animated Short Film",description:"Collaborative animation project for film festival submission. Looking for creative animators and sound designers.",status:"Open",timePosted:"1 week ago",skills:["Animator","Sound Designer"],tools:["After Effects","Premiere"],recruiter:{name:"Sarah Kim",avatar:null},applicants:12,dueDate:"April 2"},{id:3,title:"Mobile App UI Design",description:"Design intuitive and modern user interface for a productivity app targeting young professionals.",status:"Urgent",timePosted:"3 hours ago",skills:["UI Designer","UX Designer"],tools:["Figma","Sketch"],recruiter:{name:"Mike Rodriguez",avatar:null},applicants:8,dueDate:"Feb 28"},{id:4,title:"VR Experience Project",description:"Immersive virtual reality experience for educational purposes. Seeking developers with VR development experience.",status:"Open",timePosted:"5 days ago",skills:["Unity Developer","3D Artist"],tools:["Unity","Oculus SDK"],recruiter:{name:"Emma Johnson",avatar:null},applicants:3,dueDate:"May 10"},{id:5,title:"Podcast Series Design",description:"Create visual identity and promotional materials for a student-run podcast series about design and creativity.",status:"Open",timePosted:"1 day ago",skills:["Graphic Designer","Motion Designer"],tools:["Photoshop","After Effects"],recruiter:{name:"David Lee",avatar:null},applicants:6,dueDate:"March 20"}],hs=e=>{let{onApplyJob:t}=e;return(0,ht.jsxs)("div",{className:"flex-1",children:[(0,ht.jsxs)("div",{className:"text-center py-8 mb-8",children:[(0,ht.jsx)("h3",{className:"text-lg font-medium text-red-500 mb-2",children:"Jobs Coming Soon"}),(0,ht.jsx)("p",{className:"text-red-400",children:"Job opportunities and internships will be available here."})]}),(0,ht.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:us.map(e=>(0,ht.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-all duration-300",children:[(0,ht.jsxs)("div",{className:"p-4 border-b border-gray-100",children:[(0,ht.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,ht.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full "+("Urgent"===e.status?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.status}),(0,ht.jsx)("span",{className:"text-xs text-gray-500",children:e.timePosted})]}),(0,ht.jsx)("h3",{className:"font-bold text-gray-900 text-lg mb-2",children:e.title}),(0,ht.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:e.description})]}),(0,ht.jsxs)("div",{className:"p-4",children:[(0,ht.jsx)("div",{className:"mb-3",children:(0,ht.jsx)("div",{className:"flex flex-wrap gap-2",children:e.skills.map((e,t)=>(0,ht.jsx)("span",{className:"px-3 py-1 text-xs bg-blue-100 text-blue-800 rounded-full font-medium",children:e},t))})}),(0,ht.jsx)("div",{className:"mb-4",children:(0,ht.jsx)("div",{className:"flex flex-wrap gap-2",children:e.tools.map((e,t)=>(0,ht.jsx)("span",{className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded-full font-medium",children:e},t))})}),(0,ht.jsxs)("div",{className:"flex items-center mb-3",children:[(0,ht.jsx)("img",{src:e.recruiter.avatar,alt:e.recruiter.name,className:"w-8 h-8 rounded-full mr-3"}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.recruiter.name}),(0,ht.jsxs)("p",{className:"text-xs text-gray-500",children:[e.applicants," applicants"]})]})]}),(0,ht.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ht.jsxs)("span",{className:"text-sm text-gray-600",children:["Due: ",e.dueDate]}),(0,ht.jsx)("button",{onClick:()=>t&&t(e.id),className:"bg-purple-500 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-purple-600 transition-colors duration-200",children:"Apply"})]})]})]},e.id))})]})},ms=e=>({Illustration:"bg-purple-200 text-purple-800","Character Design":"bg-blue-200 text-blue-800","Game Design":"bg-green-200 text-green-800","3D Modeling":"bg-purple-200 text-purple-800",Film:"bg-orange-200 text-orange-800",Storyboard:"bg-blue-200 text-blue-800","Graphic Design":"bg-pink-200 text-pink-800",Branding:"bg-blue-200 text-blue-800",VFX:"bg-purple-200 text-purple-800",Compositing:"bg-orange-200 text-orange-800",Animation:"bg-green-200 text-green-800","2D Art":"bg-pink-200 text-pink-800"}[e]||"bg-gray-200 text-gray-800"),ps=e=>{let{onMilestoneClick:t}=e;return(0,ht.jsx)("div",{className:"flex-1",children:(0,ht.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:ds.map(e=>{return(0,ht.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md hover:scale-105 transition-all duration-300",children:[(0,ht.jsx)("div",{className:"relative",children:(0,ht.jsx)(at,{to:`/tagme/milestone/${e.id}`,className:"block",children:(0,ht.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-48 object-cover"})})}),(0,ht.jsxs)("div",{className:"p-4",children:[(0,ht.jsxs)(at,{to:`/tagme/milestone/${e.id}`,className:"block",children:[(0,ht.jsx)("h3",{className:"font-bold text-gray-900 mb-1 text-lg hover:text-purple-600 transition-colors duration-200",children:e.title}),(0,ht.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:e.description})]}),(0,ht.jsxs)("div",{className:"mb-4",children:[(0,ht.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,ht.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Progress"}),(0,ht.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[e.progress,"%"]})]}),(0,ht.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,ht.jsx)("div",{className:`h-2 rounded-full transition-all duration-300 ${t=e.tags[0],{Illustration:"bg-purple-500","Character Design":"bg-blue-500","Game Design":"bg-green-500","3D Modeling":"bg-purple-500",Film:"bg-orange-500",Storyboard:"bg-blue-500","Graphic Design":"bg-pink-500",Branding:"bg-blue-500",VFX:"bg-purple-500",Compositing:"bg-orange-500",Animation:"bg-green-500","2D Art":"bg-pink-500"}[t]||"bg-gray-500"}`,style:{width:`${e.progress}%`}})})]}),(0,ht.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:e.tags.map((e,t)=>(0,ht.jsx)("span",{className:`px-3 py-1 text-xs rounded-full font-medium ${ms(e)}`,children:e},t))}),(0,ht.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ht.jsxs)("div",{className:"flex items-center",children:[(0,ht.jsx)("div",{className:"flex -space-x-2 mr-3",children:e.teamMembers.slice(0,4).map((e,t)=>(0,ht.jsx)("img",{src:e.avatar,alt:e.name,className:"w-8 h-8 rounded-full border-2 border-white"},t))}),(0,ht.jsxs)("span",{className:"text-sm text-gray-600",children:[e.teamMembers.length," members"]})]}),(0,ht.jsx)("span",{className:"text-xs text-gray-500",children:e.timestamp})]})]})]},e.id);var t})})})},gs=e=>{let{children:t,activeTab:r,onTabChange:a,onCollaborationClick:o,onMilestoneClick:s}=e;return(0,ht.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[(0,ht.jsxs)("div",{className:"flex flex-col mb-8","data-tagme-section":!0,children:[(0,ht.jsx)("h2",{className:"text-3xl font-bold text-gray-400 mb-6",children:"TAG Me"}),(0,ht.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,ht.jsx)("div",{className:"w-7/12",children:(0,ht.jsx)(vt,{onInputChange:e=>console.log("Search:",e.target.value),placeholder:"Search for Collaborations or Artists",className:"w-full"})}),(0,ht.jsx)("div",{className:"inline-flex rounded-full border border-gray-300 bg-white p-1",children:["Collaborations","Milestones","Jobs"].map(e=>(0,ht.jsxs)("button",{onClick:()=>a(e),className:"relative px-12 py-3 text-base font-semibold tracking-wide transition-all duration-300 ease-in-out "+(r===e?"text-white":"text-gray-700 hover:text-gray-900"),children:[r===e&&(0,ht.jsx)("div",{className:"absolute inset-0 bg-purple-500 rounded-full transition-all duration-300 ease-in-out"}),(0,ht.jsx)("span",{className:"relative z-10",children:e})]},e))})]})]}),(0,ht.jsx)("div",{className:"flex flex-col lg:flex-row gap-8",children:t})]})},fs=e=>{let{selectedCategories:t,selectedMajors:r,selectedTags:a,onCategoryToggle:o,onMajorToggle:s,onTagToggle:n}=e;return(0,ht.jsx)("div",{className:"lg:w-64 flex-shrink-0",children:(0,ht.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,ht.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-6",children:"Filters"}),(0,ht.jsxs)("div",{className:"mb-8",children:[(0,ht.jsx)("h4",{className:"font-bold text-gray-900 mb-3",children:"Category"}),(0,ht.jsx)("div",{className:"space-y-2",children:cs.categories.map(e=>(0,ht.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,ht.jsx)("input",{type:"checkbox",checked:t.includes(e.id),onChange:()=>o(e.id),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),(0,ht.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:e.name})]},e.id))})]}),(0,ht.jsxs)("div",{className:"mb-8",children:[(0,ht.jsx)("h4",{className:"font-bold text-gray-900 mb-3",children:"Major"}),(0,ht.jsx)("div",{className:"space-y-2",children:cs.majors.map(e=>(0,ht.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,ht.jsx)("input",{type:"checkbox",checked:r.includes(e.id),onChange:()=>s(e.id),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),(0,ht.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:e.name})]},e.id))})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("h4",{className:"font-bold text-gray-900 mb-3",children:"Tags"}),(0,ht.jsx)("div",{className:"flex flex-wrap gap-2",children:cs.tags.map(e=>(0,ht.jsx)("button",{onClick:()=>n(e.id),className:"px-3 py-1 text-xs rounded-full transition-colors duration-200 "+(a.includes(e.id)?"bg-purple-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.name},e.id))})]})]})})},vs=()=>(0,ht.jsx)(ht.Fragment,{children:(0,ht.jsx)("section",{className:"pt-20 pb-16 bg-white",children:(0,ht.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[(0,ht.jsx)("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 mb-6",children:"Discover Amazing Student Creative Work"}),(0,ht.jsx)("p",{className:"text-lg md:text-xl text-gray-600 mb-8 max-w-3xl mx-auto leading-relaxed",children:"Explore thousands of inspiring projects from talented students across the globe. From 3D art to concept design, find your next creative inspiration."}),(0,ht.jsx)("button",{onClick:()=>{},className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-md text-lg font-medium hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:"About TAG"})]})})}),xs=t=>{let{state:r,setters:a}=t;const{setSelectedCategories:o,setSelectedMajors:s,setSelectedTags:n}=a;return{handleCategoryToggle:(0,e.useCallback)(e=>{o(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[o]),handleMajorToggle:(0,e.useCallback)(e=>{s(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[s]),handleTagToggle:(0,e.useCallback)(e=>{n(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[n]),handleLikeToggle:(0,e.useCallback)(e=>{},[]),handleApplyJob:(0,e.useCallback)(e=>{},[]),handleBookmarkToggle:(0,e.useCallback)(e=>{},[])}},bs=()=>{const[t,r]=(0,e.useState)("Collaborations"),[a,o]=(0,e.useState)([]),[s,n]=(0,e.useState)([]),[i,l]=(0,e.useState)([]);return(0,e.useMemo)(()=>({state:{activeTab:t,selectedCategories:a,selectedMajors:s,selectedTags:i},setters:{setActiveTab:r,setSelectedCategories:o,setSelectedMajors:n,setSelectedTags:l}}),[t,a,s,i])},ys=t=>{var r,a;let{onBackClick:o,onMilestoneClick:s,onCollaborationClick:n}=t;const i=Z(),{restoreScrollPosition:l}=_r(),{state:c,actions:d}=xr(),{state:u,setters:h}=bs(),m=xs({state:u,setters:h});return(0,e.useEffect)(()=>{var e,t;null!==(e=i.state)&&void 0!==e&&e.activeTab&&"upload-success"===(null===(t=i.state)||void 0===t?void 0:t.from)&&(h.setActiveTab(i.state.activeTab),window.history.replaceState({},document.title),setTimeout(()=>{const e=document.querySelector("[data-tagme-section]");if(e){const t=e.getBoundingClientRect(),r=window.pageYOffset+t.top-80;window.scrollTo({top:r,behavior:"auto"})}},100))},[null===(r=i.state)||void 0===r?void 0:r.activeTab,null===(a=i.state)||void 0===a?void 0:a.from,h.setActiveTab]),(0,e.useEffect)(()=>{const e=c.scrollPositions[`/tagme-${u.activeTab}`];if(e&&c.navigationHistory.length>0){"tagme"===c.navigationHistory[c.navigationHistory.length-1].from&&requestAnimationFrame(()=>{window.scrollTo({top:e,behavior:"auto"})})}},[u.activeTab]),(0,e.useEffect)(()=>{if(c.navigationHistory.length>0){const e=c.navigationHistory[c.navigationHistory.length-1];"tagme"===e.from&&e.activeTab&&h.setActiveTab(e.activeTab)}},[c.navigationHistory,h.setActiveTab]),(0,e.useEffect)(()=>{const e=()=>{const e=window.pageYOffset;d.saveScrollPosition(`/tagme-${u.activeTab}`,e)},t=setInterval(e,1e3),r=e,a=()=>{"hidden"===document.visibilityState&&e()};return window.addEventListener("beforeunload",r),document.addEventListener("visibilitychange",a),()=>{e(),clearInterval(t),window.removeEventListener("beforeunload",r),document.removeEventListener("visibilitychange",a)}},[u.activeTab,d.saveScrollPosition]),(0,ht.jsxs)("div",{className:"min-h-screen bg-gray-50",style:{opacity:1,transition:"opacity 0.2s ease-in"},children:[(0,ht.jsx)(vs,{}),(0,ht.jsxs)(gs,{activeTab:u.activeTab,onTabChange:h.setActiveTab,onCollaborationClick:n,onMilestoneClick:s,children:[(0,ht.jsx)(fs,{selectedCategories:u.selectedCategories,selectedMajors:u.selectedMajors,selectedTags:u.selectedTags,onCategoryToggle:m.handleCategoryToggle,onMajorToggle:m.handleMajorToggle,onTagToggle:m.handleTagToggle}),"Collaborations"===u.activeTab&&(0,ht.jsx)(ls,{onCollaborationClick:n,onBookmarkToggle:m.handleBookmarkToggle}),"Milestones"===u.activeTab&&(0,ht.jsx)(ps,{onMilestoneClick:s}),"Jobs"===u.activeTab&&(0,ht.jsx)(hs,{onApplyJob:m.handleApplyJob})]})]})},ws=()=>{const[t,r]=(0,e.useState)(null),[a,o]=(0,e.useState)(!1),[s,n]=(0,e.useState)(""),[i,l]=(0,e.useState)(!1),{collaborations:c,loading:d,error:u,createNewCollaboration:h,fetchCollaborations:m,resetData:p,stats:g}=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[r,a]=(0,e.useState)([]),[o,s]=(0,e.useState)(null),[n,i]=(0,e.useState)(null),[l,c]=(0,e.useState)(!1),[d,u]=(0,e.useState)(null),[h,m]=(0,e.useState)({page:1,limit:12,total:0,totalPages:0,hasNext:!1,hasPrev:!1}),[p,g]=(0,e.useState)({page:1,limit:12,status:"active",authorId:null,searchTerm:"",sortBy:"createdAt",sortOrder:"desc",...t}),f=(0,e.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c(!0),u(null);try{const t={...p,...e};g(t);const r=await es(t);r.success?(a(r.data),m(r.pagination)):u(r.error)}catch(t){u(t.message||"Failed to fetch collaborations")}finally{c(!1)}},[p]),v=(0,e.useCallback)(async e=>{c(!0),u(null);try{const t=await ts(e);t.success?s(t.data):u(t.error)}catch(t){u(t.message||"Failed to fetch collaboration details")}finally{c(!1)}},[]),x=(0,e.useCallback)(async e=>{c(!0),u(null);try{const t=await Xo(e);return t.success?(await f({page:1}),{success:!0,data:t.data}):(u(t.error),{success:!1,errors:t.data})}catch(t){const e=t.message||"Failed to create collaboration";return u(e),{success:!1,error:e}}finally{c(!1)}},[f]),b=(0,e.useCallback)(async(e,t)=>{c(!0),u(null);try{const r=await rs(e,t);return r.success?((null===o||void 0===o?void 0:o.id)===e&&s(r.data),await f(),{success:!0,data:r.data}):(u(r.error),{success:!1,errors:r.data})}catch(r){const e=r.message||"Failed to update collaboration";return u(e),{success:!1,error:e}}finally{c(!1)}},[o,f]),y=(0,e.useCallback)(async e=>{c(!0),u(null);try{const t=await as(e);return t.success?((null===o||void 0===o?void 0:o.id)===e&&s(null),await f(),{success:!0}):(u(t.error),{success:!1,error:t.error})}catch(t){const e=t.message||"Failed to delete collaboration";return u(e),{success:!1,error:e}}finally{c(!1)}},[o,f]),w=(0,e.useCallback)(async e=>{try{const t=await os(e);return t.success?(a(r=>r.map(r=>r.id===e?{...r,likes:t.data.likes}:r)),(null===o||void 0===o?void 0:o.id)===e&&s(e=>({...e,likes:t.data.likes})),{success:!0,likes:t.data.likes}):{success:!1,error:t.error}}catch(t){return{success:!1,error:t.message||"Failed to like collaboration"}}},[o]),j=(0,e.useCallback)(async()=>{try{const e=await ss();e.success&&i(e.data)}catch(e){console.error("Failed to fetch stats:",e)}},[]),k=(0,e.useCallback)(async()=>{c(!0),u(null);try{const e=await ns();return e.success?(await f({page:1}),await j(),{success:!0}):(u(e.error),{success:!1,error:e.error})}catch(e){const t=e.message||"Failed to reset data";return u(t),{success:!1,error:t}}finally{c(!1)}},[f,j]),N=(0,e.useCallback)(e=>{f({searchTerm:e,page:1})},[f]),C=(0,e.useCallback)(e=>{f({...e,page:1})},[f]),S=(0,e.useCallback)(function(e){f({sortBy:e,sortOrder:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"desc",page:1})},[f]),_=(0,e.useCallback)(e=>{f({page:e})},[f]),E=(0,e.useCallback)(()=>{u(null)},[]),P=(0,e.useCallback)(()=>{s(null)},[]);return(0,e.useEffect)(()=>{f(),j()},[]),{collaborations:r,currentCollaboration:o,stats:n,loading:l,error:d,pagination:h,queryOptions:p,fetchCollaborations:f,fetchCollaborationById:v,createNewCollaboration:x,updateExistingCollaboration:b,deleteExistingCollaboration:y,likeExistingCollaboration:w,fetchStats:j,resetData:k,searchCollaborations:N,filterCollaborations:C,sortCollaborations:S,goToPage:_,clearError:E,clearCurrentCollaboration:P,hasNextPage:h.hasNext,hasPrevPage:h.hasPrev,currentPage:h.page,totalPages:h.totalPages,totalItems:h.total}}(),[f,v]=(0,e.useState)({title:"Manual Test Collaboration",description:"This is a manual test collaboration project.",projectVision:"Testing collaboration functionality manually",whyThisMatters:"This helps verify the collaboration system works correctly.",teamSize:"2-3",duration:"1-2 months",meetingSchedule:"1-2 times/week",applicationDeadline:"2024-12-31",projectType:"Test Project",contactEmail:"test@example.com",contactDiscord:"testuser#1234",contactOther:"",roles:[{id:1,customRole:"Test Role",roleDescription:"This is a test role for manual testing.",requiredSkills:"Testing, JavaScript, React"}]}),x=(e,t)=>{v(r=>({...r,[e]:t}))},b=(e,t,r)=>{v(a=>({...a,roles:a.roles.map((a,o)=>o===e?{...a,[t]:r}:a)}))};return(0,ht.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,ht.jsxs)("div",{className:"max-w-6xl mx-auto px-4",children:[(0,ht.jsxs)("div",{className:"text-center mb-8",children:[(0,ht.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\ud83e\uddea Collaboration Service Test Page"}),(0,ht.jsx)("p",{className:"text-gray-600",children:"Test the collaboration functionality and verify all features work correctly"})]}),(0,ht.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,ht.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"\ud83d\udcca Current Status"}),(0,ht.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,ht.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,ht.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:c.length}),(0,ht.jsx)("div",{className:"text-sm text-blue-800",children:"Total Collaborations"})]}),(0,ht.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,ht.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(null===g||void 0===g?void 0:g.total)||0}),(0,ht.jsx)("div",{className:"text-sm text-green-800",children:"Active Projects"})]}),(0,ht.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,ht.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:d?"...":"Ready"}),(0,ht.jsx)("div",{className:"text-sm text-purple-800",children:"Service Status"})]}),(0,ht.jsxs)("div",{className:"bg-orange-50 p-4 rounded-lg",children:[(0,ht.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:u?"Error":"OK"}),(0,ht.jsx)("div",{className:"text-sm text-orange-800",children:"Error Status"})]})]})]}),(0,ht.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,ht.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"\ud83d\udd27 Test Controls"}),(0,ht.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,ht.jsx)("button",{onClick:async()=>{o(!0),r(null),n("");try{console.log("\ud83e\uddea Starting automated tests...");const e=await(async()=>{const e={passed:0,failed:0,tests:[]};console.log("\ud83e\uddea Starting Collaboration Service Tests...");try{console.log("\ud83d\udccb Test 1: Reset Mock Data");const t=await ns();t.success?(e.passed++,e.tests.push({name:"Reset Mock Data",status:"PASSED"}),console.log("\u2705 Reset Mock Data: PASSED")):(e.failed++,e.tests.push({name:"Reset Mock Data",status:"FAILED",error:t.error}),console.log("\u274c Reset Mock Data: FAILED",t.error)),console.log("\ud83d\udccb Test 2: Get Collaborations List");const r=await es();r.success&&r.data.length>0?(e.passed++,e.tests.push({name:"Get Collaborations List",status:"PASSED",count:r.data.length}),console.log("\u2705 Get Collaborations List: PASSED",`(${r.data.length} items)`)):(e.failed++,e.tests.push({name:"Get Collaborations List",status:"FAILED",error:r.error}),console.log("\u274c Get Collaborations List: FAILED",r.error)),console.log("\ud83d\udccb Test 3: Get Collaboration Stats");const a=await ss();a.success&&a.data?(e.passed++,e.tests.push({name:"Get Collaboration Stats",status:"PASSED",stats:a.data}),console.log("\u2705 Get Collaboration Stats: PASSED",a.data)):(e.failed++,e.tests.push({name:"Get Collaboration Stats",status:"FAILED",error:a.error}),console.log("\u274c Get Collaboration Stats: FAILED",a.error)),console.log("\ud83d\udccb Test 4: Create New Collaboration");const o={title:"Test Collaboration Project",description:"This is a test collaboration project for testing purposes.",projectVision:"Testing the collaboration service functionality",whyThisMatters:"This test helps ensure the service works correctly.",teamSize:"2-3",duration:"1-2 months",meetingSchedule:"1-2 times/week",applicationDeadline:"2024-12-31",projectType:"Test Project",contactEmail:"test@example.com",contactDiscord:"testuser#1234",contactOther:"",roles:[{id:1,customRole:"Test Role",roleDescription:"This is a test role for testing purposes.",requiredSkills:"Testing, JavaScript, React"}]},s=await Xo(o);if(s.success&&s.data.id){e.passed++,e.tests.push({name:"Create New Collaboration",status:"PASSED",id:s.data.id}),console.log("\u2705 Create New Collaboration: PASSED",s.data.id),console.log("\ud83d\udccb Test 5: Get Collaboration Details");const t=await ts(s.data.id);if(t.success&&t.data){e.passed++,e.tests.push({name:"Get Collaboration Details",status:"PASSED",id:s.data.id}),console.log("\u2705 Get Collaboration Details: PASSED"),console.log("\ud83d\udccb Test 6: Like Collaboration");const t=await os(s.data.id);if(t.success&&t.data.likes>0){e.passed++,e.tests.push({name:"Like Collaboration",status:"PASSED",likes:t.data.likes}),console.log("\u2705 Like Collaboration: PASSED",t.data.likes),console.log("\ud83d\udccb Test 7: Update Collaboration");const r={title:"Updated Test Collaboration Project",description:"This is an updated test collaboration project.",projectVision:"Updated testing vision",teamSize:"3-4",duration:"2-3 months",meetingSchedule:"2-3 times/week",applicationDeadline:"2024-12-31",contactEmail:"updated@example.com",contactDiscord:"updateduser#5678",contactOther:"",roles:[{id:1,customRole:"Updated Test Role",roleDescription:"This is an updated test role.",requiredSkills:"Updated Testing, JavaScript, React"}]},a=await rs(s.data.id,r);if(a.success&&a.data.title===r.title){e.passed++,e.tests.push({name:"Update Collaboration",status:"PASSED"}),console.log("\u2705 Update Collaboration: PASSED"),console.log("\ud83d\udccb Test 8: Delete Collaboration");const t=await as(s.data.id);t.success?(e.passed++,e.tests.push({name:"Delete Collaboration",status:"PASSED"}),console.log("\u2705 Delete Collaboration: PASSED")):(e.failed++,e.tests.push({name:"Delete Collaboration",status:"FAILED",error:t.error}),console.log("\u274c Delete Collaboration: FAILED",t.error))}else e.failed++,e.tests.push({name:"Update Collaboration",status:"FAILED",error:a.error}),console.log("\u274c Update Collaboration: FAILED",a.error)}else e.failed++,e.tests.push({name:"Like Collaboration",status:"FAILED",error:t.error}),console.log("\u274c Like Collaboration: FAILED",t.error)}else e.failed++,e.tests.push({name:"Get Collaboration Details",status:"FAILED",error:t.error}),console.log("\u274c Get Collaboration Details: FAILED",t.error)}else e.failed++,e.tests.push({name:"Create New Collaboration",status:"FAILED",error:s.error}),console.log("\u274c Create New Collaboration: FAILED",s.error);console.log("\ud83d\udccb Test 9: Search Collaborations");const n=await es({searchTerm:"Game"});n.success?(e.passed++,e.tests.push({name:"Search Collaborations",status:"PASSED",count:n.data.length}),console.log("\u2705 Search Collaborations: PASSED",`(${n.data.length} results)`)):(e.failed++,e.tests.push({name:"Search Collaborations",status:"FAILED",error:n.error}),console.log("\u274c Search Collaborations: FAILED",n.error)),console.log("\ud83d\udccb Test 10: Pagination");const i=await es({page:1,limit:2});i.success&&i.pagination?(e.passed++,e.tests.push({name:"Pagination",status:"PASSED",pagination:i.pagination}),console.log("\u2705 Pagination: PASSED",i.pagination)):(e.failed++,e.tests.push({name:"Pagination",status:"FAILED",error:i.error}),console.log("\u274c Pagination: FAILED",i.error))}catch(u){console.error("\u274c Test Suite Error:",u),e.failed++,e.tests.push({name:"Test Suite",status:"ERROR",error:u.message})}return console.log("\n\ud83d\udcca Test Results Summary:"),console.log(`\u2705 Passed: ${e.passed}`),console.log(`\u274c Failed: ${e.failed}`),console.log(`\ud83d\udcc8 Success Rate: ${(e.passed/(e.passed+e.failed)*100).toFixed(1)}%`),e})();r(e);const t=(e=>{const t=["# Collaboration Service Test Report","","## Summary",`- **Total Tests**: ${e.passed+e.failed}`,`- **Passed**: ${e.passed}`,`- **Failed**: ${e.failed}`,`- **Success Rate**: ${(e.passed/(e.passed+e.failed)*100).toFixed(1)}%`,"","## Test Details",""];return e.tests.forEach(e=>{const r="PASSED"===e.status?"\u2705":"\u274c";t.push(`### ${r} ${e.name}`),e.error&&t.push(`**Error**: ${e.error}`),e.count&&t.push(`**Count**: ${e.count}`),e.id&&t.push(`**ID**: ${e.id}`),e.likes&&t.push(`**Likes**: ${e.likes}`),e.stats&&t.push(`**Stats**: ${JSON.stringify(e.stats,null,2)}`),e.pagination&&t.push(`**Pagination**: ${JSON.stringify(e.pagination,null,2)}`),t.push("")}),t.join("\n")})(e);n(t),console.log("\u2705 Automated tests completed!")}catch(u){console.error("\u274c Test execution failed:",u),r({passed:0,failed:1,tests:[{name:"Test Execution",status:"ERROR",error:u.message}]})}finally{o(!1)}},disabled:a,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-6 py-2 rounded-lg font-medium",children:a?"\ud83d\udd04 Running Tests...":"\ud83e\uddea Run Automated Tests"}),(0,ht.jsx)("button",{onClick:()=>{const e=(()=>{const e={valid:!0,issues:[]};try{const t=localStorage.getItem(Yo);if(!t)return e.issues.push("No collaboration data found in localStorage"),e.valid=!1,e;JSON.parse(t).forEach((t,r)=>{const a=["id","title","description","projectVision","author","status"].filter(e=>!t[e]);a.length>0&&(e.issues.push(`Collaboration ${r}: Missing required fields: ${a.join(", ")}`),e.valid=!1),!t.author||t.author.id&&t.author.name||(e.issues.push(`Collaboration ${r}: Invalid author information`),e.valid=!1),t.roles&&Array.isArray(t.roles)&&t.roles.forEach((t,a)=>{t.title&&t.description||(e.issues.push(`Collaboration ${r}, Role ${a}: Missing title or description`),e.valid=!1)})}),console.log("\ud83d\udd0d Data Integrity Check:",e.valid?"PASSED":"FAILED"),e.issues.length>0&&console.log("\u26a0\ufe0f Issues found:",e.issues)}catch(u){e.valid=!1,e.issues.push(`Data integrity check error: ${u.message}`),console.error("\u274c Data Integrity Check Error:",u)}return e})();console.log("\ud83d\udd0d Data Integrity Check Results:",e),e.valid?alert("\u2705 Data integrity check passed!"):alert(`\u274c Data integrity check failed!\nIssues:\n${e.issues.join("\n")}`)},className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-medium",children:"\ud83d\udd0d Check Data Integrity"}),(0,ht.jsx)("button",{onClick:async()=>{window.confirm("Are you sure you want to reset all collaboration data? This will restore the original mock data.")&&(await p(),alert("\u2705 Data reset successfully!"))},className:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg font-medium",children:"\ud83d\udd04 Reset Data"}),(0,ht.jsx)("button",{onClick:()=>l(!i),className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-lg font-medium",children:i?"\u274c Hide Manual Test":"\u270f\ufe0f Show Manual Test"})]})]}),i&&(0,ht.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,ht.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"\u270f\ufe0f Manual Test - Create Collaboration"}),(0,ht.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),(0,ht.jsx)("input",{type:"text",value:f.title,onChange:e=>x("title",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Type"}),(0,ht.jsx)("input",{type:"text",value:f.projectType,onChange:e=>x("projectType",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ht.jsxs)("div",{className:"md:col-span-2",children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,ht.jsx)("textarea",{value:f.description,onChange:e=>x("description",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ht.jsxs)("div",{className:"md:col-span-2",children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Vision"}),(0,ht.jsx)("textarea",{value:f.projectVision,onChange:e=>x("projectVision",e.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Team Size"}),(0,ht.jsx)("input",{type:"text",value:f.teamSize,onChange:e=>x("teamSize",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration"}),(0,ht.jsx)("input",{type:"text",value:f.duration,onChange:e=>x("duration",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Email"}),(0,ht.jsx)("input",{type:"email",value:f.contactEmail,onChange:e=>x("contactEmail",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discord"}),(0,ht.jsx)("input",{type:"text",value:f.contactDiscord,onChange:e=>x("contactDiscord",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,ht.jsxs)("div",{className:"mt-6",children:[(0,ht.jsx)("h3",{className:"text-lg font-medium mb-3",children:"Roles"}),f.roles.map((e,t)=>(0,ht.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 mb-4",children:(0,ht.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role Title"}),(0,ht.jsx)("input",{type:"text",value:e.customRole,onChange:e=>b(t,"customRole",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Required Skills"}),(0,ht.jsx)("input",{type:"text",value:e.requiredSkills,onChange:e=>b(t,"requiredSkills",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ht.jsxs)("div",{className:"md:col-span-2",children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role Description"}),(0,ht.jsx)("textarea",{value:e.roleDescription,onChange:e=>b(t,"roleDescription",e.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})},t))]}),(0,ht.jsx)("button",{onClick:async()=>{try{const e=await h(f);e.success?(alert(`\u2705 Collaboration created successfully!\nID: ${e.data.id}`),await m()):alert(`\u274c Failed to create collaboration:\n${e.error||JSON.stringify(e.errors)}`)}catch(u){alert(`\u274c Error creating collaboration: ${u.message}`)}},className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-medium",children:"\ud83d\ude80 Create Collaboration"})]}),t&&(0,ht.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,ht.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"\ud83d\udcca Test Results"}),(0,ht.jsx)("div",{className:"mb-4",children:(0,ht.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ht.jsx)("div",{className:"text-2xl font-bold text-green-600",children:t.passed}),(0,ht.jsx)("div",{className:"text-sm text-green-800",children:"Passed"}),(0,ht.jsx)("div",{className:"text-2xl font-bold text-red-600",children:t.failed}),(0,ht.jsx)("div",{className:"text-sm text-red-800",children:"Failed"}),(0,ht.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[(t.passed/(t.passed+t.failed)*100).toFixed(1),"%"]}),(0,ht.jsx)("div",{className:"text-sm text-blue-800",children:"Success Rate"})]})}),(0,ht.jsx)("div",{className:"space-y-2",children:t.tests.map((e,t)=>(0,ht.jsxs)("div",{className:"p-3 rounded-lg "+("PASSED"===e.status?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:[(0,ht.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ht.jsx)("span",{className:"PASSED"===e.status?"text-green-600":"text-red-600",children:"PASSED"===e.status?"\u2705":"\u274c"}),(0,ht.jsx)("span",{className:"font-medium",children:e.name})]}),e.error&&(0,ht.jsxs)("div",{className:"text-sm text-red-600 mt-1",children:["Error: ",e.error]}),e.count&&(0,ht.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["Count: ",e.count]})]},t))})]}),s&&(0,ht.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,ht.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"\ud83d\udccb Test Report"}),(0,ht.jsx)("pre",{className:"bg-gray-100 p-4 rounded-lg overflow-x-auto text-sm",children:s})]}),(0,ht.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,ht.jsxs)("h2",{className:"text-xl font-semibold mb-4",children:["\ud83d\udccb Current Collaborations (",c.length,")"]}),d?(0,ht.jsx)("div",{className:"text-center py-8",children:(0,ht.jsx)("div",{className:"text-gray-600",children:"Loading collaborations..."})}):0===c.length?(0,ht.jsx)("div",{className:"text-center py-8",children:(0,ht.jsx)("div",{className:"text-gray-600",children:"No collaborations found."})}):(0,ht.jsxs)("div",{className:"space-y-4",children:[c.slice(0,5).map(e=>{var t;return(0,ht.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,ht.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ht.jsxs)("div",{children:[(0,ht.jsx)("h3",{className:"font-medium text-lg",children:e.title}),(0,ht.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:e.subtitle}),(0,ht.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-500",children:[(0,ht.jsxs)("span",{children:["\ud83d\udc64 ",null===(t=e.author)||void 0===t?void 0:t.name]}),(0,ht.jsxs)("span",{children:["\u2764\ufe0f ",e.likes]}),(0,ht.jsxs)("span",{children:["\ud83d\udc41\ufe0f ",e.views]}),(0,ht.jsxs)("span",{children:["\ud83d\udcc5 ",e.dateRange]})]})]}),(0,ht.jsxs)("div",{className:"text-right",children:[(0,ht.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.id]}),(0,ht.jsx)("div",{className:"text-sm text-gray-500",children:e.status})]})]})},e.id)}),c.length>5&&(0,ht.jsxs)("div",{className:"text-center text-gray-600",children:["... and ",c.length-5," more collaborations"]})]})]})]})})};var js=r(784);const ks=()=>{const[t,r]=(0,e.useState)((0,ut.HW)()),a=async e=>{await(0,ut.Gr)(e),r((0,ut.HW)()),window.dispatchEvent(new CustomEvent("user:changed"))};return(0,ht.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,ht.jsx)("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Review Request Test Tools"}),(0,ht.jsxs)("div",{className:"space-y-4",children:[(0,ht.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,ht.jsx)("p",{className:"text-sm text-gray-600",children:"Current User:"}),(0,ht.jsxs)("p",{className:"font-medium text-gray-900",children:[t.name," (",t.id,")"]})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Switch User:"}),(0,ht.jsxs)("div",{className:"flex space-x-2",children:[(0,ht.jsx)("button",{onClick:()=>a("alice"),className:"px-3 py-1 text-sm rounded-md transition-colors duration-200 "+("alice"===t.id?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Alice (Owner)"}),(0,ht.jsx)("button",{onClick:()=>a("bryan"),className:"px-3 py-1 text-sm rounded-md transition-colors duration-200 "+("bryan"===t.id?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Bryan (Collaborator)"}),(0,ht.jsx)("button",{onClick:()=>a("alex"),className:"px-3 py-1 text-sm rounded-md transition-colors duration-200 "+("alex"===t.id?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Alex (Default)"})]})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Development Tools:"}),(0,ht.jsxs)("div",{className:"flex space-x-2",children:[(0,ht.jsx)("button",{onClick:()=>{(0,va.Ys)(),console.log("All review requests cancelled")},className:"px-3 py-1 text-sm bg-red-100 text-red-700 rounded-md hover:bg-red-200 transition-colors duration-200",children:"Cancel All Requests"}),(0,ht.jsx)("button",{onClick:()=>{const e=(0,va.iA)();console.log("Current review requests:",e)},className:"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors duration-200",children:"Show Requests (Console)"}),(0,ht.jsx)("button",{onClick:async()=>{try{const e=await Ht.lY.getUserNotifications(t.id);if(e.success){const r=e.data||[];console.log("Current notifications for",t.name,":",r),console.log("Notification count:",r.length),console.log("Unread count:",r.filter(e=>!e.isRead).length)}else console.log("No notifications found for",t.id)}catch(e){console.error("Error getting notifications:",e)}},className:"px-3 py-1 text-sm bg-purple-100 text-purple-700 rounded-md hover:bg-purple-200 transition-colors duration-200",children:"Show Notifications (Console)"})]})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Notification Test Tools:"}),(0,ht.jsxs)("div",{className:"flex space-x-2",children:[(0,ht.jsx)("button",{onClick:async()=>{try{const e=await(0,js.fp)({userId:t.id,title:"Collaboration Request",message:`New collaboration request for project "Interactive Web Experience" from ${t.name} at ${(new Date).toLocaleTimeString()}`,projectId:"collab_project_001"});console.log("Collaboration notification created:",e)}catch(e){console.error("Error creating collaboration notification:",e)}},className:"px-3 py-1 text-sm bg-purple-100 text-purple-700 rounded-md hover:bg-purple-200 transition-colors duration-200",children:"Create Collaboration Notification"}),(0,ht.jsx)("button",{onClick:async()=>{try{const e=await(0,js.createGeneralNotification)({userId:t.id,type:"system",title:"System Update",message:`System maintenance completed for ${t.name} at ${(new Date).toLocaleTimeString()}`,projectId:null});console.log("General notification created:",e)}catch(e){console.error("Error creating general notification:",e)}},className:"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors duration-200",children:"Create General Notification"}),(0,ht.jsx)("button",{onClick:async()=>{try{const e=await Ht.lY.getUserNotifications(t.id);if(e.success){const r=e.data||[];for(const e of r)await Ht.lY.deleteNotification(e.id);window.dispatchEvent(new CustomEvent("notif:unreadChanged",{detail:{userId:t.id}})),console.log(`All notifications cleared for ${t.name}`)}}catch(e){console.error("Error clearing notifications:",e)}},className:"px-3 py-1 text-sm bg-orange-100 text-orange-700 rounded-md hover:bg-orange-200 transition-colors duration-200",children:"Clear Notifications"})]})]}),(0,ht.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,ht.jsx)("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Test Steps:"}),(0,ht.jsxs)("ol",{className:"text-xs text-blue-800 space-y-1",children:[(0,ht.jsx)("li",{children:"1. Switch to Bryan \u2192 Go to Alice's collaboration project"}),(0,ht.jsx)("li",{children:'2. Click "Send Standard Request" \u2192 Should show "Pending Approval"'}),(0,ht.jsx)("li",{children:"3. Switch to Alice \u2192 Check Notification Center"}),(0,ht.jsx)("li",{children:'4. Click "Approve" or "Deny" on the review request'}),(0,ht.jsx)("li",{children:"5. Switch back to Bryan \u2192 Check if status changed"})]})]}),(0,ht.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg",children:[(0,ht.jsx)("p",{className:"text-sm font-medium text-green-900 mb-2",children:"Notification Test Steps:"}),(0,ht.jsxs)("ol",{className:"text-xs text-green-800 space-y-1",children:[(0,ht.jsx)("li",{children:'1. Select a user (e.g., Bryan) \u2192 Click "Create Collaboration Notification" (Purple theme)'}),(0,ht.jsx)("li",{children:'2. Click "Create General Notification" (Blue theme)'}),(0,ht.jsx)("li",{children:"3. Go to Notification Center \u2192 Check different color themes"}),(0,ht.jsx)("li",{children:'4. Click on notifications \u2192 Verify "mark as read" functionality'}),(0,ht.jsx)("li",{children:"5. Check unread count \u2192 Should decrease after marking as read"}),(0,ht.jsx)("li",{children:'6. Click "Clear Notifications" \u2192 Verify all notifications are removed'})]})]})]})]})},Ns=()=>{const[t,r]=(0,e.useState)([]),[a,o]=(0,e.useState)(!1),[s,n]=(0,e.useState)(""),i=(0,ut.HW)(),l=async()=>{o(!0),n("Loading portfolio...");try{const e=await(0,Dr.BD)();console.log("Load result:",e),e.success?(r(e.data),n(`Loaded ${e.data.length} items successfully`)):n(`Error: ${e.error}`)}catch(e){n(`Exception: ${e.message}`)}finally{o(!1)}};return(0,e.useEffect)(()=>{l()},[]),(0,ht.jsxs)("div",{style:{padding:"20px",maxWidth:"600px",margin:"0 auto"},children:[(0,ht.jsx)("h2",{children:"Mock API \u6d4b\u8bd5"}),(0,ht.jsxs)("p",{children:["\u5f53\u524d\u7528\u6237: ",i.name," (ID: ",i.id,")"]}),(0,ht.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,ht.jsx)("button",{onClick:l,disabled:a,style:{marginRight:"10px"},children:"\u52a0\u8f7d\u4f5c\u54c1"}),(0,ht.jsx)("button",{onClick:async()=>{o(!0),n("Creating portfolio item...");try{const e={title:`Test Item ${Date.now()}`,description:"This is a test item",category:"Test",tags:["test","mock"],imagePaths:["test/path/image.jpg"],thumbnailPath:"test/path/thumbnail.jpg",isPublic:!0},t=await(0,Dr.qo)(e);console.log("Create result:",t),t.success?(n("Created successfully! Reloading portfolio..."),await l()):n(`Error: ${t.error}`)}catch(e){n(`Exception: ${e.message}`)}finally{o(!1)}},disabled:a,style:{marginRight:"10px"},children:"\u521b\u5efa\u6d4b\u8bd5\u4f5c\u54c1"}),(0,ht.jsx)("button",{onClick:async()=>{o(!0),n("Testing image upload...");try{const e=new File(["mock image data"],"test.jpg",{type:"image/jpeg"}),t=await(0,Dr.jp)(e,i.id);console.log("Upload result:",t),t.success?n(`Uploaded successfully! Path: ${t.data.path}`):n(`Error: ${t.error}`)}catch(e){n(`Exception: ${e.message}`)}finally{o(!1)}},disabled:a,style:{marginRight:"10px"},children:"\u6d4b\u8bd5\u4e0a\u4f20\u56fe\u7247"}),(0,ht.jsx)("button",{onClick:()=>{Object.keys(localStorage).forEach(e=>{e.startsWith("portfolio_")&&localStorage.removeItem(e)}),r([]),n("Cleared portfolio storage")},disabled:a,children:"\u6e05\u7a7a\u5b58\u50a8"})]}),(0,ht.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,ht.jsx)("strong",{children:"\u72b6\u6001:"})," ",s]}),(0,ht.jsxs)("div",{children:[(0,ht.jsxs)("strong",{children:["\u4f5c\u54c1\u5217\u8868 (",t.length," \u4e2a):"]}),(0,ht.jsx)("pre",{style:{background:"#f5f5f5",padding:"10px",borderRadius:"4px",maxHeight:"300px",overflow:"auto"},children:JSON.stringify(t,null,2)})]}),(0,ht.jsxs)("div",{style:{marginTop:"20px"},children:[(0,ht.jsx)("strong",{children:"localStorage \u4e2d\u7684 portfolio \u952e:"}),(0,ht.jsx)("pre",{style:{background:"#f5f5f5",padding:"10px",borderRadius:"4px"},children:Object.keys(localStorage).filter(e=>e.startsWith("portfolio_")).join("\n")})]})]})},Cs=e=>{let{onBackClick:t}=e;return(0,ht.jsx)("div",{className:"p-4",children:(0,ht.jsxs)("button",{onClick:t,className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[(0,ht.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Home"]})})},Ss=()=>(0,ht.jsxs)("div",{className:"text-center mb-8",children:[(0,ht.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Posting Guidelines"}),(0,ht.jsx)("p",{className:"text-lg text-gray-600",children:"Artwork Submission Tips"})]}),_s=[{id:1,text:"Upload finished works only; images must be clear and legible",icon:"check"},{id:2,text:"Use descriptive titles that capture attention",icon:"check"},{id:3,text:"Add relevant tags to improve discoverability",icon:"check"},{id:4,text:"Images only for now (JPG / PNG)",icon:"check"},{id:5,text:"Max 10 MB per work (total of all images)",icon:"check"}],Es=[{id:1,text:"Avoid uploading work that isn't yours",icon:"x"},{id:2,text:"No blurry or heavily compressed/watermarked content",icon:"x"},{id:3,text:"Video uploads aren't supported yet",icon:"x"},{id:4,text:"Uploads to Jobs and ArtMarket are currently closed (in testing)",icon:"x"}],Ps={good:{title:"\u2713 Good",description:"High quality, well-composed",className:"bg-green-500",content:{title:"STUP AI",icon:"w-16 h-16 bg-red-500 rounded-full mx-auto mb-2",bar:"w-32 h-4 bg-black rounded"}},bad:{title:"\xd7 Bad",description:"Low resolution, poor lighting",className:"bg-red-500",content:{title:"STUP AI",icon:"w-16 h-16 bg-red-400 rounded-full mx-auto mb-2 blur-sm",bar:"w-32 h-4 bg-gray-800 rounded blur-sm",containerClass:"opacity-60",titleClass:"blur-sm"}}},Is="Pro Tip",As="Projects with visual examples receive 3x more collaboration requests than those without.",Ts="community guidelines",Ls="#",Ds=()=>{const e=(e,t)=>e.map(e=>{return(0,ht.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,ht.jsx)("div",{className:`flex-shrink-0 w-6 h-6 ${t} rounded-full flex items-center justify-center`,children:(r=e.icon,"check"===r?(0,ht.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ht.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):(0,ht.jsx)("svg",{className:"w-4 h-4 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ht.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}))}),(0,ht.jsx)("p",{className:"text-gray-700 font-semibold",children:e.text})]},e.id);var r});return(0,ht.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,ht.jsxs)("div",{className:"space-y-4",children:[(0,ht.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"\u2705 Do's"}),(0,ht.jsx)("div",{className:"space-y-3",children:e(_s,"bg-green-100")})]}),(0,ht.jsxs)("div",{className:"space-y-4",children:[(0,ht.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"\u274c Don'ts"}),(0,ht.jsx)("div",{className:"space-y-3",children:e(Es,"bg-red-100")})]})]})},Ms=()=>{const e=e=>{const t=Ps[e],{content:r}=t;return(0,ht.jsxs)("div",{className:"text-center",children:[(0,ht.jsxs)("div",{className:"relative mb-4",children:[(0,ht.jsx)("div",{className:`w-full h-48 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center ${r.containerClass||""}`,children:(0,ht.jsxs)("div",{className:"text-white text-center",children:[(0,ht.jsx)("div",{className:`text-2xl font-bold mb-2 ${r.titleClass||""}`,children:r.title}),(0,ht.jsx)("div",{className:r.icon}),(0,ht.jsx)("div",{className:r.bar})]})}),(0,ht.jsx)("div",{className:`absolute -top-2 -right-2 ${t.className} text-white px-2 py-1 rounded-full text-xs font-medium`,children:t.title})]}),(0,ht.jsx)("p",{className:`text-sm ${"good"===e?"text-green-600":"text-red-600"} font-medium`,children:t.description})]})};return(0,ht.jsxs)("div",{className:"border-t border-gray-200 pt-8",children:[(0,ht.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Visual Examples"}),(0,ht.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[e("good"),e("bad")]})]})},Rs=()=>(0,ht.jsx)("div",{className:"border-t border-gray-200 pt-6",children:(0,ht.jsxs)("p",{className:"text-gray-600 text-center",children:["All uploads are subject to review by our"," ",(0,ht.jsx)("a",{href:Ls,className:"text-tag-blue hover:text-tag-dark-blue font-medium",children:Ts}),". Content that violates our community guidelines may be removed."]})}),$s=()=>(0,ht.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,ht.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,ht.jsx)("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:(0,ht.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ht.jsx)("path",{d:"M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM5.05 6.464A1 1 0 106.464 5.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM5 10a1 1 0 01-1 1H3a1 1 0 110-2h1a1 1 0 011 1zM8 16v-1h4v1a2 2 0 11-4 0zM12 14c.015-.34.208-.646.477-.859a4 4 0 10-4.954 0c.27.213.462.519.476.859h4.002z"})})}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("p",{className:"font-semibold text-blue-900",children:Is}),(0,ht.jsx)("p",{className:"text-blue-800 text-sm",children:As})]})]})}),Fs=e=>{let{guidelinesConfirmed:t,onCheckboxChange:r,onConfirm:a,user:o}=e;return(0,ht.jsxs)("div",{className:"border-t border-gray-200 pt-8 mt-8",children:[(0,ht.jsx)("div",{className:"flex items-center justify-center space-x-4",children:(0,ht.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[(0,ht.jsx)("input",{type:"checkbox",checked:t,onChange:r,className:"h-5 w-5 text-tag-blue focus:ring-tag-blue border-gray-300 rounded"}),(0,ht.jsx)("span",{className:"text-gray-700 font-medium",children:"I understand and agree to follow these guidelines"})]})}),(0,ht.jsx)("div",{className:"mt-6 flex justify-center",children:(0,ht.jsx)("button",{onClick:a,disabled:!t,className:"px-8 py-3 bg-gradient-to-r from-tag-blue to-tag-purple text-white font-medium rounded-lg shadow-lg hover:from-tag-dark-blue hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-tag-blue disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105",children:o?"Proceed to Upload":"Continue to Login"})})]})},Os=()=>{const[t,r]=(0,e.useState)(!1);return{guidelinesConfirmed:t,handleCheckboxChange:e=>{r(e.target.checked)},resetState:()=>{r(!1)}}},Us=t=>{let{guidelinesConfirmed:r,user:a}=t;const o=ee();return{handleConfirm:(0,e.useCallback)(()=>{r&&(localStorage.setItem("tag_guidelines_accepted","true"),o(a?"/upload/form":"/login"))},[r,a,o]),handleBackToHome:(0,e.useCallback)(()=>{o("/")},[o])}},zs=()=>{const{user:e}=pt(),{guidelinesConfirmed:t,handleCheckboxChange:r}=Os(),{handleConfirm:a,handleBackToHome:o}=Us({guidelinesConfirmed:t,user:e});return(0,ht.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[(0,ht.jsx)(Cs,{onBackClick:o}),(0,ht.jsx)("div",{className:"flex-1 flex items-center justify-center px-4 sm:px-6 lg:px-8 py-8",children:(0,ht.jsx)("div",{className:"max-w-4xl w-full space-y-8",children:(0,ht.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,ht.jsx)(Ss,{}),(0,ht.jsxs)("div",{className:"space-y-8",children:[(0,ht.jsx)(Ds,{}),(0,ht.jsx)(Ms,{}),(0,ht.jsx)(Rs,{}),(0,ht.jsx)($s,{})]}),(0,ht.jsx)(Fs,{guidelinesConfirmed:t,onCheckboxChange:r,onConfirm:a,user:e})]})})})]})},Ws=e=>{let{children:t}=e;return"true"!==localStorage.getItem("tag_guidelines_accepted")?(0,ht.jsx)(fe,{to:"/upload/guidelines",replace:!0}):t},Bs=e=>{let{module:t="Milestones",title:r="Your milestone has been shared successfully!",subtitle:a="The community can now see your achievement and celebrate with you.",icon:o="\ud83c\udfc1",bannerSubtitle:s="Celebrate achievements and track creative journeys"}=e;const n=ee(),i=(e=>{const t={Milestones:{icon:"\ud83c\udfc1",bannerTitle:"Milestones Feed",bannerSubtitle:"Celebrate achievements and track creative journeys",successTitle:"Your milestone has been shared successfully!",successSubtitle:"The community can now see your achievement and celebrate with you."},"Art Market":{icon:"\ud83c\udfea",bannerTitle:"Art Market Feed",bannerSubtitle:"Showcase your artwork to the world",successTitle:"Your artwork has been published successfully!",successSubtitle:"Art lovers can now discover and appreciate your creation."},Portfolio:{icon:"\ud83d\udcc1",bannerTitle:"Portfolio Feed",bannerSubtitle:"Build your professional portfolio",successTitle:"Your portfolio has been updated successfully!",successSubtitle:"Your professional showcase is now live for the community."},Collaboration:{icon:"\ud83e\udd1d",bannerTitle:"Collaboration Feed",bannerSubtitle:"Connect and collaborate with fellow artists",successTitle:"Your collaboration has been shared successfully!",successSubtitle:"Other artists can now discover and join your project."},Jobs:{icon:"\ud83d\udcbc",bannerTitle:"Jobs Feed",bannerSubtitle:"Find opportunities and grow your career",successTitle:"Your job post has been published successfully!",successSubtitle:"Talented artists can now discover and apply for your opportunity."}};return t[e]||t.Milestones})(t),l="Portfolio"===t||"Art Market"===t,c=l?"bg-gradient-to-r from-[#3B82F6] to-[#1D4ED8]":"bg-gradient-to-r from-[#9333EA] to-[#7e22ce]",d=l?"bg-tag-blue":"bg-tag-purple",u=l?"hover:bg-blue-700":"hover:bg-purple-700",h=l?"border-tag-blue":"border-tag-purple",m=l?"text-tag-blue":"text-tag-purple",p=l?"hover:bg-blue-50":"hover:bg-purple-50";return(0,ht.jsxs)("div",{className:"fixed inset-0 bg-gray-50 z-50 overflow-y-auto",children:[(0,ht.jsxs)("div",{className:`${c} h-48 flex flex-col items-center justify-center text-white`,children:[(0,ht.jsx)("div",{className:"text-4xl mb-4",children:i.icon}),(0,ht.jsx)("h1",{className:"text-2xl font-bold mb-2",children:i.bannerTitle}),(0,ht.jsx)("p",{className:"text-white/90 text-center max-w-md",children:i.bannerSubtitle})]}),(0,ht.jsx)("div",{className:"max-w-md mx-auto -mt-8 relative z-10",children:(0,ht.jsx)("div",{className:"bg-[#ECFDF5] rounded-lg shadow-lg p-6 border border-green-200",children:(0,ht.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,ht.jsx)("div",{className:"flex-shrink-0",children:(0,ht.jsx)("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center",children:(0,ht.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),(0,ht.jsxs)("div",{className:"flex-1",children:[(0,ht.jsx)("h2",{className:"text-lg font-bold text-green-800 mb-2",children:i.successTitle}),(0,ht.jsx)("p",{className:"text-green-700 text-sm leading-relaxed",children:i.successSubtitle})]})]})})}),(0,ht.jsxs)("div",{className:"max-w-md mx-auto mt-8 px-4 pb-8",children:[(0,ht.jsxs)("div",{className:"space-y-4",children:[(0,ht.jsxs)("button",{onClick:()=>{if(console.log("\ud83d\udd0d handleViewFeed called with module:",t),"Milestones"===t){console.log("\ud83c\udfaf Navigating to TAGMe with Milestones tab");const e={activeTab:"Milestones",from:"upload-success"};console.log("\ud83c\udfaf Navigation state being passed:",e),n("/tagme",{state:e})}else if("Collaboration"===t){console.log("\ud83c\udfaf Navigating to TAGMe with Collaborations tab");const e={activeTab:"Collaborations",from:"upload-success"};console.log("\ud83c\udfaf Navigation state being passed:",e),n("/tagme",{state:e})}else if("Jobs"===t){console.log("\ud83c\udfaf Navigating to TAGMe with Jobs tab");const e={activeTab:"Jobs",from:"upload-success"};console.log("\ud83c\udfaf Navigation state being passed:",e),n("/tagme",{state:e})}else if("Portfolio"===t){console.log("\ud83c\udfaf Navigating to Gallery with Works tab");const e={activeTab:"Works",from:"upload-success",scrollToGallery:!0};console.log("\ud83c\udfaf Navigation state being passed:",e),n("/",{state:e})}else if("Art Market"===t){console.log("\ud83c\udfaf Navigating to Gallery with Market tab");const e={activeTab:"Market",from:"upload-success",scrollToGallery:!0};console.log("\ud83c\udfaf Navigation state being passed:",e),n("/",{state:e})}else console.log("\ud83c\udfaf Navigating to home page"),n("/")},className:`w-full ${d} text-white font-semibold py-3 rounded-lg ${u} transition-colors duration-200 flex items-center justify-center`,children:[(0,ht.jsxs)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View ",t," Feed"]}),(0,ht.jsxs)("button",{onClick:()=>{console.log("\ud83d\udd0d handleUploadMore called with module:",t),console.log("\ud83d\udd0d Current module value:",t);try{"Milestones"===t?(console.log("\ud83c\udfaf Navigating back to upload page with Milestones tab"),window.location.href="/upload?tab=milestones"):"Collaboration"===t?(console.log("\ud83c\udfaf Navigating back to upload page with Collaboration tab"),window.location.href="/upload?tab=collaboration"):"Jobs"===t?(console.log("\ud83c\udfaf Navigating back to upload page with Jobs tab"),window.location.href="/upload?tab=jobs"):"Art Market"===t?(console.log("\ud83c\udfaf Navigating back to upload page with Art Market tab"),window.location.href="/upload?tab=art-market"):"Portfolio"===t?(console.log("\ud83c\udfaf Navigating back to upload page with Portfolio tab"),window.location.href="/upload?tab=portfolio"):(console.log("\ud83c\udfaf Navigating back to upload page with default tab"),console.log("\u26a0\ufe0f Unknown module type:",t),window.location.href="/upload")}catch(e){console.error("\u274c Error in handleUploadMore:",e),window.location.href="/upload"}},className:`w-full bg-white ${m} font-semibold py-3 rounded-lg border-2 ${h} ${p} transition-colors duration-200 flex items-center justify-center`,children:[(0,ht.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Upload More Content"]})]}),(0,ht.jsx)("div",{className:"text-center mt-6",children:(0,ht.jsx)(at,{to:"/",className:"text-gray-500 hover:text-gray-700 text-sm transition-colors duration-200",children:"\u2190 Back to Home"})})]})]})},qs=[{value:"2-3",label:"Less than 3 people"},{value:"4-5",label:"4-5 people"},{value:"6-8",label:"6-8 people"},{value:"9+",label:"9+ people"}],Hs=[{value:"1-2 weeks",label:"1-2 weeks"},{value:"3-4 weeks",label:"3-4 weeks"},{value:"1-2 months",label:"1-2 months"},{value:"3-4 months",label:"3-4 months"},{value:"5-6 months",label:"5-6 months"},{value:"6+ months",label:"6+ months"}],Vs=[{value:"1-2 times/week",label:"1-2 times/week"},{value:"2-3 times/week",label:"2-3 times/week"},{value:"3-4 times/week",label:"3-4 times/week"},{value:"Daily",label:"Daily"},{value:"As needed",label:"As needed"}],Gs=e=>{let{formData:t,onFormChange:r}=e;return(0,ht.jsxs)("div",{className:"space-y-6",children:[(0,ht.jsxs)("div",{className:"space-y-4",children:[(0,ht.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Basic Information"}),(0,ht.jsxs)("div",{children:[(0,ht.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Project Title ",(0,ht.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ht.jsx)("input",{type:"text",name:"title",value:t.title,onChange:r,placeholder:"What's your project about?",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Team Size"}),(0,ht.jsx)(jr,{options:qs,value:t.teamSize,onChange:r,name:"teamSize",placeholder:"Select size"})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration"}),(0,ht.jsx)(jr,{options:Hs,value:t.duration,onChange:r,name:"duration",placeholder:"Select duration"})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meeting Schedule"}),(0,ht.jsx)(jr,{options:Vs,value:t.meetingSchedule,onChange:r,name:"meetingSchedule",placeholder:"Select schedule"})]}),(0,ht.jsxs)("div",{className:"space-y-3",children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Information"}),(0,ht.jsxs)("div",{children:[(0,ht.jsxs)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:["Email ",(0,ht.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ht.jsx)("input",{type:"email",name:"contactEmail",value:t.contactEmail||"",onChange:r,placeholder:"your.email@example.com",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Discord"}),(0,ht.jsx)("input",{type:"text",name:"contactDiscord",value:t.contactDiscord||"",onChange:r,placeholder:"username#1234",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Other"}),(0,ht.jsx)("input",{type:"text",name:"contactOther",value:t.contactOther||"",onChange:r,placeholder:"Slack, Telegram, etc.",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Application Deadline"}),(0,ht.jsx)("input",{type:"date",name:"applicationDeadline",value:t.applicationDeadline,onChange:r,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Looking For"}),(0,ht.jsxs)("div",{className:"flex",children:[(0,ht.jsx)("input",{type:"text",name:"projectType",value:t.projectType,onChange:r,placeholder:"Tags",className:"flex-1 bg-gray-50 border border-gray-300 rounded-l px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"}),(0,ht.jsx)("button",{type:"button",className:"bg-tag-purple text-white px-3 py-2 rounded-r hover:bg-purple-700 transition-colors duration-200",children:"+"})]})]})]}),(0,ht.jsxs)("div",{className:"space-y-4",children:[(0,ht.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Project Details"}),(0,ht.jsxs)("div",{children:[(0,ht.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Project Description ",(0,ht.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ht.jsx)("textarea",{name:"description",value:t.description,onChange:r,placeholder:"Describe your project and what kind of help you need...",rows:4,maxLength:1e3,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"}),(0,ht.jsxs)("div",{className:"text-xs text-gray-500 mt-1 text-right",children:[t.description.length,"/1000 characters"]})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Project Vision ",(0,ht.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ht.jsx)("textarea",{name:"projectVision",value:t.projectVision,onChange:r,placeholder:"In one or two sentences, explain why you started this project and what excites you about it.",rows:3,maxLength:200,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"}),(0,ht.jsxs)("div",{className:"text-xs text-gray-500 mt-1 text-right",children:[t.projectVision.length,"/200 characters"]})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Why This Matters ",(0,ht.jsx)("span",{className:"text-gray-500",children:"(Optional)"})]}),(0,ht.jsx)("textarea",{name:"whyThisMatters",value:t.whyThisMatters,onChange:r,placeholder:"Describe the bigger impact of your project \u2014 why it's important, and what difference it could make.",rows:5,maxLength:1e3,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"}),(0,ht.jsxs)("div",{className:"text-xs text-gray-500 mt-1 text-right",children:[t.whyThisMatters.length,"/1000 characters"]})]})]})]})},Js=()=>(0,ht.jsxs)("div",{className:"text-center mb-6",children:[(0,ht.jsx)("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,ht.jsx)("svg",{className:"w-8 h-8 text-tag-purple",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,ht.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Create Collaboration Post"}),(0,ht.jsx)("p",{className:"text-gray-600",children:"Post a collaboration request to find teammates and partners for your projects"})]}),Ks=t=>{let{roles:r,onAddRole:a,onRemoveRole:o,onRoleChange:s}=t;const[n,i]=(0,e.useState)({}),l=(e,t)=>{if(!t)return null;const a=t.split(",").map(e=>e.trim()).filter(e=>e);return(0,ht.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:a.map((t,a)=>(0,ht.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-800 text-xs font-medium rounded-full",children:[t,(0,ht.jsx)("button",{type:"button",onClick:()=>((e,t)=>{var a;const o=((null===(a=r.find(t=>t.id===e))||void 0===a?void 0:a.requiredSkills)||"").split(",").map(e=>e.trim()).filter(e=>e!==t);s(e,"requiredSkills",o.join(", "))})(e,t),className:"text-purple-600 hover:text-purple-800",children:(0,ht.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},a))})};return(0,ht.jsxs)("div",{children:[(0,ht.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,ht.jsxs)("h3",{className:"text-lg font-semibold text-gray-800",children:["Team Roles Needed ",(0,ht.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ht.jsx)("button",{type:"button",onClick:a,className:"bg-tag-purple text-white px-3 py-1 rounded text-sm hover:bg-purple-700 transition-colors duration-200",children:"+ Add Role"})]}),(0,ht.jsx)("div",{className:"space-y-4",children:r.map((e,t)=>(0,ht.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,ht.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,ht.jsxs)("h4",{className:"text-sm font-medium text-gray-700",children:["Role #",t+1]}),r.length>1&&(0,ht.jsx)("button",{type:"button",onClick:()=>o(e.id),className:"text-red-500 hover:text-red-700",children:(0,ht.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),(0,ht.jsxs)("div",{className:"space-y-3",children:[(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Role Name"}),(0,ht.jsx)("input",{type:"text",value:e.customRole,onChange:t=>s(e.id,"customRole",t.target.value),placeholder:"e.g., UI/UX Designer, Frontend Developer, Motion Designer",className:"w-full bg-white border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple text-sm"})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Role Description"}),(0,ht.jsx)("textarea",{value:e.roleDescription,onChange:t=>s(e.id,"roleDescription",t.target.value),placeholder:"Describe responsibilities and expectations for this role...",rows:3,className:"w-full bg-white border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple text-sm"})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Required Skills"}),(0,ht.jsx)("input",{type:"text",value:n[e.id]||"",onChange:t=>{return r=e.id,a=t.target.value,void i(e=>({...e,[r]:a}));var r,a},onKeyDown:t=>((e,t)=>{if("Enter"===t.key){var a;t.preventDefault();const o=n[e]||"",l=(null===(a=r.find(t=>t.id===e))||void 0===a?void 0:a.requiredSkills)||"";if(o.trim()){const t=o.trim(),r=l?l.split(",").map(e=>e.trim()):[];if(!r.includes(t)){const a=[...r,t].join(", ");s(e,"requiredSkills",a)}i(t=>({...t,[e]:""}))}}})(e.id,t),placeholder:"Type a skill and press Enter to add (e.g., Adobe Creative Suite, React Native)",className:"w-full bg-white border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple text-sm"}),(0,ht.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Press Enter to add each skill."}),l(e.id,e.requiredSkills)]})]})]},e.id))})]})},Ys=e=>{let{onFileUpload:t,posterPreview:r}=e;return(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Recruitment Poster"}),r?(0,ht.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg bg-white p-4",children:[(0,ht.jsxs)("div",{className:"relative",children:[(0,ht.jsx)("img",{src:r,alt:"Recruitment Poster Preview",className:"w-full h-48 object-cover rounded-lg"}),(0,ht.jsx)("button",{type:"button",onClick:()=>{const e=document.getElementById("recruitment-poster-upload");e&&(e.value=""),t({target:{files:[]}})},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600 transition-colors",children:"\xd7"})]}),(0,ht.jsx)("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Click the \xd7 button to remove and upload a new image"})]}):(0,ht.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg bg-white py-6 px-4 text-center",children:[(0,ht.jsx)("svg",{className:"w-8 h-8 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,ht.jsx)("p",{className:"text-gray-600 mb-2",children:"Upload recruitment poster"}),(0,ht.jsx)("p",{className:"text-xs text-gray-400 mb-4",children:"JPG, PNG (Max 5MB) - Only one image allowed"}),(0,ht.jsx)("input",{type:"file",accept:".jpg,.jpeg,.png",onChange:t,multiple:!1,className:"hidden",id:"recruitment-poster-upload"}),(0,ht.jsx)("label",{htmlFor:"recruitment-poster-upload",className:"bg-tag-purple text-white px-4 py-2 rounded cursor-pointer hover:bg-purple-700 transition-colors duration-200",children:"Choose Image"})]})]})},Zs=t=>{let{state:r,setters:a}=t;const{setFormData:o,setIsSubmitting:s,setIsSaving:n}=a,i=(0,e.useCallback)(e=>{e&&e.startsWith("blob:")&&(URL.revokeObjectURL(e),console.log("[CollaborationActions] Revoked blob URL:",e))},[]);return{handleFormChange:(0,e.useCallback)(e=>{const{name:t,value:r}=e.target;o(e=>({...e,[t]:r}))},[o]),handleFileUpload:(0,e.useCallback)(e=>{const t=e.target.files;if(console.log("Collaboration files selected:",t),t&&t.length>0){const e=t[0];if(!["image/jpeg","image/jpg","image/png"].includes(e.type))return void alert("Please select a valid image file (JPG, PNG)");const a=5242880;if(e.size>a)return void alert("File size must be less than 5MB");r.formData.posterPreview&&i(r.formData.posterPreview);const s=URL.createObjectURL(e);o(t=>({...t,poster:e,posterPreview:s})),console.log("File uploaded successfully:",e.name)}else r.formData.posterPreview&&i(r.formData.posterPreview),o(e=>({...e,poster:null,posterPreview:""}))},[o,r.formData,i]),handleSubmit:(0,e.useCallback)(async e=>{e.preventDefault(),console.log("Collaboration form submitted:",r.formData);const t={title:"Project Title",description:"Project Description",projectVision:"Project Vision",contactEmail:"Contact Email",teamSize:"Team Size",meetingSchedule:"Meeting Schedule",applicationDeadline:"Application Deadline"},o=[];for(const[a,s]of Object.entries(t))r.formData[a]&&""!==r.formData[a].trim()||o.push(s);if(r.formData.roles&&0!==r.formData.roles.length){r.formData.roles.filter(e=>!e.customRole||!e.roleDescription||!e.requiredSkills).length>0&&o.push("Complete Team Role information")}else o.push("At least one Team Role");if(o.length>0)return a.setValidationErrors(o),void a.setShowValidationModal(!0);if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.formData.contactEmail))return a.setValidationErrors(["Please enter a valid email address"]),void a.setShowValidationModal(!0);try{s(!0);const e={...r.formData,posterPreview:null,author:{id:"current_user",name:"Current User",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face"},createdAt:(new Date).toISOString(),status:"active",likes:0,views:0};console.log("Submitting collaboration data:",e);const t=await Xo(e);if(!t.success)throw new Error(t.error||"Failed to create collaboration");console.log("Collaboration posted successfully!",t.data),r.formData.posterPreview&&i(r.formData.posterPreview),window.dispatchEvent(new CustomEvent("collaboration:created",{detail:{collaboration:t.data}})),a.setShowSuccess(!0)}catch(n){console.error("Error posting collaboration:",n),alert("Failed to post collaboration. Please try again.")}finally{s(!1)}},[r.formData,a,i]),handleSaveDraft:(0,e.useCallback)(async e=>{e.preventDefault(),console.log("Saving collaboration draft:",r.formData);try{var t;n(!0);const e=new URLSearchParams(window.location.search).get("draftId")||(null===(t=window.location.state)||void 0===t?void 0:t.draftId);if(!e){const e=await Hr.A.getDrafts({type:"collaboration"});if(e.success&&e.data.items.length>=3)return alert("You have reached the maximum limit of 3 drafts. Please delete an existing draft before saving a new one."),void n(!1)}const a={title:r.formData.title||"Untitled Draft",description:r.formData.description||"",projectVision:r.formData.projectVision||"",whyThisMatters:r.formData.whyThisMatters||"",teamSize:r.formData.teamSize||"",duration:r.formData.duration||"",meetingSchedule:r.formData.meetingSchedule||"",contactEmail:r.formData.contactEmail||"",contactDiscord:r.formData.contactDiscord||"",roles:r.formData.roles||[],tags:[],image:r.formData.posterPreview||null};let o;if(console.log("Saving draft data:",a),o=e?await Hr.A.updateDraft(e,a):await Hr.A.saveDraft("collaboration",a),!o.success)throw new Error(o.error||"Failed to save draft");console.log("Draft saved successfully!",o.data),window.dispatchEvent(new CustomEvent("draft:saved",{detail:{draft:o.data}})),alert("Draft saved successfully! You can continue editing later.")}catch(a){console.error("Error saving draft:",a),alert("Failed to save draft. Please try again.")}finally{n(!1)}},[r.formData,n]),handleAddRole:(0,e.useCallback)(()=>{const e={id:Date.now(),customRole:"",roleDescription:"",requiredSkills:""};o(t=>({...t,roles:[...t.roles,e]}))},[o]),handleRemoveRole:(0,e.useCallback)(e=>{o(t=>({...t,roles:t.roles.filter(t=>t.id!==e)}))},[o]),handleRoleChange:(0,e.useCallback)((e,t,r)=>{o(a=>({...a,roles:a.roles.map(a=>a.id===e?{...a,[t]:r}:a)}))},[o])}},Qs=()=>{const[t,r]=(0,e.useState)(!1),[a,o]=(0,e.useState)(!1),[s,n]=(0,e.useState)(!1),[i,l]=(0,e.useState)({title:"",projectType:"",description:"",projectVision:"",whyThisMatters:"",teamSize:"",duration:"",meetingSchedule:"",contactEmail:"",contactDiscord:"",contactOther:"",applicationDeadline:"",poster:null,posterPreview:"",roles:[{id:1,customRole:"",roleDescription:"",requiredSkills:""}]}),[c,d]=(0,e.useState)(!1),[u,h]=(0,e.useState)([]);return(0,e.useMemo)(()=>({state:{showSuccess:t,isSubmitting:a,isSaving:s,formData:i,showValidationModal:c,validationErrors:u},setters:{setShowSuccess:r,setIsSubmitting:o,setIsSaving:n,setFormData:l,setShowValidationModal:d,setValidationErrors:h}}),[t,a,s,i,c,u])},Xs=()=>{var t,r,a;const o=ee(),s=Z(),n=(0,e.useRef)(!1),{state:i,setters:l}=Qs(),c=Zs({state:i,setters:l});return(0,e.useEffect)(()=>{var e,t;if("draft-edit"===(null===(e=s.state)||void 0===e?void 0:e.from)&&null!==(t=s.state)&&void 0!==t&&t.draftData&&!n.current){console.log("Loading draft data:",s.state.draftData);const e=s.state.draftData;l.setFormData({title:e.title||"",description:e.description||"",projectVision:e.projectVision||"",whyThisMatters:e.whyThisMatters||"",teamSize:e.teamSize||"",duration:e.duration||"",meetingSchedule:e.meetingSchedule||"",contactEmail:e.contactEmail||"",contactDiscord:e.contactDiscord||"",roles:e.roles||[],poster:null,posterPreview:e.image||""}),n.current=!0,console.log("Draft data loaded successfully")}},[null===(t=s.state)||void 0===t?void 0:t.from,null===(r=s.state)||void 0===r?void 0:r.draftData]),(0,e.useEffect)(()=>()=>{i.formData.posterPreview&&i.formData.posterPreview.startsWith("blob:")&&(URL.revokeObjectURL(i.formData.posterPreview),console.log("[UploadCollaboration] Cleaned up blob URL on unmount"))},[i.formData.posterPreview]),i.showSuccess?(0,ht.jsx)(Bs,{module:"Collaboration"}):(0,ht.jsxs)(ht.Fragment,{children:[(0,ht.jsx)(Nr,{isOpen:i.showValidationModal,onClose:()=>l.setShowValidationModal(!1),errors:i.validationErrors,title:"Please Complete Required Fields"}),(0,ht.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:["draft-edit"===(null===(a=s.state)||void 0===a?void 0:a.from)&&(0,ht.jsx)("div",{className:"mb-6",children:(0,ht.jsxs)("button",{onClick:()=>o(-1),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition-colors duration-200 hover:bg-gray-50 px-3 py-2 rounded-md border border-gray-300",children:[(0,ht.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),(0,ht.jsx)("span",{className:"font-medium",children:"Back to Drafts"})]})}),(0,ht.jsx)(Js,{}),(0,ht.jsxs)("form",{onSubmit:c.handleSubmit,className:"space-y-6",children:[(0,ht.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,ht.jsxs)("div",{className:"space-y-4",children:[(0,ht.jsx)(Ys,{onFileUpload:c.handleFileUpload,posterPreview:i.formData.posterPreview}),(0,ht.jsx)(Gs,{formData:i.formData,onFormChange:c.handleFormChange})]}),(0,ht.jsx)(Ks,{roles:i.formData.roles,onAddRole:c.handleAddRole,onRemoveRole:c.handleRemoveRole,onRoleChange:c.handleRoleChange})]}),(0,ht.jsxs)("div",{className:"flex gap-4",children:[(0,ht.jsx)("button",{type:"button",onClick:c.handleSaveDraft,disabled:i.isSaving,className:"flex-1 font-semibold py-3 rounded-md transition-colors duration-200 flex items-center justify-center "+(i.isSaving?"bg-gray-400 cursor-not-allowed":"bg-purple-200 text-purple-700 hover:bg-purple-300"),children:i.isSaving?(0,ht.jsxs)(ht.Fragment,{children:[(0,ht.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-purple-700",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,ht.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,ht.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):(0,ht.jsxs)(ht.Fragment,{children:[(0,ht.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"Save Draft"]})}),(0,ht.jsx)("button",{type:"submit",disabled:i.isSubmitting,className:"flex-1 font-semibold py-3 rounded-md transition-colors duration-200 flex items-center justify-center "+(i.isSubmitting?"bg-gray-400 cursor-not-allowed":"bg-tag-purple text-white hover:bg-purple-700"),children:i.isSubmitting?(0,ht.jsxs)(ht.Fragment,{children:[(0,ht.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,ht.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,ht.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Posting..."]}):(0,ht.jsxs)(ht.Fragment,{children:[(0,ht.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Post Collaboration TAGMe!"]})})]})]})]})]})},en=()=>{const t=ee(),[r,a]=(0,e.useState)({title:"",company:"",location:"",jobType:"",salary:"",description:"",requirements:"",contactEmail:""}),o=e=>{const{name:t,value:r}=e.target;a(e=>({...e,[t]:r}))};return(0,ht.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,ht.jsxs)("div",{className:"text-center mb-6",children:[(0,ht.jsx)("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,ht.jsx)("svg",{className:"w-8 h-8 text-tag-purple",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7a2 2 0 012-2h12a2 2 0 012 2v2H4V7zM4 9h16v10a2 2 0 01-2 2H6a2 2 0 01-2-2V9z"})})}),(0,ht.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Post Job Opportunity"}),(0,ht.jsx)("p",{className:"text-gray-600",children:"Share creative job opportunities with the TAG community"})]}),(0,ht.jsxs)("form",{onSubmit:e=>{e.preventDefault(),console.log("Jobs form submitted:",r),alert("Job posting created successfully on TAGMe!"),t("/")},className:"space-y-6",children:[(0,ht.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Job Title"}),(0,ht.jsx)("input",{type:"text",name:"title",value:r.title,onChange:o,placeholder:"e.g., Senior UI/UX Designer",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company"}),(0,ht.jsx)("input",{type:"text",name:"company",value:r.company,onChange:o,placeholder:"Company name",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]})]}),(0,ht.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),(0,ht.jsx)("input",{type:"text",name:"location",value:r.location,onChange:o,placeholder:"City, Country or Remote",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Job Type"}),(0,ht.jsxs)("div",{className:"relative",children:[(0,ht.jsxs)("select",{name:"jobType",value:r.jobType,onChange:o,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 pr-10 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple appearance-none",children:[(0,ht.jsx)("option",{value:"",children:"Select type"}),(0,ht.jsx)("option",{value:"full-time",children:"Full-time"}),(0,ht.jsx)("option",{value:"part-time",children:"Part-time"}),(0,ht.jsx)("option",{value:"contract",children:"Contract"}),(0,ht.jsx)("option",{value:"freelance",children:"Freelance"}),(0,ht.jsx)("option",{value:"internship",children:"Internship"})]}),(0,ht.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,ht.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Salary Range"}),(0,ht.jsx)("input",{type:"text",name:"salary",value:r.salary,onChange:o,placeholder:"e.g., $50k-$80k",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Job Description"}),(0,ht.jsx)("textarea",{name:"description",value:r.description,onChange:o,placeholder:"Describe the role, responsibilities, and what you're looking for...",rows:6,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Requirements"}),(0,ht.jsx)("textarea",{name:"requirements",value:r.requirements,onChange:o,placeholder:"List required skills, experience, and qualifications...",rows:4,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Email"}),(0,ht.jsx)("input",{type:"email",name:"contactEmail",value:r.contactEmail,onChange:o,placeholder:"hr@company.com",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,ht.jsxs)("button",{type:"submit",className:"w-full bg-tag-purple text-white font-semibold py-3 rounded-md hover:bg-purple-700 transition-colors duration-200 flex items-center justify-center",children:[(0,ht.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6.5M8 6V4a2 2 0 00-2-2H4a2 2 0 00-2 2v2m8 0V6a2 2 0 012 2v6.5"})}),"Post Job TAGMe!"]})]})]})},tn=()=>(0,ht.jsxs)("div",{className:"text-center mb-8",children:[(0,ht.jsx)("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,ht.jsx)("svg",{className:"w-8 h-8 text-tag-purple",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 3v18m0-16h12l-2 4 2 4H6"})})}),(0,ht.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Share Your Milestone Stages"}),(0,ht.jsx)("p",{className:"text-gray-600",children:"You can only share your work in progress in milestone stages after publishing a collaboration post and linking it to your existing collaboration project."})]}),rn=e=>{let{stage:t,index:r,isLast:a,onStageNameChange:o,onProgressChange:s,onFileUpload:n,onFieldChange:i,onRemoveStage:l,onAddNewStage:c,onKeyDown:d}=e;return(0,ht.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,ht.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ht.jsxs)("h3",{className:"text-lg font-semibold text-gray-800",children:["Milestone Stage ",r+1]}),(0,ht.jsx)("button",{type:"button",onClick:()=>l(t.id),className:"text-red-500 hover:text-red-700 text-sm transition-colors",children:"Delete Stage"})]}),(0,ht.jsxs)("div",{className:"mb-6",children:[(0,ht.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Stage Name ",(0,ht.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ht.jsx)("input",{type:"text",value:t.stageName,onChange:e=>o(t.id,e.target.value),onKeyDown:d,placeholder:"e.g., Initial Design, Production, Final Review",className:"w-full bg-white border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,ht.jsxs)("div",{className:"mb-6",children:[(0,ht.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,ht.jsxs)("span",{className:"text-sm text-gray-600",children:["Stage Progress ",(0,ht.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ht.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ht.jsx)("input",{type:"number",min:"0",max:"100",value:t.progress,onChange:e=>s(t.id,e.target.value),onKeyDown:d,className:"w-16 bg-white border border-gray-300 rounded px-2 py-1 text-sm text-center focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"}),(0,ht.jsx)("span",{className:"text-sm text-gray-600",children:"%"})]})]}),(0,ht.jsx)(Bt,{progress:t.progress})]}),(0,ht.jsxs)("div",{className:"mb-6",children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Milestone Poster"}),(0,ht.jsxs)(qt,{onFileUpload:e=>n(t.id,e),id:`milestone-poster-upload-${t.id}`,children:[(0,ht.jsx)("p",{className:"text-gray-600 mb-2",children:"Upload a representative image for this stage"}),(0,ht.jsx)("p",{className:"text-xs text-gray-400 mb-4",children:"Only JPG or PNG, max 2MB - Single image only"})]}),t.posterFiles.length>0&&(0,ht.jsx)("div",{className:"mt-3",children:(0,ht.jsxs)("p",{className:"text-sm text-gray-600",children:[t.posterFiles.length," image selected"]})})]}),(0,ht.jsxs)("div",{className:"mb-6",children:[(0,ht.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Stage Due Date ",(0,ht.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ht.jsx)("input",{type:"date",value:t.dateAchieved,onChange:e=>i(t.id,"dateAchieved",e.target.value),onKeyDown:d,className:"w-full bg-white border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,ht.jsxs)("div",{className:"mb-6",children:[(0,ht.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Related Skills ",(0,ht.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ht.jsx)("input",{type:"text",value:t.relatedSkills,onChange:e=>i(t.id,"relatedSkills",e.target.value),onKeyDown:d,placeholder:"Skills you developed or used in this stage",className:"w-full bg-white border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple"})]}),(0,ht.jsxs)("div",{className:"mb-6",children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Introduction"}),(0,ht.jsx)("textarea",{name:`introduction-${t.id}`,value:t.introduction||"",onChange:e=>i(t.id,"introduction",e.target.value),onKeyDown:d,placeholder:"Brief introduction about this stage (max 200 characters)",rows:3,maxLength:200,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-purple focus:border-tag-purple resize-none"}),(0,ht.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,ht.jsx)("span",{className:"text-xs text-gray-500",children:"Brief introduction about this stage"}),(0,ht.jsxs)("span",{className:"text-xs text-gray-500",children:[(t.introduction||"").length,"/200"]})]})]}),a&&(0,ht.jsx)("div",{className:"text-center",children:(0,ht.jsxs)("button",{type:"button",onClick:c,className:"bg-tag-purple text-white px-6 py-3 rounded-md hover:bg-purple-700 transition-colors duration-200 flex items-center justify-center mx-auto",children:[(0,ht.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Next Stage"]})})]})},an=e=>{let{relatedProject:t}=e;return(0,ht.jsxs)("div",{className:"mb-8",children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Related Collaboration Project"}),(0,ht.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,ht.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,ht.jsxs)("div",{children:[(0,ht.jsx)("h4",{className:"font-medium text-gray-800",children:t.name}),(0,ht.jsx)("p",{className:"text-sm text-gray-600",children:t.description})]}),(0,ht.jsx)("button",{type:"button",className:"text-tag-purple text-sm hover:text-purple-700 transition-colors",children:"View Project"})]}),(0,ht.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-3",children:[(0,ht.jsxs)("span",{children:["Team: ",t.teamSize," members"]}),(0,ht.jsxs)("span",{children:["Deadline: ",t.deadline]})]}),(0,ht.jsx)("button",{type:"button",className:"text-tag-purple text-sm hover:text-purple-700 transition-colors",children:"Link Different Project"})]})]})},on=t=>{let{state:r,setters:a}=t;const{setMilestoneStages:o}=a;return{handleStageNameChange:(0,e.useCallback)((e,t)=>{o(r=>r.map(r=>r.id===e?{...r,stageName:t}:r))},[o]),handleProgressChange:(0,e.useCallback)((e,t)=>{o(r=>r.map(r=>r.id===e?{...r,progress:parseInt(t)}:r))},[o]),handleFileUpload:(0,e.useCallback)((e,t)=>{const r=Array.from(t.target.files),a=r.length>0?[r[0]]:[];o(t=>t.map(t=>t.id===e?{...t,posterFiles:a}:t))},[o]),handleFieldChange:(0,e.useCallback)((e,t,r)=>{o(a=>a.map(a=>a.id===e?{...a,[t]:r}:a))},[o]),addNewStage:(0,e.useCallback)(()=>{const e={id:Date.now(),stageName:"",progress:20,posterFiles:[],dateAchieved:"",relatedSkills:"",whatsNext:""};o(t=>[...t,e])},[o]),removeStage:(0,e.useCallback)(e=>{r.milestoneStages.length>1&&o(t=>t.filter(t=>t.id!==e))},[r.milestoneStages.length,o]),handleKeyDown:(0,e.useCallback)(e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation())},[]),handleSubmit:(0,e.useCallback)(e=>{e.preventDefault(),console.log("Milestones stages submitted:",r.milestoneStages),a.setShowSuccess(!0)},[r.milestoneStages,a])}},sn=()=>{const[t,r]=(0,e.useState)(!1),[a,o]=(0,e.useState)([{id:1,stageName:"",progress:20,posterFiles:[],dateAchieved:"",relatedSkills:"",whatsNext:""}]);return(0,e.useMemo)(()=>({state:{showSuccess:t,milestoneStages:a},setters:{setShowSuccess:r,setMilestoneStages:o}}),[t,a])},nn=()=>{ee();const{state:e,setters:t}=sn(),r=on({state:e,setters:t}),a={name:"Mobile App Design Collaboration",description:"Fintech app needs UI/UX designer",teamSize:4,deadline:"Dec 15, 2024"};return e.showSuccess?(0,ht.jsx)(Bs,{module:"Milestones"}):(0,ht.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,ht.jsx)(tn,{}),(0,ht.jsx)(an,{relatedProject:a}),(0,ht.jsxs)("form",{onSubmit:r.handleSubmit,className:"space-y-8",children:[e.milestoneStages.map((t,a)=>(0,ht.jsx)(rn,{stage:t,index:a,isLast:a===e.milestoneStages.length-1,onStageNameChange:r.handleStageNameChange,onProgressChange:r.handleProgressChange,onFileUpload:r.handleFileUpload,onFieldChange:r.handleFieldChange,onRemoveStage:r.removeStage,onAddNewStage:r.addNewStage,onKeyDown:r.handleKeyDown},t.id)),(0,ht.jsxs)("button",{type:"submit",className:"w-full bg-tag-purple text-white font-semibold py-3 rounded-md hover:bg-purple-700 transition-colors duration-200 flex items-center justify-center",children:[(0,ht.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Share All Milestone Stages TAGMe!"]})]})]})},ln=()=>(0,ht.jsxs)("div",{className:"text-center mb-6",children:[(0,ht.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,ht.jsx)("svg",{className:"w-8 h-8 text-tag-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,ht.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Sell Your Art Assets"}),(0,ht.jsx)("p",{className:"text-gray-600",children:"Upload digital assets to the marketplace and earn from your creative work"})]}),cn=e=>{let{onFileUpload:t}=e;return(0,ht.jsxs)("div",{className:"space-y-6",children:[(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Files"}),(0,ht.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg bg-white py-6 px-4 text-center",children:[(0,ht.jsx)("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,ht.jsx)("p",{className:"text-gray-600 mb-2",children:"Drag files here or click to browse"}),(0,ht.jsx)("p",{className:"text-xs text-gray-400 mb-4",children:"JPG, PNG, AI, PSD, SVG, EPS (Max 25MB)"}),(0,ht.jsx)("input",{type:"file",multiple:!0,accept:".jpg,.jpeg,.png,.ai,.psd,.svg,.eps",onChange:t,className:"hidden",id:"art-market-file-upload"}),(0,ht.jsx)("label",{htmlFor:"art-market-file-upload",className:"bg-tag-blue text-white px-4 py-2 rounded cursor-pointer hover:bg-blue-700 transition-colors duration-200",children:"Choose Files"})]})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preview Images"}),(0,ht.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg bg-white py-6 px-4 text-center",children:[(0,ht.jsx)("svg",{className:"w-8 h-8 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,ht.jsx)("p",{className:"text-gray-600 mb-2",children:"Upload preview images to showcase your asset"}),(0,ht.jsx)("p",{className:"text-xs text-gray-400 mb-4",children:"JPG, PNG (Max 5MB each)"}),(0,ht.jsx)("input",{type:"file",multiple:!0,accept:".jpg,.jpeg,.png",onChange:t,className:"hidden",id:"preview-images-upload"}),(0,ht.jsx)("label",{htmlFor:"preview-images-upload",className:"bg-blue-100 text-blue-800 font-semibold py-2 px-4 rounded cursor-pointer hover:bg-blue-200 transition-colors duration-200",children:"Add Previews"})]})]})]})},dn=e=>{let{formData:t,onFormChange:r,errors:a=[]}=e;const o=[{value:"",label:"Select category"},{value:"graphics",label:"Graphics"},{value:"illustrations",label:"Illustrations"},{value:"templates",label:"Templates"},{value:"icons",label:"Icons"},{value:"fonts",label:"Fonts"},{value:"textures",label:"Textures"}],s=[{value:"Standard License",label:"Standard License"},{value:"Extended License",label:"Extended License"},{value:"Commercial License",label:"Commercial License"}];return(0,ht.jsxs)("div",{className:"space-y-4",children:[(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Asset Title"}),(0,ht.jsx)("input",{type:"text",name:"title",value:t.title,onChange:r,placeholder:"Name your digital asset...",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue"})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,ht.jsxs)("div",{className:"relative",children:[(0,ht.jsx)("select",{name:"category",value:t.category,onChange:r,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 pr-10 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue appearance-none",children:o.map(e=>(0,ht.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,ht.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,ht.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,ht.jsx)("textarea",{name:"description",value:t.description,onChange:r,placeholder:"Describe your asset, what's included, and how it can be used...",rows:4,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue"})]}),(0,ht.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price"}),(0,ht.jsx)("input",{type:"number",name:"price",value:t.price,onChange:r,placeholder:"0.00",step:"0.01",min:"0",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue"})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"License Type"}),(0,ht.jsxs)("div",{className:"relative",children:[(0,ht.jsx)("select",{name:"licenseType",value:t.licenseType,onChange:r,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 pr-10 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue appearance-none",children:s.map(e=>(0,ht.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,ht.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,ht.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"File Format"}),(0,ht.jsx)("input",{type:"text",name:"fileFormat",value:t.fileFormat,onChange:r,placeholder:"e.g., AI, PSD, SVG",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue"})]})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),(0,ht.jsx)("input",{type:"text",name:"tags",value:t.tags,onChange:r,placeholder:"Add relevant tags (e.g., minimal, vector, business)",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue"})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Software Used"}),(0,ht.jsx)("input",{type:"text",name:"softwareUsed",value:t.softwareUsed,onChange:r,placeholder:"e.g., Adobe Illustrator, Photoshop",className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue"})]}),a.length>0&&(0,ht.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,ht.jsxs)("div",{className:"flex items-start",children:[(0,ht.jsx)("svg",{className:"w-5 h-5 text-red-600 mt-0.5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("h4",{className:"text-sm font-semibold text-red-800 mb-1",children:"Please fix the following errors:"}),(0,ht.jsx)("ul",{className:"text-sm text-red-800 list-disc list-inside",children:a.map((e,t)=>(0,ht.jsx)("li",{children:e},t))})]})]})})]})},un=e=>{let{formData:t,onFormChange:r,onSubmit:a,isSubmitting:o=!1}=e;return(0,ht.jsxs)("div",{className:"space-y-4",children:[(0,ht.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,ht.jsxs)("div",{className:"flex items-start",children:[(0,ht.jsx)("svg",{className:"w-5 h-5 text-blue-600 mt-0.5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("h4",{className:"text-sm font-semibold text-blue-800 mb-1",children:"Marketplace Guidelines"}),(0,ht.jsx)("p",{className:"text-sm text-blue-800",children:"All assets must be original work. We take 30% commission on sales. Assets are reviewed before going live."})]})]})}),(0,ht.jsxs)("div",{className:"flex items-start",children:[(0,ht.jsx)("input",{type:"checkbox",name:"agreeToTerms",checked:t.agreeToTerms,onChange:r,className:"mt-1 h-4 w-4 text-tag-blue focus:ring-tag-blue border-gray-300 rounded"}),(0,ht.jsx)("label",{className:"ml-2 text-sm text-gray-700",children:"I agree to the marketplace terms and confirm this is my original work"})]}),(0,ht.jsx)("button",{type:"submit",disabled:!t.agreeToTerms||o,onClick:a,className:"w-full font-semibold py-3 rounded-md transition-colors duration-200 flex items-center justify-center "+(t.agreeToTerms&&!o?"bg-tag-blue text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:o?(0,ht.jsxs)(ht.Fragment,{children:[(0,ht.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,ht.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,ht.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Submitting..."]}):(0,ht.jsxs)(ht.Fragment,{children:[(0,ht.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"List on TAG!"]})})]})},hn=()=>{const[t,r]=(0,e.useState)({title:"",category:"",description:"",tags:"",price:"0.00",licenseType:"Standard License",fileFormat:"",softwareUsed:"",agreeToTerms:!1}),[a,o]=(0,e.useState)([]),[s,n]=(0,e.useState)(!1),i=(0,e.useCallback)(e=>{const{name:t,value:s,type:n,checked:i}=e.target,l="checkbox"===n?i:s;r(e=>({...e,[t]:l})),a.length>0&&o(e=>e.filter(e=>!e.includes(t)))},[a]),l=(0,e.useCallback)(e=>{const t=e.target.files;console.log("Art Market files selected:",t)},[]),c=(0,e.useCallback)(()=>{const e=(e=>{const t=[];return e.title.trim()||t.push("Title is required"),e.category||t.push("Category is required"),e.description.trim()||t.push("Description is required"),parseFloat(e.price)<0&&t.push("Price must be non-negative"),e.agreeToTerms||t.push("You must agree to the terms"),{isValid:0===t.length,errors:t}})(t);return o(e.errors),e.isValid},[t]),d=(0,e.useCallback)(()=>{r({title:"",category:"",description:"",tags:"",price:"0.00",licenseType:"Standard License",fileFormat:"",softwareUsed:"",agreeToTerms:!1}),o([]),n(!1)},[]),u=(0,e.useCallback)(e=>{n(e)},[]);return{formData:t,errors:a,isSubmitting:s,handleFormChange:i,handleFileUpload:l,validateForm:c,resetForm:d,setSubmitting:u}},mn=t=>{let{formData:r,validateForm:a,setSubmitting:o,onSuccess:s}=t;const n=ee(),i=(0,e.useCallback)(async e=>{if(e.preventDefault(),a()){o(!0);try{const e=(e=>({...e,price:parseFloat(e.price)||0,tags:e.tags.split(",").map(e=>e.trim()).filter(e=>e),submittedAt:(new Date).toISOString()}))(r);console.log("Art Market form submitted:",e),await new Promise(e=>setTimeout(e,1e3)),s&&s()}catch(t){console.error("Error submitting form:",t)}finally{o(!1)}}},[r,a,o,s]);return{handleSubmit:i,handleCancel:(0,e.useCallback)(()=>{n("/upload/form")},[n])}},pn=()=>{const[t,r]=(0,e.useState)(!1),{formData:a,errors:o,isSubmitting:s,handleFormChange:n,handleFileUpload:i,validateForm:l,setSubmitting:c}=hn(),d=mn({formData:a,validateForm:l,setSubmitting:c,onSuccess:()=>{r(!0)}});return t?(0,ht.jsx)(Bs,{module:"Art Market"}):(0,ht.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,ht.jsx)(ln,{}),(0,ht.jsxs)("form",{className:"space-y-6",children:[(0,ht.jsx)(cn,{onFileUpload:i}),(0,ht.jsx)(dn,{formData:a,onFormChange:n,errors:o}),(0,ht.jsx)(un,{formData:a,onFormChange:n,onSubmit:d.handleSubmit,isSubmitting:s})]})]})},gn=e=>e.type.startsWith("image/")?URL.createObjectURL(e):null,fn=e=>{let{selectedFiles:t,onFileUpload:r,onRemoveFile:a,isSubmitting:o,uploadProgress:s,errors:n}=e;return(0,ht.jsxs)(ht.Fragment,{children:[(0,ht.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg bg-white py-6 px-4 text-center mb-6",children:[(0,ht.jsx)("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,ht.jsx)("p",{className:"text-gray-600 mb-2",children:"Drag files here or click to browse"}),(0,ht.jsx)("p",{className:"text-xs text-gray-400 mb-4",children:"JPG, PNG, GIF, PDF (Max 10MB)"}),(0,ht.jsx)("input",{type:"file",multiple:!0,accept:".jpg,.jpeg,.png,.gif,.pdf",onChange:e=>{const t=Array.from(e.target.files),{validFiles:a,errors:o}=(e=>{const t=[],r=[];return e.forEach(e=>{const a=(e=>["image/jpeg","image/png","image/gif","application/pdf"].includes(e.type)?e.size>10485760?{isValid:!1,error:`File too large: ${e.name}. Maximum size is 10MB.`}:{isValid:!0,error:null}:{isValid:!1,error:`Invalid file type: ${e.name}. Please upload JPG, PNG, GIF, or PDF files.`})(e);a.isValid?t.push(e):r.push(a.error)}),{validFiles:t,errors:r}})(t);o.length>0?alert(o[0]):r({target:{files:a}})},className:"hidden",id:"portfolio-file-upload",disabled:o}),(0,ht.jsx)("label",{htmlFor:"portfolio-file-upload",className:"bg-tag-blue text-white px-4 py-2 rounded cursor-pointer hover:bg-blue-700 transition-colors duration-200 "+(o?"opacity-50 cursor-not-allowed":""),children:t.length>0?`Selected ${t.length} files`:"Choose Files"})]}),t.length>0&&(0,ht.jsxs)("div",{className:"mb-6",children:[(0,ht.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Selected Files:"}),(0,ht.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:t.map((e,t)=>(0,ht.jsxs)("div",{className:"relative group",children:[(0,ht.jsx)("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:e.type.startsWith("image/")?(0,ht.jsx)("img",{src:gn(e),alt:e.name,className:"w-full h-full object-cover"}):(0,ht.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,ht.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})})}),(0,ht.jsx)("p",{className:"text-xs text-gray-600 mt-1 truncate",children:e.name}),(0,ht.jsx)("button",{type:"button",onClick:()=>a(t),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600 transition-colors",children:"\xd7"})]},t))}),n.files&&(0,ht.jsx)("p",{className:"text-red-600 text-sm mt-2",children:n.files})]}),o&&(0,ht.jsxs)("div",{className:"mb-6",children:[(0,ht.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,ht.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Uploading..."}),(0,ht.jsxs)("span",{className:"text-sm text-gray-500",children:[Math.round(s),"%"]})]}),(0,ht.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,ht.jsx)("div",{className:"bg-tag-blue h-2 rounded-full transition-all duration-300",style:{width:`${s}%`}})})]})]})},vn=e=>{let{formData:t,tagInput:r,onFormChange:a,onTagInputChange:o,onTagInputKeyDown:s,onRemoveSoftware:n,onRemoveTag:i,onShowCustomSoftwareModal:l,isSubmitting:c,errors:d}=e;const u=["3D-Coat","3ds Max","After Effects","Blender","Cinema 4D","DaVinci Resolve","Figma","Gaea","Houdini","Illustrator","InDesign","JavaScript","Maya","Nuke","Photoshop","Python","Substance Designer","Substance Painter","Unity","Unreal Engine","ZBrush","Other"];return(0,ht.jsxs)("div",{className:"space-y-4",children:[(0,ht.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),(0,ht.jsx)("input",{type:"text",name:"title",value:t.title,onChange:a,placeholder:"Give your work a title...",disabled:c,className:`w-full bg-gray-50 border rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue ${d.title?"border-red-300":"border-gray-300"} ${c?"opacity-50 cursor-not-allowed":""}`}),d.title&&(0,ht.jsx)("p",{className:"text-red-600 text-sm mt-1",children:d.title})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Software Used"}),t.software.length>0&&(0,ht.jsx)("div",{className:"mb-3 flex flex-wrap gap-2",children:t.software.map((e,t)=>(0,ht.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[e,(0,ht.jsx)("button",{type:"button",onClick:()=>n(e),className:"ml-2 text-blue-600 hover:text-blue-800",children:"\xd7"})]},t))}),(0,ht.jsxs)("div",{className:"relative",children:[(0,ht.jsxs)("select",{name:"software",value:"",onChange:e=>{const t=a(e);"showCustomSoftwareModal"===(null===t||void 0===t?void 0:t.action)&&l()},disabled:c,className:`w-full bg-gray-50 border rounded px-3 py-2 pr-10 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue appearance-none ${d.software?"border-red-300":"border-gray-300"} ${c?"opacity-50 cursor-not-allowed":""}`,children:[(0,ht.jsx)("option",{value:"",children:"Add software"}),u.map(e=>(0,ht.jsx)("option",{value:e,children:e},e))]}),(0,ht.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,ht.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),d.software&&(0,ht.jsx)("p",{className:"text-red-600 text-sm mt-1",children:d.software})]})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,ht.jsx)("textarea",{name:"description",value:t.description,onChange:a,placeholder:"Describe your work...",rows:6,disabled:c,className:"w-full bg-gray-50 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue h-24 "+(c?"opacity-50 cursor-not-allowed":"")})]}),(0,ht.jsxs)("div",{children:[(0,ht.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tags ",(0,ht.jsx)("span",{className:"text-red-500",children:"*"})]}),t.tags.length>0&&(0,ht.jsx)("div",{className:"mb-3 flex flex-wrap gap-2",children:t.tags.map((e,t)=>(0,ht.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-green-100 text-green-800",children:[e,(0,ht.jsx)("button",{type:"button",onClick:()=>i(e),className:"ml-2 text-green-600 hover:text-green-800",children:"\xd7"})]},t))}),(0,ht.jsx)("input",{type:"text",value:r,onChange:o,onKeyDown:s,placeholder:t.tags.length>=10?"Maximum 10 tags reached":"Type # to add tags (e.g., #design #illustration)",disabled:c||t.tags.length>=10,className:`w-full bg-gray-50 border rounded px-3 py-2 focus:outline-none focus:ring-1 ${t.tags.length>=10?"border-red-300 bg-red-50 text-gray-400":"border-gray-300 focus:ring-tag-blue focus:border-tag-blue"} ${c?"opacity-50 cursor-not-allowed":""}`}),(0,ht.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,ht.jsx)("p",{className:"text-xs text-gray-500",children:"Start with # and use lowercase letters only. Press space, comma, or enter to add tags."}),(0,ht.jsxs)("p",{className:"text-xs "+(t.tags.length>=10?"text-red-500":t.tags.length>=8?"text-yellow-600":"text-gray-400"),children:[t.tags.length,"/10 tags"]})]}),t.tags.length>=10&&(0,ht.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"\u26a0\ufe0f Maximum of 10 tags allowed. Remove some tags to add new ones."}),d.tags&&(0,ht.jsx)("p",{className:"text-red-600 text-sm mt-1",children:d.tags})]})]})},xn=t=>{let{isOpen:r,onClose:a,onAdd:o}=t;const[s,n]=(0,e.useState)(""),i=()=>{if(s.trim()){o(s.trim())&&(n(""),a())}};return r?(0,ht.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ht.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,ht.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Add Custom Software"}),(0,ht.jsx)("input",{type:"text",value:s,onChange:e=>n(e.target.value),onKeyPress:e=>{"Enter"===e.key&&i()},placeholder:"Enter software name...",className:"w-full border border-gray-300 rounded px-3 py-2 mb-4 focus:outline-none focus:ring-1 focus:ring-tag-blue focus:border-tag-blue"}),(0,ht.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,ht.jsx)("button",{type:"button",onClick:()=>{n(""),a()},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,ht.jsx)("button",{type:"button",onClick:i,disabled:!s.trim(),className:"px-4 py-2 bg-tag-blue text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"})]})]})}):null},bn=e=>{let{isOpen:t,onClose:r,onConfirm:a}=e;return t?(0,ht.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ht.jsx)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:(0,ht.jsxs)("div",{className:"text-center",children:[(0,ht.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,ht.jsx)("svg",{className:"w-8 h-8 text-tag-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,ht.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Confirm Upload"}),(0,ht.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to publish this work to TAG? This action cannot be undone."}),(0,ht.jsxs)("div",{className:"flex space-x-3",children:[(0,ht.jsx)("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,ht.jsx)("button",{type:"button",onClick:a,className:"flex-1 px-4 py-2 bg-tag-blue text-white rounded-md hover:bg-blue-700 transition-colors",children:"Confirm Upload"})]})]})})}):null},yn=e=>{let{isSubmitting:t,onSubmit:r}=e;return(0,ht.jsx)("button",{type:"submit",disabled:t,onClick:r,className:"w-full font-semibold py-3 rounded-md transition-colors duration-200 flex items-center justify-center "+(t?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-tag-blue text-white hover:bg-blue-700"),children:t?(0,ht.jsxs)(ht.Fragment,{children:[(0,ht.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-gray-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,ht.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,ht.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Publishing..."]}):(0,ht.jsxs)(ht.Fragment,{children:[(0,ht.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Publish to TAG!"]})})},wn=e=>{if(!e||"string"!==typeof e)return[];const t=e.match(/#([a-zA-Z0-9_-]{1,50})/g);if(!t)return[];const r=new Set,a=[];return t.forEach(e=>{const t=e.slice(1),o=t.toLowerCase().trim();jn(o)&&!r.has(o)&&(r.add(o),a.push({name:t,slug:o}))}),a},jn=e=>e.length>=2&&!["the","and","or","but","in","on","at","to","for","of","with","by","from","up","about","into","through","during","before","after","above","below","between","among","within","without","this","that","these","those","is","are","was","were","be","been","being","have","has","had","do","does","did","will","would","could","should","may","might","can","must","shall"].includes(e),kn=()=>{const{formData:t,tagInput:r,errors:a,handleFormChange:o,handleAddCustomSoftware:s,handleRemoveSoftware:n,handleTagInputChange:i,handleTagInputKeyDown:l,handleRemoveTag:c,validateForm:d,setErrors:u}=(()=>{const[t,r]=(0,e.useState)({title:"",software:[],description:"",tags:[]}),[a,o]=(0,e.useState)(""),[s,n]=(0,e.useState)({}),i=(0,e.useCallback)(e=>{const{name:a,value:o}=e.target;if("software"===a){if("Other"===o)return{action:"showCustomSoftwareModal"};o&&!t.software.includes(o)&&r(e=>({...e,software:[...e.software,o]}))}else r(e=>({...e,[a]:o}));return s[a]&&n(e=>((e,t)=>{const r={...e};return r[t]&&delete r[t],r})(e,a)),{action:"none"}},[t.software,s]),l=(0,e.useCallback)(e=>!(!e.trim()||t.software.includes(e.trim()))&&(r(t=>({...t,software:[...t.software,e.trim()]})),!0),[t.software]),c=(0,e.useCallback)(e=>{r(t=>({...t,software:t.software.filter(t=>t!==e)}))},[]),d=(0,e.useCallback)(e=>{const a=e.target.value;if(o(a),(a.startsWith("#")||!(a.length>0))&&[" ",",","\n"].some(e=>a.includes(e))){if(t.tags.length>=10)return void o("");const e=a.split(/[\s,\n]/)[0].toLowerCase(),s=wn(e);if(s.length>0){const e=`#${s[0].slug}`;t.tags.includes(e)||r(t=>({...t,tags:[...t.tags,e]}))}o("")}},[t.tags]),u=(0,e.useCallback)(e=>{if("Enter"===e.key||","===e.key){if(e.preventDefault(),t.tags.length>=10)return void o("");const s=a.trim();if(s.startsWith("#")){const e=wn(s);if(e.length>0){const a=`#${e[0].slug}`;t.tags.includes(a)||r(e=>({...e,tags:[...e.tags,a]}))}}o("")}},[a,t.tags]),h=(0,e.useCallback)(e=>{r(t=>({...t,tags:t.tags.filter(t=>t!==e)}))},[]),m=(0,e.useCallback)(e=>{const r=((e,t)=>{const r={};return e.title.trim()||(r.title="Title is required"),0===e.tags.length&&(r.tags="At least one tag is required"),0===t.length&&(r.files="Please select at least one file"),r})(t,e);return n(r),0===Object.keys(r).length},[t]),p=(0,e.useCallback)(()=>{r({title:"",software:[],description:"",tags:[]}),o(""),n({})},[]);return{formData:t,tagInput:a,errors:s,handleFormChange:i,handleAddCustomSoftware:l,handleRemoveSoftware:c,handleTagInputChange:d,handleTagInputKeyDown:u,handleRemoveTag:h,validateForm:m,resetForm:p,setErrors:n}})(),{selectedFiles:h,isSubmitting:m,uploadProgress:p,showSuccessModal:g,showErrorModal:f,errorMessage:v,showConfirmModal:x,handleFileUpload:b,handleRemoveFile:y,handleSubmit:w,handleConfirmUpload:j,handleCloseSuccessModal:k,handleCloseErrorModal:N,handleCloseConfirmModal:C}=(()=>{const t=ee(),[r,a]=(0,e.useState)([]),[o,s]=(0,e.useState)(!1),[n,i]=(0,e.useState)(0),[l,c]=(0,e.useState)(!1),[d,u]=(0,e.useState)(!1),[h,m]=(0,e.useState)(""),[p,g]=(0,e.useState)(!1),f=(0,e.useCallback)(e=>{const t=Array.from(e.target.files);console.log("Portfolio files selected:",t),a(t)},[]),v=(0,e.useCallback)(e=>{a(t=>t.filter((t,r)=>r!==e))},[]),x=(0,e.useCallback)(async()=>{const e=[],t=(0,ut.HW)();for(let a=0;a<r.length;a++){const o=r[a];i(a/r.length*100);const s=await(0,Dr.jp)(o,t.id);if(!s.success)throw new Error(`Failed to upload ${o.name}: ${s.error}`);e.push(s.data)}return i(100),e},[r]),b=(0,e.useCallback)(async(e,t,a)=>{if(e.preventDefault(),a(r))return(0,ut.HW)()?void g(!0):(m("Please log in to upload artwork"),void u(!0))},[r]),y=(0,e.useCallback)(async e=>{g(!1),s(!0);try{const a=await x();console.log("[UploadPortfolio] Form data tags:",e.tags),console.log("[UploadPortfolio] Form data software:",e.software);const o=((e,t)=>{var r,a;return{title:e.title.trim(),category:"design",description:e.description.trim(),tags:[...e.tags,...e.software],imagePaths:t.map(e=>e.path),thumbnailPath:(null===(r=t[0])||void 0===r?void 0:r.path)||"",imageKey:(null===(a=t[0])||void 0===a?void 0:a.path)||"",isPublic:!0}})(e,a);console.log("[UploadPortfolio] Final portfolio data tags:",o.tags);const s=await(0,Dr.qo)(o);if(!s.success)throw new Error(s.error||"Failed to save artwork");{const e=(0,ut.HW)();if(e&&e.id)try{await Ht.$F.ensureArtistIndexed(e.id),console.log("[UploadPortfolio] Artist indexed successfully")}catch(r){console.warn("[UploadPortfolio] Failed to index artist:",r)}c(!0),setTimeout(()=>{t("/")},2e3)}}catch(a){console.error("Upload error:",a),m("Upload failed. Please try again."),u(!0)}finally{s(!1),i(0)}},[x,t]),w=(0,e.useCallback)(()=>{c(!1)},[]),j=(0,e.useCallback)(()=>{u(!1)},[]),k=(0,e.useCallback)(()=>{g(!1)},[]);return{selectedFiles:r,isSubmitting:o,uploadProgress:n,showSuccessModal:l,showErrorModal:d,errorMessage:h,showConfirmModal:p,handleFileUpload:f,handleRemoveFile:v,handleSubmit:b,handleConfirmUpload:y,handleCloseSuccessModal:w,handleCloseErrorModal:j,handleCloseConfirmModal:k}})(),[S,_]=(0,e.useState)(!1),E=()=>{_(!1)},P=e=>{w(e,t,d)};return(0,ht.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,ht.jsxs)("div",{className:"text-center mb-6",children:[(0,ht.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,ht.jsx)("svg",{className:"w-8 h-8 text-tag-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,ht.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Share Your Portfolio Work"}),(0,ht.jsx)("p",{className:"text-gray-600",children:"Upload your creative work to the gallery for everyone to see and get inspired"})]}),a.general&&(0,ht.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,ht.jsx)("p",{className:"text-red-600 text-sm",children:a.general})}),(0,ht.jsx)(fn,{selectedFiles:h,onFileUpload:b,onRemoveFile:y,isSubmitting:m,uploadProgress:p,errors:a}),(0,ht.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[(0,ht.jsx)(vn,{formData:t,tagInput:r,onFormChange:o,onTagInputChange:i,onTagInputKeyDown:l,onRemoveSoftware:n,onRemoveTag:c,onShowCustomSoftwareModal:()=>{_(!0)},isSubmitting:m,errors:a}),(0,ht.jsx)(yn,{isSubmitting:m,onSubmit:P})]}),(0,ht.jsx)(xn,{isOpen:S,onClose:E,onAdd:e=>{s(e)&&E()}}),(0,ht.jsx)(bn,{isOpen:x,onClose:C,onConfirm:()=>{j(t)}}),(0,ht.jsx)(It,{isOpen:g,title:"\ud83c\udf89 Success!",message:"Portfolio work published successfully to TAG!",onClose:k}),(0,ht.jsx)(Pt,{isOpen:f,title:"\u26a0\ufe0f Error",message:v,onClose:N})]})},Nn=()=>{const t=Z(),[r,a]=(0,e.useState)("portfolio"),[o,s]=(0,e.useState)(!1),[n,i]=(0,e.useState)(""),[l,c]=(0,e.useState)(null);(0,e.useEffect)(()=>{var e,r,o;const s=new URLSearchParams(t.search).get("tab");if(s){a(s);const e=window.location.pathname;window.history.replaceState({},document.title,e)}else null===(e=t.state)||void 0===e||!e.activeUploadType||"upload-success"!==(null===(r=t.state)||void 0===r?void 0:r.from)&&"draft-edit"!==(null===(o=t.state)||void 0===o?void 0:o.from)||(a(t.state.activeUploadType),window.history.replaceState({},document.title))},[t.state,t.search]);const d=[{id:"art-market",name:"Art Market",theme:"blue",icon:(0,ht.jsx)("svg",{className:"w-6 h-6 text-current",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})},{id:"portfolio",name:"Portfolio",theme:"blue",icon:(0,ht.jsx)("svg",{className:"w-6 h-6 text-current",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})},{id:"collaboration",name:"Collaboration",theme:"purple",icon:(0,ht.jsx)("svg",{className:"w-6 h-6 text-current",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})},{id:"milestones",name:"Milestones",theme:"purple",icon:(0,ht.jsx)("svg",{className:"w-6 h-6 text-current",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 3v18m0-16h12l-2 4 2 4H6"})})},{id:"jobs",name:"Jobs",theme:"purple",icon:(0,ht.jsx)("svg",{className:"w-6 h-6 text-current",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7a2 2 0 012-2h12a2 2 0 012 2v2H4V7zM4 9h16v10a2 2 0 01-2 2H6a2 2 0 01-2-2V9z"})})}],u=e=>{const t=r===e.id,a="blue"===e.theme,o="purple"===e.theme;if(t){if(a)return"border-tag-blue bg-blue-50 text-tag-blue ring-2 ring-tag-blue/20";if(o)return"border-tag-purple bg-purple-50 text-tag-purple ring-2 ring-tag-purple/20"}return"text-gray-600 hover:text-gray-800"},h=e=>{const t=r===e.id,a="blue"===e.theme,o="purple"===e.theme;if(t){if(a)return"text-tag-blue";if(o)return"text-tag-purple"}return"text-gray-400"};return(0,ht.jsxs)("div",{className:"min-h-screen bg-gray-50 pt-16",children:[(0,ht.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-10",children:[(0,ht.jsxs)("div",{className:"text-center mb-8",children:[(0,ht.jsx)("h1",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"What would you like to upload?"}),(0,ht.jsx)("p",{className:"text-base text-gray-500",children:"Choose the type of content you want to share with the community"})]}),(0,ht.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 mb-8",children:d.map(e=>(0,ht.jsx)("button",{onClick:()=>{return t=e.id,r=e.name,void("art-market"===t||"jobs"===t?(i(`${r} upload is currently in testing phase and not available yet.`),s(!0),c(t)):a(t));var t,r},className:`bg-white border border-gray-200 rounded-lg px-4 py-3 text-center transition-all duration-200 hover:shadow ${"blue"===e.theme?"hover:border-tag-blue":"hover:border-tag-purple"} ${u(e)}`,children:(0,ht.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,ht.jsx)("div",{className:h(e),children:e.icon}),(0,ht.jsx)("span",{className:"text-sm font-medium",children:e.name})]})},e.id))}),(0,ht.jsxs)("div",{className:"mt-8 rounded-lg p-6 "+("portfolio"===r||"art-market"===r?"bg-blue-50":"bg-purple-50"),children:[console.log("\ud83d\udd0d Rendering uploadType:",r),"portfolio"===r&&(0,ht.jsx)(kn,{}),"art-market"===r&&(0,ht.jsx)(pn,{}),"collaboration"===r&&(0,ht.jsx)(Xs,{}),"jobs"===r&&(0,ht.jsx)(en,{}),"milestones"===r&&(0,ht.jsx)(nn,{})]})]}),o&&(0,ht.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ht.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-sm w-full",children:[(0,ht.jsx)("h3",{className:"text-lg font-semibold text-red-600 mb-2",children:"Feature Under Development"}),(0,ht.jsx)("p",{className:"text-sm text-gray-800 mb-4",children:n}),(0,ht.jsx)("div",{className:"flex justify-end space-x-2",children:(0,ht.jsx)("button",{onClick:()=>{s(!1),l&&(a(l),c(null))},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"OK"})})]})})]})},Cn=()=>({id:"default",title:"Untitled Work",description:"No description available",category:"Design",date:(new Date).toLocaleDateString(),likes:0,views:0,tags:[],mainImage:"",allImages:[],author:Sn()}),Sn=()=>({id:"unknown",name:"Unknown Artist",role:"Design",avatar:"",works:0,followers:"0",following:0}),_n=t=>{let{imageUrl:r,imageAlt:a="Image",isOpen:o=!1,onClose:s,className:n=""}=t;const[i,l]=(0,e.useState)(1),[c,d]=(0,e.useState)(!1),[u,h]=(0,e.useState)({x:0,y:0}),[m,p]=(0,e.useState)({x:0,y:0}),g=(0,e.useCallback)(e=>{e.preventDefault();const t=e.deltaY>0?-.2:.2,r=Math.max(.5,Math.min(5,i+t));l(r)},[i]),f=(0,e.useCallback)(()=>{l(1),p({x:0,y:0})},[]),v=(0,e.useCallback)(e=>{i>1&&(d(!0),h({x:e.clientX-m.x,y:e.clientY-m.y}))},[i,m]),x=(0,e.useCallback)(e=>{c&&i>1&&p({x:e.clientX-u.x,y:e.clientY-u.y})},[c,i,u]),b=(0,e.useCallback)(()=>{d(!1)},[]);return(0,e.useEffect)(()=>{const e=e=>{"Escape"===e.key&&s()};return o&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[o,s]),(0,e.useEffect)(()=>{o&&(l(1),p({x:0,y:0}),d(!1))},[o]),o?(0,ht.jsxs)("div",{className:`fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm ${n}`,onClick:s,onWheel:g,onMouseMove:x,onMouseUp:b,onMouseLeave:b,children:[(0,ht.jsx)("button",{onClick:s,className:"absolute top-4 right-4 z-10 w-10 h-10 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white/30 transition-colors duration-200","aria-label":"Close image viewer",children:(0,ht.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),1!==i&&(0,ht.jsx)("button",{onClick:f,className:"absolute top-4 left-4 z-10 w-10 h-10 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white/30 transition-colors duration-200","aria-label":"Reset zoom",children:(0,ht.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}),(0,ht.jsx)("div",{className:"relative max-w-[90vw] max-h-[90vh] flex items-center justify-center",onClick:e=>e.stopPropagation(),onMouseDown:v,style:{cursor:i>1?c?"grabbing":"grab":"default"},children:(0,ht.jsx)("img",{src:r,alt:a,className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl transition-transform duration-200",loading:"eager",onDoubleClick:f,style:{transform:`scale(${i}) translate(${m.x/i}px, ${m.y/i}px)`,transformOrigin:"center"}})}),1!==i&&(0,ht.jsxs)("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-white/20 backdrop-blur-sm rounded-full px-3 py-1 text-white text-sm",children:[Math.round(100*i),"%"]}),(0,ht.jsx)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 text-white/70 text-sm",children:"Scroll to zoom \u2022 Double-click to reset \u2022 ESC to close"})]}):null},En=t=>{let{images:r=[],workTitle:a="Work",className:o=""}=t;const[s,n]=(0,e.useState)(!1),[i,l]=(0,e.useState)(0),[c,d]=(0,e.useState)([]),[u,h]=(0,e.useState)(!0);(0,e.useEffect)(()=>{(async()=>{if(!r||0===r.length)return d([]),void h(!1);try{h(!0);const a=[];console.log("[WorkImageGallery] Processing images:",r);for(const o of r)if("string"===typeof o)if(o.startsWith("data:image/")||o.startsWith("blob:")||o.startsWith("http"))"/assets/placeholder.svg"!==o&&""!==o.trim()?(console.log("[WorkImageGallery] Using direct URL:",o.substring(0,50)+"..."),a.push(o)):console.log("[WorkImageGallery] Skipping placeholder path:",o);else{console.log("[WorkImageGallery] Converting file path to URL:",o);try{var e;const t=await(0,Dr.Vp)(o);console.log("[WorkImageGallery] getPortfolioImageUrl result:",t),t.success&&null!==(e=t.data)&&void 0!==e&&e.url?(console.log("[WorkImageGallery] Successfully converted path to URL:",t.data.url.substring(0,50)+"..."),a.push(t.data.url)):(console.warn("[WorkImageGallery] Failed to convert path to URL:",o,t.error),console.log("[WorkImageGallery] Checking if image exists in IndexedDB..."))}catch(t){console.error("[WorkImageGallery] Error converting path to URL:",o,t)}}else console.log(`[WorkImageGallery] Skipping non-string: ${typeof o} - ${o}`);console.log(`[WorkImageGallery] Final URLs count: ${a.length}`,a.map(e=>(null===e||void 0===e?void 0:e.substring(0,30))+"...")),d(a)}catch(a){console.error("Error loading image URLs:",a),d([])}finally{h(!1)}})()},[r]);return u?(0,ht.jsx)("div",{className:`${o}`,children:(0,ht.jsx)("div",{className:"relative aspect-square bg-gray-100 rounded-lg flex items-center justify-center",children:(0,ht.jsxs)("div",{className:"text-center text-gray-500",children:[(0,ht.jsx)("svg",{className:"w-8 h-8 mx-auto mb-2 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,ht.jsx)("p",{children:"Loading images..."})]})})}):c&&0!==c.length?(0,ht.jsxs)("div",{className:`${o}`,children:[(0,ht.jsx)("div",{className:"space-y-4",children:c.map((e,t)=>(0,ht.jsx)("div",{className:"relative",children:(0,ht.jsxs)("div",{className:"relative aspect-square bg-white rounded-lg shadow-sm overflow-hidden",children:[e?(0,ht.jsx)("img",{src:e,alt:`${a} - ${t+1}`,className:"w-full h-full object-cover cursor-pointer hover:opacity-90 transition-opacity duration-200",onClick:()=>(e=>{l(e),n(!0)})(t)}):(0,ht.jsx)("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:(0,ht.jsxs)("div",{className:"text-center text-gray-500",children:[(0,ht.jsx)("svg",{className:"w-12 h-12 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,ht.jsx)("p",{className:"text-sm",children:"Image not found"})]})}),c.length>1&&(0,ht.jsxs)("div",{className:"absolute top-4 left-4 bg-black/50 text-white px-2 py-1 rounded text-sm",children:[t+1," / ",c.length]})]})},t))}),s&&c[i]&&(0,ht.jsx)(_n,{imageUrl:c[i],imageAlt:`${a} - ${i+1}`,isOpen:s,onClose:()=>{n(!1)}})]}):(0,ht.jsx)("div",{className:`${o}`,children:(0,ht.jsx)("div",{className:"relative aspect-square bg-gray-100 rounded-lg flex items-center justify-center",children:(0,ht.jsxs)("div",{className:"text-center text-gray-500",children:[(0,ht.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,ht.jsx)("p",{children:"No images available"})]})})})},Pn=e=>{let{workData:t,onBackClick:r,onImageNavigation:a,navigationState:o,className:s=""}=e;return(0,ht.jsxs)("div",{className:`${s}`,children:[(0,ht.jsxs)("button",{onClick:r,className:"flex items-center text-gray-600 hover:text-gray-900 mb-6 transition-colors duration-200 relative z-10 bg-white px-4 py-2 rounded-lg shadow-sm hover:shadow-md",children:[(0,ht.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),(0,ht.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ht.jsxs)("button",{onClick:null===o||void 0===o?void 0:o.navigateToPrevious,disabled:!(null!==o&&void 0!==o&&o.hasPrevious)&&(null===o||void 0===o?void 0:o.totalWorks)<=1,className:"flex items-center px-4 py-2 bg-white rounded-lg shadow-sm hover:shadow-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous work (\u2190)",children:[(0,ht.jsx)("svg",{className:"w-5 h-5 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Previous Work"]}),(0,ht.jsxs)("button",{onClick:null===o||void 0===o?void 0:o.navigateToNext,disabled:!(null!==o&&void 0!==o&&o.hasNext)&&(null===o||void 0===o?void 0:o.totalWorks)<=1,className:"flex items-center px-4 py-2 bg-white rounded-lg shadow-sm hover:shadow-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Next work (\u2192)",children:["Next Work",(0,ht.jsx)("svg",{className:"w-5 h-5 ml-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),(0,ht.jsx)("div",{className:"mb-6",children:(0,ht.jsx)(En,{images:t.allImages||[t.mainImage],workTitle:t.title})})]})},In=e=>{let{tag:t,onClick:r,children:a}=e;return(0,ht.jsx)("a",{href:`/t/${t.slug}`,onClick:e=>{r&&(e.preventDefault(),r(t))},target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline cursor-pointer",title:`View all content tagged with ${t.name}`,children:a})},An=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e&&0!==e.length?(0,ht.jsx)("div",{className:`flex flex-wrap gap-2 ${r}`,children:e.map((e,r)=>(0,ht.jsxs)(In,{tag:e,onClick:t,children:["#",e.name]},`${e.slug}-${r}`))}):null},Tn=e=>{const t="flex items-center px-4 py-2 rounded-lg transition-colors duration-200";return e?`${t} bg-red-50 text-red-600`:`${t} bg-gray-100 text-gray-700 hover:bg-gray-200`},Ln=e=>{let{workData:t,isLiked:r,isSaved:a,onLikeClick:o,onSaveClick:s,className:n=""}=e;return(0,ht.jsxs)("div",{className:`bg-white rounded-lg p-6 mb-6 ${n}`,children:[(0,ht.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ht.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ht.jsxs)("button",{onClick:o,className:Tn(r),children:[(0,ht.jsx)("svg",{className:"w-5 h-5 mr-2 "+(r?"fill-current":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),t.likes]}),(0,ht.jsx)(_t,{isFavorited:a,itemType:"work",itemId:t.id,onToggle:s,size:"md"})]}),(0,ht.jsxs)("div",{className:"flex items-center text-gray-500",children:[(0,ht.jsxs)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),(i=t.views,i.toLocaleString())]})]}),(0,ht.jsx)("div",{className:"flex flex-wrap gap-2",children:t.tags&&t.tags.length>0?t.tags.map((e,t)=>{if(e.startsWith("#")){const r=wn(e);if(r.length>0)return(0,ht.jsx)("div",{className:"inline-block",children:An(r,null,"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium")},t)}return(0,ht.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:e},t)}):(0,ht.jsx)("span",{className:"text-gray-500 text-sm",children:"No tags"})})]});var i},Dn=e=>{let{parentId:t,parentAuthorName:r,draft:a,onChange:o,onSubmit:s,onCancel:n,className:i=""}=e;return(0,ht.jsx)("div",{className:`mt-2 pl-10 ${i}`,children:(0,ht.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,ht.jsx)("img",{src:(0,ut.ou)(),alt:"Your avatar",className:"w-8 h-8 rounded-full flex-shrink-0"}),(0,ht.jsxs)("div",{className:"flex-1",children:[(0,ht.jsx)("textarea",{value:a||"",onChange:e=>o(t,e.target.value),placeholder:`Reply to ${r}\u2026`,rows:2,className:"w-full p-2 border border-gray-300 rounded-md text-sm resize-none focus:outline-none focus:ring-2 focus:ring-tag-blue focus:border-transparent",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),s(t))}}),(0,ht.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,ht.jsx)("button",{className:"px-3 py-1 rounded bg-tag-blue text-white text-sm hover:bg-tag-dark-blue transition-colors duration-200",onClick:()=>s(t),children:"Post"}),(0,ht.jsx)("button",{className:"px-3 py-1 rounded border border-gray-300 text-sm hover:bg-gray-50 transition-colors duration-200",onClick:n,children:"Cancel"})]})]})]})})},Mn=t=>{var r,a;let{comment:o,comments:s,onUserClick:n,onLikeClick:i,onReplyClick:l,onDeleteClick:c,replyingTo:d,replyDrafts:u,onStartReply:h,onCancelReply:m,onSetReplyDraft:p,onSubmitReply:g,className:f=""}=t;const v=(0,ut.HW)(),x=v&&o.authorId===v.id,b=(null===d||void 0===d?void 0:d.parentId)===o.id,y=(0,e.useMemo)(()=>s.filter(e=>String(e.parentId)===String(o.id)).sort((e,t)=>e.createdAt-t.createdAt),[s,o.id]),[w,j]=(0,e.useState)(null),[k,N]=(0,e.useState)(!0);(0,e.useEffect)(()=>{(async()=>{if(o.authorId)try{N(!0);const e=await(0,Fr.Cs)(o.authorId);j(e)}catch(e){console.warn(`[CommentItem] Failed to get author info for ${o.authorId}:`,e),j(null)}finally{N(!1)}else N(!1)})()},[o.authorId]);const C=()=>k?o.authorName||"Loading...":null!==w&&void 0!==w&&w.name?w.name:o.authorName||"Unknown User",S=e=>{const t="string"===typeof e?new Date(e).getTime():e,r=new Date(t),a=new Date,o=Math.floor((a-r)/6e4);return o<1?"Just now":o<60?`${o}m ago`:o<1440?`${Math.floor(o/60)}h ago`:`${Math.floor(o/1440)}d ago`};return(0,ht.jsxs)("div",{className:`flex space-x-3 ${f}`,children:[(0,ht.jsx)("img",{src:k?(0,ut.ou)():null!==w&&void 0!==w&&w.avatar?w.avatar:(0,ut.ou)(),alt:C(),className:"w-10 h-10 rounded-full cursor-pointer hover:opacity-80 transition-opacity duration-200",onClick:()=>n(o.authorId)}),(0,ht.jsxs)("div",{className:"flex-1",children:[(0,ht.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,ht.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,ht.jsx)("span",{className:"font-medium text-gray-900 cursor-pointer hover:text-tag-blue transition-colors duration-200",onClick:()=>n(o.authorId),children:C()}),(0,ht.jsx)("span",{className:"text-sm text-gray-500",children:S(o.createdAt)})]}),(0,ht.jsx)("p",{className:"text-gray-700",children:o.text||o.content||""})]}),(0,ht.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-sm",children:[(0,ht.jsxs)("button",{onClick:()=>i(o.id),className:"flex items-center gap-1 "+(null!==(r=o.likedBy)&&void 0!==r&&r.includes(null===v||void 0===v?void 0:v.id)?"text-red-500":"text-gray-500 hover:text-gray-700"),children:[(0,ht.jsx)("svg",{className:"w-4 h-4",fill:null!==(a=o.likedBy)&&void 0!==a&&a.includes(null===v||void 0===v?void 0:v.id)?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),(0,ht.jsx)("span",{children:o.likes||0})]}),!x&&(0,ht.jsx)("button",{onClick:()=>h(o),className:"text-gray-500 hover:text-gray-700",children:"Reply"}),x&&(0,ht.jsx)("button",{onClick:()=>c(o.id),className:"text-red-500 hover:text-red-700",children:"Delete"})]}),b&&(0,ht.jsx)(Dn,{parentId:o.id,parentAuthorName:C(),draft:(null===u||void 0===u?void 0:u[o.id])||"",onChange:p,onSubmit:g,onCancel:m}),y.length>0&&(0,ht.jsx)("div",{className:"mt-3 border-l-2 border-gray-200 pl-4 space-y-3",children:y.map(e=>{var t,r;return(0,ht.jsxs)("div",{className:"flex space-x-3",children:[(0,ht.jsx)("img",{src:(0,ut.ou)(),alt:"Reply author",className:"w-8 h-8 rounded-full cursor-pointer hover:opacity-80 transition-opacity duration-200",onClick:()=>n(e.authorId)}),(0,ht.jsxs)("div",{className:"flex-1",children:[(0,ht.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,ht.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,ht.jsx)("span",{className:"font-medium text-gray-900 cursor-pointer hover:text-tag-blue transition-colors duration-200",onClick:()=>n(e.authorId),children:e.authorName}),(0,ht.jsx)("span",{className:"text-sm text-gray-500",children:S(e.createdAt)})]}),(0,ht.jsx)("p",{className:"text-gray-700",children:e.text||e.content})]}),(0,ht.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-sm",children:[(0,ht.jsxs)("button",{onClick:()=>i(e.id),className:"flex items-center gap-1 "+(null!==(t=e.likedBy)&&void 0!==t&&t.includes(null===v||void 0===v?void 0:v.id)?"text-red-500":"text-gray-500 hover:text-gray-700"),children:[(0,ht.jsx)("svg",{className:"w-4 h-4",fill:null!==(r=e.likedBy)&&void 0!==r&&r.includes(null===v||void 0===v?void 0:v.id)?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),(0,ht.jsx)("span",{children:e.likes||0})]}),v&&e.authorId===v.id&&(0,ht.jsx)("button",{onClick:()=>c(e.id),className:"text-red-500 hover:text-red-700",children:"Delete"})]})]})]},e.id)})})]})]})},Rn=e=>{let{comment:t,onCommentChange:r,onCommentSubmit:a,replyTo:o,onCancelReply:s,className:n=""}=e;return(0,ht.jsxs)("div",{className:`flex items-start space-x-3 mb-6 ${n}`,children:[(0,ht.jsx)("img",{src:(0,ut.ou)(),alt:"Your avatar",className:"w-10 h-10 rounded-full"}),(0,ht.jsxs)("div",{className:"flex-1",children:[o&&(0,ht.jsx)("div",{className:"mb-2 p-2 bg-blue-50 border border-blue-200 rounded-lg",children:(0,ht.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ht.jsx)("span",{className:"text-sm text-blue-700",children:"Replying to a comment"}),(0,ht.jsx)("button",{onClick:s,className:"text-blue-500 hover:text-blue-700 text-sm",children:"Cancel"})]})}),(0,ht.jsx)("textarea",{value:t,onChange:r,placeholder:o?"Write your reply...":"Add a comment...",className:"w-full p-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-tag-blue focus:border-transparent",rows:"3"}),(0,ht.jsx)("div",{className:"flex justify-end mt-2",children:(0,ht.jsx)("button",{onClick:a,className:"px-4 py-2 bg-tag-blue text-white rounded-lg hover:bg-tag-dark-blue transition-colors duration-200",children:o?"Reply":"Post"})})]})]})},$n=t=>{let{comments:r,comment:a,onCommentChange:o,onCommentSubmit:s,onCommentUserClick:n,onCommentLike:i,onCommentReply:l,onCommentDelete:c,replyingTo:d,replyDrafts:u,onStartReply:h,onCancelReply:m,onSetReplyDraft:p,onSubmitReply:g,replyTo:f,onCancelReplyOld:v,className:x=""}=t;const b=(0,e.useMemo)(()=>r.filter(e=>!e.parentId).sort((e,t)=>e.createdAt-t.createdAt),[r]);return(0,ht.jsxs)("div",{className:`bg-white rounded-lg p-6 ${x}`,children:[(0,ht.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Comments (",r.length,")"]}),(0,ht.jsx)(Rn,{comment:a,onCommentChange:o,onCommentSubmit:s,replyTo:f,onCancelReply:v}),(0,ht.jsx)("div",{className:"space-y-4",children:b.map(e=>(0,ht.jsx)(Mn,{comment:e,comments:r,onUserClick:n,onLikeClick:i,onReplyClick:l,onDeleteClick:c,replyingTo:d,replyDrafts:u,onStartReply:h,onCancelReply:m,onSetReplyDraft:p,onSubmitReply:g},e.id))})]})},Fn=e=>{let{author:t,isFollowing:r=!1,followersCount:a=0,onAuthorClick:o,onFollowClick:s,className:n=""}=e;return(0,ht.jsxs)("div",{className:`bg-white rounded-lg p-6 mb-6 ${n}`,children:[(0,ht.jsxs)(at,{to:`/artist/${t.id}`,className:"flex items-center mb-4 cursor-pointer hover:bg-gray-50 p-2 rounded-lg transition-colors duration-200 block",children:[(0,ht.jsx)("img",{src:t.avatar,alt:t.name,className:"w-16 h-16 rounded-full mr-4"}),(0,ht.jsxs)("div",{children:[(0,ht.jsx)("h3",{className:"text-lg font-semibold text-gray-900 hover:text-tag-blue transition-colors duration-200",children:t.name}),(0,ht.jsx)("p",{className:"text-sm text-gray-600",children:t.role})]})]}),(0,ht.jsxs)("div",{className:"flex justify-between mb-4 text-sm",children:[(0,ht.jsxs)("div",{className:"text-center",children:[(0,ht.jsx)("div",{className:"font-semibold text-gray-900",children:t.works}),(0,ht.jsx)("div",{className:"text-gray-500",children:"Works"})]}),(0,ht.jsxs)("div",{className:"text-center",children:[(0,ht.jsx)("div",{className:"font-semibold text-gray-900",children:a}),(0,ht.jsx)("div",{className:"text-gray-500",children:"Followers"})]}),(0,ht.jsxs)("div",{className:"text-center",children:[(0,ht.jsx)("div",{className:"font-semibold text-gray-900",children:t.following}),(0,ht.jsx)("div",{className:"text-gray-500",children:"Following"})]})]}),(0,ht.jsx)("div",{className:"flex",children:(0,ht.jsx)("button",{onClick:s,className:"w-full px-4 py-2 rounded-lg transition-colors duration-200 "+(r?"bg-gray-500 text-white hover:bg-gray-600":"bg-tag-blue text-white hover:bg-tag-dark-blue"),children:r?"Following":"Follow"})})]})},On=e=>{let{workData:t,className:r=""}=e;return(0,ht.jsxs)("div",{className:`bg-white rounded-lg p-6 mb-6 ${r}`,children:[(0,ht.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:t.title}),(0,ht.jsx)("p",{className:"text-gray-600 mb-4",children:t.description}),(0,ht.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,ht.jsxs)("div",{className:"flex justify-between",children:[(0,ht.jsx)("span",{className:"text-gray-500",children:"Category:"}),(0,ht.jsx)("span",{className:"text-gray-900",children:t.category})]}),(0,ht.jsxs)("div",{className:"flex justify-between",children:[(0,ht.jsx)("span",{className:"text-gray-500",children:"Date:"}),(0,ht.jsx)("span",{className:"text-gray-900",children:t.date})]})]})]})},Un=e=>{let{relatedWorks:t,authorName:r,onAuthorClick:a,onWorkClick:o,loading:s=!1,className:n=""}=e;return(0,ht.jsxs)("div",{className:`bg-white rounded-lg p-6 ${n}`,children:[(0,ht.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 cursor-pointer hover:text-tag-blue transition-colors duration-200",onClick:a,children:["More from ",r]}),s?(0,ht.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[1,2,3,4].map(e=>(0,ht.jsx)("div",{className:"aspect-square rounded-lg bg-gray-200 animate-pulse"},e))}):t.length>0?(0,ht.jsx)("div",{className:"grid grid-cols-2 gap-2",children:t.map(e=>(0,ht.jsx)("div",{className:"aspect-square rounded-lg overflow-hidden cursor-pointer hover:opacity-80 transition-opacity duration-200",onClick:()=>o(e.id),children:(0,ht.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-full object-cover",onError:e=>{e.target.src="https://images.unsplash.com/photo-1541961017774-22349e4a1262?w=200&h=200&fit=crop"}})},e.id))}):(0,ht.jsx)("div",{className:"text-center py-4",children:(0,ht.jsx)("p",{className:"text-gray-500 text-sm",children:"No other works available"})})]})},zn=()=>{const[t,r]=(0,e.useState)(!1),[a,o]=(0,e.useState)(!1),[s,n]=(0,e.useState)(""),[i,l]=(0,e.useState)(!1),[c,d]=(0,e.useState)([]),[u,h]=(0,e.useState)(null),[m,p]=(0,e.useState)(null),[g,f]=(0,e.useState)({}),{id:v}=te(),[x,b]=(0,e.useState)(null),[y,w]=(0,e.useState)(!0),[j,k]=(0,e.useState)(null);return(0,e.useEffect)(()=>{(async()=>{if(!v)return k("No work ID provided"),void w(!1);try{w(!0),k(null);const e=await(async e=>{try{var t,r,a,o,s,n,i,l,c,d,u,h,m,p,g,f,v,x,b,y,w;console.log(`[WorkDetail] Loading work data for ID: ${e}`);const k=await Ht.Jb.getWorkById(e);if(!k.success)return console.error("[WorkDetail] Failed to load work data:",k.error),null;const N=k.data;if(!N)return console.warn(`[WorkDetail] Work not found with ID: ${e}`),null;console.log("[WorkDetail] Found work:",N);const C=(null===(t=N.author)||void 0===t?void 0:t.id)||(null===(r=N.profiles)||void 0===r?void 0:r.id)||N.userId;let S=null,_=null,E=null;if(C)try{const e=await Ht.Jb.getUserWorks(C);e.success&&(E=e.data,console.log(`[WorkDetail] Retrieved ${E.length} works for ${C}`));const t=await(0,ra.getProfile)(C);t.success&&(_=t.data,console.log(`[WorkDetail] Retrieved profile data for ${C}`)),S=await(0,Fr.Cs)(C),console.log(`[WorkDetail] Retrieved author info for ${C}`)}catch(j){console.warn(`[WorkDetail] Failed to get author info for ${C}:`,j)}const P={id:N.id,title:N.title||"Untitled",description:N.description||"",category:N.category||"Design",date:N.createdAt?new Date(N.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Unknown",likes:124,views:1247,tags:N.tags||[],mainImage:N.thumbnailPath||N.imagePaths&&N.imagePaths[0]||"",allImages:N.imagePaths||[],author:{id:C||"unknown",name:(null===(a=S)||void 0===a?void 0:a.name)||(null===(o=N.author)||void 0===o?void 0:o.name)||(null===(s=N.profiles)||void 0===s?void 0:s.full_name)||"Unknown Artist",role:(null===(n=S)||void 0===n?void 0:n.title)||(null===(i=N.author)||void 0===i?void 0:i.role)||N.category||"Design",avatar:(null===(l=S)||void 0===l?void 0:l.avatar)||(null===(c=N.author)||void 0===c?void 0:c.avatar)||(null===(d=N.profiles)||void 0===d?void 0:d.avatar_url)||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face",works:(null===(u=E)||void 0===u?void 0:u.length)||(null===(h=_)||void 0===h||null===(m=h.portfolio)||void 0===m?void 0:m.length)||(null===(p=S)||void 0===p||null===(g=p.works)||void 0===g?void 0:g.length)||0,followers:(null===(f=S)||void 0===f||null===(v=f.stats)||void 0===v||null===(x=v.followers)||void 0===x?void 0:x.toString())||"0",following:(null===(b=S)||void 0===b||null===(y=b.stats)||void 0===y||null===(w=y.following)||void 0===w?void 0:w.toString())||0},relatedWorks:[]};return console.log("[WorkDetail] Transformed work data:",P),console.log("[WorkDetail] Tags data:",P.tags),P}catch(j){return console.error("[WorkDetail] Error loading work data:",j),null}})(v);e?b(e):k("Work not found")}catch(e){console.error("Error loading work data:",e),k("Failed to load work data")}finally{w(!1)}})()},[v]),(0,e.useEffect)(()=>{window.scrollTo({top:0,behavior:"auto"})},[]),(0,e.useEffect)(()=>{if(!x)return;(async()=>{const e=((e,t)=>{var r,a;const o=[null===e||void 0===e?void 0:e.mainImage,null===e||void 0===e||null===(r=e.author)||void 0===r?void 0:r.avatar,...(null===e||void 0===e||null===(a=e.relatedWorks)||void 0===a?void 0:a.map(e=>e.image))||[],...(null===t||void 0===t?void 0:t.map(e=>e.avatar))||[]].filter(e=>"string"===typeof e&&e.startsWith("data:image/"));return console.log(`[WorkDetail] Preloading ${o.length} images`),o})(x,c);await(async e=>{try{const t=e.filter(e=>e&&""!==e.trim()&&(e.startsWith("blob:")||e.startsWith("http")||e.startsWith("data:")));return 0===t.length?(console.log("[WorkDetail] No valid image URLs to preload"),!0):(console.log(`[WorkDetail] Preloading ${t.length} images:`,t),await Promise.all(t.map(e=>new Promise((t,r)=>{const a=new Image;a.onload=()=>{const r=e.split("/").pop()||e.substring(0,30);console.log(`[WorkDetail] Preloaded: ${r}`),t()},a.onerror=r=>{const a=e.split("/").pop()||e.substring(0,30);console.warn(`[WorkDetail] Failed to preload: ${a}`),t()},a.src=e}))),!0)}catch(j){return console.error("[WorkDetail] Failed to preload images:",j),!1}})(e);l(!0)})()},[c,x]),(0,e.useEffect)(()=>{if(!v)return;(async()=>{try{const e=await Ht.fN.getWorkComments(v);e.success?d(e.data):console.error("[WorkDetail] Failed to load comments:",e.error)}catch(j){console.error("[WorkDetail] Error loading comments:",j)}})()},[v]),(0,e.useEffect)(()=>{if(null===x||void 0===x||!x.id)return;(async()=>{try{const e=await Ht.zF.checkFavoriteStatus("work",x.id);e.success&&o(e.data.isFavorited)}catch(j){console.error("Failed to check favorite status:",j)}})()},[null===x||void 0===x?void 0:x.id]),{liked:t,saved:a,comment:s,imagesLoaded:i,comments:c,workData:x,loading:y,error:j,setLiked:r,setSaved:o,setComment:n,setImagesLoaded:l,setComments:d,setReplyTo:h,replyingTo:m,replyDrafts:g,setReplyingTo:p,setReplyDrafts:f,toggleLike:()=>{r(!t)},toggleSave:()=>{o(!a)},startReply:e=>{e&&p({parentId:e.id,parentAuthorId:e.authorId,parentAuthorName:e.authorName})},cancelReply:()=>{p(null)},setReplyDraft:(e,t)=>{f(r=>({...r,[e]:t}))},addCommentOptimistic:e=>{d(t=>[...t,e])},replaceTempComment:e=>{let{tempId:t,saved:r}=e;d(e=>e.map(e=>e.id===t?r:e))},removeTempComment:e=>{d(t=>t.filter(t=>t.id!==e))},loadComments:async()=>{if(v)try{const e=await Ht.fN.getWorkComments(v);e.success?d(e.data):console.error("[WorkDetail] Failed to reload comments:",e.error)}catch(j){console.error("[WorkDetail] Error reloading comments:",j)}},clearComment:()=>{n("")}}},Wn=t=>{var r,a,o,s,n,i;let{state:l,setters:c}=t;const{goBack:d,navigateToArtist:u,navigateToWork:h}=_r(),m=(0,e.useCallback)(()=>{d()},[d]),p=(0,e.useCallback)(()=>{c.toggleLike()},[c]),g=(0,e.useCallback)(async(e,t,r)=>{console.log("[WorkDetail] Save toggle payload:",{itemType:e,itemId:t,shouldFavorite:r});try{const a=await Ht.zF.toggleFavorite(e,t,r);console.log("[WorkDetail] Save toggle result:",a),c.toggleSave()}catch(a){console.error("Failed to toggle favorite:",a)}},[c]),f=(0,e.useCallback)(async()=>{if(!l.comment.trim())return void console.warn("[WorkDetail] Comment is empty");const e=(0,ut.HW)();if(e)try{const r=await(0,Fr.Cs)(e.id),a=(null===r||void 0===r?void 0:r.name)||e.name,o=await Ht.fN.createComment(l.workData.id,e.id,a,l.comment.trim(),l.replyTo);if(o.success){if(console.log("[WorkDetail] Comment created successfully:",o.data),e.id!==l.workData.author.id)try{await Ht.lY.createCommentNotification(e.id,a,l.workData.id,l.workData.title,l.workData.author.id,l.comment.trim()),console.log("[WorkDetail] Comment notification created successfully")}catch(t){console.warn("[WorkDetail] Failed to create comment notification:",t)}c.setComment(""),c.setReplyTo(null),c.loadComments()}else console.error("[WorkDetail] Failed to create comment:",o.error)}catch(r){console.error("[WorkDetail] Error creating comment:",r)}else console.warn("[WorkDetail] No current user found")},[c,l.comment,null===(r=l.workData)||void 0===r?void 0:r.id,l.replyTo,null===(a=l.workData)||void 0===a||null===(o=a.author)||void 0===o?void 0:o.id,null===(s=l.workData)||void 0===s?void 0:s.title]),v=(0,e.useCallback)(async e=>{const t=(l.replyDrafts[e]||"").trim();if(!t)return;const r=(0,ut.HW)();if(!r)return void console.warn("[WorkDetail] No current user found for reply");const a=l.comments.find(t=>t.id===e);if(!a)return void console.warn("[WorkDetail] Parent comment not found");const o=await(0,Fr.Cs)(r.id),s=(null===o||void 0===o?void 0:o.name)||r.name,n=`tmp_${Date.now()}`,i={id:n,workId:a.workId,authorId:r.id,authorName:s,text:t,parentId:a.id,rootId:a.rootId||a.id,likes:0,replies:[],isDeleted:!1,createdAt:Date.now(),updatedAt:Date.now()};c.addCommentOptimistic(i);try{const o=await Ht.fN.createComment(a.workId,r.id,s,t,a.id);o.success?(c.replaceTempComment({tempId:n,saved:o.data}),c.setReplyDraft(e,""),c.cancelReply(),console.log("[WorkDetail] Reply submitted successfully")):(c.removeTempComment(n),console.error("[WorkDetail] Failed to submit reply:",o.error))}catch(d){c.removeTempComment(n),console.error("[WorkDetail] Error submitting reply:",d)}},[c,l.replyDrafts,l.comments]),x=(0,e.useCallback)(e=>{c.startReply(e)},[c]),b=(0,e.useCallback)(()=>{c.cancelReply()},[c]),y=(0,e.useCallback)((e,t)=>{c.setReplyDraft(e,t)},[c]),w=(0,e.useCallback)(e=>{c.setComment(e.target.value)},[c]),j=(0,e.useCallback)(()=>{var e,t;const r=null===(e=l.workData)||void 0===e||null===(t=e.author)||void 0===t?void 0:t.id;r?(console.log(`[WorkDetail] Navigating to artist: ${r}`),u(r,"gallery","Works")):console.warn("[WorkDetail] No author ID found for navigation")},[u,null===(n=l.workData)||void 0===n||null===(i=n.author)||void 0===i?void 0:i.id]),k=(0,e.useCallback)(e=>{u(e)},[u]),N=(0,e.useCallback)(e=>{e&&(console.log("[WorkDetail] Navigating to related work:",e),h(e))},[h]),C=(0,e.useCallback)(e=>{console.log("Image navigation:",e)},[]),S=(0,e.useCallback)(async e=>{const t=(0,ut.HW)();if(t)try{const r=await Ht.fN.likeComment(e,t.id);r.success?(console.log("[WorkDetail] Comment like toggled:",r.data),c.loadComments()):console.error("[WorkDetail] Failed to like comment:",r.error)}catch(r){console.error("[WorkDetail] Error liking comment:",r)}else console.warn("[WorkDetail] No current user found for comment like")},[c]),_=(0,e.useCallback)(e=>{c.setReplyTo(e),console.log("[WorkDetail] Reply to comment:",e)},[c]),E=(0,e.useCallback)(async e=>{const t=(0,ut.HW)();if(t)try{const r=await Ht.fN.deleteComment(e,t.id);r.success?(console.log("[WorkDetail] Comment deleted successfully"),c.loadComments()):console.error("[WorkDetail] Failed to delete comment:",r.error)}catch(r){console.error("[WorkDetail] Error deleting comment:",r)}else console.warn("[WorkDetail] No current user found for comment delete")},[c]);return{handleBackClick:m,handleAuthorClick:j,handleCommentUserClick:k,handleRelatedWorkClick:N,handleLikeClick:p,handleSaveClick:g,handleCommentSubmit:f,handleCommentChange:w,handleCommentLike:S,handleCommentReply:_,handleCommentDelete:E,handleCancelReply:b,handleImageNavigation:C,handleStartReply:x,handleSubmitReply:v,handleSetReplyDraft:y}},Bn="tag_artwork_views",qn="tag_user_fingerprint",Hn=()=>{let e=0;const t=[navigator.userAgent,navigator.language,screen.width+"x"+screen.height,(new Date).getTimezoneOffset()].join("|");for(let r=0;r<t.length;r++){e=(e<<5)-e+t.charCodeAt(r),e&=e}return Math.abs(e).toString(36)},Vn=()=>{try{const e=localStorage.getItem(Bn);return e?JSON.parse(e):{}}catch(e){return console.warn("Failed to get stored view data:",e),{}}},Gn=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const{userId:r=null,visitorFingerprint:a=null}=t;r&&a&&console.warn("[MockViewCount] Warning: Both userId and visitorFingerprint provided, using userId only");const o=Vn();o[e]||(o[e]={totalViews:0,userViews:[],visitorViews:[]});const s=o[e];let n=!1;return r?s.userViews.includes(r)?console.log(`[MockViewCount] User already viewed: ${r}`):(s.userViews.push(r),s.totalViews++,n=!0,console.log(`[MockViewCount] New user view recorded for user: ${r}`)):a?s.visitorViews.includes(a)?console.log(`[MockViewCount] Visitor already viewed: ${a}`):(s.visitorViews.push(a),s.totalViews++,n=!0,console.log(`[MockViewCount] New visitor view recorded for fingerprint: ${a}`)):console.warn("[MockViewCount] No userId or visitorFingerprint provided"),(e=>{try{localStorage.setItem(Bn,JSON.stringify(e))}catch(t){console.warn("Failed to save view data:",t)}})(o),console.log(`[MockViewCount] ${n?"New view recorded":"View already exists"} for artwork: ${e}`),{success:!0,viewCount:s.totalViews,isNewView:n}}catch(r){return console.error("[MockViewCount] Error recording view:",r),{success:!1,error:r.message}}},Jn=()=>(()=>{try{let e=localStorage.getItem(qn);return e||(e=Hn(),localStorage.setItem(qn,e)),e}catch(e){return console.warn("Failed to access localStorage for fingerprint:",e),Hn()}})();var Kn=r(979),Yn=r(32);const Zn=()=>{try{const e=document.createElement("canvas"),t=e.getContext("2d"),r=[navigator.userAgent,navigator.language,screen.width+"x"+screen.height,screen.colorDepth,(new Date).getTimezoneOffset(),navigator.hardwareConcurrency||"",navigator.deviceMemory||"",navigator.platform,navigator.cookieEnabled,navigator.doNotTrack||"",window.devicePixelRatio||"",navigator.maxTouchPoints||""];t.textBaseline="top",t.font="14px Arial",t.fillText("User fingerprint",2,2);const a=e.toDataURL();r.push(a);const o=r.join("|");return Qn(o)}catch(e){return console.warn("Failed to generate user fingerprint:",e),Qn(Date.now().toString()+Math.random().toString())}},Qn=e=>{let t=0;if(0===e.length)return t.toString();for(let r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t&=t}return Math.abs(t).toString(36)},Xn=()=>{const e="tag_user_fingerprint";try{let t=localStorage.getItem(e);return t||(t=Zn(),localStorage.setItem(e,t)),t}catch(t){return console.warn("Failed to access localStorage:",t),Zn()}},ei=function(t){const{user:r}=pt(),[a,o]=(0,e.useState)(0),[s,n]=(0,e.useState)(!1),[i,l]=(0,e.useState)(!1),c=!(null===r||void 0===r||!r.id),d=(0,e.useCallback)(async()=>{if(t)try{const e=await(0,Yn.BO)(),r=e?await(0,Kn.Tw)(t):await(async e=>{try{const t=Vn()[e];return{success:!0,viewCount:t?t.totalViews:0}}catch(t){return console.error("[MockViewCount] Error getting view count:",t),{success:!1,error:t.message}}})(t);r.success?(o(r.viewCount),console.log("[ViewCount] Refreshed view count:",r.viewCount,`(Mode: ${e?"Supabase":"Mock"})`)):console.error("[ViewCount] Failed to refresh view count:",r.error)}catch(e){console.error("[ViewCount] Error refreshing view count:",e)}},[t]),u=(0,e.useCallback)(async()=>{if(!t||s)return;const e=c?null===r||void 0===r?void 0:r.id:"visitor",a=`hasRecorded_${t}_${e}`;let i=!1;try{i="true"===localStorage.getItem(a)}catch(u){console.warn("[ViewCount] Failed to check recorded status:",u)}if(i)console.log(`[ViewCount] Already recorded for user: ${e} on artwork: ${t}`);else try{n(!0);const s=await(0,Yn.BO)(),i={userId:c?r.id:null,visitorFingerprint:c?null:s?Xn():Jn(),userAgent:navigator.userAgent};c?i.visitorFingerprint=null:i.userId=null,console.log("[ViewCount] Recording view for artwork:",t,i,`(Mode: ${s?"Supabase":"Mock"})`),console.log("[ViewCount] Current user info:",{isLoggedIn:c,userId:null===r||void 0===r?void 0:r.id,userName:null===r||void 0===r?void 0:r.name});const h=s?await(0,Kn.H9)(t,i):await Gn(t,i);if(h.success){o(h.viewCount),l(!0);try{localStorage.setItem(a,"true"),console.log(`[ViewCount] Saved recorded status for ${e} on ${t}`)}catch(u){console.warn("[ViewCount] Failed to save recorded status:",u)}console.log("[ViewCount] View recorded successfully, new count:",h.viewCount,`(Mode: ${s?"Supabase":"Mock"})`),s||(e=>{try{const t=Vn()[e];return t?(console.log(`[Debug] View stats for artwork: ${e}`),console.log(`  Total views: ${t.totalViews}`),console.log(`  User views: ${t.userViews.join(", ")}`),console.log(`  Visitor views: ${t.visitorViews.join(", ")}`),t):void console.log(`[Debug] No view data for artwork: ${e}`)}catch(u){console.error("[Debug] Error getting view stats:",u)}})(t),setTimeout(()=>{d()},100)}else console.error("[ViewCount] Failed to record view:",h.error)}catch(u){console.error("[ViewCount] Error recording view:",u)}finally{n(!1)}},[t,c,null===r||void 0===r?void 0:r.id,d,null===r||void 0===r?void 0:r.name,s]);return(0,e.useEffect)(()=>{t&&(d(),u())},[t,u,d]),(0,e.useEffect)(()=>{l(!1),n(!1)},[t,null===r||void 0===r?void 0:r.id]),{viewCount:a,isRecording:s,hasRecorded:i,recordView:u,refreshViewCount:d}},ti="tag_artwork_likes",ri=()=>{try{const e=localStorage.getItem(ti);return e?JSON.parse(e):{}}catch(e){return console.warn("Failed to get stored like data:",e),{}}},ai=async(e,t)=>{try{if(!e||!t)return{success:!1,error:"Missing artworkId or userId"};const r=ri();r[e]||(r[e]={totalLikes:0,userLikes:[]});const a=r[e],o=a.userLikes.indexOf(t);let s=!1;return-1===o?(a.userLikes.push(t),a.totalLikes++,s=!0,console.log(`[MockLike] User ${t} liked artwork ${e}`)):(a.userLikes.splice(o,1),a.totalLikes--,s=!1,console.log(`[MockLike] User ${t} unliked artwork ${e}`)),(e=>{try{localStorage.setItem(ti,JSON.stringify(e))}catch(t){console.warn("Failed to save like data:",t)}})(r),console.log(`[MockLike] Artwork ${e} total likes: ${a.totalLikes}`),{success:!0,data:{liked:s,likes:a.totalLikes}}}catch(r){return console.error("[MockLike] Error toggling like:",r),{success:!1,error:r.message}}},oi=function(t){var r;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const{user:s}=pt(),[n,i]=(0,e.useState)(a),[l,c]=(0,e.useState)(!1),[d,u]=(0,e.useState)(!1),h=!(null===s||void 0===s||!s.id),m=(0,e.useCallback)(async()=>{if(t&&h&&!d)try{u(!0),console.log("[LikeCount] Toggling like for artwork:",t,"User:",s.id);const a=await ai(t,s.id);if(a.success){if(i(a.data.likes),c(a.data.liked),console.log("[LikeCount] Like toggled successfully:",a.data.liked?"Liked":"Unliked","Total likes:",a.data.likes),a.data.liked&&o)try{var e;const r=await(0,ra.getProfile)(s.id),a=r.success&&r.data.fullName?r.data.fullName:s.name||s.username||"Unknown User";await Ht.lY.createLikeNotification(s.id,a,t,o.title||"Untitled",(null===(e=o.author)||void 0===e?void 0:e.id)||o.authorId),console.log("[LikeCount] Created like notification")}catch(r){console.error("[LikeCount] Failed to create like notification:",r)}(e=>{try{const t=ri()[e];return t?(console.log(`[Debug] Like stats for artwork: ${e}`),console.log(`  Total likes: ${t.totalLikes}`),console.log(`  User likes: ${t.userLikes.join(", ")}`),t):void console.log(`[Debug] No like data for artwork: ${e}`)}catch(r){console.error("[Debug] Error getting like stats:",r)}})(t)}else console.error("[LikeCount] Failed to toggle like:",a.error)}catch(r){console.error("[LikeCount] Error toggling like:",r)}finally{u(!1)}},[t,h,null===s||void 0===s?void 0:s.id,null===o||void 0===o?void 0:o.title,null===o||void 0===o||null===(r=o.author)||void 0===r?void 0:r.id,null===o||void 0===o?void 0:o.authorId,d,o]),p=(0,e.useCallback)(async()=>{if(t&&h)try{const e=await(async(e,t)=>{try{if(!e||!t)return{success:!1,error:"Missing artworkId or userId"};const r=ri()[e];return r?{success:!0,data:{liked:r.userLikes.includes(t),likes:r.totalLikes}}:{success:!0,data:{liked:!1,likes:0}}}catch(r){return console.error("[MockLike] Error checking like status:",r),{success:!1,error:r.message}}})(t,s.id);e.success?(i(e.data.likes),c(e.data.liked),console.log("[LikeCount] Refreshed like status:",e.data.liked?"Liked":"Not liked","Total likes:",e.data.likes)):console.error("[LikeCount] Failed to refresh like status:",e.error)}catch(e){console.error("[LikeCount] Error refreshing like status:",e)}},[t,h,null===s||void 0===s?void 0:s.id,null===s||void 0===s?void 0:s.name,null===s||void 0===s?void 0:s.username]),g=(0,e.useCallback)(async()=>{if(t)try{const e=await(async e=>{try{if(!e)return{success:!1,error:"Missing artworkId"};const t=ri()[e];return{success:!0,data:{likes:t?t.totalLikes:0}}}catch(t){return console.error("[MockLike] Error getting like count:",t),{success:!1,error:t.message}}})(t);e.success?(i(e.data.likes),console.log("[LikeCount] Refreshed like count:",e.data.likes)):console.error("[LikeCount] Failed to refresh like count:",e.error)}catch(e){console.error("[LikeCount] Error refreshing like count:",e)}},[t]);return(0,e.useEffect)(()=>{t&&h&&p()},[t,h,p]),(0,e.useEffect)(()=>{c(!1),u(!1)},[t,null===s||void 0===s?void 0:s.id]),{likeCount:n,isLiked:l,isToggling:d,toggleLike:m,refreshLikeStatus:p,refreshLikeCount:g}},si=t=>{const r=ee(),[a,o]=(0,e.useState)([]),[s,n]=(0,e.useState)(-1),[i,l]=(0,e.useState)(!0),[c,d]=(0,e.useState)(null),u=(0,e.useCallback)(async()=>{try{l(!0),d(null);const e=await Ht.Jb.getAllPublicWorks();if(e.success&&e.data){const r=e.data.sort((e,t)=>{const r=new Date(e.createdAt||e.date||0);return new Date(t.createdAt||t.date||0)-r});o(r);const a=r.findIndex(e=>e.id===t);n(a),console.log(`[WorkNavigation] Loaded ${r.length} works, current index: ${a}`)}else d("Failed to load works")}catch(e){console.error("[WorkNavigation] Error loading works:",e),d("Failed to load works")}finally{l(!1)}},[t]);(0,e.useEffect)(()=>{t&&u()},[t,u]);const h=(0,e.useCallback)(()=>{if(0===a.length||-1===s)return;let e;e=0===s?a.length-1:s-1;const t=a[e];t&&(console.log(`[WorkNavigation] Navigating to previous work: ${t.id}`),r(`/work/${t.id}`))},[a,s,r]),m=(0,e.useCallback)(()=>{if(0===a.length||-1===s)return;let e;e=s===a.length-1?0:s+1;const t=a[e];t&&(console.log(`[WorkNavigation] Navigating to next work: ${t.id}`),r(`/work/${t.id}`))},[a,s,r]);return(0,e.useEffect)(()=>{const e=e=>{"ArrowLeft"===e.key?(e.preventDefault(),h()):"ArrowRight"===e.key&&(e.preventDefault(),m())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[h,m]),{allWorks:a,currentIndex:s,loading:i,error:c,hasPrevious:a.length>0&&s>0,hasNext:a.length>0&&s<a.length-1,totalWorks:a.length,currentWorkNumber:s>=0?s+1:0,navigateToPrevious:h,navigateToNext:m,reloadWorks:u}},ni=function(t,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;const[o,s]=(0,e.useState)([]),[n,i]=(0,e.useState)(!0),[l,c]=(0,e.useState)(null),d=(0,e.useCallback)(async()=>{if(!t)return s([]),void i(!1);try{i(!0),c(null);const e=await Ht.Jb.getUserWorks(t);if(e.success&&e.data){const o=e.data.filter(e=>e.id!==r);if(0===o.length)return void s([]);const n=[...o].sort(()=>.5-Math.random()),i=n.slice(0,Math.min(a,o.length)).map(e=>({id:e.id,title:e.title||"Untitled",image:e.thumbnailPath||e.imagePaths&&e.imagePaths[0]||"",category:e.category||"Design"}));s(i),console.log(`[RelatedWorks] Loaded ${i.length} related works for artist ${t}`)}else c("Failed to load related works"),s([])}catch(e){console.error("[RelatedWorks] Error loading related works:",e),c("Failed to load related works"),s([])}finally{i(!1)}},[t,r,a]);return(0,e.useEffect)(()=>{d()},[d]),{relatedWorks:o,loading:n,error:l,reloadWorks:d}},ii=()=>{var e,t,r,a,o,s,n,i,l,c,d,u,h,m;const{state:p}=xr(),g=zn(),f=Wn({state:g,setters:{toggleLike:g.toggleLike,toggleSave:g.toggleSave,setComment:g.setComment,setReplyTo:g.setReplyTo,loadComments:g.loadComments,startReply:g.startReply,cancelReply:g.cancelReply,setReplyDraft:g.setReplyDraft,addCommentOptimistic:g.addCommentOptimistic,replaceTempComment:g.replaceTempComment,removeTempComment:g.removeTempComment}}),v=ei((null===(e=g.workData)||void 0===e?void 0:e.id)||null,(null===(t=g.workData)||void 0===t?void 0:t.views)||0),x=oi((null===(r=g.workData)||void 0===r?void 0:r.id)||null,(null===(a=g.workData)||void 0===a?void 0:a.likes)||0,g.workData||{}),b=aa((null===(o=g.workData)||void 0===o||null===(s=o.author)||void 0===s?void 0:s.id)||null,(null===(n=g.workData)||void 0===n||null===(i=n.author)||void 0===i?void 0:i.followers)||0),y=oa((null===(l=g.workData)||void 0===l||null===(c=l.author)||void 0===c?void 0:c.id)||null),w=si((null===(d=g.workData)||void 0===d?void 0:d.id)||null),j=ni((null===(u=g.workData)||void 0===u||null===(h=u.author)||void 0===h?void 0:h.id)||null,(null===(m=g.workData)||void 0===m?void 0:m.id)||null,4),k=(e=>{if(!e)return{isValid:!1,error:"Work data is null or undefined",fallbackData:Cn()};const t=["id","title","author"].filter(t=>!e[t]);return t.length>0?{isValid:!1,error:`Missing required fields: ${t.join(", ")}`,fallbackData:Cn()}:e.author&&"object"===typeof e.author?{isValid:!0,error:null,fallbackData:null}:{isValid:!1,error:"Author data is invalid",fallbackData:Cn()}})(g.workData),N=k.isValid?g.workData:k.fallbackData;return g.loading?(0,ht.jsx)(At,{}):g.error?(0,ht.jsx)("main",{className:"max-w-7xl mx-auto pt-4 px-4 bg-gray-50 min-h-screen",children:(0,ht.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,ht.jsxs)("div",{className:"text-center",children:[(0,ht.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Error"}),(0,ht.jsx)("p",{className:"text-gray-600 mb-4",children:g.error}),(0,ht.jsx)("button",{onClick:()=>window.history.back(),className:"px-4 py-2 bg-tag-blue text-white rounded-lg hover:bg-blue-600",children:"Go Back"})]})})}):g.workData?p.isLoading||!g.imagesLoaded?(0,ht.jsx)(At,{}):(0,ht.jsx)("main",{className:"max-w-7xl mx-auto pt-4 px-4 bg-gray-50 min-h-screen",children:(0,ht.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8 py-0",children:[(0,ht.jsxs)("div",{className:"flex-1",children:[(0,ht.jsx)(Pn,{workData:N,onBackClick:f.handleBackClick,onImageNavigation:f.handleImageNavigation,navigationState:w}),(0,ht.jsx)(Ln,{workData:{...N,views:v.viewCount,likes:x.likeCount},isLiked:x.isLiked,isSaved:g.saved,onLikeClick:x.toggleLike,onSaveClick:f.handleSaveClick}),(0,ht.jsx)($n,{comments:g.comments,comment:g.comment,onCommentChange:f.handleCommentChange,onCommentSubmit:f.handleCommentSubmit,onCommentUserClick:f.handleCommentUserClick,onCommentLike:f.handleCommentLike,onCommentReply:f.handleCommentReply,onCommentDelete:f.handleCommentDelete,replyingTo:g.replyingTo,replyDrafts:g.replyDrafts,onStartReply:f.handleStartReply,onCancelReply:f.handleCancelReply,onSetReplyDraft:f.handleSetReplyDraft,onSubmitReply:f.handleSubmitReply,replyTo:g.replyTo,onCancelReplyOld:f.handleCancelReply})]}),(0,ht.jsxs)("div",{className:"lg:w-80 flex-shrink-0",children:[(0,ht.jsx)(Fn,{author:{...N.author,following:y.followingCount},isFollowing:b.isFollowing,followersCount:b.followersCount,onAuthorClick:f.handleAuthorClick,onFollowClick:b.toggleFollow}),(0,ht.jsx)(On,{workData:N}),(0,ht.jsx)(Un,{relatedWorks:j.relatedWorks,authorName:N.author.name,onAuthorClick:f.handleAuthorClick,onWorkClick:f.handleRelatedWorkClick,loading:j.loading})]})]})}):(0,ht.jsx)("main",{className:"max-w-7xl mx-auto pt-4 px-4 bg-gray-50 min-h-screen",children:(0,ht.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,ht.jsxs)("div",{className:"text-center",children:[(0,ht.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Work Not Found"}),(0,ht.jsx)("p",{className:"text-gray-600 mb-4",children:"The requested work could not be found."}),(0,ht.jsx)("button",{onClick:()=>window.history.back(),className:"px-4 py-2 bg-tag-blue text-white rounded-lg hover:bg-blue-600",children:"Go Back"})]})})})},li=za("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),ci=za("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),di=za("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),ui=za("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),hi=za("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),mi=za("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]),pi=za("rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]),gi=za("pen-tool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),fi=za("box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),vi=za("gamepad",[["line",{x1:"6",x2:"10",y1:"12",y2:"12",key:"161bw2"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"15",x2:"15.01",y1:"13",y2:"13",key:"dqpgro"}],["line",{x1:"18",x2:"18.01",y1:"11",y2:"11",key:"meh2c"}],["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]]),xi=za("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),bi=za("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),yi=za("handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),wi=za("building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),ji=za("hammer",[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]]),ki=za("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Ni=za("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Ci={container:"CoFuture2025_container__ZK5Ze",hero:"CoFuture2025_hero__OU85u",heroContent:"CoFuture2025_heroContent__K38iO",title:"CoFuture2025_title__Ag7cX",titlePrefix:"CoFuture2025_titlePrefix__zCITE",gradientText:"CoFuture2025_gradientText__VpOpM",subtitle:"CoFuture2025_subtitle__SIZMK",primaryBtn:"CoFuture2025_primaryBtn__x4ztR",processStrip:"CoFuture2025_processStrip__6w4ED",step:"CoFuture2025_step__Bulkv",stepIcon:"CoFuture2025_stepIcon__cKdgR",stepText:"CoFuture2025_stepText__QeDUr",stepSeparator:"CoFuture2025_stepSeparator__3Vc4r",about:"CoFuture2025_about__tOwZV",aboutContent:"CoFuture2025_aboutContent__ix1Il",aboutTitle:"CoFuture2025_aboutTitle__6XfGp",aboutDescription:"CoFuture2025_aboutDescription__SfTCe",quote:"CoFuture2025_quote__0RS3l",features:"CoFuture2025_features__oE2az",feature:"CoFuture2025_feature__p9lyH",iconCircle:"CoFuture2025_iconCircle__9ooh7",iconBlue:"CoFuture2025_iconBlue__YtD2l",iconPurple:"CoFuture2025_iconPurple__VDYJy",iconBluePurple:"CoFuture2025_iconBluePurple__mhl+J",featureIcon:"CoFuture2025_featureIcon__lDobi",featureTitle:"CoFuture2025_featureTitle__7xMuY",featureDescription:"CoFuture2025_featureDescription__aaFJT",sectionTitle:"CoFuture2025_sectionTitle__fTNpT",tracks:"CoFuture2025_tracks__PyO0P",tracksContent:"CoFuture2025_tracksContent__iz1N0",tracksGrid:"CoFuture2025_tracksGrid__EfbsC",trackCard:"CoFuture2025_trackCard__Of4Cr",trackIcon:"CoFuture2025_trackIcon__Ay5dz",trackTitle:"CoFuture2025_trackTitle__Rvim7",trackDescription:"CoFuture2025_trackDescription__T3--3",trackButton:"CoFuture2025_trackButton__MZdfx",buttonBlue:"CoFuture2025_buttonBlue__3o30o",buttonPurple:"CoFuture2025_buttonPurple__2sr1U",buttonGreen:"CoFuture2025_buttonGreen__w8YvR",awards:"CoFuture2025_awards__82z4d",awardsContent:"CoFuture2025_awardsContent__hSWNC",awardsGrid:"CoFuture2025_awardsGrid__DpIMv",awardItem:"CoFuture2025_awardItem__C+hbd",awardIcon:"CoFuture2025_awardIcon__UcH+h",awardYellow:"CoFuture2025_awardYellow__hopvc",awardBlue:"CoFuture2025_awardBlue__ZDDyU",awardPurple:"CoFuture2025_awardPurple__AFTPo",awardGreen:"CoFuture2025_awardGreen__zmT2X",awardIconText:"CoFuture2025_awardIconText__ukZpZ",awardTitle:"CoFuture2025_awardTitle__zzPao",awardDescription:"CoFuture2025_awardDescription__4t7tg",howToJoin:"CoFuture2025_howToJoin__edHAM",howToJoinContent:"CoFuture2025_howToJoinContent__aOq0j",stepsGrid:"CoFuture2025_stepsGrid__gjajo",stepItem:"CoFuture2025_stepItem__KBZVQ",stepNumber:"CoFuture2025_stepNumber__NizGo",stepTitle:"CoFuture2025_stepTitle__yqtrb",stepDescription:"CoFuture2025_stepDescription__AyUIr",ctaContainer:"CoFuture2025_ctaContainer__XaGfV",ctaButton:"CoFuture2025_ctaButton__Ntg3q",timeline:"CoFuture2025_timeline__iqBiD",timelineContent:"CoFuture2025_timelineContent__lBrHt",timelineContainer:"CoFuture2025_timelineContainer__oU9V2",timelineEvent:"CoFuture2025_timelineEvent__MX89R",timelineIcon:"CoFuture2025_timelineIcon__e8uul",timelineDate:"CoFuture2025_timelineDate__QmZfI",timelineTitle:"CoFuture2025_timelineTitle__LpcpN",timelineLine:"CoFuture2025_timelineLine__Bxw3B",gallery:"CoFuture2025_gallery__cBNQg",galleryContent:"CoFuture2025_galleryContent__paSYN",galleryCard:"CoFuture2025_galleryCard__7nNio",galleryIcon:"CoFuture2025_galleryIcon__QY0Xa",galleryComingSoon:"CoFuture2025_galleryComingSoon__MYi6B",galleryDescription:"CoFuture2025_galleryDescription__XpeEq",faq:"CoFuture2025_faq__BjYt2",faqContent:"CoFuture2025_faqContent__geJNg",faqList:"CoFuture2025_faqList__SVbhC",faqItem:"CoFuture2025_faqItem__YPMrZ",faqQuestion:"CoFuture2025_faqQuestion__j4oT8",faqIcon:"CoFuture2025_faqIcon__pNQa5",faqIconRotated:"CoFuture2025_faqIconRotated__4QtS5",faqAnswer:"CoFuture2025_faqAnswer__y+MiQ"},Si={title:{prefix:"TAGMe:",main:"Co-Future"},subtitle:"Student Competitions 2025",button:{text:"Join the Challenge",href:"/tagme/co-future-2025#apply"},steps:[{icon:li,text:"Team Up"},{icon:ci,text:"Co-Create"},{icon:di,text:"Submit"},{icon:ui,text:"Celebrate"}],about:{title:"About Co-Future",description:"Co-Future is TAG's official global art competition, inviting creative students from all over the world to team up and design what the future could be \u2014 together.",quote:'"The future is designed together."',features:[{title:"Global Collaboration",description:"Connect with creative minds from around the world.",icon:hi,gradientClass:"iconBlue"},{title:"Cross-Disciplinary",description:"Blend 2D, 3D, interactive media, and storytelling.",icon:mi,gradientClass:"iconPurple"},{title:"Future-Focused",description:"Design innovative solutions for tomorrow's challenges.",icon:pi,gradientClass:"iconBluePurple"}]},tracks:{title:"Competition Tracks",items:[{title:"2D Visual Design",description:"Create stunning illustrations, graphics, and visual narratives that bring the future to life.",icon:gi,buttonText:"Explore Track",buttonColor:"blue"},{title:"3D Visual Design",description:"Build immersive 3D environments, characters, and objects that define tomorrow's world.",icon:fi,buttonText:"Explore Track",buttonColor:"purple"},{title:"Game & Interactive Media",description:"Design interactive experiences, games, and digital media that engage and inspire.",icon:vi,buttonText:"Explore Track",buttonColor:"green"}]},awards:{title:"Awards & Recognition",items:[{title:"Best Visual Presentation",description:"Outstanding aesthetic quality",icon:ui,gradientClass:"awardYellow"},{title:"Best Concept Development",description:"Innovative thinking and ideation",icon:ci,gradientClass:"awardBlue"},{title:"Best Technical Execution",description:"Superior craftsmanship and skill",icon:xi,gradientClass:"awardPurple"},{title:"Rising Star Award",description:"Outstanding emerging talent",icon:bi,gradientClass:"awardGreen"}]},howToJoin:{title:"How to Join",steps:[{number:"1",title:"Build or Join a Team",description:"Connect with collaborators via TAGMe platform",icon:li},{number:"2",title:"Choose a Track",description:"Select your preferred competition category",icon:mi},{number:"3",title:"Collaborate & Co-Create",description:"Work together to bring your vision to life",icon:yi},{number:"4",title:"Submit Your Work",description:"Upload before February 10 deadline",icon:di}],ctaButton:{text:"Start on TAGMe",href:"/tagme"}},timeline:{title:"Competition Timeline",events:[{date:"October",title:"Registration Opens",icon:wi},{date:"November \u2013 January",title:"Creation Phase",icon:ji},{date:"February 10",title:"Submission Deadline",icon:di},{date:"February 20",title:"Awards & Showcase",icon:ui}]},gallery:{title:"Submission Gallery",comingSoon:"Coming Soon",description:"This space will showcase the most inspiring submissions from each track. Check back during the creation phase to see amazing work from teams worldwide."},faq:{title:"Frequently Asked Questions",items:[{question:"Who can join?",answer:"Any student currently enrolled in an educational institution worldwide can participate."},{question:"Can I submit solo?",answer:"While we encourage collaboration, solo submissions are welcome in all tracks."},{question:"What file types are accepted?",answer:"We accept various formats including images, videos, interactive files, and project documentation."},{question:"Do I need specific software?",answer:"No, you can use any tools or software you prefer to create your submission."},{question:"How are awards judged?",answer:"Submissions are evaluated by industry professionals based on creativity, technical skill, and concept development."}]}},_i=()=>{const[t,r]=(0,e.useState)(null);return(0,ht.jsxs)("div",{className:Ci.container,children:[(0,ht.jsx)("section",{className:Ci.hero,children:(0,ht.jsxs)("div",{className:Ci.heroContent,children:[(0,ht.jsxs)("h1",{className:Ci.title,children:[(0,ht.jsx)("span",{className:Ci.titlePrefix,children:Si.title.prefix}),(0,ht.jsx)("span",{className:Ci.gradientText,children:Si.title.main})]}),(0,ht.jsx)("p",{className:Ci.subtitle,children:Si.subtitle}),(0,ht.jsx)("a",{href:Si.button.href,className:Ci.primaryBtn,"aria-label":"Join the Co-Future challenge",children:Si.button.text}),(0,ht.jsx)("div",{className:Ci.processStrip,"aria-label":"Competition process steps",children:Si.steps.map((t,r)=>(0,ht.jsxs)(e.Fragment,{children:[(0,ht.jsxs)("span",{className:Ci.step,children:[(0,ht.jsx)("span",{className:Ci.stepIcon,children:(0,ht.jsx)(t.icon,{size:18})}),(0,ht.jsx)("span",{className:Ci.stepText,children:t.text})]}),r<Si.steps.length-1&&(0,ht.jsx)("span",{className:Ci.stepSeparator,children:"\u2022"})]},t.text))})]})}),(0,ht.jsx)("section",{className:Ci.about,children:(0,ht.jsxs)("div",{className:Ci.aboutContent,children:[(0,ht.jsx)("h2",{className:Ci.aboutTitle,children:Si.about.title}),(0,ht.jsx)("p",{className:Ci.aboutDescription,children:Si.about.description}),(0,ht.jsx)("blockquote",{className:Ci.quote,children:Si.about.quote}),(0,ht.jsx)("div",{className:Ci.features,children:Si.about.features.map(e=>(0,ht.jsxs)("div",{className:Ci.feature,children:[(0,ht.jsx)("div",{className:`${Ci.iconCircle} ${Ci[e.gradientClass]}`,children:(0,ht.jsx)("span",{className:Ci.featureIcon,children:(0,ht.jsx)(e.icon,{size:32})})}),(0,ht.jsx)("h3",{className:Ci.featureTitle,children:e.title}),(0,ht.jsx)("p",{className:Ci.featureDescription,children:e.description})]},e.title))})]})}),(0,ht.jsx)("section",{className:Ci.tracks,children:(0,ht.jsxs)("div",{className:Ci.tracksContent,children:[(0,ht.jsx)("h2",{className:Ci.sectionTitle,children:Si.tracks.title}),(0,ht.jsx)("div",{className:Ci.tracksGrid,children:Si.tracks.items.map(e=>(0,ht.jsxs)("div",{className:Ci.trackCard,children:[(0,ht.jsx)("div",{className:Ci.trackIcon,children:(0,ht.jsx)(e.icon,{size:48})}),(0,ht.jsx)("h3",{className:Ci.trackTitle,children:e.title}),(0,ht.jsx)("p",{className:Ci.trackDescription,children:e.description}),(0,ht.jsx)("button",{className:`${Ci.trackButton} ${Ci[`button${e.buttonColor.charAt(0).toUpperCase()+e.buttonColor.slice(1)}`]}`,children:e.buttonText})]},e.title))})]})}),(0,ht.jsx)("section",{className:Ci.awards,children:(0,ht.jsxs)("div",{className:Ci.awardsContent,children:[(0,ht.jsx)("h2",{className:Ci.sectionTitle,children:Si.awards.title}),(0,ht.jsx)("div",{className:Ci.awardsGrid,children:Si.awards.items.map(e=>(0,ht.jsxs)("div",{className:Ci.awardItem,children:[(0,ht.jsx)("div",{className:`${Ci.awardIcon} ${Ci[e.gradientClass]}`,children:(0,ht.jsx)("span",{className:Ci.awardIconText,children:(0,ht.jsx)(e.icon,{size:24})})}),(0,ht.jsx)("h3",{className:Ci.awardTitle,children:e.title}),(0,ht.jsx)("p",{className:Ci.awardDescription,children:e.description})]},e.title))})]})}),(0,ht.jsx)("section",{className:Ci.howToJoin,children:(0,ht.jsxs)("div",{className:Ci.howToJoinContent,children:[(0,ht.jsx)("h2",{className:Ci.sectionTitle,children:Si.howToJoin.title}),(0,ht.jsx)("div",{className:Ci.stepsGrid,children:Si.howToJoin.steps.map(e=>(0,ht.jsxs)("div",{className:Ci.stepItem,children:[(0,ht.jsx)("div",{className:Ci.stepNumber,children:(0,ht.jsx)(e.icon,{size:20})}),(0,ht.jsx)("h3",{className:Ci.stepTitle,children:e.title}),(0,ht.jsx)("p",{className:Ci.stepDescription,children:e.description})]},e.number))}),(0,ht.jsx)("div",{className:Ci.ctaContainer,children:(0,ht.jsx)("a",{href:Si.howToJoin.ctaButton.href,className:Ci.ctaButton,children:Si.howToJoin.ctaButton.text})})]})}),(0,ht.jsx)("section",{className:Ci.timeline,children:(0,ht.jsxs)("div",{className:Ci.timelineContent,children:[(0,ht.jsx)("h2",{className:Ci.sectionTitle,children:Si.timeline.title}),(0,ht.jsx)("div",{className:Ci.timelineContainer,children:Si.timeline.events.map((e,t)=>(0,ht.jsxs)("div",{className:Ci.timelineEvent,children:[(0,ht.jsx)("div",{className:Ci.timelineIcon,children:(0,ht.jsx)(e.icon,{size:24})}),(0,ht.jsxs)("div",{className:Ci.timelineContent,children:[(0,ht.jsx)("div",{className:Ci.timelineDate,children:e.date}),(0,ht.jsx)("div",{className:Ci.timelineTitle,children:e.title})]}),t<Si.timeline.events.length-1&&(0,ht.jsx)("div",{className:Ci.timelineLine})]},e.date))})]})}),(0,ht.jsx)("section",{className:Ci.gallery,children:(0,ht.jsxs)("div",{className:Ci.galleryContent,children:[(0,ht.jsx)("h2",{className:Ci.sectionTitle,children:Si.gallery.title}),(0,ht.jsxs)("div",{className:Ci.galleryCard,children:[(0,ht.jsx)("div",{className:Ci.galleryIcon,children:(0,ht.jsx)(ki,{size:64})}),(0,ht.jsx)("h3",{className:Ci.galleryComingSoon,children:Si.gallery.comingSoon}),(0,ht.jsx)("p",{className:Ci.galleryDescription,children:Si.gallery.description})]})]})}),(0,ht.jsx)("section",{className:Ci.faq,children:(0,ht.jsxs)("div",{className:Ci.faqContent,children:[(0,ht.jsx)("h2",{className:Ci.sectionTitle,children:Si.faq.title}),(0,ht.jsx)("div",{className:Ci.faqList,children:Si.faq.items.map((e,a)=>(0,ht.jsxs)("div",{className:Ci.faqItem,children:[(0,ht.jsxs)("button",{className:Ci.faqQuestion,onClick:()=>(e=>{r(t===e?null:e)})(a),"aria-expanded":t===a,children:[(0,ht.jsx)("span",{children:e.question}),(0,ht.jsx)(Ni,{size:20,className:`${Ci.faqIcon} ${t===a?Ci.faqIconRotated:""}`})]}),t===a&&(0,ht.jsx)("div",{className:Ci.faqAnswer,children:(0,ht.jsx)("p",{children:e.answer})})]},a))})]})})]})},Ei=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var t;const{majors:a=[],software:o=[],sortBy:s="latest",limit:n=12,cursor:i=null}=e;console.log("[majorService] Filtering by:",{majors:a,software:o,sortBy:s});const l=[],c=["alice","bryan","alex"];for(const e of c)try{const t=await(0,Dr.ep)(e);if(t.success&&t.data){const r=await(0,Fr.Cs)(e),a=t.data.map(t=>({...t,author:{id:(null===r||void 0===r?void 0:r.id)||e,name:(null===r||void 0===r?void 0:r.name)||e,majors:(null===r||void 0===r?void 0:r.majors)||[],minors:(null===r||void 0===r?void 0:r.minors)||[]}}));l.push(...a)}}catch(r){console.warn(`[majorService] Failed to get works for artist ${e}:`,r)}let d=l;a.length>0&&(d=d.filter(e=>{const t=[...e.author.majors||[],...e.author.minors||[]];return a.every(e=>t.some(t=>t.toLowerCase()===e.toLowerCase()))})),o.length>0&&(d=d.filter(e=>{const t=e.tags||[];return o.every(e=>t.some(t=>t.toLowerCase().includes(e.toLowerCase())))})),("latest"===s||"popular"===s)&&d.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt));let u=0;if(i){u=d.findIndex(e=>e.id===i)+1}const h=u+n,m=d.slice(u,h),p=m.map(e=>({id:e.id,title:e.title,image:e.thumbnailPath||e.imagePaths&&e.imagePaths[0]||"/assets/placeholder.svg",author:e.author,category:e.category,tags:e.tags||[],description:e.description,createdAt:e.createdAt})),g=h<d.length,f=g?null===(t=m[m.length-1])||void 0===t?void 0:t.id:null;return console.log(`[majorService] Found ${d.length} works, returning ${p.length}`),{items:p,cursor:f,hasMore:g,total:d.length}}catch(r){throw console.error("[majorService] Error getting works by major:",r),r}},Pi=()=>{var t,r;const[a]=it(),[o,s]=(ee(),(0,e.useState)([])),[n,i]=(0,e.useState)(!0),[l,c]=(0,e.useState)(null),[d,u]=(0,e.useState)(!0),[h,m]=(0,e.useState)(null),p=(null===(t=a.get("categories"))||void 0===t?void 0:t.split(","))||[],g=(null===(r=a.get("software"))||void 0===r?void 0:r.split(","))||[],f=a.get("sort")||"latest",v=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{i(!0);const t=await Ei({majors:p,software:g,sortBy:f,limit:12,cursor:e});s(e?e=>[...e,...t.items]:t.items),m(t.cursor),u(t.hasMore),c(null)}catch(l){console.error("Error loading works by major:",l),c("Failed to load works")}finally{i(!1)}};(0,e.useEffect)(()=>{v()},[p.join(","),g.join(","),f]);return n&&0===o.length?(0,ht.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,ht.jsxs)("div",{className:"text-center",children:[(0,ht.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,ht.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading works..."})]})}):l&&0===o.length?(0,ht.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,ht.jsxs)("div",{className:"text-center",children:[(0,ht.jsx)("div",{className:"text-red-600 text-lg font-semibold mb-2",children:"Error"}),(0,ht.jsx)("p",{className:"text-gray-600 mb-4",children:l}),(0,ht.jsx)("button",{onClick:()=>v(),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Try Again"})]})}):(0,ht.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ht.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,ht.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,ht.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ht.jsxs)("div",{children:[(0,ht.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:(()=>{if(0===p.length&&0===g.length)return"All Works";const e=[];return p.length>0&&e.push(`Major: ${p.join(", ")}`),g.length>0&&e.push(`Software: ${g.join(", ")}`),e.join(" | ")})()}),(0,ht.jsx)("p",{className:"text-gray-600 mt-2",children:0===o.length?"0 works":1===o.length?"1 work":`${o.length} works`}),(p.length>0||g.length>0)&&(0,ht.jsxs)("div",{className:"flex flex-wrap gap-2 mt-3",children:[p.map(e=>(0,ht.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e},e)),g.map(e=>(0,ht.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:e},e))]})]}),(0,ht.jsxs)("button",{onClick:()=>window.history.back(),className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[(0,ht.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back"]})]})})}),(0,ht.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:0===o.length?(0,ht.jsxs)("div",{className:"text-center py-12",children:[(0,ht.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"\ud83c\udfa8"}),(0,ht.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No works found"}),(0,ht.jsx)("p",{className:"text-gray-600",children:"No works match the selected criteria. Try adjusting your filters."})]}):(0,ht.jsxs)(ht.Fragment,{children:[(0,ht.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:o.map(e=>(0,ht.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow cursor-pointer",onClick:()=>window.open(`/work/${e.id}`,"_blank"),children:[(0,ht.jsx)("div",{className:"aspect-w-16 aspect-h-9 bg-gray-200 rounded-t-lg",children:(0,ht.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-48 object-cover rounded-t-lg",onError:e=>{e.target.src="/assets/placeholder.svg"}})}),(0,ht.jsxs)("div",{className:"p-4",children:[(0,ht.jsx)("h3",{className:"font-medium text-gray-900 truncate",children:e.title}),(0,ht.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["by ",e.author.name]}),e.author.majors&&e.author.majors.length>0&&(0,ht.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:e.author.majors.slice(0,2).map(e=>(0,ht.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:e},e))})]})]},e.id))}),d&&(0,ht.jsx)("div",{className:"text-center mt-8",children:(0,ht.jsx)("button",{onClick:()=>{d&&v(h)},disabled:n,className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors duration-200",children:n?"Loading...":"Load More Works"})})]})})]})},Ii="EditProfile_container__IkubN",Ai="EditProfile_header__K3AJ7",Ti="EditProfile_headerLeft__Cf4sl",Li="EditProfile_backButton__mrj22",Di="EditProfile_backIcon__CFjC9",Mi="EditProfile_pageTitle__C2f+e",Ri="EditProfile_headerRight__RhuX-",$i="EditProfile_cancelButton__2s1x1",Fi="EditProfile_saveButton__Wayap",Oi="EditProfile_successMessage__npX8G",Ui="EditProfile_successIcon__ezwUa",zi="EditProfile_grid__mrd1a",Wi="EditProfile_leftCol__iTTBq",Bi="EditProfile_rightCol__Tgyti",qi="EditProfile_card__JLxMq",Hi="EditProfile_cardTitle__gOJEN",Vi="EditProfile_avatarSection__SBCYc",Gi="EditProfile_avatarContainer__JGWTL",Ji="EditProfile_avatar__JfBVT",Ki="EditProfile_avatarActions__fhG0j",Yi="EditProfile_changePhotoButton__Uvyeb",Zi="EditProfile_cameraIcon__nPnd3",Qi="EditProfile_formField__-xQhQ",Xi="EditProfile_basicInfoGrid__L8Uqd",el="EditProfile_fullRow__gMTKI",tl="EditProfile_bioTextarea__26OTA",rl="EditProfile_inputError__h+bTv",al="EditProfile_bioFooter__9rTtO",ol="EditProfile_label__Dt+aP",sl="EditProfile_input__rW7WI",nl="EditProfile_textarea__9NKl2",il="EditProfile_errorMessage__jReZa",ll="EditProfile_charCount__uvzqh",cl="EditProfile_charCountWarning__HnCvV",dl="EditProfile_socialInputContainer__BgFPk",ul="EditProfile_socialIconContainer__hkUKi",hl="EditProfile_socialIcon__Cq5Cj",ml="EditProfile_socialInput__lAUZL",pl="EditProfile_socialLinksContainer__0h9be",gl="EditProfile_socialSection__zbU2v",fl="EditProfile_sectionHeader__wX01L",vl="EditProfile_sectionTitle__qY0N6",xl="EditProfile_otherLinksList__cM-3T",bl="EditProfile_otherLinkRow__IK+VN",yl="EditProfile_otherLinkInfo__XvxYR",wl="EditProfile_otherLinkLabel__vKKtD",jl="EditProfile_otherLinkUrl__eu-3g",kl="EditProfile_removeLinkButton__Ytti9",Nl="EditProfile_addLinkSection__GQNZW",Cl="EditProfile_addLinkRow__okDDd",Sl="EditProfile_addLinkInputGroup__9pboc",_l="EditProfile_addLinkInput__qcDkf",El="EditProfile_addLinkButton__+80nZ",Pl="EditProfile_suggestions__6dQob",Il="EditProfile_suggestionButton__4FsVN",Al="EditProfile_maxLinksMessage__qadHX",Tl="EditProfile_skillsContainer__zTdNo",Ll="EditProfile_skillsList__CqxMp",Dl="EditProfile_skillTag__BYLvV",Ml="EditProfile_skillText__KF2Mn",Rl="EditProfile_removeSkillButton__QgK83",$l="EditProfile_removeIcon__0wB4r",Fl="EditProfile_addSkillContainer__TWSXM",Ol="EditProfile_addSkillInputGroup__GPOwF",Ul="EditProfile_addSkillInput__3vkFF",zl="EditProfile_addSkillButton__Y-e-W",Wl="EditProfile_addIcon__LK-oP",Bl="EditProfile_helpText__QLYpo",ql="EditProfile_majorsContainer__y+v-i",Hl="EditProfile_majorsList__nro4w",Vl="EditProfile_majorTag__+62bm",Gl="EditProfile_majorText__1NwOV",Jl="EditProfile_removeMajorButton__-0lfq",Kl="EditProfile_addMajorContainer__7hcG6",Yl="EditProfile_uploadArea__RBBIb",Zl="EditProfile_uploadAreaClickable__UhlWL",Ql="EditProfile_uploadIcon__Uu4Do",Xl="EditProfile_uploadText__DyRAA",ec="EditProfile_uploadSubtext__Vv8hF",tc="EditProfile_chooseFilesButton__RdltH",rc="EditProfile_publicNotice__D7tuk",ac="EditProfile_publicIcon__KSjhS",oc="EditProfile_portfolioGrid__Nxc06",sc="EditProfile_portfolioItem__G9AjO",nc="EditProfile_portfolioImageContainer__Yc1la",ic="EditProfile_portfolioImage__EdMj7",lc="EditProfile_publicBadge__vDOWI",cc="EditProfile_modalOverlay__zOlaL",dc="EditProfile_modal__V5yfn",uc="EditProfile_modalHeader__8WA4B",hc="EditProfile_modalTitle__8dRQl",mc="EditProfile_modalContent__wpgwQ",pc="EditProfile_modalWarning__RRbh8",gc="EditProfile_modalActions__0ErUX",fc="EditProfile_modalCancelButton__MY1ND",vc="EditProfile_modalDeleteButton__NrN69",xc="EditProfile_portfolioOverlay__wHCNS",bc="EditProfile_visibilityButton__a-Mcb",yc="EditProfile_removeButton__hTjYd",wc="EditProfile_public__jweuU",jc="EditProfile_private__VNZqB",kc="EditProfile_editButton__4V9ef",Nc="EditProfile_portfolioStatus__+zH7y",Cc="EditProfile_statusBadge__DdUpb",Sc="EditProfile_privateBadge__a2mPn",_c="EditProfile_portfolioInfo__Yzmbj",Ec="EditProfile_portfolioTitle__5mStV",Pc="EditProfile_emptyState__BytyE",Ic="EditProfile_emptyIcon__cIyOv",Ac="EditProfile_emptyText__c+EDW",Tc="EditProfile_emptySubtext__n3em7",Lc="EditProfile_portfolioModalContent__xcTAE",Dc="EditProfile_portfolioModalHeader__LC6BZ",Mc="EditProfile_portfolioCloseButton__IXIC-",Rc="EditProfile_portfolioModalBody__w5jQ-",$c="EditProfile_formGroup__Y521H",Fc="EditProfile_required__zObno",Oc="EditProfile_error__VwHJg",Uc="EditProfile_errorText__kwONd",zc="EditProfile_portfolioModalFooter__-6agc",Wc=["Accessory Design","Acting","Advertising","Animation","Architecture","Art History","Creative Business Leadership","Fashion Design","Fibers","Film","Film/Television","Fine Art","Game/ITGM","Graphic Design","Industrial Design","Illustration","Interior Design","Jewelry","Motion Design","Painting","Photography","Service Design","Sequential Art","UI/UX","Visual Effects"],Bc=t=>{let{onAddMajor:r,disabled:a=!1}=t;const[o,s]=(0,e.useState)(""),[n,i]=(0,e.useState)(!1),[l,c]=(0,e.useState)([]),[d,u]=(0,e.useState)(-1),[h,m]=(0,e.useState)(""),p=(0,e.useRef)(null),g=(0,e.useRef)(null);(0,e.useEffect)(()=>{if(o.trim()){const e=Wc.filter(e=>e.toLowerCase().includes(o.toLowerCase()));c(e)}else c(Wc);u(-1)},[o]);const f=e=>{s(e),i(!1),u(-1),r(e)},v=()=>{const e=o.trim();if(!e)return void m("Please enter a major or minor");const t=Wc.find(t=>t.toLowerCase()===e.toLowerCase());t?(r(t),s(""),m(""),i(!1)):m("Please select a valid major or minor from the list")};return(0,e.useEffect)(()=>{const e=e=>{g.current&&!g.current.contains(e.target)&&p.current&&!p.current.contains(e.target)&&(i(!1),u(-1))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,ht.jsxs)("div",{className:"relative",children:[(0,ht.jsxs)("div",{className:"flex gap-2",children:[(0,ht.jsxs)("div",{className:"relative flex-1",children:[(0,ht.jsx)("input",{ref:p,type:"text",value:o,onChange:e=>{const t=e.target.value;s(t),m(""),i(!0)},onKeyDown:e=>{"ArrowDown"===e.key?(e.preventDefault(),u(e=>e<l.length-1?e+1:0)):"ArrowUp"===e.key?(e.preventDefault(),u(e=>e>0?e-1:l.length-1)):"Enter"===e.key?(e.preventDefault(),d>=0&&d<l.length?f(l[d]):o.trim()&&v()):"Escape"===e.key&&(i(!1),u(-1))},onFocus:()=>i(!0),placeholder:"Type to search majors...",disabled:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 disabled:bg-gray-100 disabled:cursor-not-allowed"}),(0,ht.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,ht.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}),n&&l.length>0&&(0,ht.jsx)("div",{ref:g,className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:l.map((e,t)=>(0,ht.jsx)("div",{className:"px-3 py-2 cursor-pointer hover:bg-purple-50 "+(t===d?"bg-purple-100":""),onClick:()=>f(e),children:e},e))})]}),(0,ht.jsx)("button",{type:"button",onClick:v,disabled:!o.trim()||a,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-1 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors duration-200",children:(0,ht.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]}),h&&(0,ht.jsx)("div",{className:"mt-1 text-sm text-red-600",children:h}),(0,ht.jsx)("div",{className:"mt-1 text-xs text-gray-500",children:"Type to search and select from the list. Maximum 3 majors & minors."})]})},qc=t=>{var r,a;let{data:o,onChange:s,onMajorsChange:n,onMinorsChange:i,errors:l}=t;const c=(e,t)=>{s(e,t)},d=(0,e.useCallback)(e=>{const t=e.toLowerCase();if([...o.majors||[],...o.minors||[]].some(e=>e.toLowerCase()===t))return;const r=o.majors||[],a=o.minors||[];if(r.length<3){const t=[...r,e];n(t)}else if(a.length<3){const t=[...a,e];i(t)}},[o.majors,o.minors,n,i]),u=(0,e.useCallback)(e=>{const t=(o.majors||[]).filter(t=>t!==e);n(t)},[o.majors,n]),h=(0,e.useCallback)(e=>{const t=(o.minors||[]).filter(t=>t!==e);i(t)},[o.minors,i]);return(0,ht.jsxs)("div",{className:qi,children:[(0,ht.jsx)("h3",{className:Hi,children:"Basic Information"}),(0,ht.jsxs)("div",{className:Xi,children:[(0,ht.jsxs)("div",{className:Qi,children:[(0,ht.jsx)("label",{htmlFor:"fullName",className:ol,children:"Full Name *"}),(0,ht.jsx)("input",{id:"fullName",type:"text",value:o.fullName,onChange:e=>c("fullName",e.target.value),className:`${sl} ${l.fullName?rl:""}`,placeholder:"Enter your full name","aria-describedby":l.fullName?"fullName-error":void 0}),l.fullName&&(0,ht.jsx)("div",{id:"fullName-error",className:il,children:l.fullName})]}),(0,ht.jsxs)("div",{className:Qi,children:[(0,ht.jsx)("label",{htmlFor:"title",className:ol,children:"Title"}),(0,ht.jsx)("input",{id:"title",type:"text",value:o.title,onChange:e=>c("title",e.target.value),className:sl,placeholder:"e.g., Visual Designer, UI/UX Designer"})]}),(0,ht.jsxs)("div",{className:Qi,children:[(0,ht.jsx)("label",{htmlFor:"school",className:ol,children:"School"}),(0,ht.jsx)("input",{id:"school",type:"text",value:o.school,onChange:e=>c("school",e.target.value),className:sl,placeholder:"e.g., Art Institute of Chicago, Parsons School of Design"})]}),(0,ht.jsxs)("div",{className:Qi,children:[(0,ht.jsx)("label",{htmlFor:"pronouns",className:ol,children:"Pronouns"}),(0,ht.jsx)("input",{id:"pronouns",type:"text",value:o.pronouns,onChange:e=>c("pronouns",e.target.value),className:sl,placeholder:"e.g., she/her, they/them, he/him"})]}),(0,ht.jsxs)("div",{className:el,children:[(0,ht.jsx)("label",{className:ol,children:"Major & Minor"}),(0,ht.jsxs)("div",{className:ql,children:[(0,ht.jsxs)("div",{className:Hl,children:[null===(r=o.majors)||void 0===r?void 0:r.map((e,t)=>(0,ht.jsxs)("div",{className:Vl,children:[(0,ht.jsx)("span",{className:Gl,children:e}),(0,ht.jsx)("button",{type:"button",onClick:()=>u(e),className:Jl,"aria-label":`Remove ${e} major`,children:(0,ht.jsx)("svg",{className:$l,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},`major-${t}`)),null===(a=o.minors)||void 0===a?void 0:a.map((e,t)=>(0,ht.jsxs)("div",{className:Vl,children:[(0,ht.jsx)("span",{className:Gl,children:e}),(0,ht.jsx)("button",{type:"button",onClick:()=>h(e),className:Jl,"aria-label":`Remove ${e} minor`,children:(0,ht.jsx)("svg",{className:$l,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},`minor-${t}`))]}),(0,ht.jsx)("div",{className:Kl,children:(0,ht.jsx)(Bc,{onAddMajor:d,disabled:!1})})]})]}),(0,ht.jsxs)("div",{className:el,children:[(0,ht.jsx)("label",{htmlFor:"bio",className:ol,children:"About"}),(0,ht.jsx)("textarea",{id:"bio",value:o.bio,onChange:e=>c("bio",e.target.value),className:`${tl} ${l.bio?rl:""}`,placeholder:"Tell us about yourself...",rows:4,maxLength:280,"aria-describedby":l.bio?"bio-error":"bio-counter"}),(0,ht.jsxs)("div",{className:al,children:[(0,ht.jsxs)("div",{id:"bio-counter",className:`${ll} ${o.bio.length>250?cl:""}`,children:[o.bio.length,"/280"]}),l.bio&&(0,ht.jsx)("div",{id:"bio-error",className:il,children:l.bio})]})]})]})]})},Hc=t=>{let{isOpen:r,onClose:a,onSave:o,initialData:s={},fileName:n=""}=t;const[i,l]=(0,e.useState)({title:"",description:"",software:[],tags:[]}),[c,d]=(0,e.useState)({});(0,e.useEffect)(()=>{if(r){const e=n.replace(/\.[^/.]+$/,"")||"";l({title:s.title||e,description:s.description||"",software:Array.isArray(s.software)?s.software:[],tags:Array.isArray(s.tags)?s.tags:[]}),d({})}},[r,n,s]);const u=(e,t)=>{l(r=>({...r,[e]:t})),c[e]&&d(t=>({...t,[e]:""}))},h=()=>{a()};return r?(0,ht.jsx)("div",{className:cc,children:(0,ht.jsxs)("div",{className:Lc,children:[(0,ht.jsxs)("div",{className:Dc,children:[(0,ht.jsx)("h2",{children:"Edit Portfolio Item"}),(0,ht.jsx)("button",{type:"button",className:Mc,onClick:h,children:"\xd7"})]}),(0,ht.jsxs)("div",{className:Rc,children:[(0,ht.jsxs)("div",{className:$c,children:[(0,ht.jsxs)("label",{htmlFor:"title",className:ol,children:["Title ",(0,ht.jsx)("span",{className:Fc,children:"*"})]}),(0,ht.jsx)("input",{type:"text",id:"title",value:i.title,onChange:e=>u("title",e.target.value),className:`${sl} ${c.title?Oc:""}`,placeholder:"Enter your artwork title"}),c.title&&(0,ht.jsx)("span",{className:Uc,children:c.title})]}),(0,ht.jsxs)("div",{className:$c,children:[(0,ht.jsx)("label",{htmlFor:"description",className:ol,children:"Description"}),(0,ht.jsx)("textarea",{id:"description",value:i.description,onChange:e=>u("description",e.target.value),className:nl,placeholder:"Describe your artwork, concept, or inspiration...",rows:4})]})]}),(0,ht.jsxs)("div",{className:zc,children:[(0,ht.jsx)("button",{type:"button",className:$i,onClick:h,children:"Cancel"}),(0,ht.jsx)("button",{type:"button",className:Fi,onClick:()=>{(()=>{const e={};return i.title.trim()||(e.title="Title is required"),d(e),0===Object.keys(e).length})()&&(o(i),a())},children:"Save"})]})]})}):null},Vc=t=>{let{items:a,onChange:o,onDelete:s,onToggleVisibility:n}=t;const[i,l]=(0,e.useState)({isOpen:!1,itemId:null,itemTitle:""}),[c,d]=(0,e.useState)({isOpen:!1,itemId:null,itemData:null}),u=()=>{l({isOpen:!1,itemId:null,itemTitle:""})},h=()=>{d({isOpen:!1,itemId:null,itemData:null})};return(0,ht.jsxs)("div",{className:qi,children:[(0,ht.jsx)("h3",{className:Hi,children:"Portfolio"}),0===a.length?(0,ht.jsxs)("div",{className:Pc,children:[(0,ht.jsx)("div",{className:Ic,children:(0,ht.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[(0,ht.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,ht.jsx)("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),(0,ht.jsx)("polyline",{points:"21,15 16,10 5,21"})]})}),(0,ht.jsx)("p",{className:Ac,children:"No works uploaded yet"}),(0,ht.jsx)("p",{className:Tc,children:"Upload your first work to start building your portfolio"})]}):(0,ht.jsx)("div",{className:oc,children:a.map(e=>(0,ht.jsxs)("div",{className:sc,children:[(0,ht.jsxs)("div",{className:nc,children:[(0,ht.jsx)("img",{src:e.image,alt:e.title,className:ic}),(0,ht.jsxs)("div",{className:xc,children:[(0,ht.jsx)("button",{type:"button",onClick:()=>(e=>{let t=[],r=[];e.tags&&Array.isArray(e.tags)&&(t=e.tags.filter(e=>["Photoshop","Illustrator","Blender","Maya","3ds Max","Cinema 4D","After Effects","Premiere Pro","Figma","Sketch","Procreate","ZBrush","Substance Painter","Unity","Unreal Engine"].includes(e)),r=e.tags.filter(e=>e.startsWith("@"))),d({isOpen:!0,itemId:e.id,itemData:{title:e.title||"",description:e.description||"",software:t,tags:r}})})(e),className:kc,title:"Edit work details",children:(0,ht.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,ht.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})}),(0,ht.jsx)("button",{type:"button",onClick:()=>(e=>{const t=a.find(t=>t.id===e);if(t&&n)n(e,t.isPublic);else{const t=a.map(t=>t.id===e?{...t,isPublic:!t.isPublic}:t);o(t)}})(e.id),className:`${bc} ${e.isPublic?wc:jc}`,title:e.isPublic?"Make Private":"Make Public",children:e.isPublic?(0,ht.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,ht.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})}):(0,ht.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,ht.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"})})}),(0,ht.jsx)("button",{type:"button",onClick:()=>{return t=e.id,r=e.title,void l({isOpen:!0,itemId:t,itemTitle:r});var t,r},className:yc,title:"Remove from portfolio",children:(0,ht.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,ht.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})})]}),(0,ht.jsx)("div",{className:Nc,children:(0,ht.jsx)("span",{className:`${Cc} ${e.isPublic?lc:Sc}`,children:e.isPublic?"Public":"Private"})})]}),(0,ht.jsx)("div",{className:_c,children:(0,ht.jsx)("h4",{className:Ec,children:e.title})})]},e.id))}),i.isOpen&&(0,ht.jsx)("div",{className:cc,onClick:u,children:(0,ht.jsxs)("div",{className:dc,onClick:e=>e.stopPropagation(),children:[(0,ht.jsx)("div",{className:uc,children:(0,ht.jsx)("h3",{className:hc,children:"Delete Work"})}),(0,ht.jsxs)("div",{className:mc,children:[(0,ht.jsxs)("p",{children:["Are you sure you want to delete"," ",(0,ht.jsxs)("strong",{children:['"',i.itemTitle,'"']})," from your portfolio?"]}),(0,ht.jsx)("p",{className:pc,children:"This action cannot be undone."})]}),(0,ht.jsxs)("div",{className:gc,children:[(0,ht.jsx)("button",{type:"button",onClick:u,className:fc,children:"Cancel"}),(0,ht.jsx)("button",{type:"button",onClick:()=>{if(i.itemId){if(s)s(i.itemId);else{const e=a.filter(e=>e.id!==i.itemId);o(e)}u()}},className:vc,children:"Delete"})]})]})}),(0,ht.jsx)(Hc,{isOpen:c.isOpen,onClose:h,onSave:async e=>{if(c.itemId)try{const{updatePortfolioItem:t}=await Promise.resolve().then(r.bind(r,200)),s=await t(c.itemId,{title:e.title,description:e.description,tags:[...e.software,...e.tags,"uploaded"]});if(s.success){const t=a.map(t=>t.id===c.itemId?{...t,title:e.title,description:e.description,software:e.software,tags:[...e.software,...e.tags,"uploaded"]}:t);o(t),h()}else console.error("Failed to update portfolio item:",s.error),alert("Failed to update work details. Please try again.")}catch(t){console.error("Error updating portfolio item:",t),alert("Failed to update work details. Please try again.")}},initialData:c.itemData||{}})]})},Gc=1.375,Jc=.5,Kc=4,Yc=.1,Zc=1,Qc=.1,Xc="Update Profile Photo",ed="Choose Photo",td="Upload Successful!",rd="Your profile photo has been updated.",ad="Done",od="Cancel",sd="Save",nd="Uploading...",id="Zoom",ld="Choose a new profile photo",cd="Current avatar",dd={CROPPER:{containerStyle:{width:"100%",height:"100%",backgroundColor:"#f3f4f6"},cropAreaStyle:{border:"2px solid #8b5cf6",borderRadius:"50%",boxShadow:"0 0 0 9999px rgba(0, 0, 0, 0.3)"},mediaStyle:{width:"100%",height:"100%",objectFit:"contain"}}},ud=e=>{let{onCancel:t,error:r}=e;return(0,ht.jsxs)(ht.Fragment,{children:[(0,ht.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ht.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:Xc}),(0,ht.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:(0,ht.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r&&(0,ht.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,ht.jsx)("p",{className:"text-red-600 text-sm",children:r})})]})},hd=e=>{let{currentAvatar:t,onUploadClick:r,onFileChange:a,fileInputRef:o}=e;return(0,ht.jsxs)("div",{className:"text-center",children:[(0,ht.jsx)("div",{className:"mb-4",children:(0,ht.jsx)("img",{src:t,alt:cd,className:"w-24 h-24 rounded-full mx-auto border-2 border-gray-200",onError:e=>{e.target.style.display="none",e.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiByeD0iNjQiIGZpbGw9IiNGM0Y0RjYiLz4KPHN2ZyB4PSIzMiIgeT0iMjQiIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSIjOEM5Q0E2Ij4KPHBhdGggZD0iTTEyIDEyYzIuMjEgMCA0LTEuNzkgNC00cy0xLjc5LTQtNC00LTQgMS43OS00IDQgMS43OSA0IDQgNHptMCAyYy0yLjY3IDAtOCAxLjM0LTggNHYyaDE2di0yYzAtMi42Ni01LjMzLTQtOC00eiIvPgo8L3N2Zz4KPC9zdmc+",e.target.style.display="block"}})}),(0,ht.jsx)("p",{className:"text-gray-600 mb-4",children:ld}),(0,ht.jsx)("button",{onClick:r,className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:ed}),(0,ht.jsx)("input",{ref:o,type:"file",accept:"image/jpeg,image/png,image/webp",onChange:a,className:"hidden"})]})};var md=function(e,t){return md=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},md(e,t)};function pd(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}md(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var gd=function(){return gd=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},gd.apply(this,arguments)};Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var fd=r(185),vd=r.n(fd);function xd(e,t,r,a,o){void 0===o&&(o=0);var s=Cd(t.width,t.height,o),n=s.width,i=s.height;return{x:bd(e.x,n,r.width,a),y:bd(e.y,i,r.height,a)}}function bd(e,t,r,a){var o=t*a/2-r/2;return Sd(e,-o,o)}function yd(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function wd(e,t){return 180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI}function jd(e,t){return Math.min(e,Math.max(0,t))}function kd(e,t){return t}function Nd(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function Cd(e,t,r){var a=r*Math.PI/180;return{width:Math.abs(Math.cos(a)*e)+Math.abs(Math.sin(a)*t),height:Math.abs(Math.sin(a)*e)+Math.abs(Math.cos(a)*t)}}function Sd(e,t,r){return Math.min(Math.max(e,t),r)}function _d(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(function(e){return"string"===typeof e&&e.length>0}).join(" ").trim()}var Ed=function(t){function r(){var a=null!==t&&t.apply(this,arguments)||this;return a.cropperRef=e.createRef(),a.imageRef=e.createRef(),a.videoRef=e.createRef(),a.containerPosition={x:0,y:0},a.containerRef=null,a.styleRef=null,a.containerRect=null,a.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},a.dragStartPosition={x:0,y:0},a.dragStartCrop={x:0,y:0},a.gestureZoomStart=0,a.gestureRotationStart=0,a.isTouching=!1,a.lastPinchDistance=0,a.lastPinchRotation=0,a.rafDragTimeout=null,a.rafPinchTimeout=null,a.wheelTimer=null,a.currentDoc="undefined"!==typeof document?document:null,a.currentWindow="undefined"!==typeof window?window:null,a.resizeObserver=null,a.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},a.initResizeObserver=function(){if("undefined"!==typeof window.ResizeObserver&&a.containerRef){var e=!0;a.resizeObserver=new window.ResizeObserver(function(t){e?e=!1:a.computeSizes()}),a.resizeObserver.observe(a.containerRef)}},a.preventZoomSafari=function(e){return e.preventDefault()},a.cleanEvents=function(){a.currentDoc&&(a.currentDoc.removeEventListener("mousemove",a.onMouseMove),a.currentDoc.removeEventListener("mouseup",a.onDragStopped),a.currentDoc.removeEventListener("touchmove",a.onTouchMove),a.currentDoc.removeEventListener("touchend",a.onDragStopped),a.currentDoc.removeEventListener("gesturechange",a.onGestureChange),a.currentDoc.removeEventListener("gestureend",a.onGestureEnd),a.currentDoc.removeEventListener("scroll",a.onScroll))},a.clearScrollEvent=function(){a.containerRef&&a.containerRef.removeEventListener("wheel",a.onWheel),a.wheelTimer&&clearTimeout(a.wheelTimer)},a.onMediaLoad=function(){var e=a.computeSizes();e&&(a.emitCropData(),a.setInitialCrop(e)),a.props.onMediaLoaded&&a.props.onMediaLoaded(a.mediaSize)},a.setInitialCrop=function(e){if(a.props.initialCroppedAreaPercentages){var t=function(e,t,r,a,o,s){var n=Cd(t.width,t.height,r),i=Sd(a.width/n.width*(100/e.width),o,s);return{crop:{x:i*n.width/2-a.width/2-n.width*i*(e.x/100),y:i*n.height/2-a.height/2-n.height*i*(e.y/100)},zoom:i}}(a.props.initialCroppedAreaPercentages,a.mediaSize,a.props.rotation,e,a.props.minZoom,a.props.maxZoom),r=t.crop,o=t.zoom;a.props.onCropChange(r),a.props.onZoomChange&&a.props.onZoomChange(o)}else if(a.props.initialCroppedAreaPixels){var s=function(e,t,r,a,o,s){void 0===r&&(r=0);var n=Cd(t.naturalWidth,t.naturalHeight,r),i=Sd(function(e,t,r){var a=function(e){return e.width>e.height?e.width/e.naturalWidth:e.height/e.naturalHeight}(t);return r.height>r.width?r.height/(e.height*a):r.width/(e.width*a)}(e,t,a),o,s),l=a.height>a.width?a.height/e.height:a.width/e.width;return{crop:{x:((n.width-e.width)/2-e.x)*l,y:((n.height-e.height)/2-e.y)*l},zoom:i}}(a.props.initialCroppedAreaPixels,a.mediaSize,a.props.rotation,e,a.props.minZoom,a.props.maxZoom);r=s.crop,o=s.zoom;a.props.onCropChange(r),a.props.onZoomChange&&a.props.onZoomChange(o)}},a.computeSizes=function(){var e,t,r,o,s,n,i=a.imageRef.current||a.videoRef.current;if(i&&a.containerRef){a.containerRect=a.containerRef.getBoundingClientRect(),a.saveContainerPosition();var l=a.containerRect.width/a.containerRect.height,c=(null===(e=a.imageRef.current)||void 0===e?void 0:e.naturalWidth)||(null===(t=a.videoRef.current)||void 0===t?void 0:t.videoWidth)||0,d=(null===(r=a.imageRef.current)||void 0===r?void 0:r.naturalHeight)||(null===(o=a.videoRef.current)||void 0===o?void 0:o.videoHeight)||0,u=c/d,h=void 0;if(i.offsetWidth<c||i.offsetHeight<d)switch(a.state.mediaObjectFit){default:case"contain":h=l>u?{width:a.containerRect.height*u,height:a.containerRect.height}:{width:a.containerRect.width,height:a.containerRect.width/u};break;case"horizontal-cover":h={width:a.containerRect.width,height:a.containerRect.width/u};break;case"vertical-cover":h={width:a.containerRect.height*u,height:a.containerRect.height}}else h={width:i.offsetWidth,height:i.offsetHeight};a.mediaSize=gd(gd({},h),{naturalWidth:c,naturalHeight:d}),a.props.setMediaSize&&a.props.setMediaSize(a.mediaSize);var m=a.props.cropSize?a.props.cropSize:function(e,t,r,a,o,s){void 0===s&&(s=0);var n=Cd(e,t,s),i=n.width,l=n.height,c=Math.min(i,r),d=Math.min(l,a);return c>d*o?{width:d*o,height:d}:{width:c,height:c/o}}(a.mediaSize.width,a.mediaSize.height,a.containerRect.width,a.containerRect.height,a.props.aspect,a.props.rotation);return(null===(s=a.state.cropSize)||void 0===s?void 0:s.height)===m.height&&(null===(n=a.state.cropSize)||void 0===n?void 0:n.width)===m.width||a.props.onCropSizeChange&&a.props.onCropSizeChange(m),a.setState({cropSize:m},a.recomputeCropPosition),a.props.setCropSize&&a.props.setCropSize(m),m}},a.saveContainerPosition=function(){if(a.containerRef){var e=a.containerRef.getBoundingClientRect();a.containerPosition={x:e.left,y:e.top}}},a.onMouseDown=function(e){a.currentDoc&&(e.preventDefault(),a.currentDoc.addEventListener("mousemove",a.onMouseMove),a.currentDoc.addEventListener("mouseup",a.onDragStopped),a.saveContainerPosition(),a.onDragStart(r.getMousePoint(e)))},a.onMouseMove=function(e){return a.onDrag(r.getMousePoint(e))},a.onScroll=function(e){a.currentDoc&&(e.preventDefault(),a.saveContainerPosition())},a.onTouchStart=function(e){a.currentDoc&&(a.isTouching=!0,a.props.onTouchRequest&&!a.props.onTouchRequest(e)||(a.currentDoc.addEventListener("touchmove",a.onTouchMove,{passive:!1}),a.currentDoc.addEventListener("touchend",a.onDragStopped),a.saveContainerPosition(),2===e.touches.length?a.onPinchStart(e):1===e.touches.length&&a.onDragStart(r.getTouchPoint(e.touches[0]))))},a.onTouchMove=function(e){e.preventDefault(),2===e.touches.length?a.onPinchMove(e):1===e.touches.length&&a.onDrag(r.getTouchPoint(e.touches[0]))},a.onGestureStart=function(e){a.currentDoc&&(e.preventDefault(),a.currentDoc.addEventListener("gesturechange",a.onGestureChange),a.currentDoc.addEventListener("gestureend",a.onGestureEnd),a.gestureZoomStart=a.props.zoom,a.gestureRotationStart=a.props.rotation)},a.onGestureChange=function(e){if(e.preventDefault(),!a.isTouching){var t=r.getMousePoint(e),o=a.gestureZoomStart-1+e.scale;if(a.setNewZoom(o,t,{shouldUpdatePosition:!0}),a.props.onRotationChange){var s=a.gestureRotationStart+e.rotation;a.props.onRotationChange(s)}}},a.onGestureEnd=function(e){a.cleanEvents()},a.onDragStart=function(e){var t,r,o=e.x,s=e.y;a.dragStartPosition={x:o,y:s},a.dragStartCrop=gd({},a.props.crop),null===(r=(t=a.props).onInteractionStart)||void 0===r||r.call(t)},a.onDrag=function(e){var t=e.x,r=e.y;a.currentWindow&&(a.rafDragTimeout&&a.currentWindow.cancelAnimationFrame(a.rafDragTimeout),a.rafDragTimeout=a.currentWindow.requestAnimationFrame(function(){if(a.state.cropSize&&void 0!==t&&void 0!==r){var e=t-a.dragStartPosition.x,o=r-a.dragStartPosition.y,s={x:a.dragStartCrop.x+e,y:a.dragStartCrop.y+o},n=a.props.restrictPosition?xd(s,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):s;a.props.onCropChange(n)}}))},a.onDragStopped=function(){var e,t;a.isTouching=!1,a.cleanEvents(),a.emitCropData(),null===(t=(e=a.props).onInteractionEnd)||void 0===t||t.call(e)},a.onWheel=function(e){if(a.currentWindow&&(!a.props.onWheelRequest||a.props.onWheelRequest(e))){e.preventDefault();var t=r.getMousePoint(e),o=vd()(e).pixelY,s=a.props.zoom-o*a.props.zoomSpeed/200;a.setNewZoom(s,t,{shouldUpdatePosition:!0}),a.state.hasWheelJustStarted||a.setState({hasWheelJustStarted:!0},function(){var e,t;return null===(t=(e=a.props).onInteractionStart)||void 0===t?void 0:t.call(e)}),a.wheelTimer&&clearTimeout(a.wheelTimer),a.wheelTimer=a.currentWindow.setTimeout(function(){return a.setState({hasWheelJustStarted:!1},function(){var e,t;return null===(t=(e=a.props).onInteractionEnd)||void 0===t?void 0:t.call(e)})},250)}},a.getPointOnContainer=function(e,t){var r=e.x,o=e.y;if(!a.containerRect)throw new Error("The Cropper is not mounted");return{x:a.containerRect.width/2-(r-t.x),y:a.containerRect.height/2-(o-t.y)}},a.getPointOnMedia=function(e){var t=e.x,r=e.y,o=a.props,s=o.crop,n=o.zoom;return{x:(t+s.x)/n,y:(r+s.y)/n}},a.setNewZoom=function(e,t,r){var o=(void 0===r?{}:r).shouldUpdatePosition,s=void 0===o||o;if(a.state.cropSize&&a.props.onZoomChange){var n=Sd(e,a.props.minZoom,a.props.maxZoom);if(s){var i=a.getPointOnContainer(t,a.containerPosition),l=a.getPointOnMedia(i),c={x:l.x*n-i.x,y:l.y*n-i.y},d=a.props.restrictPosition?xd(c,a.mediaSize,a.state.cropSize,n,a.props.rotation):c;a.props.onCropChange(d)}a.props.onZoomChange(n)}},a.getCropData=function(){return a.state.cropSize?function(e,t,r,a,o,s,n){void 0===s&&(s=0),void 0===n&&(n=!0);var i=n?jd:kd,l=Cd(t.width,t.height,s),c=Cd(t.naturalWidth,t.naturalHeight,s),d={x:i(100,((l.width-r.width/o)/2-e.x/o)/l.width*100),y:i(100,((l.height-r.height/o)/2-e.y/o)/l.height*100),width:i(100,r.width/l.width*100/o),height:i(100,r.height/l.height*100/o)},u=Math.round(i(c.width,d.width*c.width/100)),h=Math.round(i(c.height,d.height*c.height/100)),m=c.width>=c.height*a?{width:Math.round(h*a),height:h}:{width:u,height:Math.round(u/a)};return{croppedAreaPercentages:d,croppedAreaPixels:gd(gd({},m),{x:Math.round(i(c.width-m.width,d.x*c.width/100)),y:Math.round(i(c.height-m.height,d.y*c.height/100))})}}(a.props.restrictPosition?xd(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop,a.mediaSize,a.state.cropSize,a.getAspect(),a.props.zoom,a.props.rotation,a.props.restrictPosition):null},a.emitCropData=function(){var e=a.getCropData();if(e){var t=e.croppedAreaPercentages,r=e.croppedAreaPixels;a.props.onCropComplete&&a.props.onCropComplete(t,r),a.props.onCropAreaChange&&a.props.onCropAreaChange(t,r)}},a.emitCropAreaChange=function(){var e=a.getCropData();if(e){var t=e.croppedAreaPercentages,r=e.croppedAreaPixels;a.props.onCropAreaChange&&a.props.onCropAreaChange(t,r)}},a.recomputeCropPosition=function(){if(a.state.cropSize){var e=a.props.restrictPosition?xd(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;a.props.onCropChange(e),a.emitCropData()}},a.onKeyDown=function(e){var t,r,o=a.props,s=o.crop,n=o.onCropChange,i=o.keyboardStep,l=o.zoom,c=o.rotation,d=i;if(a.state.cropSize){e.shiftKey&&(d*=.2);var u=gd({},s);switch(e.key){case"ArrowUp":u.y-=d,e.preventDefault();break;case"ArrowDown":u.y+=d,e.preventDefault();break;case"ArrowLeft":u.x-=d,e.preventDefault();break;case"ArrowRight":u.x+=d,e.preventDefault();break;default:return}a.props.restrictPosition&&(u=xd(u,a.mediaSize,a.state.cropSize,l,c)),e.repeat||null===(r=(t=a.props).onInteractionStart)||void 0===r||r.call(t),n(u)}},a.onKeyUp=function(e){var t,r;switch(e.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":e.preventDefault();break;default:return}a.emitCropData(),null===(r=(t=a.props).onInteractionEnd)||void 0===r||r.call(t)},a}return pd(r,t),r.prototype.componentDidMount=function(){this.currentDoc&&this.currentWindow&&(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),"undefined"===typeof window.ResizeObserver&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=".reactEasyCrop_Container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  user-select: none;\n  touch-action: none;\n  cursor: move;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.reactEasyCrop_Image,\n.reactEasyCrop_Video {\n  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */\n}\n\n.reactEasyCrop_Contain {\n  max-width: 100%;\n  max-height: 100%;\n  margin: auto;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.reactEasyCrop_Cover_Horizontal {\n  width: 100%;\n  height: auto;\n}\n.reactEasyCrop_Cover_Vertical {\n  width: auto;\n  height: 100%;\n}\n\n.reactEasyCrop_CropArea {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  box-sizing: border-box;\n  box-shadow: 0 0 0 9999em;\n  color: rgba(0, 0, 0, 0.5);\n  overflow: hidden;\n}\n\n.reactEasyCrop_CropAreaRound {\n  border-radius: 50%;\n}\n\n.reactEasyCrop_CropAreaGrid::before {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 0;\n  bottom: 0;\n  left: 33.33%;\n  right: 33.33%;\n  border-top: 0;\n  border-bottom: 0;\n}\n\n.reactEasyCrop_CropAreaGrid::after {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 33.33%;\n  bottom: 33.33%;\n  left: 0;\n  right: 0;\n  border-left: 0;\n  border-right: 0;\n}\n",this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},r.prototype.componentWillUnmount=function(){var e,t;this.currentDoc&&this.currentWindow&&("undefined"===typeof window.ResizeObserver&&this.currentWindow.removeEventListener("resize",this.computeSizes),null===(e=this.resizeObserver)||void 0===e||e.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&(null===(t=this.styleRef.parentNode)||void 0===t||t.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},r.prototype.componentDidUpdate=function(e){var t,r,a,o,s,n,i,l,c;e.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):e.aspect!==this.props.aspect||e.objectFit!==this.props.objectFit?this.computeSizes():e.zoom!==this.props.zoom?this.recomputeCropPosition():(null===(t=e.cropSize)||void 0===t?void 0:t.height)!==(null===(r=this.props.cropSize)||void 0===r?void 0:r.height)||(null===(a=e.cropSize)||void 0===a?void 0:a.width)!==(null===(o=this.props.cropSize)||void 0===o?void 0:o.width)?this.computeSizes():(null===(s=e.crop)||void 0===s?void 0:s.x)===(null===(n=this.props.crop)||void 0===n?void 0:n.x)&&(null===(i=e.crop)||void 0===i?void 0:i.y)===(null===(l=this.props.crop)||void 0===l?void 0:l.y)||this.emitCropAreaChange(),e.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),e.video!==this.props.video&&(null===(c=this.videoRef.current)||void 0===c||c.load());var d=this.getObjectFit();d!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:d},this.computeSizes)},r.prototype.getAspect=function(){var e=this.props,t=e.cropSize,r=e.aspect;return t?t.width/t.height:r},r.prototype.getObjectFit=function(){var e,t,r,a;if("cover"===this.props.objectFit){if((this.imageRef.current||this.videoRef.current)&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var o=this.containerRect.width/this.containerRect.height;return((null===(e=this.imageRef.current)||void 0===e?void 0:e.naturalWidth)||(null===(t=this.videoRef.current)||void 0===t?void 0:t.videoWidth)||0)/((null===(r=this.imageRef.current)||void 0===r?void 0:r.naturalHeight)||(null===(a=this.videoRef.current)||void 0===a?void 0:a.videoHeight)||0)<o?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},r.prototype.onPinchStart=function(e){var t=r.getTouchPoint(e.touches[0]),a=r.getTouchPoint(e.touches[1]);this.lastPinchDistance=yd(t,a),this.lastPinchRotation=wd(t,a),this.onDragStart(Nd(t,a))},r.prototype.onPinchMove=function(e){var t=this;if(this.currentDoc&&this.currentWindow){var a=r.getTouchPoint(e.touches[0]),o=r.getTouchPoint(e.touches[1]),s=Nd(a,o);this.onDrag(s),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var e=yd(a,o),r=t.props.zoom*(e/t.lastPinchDistance);t.setNewZoom(r,s,{shouldUpdatePosition:!1}),t.lastPinchDistance=e;var n=wd(a,o),i=t.props.rotation+(n-t.lastPinchRotation);t.props.onRotationChange&&t.props.onRotationChange(i),t.lastPinchRotation=n})}},r.prototype.render=function(){var t,r=this,a=this.props,o=a.image,s=a.video,n=a.mediaProps,i=a.cropperProps,l=a.transform,c=a.crop,d=c.x,u=c.y,h=a.rotation,m=a.zoom,p=a.cropShape,g=a.showGrid,f=a.roundCropAreaPixels,v=a.style,x=v.containerStyle,b=v.cropAreaStyle,y=v.mediaStyle,w=a.classes,j=w.containerClassName,k=w.cropAreaClassName,N=w.mediaClassName,C=null!==(t=this.state.mediaObjectFit)&&void 0!==t?t:this.getObjectFit();return e.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(e){return r.containerRef=e},"data-testid":"container",style:x,className:_d("reactEasyCrop_Container",j)},o?e.createElement("img",gd({alt:"",className:_d("reactEasyCrop_Image","contain"===C&&"reactEasyCrop_Contain","horizontal-cover"===C&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===C&&"reactEasyCrop_Cover_Vertical",N)},n,{src:o,ref:this.imageRef,style:gd(gd({},y),{transform:l||"translate(".concat(d,"px, ").concat(u,"px) rotate(").concat(h,"deg) scale(").concat(m,")")}),onLoad:this.onMediaLoad})):s&&e.createElement("video",gd({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:_d("reactEasyCrop_Video","contain"===C&&"reactEasyCrop_Contain","horizontal-cover"===C&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===C&&"reactEasyCrop_Cover_Vertical",N)},n,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:gd(gd({},y),{transform:l||"translate(".concat(d,"px, ").concat(u,"px) rotate(").concat(h,"deg) scale(").concat(m,")")}),controls:!1}),(Array.isArray(s)?s:[{src:s}]).map(function(t){return e.createElement("source",gd({key:t.src},t))})),this.state.cropSize&&e.createElement("div",gd({ref:this.cropperRef,style:gd(gd({},b),{width:f?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:f?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:_d("reactEasyCrop_CropArea","round"===p&&"reactEasyCrop_CropAreaRound",g&&"reactEasyCrop_CropAreaGrid",k)},i)))},r.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:3,minZoom:1,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:1},r.getMousePoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},r.getTouchPoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},r}(e.Component);const Pd=e=>{let{previewUrl:t,crop:r,zoom:a,isUploading:o,uploadProgress:s,croppedAreaPixels:n,onCropChange:i,onZoomChange:l,onCropComplete:c,onCancel:d,onConfirmCrop:u}=e;return(0,ht.jsxs)("div",{children:[(0,ht.jsx)("div",{className:"mb-4",children:(0,ht.jsx)("div",{className:"relative w-full h-64 bg-gray-100 rounded-lg overflow-hidden",children:(0,ht.jsx)(Ed,{image:t,crop:r,zoom:a,aspect:Zc,onCropChange:i,onZoomChange:l,onCropComplete:c,showGrid:!1,objectFit:"contain",minZoom:Jc,maxZoom:Kc,wheelZoomRatio:Qc,style:dd.CROPPER})})}),(0,ht.jsxs)("div",{className:"mb-4",children:[(0,ht.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:id}),(0,ht.jsx)("input",{type:"range",min:Jc,max:Kc,step:Yc,value:a,onChange:e=>l(Number(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),o&&(0,ht.jsxs)("div",{className:"mb-4",children:[(0,ht.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-1",children:[(0,ht.jsx)("span",{children:nd}),(0,ht.jsxs)("span",{children:[s,"%"]})]}),(0,ht.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,ht.jsx)("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${s}%`}})})]}),(0,ht.jsxs)("div",{className:"flex gap-3",children:[(0,ht.jsx)("button",{onClick:d,disabled:o,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:od}),(0,ht.jsx)("button",{onClick:u,disabled:o||!n,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50",children:o?nd:sd})]})]})},Id=e=>{let{onComplete:t}=e;return(0,ht.jsxs)("div",{className:"text-center",children:[(0,ht.jsx)("div",{className:"mb-4",children:(0,ht.jsx)("div",{className:"w-24 h-24 rounded-full mx-auto border-2 border-green-200 bg-green-50 flex items-center justify-center",children:(0,ht.jsx)("svg",{className:"w-12 h-12 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),(0,ht.jsx)("p",{className:"text-green-600 font-medium mb-2",children:td}),(0,ht.jsx)("p",{className:"text-gray-600 mb-4",children:rd}),(0,ht.jsx)("button",{onClick:t,className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors",children:ad})]})},Ad=()=>{const[t,r]=(0,e.useState)(!1),[a,o]=(0,e.useState)(0),[s,n]=(0,e.useState)(null);return{isUploading:t,uploadProgress:a,error:s,handleFileSelect:(0,e.useCallback)(async e=>{try{n(null),(e=>{if(!["image/jpeg","image/png","image/webp"].includes(e.type))throw new Error("Please select a valid image file (JPG, PNG, WebP)");if(e.size>5242880)throw new Error("File size must be less than 5MB")})(e);const t=await new Promise((t,r)=>{const a=new FileReader;a.onload=()=>t(a.result),a.onerror=()=>r(new Error("Failed to read file")),a.readAsDataURL(e)});return console.log("[handleFileSelect] Generated preview URL:",null===t||void 0===t?void 0:t.substring(0,30)),{file:e,previewUrl:t}}catch(t){return n(t.message),null}},[]),handleCropComplete:(0,e.useCallback)(async(e,t,a)=>{try{r(!0),o(10),console.log("[handleCropComplete] Input parameters:",{imageNaturalWidth:e.naturalWidth,imageNaturalHeight:e.naturalHeight,crop:t,pixelCrop:a});const s=function(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:512;const o=document.createElement("canvas"),s=o.getContext("2d");return o.width=a,o.height=a,s.drawImage(e,r.x,r.y,r.width,r.height,0,0,a,a),console.log("[cropImageToCanvas] Image dimensions:",{naturalWidth:e.naturalWidth,naturalHeight:e.naturalHeight}),console.log("[cropImageToCanvas] Pixel crop:",r),console.log("[cropImageToCanvas] Output size:",a),o}(e,t,a,512);o(30);const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.85;const r=e.toDataURL("image/webp",t);return console.log("[exportToDataURL] Canvas dimensions:",{width:e.width,height:e.height}),console.log("[exportToDataURL] Generated dataURL length:",null===r||void 0===r?void 0:r.length),console.log("[exportToDataURL] Generated dataURL preview:",null===r||void 0===r?void 0:r.substring(0,50)),r}(s,.85);o(50),console.log("[useAvatarUpload] Generated dataURL:",null===n||void 0===n?void 0:n.substring(0,30));const i=(0,ut.WR)();o(80);const l=await(0,Ht.F4)(n,i);if(o(100),await new Promise(e=>setTimeout(e,500)),!l.success)throw new Error(l.error);return console.log("[useAvatarUpload] Upload successful, returning:",l.data),l.data}catch(s){throw console.error("[useAvatarUpload] Upload failed:",s),n(s.message),s}finally{r(!1),o(0)}},[]),cleanup:(0,e.useCallback)(e=>{console.log("[cleanup] Data URL cleanup completed")},[])}},Td=t=>{let{isOpen:r,onClose:a,onAvatarUpdate:o,currentAvatar:s}=t;const n=(t=>{const[r,a]=(0,e.useState)({x:0,y:0}),[o,s]=(0,e.useState)(Gc),[n,i]=(0,e.useState)(null),[l,c]=(0,e.useState)(null),[d,u]=(0,e.useState)(null),[h,m]=(0,e.useState)(!1);return(0,e.useEffect)(()=>{t&&(a({x:0,y:0}),s(Gc),i(null),c(null),u(null),m(!1))},[t]),{crop:r,zoom:o,croppedAreaPixels:n,selectedImage:l,previewUrl:d,uploadCompleted:h,setCrop:a,setZoom:s,setCroppedAreaPixels:i,setSelectedImage:c,setPreviewUrl:u,setUploadCompleted:m,resetState:()=>{a({x:0,y:0}),s(Gc),i(null),c(null),u(null),m(!1)}}})(r),{crop:i,zoom:l,croppedAreaPixels:c,selectedImage:d,previewUrl:u,uploadCompleted:h,setCrop:m,setZoom:p}=n,g=((t,r,a,o)=>{const{selectedImage:s,previewUrl:n,croppedAreaPixels:i,crop:l}=t,{setSelectedImage:c,setPreviewUrl:d,setCrop:u,setZoom:h,setCroppedAreaPixels:m,setUploadCompleted:p,resetState:g}=r,f=(0,e.useRef)(null),{isUploading:v,uploadProgress:x,error:b,handleFileSelect:y,handleCropComplete:w,cleanup:j}=Ad(),k=(0,e.useCallback)(async e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!r)return;const a=await y(r);a&&(c(a.file),d(a.previewUrl),u({x:0,y:0}),h(Gc))},[y,c,d,u,h]),N=(0,e.useCallback)((e,t)=>{m(t)},[m]),C=(0,e.useCallback)(async()=>{if(console.log("[AvatarCropModal] handleConfirmCrop called"),console.log("[AvatarCropModal] selectedImage:",!!s),console.log("[AvatarCropModal] croppedAreaPixels:",!!i),s&&i)try{var e;const t=new Image;t.src=n,await new Promise(e=>{t.onload=e}),console.log("[AvatarCropModal] Image loaded, calling handleCropComplete");const r=await w(t,l,i);if(console.log("[AvatarCropModal] Crop result:",r),!r.avatarUrl||!r.avatarUrl.startsWith("data:image/"))throw console.error("[AvatarCropModal] Invalid avatarUrl format:",r.avatarUrl),new Error("Invalid avatar URL format");console.log("[AvatarCropModal] Calling onAvatarUpdate with:",null===(e=r.avatarUrl)||void 0===e?void 0:e.substring(0,30)),o(r.avatarUrl,r.avatarUpdatedAt),j(n),p(!0)}catch(t){console.error("Crop failed:",t)}else console.error("[AvatarCropModal] Missing required data for crop")},[s,i,l,w,o,j,n,p]),S=(0,e.useCallback)(()=>{j(n),g(),a()},[j,n,g,a]),_=(0,e.useCallback)(()=>{p(!1),a()},[p,a]),E=(0,e.useCallback)(()=>{var e;null===(e=f.current)||void 0===e||e.click()},[]);return{fileInputRef:f,isUploading:v,uploadProgress:x,error:b,handleFileChange:k,onCropComplete:N,handleConfirmCrop:C,handleCancel:S,handleComplete:_,handleUploadClick:E}})(n,n,a,o),{fileInputRef:f,isUploading:v,uploadProgress:x,error:b,handleFileChange:y,onCropComplete:w,handleConfirmCrop:j,handleCancel:k,handleComplete:N,handleUploadClick:C}=g;return r?(0,ht.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,ht.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,ht.jsx)(ud,{onCancel:k,error:b}),h?(0,ht.jsx)(Id,{onComplete:N}):d?(0,ht.jsx)(Pd,{previewUrl:u,crop:i,zoom:l,isUploading:v,uploadProgress:x,croppedAreaPixels:c,onCropChange:m,onZoomChange:p,onCropComplete:w,onCancel:k,onConfirmCrop:j}):(0,ht.jsx)(hd,{currentAvatar:s,onUploadClick:C,onFileChange:y,fileInputRef:f})]})}):null},Ld=t=>{let{avatar:r,onAvatarChange:a}=t;const[o,s]=(0,e.useState)(!1),[n,i]=(0,e.useState)(null),[l,c]=(0,e.useState)(r);(0,e.useEffect)(()=>{r&&r!==l&&(console.log("[ProfilePhotoCard] Avatar prop changed:",null===r||void 0===r?void 0:r.substring(0,30)),c(r))},[r,l]),(0,e.useEffect)(()=>{if(!l&&"undefined"!==typeof window)try{const t=window.localStorage.getItem("tag.avatars.alice");if(t){const r=JSON.parse(t);var e;if(r&&r.avatarUrl)console.log("[ProfilePhotoCard] Initialized from localStorage:",null===(e=r.avatarUrl)||void 0===e?void 0:e.substring(0,30)),c(r.avatarUrl)}}catch(t){console.warn("[ProfilePhotoCard] Failed to read avatar from localStorage:",t)}},[]);const d="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiByeD0iNjQiIGZpbGw9IiNGM0Y0RjYiLz4KPHN2ZyB4PSIzMiIgeT0iMjQiIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSIjOEM5Q0E2Ij4KPHBhdGggZD0iTTEyIDEyYzIuMjEgMCA0LTEuNzkgNC00cy0xLjc5LTQtNC00LTQgMS43OS00IDQgMS43OSA0IDQgNHptMCAyYy0yLjY3IDAtOCAxLjM0LTggNHYyaDE2di0yYzAtMi42Ni01LjMzLTQtOC00eiIvPgo8L3N2Zz4KPC9zdmc+",u=l?(0,Ht.Bc)(l,n):null,h=(0,e.useCallback)(async(e,t)=>{if(console.log("[ProfilePhotoCard] Received new avatar URL:",null===e||void 0===e?void 0:e.substring(0,30)),console.log("[ProfilePhotoCard] Avatar URL type:",typeof e),console.log("[ProfilePhotoCard] Full avatar URL:",e),e&&e.startsWith("data:image/")){c(e),i(t),a(e);try{await(0,xt.$u)(e)?console.log("[ProfilePhotoCard] Successfully updated unified avatar"):console.error("[ProfilePhotoCard] Failed to update unified avatar")}catch(r){console.error("[ProfilePhotoCard] Error updating unified avatar:",r)}console.log("[onAvatarUpdate] prefix:",null===e||void 0===e?void 0:e.substring(0,4)),console.log("[ProfilePhotoCard] Successfully updated avatar"),s(!1)}else console.error("[ProfilePhotoCard] Invalid avatar URL format:",e)},[a]),m=(0,e.useCallback)(()=>{s(!0)},[]),p=(0,e.useCallback)(()=>{s(!1)},[]);return(0,ht.jsxs)("div",{className:qi,children:[(0,ht.jsx)("h3",{className:Hi,children:"Profile Photo"}),(0,ht.jsxs)("div",{className:Vi,children:[(0,ht.jsx)("div",{className:Gi,children:u?(0,ht.jsx)("img",{src:u,alt:"Profile avatar",className:Ji,onError:e=>{let{currentTarget:t}=e;t.onerror=null,t.src=d}}):(0,ht.jsx)("img",{src:d,alt:"Default profile avatar",className:Ji})}),(0,ht.jsx)("div",{className:Ki,children:(0,ht.jsxs)("button",{type:"button",onClick:m,className:Yi,"aria-label":"Change profile photo",children:[(0,ht.jsxs)("svg",{className:Zi,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Change Photo"]})})]}),(0,ht.jsx)(Td,{isOpen:o,onClose:p,onAvatarUpdate:h,currentAvatar:u||d})]})},Dd=t=>{let{skills:r,onChange:a}=t;const[o,s]=(0,e.useState)(""),[n,i]=(0,e.useState)(""),l=(0,e.useCallback)(()=>{const e=o.trim();if(!e)return void i("Please enter a skill");if(e.length>20)return void i("Skill name must be 20 characters or less");if(e.length<2)return void i("Skill name must be at least 2 characters");const t=e.toLowerCase();if(r.some(e=>e.toLowerCase()===t))return void i("This skill already exists");if(r.length>=12)return void i("Maximum 12 skills allowed");const n=[...r,e];a(n),s(""),i("")},[o,r,a]),c=(0,e.useCallback)(e=>{const t=r.filter(t=>t!==e);a(t)},[r,a]),d=(0,e.useCallback)(e=>{"Enter"===e.key&&(e.preventDefault(),l())},[l]),u=(0,e.useCallback)(e=>{s(e.target.value),n&&i("")},[n]);return(0,ht.jsxs)("div",{className:qi,children:[(0,ht.jsx)("h3",{className:Hi,children:"Skills"}),(0,ht.jsxs)("div",{className:Tl,children:[(0,ht.jsx)("div",{className:Ll,children:r.map((e,t)=>(0,ht.jsxs)("div",{className:Dl,children:[(0,ht.jsx)("span",{className:Ml,children:e}),(0,ht.jsx)("button",{type:"button",onClick:()=>c(e),className:Rl,"aria-label":`Remove ${e} skill`,children:(0,ht.jsx)("svg",{className:$l,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t))}),(0,ht.jsxs)("div",{className:Fl,children:[(0,ht.jsxs)("div",{className:Ol,children:[(0,ht.jsx)("input",{type:"text",value:o,onChange:u,onKeyPress:d,className:`${Ul} ${n?rl:""}`,placeholder:"Add a skill...",maxLength:20,"aria-describedby":n?"skill-error":"skill-help"}),(0,ht.jsx)("button",{type:"button",onClick:l,className:zl,disabled:!o.trim()||r.length>=12,"aria-label":"Add skill",children:(0,ht.jsx)("svg",{className:Wl,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]}),n&&(0,ht.jsx)("div",{id:"skill-error",className:il,children:n}),(0,ht.jsx)("div",{id:"skill-help",className:Bl,children:"Press Enter or click + to add. Maximum 12 skills."})]})]})]})},Md=[{label:"ArtStation",placeholder:"https://www.artstation.com/yourname"},{label:"Behance",placeholder:"https://www.behance.net/yourname"}],Rd=t=>{let{links:r,onChange:a,onOtherLinksChange:o}=t;const[s,n]=(0,e.useState)(""),[i,l]=(0,e.useState)(""),[c,d]=(0,e.useState)(""),u=e=>{if(!e.trim())return!0;try{const t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch{return!1}},h=(0,e.useCallback)(()=>{const e=s.trim(),t=i.trim();if(!e)return void d("Please enter a website name");if(!t)return void d("Please enter a URL");if(!/^https?:\/\/.+/i.test(t))return void d("Please enter a valid URL starting with http:// or https://");try{const e=new URL(t).hostname.toLowerCase();if((r.otherLinks||[]).some(t=>{try{return new URL(t.url).hostname.toLowerCase()===e}catch{return!1}}))return void d("This website is already added")}catch{return void d("Please enter a valid URL")}if((r.otherLinks||[]).length>=5)return void d("Maximum of 5 links");const a={id:crypto.randomUUID(),label:e,url:t};o([...r.otherLinks||[],a]),n(""),l(""),d("")},[s,i,r,o]),m=(0,e.useCallback)(e=>{o((r.otherLinks||[]).filter(t=>t.id!==e))},[r,o]),p=(0,e.useCallback)(e=>{n(e.label),l(""),d("")},[]),g=e=>{const t=e.toLowerCase();return t.includes("artstation")?(0,ht.jsx)("svg",{className:hl,viewBox:"0 0 24 24",fill:"currentColor",children:(0,ht.jsx)("path",{d:"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm0 2.25c5.385 0 9.75 4.365 9.75 9.75s-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12 6.615 2.25 12 2.25zm0 3.75c-3.314 0-6 2.686-6 6s2.686 6 6 6 6-2.686 6-6-2.686-6-6-6zm0 2.25c2.071 0 3.75 1.679 3.75 3.75s-1.679 3.75-3.75 3.75S8.25 14.821 8.25 12.75 9.929 9 12 9z"})}):t.includes("behance")?(0,ht.jsx)("svg",{className:hl,viewBox:"0 0 24 24",fill:"currentColor",children:(0,ht.jsx)("path",{d:"M22 7h-7V5h7v2zm1.726 10c-.442 1.297-2.029 3-5.101 3-3.074 0-5.564-1.729-5.564-5.675 0-3.91 2.561-5.92 5.466-5.92 3.082 0 4.588 1.837 5.038 4.426l.332 1.906H17.19l-.23-1.518c-.245-1.332-1.104-1.804-2.13-1.804-1.245 0-2.916.988-2.916 3.368 0 2.507 1.688 3.716 3.111 3.716 1.149 0 1.955-.518 2.19-1.138h1.701zM11.649 9.413c0-1.288.875-2.013 1.857-2.013.983 0 1.857.725 1.857 2.013 0 1.287-.874 2.013-1.857 2.013-.982 0-1.857-.726-1.857-2.013zM8.14 12.213c0-1.634.893-2.6 2.072-2.6 1.179 0 2.072.966 2.072 2.6 0 1.635-.893 2.6-2.072 2.6-1.179 0-2.072-.965-2.072-2.6z"})}):(0,ht.jsx)("svg",{className:hl,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9m0 9c-5 0-9-4-9-9s4-9 9-9"})})},f=[{key:"instagram",label:"Instagram URL",placeholder:"https://www.instagram.com/yourusername",icon:(0,ht.jsx)("svg",{className:hl,viewBox:"0 0 24 24",fill:"currentColor",children:(0,ht.jsx)("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})},{key:"portfolio",label:"Portfolio URL",placeholder:"https://your-portfolio.com",icon:(0,ht.jsx)("svg",{className:hl,fill:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})})},{key:"discord",label:"Discord URL",placeholder:"https://discord.gg/yourname",icon:(0,ht.jsx)("svg",{className:hl,viewBox:"0 0 24 24",fill:"currentColor",children:(0,ht.jsx)("path",{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.019 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1568 2.4189Z"})})}];return(0,ht.jsxs)("div",{className:qi,children:[(0,ht.jsx)("h3",{className:Hi,children:"Social Links"}),(0,ht.jsxs)("div",{className:pl,children:[(0,ht.jsx)("div",{className:gl,children:f.map(e=>{const t=r[e.key],o="string"===typeof t?t:"";return(0,ht.jsxs)("div",{className:Qi,children:[(0,ht.jsx)("label",{htmlFor:e.key,className:ol,children:e.label}),(0,ht.jsxs)("div",{className:dl,children:[(0,ht.jsx)("div",{className:ul,children:e.icon}),(0,ht.jsx)("input",{id:e.key,type:"url",value:o,onChange:t=>((e,t)=>{a(e,t)})(e.key,t.target.value),className:`${ml} ${o&&!u(o)?rl:""}`,placeholder:e.placeholder,"aria-describedby":`${e.key}-error`})]}),o&&!u(o)&&(0,ht.jsx)("div",{id:`${e.key}-error`,className:il,children:"Please enter a valid URL starting with http:// or https://"})]},e.key)})}),(0,ht.jsxs)("div",{className:gl,children:[(0,ht.jsx)("div",{className:fl,children:(0,ht.jsx)("h4",{className:vl,children:"Other Websites"})}),(0,ht.jsx)("div",{className:xl,children:(r.otherLinks||[]).map(e=>(0,ht.jsxs)("div",{className:bl,children:[(0,ht.jsx)("div",{className:ul,children:g(e.label)}),(0,ht.jsxs)("div",{className:yl,children:[(0,ht.jsx)("div",{className:wl,children:e.label}),(0,ht.jsx)("div",{className:jl,children:e.url})]}),(0,ht.jsx)("button",{type:"button",onClick:()=>m(e.id),className:kl,"aria-label":`Remove ${e.label} website`,children:(0,ht.jsx)("svg",{className:$l,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},e.id))}),(r.otherLinks||[]).length<5&&(0,ht.jsxs)("div",{className:Nl,children:[(0,ht.jsx)("div",{className:Cl,children:(0,ht.jsxs)("div",{className:Sl,children:[(0,ht.jsx)("input",{type:"text",value:s,onChange:e=>{n(e.target.value),d("")},placeholder:"Website name",className:_l}),(0,ht.jsx)("input",{type:"url",value:i,onChange:e=>{l(e.target.value),d("")},placeholder:"https://example.com",className:_l}),(0,ht.jsx)("button",{type:"button",onClick:h,className:El,disabled:!s.trim()||!i.trim(),children:"Add"})]})}),(0,ht.jsx)("div",{className:Pl,children:Md.map(e=>(0,ht.jsx)("button",{type:"button",onClick:()=>p(e),className:Il,children:e.label},e.label))}),c&&(0,ht.jsx)("div",{className:il,children:c})]}),(r.otherLinks||[]).length>=5&&(0,ht.jsx)("div",{className:Al,children:"Maximum of 5 links reached."})]})]})]})},$d=()=>{const e=ee(),t=()=>{e("/upload/guidelines")};return(0,ht.jsxs)("div",{className:qi,children:[(0,ht.jsx)("h3",{className:Hi,children:"Upload New Work"}),(0,ht.jsxs)("div",{className:`${Yl} ${Zl}`,onClick:t,style:{cursor:"pointer"},children:[(0,ht.jsx)("svg",{className:Ql,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,ht.jsx)("p",{className:Xl,children:"Click to upload new work"}),(0,ht.jsx)("p",{className:ec,children:"You'll be redirected to the upload guidelines"}),(0,ht.jsx)("button",{type:"button",className:tc,onClick:t,children:"Upload New Work"})]}),(0,ht.jsxs)("div",{className:rc,children:[(0,ht.jsx)("svg",{className:ac,fill:"currentColor",viewBox:"0 0 20 20",children:(0,ht.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,ht.jsx)("span",{children:"Click to start the upload process"})]})]})};var Fd,Od,Ud,zd;const Wd=(0,ut.HW)(),Bd={fullName:(null===Wd||void 0===Wd?void 0:Wd.name)||"",title:(null===Wd||void 0===Wd?void 0:Wd.role)||"",school:(null===Wd||void 0===Wd?void 0:Wd.school)||"",pronouns:(null===Wd||void 0===Wd?void 0:Wd.pronouns)||"",majors:(null===Wd||void 0===Wd?void 0:Wd.majors)||[],minors:[],bio:(null===Wd||void 0===Wd?void 0:Wd.bio)||"",avatar:(null===Wd||void 0===Wd?void 0:Wd.avatar)||null,socialLinks:{instagram:(null===Wd||void 0===Wd||null===(Fd=Wd.socialLinks)||void 0===Fd?void 0:Fd.instagram)||"",portfolio:(null===Wd||void 0===Wd||null===(Od=Wd.socialLinks)||void 0===Od?void 0:Od.portfolio)||"",discord:(null===Wd||void 0===Wd||null===(Ud=Wd.socialLinks)||void 0===Ud?void 0:Ud.discord)||"",otherLinks:(null===Wd||void 0===Wd||null===(zd=Wd.socialLinks)||void 0===zd?void 0:zd.otherLinks)||[]},skills:(null===Wd||void 0===Wd?void 0:Wd.skills)||[]},qd=()=>{const t=ee(),r={...Bd},[a,o]=(0,e.useState)({...r,socialLinks:{...r.socialLinks,otherLinks:[]}});(0,e.useEffect)(()=>{Wd&&(async()=>{try{const e=(null===Wd||void 0===Wd?void 0:Wd.id)||"alice",t=await(0,Ht.E$)(e);t.success&&t.data&&o(e=>({...e,fullName:t.data.fullName,title:t.data.title,school:t.data.school,pronouns:t.data.pronouns,majors:t.data.majors,minors:t.data.minors||[],skills:t.data.skills||[],bio:t.data.bio||"",avatar:t.data.avatar||e.avatar,socialLinks:t.data.socialLinks||e.socialLinks}))}catch(e){console.error("Error loading user profile:",e)}})()},[Wd]);const[s,n]=(0,e.useState)([]),[i,l]=(0,e.useState)(!1),[c,d]=(0,e.useState)(!1),[u,h]=(0,e.useState)({}),m=(0,e.useCallback)(async()=>{console.log("[EditProfile] Loading portfolio from Supabase...");try{const e=await(0,Dr.BD)();if(console.log("[EditProfile] Portfolio load result:",e),e.success){const t=e.data.map(e=>({id:e.id,title:e.title,description:e.description||"",image:e.thumbnailPath||e.imagePaths&&e.imagePaths[0]||"",isPublic:e.isPublic,tags:e.tags||[]}));console.log("[EditProfile] Setting portfolio items:",t),n(t)}else console.log("[EditProfile] Failed to load portfolio, using empty array"),n([])}catch(e){console.error("Error loading portfolio:",e),n([])}},[]);(0,e.useEffect)(()=>{m()},[m]);const p=(0,e.useCallback)(async e=>{try{const t=await(0,Dr.zB)(e);t.success?m():console.error("Failed to delete portfolio item:",t.error)}catch(t){console.error("Error deleting portfolio item:",t)}},[m]),g=(0,e.useCallback)(async(e,t)=>{try{const r=await(0,Dr.updatePortfolioItem)(e,{isPublic:!t});r.success?m():console.error("Failed to update portfolio visibility:",r.error)}catch(r){console.error("Error updating portfolio visibility:",r)}},[m]),f=(0,e.useCallback)(()=>{const e={};return a.fullName.trim()||(e.fullName="Full name is required"),a.bio.length>280&&(e.bio="Bio must be 280 characters or less"),{isValid:0===Object.keys(e).length,errors:e}},[a]),v=(0,e.useCallback)((e,t)=>{o(r=>({...r,[e]:t})),l(!0)},[]),x=(0,e.useCallback)((e,t)=>{o(r=>({...r,socialLinks:{...r.socialLinks,[e]:t}})),l(!0)},[]),b=(0,e.useCallback)(e=>{o(t=>({...t,socialLinks:{...t.socialLinks,otherLinks:e}})),l(!0)},[]),y=(0,e.useCallback)(e=>{o(t=>({...t,skills:e})),l(!0)},[]),w=(0,e.useCallback)(e=>{o(t=>({...t,majors:e})),l(!0)},[]),j=(0,e.useCallback)(e=>{o(t=>({...t,minors:e})),l(!0)},[]),k=(0,e.useCallback)(e=>{n(e)},[]),N=(0,e.useCallback)(()=>{o(Bd),m(),l(!1),h({})},[m]),C=(0,e.useCallback)(async()=>{const e=f();if(h(e.errors),e.isValid)try{const e=(null===Wd||void 0===Wd?void 0:Wd.id)||"alice",r=await(0,Ht.Lt)(e,{fullName:a.fullName,title:a.title,school:a.school,pronouns:a.pronouns,majors:a.majors,minors:a.minors||[],skills:a.skills||[],bio:a.bio||"",avatar:a.avatar||null,socialLinks:a.socialLinks});if(r.success){if(console.log("Profile saved successfully:",r.data),(0,Fr.Y1)(["artist",e]),a.avatar&&a.avatar.startsWith("data:image/"))try{await(0,xt.$u)(a.avatar)?console.log("[EditProfile] Successfully updated unified avatar"):console.error("[EditProfile] Failed to update unified avatar")}catch(t){console.error("[EditProfile] Error updating unified avatar:",t)}l(!1),d(!0),setTimeout(()=>{d(!1)},3e3)}else console.error("Failed to save profile:",r.error)}catch(t){console.error("Error saving profile:",t)}},[a,s,f,Wd]),S=(0,e.useCallback)(()=>{t(-1)},[t]),_=(0,e.useCallback)(e=>{if(console.log("[EditProfile] handleAvatarChange called with:",typeof e),"string"===typeof e)console.log("[EditProfile] Setting new avatar:",null===e||void 0===e?void 0:e.substring(0,30)),console.log("[EditProfile] Avatar type:",typeof e),o(t=>({...t,avatar:e})),l(!0);else if(e instanceof File){const t=new FileReader;t.onload=e=>{var t;const r=null===(t=e.target)||void 0===t?void 0:t.result;console.log("[EditProfile] Converted File to data URL:",null===r||void 0===r?void 0:r.substring(0,30)),o(e=>({...e,avatar:r})),l(!0)},t.readAsDataURL(e)}},[]);return(0,ht.jsxs)("div",{className:Ii,children:[(0,ht.jsxs)("div",{className:Ai,children:[(0,ht.jsxs)("div",{className:Ti,children:[(0,ht.jsxs)("button",{onClick:S,className:Li,"aria-label":"Go back",children:[(0,ht.jsx)("svg",{className:Di,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ht.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),(0,ht.jsx)("h1",{className:Mi,children:"Edit Profile"})]}),(0,ht.jsxs)("div",{className:Ri,children:[(0,ht.jsx)("button",{onClick:N,className:$i,disabled:!i,children:"Cancel"}),(0,ht.jsx)("button",{onClick:C,className:Fi,disabled:!i,children:"Save Changes"})]})]}),c&&(0,ht.jsxs)("div",{className:Oi,children:[(0,ht.jsx)("svg",{className:Ui,fill:"currentColor",viewBox:"0 0 20 20",children:(0,ht.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Saved successfully!"]}),(0,ht.jsxs)("div",{className:zi,children:[(0,ht.jsxs)("div",{className:Wi,children:[(0,ht.jsx)(Ld,{avatar:a.avatar,onAvatarChange:_}),(0,ht.jsx)(qc,{data:a,onChange:v,onMajorsChange:w,onMinorsChange:j,errors:u}),(0,ht.jsx)(Rd,{links:a.socialLinks,onChange:x,onOtherLinksChange:b})]}),(0,ht.jsxs)("div",{className:Bi,children:[(0,ht.jsx)(Dd,{skills:a.skills,onChange:y}),(0,ht.jsx)($d,{}),(0,ht.jsx)(Vc,{items:s,onChange:k,onDelete:p,onToggleVisibility:g})]})]})]})},Hd="tag_service_data",Vd=async e=>{try{const r=["alice","bryan","alex"];for(const a of r){const r=`portfolio_${a}`,o=await Kt.storage.getItem(r);if(o)try{const t=JSON.parse(o);if(Array.isArray(t)){const r=t.find(t=>t.id===e);if(r){const e=Xt.o1[a];return{...r,userId:a,authorName:(null===e||void 0===e?void 0:e.displayName)||a}}}}catch(t){console.warn(`Failed to parse portfolio data for ${a}:`,t)}}return null}catch(r){return console.error("Error getting portfolio data by ID:",r),null}},Gd=async()=>{await(async()=>{if(!await Kt.storage.getItem(Hd)){const e={tagStats:{design:{works:15,users:8,projects:3},illustration:{works:12,users:6,projects:2},photography:{works:8,users:4,projects:1},"3d":{works:6,users:3,projects:2},animation:{works:4,users:2,projects:1},ui:{works:10,users:5,projects:4},ux:{works:7,users:4,projects:3},branding:{works:9,users:5,projects:2},typography:{works:5,users:3,projects:1},"digital-art":{works:11,users:6,projects:2},photo:{works:1,users:1,projects:0},landscape:{works:1,users:1,projects:0}},workTags:{work1:["design","ui","branding"],work2:["illustration","digital-art"],work3:["photography","design"],work4:["3d","animation"],work5:["ux","ui","design"],pf_alice_01:["photo","landscape"],pf_bryan_01:["illustration","digital-art"],pf_alex_01:["design","ui"]},userTags:{alex:["design","ui","ux"],bryan:["illustration","digital-art","typography"],alice:["photography","design","branding","photo","landscape"]},projectTags:{project1:["design","ui","branding"],project2:["illustration","digital-art"],project3:["3d","animation"]}};await Kt.storage.setItem(Hd,JSON.stringify(e))}})();const e=await Kt.storage.getItem(Hd);return e?JSON.parse(e):null},Jd=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300;return new Promise(t=>setTimeout(t,e))},Kd=()=>{const{slug:t}=te(),[r,a]=(ee(),(0,e.useState)(null)),[o,s]=(0,e.useState)([]),[n,i]=(0,e.useState)(!0),[l,c]=(0,e.useState)(null),[d,u]=(0,e.useState)(!0),h=async()=>{try{const e=await(async e=>{await Jd();let t=0;const r=["alice","bryan","alex"];for(const s of r){const r=`portfolio_${s}`,a=await Kt.storage.getItem(r);if(a)try{const r=JSON.parse(a);if(Array.isArray(r))for(const a of r)a.tags&&a.tags.some(t=>t.toLowerCase()===e.toLowerCase()||t.toLowerCase().includes(e.toLowerCase()))&&t++}catch(o){console.warn(`Failed to parse portfolio data for ${s}:`,o)}}if(0===t){var a;const t=await Gd();return(null===t||void 0===t||null===(a=t.tagStats)||void 0===a?void 0:a[e])||{works:0,users:0,projects:0}}return{works:t,users:0,projects:0}})(t);a(e)}catch(e){console.error("Error loading tag stats:",e)}},m=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const r=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await Jd();const{limit:r=10,cursor:a=null}=t,o=[],s=["alice","bryan","alex"];for(const u of s){const t=`portfolio_${u}`,r=await Kt.storage.getItem(t);if(r)try{const t=JSON.parse(r);if(Array.isArray(t)){const r=Xt.o1[u];for(const a of t)if(a.tags&&a.tags.some(t=>t.toLowerCase()===e.toLowerCase()||t.toLowerCase().includes(e.toLowerCase()))){let t="";a.imageKey?t=await ya.default.getImageUrl(a.imageKey):a.thumbnailPath?t=await ya.default.getImageUrl(a.thumbnailPath):a.imagePaths&&a.imagePaths[0]&&(t=await ya.default.getImageUrl(a.imagePaths[0])),o.push({id:a.id,title:a.title,description:a.description||`Tagged with #${e}`,author:{id:u,name:(null===r||void 0===r?void 0:r.displayName)||u},image:t||""})}}}catch(d){console.warn(`Failed to parse portfolio data for ${u}:`,d)}}if(0===o.length){const t=await Gd(),r=Object.entries((null===t||void 0===t?void 0:t.workTags)||{}).filter(t=>{let[r,a]=t;return a.includes(e)}).map(e=>{let[t]=e;return t});for(const a of r){const t=await Vd(a);if(t){let r="";t.imageKey?r=await ya.default.getImageUrl(t.imageKey):t.thumbnailPath?r=await ya.default.getImageUrl(t.thumbnailPath):t.imagePaths&&t.imagePaths[0]&&(r=await ya.default.getImageUrl(t.imagePaths[0])),o.push({id:t.id,title:t.title,description:t.description||`Tagged with #${e}`,author:{id:t.userId,name:t.authorName},image:r||""})}}}const n=a?parseInt(a):0,i=n+r,l=o.slice(n,i),c=i<o.length;return{items:l,hasMore:c,cursor:c?i.toString():null}}(t,{limit:12,cursor:e});s(e?e=>[...e,...r.items]:r.items),c(r.cursor),u(r.hasMore)}catch(r){console.error("Error loading works:",r)}};return(0,e.useEffect)(()=>{(async()=>{i(!0),await Promise.all([h(),m()]),i(!1)})()},[t]),n?(0,ht.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,ht.jsxs)("div",{className:"text-center",children:[(0,ht.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,ht.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading tag content..."})]})}):(0,ht.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ht.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,ht.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,ht.jsxs)("div",{children:[(0,ht.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:["#",t]}),r&&(0,ht.jsxs)("p",{className:"text-gray-600 mt-2",children:[r.works," works"]})]})})}),(0,ht.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,ht.jsxs)("div",{children:[(0,ht.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:o.map(e=>(0,ht.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow cursor-pointer",onClick:()=>window.open(`/work/${e.id}`,"_blank"),children:[(0,ht.jsx)("div",{className:"aspect-w-16 aspect-h-9 bg-gray-200 rounded-t-lg",children:(0,ht.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-48 object-cover rounded-t-lg"})}),(0,ht.jsxs)("div",{className:"p-4",children:[(0,ht.jsx)("h3",{className:"font-medium text-gray-900 truncate",children:e.title}),(0,ht.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["by ",e.author.name]})]})]},e.id))}),d&&(0,ht.jsx)("div",{className:"text-center mt-8",children:(0,ht.jsx)("button",{onClick:()=>{d&&m(l)},className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700",children:"Load More Works"})})]})})]})},Yd=()=>(0,ht.jsxs)(ht.Fragment,{children:[(0,ht.jsx)(io,{}),(0,ht.jsx)(na,{}),(0,ht.jsx)(to,{}),(0,ht.jsx)(no,{})]}),Zd=()=>{const{navigateToCollaboration:e,navigateToMilestone:t}=_r();return(0,ht.jsxs)(be,{children:[(0,ht.jsx)(ve,{path:"/login",element:(0,ht.jsx)(lo,{})}),(0,ht.jsx)(ve,{path:"/register",element:(0,ht.jsx)(Oo,{})}),(0,ht.jsx)(ve,{path:"/",element:(0,ht.jsx)(Lo,{children:(0,ht.jsx)(Yd,{})})}),(0,ht.jsx)(ve,{path:"/me",element:(0,ht.jsx)(Lo,{children:(0,ht.jsx)(sa,{})})}),(0,ht.jsx)(ve,{path:"/work/:id",element:(0,ht.jsx)(Lo,{children:(0,ht.jsx)(ii,{})})}),(0,ht.jsx)(ve,{path:"/artist/:id",element:(0,ht.jsx)(Lo,{children:(0,ht.jsx)(sa,{})})}),(0,ht.jsx)(ve,{path:"/tagme",element:(0,ht.jsx)(Lo,{children:(0,ht.jsx)(ys,{onCollaborationClick:t=>{e(t)},onMilestoneClick:e=>{t(e)}})})}),(0,ht.jsx)(ve,{path:"/tagme/milestone/:id",element:(0,ht.jsx)(Lo,{children:(0,ht.jsx)(xo,{})})}),(0,ht.jsx)(ve,{path:"/tagme/collaboration/:id",element:(0,ht.jsx)(Lo,{children:(0,ht.jsx)(Ma,{})})}),(0,ht.jsx)(ve,{path:"/tagme/co-future-2025",element:(0,ht.jsx)(_i,{})}),(0,ht.jsx)(ve,{path:"/upload/guidelines",element:(0,ht.jsx)(zs,{})}),(0,ht.jsx)(ve,{path:"/upload/form",element:(0,ht.jsx)(Lo,{children:(0,ht.jsx)(Ws,{children:(0,ht.jsx)(Nn,{})})})}),(0,ht.jsx)(ve,{path:"/upload",element:(0,ht.jsx)(zs,{})}),(0,ht.jsx)(ve,{path:"/notifications",element:(0,ht.jsx)(Lo,{children:(0,ht.jsx)(To,{})})}),(0,ht.jsx)(ve,{path:"/notification-test",element:(0,ht.jsx)(Lo,{children:(0,ht.jsx)(ks,{})})}),(0,ht.jsx)(ve,{path:"/settings/edit-profile",element:(0,ht.jsx)(Lo,{children:(0,ht.jsx)(qd,{})})}),(0,ht.jsx)(ve,{path:"/test-mock-api",element:(0,ht.jsx)(Lo,{children:(0,ht.jsx)(Ns,{})})}),(0,ht.jsx)(ve,{path:"/test-collaboration",element:(0,ht.jsx)(Lo,{children:(0,ht.jsx)(ws,{})})}),(0,ht.jsx)(ve,{path:"/t/:slug",element:(0,ht.jsx)(Lo,{children:(0,ht.jsx)(Kd,{})})}),(0,ht.jsx)(ve,{path:"/major-aggregation",element:(0,ht.jsx)(Lo,{children:(0,ht.jsx)(Pi,{})})}),(0,ht.jsx)(ve,{path:"*",element:(0,ht.jsx)(fe,{to:"/",replace:!0})})]})};function Qd(){const{state:t}=xr();return(0,e.useEffect)(()=>{document.body.style.overflow="unset",document.documentElement.style.overflow="unset"},[]),t.isInitialized?(0,ht.jsx)(Dt,{children:(0,ht.jsxs)(tt,{children:[(0,ht.jsx)(yr,{}),(0,ht.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,ht.jsx)(Pr,{}),(0,ht.jsxs)("main",{className:"pt-16",children:[(0,ht.jsx)(br,{}),(0,ht.jsx)(Zd,{})]})]})]})}):(0,ht.jsx)(kr,{})}const Xd=function(){return(0,ht.jsx)(gt,{children:(0,ht.jsx)(vr,{children:(0,ht.jsx)(Qd,{})})})};console.log("\ud83d\udd27 \u5f53\u524d\u4f7f\u7528 Mock API \u6a21\u5f0f"),console.log("\ud83d\udca1 \u4f7f\u7528 localStorage \u6a21\u62df\u540e\u7aef\u529f\u80fd"),console.log("\ud83d\udcdd \u4e0a\u4f20\u548c\u5c55\u793a\u6d41\u7a0b\u5df2\u5b8c\u5168\u8dd1\u901a");t.createRoot(document.getElementById("root")).render((0,ht.jsx)(e.StrictMode,{children:(0,ht.jsx)(Xd,{})}))})()})();
//# sourceMappingURL=main.8f078d01.js.map